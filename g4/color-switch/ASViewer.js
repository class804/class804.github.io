var com = {"adobe":{"utils":{},"crypto":{}},"facebook":{"graph":{"core":{},"data":{},"utils":{},"controls":{},"net":{}}}};
var flash = {"display":{},"display3D":{"textures":{}},"events":{},"filters":{},"geom":{},"media":{},"net":{},"system":{},"text":{},"ui":{},"utils":{},"__native":{},"desktop":{},"errors":{},"external":{}};
var global = {};
var s3eSocial = {};
var s3eUtils = {};
var tools = {"fps":{},"init":{}};
var api = {"odnoklassniki":{"events":{},"sdk":{"discussions":{},"errors":{},"events":{},"friends":{},"messages":{},"notifications":{},"share":{},"users":{},"widget":{},"photos":{},"stream":{}},"net":{},"core":{}},"ru":{"events":{}},"vk":{"events":{}},"wizq":{}};
var datas = {};
var deng = {"fzip":{},"utils":{}};
var errors = {};
window.Module = {
    calledRun: true,
    noExitRuntime: true
};
// ресурсы кнопок для рекламы
// чтобы не выкачивать с интернета
var s3eHTML5AdsResources = {};
(function() {
	// получить графику кнопки закрытия рекламы
	this.getCloseButton = function() {
		return closeBtn;
	}
	
	// получить графику иконки загрузки рекламы
	this.getLoaderImg = function() {
		return loaderImg;
	}

	// графика кнопки закрытия
	// используется при просмотре рекламы
	// сама кнопка включается настройками рекламы
	var closeBtn =  'data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAACyCAQAAABMg13jAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAHdElNRQfiChIOHhztJtkGAAAZOklEQVR42uWdeXwV1dnHvwlLBbHYWlyqIu5LQQWVixuyigREwk6CIjsCQujytr5tP+3b9m37tlYCosiOIKCyCkJYQhJE1Otra9/6drFvF7e6byiCBpK8f5y5c8+cc+6dOXPn3pvAjz9Cnpl7lm8mkzlnzvM7BQ2k1m89300TXwpoAHiQ408OgWbUBSNwlfO10LKC8SyiQPr+OJLT4xLW0MKOQEDILuLFTGSJ+NTxhdnp7ShWMoLHaGlDIBBkp7BxLKYQGM8SmtlU0vTl9HQkj9AMKGYDXwpOIABkBbH4/9LjCbPTyxGsFr0GBvIErYIS8IXsFHIni90KAMay/HjB7PRwOGs8BPqxldbBCPhAdgoYm7hBSLqdh48HzC7itRqB3uygTRACBeke4WLiyx0s0yoQWsvtQR9nmqYcfMNYS3PjCfsZwIFUBII/wo1JiRhGJ+5Sx+bV7IsYrmc3J/sR8IM8hhUpEQOMPHYxOz0aypqUiAGuYQ+npCeQHnKJirhQ3OtljUz8nI8tzBLiFnK8gK+op3ZhD+3SEUgDOVbCShXxGL7Nl9UTh7PWdgzU2OX0ZAhrxLAjoQJG8j3OVE+/ghpOT00gJeTYKBVxAaV043TKaKuePIy1dmOgxi2nF8WJXiUJjKQ7JzGLs9WPXEYNX09FIAXk2ChnbCNVMIZrAcyYh/LosYLZ6cHgRI+SBEbQHYA2zOIc9WMXs5f2ZgJGyLEROuJSBzHAaSbMxTx+LGB2Wj8oMT+RJDCCm9zvWjOT89SPXsBeOpgIGCDHRihjGwoo5TrPOacxWzy5yLqN9U0ds4t4nYp4uIQYoBUzuED9eAf2iqCXgAY5NtwfMcCplOmYb2VjU8bstHqgCXEP7ewTmMFFarA9e7lYJaCM+GLD1afCAkq4PkWj3qOcj9RgBYOphaY3CnQRb1ARD6Nnis/Usog/qcG36S2CcSfguZJjw2wQQztm81U12J/NNtOAjUVOa4t0xENTIoaWTKGjGjydGq6QAxJkE+JRaRADfC0V5hOkhjcBuYg3eRHDUHql/WQLJnuJArRjD12S37qQY4axzShu9G3eKcwWo0pZt7A5+Gxr/uW0sr+OeJgPYoDmTKCzjmUPXRPfOPfk2BDzg3cwfcgcPlCDuyjmEDT+e7OD+JbEbS6pIIiF6lnBC2rwAAPi+8GBnBligA8p5301WMltjR9zasRD6GNRTj2r3D90rg5SFN8HhRDrzSr116SjFWL4KrP5mhrsE/zdQb7ktKwfmzJDDIXcof/9asOOWG8ohPgeBokrLqmX2GHZ3K8wW0xFyerFtsaM2UXs/KFOqtgSMUABvfU50dbcFWtZCBDfw2AV8xZ2WlbyFWZzqhrsQQUnSh1qRHJadDObdMR9Q5T3NuUcVYPrGR2vdZ4u4rsTf6aSesIa88mU6Zi7UxHsTVhu5SJ2noOSGhwK8VuU84kaXMfo+BHPiC9mrPBmy8oOUM47anAfRRyExvMn0EHcl83qW4jb6BeivLco51M1uI7R8TrwDEbiuyjmsPe8zey2rK4tZWL+WtaNVHCS1Lk8y2lFn6gQv8kcHfFjCcTKsDq+k2I+9567KRrMN1AhXqnkH7PTgt48oSIeFArxG5SLX1NZaymlLvGNMgtnxlxpWe2XKeMMNXg9FWISOr+Yndp7sUVHfEuI8t5gno54dWKphJA21RnfQTFfeGMbo8F8HTvyjdmpuWfiCT6pgaEQv85cHfEqxsqIjZP28R0Ui8nKpDZSZVn9ScwWL71kdWNXPjE7tfbgSR1xUYjyXmcen6nBhxmnLvgxvn6Ku3PCSa23xtyGMh1zVyr9F4NkR06NNyUGSEkNiA7xciboa6pSvEiNV+hXczjMZ6nBq6kUSxdyi9mprTvbdcQDQpT3GnN1xMuYaFq2lnJJQHw7Q1TMG0JgnqljvopKMQmdO8xRI36VuerYDZYwkXrQRwNpFrfEtzHUi7mBDVRbNqeNaZVCl9xidmq5ke1iiJ9UUSjErzBPHVDAEianyqZJv0zrSYarmNdTY9mkE5mpY+5Mpd8KsqiUDvHAEOX9k/t1xItSI/ZfcLhFx7wuBOZZYt2HrM5UitnR7GJ2Sr+B7WIGJalbQiH+B/N1xA8xNV1OmP/S2S2M1DHvtWxaa9OamyupTL9QL3OlQzwoRHl/NyF+kGnp0+7SQnY+tFnH/Lg15lbMFMtrZF3htx4yMzmlXs92MXOSVL+QiB9Qh8Mwnxl+mY0+V7KLebSO+SnLJrbibs5Vg52oFrOj0WN2SrzOhPi2EOX9jfk64nnM9E8e9b1dOB/eqGN+jH2WzWzFDH0F2Teo5jQJSkRyEVeoa31vDo34CzVYTlmQ/NwAKWYu5hKOyPEGHg2BebqO+TKq063uDSOnpGvZriLuy+AQ5f2N+eqgAe5jdrAU6EDJkk4hG0yYn7ZsbitmcL4avJRqMZ8UDWYXcYW6+LQvxSHK+6sJ8b18y0MnjQqCJrCnSlJJv5DLrM95gL+rwZfpyVvBGp1eTktj7FQR92FIiPJeZoGO+Nf8m39brRPYneLWU+J9W9jAGp6xbPYJpmWnF1Odeq16cEWN+C8mxL8KgjipwJDdItdR4p0tbWC1NeYvpcJ8pgQqhJxPXqMj7h0K8Z95SEf8S74r8QggC8jRYm5pWt17EdViPikcZudTV7NbRdyLoSHK+5MJ8c+5R2IRSFaQ3aIfjwbzNLFeWtaF1IiJDnvMLuJKHfEw69LgTyz0/p0H+BnflzgElCVkCfMYHfOzlmW15C4uUYPnU5MqwSWdnLOviuoq/iMP6Yh/wg8lBoFlDdmt4lHvy8KwmKdyqRo8jxox0REcs4u4Us2x6MlQYTVjpf9lob4a6Ef8SOq/hUJAdqtZyx1ezPWs5jnLsoyYz6XGnEdklnNWl0Sec1I9GRYK8SId8Q/5idR3K4WC7Fa1Rn0vW88j+gJSH7VgKpepwQ7UiIkOf8wSYiUjt0coxC+ZEH+fn0n9tlRIyG51q7lTxbwqBOYpOuZzqBEj8PSYnaOd2a3mVfRgeAjEf2Cxjvgefi712VqhIbtVPpJ4BZ5QPat43rKsFkzlG2qwPdV+mFMjvikU4t+zxIT4l1J/QygDyG61qxivYl5pjbm5KY+oPTViosOM2YleyW41baU7I0IgfpFlOuLvZoo4Q8hu1SsTr8ITqmcl/21ZVnMm00kNnk0NF4IJczrEI6NC/B1+JfUzpDKE7Fa/Qsf8sJ6q4qPmTOJyNXgW1WJo6MXsfHcFu9U8ihtDIf4dS70dAPgW90p9DK2MIUuYJ4lVBwkZM4J81JyJXKkGz6RaTaV1/ne5CfGoEIh/yzJv46GB2dwn9S8DRQDZbcbyxOKOhOpZofh9+qs54/WsuK9TLYaGAq6LuFJNU7k+FOIXWK4jLqNc6ltGCjyf7CfXaHKJt5eFjHPnVYOqjmW8qAbfphd/lr7vSJWOuCQU4hU64pnMh0wRW88n+8lpzjIm4fm51bOc31mW1cx0NZ9OtfQwbUB8XSjEz5sQz4gCcVKRXcngXs0TWKxezePlVONAqmeZ/sN510kRLTAhLg2BOM4qHfE0HoIoECeu5Eghu5gnsVDFbMg/9lE9y/UWvOd8jQTxczySRcRZuF0IOU1bzBT1pmG4y/qokHFcrQbbOf88ujYU4mdNiKdGh1juScRyMd/lxVwXCvOdyVT7lLqWMSEQP2NCPJlFUh8iU+SQ3SYu1DEvD4H5joRjaAp1C3UV72c1yo2ynokskdofobIAWcI83duToyzn99YNvJ1uKY92Y0yILjzNGhVxHRNZJrU9UmUFstvUBYnFeAkdZRn/Y93EMSkwx0Ih3sdaHfEElkvtjlhZguw290HuVjEvDYX5Wi3aldtDNP8pHtURj+Nhqc2RK2uQ3SY/kFj3mNBRlvIH62aOUWzTunJHKMSP6YjHskpqbxaURchus+czS8W8xBpzAaXScrBrQiGuMSG+ndVSW7OirEJ2m35/YolpQkdZwkuWZRVQwg0AXMPYEA2vZp2OeAxrpXZmSc1+nObgWxFUMIBtAHE+pp/8rFXP7zlbd8dIqwI68imncmcIxFVs0BGX8hhkD3EiVTTiYbVZzmC7jDneeHMm66+cfNRAQwjEe9igho5SwjrI5lWcpWG1WU43ypmt9nMRf7QsqyBEkyt1xEcYnW3ESeUEsoT5m974URZaY7bVbjaqoVpGs15qV5aVI8hud+Yk1qcndJSFuqVohNrJJjVUyyhxaefKrCdnkN0u3ce3vfFsYt7BE2qolhGCe+78kHII2e3Wb/iON34kS5h3sEUN1TJMcM+l5VROIbtdu1ekAySVDcwVJsRD2Cq1I0fKMWS3e7/me974ERZ63pNmqu2CpqxaBouH9lwbp+UcstvF/8om5id5Ug19wWAqpPpzqDxAljD/uzdeGxHmrWxXQ5/nD3GeILtd/YUJ818yLHuLoCnrMIOFw2t+HBbzBFnC/ANvvJaHeDmDcp/Q/XIPUyxsR/NlYpk3yG6X/5MV3ngtC0Jj3mQycZ2aX8R5hZy627Us4MMQ5b2QxvIyn1aseYWcegV9f33PhwDqoq/TCFBX9pVHyK736wj1SDjvV7FOw7Ac7IeZZLlGobxBjtr7NdEdw1LFC9gTRWp8eOUJctTer3KHxumbq1zEnmy4wwRvUx6U2vv11gwRg9hcRXvfckliHWg+MOcBsmtMavB+7R9JDc2ZrCesXZZd5650yjlkF/H2aLxfzWrOZD2ZuFMiTyrXmHMMOWpj0tRqwRTdgeAKduXD8TankHOHGERq/IVqsEs+bLJzCDlq71d/tWS6bsJzde4x5wxy1N6vwdSSabpBWteEW1yuMOcIctTer8F1AtN0u7/r2JbLzZJyAjlK79d/8g/LT7Riuu54e0Pi70IuMOcAcpTer68wnwd4xfJTrZip+zd3z91GdlmHHKX36yvcz2EOc38IzHfr3vq9crXJaJYhR+n9+qprc36Y+3nV8tMnMlM4+8nqm9jsMLuYswo5Su/XVz1m/YeZZ425DbP0XXz65WI78yxCjtL79VVtP4RwmA1bfxWxPtuYswbZNSat0I1JM0cMAvNrliWdxCwx5ynr1sQ2vNnCnCXIUXq/vmZEDOEwt2WWvr5/CKtpJrU7YmUFcmrv117WiF9PiRjgEPN43bLEkynTt8wdxprsYc4C5HTer7bGpK8zT9/+x6NwmGfpu8aPYGW2MEcOOUrvV+M+YZo+C4H5q5Tp78NLWJodzNnxuzAYk/ayNiY1Il7gfL3LGz6RWfpgw0fvcx8fq8HlTAi2GUAQZcVUJJ33q61r5humrdgWMN353wNRYH6POTrmJel2cbJTFrKfovR+fcN0FQvXAfFvujD/SOoz5vGGZYvbUabe02AiD4rGRnfTiAyyi7gyc+9X4+auXv+MBqax0HvCwRCYT2WWOhiFqcwNYaGRRhFBloxJFcT2xqT/MiF2nWAeTPwaN3CX8FlJ6iDz+Jdly09nljr/CncL272oruVIILuIK3XvV1tj0n+Z9s91PY0EYBfzVBZ7TzzIXN60bP0ZlOmYy/iN1LMMFQFkyZhUQWzv/fqmCfFSL2Lpfw1MYan35IOUW2P+OjPVd2LwTeE2GwXmjCFH6f36pmkvc9fOz/vX3sU8yYTZNvX+LGaKqWVZ3+WnUg8zUIaQo/R+fcuMeGKqByoJ8zLvkYPMscZ8tgnzD/ix1MvQyghyasQ3WBuTGhEvN1/FCaXDbH81n8MMHfOPRLpFZpgzgCzZ62rGpKNDIP5UDS5PtUVxUs6ReiYJo6akPg2B+Vymc4Ia/KlIhcsEc2jITqWdTPa6tsakbzNXR+z6MacfeaXDPJe3LXt1HtPF1LKsX4ik+/CYQ0J2KuyYWCmZlL3369uU84kaXGHey9wk54w6JqkpPp9Qbo35fBPmeymTem2tUJCdyr4RhferEfHK4Iils+qYyErvkTCYL+QuHfN9zJR6bqkQkLOO2N3tIfgUjYt5vI7Z/qZxMVNo4Q0VUC6mpMJgtobsVHIZVepbHHvv13eYqyN29y2xmwWTMD/iPXKAubxj2ctLmeLdQBMKeICJEgELWUKOFnE5B9SguwOP/USji/lOHXO5NebLmKxjXsR4iUJgWUF2Cr+UKvWVbzdKLX9e75oQu3tJhZvLlTCv8R45QDnvWpbWkYkmzGMlEgFlQSYdYltjUiNid1e08NPlLuY7osB8OePF+6ikmrGUUolGIAVm4xR6CVXq+hB779d3KdffSLj7+2X2RkLC/Kj3yMchMF/JeLVvzXiYkRKRAApIxynwYhNiW+9XI2J3p8rMX/q4mMcI/8KkPqbcNcUPqs6M0zGvFu+Eg2IOxMdFXK0uJrO3133PjLgkKsRSKXWU8rj3yMfMscZ8lW6+2ow1YgFJMMwBCDkFXUSVitje+9X46nJdtIilkuoSVpFJhcHcVb8htmCtWFwdBLMvIxdxtevv6cje+9V4FWcBsVRaXcIuMqkwN41u+mRBS9aJxEN/zD6UnAIupEpFfLU14vcp5yM16O7oHr0fhXQ1r/ce+Yhy3rcs7ToT5o0iS9kPc1pOLuJqdf301db2urlGLJV6NBrM1+uvIb7ERm6WSKWQP6kLqFIRX2WN+APKdS+WDZSIraGz56rilHyEEtV49kPK+cCytO764oZWbBJbJaXD7MfqgsTG80l10R9qfPQBc3TEG7OPWCrdiHmONeae+kbjrdnKTZAOc3pa55sQj48G8WhqJQhZlFNDLSWqx28YzIbFv63ZJnzgU2FOwyt2no64szXiD003is25QyzVUsto1efX2Dof9dFTik5ku9g8wow5JbHYedRwtjfWmQnWiA3XymZG5hKxVFMto9jsPWL8PfNRPz2L9iS2i/2TTJhTMIudS7WO2P4qNiDeknvEUm21jFTNaMNgNqTct2WnMPPSMRupxc6lRk3h7KzPSPnIiHgrw/OBWKqxluFRYB6gG/m0Zbcw81IxGyDHOlCtIr6ScZaIPzI9Ij3JsHwhlmqtZbhqSvuB6SneR4Poq4ZOZpfYrNiLWYMc60CNmu99JePV6WsffcQc/WF/G0PziViquZahKub3Q2AuprcaOoVdYodzGbOy0j52DjV08H7uCiZYIjZOwmynON+IhZzut2STanrUjtnq+nVfradKDb1HT7HlRNwJeK7k2DlUq4gvjwZxRWNBLF3NxarNsnGO0EdD6aGG2rHHa38kQY61p5pzvedfrr/n8lEKxIMbC2KpFbUUq1bL9pgLGM6NavA0qrgo+a0L2YS4UwjEhmnEHY3nKk5IwqzYLRunY9OqgFHKNnbAGVQl7Y8cyLGzqVZdZDoxKQRi7S3aDor5QupYI5HTmi8SHuFJvRsCc6m+KeOZVMccooVgRtzRGrHxffBOivlc6lQjkou5WHW2Nr5LT6sCSvUNc8+iOtYBoBBiZ1GtWk511Jd2+KipIZZa9TmDM8dcyO26e3N7qmLtoTB2BjtUxIXcFgKxtkZnF8Ui97xxIpZa9jnF7PIeeccac72+/Bee4XUojL/FTbygnm6XrWxcbdYEEEutO2zCPNcCcz1LdSf+LYyNNziDkdiX2Up37/FWTNf91IwyLk/dzWCR3t+4EQs5w5PWbFZHyqdTpidTGtTASnfo4aqKovgX4I74Yq1Zr/rqtmSqbimqyYh4D4OaDmKQMD9BH++RYJgfp0YNxekddzKXnUe4+CEGq69nalngu1nssYHYbekhbmOP94hxBbWiLTril+ifTA53ByPxWkaK/ZuTOsIi9XbtkTEro7rpIZZae4hB6mSEMaNFUqW+fczf6CvPNknD6ngdY1Uydazg6RSFG/OLqhnYFBFLLT7ErVR7jxhzsxw9re9c+QZ9vM8BngmieEN8ukh2TaqetVQaCjdmyu1tuoilVh9iIHu9R4xZhsALPKpu1PwefYSXWpKBNp8cv4d7vJEGNopt7CQZcz73UtSUEUstP0SRjnmOhvklVoosuKQO0E88yckMDG9G4r/kbvXHs42NUsh4FT/V9BFLrT9EEU95j6hX819ZKpY/JXWIgbyoMzC+44vPT+QfJVXJWuenZszD33dsIJZ6YMAsJ9i/wkIxtZhULUPEHzCVQYrXz/EVjFLLeJoV1JkdJfYlHliaPmKpF59RxD7vkYRVxJs8qLrV1VGaare0NEZPsf6sVw3+O/GRbkHzNP3FD/jYQCzkDE/asF2dkz+LEhapk6ENTBBpxzKDQG5ase5s9R3uHJOIQcJcIRZhJVWARm025TqDYG5aT9HXZ0HCfoqOTcRujw5SxH7vEQ3xf5gQJ+W3JOh5eqTJmt1PkXhKP/YQS736lP4qZo/KhfVIagb+665eonsKo+JnKBLD+mMTsdSzTynimRSnLOebfgzSQnY++H90N2xaehwglnr3Cf2NmNcnvGXSyedKdqp4jZv4g+fAsxSJGe1jG7HUw08o4lnl0E5KgyQV+d4unI+/Q0+ed4PP0f94QSz18gD9eU4K72dIsKUOAdbCOkV8SB9n2jTOLccTYqmnB7jFfQHyIgOCjnEDus46z4ytWMep9D3eEHsYtGUXXXmZG8UqnnQUrK193WV6rY5PxBKDtuxmiBj4pqcQwj9ZXgx6PCKWGLQNdqElIP8/FPfUvHzAvBMAAAAASUVORK5CYII=';
				   
	// графика иконки загрузки
	// используется при просмотре рекламы	
	var loaderImg = 'data:image/svg+xml;utf8;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIAoJY2xhc3M9InN2Zy1sb2FkZXIiIAoJeG1sbnM9Imh0dHA6Ly9'+
					'3d3cudzMub3JnLzIwMDAvc3ZnIiAKCXhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOT'+
					'k5L3hsaW5rIiAKCXg9IjBweCIKCXk9IjBweCIgCgl2aWV3Qm94PSIwIDAgODAgODAiIAoJeG1sO'+
					'nNwYWNlPSJwcmVzZXJ2ZSI+Cgo8cGF0aCAKCWZpbGw9IiNmZmZmZmYiIAoJZD0iTTEwLDQwYzAs'+
					'MCwwLTAuNCwwLTEuMWMwLTAuMywwLTAuOCwwLTEuM2MwLTAuMywwLTAuNSwwLTAuOGMwLTAuMyw'+
					'wLjEtMC42LDAuMS0wLjljMC4xLTAuNiwwLjEtMS40LDAuMi0yLjEKCWMwLjItMC44LDAuMy0xLj'+
					'YsMC41LTIuNWMwLjItMC45LDAuNi0xLjgsMC44LTIuOGMwLjMtMSwwLjgtMS45LDEuMi0zYzAuN'+
					'S0xLDEuMS0yLDEuNy0zLjFjMC43LTEsMS40LTIuMSwyLjItMy4xCgljMS42LTIuMSwzLjctMy45'+
					'LDYtNS42YzIuMy0xLjcsNS0zLDcuOS00LjFjMC43LTAuMiwxLjUtMC40LDIuMi0wLjdjMC43LTA'+
					'uMywxLjUtMC4zLDIuMy0wLjVjMC44LTAuMiwxLjUtMC4zLDIuMy0wLjRsMS4yLTAuMQoJbDAuNi'+
					'0wLjFsMC4zLDBsMC4xLDBsMC4xLDBsMCwwYzAuMSwwLTAuMSwwLDAuMSwwYzEuNSwwLDIuOS0wL'+
					'jEsNC41LDAuMmMwLjgsMC4xLDEuNiwwLjEsMi40LDAuM2MwLjgsMC4yLDEuNSwwLjMsMi4zLDAu'+
					'NQoJYzMsMC44LDUuOSwyLDguNSwzLjZjMi42LDEuNiw0LjksMy40LDYuOCw1LjRjMSwxLDEuOCw'+
					'yLjEsMi43LDMuMWMwLjgsMS4xLDEuNSwyLjEsMi4xLDMuMmMwLjYsMS4xLDEuMiwyLjEsMS42LD'+
					'MuMQoJYzAuNCwxLDAuOSwyLDEuMiwzYzAuMywxLDAuNiwxLjksMC44LDIuN2MwLjIsMC45LDAuM'+
					'ywxLjYsMC41LDIuNGMwLjEsMC40LDAuMSwwLjcsMC4yLDFjMCwwLjMsMC4xLDAuNiwwLjEsMC45'+
					'CgljMC4xLDAuNiwwLjEsMSwwLjEsMS40Qzc0LDM5LjYsNzQsNDAsNzQsNDBjMC4yLDIuMi0xLjU'+
					'sNC4xLTMuNyw0LjNzLTQuMS0xLjUtNC4zLTMuN2MwLTAuMSwwLTAuMiwwLTAuM2wwLTAuNGMwLD'+
					'AsMC0wLjMsMC0wLjkKCWMwLTAuMywwLTAuNywwLTEuMWMwLTAuMiwwLTAuNSwwLTAuN2MwLTAuM'+
					'i0wLjEtMC41LTAuMS0wLjhjLTAuMS0wLjYtMC4xLTEuMi0wLjItMS45Yy0wLjEtMC43LTAuMy0x'+
					'LjQtMC40LTIuMgoJYy0wLjItMC44LTAuNS0xLjYtMC43LTIuNGMtMC4zLTAuOC0wLjctMS43LTE'+
					'uMS0yLjZjLTAuNS0wLjktMC45LTEuOC0xLjUtMi43Yy0wLjYtMC45LTEuMi0xLjgtMS45LTIuN2'+
					'MtMS40LTEuOC0zLjItMy40LTUuMi00LjkKCWMtMi0xLjUtNC40LTIuNy02LjktMy42Yy0wLjYtM'+
					'C4yLTEuMy0wLjQtMS45LTAuNmMtMC43LTAuMi0xLjMtMC4zLTEuOS0wLjRjLTEuMi0wLjMtMi44'+
					'LTAuNC00LjItMC41bC0yLDBjLTAuNywwLTEuNCwwLjEtMi4xLDAuMQoJYy0wLjcsMC4xLTEuNCw'+
					'wLjEtMiwwLjNjLTAuNywwLjEtMS4zLDAuMy0yLDAuNGMtMi42LDAuNy01LjIsMS43LTcuNSwzLj'+
					'FjLTIuMiwxLjQtNC4zLDIuOS02LDQuN2MtMC45LDAuOC0xLjYsMS44LTIuNCwyLjcKCWMtMC43L'+
					'DAuOS0xLjMsMS45LTEuOSwyLjhjLTAuNSwxLTEsMS45LTEuNCwyLjhjLTAuNCwwLjktMC44LDEu'+
					'OC0xLDIuNmMtMC4zLDAuOS0wLjUsMS42LTAuNywyLjRjLTAuMiwwLjctMC4zLDEuNC0wLjQsMi4'+
					'xCgljLTAuMSwwLjMtMC4xLDAuNi0wLjIsMC45YzAsMC4zLTAuMSwwLjYtMC4xLDAuOGMwLDAuNS'+
					'0wLjEsMC45LTAuMSwxLjNDMTAsMzkuNiwxMCw0MCwxMCw0MHoiCgk+CgoJPGFuaW1hdGVUcmFuc'+
					'2Zvcm0KCQlhdHRyaWJ1dGVUeXBlPSJ4bWwiCgkJYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIgoJ'+
					'CXR5cGU9InJvdGF0ZSIKCQlmcm9tPSIwIDQwIDQwIgoJCXRvPSIzNjAgNDAgNDAiCgkJZHVyPSI'+
					'wLjZzIgoJCXJlcGVhdENvdW50PSJpbmRlZmluaXRlIgoJLz4KPC9wYXRoPgo8L3N2Zz4=';
	
	return this;
}).bind(s3eHTML5AdsResources)();
// класс-прокси для взаимодействия с GAdvertisementManager
// выполняет инициализую конкретных рекламных провайдеров и вызывает необходимые методы
// для инициализации провайдера требуется json с ключем "providerName"
// для вызова функций загрузки рекламы, показа и остановки требуется передавать имя провайдера
var s3eHTML5Ads = {};
(function() {
	this.name = 's3eHTML5Ads';

	// список проинициализированных провайдеров
	this.providers = [];

	// общие объекты для всех провайдеров
	var _console_;
	var _callback_;
	var _adContainer_;
  	var _videoContent_;
	
	var _adRootContainer_;
	
	var _adLoader_;
	
	var _deg_;

  	// список возможных коллбэков
	this.S3E_HTML5_ADS_INIT_FAIL                       = 0;
	this.S3E_HTML5_ADS_INIT_SUCCESS                    = 1;
	this.S3E_HTML5_ADS_AD_ISNT_AVAILABLE               = 2;
	this.S3E_HTML5_ADS_AD_IS_AVAILABLE                 = 3;
	this.S3E_HTML5_ADS_AD_STARTING_FAIL                = 4;
	this.S3E_HTML5_ADS_AD_STARTING_SUCCESS             = 5;
	this.S3E_HTML5_ADS_AD_SERVING_INTERRUPTED          = 6;
	this.S3E_HTML5_ADS_AD_IS_SHOWN_SUCCESSFULLY        = 7;
	this.S3E_HTML5_ADS_AD_WAS_CLICKED                  = 8;
	this.S3E_HTML5_ADS_IDLE                            = 9;
	
	this.S3E_HTML5_ADS_SHOW_CONTAINERS = 0;
    this.S3E_HTML5_ADS_HIDE_CONTAINERS = 1;
    this.S3E_HTML5_ADS_HIDE_LOADER = 2;
	this.S3E_HTML5_ADS_HIDE_CLOSE_BUTTON = 3;

	var _self_ = this;

	// получить объект рекламного провайдера
	function getClass(str_name) {
		/*if (window[str_name])
			return window[str_name];*/
		var provider = null;
		/*if(str_name == 's3eLifeStreet') {	
			Absolutist.__.ad.com.lifestreet.LifeStreet.setConsole(_console_);		
			provider = Absolutist.__.ad.com.lifestreet.LifeStreet.instance();			
		}
		if(str_name == 's3eiWin') {
			Absolutist.__.ad.com.iwin.IWin.setConsole(_console_);	
			provider = Absolutist.__.ad.com.iwin.IWin.instance();
		}
		if(str_name == 's3eGoogleAdSense') {
			Absolutist.__.ad.com.adsense.GoogleAdSense.setConsole(_console_);	
			provider = Absolutist.__.ad.com.adsense.GoogleAdSense.instance();
		}
		if(str_name == 's3eFBInstant') {
			Absolutist.__.ad.com.fbinstant.FBInstantAPI.setConsole(_console_);	
			provider = Absolutist.__.ad.com.fbinstant.FBInstantAPI.instance();
		}
		if(str_name == 's3eCPMStar') {
			Absolutist.__.ad.com.cpmstar.CPMStar.setConsole(_console_);	
			provider = Absolutist.__.ad.com.cpmstar.CPMStar.instance();
		}	
		if(str_name == 's3eApplixir') {
			Absolutist.__.ad.com.applixir.Applixir.setConsole(_console_);	
			provider = Absolutist.__.ad.com.applixir.Applixir.instance();
		}		
		if(str_name == 's3eArkadium') {
			Absolutist.__.ad.com.arkadium.Arkadium.setConsole(_console_);	
			provider = Absolutist.__.ad.com.arkadium.Arkadium.instance();			
		}	
		if(str_name == 's3eOK') {
			Absolutist.__.ad.com.ok.OKAPI.setConsole(_console_);	
			provider = Absolutist.__.ad.com.ok.OKAPI.instance();			
		}
		if(str_name == 's3eLifeStreetHtml5') {	
			Absolutist.__.ad.com.lifestreethtml5.LifeStreetHtml5.setConsole(_console_);		
			provider = Absolutist.__.ad.com.lifestreethtml5.LifeStreetHtml5.instance();			
		}
		if(str_name == 's3eHyprMX') {
			Absolutist.__.ad.com.hyprmx.HyprMX.setConsole(_console_);	
			provider = Absolutist.__.ad.com.hyprmx.HyprMX.instance();			
		}
		if(str_name == 's3eCPMStarIMA') {
			Absolutist.__.ad.com.cpmstarima.CPMStarIMA.setConsole(_console_);	
			provider = Absolutist.__.ad.com.cpmstarima.CPMStarIMA.instance();			
		}
		if(str_name == 's3eFBAudienceNetwork') {
			Absolutist.__.ad.com.facebookaudiencenetwork.FBAudienceNetwork.setConsole(_console_);	
			provider = Absolutist.__.ad.com.facebookaudiencenetwork.FBAudienceNetwork.instance();			
		}
		if(str_name == 's3eYandex') {
			Absolutist.__.ad.com.yandexgames.YandexGames.setConsole(_console_);	
			provider = Absolutist.__.ad.com.yandexgames.YandexGames.instance();			
		}
		if(provider != null) {
			provider.name = str_name;
		}*/
		return provider;
	}

	// получить провайдера из списка providers
	function getProvider(providerName) {
		for (var provider in _self_.providers) {
			if (_self_.providers[provider].name == providerName) {
				return _self_.providers[provider];
			}
		}
		return null;
	}

	// назначить коллбек
	this.setCallback = function(callback) {
		_callback_ = callback;
	};


	// назначить контейнер для рекламного баннера
	this.setAdRootContainer = function(adRootContainer) {
		_adRootContainer_ = adRootContainer;
	};
	
	// назначить контейнер для рекламного баннера
	this.setAdLoaderContainer = function(adLoader) {
		_adLoader_ = adLoader;
	};
	
	
	
	// назначить контейнер для рекламного баннера
	this.setAdContainer = function(adContainer) {
		_adContainer_ = adContainer;
	};
	
	// назначить контейнер для рекламного баннера
	this.setAdContainer = function(adContainer) {
		_adContainer_ = adContainer;
	};

	// назначить контейнер для видеорекламы
	this.setVideoContent = function(videoContent) {
		_videoContent_ = videoContent;
	};

	// назначить консоль для вывода логов
	this.setConsole = function(callback) {
		_console_ = callback;
	};

	// вызвать инициализацию провайдера
	// саму инициализацию выполняем только тогда,
	// когда убедились, что класс провайдера существует
	// но его нет в нашем списке providers
	// также задаем каждому провайдеру общие объекты (контейнеры, консоль, ...)
	this.configure = function(params) {
		var provider = getClass(params['providerName']);
		if (provider != null) {
			if (getProvider(provider.name) == null) {
				this.providers.push(provider);
			} else {
				log('provider "' + params['providerName'] + '" already exists!');
				//return;
			}
		} else {
			log ('no class named "' + params['providerName'] + '"');
			return;
		}

		provider = getProvider(params['providerName']);
		if (provider != null) {
			provider.setCallback(_callback_);
			provider.setUICallback(this.uiCallback.bind(this));
			provider.setAdContainer(_adContainer_);
			provider.setVideoContent(_videoContent_);
			//provider.setConsole(_console_);
			if(params['providerName'] == "s3eLifeStreetHtml5") {
			if(params.hasOwnProperty('adTagUrl')) {
				let tmpArray = params['adTagUrl'].split(';');
				if(tmpArray.length >= 5) {
					let tmpObj = {};
					tmpObj['slot_id'] = tmpArray[0];
					tmpObj['adkey'] = tmpArray[1];
					tmpObj['ad_size_width'] = tmpArray[2];
					tmpObj['ad_size_height'] = tmpArray[3];
					tmpObj['ad_type'] = tmpArray[4];	
					params['adTagUrl'] = tmpObj;				
				}			
			}
			if(params.hasOwnProperty('midroll')) {
				let tmpArray = params['midroll'].split(';');
				if(tmpArray.length >= 5) {
					let tmpObj = {};
					tmpObj['slot_id'] = tmpArray[0];
					tmpObj['adkey'] = tmpArray[1];
					tmpObj['ad_size_width'] = tmpArray[2];
					tmpObj['ad_size_height'] = tmpArray[3];
					tmpObj['ad_type'] = tmpArray[4];		
					params['midroll'] = tmpObj;					
				}			
			}
			if(params.hasOwnProperty('preroll')) {
				let tmpArray = params['preroll'].split(';');
				if(tmpArray.length >= 5) {
					let tmpObj = {};
					tmpObj['slot_id'] = tmpArray[0];
					tmpObj['adkey'] = tmpArray[1];
					tmpObj['ad_size_width'] = tmpArray[2];
					tmpObj['ad_size_height'] = tmpArray[3];
					tmpObj['ad_type'] = tmpArray[4];	
					params['preroll'] = tmpObj;					
				}			
			}
			if(params.hasOwnProperty('rewarded')) {
				let tmpArray = params['rewarded'].split(';');
				if(tmpArray.length >= 5) {
					let tmpObj = {};
					tmpObj['slot_id'] = tmpArray[0];
					tmpObj['adkey'] = tmpArray[1];
					tmpObj['ad_size_width'] = tmpArray[2];
					tmpObj['ad_size_height'] = tmpArray[3];
					tmpObj['ad_type'] = tmpArray[4];
					params['rewarded'] = tmpObj;					
				}			
			}
			if(params.hasOwnProperty('interstitial')) {
				let tmpArray = params['interstitial'].split(';');
				if(tmpArray.length >= 5) {
					let tmpObj = {};
					tmpObj['slot_id'] = tmpArray[0];
					tmpObj['adkey'] = tmpArray[1];
					tmpObj['ad_size_width'] = tmpArray[2];
					tmpObj['ad_size_height'] = tmpArray[3];
					tmpObj['ad_type'] = tmpArray[4];
					params['interstitial'] = tmpObj;					
				}			
			}			
			}
			provider.configure(params);
		}
	}
	
	// показать рекламу
	this.uiCallback = function(providerName,result) {
		switch (result) {
                case this.S3E_HTML5_ADS_SHOW_CONTAINERS:
                    if(_adRootContainer_) {
                        _adRootContainer_.style.visibility = 'visible';
                    }
                    _deg_ = 0;   
                    if(_adLoader_) { 
                        _adLoader_.style.visibility = 'visible';          
                        _adLoader_.style.transform = 'rotate(0deg)';
                        _adLoader_.style.transition = '2s linear';
                        _adLoader_.style.transform = "rotate("+_deg_+"deg)";
                        _adLoader_.addEventListener('transitionend', this.rotateLoader); 
                    }
                break;
                case this.S3E_HTML5_ADS_HIDE_CONTAINERS:
                    if(_adRootContainer_) {
                        _adRootContainer_.style.visibility = 'hidden';
                    }
                    if(_adLoader_) { 
                        _adLoader_.style.visibility = 'hidden';   
                        _adLoader_.style.transition = '';
                        _adLoader_.style.transform = 'rotate(0deg)';                    
                        _adLoader_.removeEventListener('transitionend',this.rotateLoader.bind(this),false);
                    } 
                break;
                case this.S3E_HTML5_ADS_HIDE_LOADER:
                    if(_adLoader_) { 
                        _adLoader_.style.visibility = 'hidden';   
                        _adLoader_.style.transition = '';
                        _adLoader_.style.transform = 'rotate(0deg)';                    
                        _adLoader_.removeEventListener('transitionend',this.rotateLoader.bind(this),false); 
                    }
                break;
				case this.S3E_HTML5_ADS_HIDE_CLOSE_BUTTON:
					var closeBtn = document.getElementById('s3eHTML5AdsCloseButton');
					if (closeBtn)
						_adContainer_.removeChild(closeBtn);
				break;
            }
	}	
	
	this.rotateLoader = function() {
        _adLoader_.style.transform = "rotate("+_deg_+"deg)";;
    }

	// загрузить рекламу
	this.loadAd = function(providerName,placementName, w, h, f) {
		var provider = getProvider(providerName);
		if (provider != null) {
			if(providerName == 's3eGoogleAdSense' || providerName == 's3eLifeStreet') {
				var closeBtnTimeout = parseInt(provider.closeBtnTimeout);
				this.addCloseButton(closeBtnTimeout);
			}
			log('loadAd width: ' + w);
			log('loadAd height: ' + h);
			if (f == true)
				log('loadAd fullscreen mode');
			provider.loadAd(placementName,w, h, f);
		}
	}

	// показать рекламу
	this.showAd = function(providerName,placementName) {
		var provider = getProvider(providerName);
		if (provider != null) {
			var closeBtnTimeout = parseInt(provider.closeBtnTimeout);
			this.addCloseButton(closeBtnTimeout);
			provider.showAd(placementName);
		}
	}
	
	// загрузить рекламу
	this.loadRewardedAd = function(providerName,placementName, w, h, f) {
		var provider = getProvider(providerName);
		if (provider != null) {
			if(providerName == 's3eGoogleAdSense' || providerName == 's3eLifeStreet') {
				var closeBtnTimeout = parseInt(provider.closeBtnTimeout);
				this.addCloseButton(closeBtnTimeout);
			}
			log('loadRewardedAd width: ' + w);
			log('loadRewardedAd height: ' + h);
			if (f == true)
				log('loadRewardedAd fullscreen mode');
			provider.loadRewardedAd(placementName,w, h, f);
		}
	}

	// показать рекламу
	this.showRewardedAd = function(providerName,placementName) {
		var provider = getProvider(providerName);
		if (provider != null) {
			var closeBtnTimeout = parseInt(provider.closeBtnTimeout);
			this.addCloseButton(closeBtnTimeout);
			provider.showRewardedAd(placementName);
		}
	}
	
	// загрузить рекламу
	this.addCloseButton = function(closeBtnTimeout) {
			// если выключена, то все-равно проверим существование
			var closeBtn = document.getElementById('s3eHTML5AdsCloseButton');
			if (closeBtn)
			    _adContainer_.removeChild(closeBtn);
			// таймаут меньше нуля считаем за выключенную кнопку закрытия рекламы
			// если больше - создаем кнопку, а конкретный провайдер ее удалит при завершении
			if (closeBtnTimeout >= 0 && window['s3eHTML5AdsResources']) {
				var adContainerWidth = _adContainer_.clientWidth;
				var adContainerHeight = _adContainer_.clientHeight;
				var resultContainerSize = adContainerHeight;
				if (adContainerWidth < adContainerHeight)
					resultContainerSize = adContainerWidth;

				var closeBtn = document.createElement('a');
				closeBtn.id = 's3eHTML5AdsCloseButton';
				closeBtn.style.position = 'absolute';
				closeBtn.style.display = 'none';

				closeBtn.style.top 		= '' + (((resultContainerSize / 50) / adContainerHeight) * 100) + '%';
				closeBtn.style.right 	= '' + (((resultContainerSize / 50) / adContainerWidth ) * 100) + '%';
				closeBtn.style.width 	= '' + (((resultContainerSize / 10) / adContainerWidth ) * 100 * 0.75) + '%';
				closeBtn.style.height 	= '' + (((resultContainerSize / 10) / adContainerHeight) * 100 * 0.75) + '%';

				closeBtn.style.background = 'transparent';
				closeBtn.style.zIndex = 1;
				closeBtn.addEventListener('click', function() {
					for (var provider in _self_.providers) {
						if (typeof _self_.providers[provider].stopAd === 'function')
							_self_.providers[provider].stopAd();
					} 
				});
				setTimeout(function() {
				    closeBtn.style.display = 'block';
				}, closeBtnTimeout);
				_adContainer_.appendChild(closeBtn);

				var closeBtnRes = document.createElement('img');
				closeBtnRes.src = s3eHTML5AdsResources.getCloseButton();
				closeBtnRes.style.width = '100%';
				closeBtnRes.style.height = '100%';
				closeBtn.appendChild(closeBtnRes);
			} 
	}

	// остановить рекламу
	this.stopAd = function(providerName) {
		var provider = getProvider(providerName);
		if (provider != null)
			provider.stopAd();
	}

	// изменение размера всем рекламным провайдерам
	this.resize = function(width, height, fullscreen) {
		log('resize width: ' + width);
		log('resize height: ' + height);
		if (fullscreen == true)
			log('resize fullscreen mode');
		for (var provider in _self_.providers) {
			if (typeof _self_.providers[provider].resize === 'function')
				_self_.providers[provider].resize(width, height, fullscreen);
		}
	}

	// функция вывода логов
	var log = function(message) {
		if (typeof _console_ === 'function') {
			_console_(_self_.name + ': ' + message);
		}
	};

	return this;
}).bind(s3eHTML5Ads)();
﻿/* pako 1.0.3 nodeca/pako */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.pako=t()}}(function(){return function t(e,a,i){function n(s,o){if(!a[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(r)return r(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var d=a[s]={exports:{}};e[s][0].call(d.exports,function(t){var a=e[s][1][t];return n(a?a:t)},d,d.exports,t,e,a,i)}return a[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e,a){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.options=l.assign({level:w,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var a=o.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==b)throw new Error(d[a]);if(e.header&&o.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(n="string"==typeof e.dictionary?h.string2buf(e.dictionary):"[object ArrayBuffer]"===_.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,a=o.deflateSetDictionary(this.strm,n),a!==b)throw new Error(d[a]);this._dict_set=!0}}function n(t,e){var a=new i(e);if(a.push(t,!0),a.err)throw a.msg;return a.result}function r(t,e){return e=e||{},e.raw=!0,n(t,e)}function s(t,e){return e=e||{},e.gzip=!0,n(t,e)}var o=t("./zlib/deflate"),l=t("./utils/common"),h=t("./utils/strings"),d=t("./zlib/messages"),f=t("./zlib/zstream"),_=Object.prototype.toString,u=0,c=4,b=0,g=1,m=2,w=-1,p=0,v=8;i.prototype.push=function(t,e){var a,i,n=this.strm,r=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:e===!0?c:u,"string"==typeof t?n.input=h.string2buf(t):"[object ArrayBuffer]"===_.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new l.Buf8(r),n.next_out=0,n.avail_out=r),a=o.deflate(n,i),a!==g&&a!==b)return this.onEnd(a),this.ended=!0,!1;0!==n.avail_out&&(0!==n.avail_in||i!==c&&i!==m)||("string"===this.options.to?this.onData(h.buf2binstring(l.shrinkBuf(n.output,n.next_out))):this.onData(l.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||0===n.avail_out)&&a!==g);return i===c?(a=o.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===b):i!==m||(this.onEnd(b),n.avail_out=0,!0)},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===b&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Deflate=i,a.deflate=n,a.deflateRaw=r,a.gzip=s},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(t,e,a){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var a=s.inflateInit2(this.strm,e.windowBits);if(a!==h.Z_OK)throw new Error(d[a]);this.header=new _,s.inflateGetHeader(this.strm,this.header)}function n(t,e){var a=new i(e);if(a.push(t,!0),a.err)throw a.msg;return a.result}function r(t,e){return e=e||{},e.raw=!0,n(t,e)}var s=t("./zlib/inflate"),o=t("./utils/common"),l=t("./utils/strings"),h=t("./zlib/constants"),d=t("./zlib/messages"),f=t("./zlib/zstream"),_=t("./zlib/gzheader"),u=Object.prototype.toString;i.prototype.push=function(t,e){var a,i,n,r,d,f,_=this.strm,c=this.options.chunkSize,b=this.options.dictionary,g=!1;if(this.ended)return!1;i=e===~~e?e:e===!0?h.Z_FINISH:h.Z_NO_FLUSH,"string"==typeof t?_.input=l.binstring2buf(t):"[object ArrayBuffer]"===u.call(t)?_.input=new Uint8Array(t):_.input=t,_.next_in=0,_.avail_in=_.input.length;do{if(0===_.avail_out&&(_.output=new o.Buf8(c),_.next_out=0,_.avail_out=c),a=s.inflate(_,h.Z_NO_FLUSH),a===h.Z_NEED_DICT&&b&&(f="string"==typeof b?l.string2buf(b):"[object ArrayBuffer]"===u.call(b)?new Uint8Array(b):b,a=s.inflateSetDictionary(this.strm,f)),a===h.Z_BUF_ERROR&&g===!0&&(a=h.Z_OK,g=!1),a!==h.Z_STREAM_END&&a!==h.Z_OK)return this.onEnd(a),this.ended=!0,!1;_.next_out&&(0!==_.avail_out&&a!==h.Z_STREAM_END&&(0!==_.avail_in||i!==h.Z_FINISH&&i!==h.Z_SYNC_FLUSH)||("string"===this.options.to?(n=l.utf8border(_.output,_.next_out),r=_.next_out-n,d=l.buf2string(_.output,n),_.next_out=r,_.avail_out=c-r,r&&o.arraySet(_.output,_.output,n,r,0),this.onData(d)):this.onData(o.shrinkBuf(_.output,_.next_out)))),0===_.avail_in&&0===_.avail_out&&(g=!0)}while((_.avail_in>0||0===_.avail_out)&&a!==h.Z_STREAM_END);return a===h.Z_STREAM_END&&(i=h.Z_FINISH),i===h.Z_FINISH?(a=s.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===h.Z_OK):i!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),_.avail_out=0,!0)},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===h.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Inflate=i,a.inflate=n,a.inflateRaw=r,a.ungzip=n},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(t,e,a){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;a.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(var i in a)a.hasOwnProperty(i)&&(t[i]=a[i])}}return t},a.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,a,i,n){if(e.subarray&&t.subarray)return void t.set(e.subarray(a,a+i),n);for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){var e,a,i,n,r,s;for(i=0,e=0,a=t.length;e<a;e++)i+=t[e].length;for(s=new Uint8Array(i),n=0,e=0,a=t.length;e<a;e++)r=t[e],s.set(r,n),n+=r.length;return s}},r={arraySet:function(t,e,a,i,n){for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){return[].concat.apply([],t)}};a.setTyped=function(t){t?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,n)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,r))},a.setTyped(i)},{}],4:[function(t,e,a){"use strict";function i(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&r))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var a="",i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a}var n=t("./common"),r=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var o=new n.Buf8(256),l=0;l<256;l++)o[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;o[254]=o[254]=1,a.string2buf=function(t){var e,a,i,r,s,o=t.length,l=0;for(r=0;r<o;r++)a=t.charCodeAt(r),55296===(64512&a)&&r+1<o&&(i=t.charCodeAt(r+1),56320===(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),r++)),l+=a<128?1:a<2048?2:a<65536?3:4;for(e=new n.Buf8(l),s=0,r=0;s<l;r++)a=t.charCodeAt(r),55296===(64512&a)&&r+1<o&&(i=t.charCodeAt(r+1),56320===(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),r++)),a<128?e[s++]=a:a<2048?(e[s++]=192|a>>>6,e[s++]=128|63&a):a<65536?(e[s++]=224|a>>>12,e[s++]=128|a>>>6&63,e[s++]=128|63&a):(e[s++]=240|a>>>18,e[s++]=128|a>>>12&63,e[s++]=128|a>>>6&63,e[s++]=128|63&a);return e},a.buf2binstring=function(t){return i(t,t.length)},a.binstring2buf=function(t){for(var e=new n.Buf8(t.length),a=0,i=e.length;a<i;a++)e[a]=t.charCodeAt(a);return e},a.buf2string=function(t,e){var a,n,r,s,l=e||t.length,h=new Array(2*l);for(n=0,a=0;a<l;)if(r=t[a++],r<128)h[n++]=r;else if(s=o[r],s>4)h[n++]=65533,a+=s-1;else{for(r&=2===s?31:3===s?15:7;s>1&&a<l;)r=r<<6|63&t[a++],s--;s>1?h[n++]=65533:r<65536?h[n++]=r:(r-=65536,h[n++]=55296|r>>10&1023,h[n++]=56320|1023&r)}return i(h,n)},a.utf8border=function(t,e){var a;for(e=e||t.length,e>t.length&&(e=t.length),a=e-1;a>=0&&128===(192&t[a]);)a--;return a<0?e:0===a?e:a+o[t[a]]>e?a:e}},{"./common":3}],5:[function(t,e,a){"use strict";function i(t,e,a,i){for(var n=65535&t|0,r=t>>>16&65535|0,s=0;0!==a;){s=a>2e3?2e3:a,a-=s;do n=n+e[i++]|0,r=r+n|0;while(--s);n%=65521,r%=65521}return n|r<<16|0}e.exports=i},{}],6:[function(t,e,a){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,a){"use strict";function i(){for(var t,e=[],a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}function n(t,e,a,i){var n=r,s=i+a;t^=-1;for(var o=i;o<s;o++)t=t>>>8^n[255&(t^e[o])];return t^-1}var r=i();e.exports=n},{}],8:[function(t,e,a){"use strict";function i(t,e){return t.msg=D[e],e}function n(t){return(t<<1)-(t>4?9:0)}function r(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(R.arraySet(t.output,e.pending_buf,e.pending_out,a,t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))}function o(t,e){C._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function l(t,e){t.pending_buf[t.pending++]=e}function h(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function d(t,e,a,i){var n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,R.arraySet(e,t.input,t.next_in,n,a),1===t.state.wrap?t.adler=N(t.adler,e,n,a):2===t.state.wrap&&(t.adler=O(t.adler,e,n,a)),t.next_in+=n,t.total_in+=n,n)}function f(t,e){var a,i,n=t.max_chain_length,r=t.strstart,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-ft?t.strstart-(t.w_size-ft):0,h=t.window,d=t.w_mask,f=t.prev,_=t.strstart+dt,u=h[r+s-1],c=h[r+s];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do if(a=e,h[a+s]===c&&h[a+s-1]===u&&h[a]===h[r]&&h[++a]===h[r+1]){r+=2,a++;do;while(h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&r<_);if(i=dt-(_-r),r=_-dt,i>s){if(t.match_start=e,s=i,i>=o)break;u=h[r+s-1],c=h[r+s]}}while((e=f[e&d])>l&&0!==--n);return s<=t.lookahead?s:t.lookahead}function _(t){var e,a,i,n,r,s=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-ft)){R.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,a=t.hash_size,e=a;do i=t.head[--e],t.head[e]=i>=s?i-s:0;while(--a);a=s,e=a;do i=t.prev[--e],t.prev[e]=i>=s?i-s:0;while(--a);n+=s}if(0===t.strm.avail_in)break;if(a=d(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=a,t.lookahead+t.insert>=ht)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+ht-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<ht)););}while(t.lookahead<ft&&0!==t.strm.avail_in)}function u(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(_(t),0===t.lookahead&&e===I)return vt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+a;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,o(t,!1),0===t.strm.avail_out))return vt;if(t.strstart-t.block_start>=t.w_size-ft&&(o(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===F?(o(t,!0),0===t.strm.avail_out?yt:xt):t.strstart>t.block_start&&(o(t,!1),0===t.strm.avail_out)?vt:vt}function c(t,e){for(var a,i;;){if(t.lookahead<ft){if(_(t),t.lookahead<ft&&e===I)return vt;if(0===t.lookahead)break}if(a=0,t.lookahead>=ht&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-ft&&(t.match_length=f(t,a)),t.match_length>=ht)if(i=C._tr_tally(t,t.strstart-t.match_start,t.match_length-ht),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=ht){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=C._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(o(t,!1),0===t.strm.avail_out))return vt}return t.insert=t.strstart<ht-1?t.strstart:ht-1,e===F?(o(t,!0),0===t.strm.avail_out?yt:xt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?vt:kt}function b(t,e){for(var a,i,n;;){if(t.lookahead<ft){if(_(t),t.lookahead<ft&&e===I)return vt;if(0===t.lookahead)break}if(a=0,t.lookahead>=ht&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=ht-1,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-ft&&(t.match_length=f(t,a),t.match_length<=5&&(t.strategy===q||t.match_length===ht&&t.strstart-t.match_start>4096)&&(t.match_length=ht-1)),t.prev_length>=ht&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-ht,i=C._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-ht),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=ht-1,t.strstart++,i&&(o(t,!1),0===t.strm.avail_out))return vt}else if(t.match_available){if(i=C._tr_tally(t,0,t.window[t.strstart-1]),i&&o(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return vt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=C._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<ht-1?t.strstart:ht-1,e===F?(o(t,!0),0===t.strm.avail_out?yt:xt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?vt:kt}function g(t,e){for(var a,i,n,r,s=t.window;;){if(t.lookahead<=dt){if(_(t),t.lookahead<=dt&&e===I)return vt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=ht&&t.strstart>0&&(n=t.strstart-1,i=s[n],i===s[++n]&&i===s[++n]&&i===s[++n])){r=t.strstart+dt;do;while(i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&n<r);t.match_length=dt-(r-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=ht?(a=C._tr_tally(t,1,t.match_length-ht),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=C._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(o(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===F?(o(t,!0),0===t.strm.avail_out?yt:xt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?vt:kt}function m(t,e){for(var a;;){if(0===t.lookahead&&(_(t),0===t.lookahead)){if(e===I)return vt;break}if(t.match_length=0,a=C._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(o(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===F?(o(t,!0),0===t.strm.avail_out?yt:xt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?vt:kt}function w(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}function p(t){t.window_size=2*t.w_size,r(t.head),t.max_lazy_match=Z[t.level].max_lazy,t.good_match=Z[t.level].good_length,t.nice_match=Z[t.level].nice_length,t.max_chain_length=Z[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=ht-1,t.match_available=0,t.ins_h=0}function v(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=V,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new R.Buf16(2*ot),this.dyn_dtree=new R.Buf16(2*(2*rt+1)),this.bl_tree=new R.Buf16(2*(2*st+1)),r(this.dyn_ltree),r(this.dyn_dtree),r(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new R.Buf16(lt+1),this.heap=new R.Buf16(2*nt+1),r(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new R.Buf16(2*nt+1),r(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function k(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Q,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ut:wt,t.adler=2===e.wrap?0:1,e.last_flush=I,C._tr_init(e),H):i(t,K)}function y(t){var e=k(t);return e===H&&p(t.state),e}function x(t,e){return t&&t.state?2!==t.state.wrap?K:(t.state.gzhead=e,H):K}function z(t,e,a,n,r,s){if(!t)return K;var o=1;if(e===Y&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),r<1||r>$||a!==V||n<8||n>15||e<0||e>9||s<0||s>W)return i(t,K);8===n&&(n=9);var l=new v;return t.state=l,l.strm=t,l.wrap=o,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+ht-1)/ht),l.window=new R.Buf8(2*l.w_size),l.head=new R.Buf16(l.hash_size),l.prev=new R.Buf16(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new R.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=a,y(t)}function B(t,e){return z(t,e,V,tt,et,J)}function S(t,e){var a,o,d,f;if(!t||!t.state||e>L||e<0)return t?i(t,K):K;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||o.status===pt&&e!==F)return i(t,0===t.avail_out?P:K);if(o.strm=t,a=o.last_flush,o.last_flush=e,o.status===ut)if(2===o.wrap)t.adler=0,l(o,31),l(o,139),l(o,8),o.gzhead?(l(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),l(o,255&o.gzhead.time),l(o,o.gzhead.time>>8&255),l(o,o.gzhead.time>>16&255),l(o,o.gzhead.time>>24&255),l(o,9===o.level?2:o.strategy>=G||o.level<2?4:0),l(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(l(o,255&o.gzhead.extra.length),l(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=O(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=ct):(l(o,0),l(o,0),l(o,0),l(o,0),l(o,0),l(o,9===o.level?2:o.strategy>=G||o.level<2?4:0),l(o,zt),o.status=wt);else{var _=V+(o.w_bits-8<<4)<<8,u=-1;u=o.strategy>=G||o.level<2?0:o.level<6?1:6===o.level?2:3,_|=u<<6,0!==o.strstart&&(_|=_t),_+=31-_%31,o.status=wt,h(o,_),0!==o.strstart&&(h(o,t.adler>>>16),h(o,65535&t.adler)),t.adler=1}if(o.status===ct)if(o.gzhead.extra){for(d=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),s(t),d=o.pending,o.pending!==o.pending_buf_size));)l(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=bt)}else o.status=bt;if(o.status===bt)if(o.gzhead.name){d=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),s(t),d=o.pending,o.pending===o.pending_buf_size)){f=1;break}f=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,l(o,f)}while(0!==f);o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),0===f&&(o.gzindex=0,o.status=gt)}else o.status=gt;if(o.status===gt)if(o.gzhead.comment){d=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),s(t),d=o.pending,o.pending===o.pending_buf_size)){f=1;break}f=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,l(o,f)}while(0!==f);o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),0===f&&(o.status=mt)}else o.status=mt;if(o.status===mt&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&s(t),o.pending+2<=o.pending_buf_size&&(l(o,255&t.adler),l(o,t.adler>>8&255),t.adler=0,o.status=wt)):o.status=wt),0!==o.pending){if(s(t),0===t.avail_out)return o.last_flush=-1,H}else if(0===t.avail_in&&n(e)<=n(a)&&e!==F)return i(t,P);if(o.status===pt&&0!==t.avail_in)return i(t,P);if(0!==t.avail_in||0!==o.lookahead||e!==I&&o.status!==pt){var c=o.strategy===G?m(o,e):o.strategy===X?g(o,e):Z[o.level].func(o,e);if(c!==yt&&c!==xt||(o.status=pt),c===vt||c===yt)return 0===t.avail_out&&(o.last_flush=-1),H;if(c===kt&&(e===U?C._tr_align(o):e!==L&&(C._tr_stored_block(o,0,0,!1),e===T&&(r(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),s(t),0===t.avail_out))return o.last_flush=-1,H}return e!==F?H:o.wrap<=0?j:(2===o.wrap?(l(o,255&t.adler),l(o,t.adler>>8&255),l(o,t.adler>>16&255),l(o,t.adler>>24&255),l(o,255&t.total_in),l(o,t.total_in>>8&255),l(o,t.total_in>>16&255),l(o,t.total_in>>24&255)):(h(o,t.adler>>>16),h(o,65535&t.adler)),s(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?H:j)}function E(t){var e;return t&&t.state?(e=t.state.status,e!==ut&&e!==ct&&e!==bt&&e!==gt&&e!==mt&&e!==wt&&e!==pt?i(t,K):(t.state=null,e===wt?i(t,M):H)):K}function A(t,e){var a,i,n,s,o,l,h,d,f=e.length;if(!t||!t.state)return K;if(a=t.state,s=a.wrap,2===s||1===s&&a.status!==ut||a.lookahead)return K;for(1===s&&(t.adler=N(t.adler,e,f,0)),a.wrap=0,f>=a.w_size&&(0===s&&(r(a.head),a.strstart=0,a.block_start=0,a.insert=0),d=new R.Buf8(a.w_size),R.arraySet(d,e,f-a.w_size,a.w_size,0),e=d,f=a.w_size),o=t.avail_in,l=t.next_in,h=t.input,t.avail_in=f,t.next_in=0,t.input=e,_(a);a.lookahead>=ht;){i=a.strstart,n=a.lookahead-(ht-1);do a.ins_h=(a.ins_h<<a.hash_shift^a.window[i+ht-1])&a.hash_mask,a.prev[i&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=i,i++;while(--n);a.strstart=i,a.lookahead=ht-1,_(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=ht-1,a.match_available=0,t.next_in=l,t.input=h,t.avail_in=o,a.wrap=s,H}var Z,R=t("../utils/common"),C=t("./trees"),N=t("./adler32"),O=t("./crc32"),D=t("./messages"),I=0,U=1,T=3,F=4,L=5,H=0,j=1,K=-2,M=-3,P=-5,Y=-1,q=1,G=2,X=3,W=4,J=0,Q=2,V=8,$=9,tt=15,et=8,at=29,it=256,nt=it+1+at,rt=30,st=19,ot=2*nt+1,lt=15,ht=3,dt=258,ft=dt+ht+1,_t=32,ut=42,ct=69,bt=73,gt=91,mt=103,wt=113,pt=666,vt=1,kt=2,yt=3,xt=4,zt=3;Z=[new w(0,0,0,0,u),new w(4,4,8,4,c),new w(4,5,16,8,c),new w(4,6,32,32,c),new w(4,4,16,16,b),new w(8,16,32,32,b),new w(8,16,128,128,b),new w(8,32,128,256,b),new w(32,128,258,1024,b),new w(32,258,258,4096,b)],a.deflateInit=B,a.deflateInit2=z,a.deflateReset=y,a.deflateResetKeep=k,a.deflateSetHeader=x,a.deflate=S,a.deflateEnd=E,a.deflateSetDictionary=A,a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(t,e,a){"use strict";function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=i},{}],10:[function(t,e,a){"use strict";var i=30,n=12;e.exports=function(t,e){var a,r,s,o,l,h,d,f,_,u,c,b,g,m,w,p,v,k,y,x,z,B,S,E,A;a=t.state,r=t.next_in,E=t.input,s=r+(t.avail_in-5),o=t.next_out,A=t.output,l=o-(e-t.avail_out),h=o+(t.avail_out-257),d=a.dmax,f=a.wsize,_=a.whave,u=a.wnext,c=a.window,b=a.hold,g=a.bits,m=a.lencode,w=a.distcode,p=(1<<a.lenbits)-1,v=(1<<a.distbits)-1;t:do{g<15&&(b+=E[r++]<<g,g+=8,b+=E[r++]<<g,g+=8),k=m[b&p];e:for(;;){if(y=k>>>24,b>>>=y,g-=y,y=k>>>16&255,0===y)A[o++]=65535&k;else{if(!(16&y)){if(0===(64&y)){k=m[(65535&k)+(b&(1<<y)-1)];continue e}if(32&y){a.mode=n;break t}t.msg="invalid literal/length code",a.mode=i;break t}x=65535&k,y&=15,y&&(g<y&&(b+=E[r++]<<g,g+=8),x+=b&(1<<y)-1,b>>>=y,g-=y),g<15&&(b+=E[r++]<<g,g+=8,b+=E[r++]<<g,g+=8),k=w[b&v];a:for(;;){if(y=k>>>24,b>>>=y,g-=y,y=k>>>16&255,!(16&y)){if(0===(64&y)){k=w[(65535&k)+(b&(1<<y)-1)];continue a}t.msg="invalid distance code",a.mode=i;break t}if(z=65535&k,y&=15,g<y&&(b+=E[r++]<<g,g+=8,g<y&&(b+=E[r++]<<g,g+=8)),z+=b&(1<<y)-1,z>d){t.msg="invalid distance too far back",a.mode=i;break t}if(b>>>=y,g-=y,y=o-l,z>y){if(y=z-y,y>_&&a.sane){t.msg="invalid distance too far back",a.mode=i;break t}if(B=0,S=c,0===u){if(B+=f-y,y<x){x-=y;do A[o++]=c[B++];while(--y);B=o-z,S=A}}else if(u<y){if(B+=f+u-y,y-=u,y<x){x-=y;do A[o++]=c[B++];while(--y);if(B=0,u<x){y=u,x-=y;do A[o++]=c[B++];while(--y);B=o-z,S=A}}}else if(B+=u-y,y<x){x-=y;do A[o++]=c[B++];while(--y);B=o-z,S=A}for(;x>2;)A[o++]=S[B++],A[o++]=S[B++],A[o++]=S[B++],x-=3;x&&(A[o++]=S[B++],x>1&&(A[o++]=S[B++]))}else{B=o-z;do A[o++]=A[B++],A[o++]=A[B++],A[o++]=A[B++],x-=3;while(x>2);x&&(A[o++]=A[B++],x>1&&(A[o++]=A[B++]))}break}}break}}while(r<s&&o<h);x=g>>3,r-=x,g-=x<<3,b&=(1<<g)-1,t.next_in=r,t.next_out=o,t.avail_in=r<s?5+(s-r):5-(r-s),t.avail_out=o<h?257+(h-o):257-(o-h),a.hold=b,a.bits=g}},{}],11:[function(t,e,a){"use strict";function i(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new w.Buf16(320),this.work=new w.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=T,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new w.Buf32(bt),e.distcode=e.distdyn=new w.Buf32(gt),e.sane=1,e.back=-1,Z):N}function s(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,r(t)):N}function o(t,e){var a,i;return t&&t.state?(i=t.state,e<0?(a=0,e=-e):(a=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15)?N:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,s(t))):N}function l(t,e){var a,i;return t?(i=new n,t.state=i,i.window=null,a=o(t,e),a!==Z&&(t.state=null),a):N}function h(t){return l(t,wt)}function d(t){if(pt){var e;for(g=new w.Buf32(512),m=new w.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(y(z,t.lens,0,288,g,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;y(B,t.lens,0,32,m,0,t.work,{bits:5}),pt=!1}t.lencode=g,t.lenbits=9,t.distcode=m,t.distbits=5}function f(t,e,a,i){var n,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new w.Buf8(r.wsize)),i>=r.wsize?(w.arraySet(r.window,e,a-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(n=r.wsize-r.wnext,n>i&&(n=i),w.arraySet(r.window,e,a-i,n,r.wnext),i-=n,i?(w.arraySet(r.window,e,a-i,i,0),r.wnext=i,r.whave=r.wsize):(r.wnext+=n,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=n))),0}function _(t,e){var a,n,r,s,o,l,h,_,u,c,b,g,m,bt,gt,mt,wt,pt,vt,kt,yt,xt,zt,Bt,St=0,Et=new w.Buf8(4),At=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return N;a=t.state,a.mode===X&&(a.mode=W),o=t.next_out,r=t.output,h=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,_=a.hold,u=a.bits,c=l,b=h,xt=Z;t:for(;;)switch(a.mode){case T:if(0===a.wrap){a.mode=W;break}for(;u<16;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(2&a.wrap&&35615===_){a.check=0,Et[0]=255&_,Et[1]=_>>>8&255,a.check=v(a.check,Et,2,0),_=0,u=0,a.mode=F;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&_)<<8)+(_>>8))%31){t.msg="incorrect header check",a.mode=_t;break}if((15&_)!==U){t.msg="unknown compression method",a.mode=_t;break}if(_>>>=4,u-=4,yt=(15&_)+8,0===a.wbits)a.wbits=yt;else if(yt>a.wbits){t.msg="invalid window size",a.mode=_t;break}a.dmax=1<<yt,t.adler=a.check=1,a.mode=512&_?q:X,_=0,u=0;break;case F:for(;u<16;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(a.flags=_,(255&a.flags)!==U){t.msg="unknown compression method",a.mode=_t;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=_t;break}a.head&&(a.head.text=_>>8&1),512&a.flags&&(Et[0]=255&_,Et[1]=_>>>8&255,a.check=v(a.check,Et,2,0)),_=0,u=0,a.mode=L;case L:for(;u<32;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.head&&(a.head.time=_),512&a.flags&&(Et[0]=255&_,Et[1]=_>>>8&255,Et[2]=_>>>16&255,Et[3]=_>>>24&255,a.check=v(a.check,Et,4,0)),_=0,u=0,a.mode=H;case H:for(;u<16;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.head&&(a.head.xflags=255&_,a.head.os=_>>8),512&a.flags&&(Et[0]=255&_,Et[1]=_>>>8&255,a.check=v(a.check,Et,2,0)),_=0,u=0,a.mode=j;case j:if(1024&a.flags){for(;u<16;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.length=_,a.head&&(a.head.extra_len=_),512&a.flags&&(Et[0]=255&_,Et[1]=_>>>8&255,a.check=v(a.check,Et,2,0)),_=0,u=0}else a.head&&(a.head.extra=null);a.mode=K;case K:if(1024&a.flags&&(g=a.length,g>l&&(g=l),g&&(a.head&&(yt=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),w.arraySet(a.head.extra,n,s,g,yt)),512&a.flags&&(a.check=v(a.check,n,g,s)),l-=g,s+=g,a.length-=g),a.length))break t;a.length=0,a.mode=M;case M:if(2048&a.flags){if(0===l)break t;g=0;do yt=n[s+g++],a.head&&yt&&a.length<65536&&(a.head.name+=String.fromCharCode(yt));while(yt&&g<l);if(512&a.flags&&(a.check=v(a.check,n,g,s)),l-=g,s+=g,yt)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=P;case P:if(4096&a.flags){if(0===l)break t;g=0;do yt=n[s+g++],a.head&&yt&&a.length<65536&&(a.head.comment+=String.fromCharCode(yt));while(yt&&g<l);if(512&a.flags&&(a.check=v(a.check,n,g,s)),l-=g,s+=g,yt)break t}else a.head&&(a.head.comment=null);a.mode=Y;case Y:if(512&a.flags){for(;u<16;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(_!==(65535&a.check)){t.msg="header crc mismatch",a.mode=_t;break}_=0,u=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=X;break;case q:for(;u<32;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}t.adler=a.check=i(_),_=0,u=0,a.mode=G;case G:if(0===a.havedict)return t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=l,a.hold=_,a.bits=u,C;t.adler=a.check=1,a.mode=X;case X:if(e===E||e===A)break t;case W:if(a.last){_>>>=7&u,u-=7&u,a.mode=ht;break}for(;u<3;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}switch(a.last=1&_,_>>>=1,u-=1,3&_){case 0:a.mode=J;break;case 1:if(d(a),a.mode=at,e===A){_>>>=2,u-=2;break t}break;case 2:a.mode=$;break;case 3:t.msg="invalid block type",a.mode=_t}_>>>=2,u-=2;break;case J:for(_>>>=7&u,u-=7&u;u<32;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if((65535&_)!==(_>>>16^65535)){t.msg="invalid stored block lengths",a.mode=_t;break}if(a.length=65535&_,_=0,u=0,a.mode=Q,e===A)break t;case Q:a.mode=V;case V:if(g=a.length){if(g>l&&(g=l),g>h&&(g=h),0===g)break t;w.arraySet(r,n,s,g,o),l-=g,s+=g,h-=g,o+=g,a.length-=g;break}a.mode=X;break;case $:for(;u<14;){if(0===l)break t;
l--,_+=n[s++]<<u,u+=8}if(a.nlen=(31&_)+257,_>>>=5,u-=5,a.ndist=(31&_)+1,_>>>=5,u-=5,a.ncode=(15&_)+4,_>>>=4,u-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=_t;break}a.have=0,a.mode=tt;case tt:for(;a.have<a.ncode;){for(;u<3;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.lens[At[a.have++]]=7&_,_>>>=3,u-=3}for(;a.have<19;)a.lens[At[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,zt={bits:a.lenbits},xt=y(x,a.lens,0,19,a.lencode,0,a.work,zt),a.lenbits=zt.bits,xt){t.msg="invalid code lengths set",a.mode=_t;break}a.have=0,a.mode=et;case et:for(;a.have<a.nlen+a.ndist;){for(;St=a.lencode[_&(1<<a.lenbits)-1],gt=St>>>24,mt=St>>>16&255,wt=65535&St,!(gt<=u);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(wt<16)_>>>=gt,u-=gt,a.lens[a.have++]=wt;else{if(16===wt){for(Bt=gt+2;u<Bt;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(_>>>=gt,u-=gt,0===a.have){t.msg="invalid bit length repeat",a.mode=_t;break}yt=a.lens[a.have-1],g=3+(3&_),_>>>=2,u-=2}else if(17===wt){for(Bt=gt+3;u<Bt;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}_>>>=gt,u-=gt,yt=0,g=3+(7&_),_>>>=3,u-=3}else{for(Bt=gt+7;u<Bt;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}_>>>=gt,u-=gt,yt=0,g=11+(127&_),_>>>=7,u-=7}if(a.have+g>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=_t;break}for(;g--;)a.lens[a.have++]=yt}}if(a.mode===_t)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=_t;break}if(a.lenbits=9,zt={bits:a.lenbits},xt=y(z,a.lens,0,a.nlen,a.lencode,0,a.work,zt),a.lenbits=zt.bits,xt){t.msg="invalid literal/lengths set",a.mode=_t;break}if(a.distbits=6,a.distcode=a.distdyn,zt={bits:a.distbits},xt=y(B,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,zt),a.distbits=zt.bits,xt){t.msg="invalid distances set",a.mode=_t;break}if(a.mode=at,e===A)break t;case at:a.mode=it;case it:if(l>=6&&h>=258){t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=l,a.hold=_,a.bits=u,k(t,b),o=t.next_out,r=t.output,h=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,_=a.hold,u=a.bits,a.mode===X&&(a.back=-1);break}for(a.back=0;St=a.lencode[_&(1<<a.lenbits)-1],gt=St>>>24,mt=St>>>16&255,wt=65535&St,!(gt<=u);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(mt&&0===(240&mt)){for(pt=gt,vt=mt,kt=wt;St=a.lencode[kt+((_&(1<<pt+vt)-1)>>pt)],gt=St>>>24,mt=St>>>16&255,wt=65535&St,!(pt+gt<=u);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}_>>>=pt,u-=pt,a.back+=pt}if(_>>>=gt,u-=gt,a.back+=gt,a.length=wt,0===mt){a.mode=lt;break}if(32&mt){a.back=-1,a.mode=X;break}if(64&mt){t.msg="invalid literal/length code",a.mode=_t;break}a.extra=15&mt,a.mode=nt;case nt:if(a.extra){for(Bt=a.extra;u<Bt;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.length+=_&(1<<a.extra)-1,_>>>=a.extra,u-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=rt;case rt:for(;St=a.distcode[_&(1<<a.distbits)-1],gt=St>>>24,mt=St>>>16&255,wt=65535&St,!(gt<=u);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(0===(240&mt)){for(pt=gt,vt=mt,kt=wt;St=a.distcode[kt+((_&(1<<pt+vt)-1)>>pt)],gt=St>>>24,mt=St>>>16&255,wt=65535&St,!(pt+gt<=u);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}_>>>=pt,u-=pt,a.back+=pt}if(_>>>=gt,u-=gt,a.back+=gt,64&mt){t.msg="invalid distance code",a.mode=_t;break}a.offset=wt,a.extra=15&mt,a.mode=st;case st:if(a.extra){for(Bt=a.extra;u<Bt;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.offset+=_&(1<<a.extra)-1,_>>>=a.extra,u-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=_t;break}a.mode=ot;case ot:if(0===h)break t;if(g=b-h,a.offset>g){if(g=a.offset-g,g>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=_t;break}g>a.wnext?(g-=a.wnext,m=a.wsize-g):m=a.wnext-g,g>a.length&&(g=a.length),bt=a.window}else bt=r,m=o-a.offset,g=a.length;g>h&&(g=h),h-=g,a.length-=g;do r[o++]=bt[m++];while(--g);0===a.length&&(a.mode=it);break;case lt:if(0===h)break t;r[o++]=a.length,h--,a.mode=it;break;case ht:if(a.wrap){for(;u<32;){if(0===l)break t;l--,_|=n[s++]<<u,u+=8}if(b-=h,t.total_out+=b,a.total+=b,b&&(t.adler=a.check=a.flags?v(a.check,r,b,o-b):p(a.check,r,b,o-b)),b=h,(a.flags?_:i(_))!==a.check){t.msg="incorrect data check",a.mode=_t;break}_=0,u=0}a.mode=dt;case dt:if(a.wrap&&a.flags){for(;u<32;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(_!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=_t;break}_=0,u=0}a.mode=ft;case ft:xt=R;break t;case _t:xt=O;break t;case ut:return D;case ct:default:return N}return t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=l,a.hold=_,a.bits=u,(a.wsize||b!==t.avail_out&&a.mode<_t&&(a.mode<ht||e!==S))&&f(t,t.output,t.next_out,b-t.avail_out)?(a.mode=ut,D):(c-=t.avail_in,b-=t.avail_out,t.total_in+=c,t.total_out+=b,a.total+=b,a.wrap&&b&&(t.adler=a.check=a.flags?v(a.check,r,b,t.next_out-b):p(a.check,r,b,t.next_out-b)),t.data_type=a.bits+(a.last?64:0)+(a.mode===X?128:0)+(a.mode===at||a.mode===Q?256:0),(0===c&&0===b||e===S)&&xt===Z&&(xt=I),xt)}function u(t){if(!t||!t.state)return N;var e=t.state;return e.window&&(e.window=null),t.state=null,Z}function c(t,e){var a;return t&&t.state?(a=t.state,0===(2&a.wrap)?N:(a.head=e,e.done=!1,Z)):N}function b(t,e){var a,i,n,r=e.length;return t&&t.state?(a=t.state,0!==a.wrap&&a.mode!==G?N:a.mode===G&&(i=1,i=p(i,e,r,0),i!==a.check)?O:(n=f(t,e,r,r))?(a.mode=ut,D):(a.havedict=1,Z)):N}var g,m,w=t("../utils/common"),p=t("./adler32"),v=t("./crc32"),k=t("./inffast"),y=t("./inftrees"),x=0,z=1,B=2,S=4,E=5,A=6,Z=0,R=1,C=2,N=-2,O=-3,D=-4,I=-5,U=8,T=1,F=2,L=3,H=4,j=5,K=6,M=7,P=8,Y=9,q=10,G=11,X=12,W=13,J=14,Q=15,V=16,$=17,tt=18,et=19,at=20,it=21,nt=22,rt=23,st=24,ot=25,lt=26,ht=27,dt=28,ft=29,_t=30,ut=31,ct=32,bt=852,gt=592,mt=15,wt=mt,pt=!0;a.inflateReset=s,a.inflateReset2=o,a.inflateResetKeep=r,a.inflateInit=h,a.inflateInit2=l,a.inflate=_,a.inflateEnd=u,a.inflateGetHeader=c,a.inflateSetDictionary=b,a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(t,e,a){"use strict";var i=t("../utils/common"),n=15,r=852,s=592,o=0,l=1,h=2,d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],_=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,a,c,b,g,m,w){var p,v,k,y,x,z,B,S,E,A=w.bits,Z=0,R=0,C=0,N=0,O=0,D=0,I=0,U=0,T=0,F=0,L=null,H=0,j=new i.Buf16(n+1),K=new i.Buf16(n+1),M=null,P=0;for(Z=0;Z<=n;Z++)j[Z]=0;for(R=0;R<c;R++)j[e[a+R]]++;for(O=A,N=n;N>=1&&0===j[N];N--);if(O>N&&(O=N),0===N)return b[g++]=20971520,b[g++]=20971520,w.bits=1,0;for(C=1;C<N&&0===j[C];C++);for(O<C&&(O=C),U=1,Z=1;Z<=n;Z++)if(U<<=1,U-=j[Z],U<0)return-1;if(U>0&&(t===o||1!==N))return-1;for(K[1]=0,Z=1;Z<n;Z++)K[Z+1]=K[Z]+j[Z];for(R=0;R<c;R++)0!==e[a+R]&&(m[K[e[a+R]]++]=R);if(t===o?(L=M=m,z=19):t===l?(L=d,H-=257,M=f,P-=257,z=256):(L=_,M=u,z=-1),F=0,R=0,Z=C,x=g,D=O,I=0,k=-1,T=1<<O,y=T-1,t===l&&T>r||t===h&&T>s)return 1;for(var Y=0;;){Y++,B=Z-I,m[R]<z?(S=0,E=m[R]):m[R]>z?(S=M[P+m[R]],E=L[H+m[R]]):(S=96,E=0),p=1<<Z-I,v=1<<D,C=v;do v-=p,b[x+(F>>I)+v]=B<<24|S<<16|E|0;while(0!==v);for(p=1<<Z-1;F&p;)p>>=1;if(0!==p?(F&=p-1,F+=p):F=0,R++,0===--j[Z]){if(Z===N)break;Z=e[a+m[R]]}if(Z>O&&(F&y)!==k){for(0===I&&(I=O),x+=C,D=Z-I,U=1<<D;D+I<N&&(U-=j[D+I],!(U<=0));)D++,U<<=1;if(T+=1<<D,t===l&&T>r||t===h&&T>s)return 1;k=F&y,b[k]=O<<24|D<<16|x-g|0}}return 0!==F&&(b[x+F]=Z-I<<24|64<<16|0),w.bits=O,0}},{"../utils/common":3}],13:[function(t,e,a){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(t,e,a){"use strict";function i(t){for(var e=t.length;--e>=0;)t[e]=0}function n(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}function r(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function s(t){return t<256?lt[t]:lt[256+(t>>>7)]}function o(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function l(t,e,a){t.bi_valid>W-a?(t.bi_buf|=e<<t.bi_valid&65535,o(t,t.bi_buf),t.bi_buf=e>>W-t.bi_valid,t.bi_valid+=a-W):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)}function h(t,e,a){l(t,a[2*e],a[2*e+1])}function d(t,e){var a=0;do a|=1&t,t>>>=1,a<<=1;while(--e>0);return a>>>1}function f(t){16===t.bi_valid?(o(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function _(t,e){var a,i,n,r,s,o,l=e.dyn_tree,h=e.max_code,d=e.stat_desc.static_tree,f=e.stat_desc.has_stree,_=e.stat_desc.extra_bits,u=e.stat_desc.extra_base,c=e.stat_desc.max_length,b=0;for(r=0;r<=X;r++)t.bl_count[r]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<G;a++)i=t.heap[a],r=l[2*l[2*i+1]+1]+1,r>c&&(r=c,b++),l[2*i+1]=r,i>h||(t.bl_count[r]++,s=0,i>=u&&(s=_[i-u]),o=l[2*i],t.opt_len+=o*(r+s),f&&(t.static_len+=o*(d[2*i+1]+s)));if(0!==b){do{for(r=c-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[c]--,b-=2}while(b>0);for(r=c;0!==r;r--)for(i=t.bl_count[r];0!==i;)n=t.heap[--a],n>h||(l[2*n+1]!==r&&(t.opt_len+=(r-l[2*n+1])*l[2*n],l[2*n+1]=r),i--)}}function u(t,e,a){var i,n,r=new Array(X+1),s=0;for(i=1;i<=X;i++)r[i]=s=s+a[i-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=d(r[o]++,o))}}function c(){var t,e,a,i,r,s=new Array(X+1);for(a=0,i=0;i<K-1;i++)for(dt[i]=a,t=0;t<1<<et[i];t++)ht[a++]=i;for(ht[a-1]=i,r=0,i=0;i<16;i++)for(ft[i]=r,t=0;t<1<<at[i];t++)lt[r++]=i;for(r>>=7;i<Y;i++)for(ft[i]=r<<7,t=0;t<1<<at[i]-7;t++)lt[256+r++]=i;for(e=0;e<=X;e++)s[e]=0;for(t=0;t<=143;)st[2*t+1]=8,t++,s[8]++;for(;t<=255;)st[2*t+1]=9,t++,s[9]++;for(;t<=279;)st[2*t+1]=7,t++,s[7]++;for(;t<=287;)st[2*t+1]=8,t++,s[8]++;for(u(st,P+1,s),t=0;t<Y;t++)ot[2*t+1]=5,ot[2*t]=d(t,5);_t=new n(st,et,M+1,P,X),ut=new n(ot,at,0,Y,X),ct=new n(new Array(0),it,0,q,J)}function b(t){var e;for(e=0;e<P;e++)t.dyn_ltree[2*e]=0;for(e=0;e<Y;e++)t.dyn_dtree[2*e]=0;for(e=0;e<q;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*Q]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function g(t){t.bi_valid>8?o(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function m(t,e,a,i){g(t),i&&(o(t,a),o(t,~a)),N.arraySet(t.pending_buf,t.window,e,a,t.pending),t.pending+=a}function w(t,e,a,i){var n=2*e,r=2*a;return t[n]<t[r]||t[n]===t[r]&&i[e]<=i[a]}function p(t,e,a){for(var i=t.heap[a],n=a<<1;n<=t.heap_len&&(n<t.heap_len&&w(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!w(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i}function v(t,e,a){var i,n,r,o,d=0;if(0!==t.last_lit)do i=t.pending_buf[t.d_buf+2*d]<<8|t.pending_buf[t.d_buf+2*d+1],n=t.pending_buf[t.l_buf+d],d++,0===i?h(t,n,e):(r=ht[n],h(t,r+M+1,e),o=et[r],0!==o&&(n-=dt[r],l(t,n,o)),i--,r=s(i),h(t,r,a),o=at[r],0!==o&&(i-=ft[r],l(t,i,o)));while(d<t.last_lit);h(t,Q,e)}function k(t,e){var a,i,n,r=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=G,a=0;a<l;a++)0!==r[2*a]?(t.heap[++t.heap_len]=h=a,t.depth[a]=0):r[2*a+1]=0;for(;t.heap_len<2;)n=t.heap[++t.heap_len]=h<2?++h:0,r[2*n]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=s[2*n+1]);for(e.max_code=h,a=t.heap_len>>1;a>=1;a--)p(t,r,a);n=l;do a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],p(t,r,1),i=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=i,r[2*n]=r[2*a]+r[2*i],t.depth[n]=(t.depth[a]>=t.depth[i]?t.depth[a]:t.depth[i])+1,r[2*a+1]=r[2*i+1]=n,t.heap[1]=n++,p(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],_(t,e),u(r,h,t.bl_count)}function y(t,e,a){var i,n,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=s,s=e[2*(i+1)+1],++o<l&&n===s||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==r&&t.bl_tree[2*n]++,t.bl_tree[2*V]++):o<=10?t.bl_tree[2*$]++:t.bl_tree[2*tt]++,o=0,r=n,0===s?(l=138,h=3):n===s?(l=6,h=3):(l=7,h=4))}function x(t,e,a){var i,n,r=-1,s=e[1],o=0,d=7,f=4;for(0===s&&(d=138,f=3),i=0;i<=a;i++)if(n=s,s=e[2*(i+1)+1],!(++o<d&&n===s)){if(o<f){do h(t,n,t.bl_tree);while(0!==--o)}else 0!==n?(n!==r&&(h(t,n,t.bl_tree),o--),h(t,V,t.bl_tree),l(t,o-3,2)):o<=10?(h(t,$,t.bl_tree),l(t,o-3,3)):(h(t,tt,t.bl_tree),l(t,o-11,7));o=0,r=n,0===s?(d=138,f=3):n===s?(d=6,f=3):(d=7,f=4)}}function z(t){var e;for(y(t,t.dyn_ltree,t.l_desc.max_code),y(t,t.dyn_dtree,t.d_desc.max_code),k(t,t.bl_desc),e=q-1;e>=3&&0===t.bl_tree[2*nt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function B(t,e,a,i){var n;for(l(t,e-257,5),l(t,a-1,5),l(t,i-4,4),n=0;n<i;n++)l(t,t.bl_tree[2*nt[n]+1],3);x(t,t.dyn_ltree,e-1),x(t,t.dyn_dtree,a-1)}function S(t){var e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return D;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return I;for(e=32;e<M;e++)if(0!==t.dyn_ltree[2*e])return I;return D}function E(t){bt||(c(),bt=!0),t.l_desc=new r(t.dyn_ltree,_t),t.d_desc=new r(t.dyn_dtree,ut),t.bl_desc=new r(t.bl_tree,ct),t.bi_buf=0,t.bi_valid=0,b(t)}function A(t,e,a,i){l(t,(T<<1)+(i?1:0),3),m(t,e,a,!0)}function Z(t){l(t,F<<1,3),h(t,Q,st),f(t)}function R(t,e,a,i){var n,r,s=0;t.level>0?(t.strm.data_type===U&&(t.strm.data_type=S(t)),k(t,t.l_desc),k(t,t.d_desc),s=z(t),n=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,r<=n&&(n=r)):n=r=a+5,a+4<=n&&e!==-1?A(t,e,a,i):t.strategy===O||r===n?(l(t,(F<<1)+(i?1:0),3),v(t,st,ot)):(l(t,(L<<1)+(i?1:0),3),B(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),v(t,t.dyn_ltree,t.dyn_dtree)),b(t),i&&g(t)}function C(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(ht[a]+M+1)]++,t.dyn_dtree[2*s(e)]++),t.last_lit===t.lit_bufsize-1}var N=t("../utils/common"),O=4,D=0,I=1,U=2,T=0,F=1,L=2,H=3,j=258,K=29,M=256,P=M+1+K,Y=30,q=19,G=2*P+1,X=15,W=16,J=7,Q=256,V=16,$=17,tt=18,et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],at=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],it=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],rt=512,st=new Array(2*(P+2));i(st);var ot=new Array(2*Y);i(ot);var lt=new Array(rt);i(lt);var ht=new Array(j-H+1);i(ht);var dt=new Array(K);i(dt);var ft=new Array(Y);i(ft);var _t,ut,ct,bt=!1;a._tr_init=E,a._tr_stored_block=A,a._tr_flush_block=R,a._tr_tally=C,a._tr_align=Z},{"../utils/common":3}],15:[function(t,e,a){"use strict";function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=i},{}],"/":[function(t,e,a){"use strict";var i=t("./lib/utils/common").assign,n=t("./lib/deflate"),r=t("./lib/inflate"),s=t("./lib/zlib/constants"),o={};i(o,n,r,s),e.exports=o},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")});
// модуль для взаимодействия со скриптом FBInstant.js
// для инициализации модуля и FBInstant используется функция configure
// вызов функций setLoadingProgress и setStartGame требуется для обновления и скрытия лодера
// функции showPanel и hidePanel используются для показа и скрытия внешней панельки с лидербордами и приглашением друзей
var s3eMSNConsole = {};
(function() {
	this.name 			= 's3eMSNConsole';

	var _self_ 			= this;

	// состояния инициализации модуля
	// наличия внешней игровой панельки
	// и готовности скрипта zoneAdWrapper.js	
	var _isInited_ 		= false;
	var _isStarted_		= false;	
	var _isGameEndCalled_ = false;
	var _isPaused = false;


	var _lastHighScore_;
	
	var _currentLevel_ = -1;

	// коллбек для отправки событий
	var _gameEventCallback_;

	// консоль
	var _console_;

	// установка консоли для вывода сообщений
	// console - функция для обработки сообщений
	this.setConsole = function (console) {
		_console_ = console;
	};

	// установка коллбека для отправки событий
	// например, нажатие на кнопку Играть вне Вьювера
	// callback - функция для отправки игровых событий
	this.setGameEventCallback = function (callback) {
		_gameEventCallback_ = callback;
	};

	// отправить игровое событие
	// event - событие в текстовом виде
	this.gameEventCallback = function (event) {	    
		if (_gameEventCallback_)
			_gameEventCallback_(event);
	};

	// инициализация модуля
	// и скрипта FBInstant
	this.configure = function () {		
		if (checkMSN()) {	
			_isGameEndCalled_ = false;
			InitMsnAdWrapper(); 
			msnAdWrapper.onReceivingPlayAd = function()
			{  
				this.gameEventCallback("msn_pause");
				_isPaused = true;
				//pause();//consider it as game’s internal function
				msnAdWrapper.startAdPlayback();
			}.bind(this);
			msnAdWrapper.onAdPlaybackCompleted = function()
			{
				this.gameEventCallback("msn_resume");
				_isPaused = false;
				//unpause();//assume it as game’s internal function
			}.bind(this); 
			msnAdWrapper.onQuitGame = function()
			{
				if(!_isGameEndCalled_) {
					this.gameEnd();
					this.gameEventCallback("msn_quit_game");
					//assume it as game’s internal function
				}
			    //call quit;
			}.bind(this);
			msnAdWrapper.onReceivingMuteGame = function()
			{
				//toggleMute();//assume it as game’s internal function
			}.bind(this); 
			msnAdWrapper.onReceivingPauseGame = function() 
			{    
				if(_isPaused){ //assume it as game’s internal variable
					//unpause();//assume it as game’s internal function 
					this.gameEventCallback("msn_resume");
					_isPaused = false;					
					msnAdWrapper.gamePaused(0); 
				} else {
					this.gameEventCallback("msn_pause");
					_isPaused = true;
					//pause();//assume it as game’s internal function  
					msnAdWrapper.gamePaused(1);   
				} 				
			}.bind(this); 
			msnAdWrapper.readyForComm();
			_isInited_ = true;			
		} else {
			log('INIT ERROR - NO FBINSTANT!');
			_isInited_ = false;
			return;
		}
	};

	// событие завершения инициализации игры
	// после которого мы увидим первый полезный кадр
	this.setStartGame = function () {
		if (_isInited_) {
			msnAdWrapper.gameStarted();
			_isStarted_ = true;
		} else {
			log('Module is not inited!');
		}
	};

	// проверка началась ли игра
	this.getIsStarted = function () {
		return _isStarted_;
	};


	// отправка лучшего результата в лидерборды
	// score - лучший результат в числовом виде
	this.postHighScore = function (score) {
		log('Post high score: ' + score);
		if (!_isStarted_) {
			log('Is not started!');
			return;
		}

		_lastHighScore_ = score;
		msnAdWrapper.submitScore(_lastHighScore_, undefined);
		//log('Send at the end of the game');
		
	};
	
	// отправка лучшего результата в лидерборды
	// score - лучший результат в числовом виде
	this.levelEnd = function () {
		log('Call level end: ' + _currentLevel_);
		if (!_isStarted_) {
			log('Is not started!');
			return;
		}		
		if(_currentLevel_ != -1) {
			msnAdWrapper.completedLevel(_currentLevel_); 
		}
		
	};
	
	// отправка лучшего результата в лидерборды
	// score - лучший результат в числовом виде
	this.setEndLevel = function (level) {
		log('Call set end level : ' + level);
		if (!_isStarted_) {
			log('Is not started!');
			return;
		}	
		_currentLevel_ = level;
		//msnAdWrapper.completedLevel(level); 
		
	};
	
	// отправка лучшего результата в лидерборды
	// score - лучший результат в числовом виде
	this.gameEnd = function () {	
		log('Call game end: ');
		if(_isGameEndCalled_) {
			log('game end called!');
			return;
		}
		_isGameEndCalled_ = true;
		if (!_isStarted_) {
			log('Is not started!');
			return;
		}		
		msnAdWrapper.gameEnded();
		msnAdWrapper.submitScore(_lastHighScore_, undefined);
		
	};

	

	// получить последний лучший результат игрока
	// есть, только если был вызов postHighScore
	// используется для замены результата в лидербордах
	// поскольку у нас отправка результата и обновление идет следом
	this.getUserHighScore = function () {
		if (_lastHighScore_)
			return _lastHighScore_;
		else
			return 0;
	};

	
	// проверка наличия скрипта zoneAdWrapper.js
	var checkMSN = function () {
		return typeof ZoneAdWrapper === 'function';
	};

	// TODO: в данный момент скрипт подключается при сборке в index.html
	var loadScript = function(success, error) {
		// TODO: If really needed...
	};

	// функция для вывода логов в консоль, если она есть
	// message - текст сообщения
	var log = function (message) {
		if (typeof _console_ === 'function') {
			_console_(_self_.name + ': ' + message);
		}
	};

	return this;
}).bind(s3eMSNConsole)();
﻿var e=function(){"use strict";function r(e,r){postMessage({action:xt,cbn:r,result:e})}function t(e){var r=[];return r[e-1]=void 0,r}function o(e,r){return i(e[0]+r[0],e[1]+r[1])}function n(e,r){return u(~~Math.max(Math.min(e[1]/Ot,2147483647),-2147483648)&~~Math.max(Math.min(r[1]/Ot,2147483647),-2147483648),c(e)&c(r))}function s(e,r){var t,o;return e[0]==r[0]&&e[1]==r[1]?0:(t=0>e[1],o=0>r[1],t&&!o?-1:!t&&o?1:h(e,r)[1]<0?-1:1)}function i(e,r){var t,o;for(r%=0x10000000000000000,e%=0x10000000000000000,t=r%Ot,o=Math.floor(e/Ot)*Ot,r=r-t+o,e=e-o+t;0>e;)e+=Ot,r-=Ot;for(;e>4294967295;)e-=Ot,r+=Ot;for(r%=0x10000000000000000;r>0x7fffffff00000000;)r-=0x10000000000000000;for(;-0x8000000000000000>r;)r+=0x10000000000000000;return[e,r]}function _(e,r){return e[0]==r[0]&&e[1]==r[1]}function a(e){return e>=0?[e,0]:[e+Ot,-Ot]}function c(e){return e[0]>=2147483648?~~Math.max(Math.min(e[0]-Ot,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function u(e,r){var t,o;return t=e*Ot,o=r,0>r&&(o+=Ot),[o,t]}function f(e){return 30>=e?1<<e:f(30)*f(e-30)}function m(e,r){var t,o,n,s;if(r&=63,_(e,Ht))return r?Gt:e;if(0>e[1])throw Error("Neg");return s=f(r),o=e[1]*s%0x10000000000000000,n=e[0]*s,t=n-n%Ot,o+=t,n-=t,o>=0x8000000000000000&&(o-=0x10000000000000000),[n,o]}function d(e,r){var t;return r&=63,t=f(r),i(Math.floor(e[0]/t),e[1]/t)}function p(e,r){var t;return r&=63,t=d(e,r),0>e[1]&&(t=o(t,m([2,0],63-r))),t}function h(e,r){return i(e[0]-r[0],e[1]-r[1])}function P(e,r){return e.Mc=r,e.Lc=0,e.Yb=r.length,e}function l(e){return e.Lc>=e.Yb?-1:255&e.Mc[e.Lc++]}function v(e,r,t,o){return e.Lc>=e.Yb?-1:(o=Math.min(o,e.Yb-e.Lc),M(e.Mc,e.Lc,r,t,o),e.Lc+=o,o)}function B(e){return e.Mc=t(32),e.Yb=0,e}function S(e){var r=e.Mc;return r.length=e.Yb,r}function g(e,r){e.Mc[e.Yb++]=r<<24>>24}function k(e,r,t,o){M(r,t,e.Mc,e.Yb,o),e.Yb+=o}function R(e,r,t,o,n){var s;for(s=r;t>s;++s)o[n++]=e.charCodeAt(s)}function M(e,r,t,o,n){for(var s=0;n>s;++s)t[o+s]=e[r+s]}function D(e,r){Ar(r,1<<e.s),r.n=e.f,Hr(r,e.m),r.eb=0,r.fb=3,r.Y=2,r.y=3}function b(r,t,o,n,i){var _,a;if(s(n,At)<0)throw Error("invalid length "+n);for(r.Tb=n,_=Dr({}),D(i,_),_.Gc=void 0===e.disableEndMark,Gr(_,o),a=0;64>a;a+=8)g(o,255&c(d(n,a)));r.yb=(_.W=0,_.oc=t,_.pc=0,Mr(_),_.d.Ab=o,Fr(_),wr(_),br(_),_.$.rb=_.n+1-2,Qr(_.$,1<<_.Y),_.i.rb=_.n+1-2,Qr(_.i,1<<_.Y),void(_.g=Gt),X({},_))}function w(e,r,t){return e.Nb=B({}),b(e,P({},r),e.Nb,a(r.length),t),e}function E(e,r,t){var o,n,s,i,_="",c=[];for(n=0;5>n;++n){if(s=l(r),-1==s)throw Error("truncated input");c[n]=s<<24>>24}if(o=ir({}),!ar(o,c))throw Error("corrupted input");for(n=0;64>n;n+=8){if(s=l(r),-1==s)throw Error("truncated input");s=s.toString(16),1==s.length&&(s="0"+s),_=s+""+_}/^0+$|^f+$/i.test(_)?e.Tb=At:(i=parseInt(_,16),e.Tb=i>4294967295?At:a(i)),e.yb=nr(o,r,t,e.Tb)}function L(e,r){return e.Nb=B({}),E(e,P({},r),e.Nb),e}function y(e,r,o,n){var s;e.Bc=r,e._b=o,s=r+o+n,(null==e.c||e.Kb!=s)&&(e.c=null,e.Kb=s,e.c=t(e.Kb)),e.H=e.Kb-o}function C(e,r){return e.c[e.f+e.o+r]}function z(e,r,t,o){var n,s;for(e.T&&e.o+r+o>e.h&&(o=e.h-(e.o+r)),++t,s=e.f+e.o+r,n=0;o>n&&e.c[s+n]==e.c[s+n-t];++n);return n}function F(e){return e.h-e.o}function I(e){var r,t,o;for(o=e.f+e.o-e.Bc,o>0&&--o,t=e.f+e.h-o,r=0;t>r;++r)e.c[r]=e.c[o+r];e.f-=o}function x(e){var r;++e.o,e.o>e.zb&&(r=e.f+e.o,r>e.H&&I(e),N(e))}function N(e){var r,t,o;if(!e.T)for(;;){if(o=-e.f+e.Kb-e.h,!o)return;if(r=v(e.cc,e.c,e.f+e.h,o),-1==r)return e.zb=e.h,t=e.f+e.zb,t>e.H&&(e.zb=e.H-e.f),void(e.T=1);e.h+=r,e.h>=e.o+e._b&&(e.zb=e.h-e._b)}}function O(e,r){e.f+=r,e.zb-=r,e.o-=r,e.h-=r}function A(e,r,o,n,s){var i,_,a;1073741567>r&&(e.Fc=16+(n>>1),a=~~((r+o+n+s)/2)+256,y(e,r+o,n+s,a),e.ob=n,i=r+1,e.p!=i&&(e.L=t(2*(e.p=i))),_=65536,e.qb&&(_=r-1,_|=_>>1,_|=_>>2,_|=_>>4,_|=_>>8,_>>=1,_|=65535,_>16777216&&(_>>=1),e.Ec=_,++_,_+=e.R),_!=e.rc&&(e.ub=t(e.rc=_)))}function H(e,r){var t,o,n,s,i,_,a,c,u,f,m,d,p,h,P,l,v,B,S,g,k;if(e.h>=e.o+e.ob)h=e.ob;else if(h=e.h-e.o,e.xb>h)return W(e),0;for(v=0,P=e.o>e.p?e.o-e.p:0,o=e.f+e.o,l=1,c=0,u=0,e.qb?(k=Tt[255&e.c[o]]^255&e.c[o+1],c=1023&k,k^=(255&e.c[o+2])<<8,u=65535&k,f=(k^Tt[255&e.c[o+3]]<<5)&e.Ec):f=255&e.c[o]^(255&e.c[o+1])<<8,n=e.ub[e.R+f]||0,e.qb&&(s=e.ub[c]||0,i=e.ub[1024+u]||0,e.ub[c]=e.o,e.ub[1024+u]=e.o,s>P&&e.c[e.f+s]==e.c[o]&&(r[v++]=l=2,r[v++]=e.o-s-1),i>P&&e.c[e.f+i]==e.c[o]&&(i==s&&(v-=2),r[v++]=l=3,r[v++]=e.o-i-1,s=i),0!=v&&s==n&&(v-=2,l=1)),e.ub[e.R+f]=e.o,S=(e.k<<1)+1,g=e.k<<1,d=p=e.w,0!=e.w&&n>P&&e.c[e.f+n+e.w]!=e.c[o+e.w]&&(r[v++]=l=e.w,r[v++]=e.o-n-1),t=e.Fc;;){if(P>=n||0==t--){e.L[S]=e.L[g]=0;break}if(a=e.o-n,_=(e.k>=a?e.k-a:e.k-a+e.p)<<1,B=e.f+n,m=p>d?d:p,e.c[B+m]==e.c[o+m]){for(;++m!=h&&e.c[B+m]==e.c[o+m];);if(m>l&&(r[v++]=l=m,r[v++]=a-1,m==h)){e.L[g]=e.L[_],e.L[S]=e.L[_+1];break}}(255&e.c[o+m])>(255&e.c[B+m])?(e.L[g]=n,g=_+1,n=e.L[g],p=m):(e.L[S]=n,S=_,n=e.L[S],d=m)}return W(e),v}function G(e){e.f=0,e.o=0,e.h=0,e.T=0,N(e),e.k=0,O(e,-1)}function W(e){var r;++e.k>=e.p&&(e.k=0),x(e),1073741823==e.o&&(r=e.o-e.p,T(e.L,2*e.p,r),T(e.ub,e.rc,r),O(e,r))}function T(e,r,t){var o,n;for(o=0;r>o;++o)n=e[o]||0,t>=n?n=0:n-=t,e[o]=n}function Z(e,r){e.qb=r>2,e.qb?(e.w=0,e.xb=4,e.R=66560):(e.w=2,e.xb=3,e.R=0)}function Y(e,r){var t,o,n,s,i,_,a,c,u,f,m,d,p,h,P,l,v;do{if(e.h>=e.o+e.ob)d=e.ob;else if(d=e.h-e.o,e.xb>d){W(e);continue}for(p=e.o>e.p?e.o-e.p:0,o=e.f+e.o,e.qb?(v=Tt[255&e.c[o]]^255&e.c[o+1],_=1023&v,e.ub[_]=e.o,v^=(255&e.c[o+2])<<8,a=65535&v,e.ub[1024+a]=e.o,c=(v^Tt[255&e.c[o+3]]<<5)&e.Ec):c=255&e.c[o]^(255&e.c[o+1])<<8,n=e.ub[e.R+c],e.ub[e.R+c]=e.o,P=(e.k<<1)+1,l=e.k<<1,f=m=e.w,t=e.Fc;;){if(p>=n||0==t--){e.L[P]=e.L[l]=0;break}if(i=e.o-n,s=(e.k>=i?e.k-i:e.k-i+e.p)<<1,h=e.f+n,u=m>f?f:m,e.c[h+u]==e.c[o+u]){for(;++u!=d&&e.c[h+u]==e.c[o+u];);if(u==d){e.L[l]=e.L[s],e.L[P]=e.L[s+1];break}}(255&e.c[o+u])>(255&e.c[h+u])?(e.L[l]=n,l=s+1,n=e.L[l],m=u):(e.L[P]=n,P=s,n=e.L[P],f=u)}W(e)}while(0!=--r)}function V(e,r,t){var o=e.o-r-1;for(0>o&&(o+=e.M);0!=t;--t)o>=e.M&&(o=0),e.Lb[e.o++]=e.Lb[o++],e.o>=e.M&&$(e)}function j(e,r){(null==e.Lb||e.M!=r)&&(e.Lb=t(r)),e.M=r,e.o=0,e.h=0}function $(e){var r=e.o-e.h;r&&(k(e.cc,e.Lb,e.h,r),e.o>=e.M&&(e.o=0),e.h=e.o)}function K(e,r){var t=e.o-r-1;return 0>t&&(t+=e.M),e.Lb[t]}function q(e,r){e.Lb[e.o++]=r,e.o>=e.M&&$(e)}function J(e){$(e),e.cc=null}function Q(e){return e-=2,4>e?e:3}function U(e){return 4>e?0:10>e?e-3:e-6}function X(e,r){return e.cb=r,e.Z=null,e.zc=1,e}function er(e,r){return e.Z=r,e.cb=null,e.zc=1,e}function rr(e){if(!e.zc)throw Error("bad state");return e.cb?or(e):tr(e),e.zc}function tr(e){var r=sr(e.Z);if(-1==r)throw Error("corrupted input");e.Pb=At,e.Pc=e.Z.g,(r||s(e.Z.Nc,Gt)>=0&&s(e.Z.g,e.Z.Nc)>=0)&&($(e.Z.B),J(e.Z.B),e.Z.e.Ab=null,e.zc=0)}function or(e){Rr(e.cb,e.cb.Xb,e.cb.uc,e.cb.Kc),e.Pb=e.cb.Xb[0],e.cb.Kc[0]&&(Or(e.cb),e.zc=0)}function nr(e,r,t,o){return e.e.Ab=r,J(e.B),e.B.cc=t,_r(e),e.U=0,e.ib=0,e.Jc=0,e.Ic=0,e.Qc=0,e.Nc=o,e.g=Gt,e.jc=0,er({},e)}function sr(e){var r,t,n,i,_,u;if(u=c(e.g)&e.Dc,vt(e.e,e.Gb,(e.U<<4)+u)){if(vt(e.e,e.Zb,e.U))n=0,vt(e.e,e.Cb,e.U)?(vt(e.e,e.Db,e.U)?(vt(e.e,e.Eb,e.U)?(t=e.Qc,e.Qc=e.Ic):t=e.Ic,e.Ic=e.Jc):t=e.Jc,e.Jc=e.ib,e.ib=t):vt(e.e,e.pb,(e.U<<4)+u)||(e.U=7>e.U?9:11,n=1),n||(n=mr(e.sb,e.e,u)+2,e.U=7>e.U?8:11);else if(e.Qc=e.Ic,e.Ic=e.Jc,e.Jc=e.ib,n=2+mr(e.Rb,e.e,u),e.U=7>e.U?7:10,_=at(e.kb[Q(n)],e.e),_>=4){if(i=(_>>1)-1,e.ib=(2|1&_)<<i,14>_)e.ib+=ut(e.kc,e.ib-_-1,e.e,i);else if(e.ib+=Bt(e.e,i-4)<<4,e.ib+=ct(e.Fb,e.e),0>e.ib)return-1==e.ib?1:-1}else e.ib=_;if(s(a(e.ib),e.g)>=0||e.ib>=e.nb)return-1;V(e.B,e.ib,n),e.g=o(e.g,a(n)),e.jc=K(e.B,0)}else r=Pr(e.gb,c(e.g),e.jc),e.jc=7>e.U?vr(r,e.e):Br(r,e.e,K(e.B,e.ib)),q(e.B,e.jc),e.U=U(e.U),e.g=o(e.g,Wt);return 0}function ir(e){e.B={},e.e={},e.Gb=t(192),e.Zb=t(12),e.Cb=t(12),e.Db=t(12),e.Eb=t(12),e.pb=t(192),e.kb=t(4),e.kc=t(114),e.Fb=_t({},4),e.Rb=dr({}),e.sb=dr({}),e.gb={};for(var r=0;4>r;++r)e.kb[r]=_t({},6);return e}function _r(e){e.B.h=0,e.B.o=0,gt(e.Gb),gt(e.pb),gt(e.Zb),gt(e.Cb),gt(e.Db),gt(e.Eb),gt(e.kc),lr(e.gb);for(var r=0;4>r;++r)gt(e.kb[r].G);pr(e.Rb),pr(e.sb),gt(e.Fb.G),St(e.e)}function ar(e,r){var t,o,n,s,i,_,a;if(5>r.length)return 0;for(a=255&r[0],n=a%9,_=~~(a/9),s=_%5,i=~~(_/5),t=0,o=0;4>o;++o)t+=(255&r[1+o])<<8*o;return t>99999999||!ur(e,n,s,i)?0:cr(e,t)}function cr(e,r){return 0>r?0:(e.Ob!=r&&(e.Ob=r,e.nb=Math.max(e.Ob,1),j(e.B,Math.max(e.nb,4096))),1)}function ur(e,r,t,o){if(r>8||t>4||o>4)return 0;hr(e.gb,t,r);var n=1<<o;return fr(e.Rb,n),fr(e.sb,n),e.Dc=n-1,1}function fr(e,r){for(;r>e.O;++e.O)e.ec[e.O]=_t({},3),e.hc[e.O]=_t({},3)}function mr(e,r,t){if(!vt(r,e.wc,0))return at(e.ec[t],r);var o=8;return o+=vt(r,e.wc,1)?8+at(e.tc,r):at(e.hc[t],r)}function dr(e){return e.wc=t(2),e.ec=t(16),e.hc=t(16),e.tc=_t({},8),e.O=0,e}function pr(e){gt(e.wc);for(var r=0;e.O>r;++r)gt(e.ec[r].G),gt(e.hc[r].G);gt(e.tc.G)}function hr(e,r,o){var n,s;if(null==e.V||e.u!=o||e.I!=r)for(e.I=r,e.qc=(1<<r)-1,e.u=o,s=1<<e.u+e.I,e.V=t(s),n=0;s>n;++n)e.V[n]=Sr({})}function Pr(e,r,t){return e.V[((r&e.qc)<<e.u)+((255&t)>>>8-e.u)]}function lr(e){var r,t;for(t=1<<e.u+e.I,r=0;t>r;++r)gt(e.V[r].Ib)}function vr(e,r){var t=1;do t=t<<1|vt(r,e.Ib,t);while(256>t);return t<<24>>24}function Br(e,r,t){var o,n,s=1;do if(n=t>>7&1,t<<=1,o=vt(r,e.Ib,(1+n<<8)+s),s=s<<1|o,n!=o){for(;256>s;)s=s<<1|vt(r,e.Ib,s);break}while(256>s);return s<<24>>24}function Sr(e){return e.Ib=t(768),e}function gr(e,r){var t,o,n,s;e.jb=r,n=e.a[r].r,o=e.a[r].j;do e.a[r].t&&(st(e.a[n]),e.a[n].r=n-1,e.a[r].Ac&&(e.a[n-1].t=0,e.a[n-1].r=e.a[r].r2,e.a[n-1].j=e.a[r].j2)),s=n,t=o,o=e.a[s].j,n=e.a[s].r,e.a[s].j=t,e.a[s].r=r,r=s;while(r>0);return e.mb=e.a[0].j,e.q=e.a[0].r}function kr(e){e.l=0,e.J=0;for(var r=0;4>r;++r)e.v[r]=0}function Rr(e,r,t,n){var i,u,f,m,d,p,P,l,v,B,S,g,k,R,M;if(r[0]=Gt,t[0]=Gt,n[0]=1,e.oc&&(e.b.cc=e.oc,G(e.b),e.W=1,e.oc=null),!e.pc){if(e.pc=1,R=e.g,_(e.g,Gt)){if(!F(e.b))return void Er(e,c(e.g));xr(e),k=c(e.g)&e.y,kt(e.d,e.C,(e.l<<4)+k,0),e.l=U(e.l),f=C(e.b,-e.s),rt(Xr(e.A,c(e.g),e.J),e.d,f),e.J=f,--e.s,e.g=o(e.g,Wt)}if(!F(e.b))return void Er(e,c(e.g));for(;;){if(P=Lr(e,c(e.g)),B=e.mb,k=c(e.g)&e.y,u=(e.l<<4)+k,1==P&&-1==B)kt(e.d,e.C,u,0),f=C(e.b,-e.s),M=Xr(e.A,c(e.g),e.J),7>e.l?rt(M,e.d,f):(v=C(e.b,-e.v[0]-1-e.s),tt(M,e.d,v,f)),e.J=f,e.l=U(e.l);else{if(kt(e.d,e.C,u,1),4>B){if(kt(e.d,e.bb,e.l,1),B?(kt(e.d,e.hb,e.l,1),1==B?kt(e.d,e.Ub,e.l,0):(kt(e.d,e.Ub,e.l,1),kt(e.d,e.vc,e.l,B-2))):(kt(e.d,e.hb,e.l,0),1==P?kt(e.d,e._,u,0):kt(e.d,e._,u,1)),1==P?e.l=7>e.l?9:11:(Kr(e.i,e.d,P-2,k),e.l=7>e.l?8:11),m=e.v[B],0!=B){for(p=B;p>=1;--p)e.v[p]=e.v[p-1];e.v[0]=m}}else{for(kt(e.d,e.bb,e.l,0),e.l=7>e.l?7:10,Kr(e.$,e.d,P-2,k),B-=4,g=Tr(B),l=Q(P),mt(e.K[l],e.d,g),g>=4&&(d=(g>>1)-1,i=(2|1&g)<<d,S=B-i,14>g?Pt(e.Sb,i-g-1,e.d,d,S):(Rt(e.d,S>>4,d-4),pt(e.S,e.d,15&S),++e.Qb)),m=B,p=3;p>=1;--p)e.v[p]=e.v[p-1];e.v[0]=m,++e.Mb}e.J=C(e.b,P-1-e.s)}if(e.s-=P,e.g=o(e.g,a(P)),!e.s){if(e.Mb>=128&&wr(e),e.Qb>=16&&br(e),r[0]=e.g,t[0]=Mt(e.d),!F(e.b))return void Er(e,c(e.g));if(s(h(e.g,R),[4096,0])>=0)return e.pc=0,void(n[0]=0)}}}}function Mr(e){var r,t;e.b||(r={},t=4,e.X||(t=2),Z(r,t),e.b=r),Ur(e.A,e.eb,e.fb),(e.ab!=e.wb||e.Hb!=e.n)&&(A(e.b,e.ab,4096,e.n,274),e.wb=e.ab,e.Hb=e.n)}function Dr(e){var r;for(e.v=t(4),e.a=[],e.d={},e.C=t(192),e.bb=t(12),e.hb=t(12),e.Ub=t(12),e.vc=t(12),e._=t(192),e.K=[],e.Sb=t(114),e.S=ft({},4),e.$=qr({}),e.i=qr({}),e.A={},e.m=[],e.P=[],e.lb=[],e.nc=t(16),e.x=t(4),e.Q=t(4),e.Xb=[Gt],e.uc=[Gt],e.Kc=[0],e.fc=t(5),e.yc=t(128),e.vb=0,e.X=1,e.D=0,e.Hb=-1,e.mb=0,r=0;4096>r;++r)e.a[r]={};for(r=0;4>r;++r)e.K[r]=ft({},6);return e}function br(e){for(var r=0;16>r;++r)e.nc[r]=ht(e.S,r);e.Qb=0}function wr(e){var r,t,o,n,s,i,_,a;for(n=4;128>n;++n)i=Tr(n),o=(i>>1)-1,r=(2|1&i)<<o,e.yc[n]=lt(e.Sb,r-i-1,o,n-r);for(s=0;4>s;++s){for(t=e.K[s],_=s<<6,i=0;e.$b>i;++i)e.P[_+i]=dt(t,i);for(i=14;e.$b>i;++i)e.P[_+i]+=(i>>1)-1-4<<6;for(a=128*s,n=0;4>n;++n)e.lb[a+n]=e.P[_+n];for(;128>n;++n)e.lb[a+n]=e.P[_+Tr(n)]+e.yc[n]}e.Mb=0}function Er(e,r){Nr(e),Wr(e,r&e.y);for(var t=0;5>t;++t)bt(e.d)}function Lr(e,r){var t,o,n,s,i,_,a,c,u,f,m,d,p,h,P,l,v,B,S,g,k,R,M,D,b,w,E,L,y,I,x,N,O,A,H,G,W,T,Z,Y,V,j,$,K,q,J,Q,X,er,rr;if(e.jb!=e.q)return p=e.a[e.q].r-e.q,e.mb=e.a[e.q].j,e.q=e.a[e.q].r,p;if(e.q=e.jb=0,e.N?(d=e.vb,e.N=0):d=xr(e),E=e.D,b=F(e.b)+1,2>b)return e.mb=-1,1;for(b>273&&(b=273),Y=0,u=0;4>u;++u)e.x[u]=e.v[u],e.Q[u]=z(e.b,-1,e.x[u],273),e.Q[u]>e.Q[Y]&&(Y=u);if(e.Q[Y]>=e.n)return e.mb=Y,p=e.Q[Y],Ir(e,p-1),p;if(d>=e.n)return e.mb=e.m[E-1]+4,Ir(e,d-1),d;if(a=C(e.b,-1),v=C(e.b,-e.v[0]-1-1),2>d&&a!=v&&2>e.Q[Y])return e.mb=-1,1;if(e.a[0].Hc=e.l,A=r&e.y,e.a[1].z=Yt[e.C[(e.l<<4)+A]>>>2]+nt(Xr(e.A,r,e.J),e.l>=7,v,a),st(e.a[1]),B=Yt[2048-e.C[(e.l<<4)+A]>>>2],Z=B+Yt[2048-e.bb[e.l]>>>2],v==a&&(V=Z+zr(e,e.l,A),e.a[1].z>V&&(e.a[1].z=V,it(e.a[1]))),m=d>=e.Q[Y]?d:e.Q[Y],2>m)return e.mb=e.a[1].j,1;e.a[1].r=0,e.a[0].bc=e.x[0],e.a[0].ac=e.x[1],e.a[0].dc=e.x[2],e.a[0].lc=e.x[3],f=m;do e.a[f--].z=268435455;while(f>=2);for(u=0;4>u;++u)if(T=e.Q[u],!(2>T)){G=Z+Cr(e,u,e.l,A);do s=G+Jr(e.i,T-2,A),x=e.a[T],x.z>s&&(x.z=s,x.r=0,x.j=u,x.t=0);while(--T>=2)}if(D=B+Yt[e.bb[e.l]>>>2],f=e.Q[0]>=2?e.Q[0]+1:2,d>=f){for(L=0;f>e.m[L];)L+=2;for(;c=e.m[L+1],s=D+yr(e,c,f,A),x=e.a[f],x.z>s&&(x.z=s,x.r=0,x.j=c+4,x.t=0),f!=e.m[L]||(L+=2,L!=E);++f);}for(t=0;;){if(++t,t==m)return gr(e,t);if(S=xr(e),E=e.D,S>=e.n)return e.vb=S,e.N=1,gr(e,t);if(++r,O=e.a[t].r,e.a[t].t?(--O,e.a[t].Ac?($=e.a[e.a[t].r2].Hc,$=4>e.a[t].j2?7>$?8:11:7>$?7:10):$=e.a[O].Hc,$=U($)):$=e.a[O].Hc,O==t-1?$=e.a[t].j?U($):7>$?9:11:(e.a[t].t&&e.a[t].Ac?(O=e.a[t].r2,N=e.a[t].j2,$=7>$?8:11):(N=e.a[t].j,$=4>N?7>$?8:11:7>$?7:10),I=e.a[O],4>N?N?1==N?(e.x[0]=I.ac,e.x[1]=I.bc,e.x[2]=I.dc,e.x[3]=I.lc):2==N?(e.x[0]=I.dc,e.x[1]=I.bc,e.x[2]=I.ac,e.x[3]=I.lc):(e.x[0]=I.lc,e.x[1]=I.bc,e.x[2]=I.ac,e.x[3]=I.dc):(e.x[0]=I.bc,e.x[1]=I.ac,e.x[2]=I.dc,e.x[3]=I.lc):(e.x[0]=N-4,e.x[1]=I.bc,e.x[2]=I.ac,e.x[3]=I.dc)),e.a[t].Hc=$,e.a[t].bc=e.x[0],e.a[t].ac=e.x[1],e.a[t].dc=e.x[2],e.a[t].lc=e.x[3],_=e.a[t].z,a=C(e.b,-1),v=C(e.b,-e.x[0]-1-1),A=r&e.y,o=_+Yt[e.C[($<<4)+A]>>>2]+nt(Xr(e.A,r,C(e.b,-2)),$>=7,v,a),R=e.a[t+1],g=0,R.z>o&&(R.z=o,R.r=t,R.j=-1,R.t=0,g=1),B=_+Yt[2048-e.C[($<<4)+A]>>>2],Z=B+Yt[2048-e.bb[$]>>>2],v!=a||t>R.r&&!R.j||(V=Z+(Yt[e.hb[$]>>>2]+Yt[e._[($<<4)+A]>>>2]),R.z>=V&&(R.z=V,R.r=t,R.j=0,R.t=0,g=1)),w=F(e.b)+1,w=w>4095-t?4095-t:w,b=w,!(2>b)){if(b>e.n&&(b=e.n),!g&&v!=a&&(q=Math.min(w-1,e.n),P=z(e.b,0,e.x[0],q),P>=2)){for(K=U($),H=r+1&e.y,M=o+Yt[2048-e.C[(K<<4)+H]>>>2]+Yt[2048-e.bb[K]>>>2],y=t+1+P;y>m;)e.a[++m].z=268435455;s=M+(J=Jr(e.i,P-2,H),J+Cr(e,0,K,H)),x=e.a[y],x.z>s&&(x.z=s,x.r=t+1,x.j=0,x.t=1,x.Ac=0)}for(j=2,W=0;4>W;++W)if(h=z(e.b,-1,e.x[W],b),!(2>h)){l=h;do{for(;t+h>m;)e.a[++m].z=268435455;s=Z+(Q=Jr(e.i,h-2,A),Q+Cr(e,W,$,A)),x=e.a[t+h],x.z>s&&(x.z=s,x.r=t,x.j=W,x.t=0)}while(--h>=2);if(h=l,W||(j=h+1),w>h&&(q=Math.min(w-1-h,e.n),P=z(e.b,h,e.x[W],q),P>=2)){for(K=7>$?8:11,H=r+h&e.y,n=Z+(X=Jr(e.i,h-2,A),X+Cr(e,W,$,A))+Yt[e.C[(K<<4)+H]>>>2]+nt(Xr(e.A,r+h,C(e.b,h-1-1)),1,C(e.b,h-1-(e.x[W]+1)),C(e.b,h-1)),K=U(K),H=r+h+1&e.y,k=n+Yt[2048-e.C[(K<<4)+H]>>>2],M=k+Yt[2048-e.bb[K]>>>2],y=h+1+P;t+y>m;)e.a[++m].z=268435455;s=M+(er=Jr(e.i,P-2,H),er+Cr(e,0,K,H)),x=e.a[t+y],x.z>s&&(x.z=s,x.r=t+h+1,x.j=0,x.t=1,x.Ac=1,x.r2=t,x.j2=W)}}if(S>b){for(S=b,E=0;S>e.m[E];E+=2);e.m[E]=S,E+=2}if(S>=j){for(D=B+Yt[e.bb[$]>>>2];t+S>m;)e.a[++m].z=268435455;for(L=0;j>e.m[L];)L+=2;for(h=j;;++h)if(i=e.m[L+1],s=D+yr(e,i,h,A),x=e.a[t+h],x.z>s&&(x.z=s,x.r=t,x.j=i+4,x.t=0),h==e.m[L]){if(w>h&&(q=Math.min(w-1-h,e.n),P=z(e.b,h,i,q),P>=2)){for(K=7>$?7:10,H=r+h&e.y,n=s+Yt[e.C[(K<<4)+H]>>>2]+nt(Xr(e.A,r+h,C(e.b,h-1-1)),1,C(e.b,h-(i+1)-1),C(e.b,h-1)),K=U(K),H=r+h+1&e.y,k=n+Yt[2048-e.C[(K<<4)+H]>>>2],M=k+Yt[2048-e.bb[K]>>>2],y=h+1+P;t+y>m;)e.a[++m].z=268435455;s=M+(rr=Jr(e.i,P-2,H),rr+Cr(e,0,K,H)),x=e.a[t+y],x.z>s&&(x.z=s,x.r=t+h+1,x.j=0,x.t=1,x.Ac=1,x.r2=t,x.j2=i+4)}if(L+=2,L==E)break}}}}}function yr(e,r,t,o){var n,s=Q(t);return n=128>r?e.lb[128*s+r]:e.P[(s<<6)+Zr(r)]+e.nc[15&r],n+Jr(e.$,t-2,o)}function Cr(e,r,t,o){var n;return r?(n=Yt[2048-e.hb[t]>>>2],1==r?n+=Yt[e.Ub[t]>>>2]:(n+=Yt[2048-e.Ub[t]>>>2],n+=wt(e.vc[t],r-2))):(n=Yt[e.hb[t]>>>2],n+=Yt[2048-e._[(t<<4)+o]>>>2]),n}function zr(e,r,t){return Yt[e.hb[r]>>>2]+Yt[e._[(r<<4)+t]>>>2]}function Fr(e){kr(e),Dt(e.d),gt(e.C),gt(e._),gt(e.bb),gt(e.hb),gt(e.Ub),gt(e.vc),gt(e.Sb),et(e.A);for(var r=0;4>r;++r)gt(e.K[r].G);jr(e.$,1<<e.Y),jr(e.i,1<<e.Y),gt(e.S.G),e.N=0,e.jb=0,e.q=0,e.s=0}function Ir(e,r){r>0&&(Y(e.b,r),e.s+=r)}function xr(e){var r=0;return e.D=H(e.b,e.m),e.D>0&&(r=e.m[e.D-2],r==e.n&&(r+=z(e.b,r-1,e.m[e.D-1],273-r))),++e.s,r}function Nr(e){e.b&&e.W&&(e.b.cc=null,e.W=0)}function Or(e){Nr(e),e.d.Ab=null}function Ar(e,r){e.ab=r;for(var t=0;r>1<<t;++t);e.$b=2*t}function Hr(e,r){var t=e.X;e.X=r,e.b&&t!=e.X&&(e.wb=-1,e.b=null)}function Gr(e,r){e.fc[0]=9*(5*e.Y+e.eb)+e.fb<<24>>24;for(var t=0;4>t;++t)e.fc[1+t]=e.ab>>8*t<<24>>24;k(r,e.fc,0,5)}function Wr(e,r){if(e.Gc){kt(e.d,e.C,(e.l<<4)+r,1),kt(e.d,e.bb,e.l,0),e.l=7>e.l?7:10,Kr(e.$,e.d,0,r);var t=Q(2);mt(e.K[t],e.d,63),Rt(e.d,67108863,26),pt(e.S,e.d,15)}}function Tr(e){return 2048>e?Zt[e]:2097152>e?Zt[e>>10]+20:Zt[e>>20]+40}function Zr(e){return 131072>e?Zt[e>>6]+12:134217728>e?Zt[e>>16]+32:Zt[e>>26]+52}function Yr(e,r,t,o){8>t?(kt(r,e.db,0,0),mt(e.Vb[o],r,t)):(t-=8,kt(r,e.db,0,1),8>t?(kt(r,e.db,1,0),mt(e.Wb[o],r,t)):(kt(r,e.db,1,1),mt(e.ic,r,t-8)))}function Vr(e){e.db=t(2),e.Vb=t(16),e.Wb=t(16),e.ic=ft({},8);for(var r=0;16>r;++r)e.Vb[r]=ft({},3),e.Wb[r]=ft({},3);return e}function jr(e,r){gt(e.db);for(var t=0;r>t;++t)gt(e.Vb[t].G),gt(e.Wb[t].G);gt(e.ic.G)}function $r(e,r,t,o,n){var s,i,_,a,c;for(s=Yt[e.db[0]>>>2],i=Yt[2048-e.db[0]>>>2],_=i+Yt[e.db[1]>>>2],a=i+Yt[2048-e.db[1]>>>2],c=0,c=0;8>c;++c){if(c>=t)return;o[n+c]=s+dt(e.Vb[r],c)}for(;16>c;++c){if(c>=t)return;o[n+c]=_+dt(e.Wb[r],c-8)}for(;t>c;++c)o[n+c]=a+dt(e.ic,c-8-8)}function Kr(e,r,t,o){Yr(e,r,t,o),0==--e.sc[o]&&($r(e,o,e.rb,e.Cc,272*o),e.sc[o]=e.rb)}function qr(e){return Vr(e),e.Cc=[],e.sc=[],e}function Jr(e,r,t){return e.Cc[272*t+r]}function Qr(e,r){for(var t=0;r>t;++t)$r(e,t,e.rb,e.Cc,272*t),e.sc[t]=e.rb}function Ur(e,r,o){var n,s;if(null==e.V||e.u!=o||e.I!=r)for(e.I=r,e.qc=(1<<r)-1,e.u=o,s=1<<e.u+e.I,e.V=t(s),n=0;s>n;++n)e.V[n]=ot({})}function Xr(e,r,t){return e.V[((r&e.qc)<<e.u)+((255&t)>>>8-e.u)]}function et(e){var r,t=1<<e.u+e.I;for(r=0;t>r;++r)gt(e.V[r].tb)}function rt(e,r,t){var o,n,s=1;for(n=7;n>=0;--n)o=t>>n&1,kt(r,e.tb,s,o),s=s<<1|o}function tt(e,r,t,o){var n,s,i,_,a=1,c=1;for(s=7;s>=0;--s)n=o>>s&1,_=c,a&&(i=t>>s&1,_+=1+i<<8,a=i==n),kt(r,e.tb,_,n),c=c<<1|n}function ot(e){return e.tb=t(768),e}function nt(e,r,t,o){var n,s,i=1,_=7,a=0;if(r)for(;_>=0;--_)if(s=t>>_&1,n=o>>_&1,a+=wt(e.tb[(1+s<<8)+i],n),i=i<<1|n,s!=n){--_;break}for(;_>=0;--_)n=o>>_&1,a+=wt(e.tb[i],n),i=i<<1|n;return a}function st(e){e.j=-1,e.t=0}function it(e){e.j=0,e.t=0}function _t(e,r){return e.F=r,e.G=t(1<<r),e}function at(e,r){var t,o=1;for(t=e.F;0!=t;--t)o=(o<<1)+vt(r,e.G,o);return o-(1<<e.F)}function ct(e,r){var t,o,n=1,s=0;for(o=0;e.F>o;++o)t=vt(r,e.G,n),n<<=1,n+=t,s|=t<<o;return s}function ut(e,r,t,o){var n,s,i=1,_=0;for(s=0;o>s;++s)n=vt(t,e,r+i),i<<=1,i+=n,_|=n<<s;return _}function ft(e,r){return e.F=r,e.G=t(1<<r),e}function mt(e,r,t){var o,n,s=1;for(n=e.F;0!=n;)--n,o=t>>>n&1,kt(r,e.G,s,o),s=s<<1|o}function dt(e,r){var t,o,n=1,s=0;for(o=e.F;0!=o;)--o,t=r>>>o&1,s+=wt(e.G[n],t),n=(n<<1)+t;return s}function pt(e,r,t){var o,n,s=1;for(n=0;e.F>n;++n)o=1&t,kt(r,e.G,s,o),s=s<<1|o,t>>=1}function ht(e,r){var t,o,n=1,s=0;for(o=e.F;0!=o;--o)t=1&r,r>>>=1,s+=wt(e.G[n],t),n=n<<1|t;return s}function Pt(e,r,t,o,n){var s,i,_=1;for(i=0;o>i;++i)s=1&n,kt(t,e,r+_,s),_=_<<1|s,n>>=1}function lt(e,r,t,o){var n,s,i=1,_=0;for(s=t;0!=s;--s)n=1&o,o>>>=1,_+=Yt[(2047&(e[r+i]-n^-n))>>>2],i=i<<1|n;return _}function vt(e,r,t){var o,n=r[t];return o=(e.E>>>11)*n,(-2147483648^o)>(-2147483648^e.Bb)?(e.E=o,r[t]=n+(2048-n>>>5)<<16>>16,-16777216&e.E||(e.Bb=e.Bb<<8|l(e.Ab),e.E<<=8),0):(e.E-=o,e.Bb-=o,r[t]=n-(n>>>5)<<16>>16,-16777216&e.E||(e.Bb=e.Bb<<8|l(e.Ab),e.E<<=8),1)}function Bt(e,r){var t,o,n=0;for(t=r;0!=t;--t)e.E>>>=1,o=e.Bb-e.E>>>31,e.Bb-=e.E&o-1,n=n<<1|1-o,-16777216&e.E||(e.Bb=e.Bb<<8|l(e.Ab),e.E<<=8);return n}function St(e){e.Bb=0,e.E=-1;for(var r=0;5>r;++r)e.Bb=e.Bb<<8|l(e.Ab)}function gt(e){for(var r=e.length-1;r>=0;--r)e[r]=1024}function kt(e,r,t,s){var i,_=r[t];i=(e.E>>>11)*_,s?(e.xc=o(e.xc,n(a(i),[4294967295,0])),e.E-=i,r[t]=_-(_>>>5)<<16>>16):(e.E=i,r[t]=_+(2048-_>>>5)<<16>>16),-16777216&e.E||(e.E<<=8,bt(e))}function Rt(e,r,t){for(var n=t-1;n>=0;--n)e.E>>>=1,1==(r>>>n&1)&&(e.xc=o(e.xc,a(e.E))),-16777216&e.E||(e.E<<=8,bt(e))}function Mt(e){return o(o(a(e.Jb),e.mc),[4,0])}function Dt(e){e.mc=Gt,e.xc=Gt,e.E=-1,e.Jb=1,e.Oc=0}function bt(e){var r,t=c(p(e.xc,32));if(0!=t||s(e.xc,[4278190080,0])<0){e.mc=o(e.mc,a(e.Jb)),r=e.Oc;do g(e.Ab,r+t),r=255;while(0!=--e.Jb);e.Oc=c(e.xc)>>>24}++e.Jb,e.xc=m(n(e.xc,[16777215,0]),8)}function wt(e,r){return Yt[(2047&(e-r^-r))>>>2]}function Et(e){for(var r,t,o,n=0,s=0,i=e.length,_=[],a=[];i>n;++n,++s){if(r=255&e[n],128&r)if(192==(224&r)){if(n+1>=i)return e;if(t=255&e[++n],128!=(192&t))return e;a[s]=(31&r)<<6|63&t}else{if(224!=(240&r))return e;
if(n+2>=i)return e;if(t=255&e[++n],128!=(192&t))return e;if(o=255&e[++n],128!=(192&o))return e;a[s]=(15&r)<<12|(63&t)<<6|63&o}else{if(!r)return e;a[s]=r}16383==s&&(_.push(String.fromCharCode.apply(String,a)),s=-1)}return s>0&&(a.length=s,_.push(String.fromCharCode.apply(String,a))),_.join("")}function Lt(e){var r,t,o,n=[],s=0,i=e.length;if("object"==typeof e)return e;for(R(e,0,i,n,0),o=0;i>o;++o)r=n[o],r>=1&&127>=r?++s:s+=!r||r>=128&&2047>=r?2:3;for(t=[],s=0,o=0;i>o;++o)r=n[o],r>=1&&127>=r?t[s++]=r<<24>>24:!r||r>=128&&2047>=r?(t[s++]=(192|r>>6&31)<<24>>24,t[s++]=(128|63&r)<<24>>24):(t[s++]=(224|r>>12&15)<<24>>24,t[s++]=(128|r>>6&63)<<24>>24,t[s++]=(128|63&r)<<24>>24);return t}function yt(e){return e[1]+e[0]}function Ct(e,t,o,n){function s(){try{for(var e,r=(new Date).getTime();rr(a.c.yb);)if(i=yt(a.c.yb.Pb)/yt(a.c.Tb),(new Date).getTime()-r>200)return n(i),Nt(s,0),0;n(1),e=S(a.c.Nb),Nt(o.bind(null,e),0)}catch(t){o(null,t)}}var i,_,a={},c=void 0===o&&void 0===n;if("function"!=typeof o&&(_=o,o=n=0),n=n||function(e){return void 0!==_?r(e,_):void 0},o=o||function(e,r){return void 0!==_?postMessage({action:Ft,cbn:_,result:e,error:r}):void 0},c){for(a.c=w({},Lt(e),Vt(t));rr(a.c.yb););return S(a.c.Nb)}try{a.c=w({},Lt(e),Vt(t)),n(0)}catch(u){return o(null,u)}Nt(s,0)}function zt(e,t,o){function n(){try{for(var e,r=0,i=(new Date).getTime();rr(c.d.yb);)if(++r%1e3==0&&(new Date).getTime()-i>200)return _&&(s=yt(c.d.yb.Z.g)/a,o(s)),Nt(n,0),0;o(1),e=Et(S(c.d.Nb)),Nt(t.bind(null,e),0)}catch(u){t(null,u)}}var s,i,_,a,c={},u=void 0===t&&void 0===o;if("function"!=typeof t&&(i=t,t=o=0),o=o||function(e){return void 0!==i?r(_?e:-1,i):void 0},t=t||function(e,r){return void 0!==i?postMessage({action:It,cbn:i,result:e,error:r}):void 0},u){for(c.d=L({},e);rr(c.d.yb););return Et(S(c.d.Nb))}try{c.d=L({},e),a=yt(c.d.Tb),_=a>-1,o(0)}catch(f){return t(null,f)}Nt(n,0)}var Ft=1,It=2,xt=3,Nt="function"==typeof setImmediate?setImmediate:setTimeout,Ot=4294967296,At=[4294967295,-Ot],Ht=[0,-0x8000000000000000],Gt=[0,0],Wt=[1,0],Tt=function(){var e,r,t,o=[];for(e=0;256>e;++e){for(t=e,r=0;8>r;++r)0!=(1&t)?t=t>>>1^-306674912:t>>>=1;o[e]=t}return o}(),Zt=function(){var e,r,t,o=2,n=[0,1];for(t=2;22>t;++t)for(r=1<<(t>>1)-1,e=0;r>e;++e,++o)n[o]=t<<24>>24;return n}(),Yt=function(){var e,r,t,o,n=[];for(r=8;r>=0;--r)for(o=1<<9-r-1,e=1<<9-r,t=o;e>t;++t)n[t]=(r<<6)+(e-t<<6>>>9-r-1);return n}(),Vt=function(){var e=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}];return function(r){return e[r-1]||e[6]}}();return"undefined"==typeof onmessage||"undefined"!=typeof window&&void 0!==window.document||!function(){onmessage=function(r){r&&r.gc&&(r.gc.action==It?e.decompress(r.gc.gc,r.gc.cbn):r.gc.action==Ft&&e.compress(r.gc.gc,r.gc.Rc,r.gc.cbn))}}(),{compress:Ct,decompress:zt}}();this.LZMA=this.LZMA_WORKER=e;
// объект для управления и взаимодействия с внешней игровой панелькой
// сама панелька находится в файле s3eFBInstantPanel.html
var s3eFBInstantPanel = {};
(function() {
	this.name 			= 's3eFBInstantPanel';

	// состояние инициализации панельки
	var _isInited_		= false;

	var _self_ 			= this;

	// консоль для вывода сообщений
	var _console_;

	// время последнего обновления лидербордов
	// используется для ограничения обновления
	// лидербордов до раз в 60 секунд
	var _lastUpdate_;

	// iframe, содержащий панельку
	// и документ iframe'а для заполнения
	var iFrame;
	var iFrameInnerDoc;

	// главный div с панелькой и ее содержимым
	var mainPanelDiv;

	// элементы панельки для заполнения
	var leaderboard;
	var inviteFriends;
	var leaderboardTab;
	var inviteFriendsTab;
	var crossPromo;

	var buttonClose;
	var buttonCloseText;

	var gamesData;
	// установка консоли для вывода сообщений
	// console - функция для обработки сообщений
	this.setConsole = function (console) {
		_console_ = console;
	};

	// инициализация модуля и панельки
	// вызывается один раз при готовности игры
	this.configure = function () {
		if (typeof s3eFBInstantConsole !== 'object') {
			log('INIT ERROR - No s3eFBInstantConsole!');
			_isInited_ = false;
			return;
		}

		iFrame = document.getElementById("s3eFBIGPanelIFrame");
		if (iFrame) {
			iFrameInnerDoc = (iFrame.contentDocument) ? iFrame.contentDocument : iFrame.contentWindow.document;
			if (!iFrameInnerDoc) {
				log('No inner document in iFrame!');
				_isInited_ = false;
				return;
			}
		} else {
			log('No iFrame!');
			_isInited_ = false;
			return;
		}

		mainPanelDiv = iFrameInnerDoc.getElementById("s3eFBIGLeaderboardInviteFriends");
		if (!mainPanelDiv) {
			log('No main div of panel!');
			_isInited_ = false;
			return;
		}

		leaderboard = iFrameInnerDoc.getElementById("s3eFBIGLeaderboard");
		inviteFriends = iFrameInnerDoc.getElementById("s3eFBIGInviteFriends");
		leaderboardTab = iFrameInnerDoc.getElementById("s3eFBIGLeaderboardTab");
		inviteFriendsTab = iFrameInnerDoc.getElementById("s3eFBIGInviteFriendsTab");
		crossPromo = iFrameInnerDoc.getElementById("cross-promo");
		if(crossPromo) {
			crossPromo.style.display = 'none';
		}
		
		buttonClose = iFrameInnerDoc.getElementById("s3eFBIGLeaderboardButton");
	    buttonCloseText = iFrameInnerDoc.getElementById("s3eFBIGLeaderboardButtonText");
		if (leaderboardTab && inviteFriendsTab && leaderboard && inviteFriends) {
			leaderboardTab.onclick = function () {
				leaderboardTab.style.backgroundColor = 'rgb(64, 128, 250)';
				leaderboardTab.style.color = 'rgb(255, 255, 255)';
				inviteFriendsTab.style.backgroundColor = 'rgb(255, 255, 255)';
				inviteFriendsTab.style.color = '#3b5998';
				leaderboard.style.display = 'block';
				inviteFriends.style.display = 'none';
			};

			inviteFriendsTab.onclick = function () {
				inviteFriendsTab.style.backgroundColor = 'rgb(64, 128, 250)';
				inviteFriendsTab.style.color = 'rgb(255, 255, 255)';
				leaderboardTab.style.backgroundColor = 'rgb(255, 255, 255)';
				leaderboardTab.style.color = '#3b5998';
				leaderboard.style.display = 'none';
				inviteFriends.style.display = 'block';
			};
			
			leaderboardTab.style.backgroundColor = 'rgb(64, 128, 250)';
			leaderboardTab.style.color = 'rgb(255, 255, 255)';
			inviteFriendsTab.style.backgroundColor = 'rgb(255, 255, 255)';
			inviteFriendsTab.style.color = '#3b5998';
			leaderboard.style.display = 'block';
			inviteFriends.style.display = 'none';
			
		} else {
			log('No needed elements!');
			_isInited_ = false;
			return;
		}

		_isInited_ = true;
	};

	// обновление данных игроков
	// для лидербордов и формирования
	// списка друзей для приглашения в игру
	this.update = function () {
		log('Update panel');

		if (!_isInited_) {
			log('Is not inited!');
			return;
		}

		if (!_lastUpdate_) {
			if (!Date.now) {
				Date.now = function now() {
					return new Date().getTime();
				};
			}
		} else {
			var _now_ = Math.floor(Date.now() / 1000);
			if (_now_ - _lastUpdate_ < 60) {
				log('It is not time yet!');
				return;
			}
			_lastUpdate_ = _now_;
		}

		s3eFBInstantConsole.getLeaderboards(function (entries) {
			updateLeaderboard(entries);
		});

		s3eFBInstantConsole.getConnectedPlayers(function (entries) {
			updateInviteFriends(entries);
		});
	};

	// показать панельку
	this.show = function () {
		log('Show panel');
		
		if(buttonClose) {
			buttonClose.onclick = function () {
				s3eFBInstantConsole.gameEventCallback('play');
			};		
		}
		if(buttonCloseText) {
			buttonCloseText.innerText = "Play now";
		}
		
		if (!_isInited_) {
			log('Is not inited!');
			return;
		}

		if (mainPanelDiv)
			mainPanelDiv.style.display = 'block';

		if (iFrame) {
			iFrame.style.display = 'block';
			iFrame.style.zIndex = '1024';
		}
	};
	
	// показать панельку
	this.showLeaderBoard = function () {
		log('Show panel');
		
		this.showCrossPromo();
		
		if(buttonClose) {
			buttonClose.onclick = function () {
				s3eFBInstantConsole.gameEventCallback('hide_leaderboards');
			};		
		}
		if(buttonCloseText) {
			buttonCloseText.innerText = "Close";
		}
		
		if (!_isInited_) {
			log('Is not inited!');
			return;
		}

		if (mainPanelDiv)
			mainPanelDiv.style.display = 'block';

		if (iFrame) {
			iFrame.style.display = 'block';
			iFrame.style.zIndex = '1024';
		}
	};

	// скрыть панельку
	this.hide = function () {
		log('Hide panel');
		if(crossPromo) {
			crossPromo.style.display = 'none';
		}
		if (!_isInited_) {
			log('Is not inited!');
			return;
		}

		if (mainPanelDiv)
			mainPanelDiv.style.display = 'none';

		if (iFrame) {
			iFrame.style.display = 'none';
			iFrame.style.zIndex = '0';
		}
	};

	// получить состояние инициализации
	this.getIsInited = function () {
		return _isInited_;
	};
	
	this.showCrossPromo = function () {
		if(crossPromo && gamesData.length >= 4) {
			function imgLoad(url) {				
				return new Promise(function (resolve, reject) {
					var request = new XMLHttpRequest();
					request.open('GET', url);
					request.responseType = 'blob';
					request.onload = function () {
						if (request.status === 200) {
							resolve(request.response);
						} else {
							reject(new Error('Image didn\'t load successfully; error code:' + request.statusText));
						}
					};
					request.onerror = function () {
						reject(new Error('There was a network error.'));
					};
					request.send();
				});
			}

			function loadImage(url, id) {				
				var myImage = new Image();
				myImage.crossOrigin = "";
				imgLoad(url).then(function (response) {
					var imageURL = window.URL.createObjectURL(response);
					myImage.src = imageURL;
					myImage.style.width = "71px";
					myImage.style.padding = "5px";
					myImage.style.borderRadius = "50%";
					myImage.onclick = function(){
					    s3eFBInstantConsole.switchGame(id);						
					};
					crossPromo.appendChild(myImage);
				}, function (Error) {
					log(Error);
				});
			}
		
			crossPromo.style.display = 'block';
			var tmpGamesData = new Array();
			for (j = 0; j < gamesData.length; j++) {
                var gameData = gamesData[j];
                tmpGamesData.push(gameData);
            } 
			for (j = 0; j < 4; j++) {
			    var currentRnd = parseInt(Math.random() * tmpGamesData.length);
                var tmpGameData = tmpGamesData[currentRnd];
				loadImage(tmpGameData["image"], tmpGameData["link"]);
                tmpGamesData.splice(currentRnd,1);
            } 
			
		}
	}
        
	// получить состояние инициализации
	this.setCrossConfigLink = function (link) {
		
            var httpStatus = 0;
            var loader = new global.ExtendedURLLoader(15, 8000, 0);
            loader.dataFormat = global.URLLoaderDataFormat.BINARY;
            loader.addEventListener(global.Event.COMPLETE, onComplete.bind(this));
            loader.addEventListener(global.IOErrorEvent.IO_ERROR, onError.bind(this));
            loader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
            loader.addEventListener(global.HTTPStatusEvent.HTTP_STATUS, onStatus.bind(this));
            loader.load(new global.URLRequest(link));            
            function onComplete(event) {
                //global.EventStats.handle(ASViewer, event);
                global.GLog.print("[httpGet] onComplete url=" + link);
                var loader = event.target;
                if (loader) {
                    var ba = loader.data;
                    /*if (ba) {
                        ba.endian = global.Endian.LITTLE_ENDIAN;
                        var len = ba.length;                        
                        ba.position = 0;
                    } */           
            try {
                var inBytes = as(ba, global.ByteArray);
				 inBytes.position = 0;
				// var jsonString = inBytes.readUTFBytes(inBytes.bytesAvailable);
                inBytes.position = 0;
                //trace(inBytes.bytesAvailable.toString());
                this.XORByte(inBytes, inBytes.bytesAvailable.toString());
				 inBytes.position = 0;
				//jsonString = inBytes.readUTFBytes(inBytes.bytesAvailable);
                inBytes.position = 0;
                inBytes.uncompress();
                inBytes.position = 0;
                var jsonString = inBytes.readUTFBytes(inBytes.bytesAvailable);
                this.readConfig(jsonString);
            }
            catch (error) {
                error = window.asc.e2e(error);
                //trace(error);
                //this.OnLoadDataError(null);
            }
                   
                    //this.doCallback(loader.getCallbackKey(), paramsByte, ba);
                    loader.removeEventListener(global.Event.COMPLETE, onComplete.bind(this));
                    loader.removeEventListener(global.IOErrorEvent.IO_ERROR, onError.bind(this));
                    loader.removeEventListener(global.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
                    loader.removeEventListener(global.HTTPStatusEvent.HTTP_STATUS, onStatus.bind(this));
                    
                }
                else {
                    global.GLog.print("[httpGet] ERROR::onComplete url=" + url);
                }
            }
            function onError(event) {
                var loader = event.currentTarget;
                global.EventStats.handle(ASViewer, event);
                global.GLog.print("[httpGet] ERROR::onError -> loader = " + loader);
                
            }
            function onStatus(event) {
                httpStatus = event.status;
            }
	};
	
	
	 this.readConfig = function (configStr) {
            configStr = as(configStr, 'String');           
            var i = 0;
            var j = 0;
            this._configObject = window.JSON.parse(configStr); 
            var dataPlacements = strict(this._configObject.placements, Array);
            if (dataPlacements) {                
                for (i = 0; i < dataPlacements.length; i++) {
                    var placementData = dataPlacements[i];
                    if (!placementData.hasOwnProperty("name") || !placementData.hasOwnProperty("type")) {
                        continue;
                    }
					if(placementData["type"] == 'cross_promo') {
					
                    var placement = new Object();
                    placement.name = placementData["name"];                   
					var gamesDataArray = placementData["games"]			
                    gamesData = new Array();
                    for (j = 0; j < gamesDataArray.length; j++) {
                        var gameData = gamesDataArray[j];                       
                        var channel = new Object();
                        channel.link = gameData["link"];   
						channel.image = gameData["image"];    						
                        gamesData.push(channel);
                    }                   
					}
                }
            }
            //trace(this._placements);
            //this._callback();
        };
	
     this.XORByte = function (binaryData, key) {
            binaryData = strict(binaryData, global.ByteArray);
            key = as(key, 'String');
            var keyIndex = 0;
            for (var i = 0; i < binaryData.length; i++) {
                binaryData.set(i, binaryData.get(i) ^ key.charCodeAt(keyIndex));
                keyIndex++;
                if (keyIndex >= key.length) {
                    keyIndex = 0;
                }
            }
	};

	// обновить лидерборды из данных и заполнить вкладку лидербордов
	// entries - массив данных про игроков с лучшими результатами и местами
	var updateLeaderboard = function (entries) {
		if (!leaderboard)
			return;

		leaderboard.innerHTML = "";
		var html = '';
		if (entries) {
			for(var i = 0; i < entries.length; i++) {
				if (entries[i] && entries[i].getPlayer() && entries[i].getPlayer().getPhoto() && entries[i].getPlayer().getName() && entries[i].getFormattedScore() && entries[i].getRank()) {
					var userScore = entries[i].getFormattedScore();
					if (entries[i].getPlayer().getID()) {
						if (entries[i].getPlayer().getID() == s3eFBInstantConsole.getUserID()) {
							if (s3eFBInstantConsole.getUserHighScore() > userScore) {
								userScore = s3eFBInstantConsole.getUserHighScore();
							}
						}
					}
					html += '<div style="border-top:solid 1px #fff;padding: 2% 3% 2% 3%; vertical-align: top; display: flex; align-items: center; color: rgb(29, 33, 41); font-size: 17px; background-color: rgb(205, 222, 234);"><div style="background-color: rgba(0, 0, 0, 0.3); width: 48px; height: 48px; background-size: 48px 48px; background-position: center center; background-repeat: no-repeat; border-radius: 24px; display: inline-block; vertical-align: middle; margin-right: 12px; background-image: url(&quot;'+entries[i].getPlayer().getPhoto()+'&quot;);"></div><div style="display: inline-block;"><span style="display: block; font-size: 16px;">'+entries[i].getPlayer().getName()+'</span><span style="display: block; font-size: 18px;">'+userScore+' Points</span></div><div style="display: inline-block; margin-left: auto; margin-right: 100px; font-size: 18px; color: rgb(64, 128, 250); float: right;">'+entries[i].getRank()+'</div></div>';
				}
			}
		}
		leaderboard.innerHTML = html;
	};

	// обновить список друзей для приглашения и обновить вкладку из данных
	// entries - массив данных про игроков с именами и ID игроков
	var updateInviteFriends = function (entries) {
		if (!inviteFriends)
			return;

		inviteFriends.innerHTML = "";
		var html = '';
		if (entries) {
			for(var i = 0; i < entries.length; i++) {
				if (entries[i] && entries[i].getPhoto() && entries[i].getName() && entries[i].getID()) {
					html += '<div style="border-top:solid 1px #fff;padding: 2% 3% 2% 3%; vertical-align: top; display: flex; align-items: center; color: rgb(29, 33, 41); font-size: 17px; background-color: rgb(205, 222, 234);"><div style="background-color: rgba(0, 0, 0, 0.3); width: 48px; height: 48px; background-size: 48px 48px; background-position: center center; background-repeat: no-repeat; border-radius: 24px; display: inline-block; vertical-align: middle; margin-right: 12px; background-image: url(&quot;'+entries[i].getPhoto()+'&quot;);"></div><div style="display: inline-block;"><span style="display: block; font-size: 16px;">'+entries[i].getName()+'</span></div><div style="display: inline-block; margin-left: auto; margin-right: 100px; font-size: 18px; color: rgb(64, 128, 250); float: right;"><div onClick="parent.window.s3eFBInstantConsole.inviteFriend(\''+entries[i].getID()+'\');" style="border: 1px solid rgb(64, 128, 250); border-radius: 18px; padding: 6px 18px;">Play</div></div></div>';
				}
			}
		}
		inviteFriends.innerHTML = html;
	};

	// вывод логов
	// message - текст сообщения
	var log = function (message) {
		if (typeof _console_ === 'function') {
			_console_(_self_.name + ': ' + message);
		}
	};

	return this;
}).bind(s3eFBInstantPanel)();
// модуль для взаимодействия со скриптом FBInstant.js
// для инициализации модуля и FBInstant используется функция configure
// вызов функций setLoadingProgress и setStartGame требуется для обновления и скрытия лодера
// функции showPanel и hidePanel используются для показа и скрытия внешней панельки с лидербордами и приглашением друзей
var s3eFBInstantConsole = {};
(function() {
	this.name 			= 's3eFBInstantConsole';

	var _self_ 			= this;

	// состояния инициализации модуля
	// наличия внешней игровой панельки
	// и готовности скрипта FBInstant.js
	var _isPanel_		= false;
	var _isInited_ 		= false;
	var _isStarted_		= false;
	var _isStoreInited_ = false;

	// ID пользователя и последний лучший результат
	var _uniqueUserID_;
	var _lastHighScore_;

	// коллбек для отправки событий
	var _gameEventCallback_;

	// консоль
	var _console_;

	// установка консоли для вывода сообщений
	// console - функция для обработки сообщений
	this.setConsole = function (console) {
		_console_ = console;
	};

	// установка коллбека для отправки событий
	// например, нажатие на кнопку Играть вне Вьювера
	// callback - функция для отправки игровых событий
	this.setGameEventCallback = function (callback) {
		_gameEventCallback_ = callback;
	};

	// отправить игровое событие
	// event - событие в текстовом виде
	this.gameEventCallback = function (event) {
	    if(event === 'play') {
			this.hidePanel();
		}
		if (_gameEventCallback_)
			_gameEventCallback_(event);
	};

	// инициализация модуля
	// и скрипта FBInstant
	this.configure = function () {
		if (checkFBInstant()) {
			FBInstant.initializeAsync().then(function () {
				_isInited_ = true;
				if (typeof s3eFBInstantPanel === 'object') {
					if (_console_)
						s3eFBInstantPanel.setConsole(_console_);
					_isPanel_ = true;
				}
				var supportedAPIsList = FBInstant.getSupportedAPIs();
				if(supportedAPIsList) {				
					for(var i = 0; i < supportedAPIsList.length; i++) {
						if(supportedAPIsList[i] === 'payments.purchaseAsync') {
							FBInstant.payments.onReady(function () {
								log('Payments Ready!');
								_isStoreInited_ = true;
								_self_.gameEventCallback("store_ready");
							});
							break;
						}					
					}					
				}				
			});
		} else {
			log('INIT ERROR - NO FBINSTANT!');
			_isInited_ = false;
			return;
		}
	};

	// установить прогресс загрузки игры
	// progress - число от 0 до 100
	this.setLoadingProgress = function (progress) {
		if (_isInited_) {
			FBInstant.setLoadingProgress(progress);
		} else {
			log('Module is not inited!');
		}
	};

	// событие завершения инициализации игры
	// после которого мы увидим первый полезный кадр
	this.setStartGame = function () {
		if (_isInited_) {
			FBInstant.startGameAsync().then(function () {
				_uniqueUserID_ = FBInstant.player.getID();
				_isStarted_ = true;
				if (_isPanel_) {
					s3eFBInstantPanel.configure();
				}
				if (typeof s3eFBInstant === 'object') {
					s3eFBInstant.loadAd();
				}
			});
		} else {
			log('Module is not inited!');
		}
	};

	// проверка началась ли игра
	this.getIsStarted = function () {
		return _isStarted_;
	};

	// поделиться сообщением на стену
	// message - текст сообщения
	// picture - картинка в base64
	this.share = function (message, picture) {
		if (!_isStarted_) {
			log('Is not started!');
			return;
		}
		FBInstant.shareAsync({
			intent: 'REQUEST',
			image: picture,
			text: message,
			data: { myData: '' }
		});
	};

	// отправка лучшего результата в лидерборды
	// score - лучший результат в числовом виде
	this.postHighScore = function (score) {
		log('Post high score: ' + score);
		if (!_isStarted_) {
			log('Is not started!');
			return;
		}

		_lastHighScore_ = score;

		FBInstant.getLeaderboardAsync('leaderboard').then(function (leaderboard) {
			leaderboard.setScoreAsync(score, '{ }');
		});
	};

	// получить лидерборд
	// любой лидерборд имеет название leaderboard
	// callback - функция для получения элементов лидерборда
	this.getLeaderboards = function (callback, error) {
		log('Get leaderboards');
		if (!_isStarted_) {
			log('Is not started!');
			if (typeof error === 'function')
				error(_isStarted_);
			return;
		}
		FBInstant.getLeaderboardAsync('leaderboard').then(function (leaderboard) {
			return leaderboard.getEntriesAsync(25, 0);
		}).then(function (entries) {
			callback(entries);
		}).catch(function (err) {
			if (typeof error === 'function')
				error(err);
		});
	};

	// получить информацию о товарах	
	// callback - функция для получения списка товаров с информацией о них
	this.getProductInfo = function (callback, error) {
		log('Get product info');
		if (!_isStoreInited_) {
			log('Stroe is not inited!');
			if (typeof error === 'function')
				error('Stroe is not inited');
			return;
		}
		FBInstant.payments.getCatalogAsync().then(function (catalog) {		
			callback(catalog);
		}).catch(function (err) {
			if (typeof error === 'function')
				error(err);
		});
	};
	// совершить покупку
	// callback - функция для получения информации о завершении покупки
	this.startPurchase = function (sProductID,callback, error) {
		log('start purchase');
		if (!_isStoreInited_) {
			log('Stroe is not inited!');
			if (typeof error === 'function')
				error('Stroe is not inited');
			return;
		}
		FBInstant.payments.purchaseAsync({
			productID: sProductID			
		}).then(function (purchase) {
			console.log(purchase);
			callback(purchase);
				// {productID: '12345', purchaseToken: '54321', developerPayload: 'foobar', ...}
		}).catch(function (err) {
			if (typeof error === 'function')
				error(err);
		});
	};
	// использовать покупку	
	// callback - функция для получения информации о завершении использования покупки
	this.consumePurchase = function (sProductID,callback, error) {
		log('consume purchase');
		if (!_isStoreInited_) {
			log('Stroe is not inited!');
			if (typeof error === 'function')
				error('Stroe is not inited');
			return;
		}
		FBInstant.payments.getPurchasesAsync().then(function (purchases) {
			if(purchases) {				
				for(var i = 0; i < purchases.length; i++) {
					if(purchases[i].productID === sProductID) {
						FBInstant.payments.consumePurchaseAsync(purchases[i].purchaseToken).then(function () {
							callback();
						}).catch(function (err) {
							if (typeof error === 'function')
								error(err);
						});
						break;
					}
				}
			}
		// [{productID: '12345', ...}, ...]
		}).catch(function (err) {
			if (typeof error === 'function')
				error(err);
		});
	};
	// использовать покупку	
	// callback - функция для получения информации о завершении использования покупки
	this.getNotConsumedPurchsesList = function (callback, error) {
		log('get not consumed purchases');
		if (!_isStoreInited_) {
			log('Stroe is not inited!');
			if (typeof error === 'function')
				error('Stroe is not inited');
			return;
		}
		FBInstant.payments.getPurchasesAsync().then(function (purchases) {			
			callback(purchases);
		}).catch(function (err) {
			if (typeof error === 'function')
				error(err);
		});
	};
	// вызвать окно приглашения друзей
	// содержит список друзей, которые не играли в игру
	// окно реализовано фейсбуком и отличается на разных платформах
	this.inviteFriends = function () {
		log('Invite friends');
		if (!_isStarted_) {
			log('Is not started!');
			return;
		}
		FBInstant.context.chooseAsync();
	};

	// получить список игроков,
	// которые были активны за последние 90 дней
	// callback - функция для получения списка игроков
	this.getActivePlayers = function (callback, error) {
		log('Get active players');
		if (!_isStarted_) {
			log('Is not started!');
			if (typeof error === 'function')
				error(_isStarted_);
			return;
		}
		FBInstant.context.getPlayersAsync().then(function (players) {
			callback(players);
		}).catch(function (err) {
			if (typeof error === 'function')
				error(err);
		});
	};

	// получить список подключенных игроков
	// (которым было приглашение или бросали вызов)
	// callback - функция для получения списка игроков
	this.getConnectedPlayers = function (callback, error) {
		log('Get connected players');
		if (!_isStarted_) {
			log('Is not started!');
			if (typeof error === 'function')
				error(_isStarted_);
			return;
		}
		FBInstant.player.getConnectedPlayersAsync().then(function (players) {
			callback(players);
		}).catch(function (err) {
			if (typeof error === 'function')
				error(err);
		});
	};

	// пригласить друга в группу для игры
	// используется для вызова подключенных игроков
	// playerID - ID игрока
	this.inviteFriend = function (playerID) {
		log('Invite friend');
		if (!_isStarted_) {
			log('Is not started!');
			return;
		}
		FBInstant.context.createAsync(playerID);
	};

	// получить ID текущего пользователя
	this.getUserID = function () {
		if (_uniqueUserID_)
			return _uniqueUserID_;
		else
			return 0;
	};

	// получить последний лучший результат игрока
	// есть, только если был вызов postHighScore
	// используется для замены результата в лидербордах
	// поскольку у нас отправка результата и обновление идет следом
	this.getUserHighScore = function () {
		if (_lastHighScore_)
			return _lastHighScore_;
		else
			return 0;
	};

	// отправка игровых данных в клауд Фейсбука
	// data - игровые данные (если опции, то zip в base64)
	this.setCrossConfigLink = function (link) {
		if (typeof s3eFBInstantPanel === 'object') {				
			s3eFBInstantPanel.setCrossConfigLink(link);					
		}
	};
	
	this.switchGame = function (id) {
		FBInstant.switchGameAsync(id).catch(function (e) {
			// Handle game change failure
		});

	}	
	
	// отправка игровых данных в клауд Фейсбука
	// data - игровые данные (если опции, то zip в base64)
	this.setData = function (data) {
		log('Set data. Length: ' + data.length);
		if (!_isStarted_) {
			log('Is not started!');
			return;
		}
		FBInstant.player.setDataAsync({ options: data });
	};

	// получение игровых данных с клауда Фейсбука
	// callback - функция для получения игровых данных
	this.getData = function (callback, error) {
		log('Get data');
		FBInstant.player.getDataAsync(['options']).then(function (data) {
			log('Options are received! Length: ' + data['options'].length);
			callback(data['options']);
		}).catch(function (err) {
			if (typeof error === 'function')
				error(err);
		});
	};

	// показать внешнюю игровую панель
	this.showPanel = function () {
		if (_isPanel_) {
			s3eFBInstantPanel.update();
			s3eFBInstantPanel.show();
		} else {
			log('No panel!');
		}
	};
	
	// показать внешнюю игровую панель
	this.showLeaderPanel = function () {
		if (_isPanel_) {
			s3eFBInstantPanel.update();
			s3eFBInstantPanel.showLeaderBoard();
		} else {
			log('No panel!');
		}
	};

	// скрыть внешнюю игровую панель
	this.hidePanel = function () {
		if (_isPanel_) {
			s3eFBInstantPanel.hide();
		} else {
			log('No panel!');
		}
	};

	// проверка наличия скрипта FBInstant.js
	var checkFBInstant = function () {
		return typeof FBInstant === 'object';
	};

	// TODO: в данный момент скрипт подключается при сборке в index.html
	var loadScript = function(success, error) {
		// TODO: If really needed...
	};

	// функция для вывода логов в консоль, если она есть
	// message - текст сообщения
	var log = function (message) {
		if (typeof _console_ === 'function') {
			_console_(_self_.name + ': ' + message);
		}
	};

	return this;
}).bind(s3eFBInstantConsole)();
﻿/**
 * @fileoverview Global |this| required for resolving indexes in node.
 * @suppress {globalThis}
 */
!function(l){"use strict";function n(l,n,u){return n<=l&&l<=u}l["encoding-indexes"]={big5:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,17392,19506,17923,17830,17784,160359,19831,17843,162993,19682,163013,15253,18230,18244,19527,19520,148159,144919,160594,159371,159954,19543,172881,18255,17882,19589,162924,19719,19108,18081,158499,29221,154196,137827,146950,147297,26189,22267,null,32149,22813,166841,15860,38708,162799,23515,138590,23204,13861,171696,23249,23479,23804,26478,34195,170309,29793,29853,14453,138579,145054,155681,16108,153822,15093,31484,40855,147809,166157,143850,133770,143966,17162,33924,40854,37935,18736,34323,22678,38730,37400,31184,31282,26208,27177,34973,29772,31685,26498,31276,21071,36934,13542,29636,155065,29894,40903,22451,18735,21580,16689,145038,22552,31346,162661,35727,18094,159368,16769,155033,31662,140476,40904,140481,140489,140492,40905,34052,144827,16564,40906,17633,175615,25281,28782,40907,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,12736,12737,12738,12739,12740,131340,12741,131281,131277,12742,12743,131275,139240,12744,131274,12745,12746,12747,12748,131342,12749,12750,256,193,461,192,274,201,282,200,332,211,465,210,null,7870,null,7872,202,257,225,462,224,593,275,233,283,232,299,237,464,236,333,243,466,242,363,250,468,249,470,472,474,476,252,null,7871,null,7873,234,609,9178,9179,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,172969,135493,null,25866,null,null,20029,28381,40270,37343,null,null,161589,25745,20250,20264,20392,20822,20852,20892,20964,21153,21160,21307,21326,21457,21464,22242,22768,22788,22791,22834,22836,23398,23454,23455,23706,24198,24635,25993,26622,26628,26725,27982,28860,30005,32420,32428,32442,32455,32463,32479,32518,32567,33402,33487,33647,35270,35774,35810,36710,36711,36718,29713,31996,32205,26950,31433,21031,null,null,null,null,37260,30904,37214,32956,null,36107,33014,133607,null,null,32927,40647,19661,40393,40460,19518,171510,159758,40458,172339,13761,null,28314,33342,29977,null,18705,39532,39567,40857,31111,164972,138698,132560,142054,20004,20097,20096,20103,20159,20203,20279,13388,20413,15944,20483,20616,13437,13459,13477,20870,22789,20955,20988,20997,20105,21113,21136,21287,13767,21417,13649,21424,13651,21442,21539,13677,13682,13953,21651,21667,21684,21689,21712,21743,21784,21795,21800,13720,21823,13733,13759,21975,13765,163204,21797,null,134210,134421,151851,21904,142534,14828,131905,36422,150968,169189,16467,164030,30586,142392,14900,18389,164189,158194,151018,25821,134524,135092,134357,135412,25741,36478,134806,134155,135012,142505,164438,148691,null,134470,170573,164073,18420,151207,142530,39602,14951,169460,16365,13574,152263,169940,161992,142660,40302,38933,null,17369,155813,25780,21731,142668,142282,135287,14843,135279,157402,157462,162208,25834,151634,134211,36456,139681,166732,132913,null,18443,131497,16378,22643,142733,null,148936,132348,155799,134988,134550,21881,16571,17338,null,19124,141926,135325,33194,39157,134556,25465,14846,141173,36288,22177,25724,15939,null,173569,134665,142031,142537,null,135368,145858,14738,14854,164507,13688,155209,139463,22098,134961,142514,169760,13500,27709,151099,null,null,161140,142987,139784,173659,167117,134778,134196,157724,32659,135375,141315,141625,13819,152035,134796,135053,134826,16275,134960,134471,135503,134732,null,134827,134057,134472,135360,135485,16377,140950,25650,135085,144372,161337,142286,134526,134527,142417,142421,14872,134808,135367,134958,173618,158544,167122,167321,167114,38314,21708,33476,21945,null,171715,39974,39606,161630,142830,28992,33133,33004,23580,157042,33076,14231,21343,164029,37302,134906,134671,134775,134907,13789,151019,13833,134358,22191,141237,135369,134672,134776,135288,135496,164359,136277,134777,151120,142756,23124,135197,135198,135413,135414,22428,134673,161428,164557,135093,134779,151934,14083,135094,135552,152280,172733,149978,137274,147831,164476,22681,21096,13850,153405,31666,23400,18432,19244,40743,18919,39967,39821,154484,143677,22011,13810,22153,20008,22786,138177,194680,38737,131206,20059,20155,13630,23587,24401,24516,14586,25164,25909,27514,27701,27706,28780,29227,20012,29357,149737,32594,31035,31993,32595,156266,13505,null,156491,32770,32896,157202,158033,21341,34916,35265,161970,35744,36125,38021,38264,38271,38376,167439,38886,39029,39118,39134,39267,17e4,40060,40479,40644,27503,63751,20023,131207,38429,25143,38050,null,20539,28158,171123,40870,15817,34959,147790,28791,23797,19232,152013,13657,154928,24866,166450,36775,37366,29073,26393,29626,144001,172295,15499,137600,19216,30948,29698,20910,165647,16393,27235,172730,16931,34319,133743,31274,170311,166634,38741,28749,21284,139390,37876,30425,166371,40871,30685,20131,20464,20668,20015,20247,40872,21556,32139,22674,22736,138678,24210,24217,24514,141074,25995,144377,26905,27203,146531,27903,null,29184,148741,29580,16091,150035,23317,29881,35715,154788,153237,31379,31724,31939,32364,33528,34199,40873,34960,40874,36537,40875,36815,34143,39392,37409,40876,167353,136255,16497,17058,23066,null,null,null,39016,26475,17014,22333,null,34262,149883,33471,160013,19585,159092,23931,158485,159678,40877,40878,23446,40879,26343,32347,28247,31178,15752,17603,143958,141206,17306,17718,null,23765,146202,35577,23672,15634,144721,23928,40882,29015,17752,147692,138787,19575,14712,13386,131492,158785,35532,20404,131641,22975,33132,38998,170234,24379,134047,null,139713,166253,16642,18107,168057,16135,40883,172469,16632,14294,18167,158790,16764,165554,160767,17773,14548,152730,17761,17691,19849,19579,19830,17898,16328,150287,13921,17630,17597,16877,23870,23880,23894,15868,14351,23972,23993,14368,14392,24130,24253,24357,24451,14600,14612,14655,14669,24791,24893,23781,14729,25015,25017,25039,14776,25132,25232,25317,25368,14840,22193,14851,25570,25595,25607,25690,14923,25792,23829,22049,40863,14999,25990,15037,26111,26195,15090,26258,15138,26390,15170,26532,26624,15192,26698,26756,15218,15217,15227,26889,26947,29276,26980,27039,27013,15292,27094,15325,27237,27252,27249,27266,15340,27289,15346,27307,27317,27348,27382,27521,27585,27626,27765,27818,15563,27906,27910,27942,28033,15599,28068,28081,28181,28184,28201,28294,166336,28347,28386,28378,40831,28392,28393,28452,28468,15686,147265,28545,28606,15722,15733,29111,23705,15754,28716,15761,28752,28756,28783,28799,28809,131877,17345,13809,134872,147159,22462,159443,28990,153568,13902,27042,166889,23412,31305,153825,169177,31333,31357,154028,31419,31408,31426,31427,29137,156813,16842,31450,31453,31466,16879,21682,154625,31499,31573,31529,152334,154878,31650,31599,33692,154548,158847,31696,33825,31634,31672,154912,15789,154725,33938,31738,31750,31797,154817,31812,31875,149634,31910,26237,148856,31945,31943,31974,31860,31987,31989,31950,32359,17693,159300,32093,159446,29837,32137,32171,28981,32179,32210,147543,155689,32228,15635,32245,137209,32229,164717,32285,155937,155994,32366,32402,17195,37996,32295,32576,32577,32583,31030,156368,39393,32663,156497,32675,136801,131176,17756,145254,17667,164666,32762,156809,32773,32776,32797,32808,32815,172167,158915,32827,32828,32865,141076,18825,157222,146915,157416,26405,32935,166472,33031,33050,22704,141046,27775,156824,151480,25831,136330,33304,137310,27219,150117,150165,17530,33321,133901,158290,146814,20473,136445,34018,33634,158474,149927,144688,137075,146936,33450,26907,194964,16859,34123,33488,33562,134678,137140,14017,143741,144730,33403,33506,33560,147083,159139,158469,158615,144846,15807,33565,21996,33669,17675,159141,33708,33729,33747,13438,159444,27223,34138,13462,159298,143087,33880,154596,33905,15827,17636,27303,33866,146613,31064,33960,158614,159351,159299,34014,33807,33681,17568,33939,34020,154769,16960,154816,17731,34100,23282,159385,17703,34163,17686,26559,34326,165413,165435,34241,159880,34306,136578,159949,194994,17770,34344,13896,137378,21495,160666,34430,34673,172280,34798,142375,34737,34778,34831,22113,34412,26710,17935,34885,34886,161248,146873,161252,34910,34972,18011,34996,34997,25537,35013,30583,161551,35207,35210,35238,35241,35239,35260,166437,35303,162084,162493,35484,30611,37374,35472,162393,31465,162618,147343,18195,162616,29052,35596,35615,152624,152933,35647,35660,35661,35497,150138,35728,35739,35503,136927,17941,34895,35995,163156,163215,195028,14117,163155,36054,163224,163261,36114,36099,137488,36059,28764,36113,150729,16080,36215,36265,163842,135188,149898,15228,164284,160012,31463,36525,36534,36547,37588,36633,36653,164709,164882,36773,37635,172703,133712,36787,18730,166366,165181,146875,24312,143970,36857,172052,165564,165121,140069,14720,159447,36919,165180,162494,36961,165228,165387,37032,165651,37060,165606,37038,37117,37223,15088,37289,37316,31916,166195,138889,37390,27807,37441,37474,153017,37561,166598,146587,166668,153051,134449,37676,37739,166625,166891,28815,23235,166626,166629,18789,37444,166892,166969,166911,37747,37979,36540,38277,38310,37926,38304,28662,17081,140922,165592,135804,146990,18911,27676,38523,38550,16748,38563,159445,25050,38582,30965,166624,38589,21452,18849,158904,131700,156688,168111,168165,150225,137493,144138,38705,34370,38710,18959,17725,17797,150249,28789,23361,38683,38748,168405,38743,23370,168427,38751,37925,20688,143543,143548,38793,38815,38833,38846,38848,38866,38880,152684,38894,29724,169011,38911,38901,168989,162170,19153,38964,38963,38987,39014,15118,160117,15697,132656,147804,153350,39114,39095,39112,39111,19199,159015,136915,21936,39137,39142,39148,37752,39225,150057,19314,170071,170245,39413,39436,39483,39440,39512,153381,14020,168113,170965,39648,39650,170757,39668,19470,39700,39725,165376,20532,39732,158120,14531,143485,39760,39744,171326,23109,137315,39822,148043,39938,39935,39948,171624,40404,171959,172434,172459,172257,172323,172511,40318,40323,172340,40462,26760,40388,139611,172435,172576,137531,172595,40249,172217,172724,40592,40597,40606,40610,19764,40618,40623,148324,40641,15200,14821,15645,20274,14270,166955,40706,40712,19350,37924,159138,40727,40726,40761,22175,22154,40773,39352,168075,38898,33919,40802,40809,31452,40846,29206,19390,149877,149947,29047,150008,148296,150097,29598,166874,137466,31135,166270,167478,37737,37875,166468,37612,37761,37835,166252,148665,29207,16107,30578,31299,28880,148595,148472,29054,137199,28835,137406,144793,16071,137349,152623,137208,14114,136955,137273,14049,137076,137425,155467,14115,136896,22363,150053,136190,135848,136134,136374,34051,145062,34051,33877,149908,160101,146993,152924,147195,159826,17652,145134,170397,159526,26617,14131,15381,15847,22636,137506,26640,16471,145215,147681,147595,147727,158753,21707,22174,157361,22162,135135,134056,134669,37830,166675,37788,20216,20779,14361,148534,20156,132197,131967,20299,20362,153169,23144,131499,132043,14745,131850,132116,13365,20265,131776,167603,131701,35546,131596,20120,20685,20749,20386,20227,150030,147082,20290,20526,20588,20609,20428,20453,20568,20732,20825,20827,20829,20830,28278,144789,147001,147135,28018,137348,147081,20904,20931,132576,17629,132259,132242,132241,36218,166556,132878,21081,21156,133235,21217,37742,18042,29068,148364,134176,149932,135396,27089,134685,29817,16094,29849,29716,29782,29592,19342,150204,147597,21456,13700,29199,147657,21940,131909,21709,134086,22301,37469,38644,37734,22493,22413,22399,13886,22731,23193,166470,136954,137071,136976,23084,22968,37519,23166,23247,23058,153926,137715,137313,148117,14069,27909,29763,23073,155267,23169,166871,132115,37856,29836,135939,28933,18802,37896,166395,37821,14240,23582,23710,24158,24136,137622,137596,146158,24269,23375,137475,137476,14081,137376,14045,136958,14035,33066,166471,138682,144498,166312,24332,24334,137511,137131,23147,137019,23364,34324,161277,34912,24702,141408,140843,24539,16056,140719,140734,168072,159603,25024,131134,131142,140827,24985,24984,24693,142491,142599,149204,168269,25713,149093,142186,14889,142114,144464,170218,142968,25399,173147,25782,25393,25553,149987,142695,25252,142497,25659,25963,26994,15348,143502,144045,149897,144043,21773,144096,137433,169023,26318,144009,143795,15072,16784,152964,166690,152975,136956,152923,152613,30958,143619,137258,143924,13412,143887,143746,148169,26254,159012,26219,19347,26160,161904,138731,26211,144082,144097,26142,153714,14545,145466,145340,15257,145314,144382,29904,15254,26511,149034,26806,26654,15300,27326,14435,145365,148615,27187,27218,27337,27397,137490,25873,26776,27212,15319,27258,27479,147392,146586,37792,37618,166890,166603,37513,163870,166364,37991,28069,28427,149996,28007,147327,15759,28164,147516,23101,28170,22599,27940,30786,28987,148250,148086,28913,29264,29319,29332,149391,149285,20857,150180,132587,29818,147192,144991,150090,149783,155617,16134,16049,150239,166947,147253,24743,16115,29900,29756,37767,29751,17567,159210,17745,30083,16227,150745,150790,16216,30037,30323,173510,15129,29800,166604,149931,149902,15099,15821,150094,16127,149957,149747,37370,22322,37698,166627,137316,20703,152097,152039,30584,143922,30478,30479,30587,149143,145281,14942,149744,29752,29851,16063,150202,150215,16584,150166,156078,37639,152961,30750,30861,30856,30930,29648,31065,161601,153315,16654,31131,33942,31141,27181,147194,31290,31220,16750,136934,16690,37429,31217,134476,149900,131737,146874,137070,13719,21867,13680,13994,131540,134157,31458,23129,141045,154287,154268,23053,131675,30960,23082,154566,31486,16889,31837,31853,16913,154547,155324,155302,31949,150009,137136,31886,31868,31918,27314,32220,32263,32211,32590,156257,155996,162632,32151,155266,17002,158581,133398,26582,131150,144847,22468,156690,156664,149858,32733,31527,133164,154345,154947,31500,155150,39398,34373,39523,27164,144447,14818,150007,157101,39455,157088,33920,160039,158929,17642,33079,17410,32966,33033,33090,157620,39107,158274,33378,33381,158289,33875,159143,34320,160283,23174,16767,137280,23339,137377,23268,137432,34464,195004,146831,34861,160802,23042,34926,20293,34951,35007,35046,35173,35149,153219,35156,161669,161668,166901,166873,166812,166393,16045,33955,18165,18127,14322,35389,35356,169032,24397,37419,148100,26068,28969,28868,137285,40301,35999,36073,163292,22938,30659,23024,17262,14036,36394,36519,150537,36656,36682,17140,27736,28603,140065,18587,28537,28299,137178,39913,14005,149807,37051,37015,21873,18694,37307,37892,166475,16482,166652,37927,166941,166971,34021,35371,38297,38311,38295,38294,167220,29765,16066,149759,150082,148458,16103,143909,38543,167655,167526,167525,16076,149997,150136,147438,29714,29803,16124,38721,168112,26695,18973,168083,153567,38749,37736,166281,166950,166703,156606,37562,23313,35689,18748,29689,147995,38811,38769,39224,134950,24001,166853,150194,38943,169178,37622,169431,37349,17600,166736,150119,166756,39132,166469,16128,37418,18725,33812,39227,39245,162566,15869,39323,19311,39338,39516,166757,153800,27279,39457,23294,39471,170225,19344,170312,39356,19389,19351,37757,22642,135938,22562,149944,136424,30788,141087,146872,26821,15741,37976,14631,24912,141185,141675,24839,40015,40019,40059,39989,39952,39807,39887,171565,39839,172533,172286,40225,19630,147716,40472,19632,40204,172468,172269,172275,170287,40357,33981,159250,159711,158594,34300,17715,159140,159364,159216,33824,34286,159232,145367,155748,31202,144796,144960,18733,149982,15714,37851,37566,37704,131775,30905,37495,37965,20452,13376,36964,152925,30781,30804,30902,30795,137047,143817,149825,13978,20338,28634,28633,28702,28702,21524,147893,22459,22771,22410,40214,22487,28980,13487,147884,29163,158784,151447,23336,137141,166473,24844,23246,23051,17084,148616,14124,19323,166396,37819,37816,137430,134941,33906,158912,136211,148218,142374,148417,22932,146871,157505,32168,155995,155812,149945,149899,166394,37605,29666,16105,29876,166755,137375,16097,150195,27352,29683,29691,16086,150078,150164,137177,150118,132007,136228,149989,29768,149782,28837,149878,37508,29670,37727,132350,37681,166606,166422,37766,166887,153045,18741,166530,29035,149827,134399,22180,132634,134123,134328,21762,31172,137210,32254,136898,150096,137298,17710,37889,14090,166592,149933,22960,137407,137347,160900,23201,14050,146779,14e3,37471,23161,166529,137314,37748,15565,133812,19094,14730,20724,15721,15692,136092,29045,17147,164376,28175,168164,17643,27991,163407,28775,27823,15574,147437,146989,28162,28428,15727,132085,30033,14012,13512,18048,16090,18545,22980,37486,18750,36673,166940,158656,22546,22472,14038,136274,28926,148322,150129,143331,135856,140221,26809,26983,136088,144613,162804,145119,166531,145366,144378,150687,27162,145069,158903,33854,17631,17614,159014,159057,158850,159710,28439,160009,33597,137018,33773,158848,159827,137179,22921,23170,137139,23137,23153,137477,147964,14125,23023,137020,14023,29070,37776,26266,148133,23150,23083,148115,27179,147193,161590,148571,148170,28957,148057,166369,20400,159016,23746,148686,163405,148413,27148,148054,135940,28838,28979,148457,15781,27871,194597,150095,32357,23019,23855,15859,24412,150109,137183,32164,33830,21637,146170,144128,131604,22398,133333,132633,16357,139166,172726,28675,168283,23920,29583,31955,166489,168992,20424,32743,29389,29456,162548,29496,29497,153334,29505,29512,16041,162584,36972,29173,149746,29665,33270,16074,30476,16081,27810,22269,29721,29726,29727,16098,16112,16116,16122,29907,16142,16211,30018,30061,30066,30093,16252,30152,30172,16320,30285,16343,30324,16348,30330,151388,29064,22051,35200,22633,16413,30531,16441,26465,16453,13787,30616,16490,16495,23646,30654,30667,22770,30744,28857,30748,16552,30777,30791,30801,30822,33864,152885,31027,26627,31026,16643,16649,31121,31129,36795,31238,36796,16743,31377,16818,31420,33401,16836,31439,31451,16847,20001,31586,31596,31611,31762,31771,16992,17018,31867,31900,17036,31928,17044,31981,36755,28864,134351,32207,32212,32208,32253,32686,32692,29343,17303,32800,32805,31545,32814,32817,32852,15820,22452,28832,32951,33001,17389,33036,29482,33038,33042,30048,33044,17409,15161,33110,33113,33114,17427,22586,33148,33156,17445,33171,17453,33189,22511,33217,33252,33364,17551,33446,33398,33482,33496,33535,17584,33623,38505,27018,33797,28917,33892,24803,33928,17668,33982,34017,34040,34064,34104,34130,17723,34159,34160,34272,17783,34418,34450,34482,34543,38469,34699,17926,17943,34990,35071,35108,35143,35217,162151,35369,35384,35476,35508,35921,36052,36082,36124,18328,22623,36291,18413,20206,36410,21976,22356,36465,22005,36528,18487,36558,36578,36580,36589,36594,36791,36801,36810,36812,36915,39364,18605,39136,37395,18718,37416,37464,37483,37553,37550,37567,37603,37611,37619,37620,37629,37699,37764,37805,18757,18769,40639,37911,21249,37917,37933,37950,18794,37972,38009,38189,38306,18855,38388,38451,18917,26528,18980,38720,18997,38834,38850,22100,19172,24808,39097,19225,39153,22596,39182,39193,20916,39196,39223,39234,39261,39266,19312,39365,19357,39484,39695,31363,39785,39809,39901,39921,39924,19565,39968,14191,138178,40265,39994,40702,22096,40339,40381,40384,40444,38134,36790,40571,40620,40625,40637,40646,38108,40674,40689,40696,31432,40772,131220,131767,132e3,26906,38083,22956,132311,22592,38081,14265,132565,132629,132726,136890,22359,29043,133826,133837,134079,21610,194619,134091,21662,134139,134203,134227,134245,134268,24807,134285,22138,134325,134365,134381,134511,134578,134600,26965,39983,34725,134660,134670,134871,135056,134957,134771,23584,135100,24075,135260,135247,135286,26398,135291,135304,135318,13895,135359,135379,135471,135483,21348,33965,135907,136053,135990,35713,136567,136729,137155,137159,20088,28859,137261,137578,137773,137797,138282,138352,138412,138952,25283,138965,139029,29080,26709,139333,27113,14024,139900,140247,140282,141098,141425,141647,33533,141671,141715,142037,35237,142056,36768,142094,38840,142143,38983,39613,142412,null,142472,142519,154600,142600,142610,142775,142741,142914,143220,143308,143411,143462,144159,144350,24497,26184,26303,162425,144743,144883,29185,149946,30679,144922,145174,32391,131910,22709,26382,26904,146087,161367,155618,146961,147129,161278,139418,18640,19128,147737,166554,148206,148237,147515,148276,148374,150085,132554,20946,132625,22943,138920,15294,146687,148484,148694,22408,149108,14747,149295,165352,170441,14178,139715,35678,166734,39382,149522,149755,150037,29193,150208,134264,22885,151205,151430,132985,36570,151596,21135,22335,29041,152217,152601,147274,150183,21948,152646,152686,158546,37332,13427,152895,161330,152926,18200,152930,152934,153543,149823,153693,20582,13563,144332,24798,153859,18300,166216,154286,154505,154630,138640,22433,29009,28598,155906,162834,36950,156082,151450,35682,156674,156746,23899,158711,36662,156804,137500,35562,150006,156808,147439,156946,19392,157119,157365,141083,37989,153569,24981,23079,194765,20411,22201,148769,157436,20074,149812,38486,28047,158909,13848,35191,157593,157806,156689,157790,29151,157895,31554,168128,133649,157990,37124,158009,31301,40432,158202,39462,158253,13919,156777,131105,31107,158260,158555,23852,144665,33743,158621,18128,158884,30011,34917,159150,22710,14108,140685,159819,160205,15444,160384,160389,37505,139642,160395,37680,160486,149968,27705,38047,160848,134904,34855,35061,141606,164979,137137,28344,150058,137248,14756,14009,23568,31203,17727,26294,171181,170148,35139,161740,161880,22230,16607,136714,14753,145199,164072,136133,29101,33638,162269,168360,23143,19639,159919,166315,162301,162314,162571,163174,147834,31555,31102,163849,28597,172767,27139,164632,21410,159239,37823,26678,38749,164207,163875,158133,136173,143919,163912,23941,166960,163971,22293,38947,166217,23979,149896,26046,27093,21458,150181,147329,15377,26422,163984,164084,164142,139169,164175,164233,164271,164378,164614,164655,164746,13770,164968,165546,18682,25574,166230,30728,37461,166328,17394,166375,17375,166376,166726,166868,23032,166921,36619,167877,168172,31569,168208,168252,15863,168286,150218,36816,29327,22155,169191,169449,169392,169400,169778,170193,170313,170346,170435,170536,170766,171354,171419,32415,171768,171811,19620,38215,172691,29090,172799,19857,36882,173515,19868,134300,36798,21953,36794,140464,36793,150163,17673,32383,28502,27313,20202,13540,166700,161949,14138,36480,137205,163876,166764,166809,162366,157359,15851,161365,146615,153141,153942,20122,155265,156248,22207,134765,36366,23405,147080,150686,25566,25296,137206,137339,25904,22061,154698,21530,152337,15814,171416,19581,22050,22046,32585,155352,22901,146752,34672,19996,135146,134473,145082,33047,40286,36120,30267,40005,30286,30649,37701,21554,33096,33527,22053,33074,33816,32957,21994,31074,22083,21526,134813,13774,22021,22001,26353,164578,13869,30004,22e3,21946,21655,21874,134209,134294,24272,151880,134774,142434,134818,40619,32090,21982,135285,25245,38765,21652,36045,29174,37238,25596,25529,25598,21865,142147,40050,143027,20890,13535,134567,20903,21581,21790,21779,30310,36397,157834,30129,32950,34820,34694,35015,33206,33820,135361,17644,29444,149254,23440,33547,157843,22139,141044,163119,147875,163187,159440,160438,37232,135641,37384,146684,173737,134828,134905,29286,138402,18254,151490,163833,135147,16634,40029,25887,142752,18675,149472,171388,135148,134666,24674,161187,135149,null,155720,135559,29091,32398,40272,19994,19972,13687,23309,27826,21351,13996,14812,21373,13989,149016,22682,150382,33325,21579,22442,154261,133497,null,14930,140389,29556,171692,19721,39917,146686,171824,19547,151465,169374,171998,33884,146870,160434,157619,145184,25390,32037,147191,146988,14890,36872,21196,15988,13946,17897,132238,30272,23280,134838,30842,163630,22695,16575,22140,39819,23924,30292,173108,40581,19681,30201,14331,24857,143578,148466,null,22109,135849,22439,149859,171526,21044,159918,13741,27722,40316,31830,39737,22494,137068,23635,25811,169168,156469,160100,34477,134440,159010,150242,134513,null,20990,139023,23950,38659,138705,40577,36940,31519,39682,23761,31651,25192,25397,39679,31695,39722,31870,39726,31810,31878,39957,31740,39689,40727,39963,149822,40794,21875,23491,20477,40600,20466,21088,15878,21201,22375,20566,22967,24082,38856,40363,36700,21609,38836,39232,38842,21292,24880,26924,21466,39946,40194,19515,38465,27008,20646,30022,137069,39386,21107,null,37209,38529,37212,null,37201,167575,25471,159011,27338,22033,37262,30074,25221,132092,29519,31856,154657,146685,null,149785,30422,39837,20010,134356,33726,34882,null,23626,27072,20717,22394,21023,24053,20174,27697,131570,20281,21660,21722,21146,36226,13822,24332,13811,null,27474,37244,40869,39831,38958,39092,39610,40616,40580,29050,31508,null,27642,34840,32632,null,22048,173642,36471,40787,null,36308,36431,40476,36353,25218,164733,36392,36469,31443,150135,31294,30936,27882,35431,30215,166490,40742,27854,34774,30147,172722,30803,194624,36108,29410,29553,35629,29442,29937,36075,150203,34351,24506,34976,17591,null,137275,159237,null,35454,140571,null,24829,30311,39639,40260,37742,39823,34805,null,34831,36087,29484,38689,39856,13782,29362,19463,31825,39242,155993,24921,19460,40598,24957,null,22367,24943,25254,25145,25294,14940,25058,21418,144373,25444,26626,13778,23895,166850,36826,167481,null,20697,138566,30982,21298,38456,134971,16485,null,30718,null,31938,155418,31962,31277,32870,32867,32077,29957,29938,35220,33306,26380,32866,160902,32859,29936,33027,30500,35209,157644,30035,159441,34729,34766,33224,34700,35401,36013,35651,30507,29944,34010,13877,27058,36262,null,35241,29800,28089,34753,147473,29927,15835,29046,24740,24988,15569,29026,24695,null,32625,166701,29264,24809,19326,21024,15384,146631,155351,161366,152881,137540,135934,170243,159196,159917,23745,156077,166415,145015,131310,157766,151310,17762,23327,156492,40784,40614,156267,12288,65292,12289,12290,65294,8231,65307,65306,65311,65281,65072,8230,8229,65104,65105,65106,183,65108,65109,65110,65111,65372,8211,65073,8212,65075,9588,65076,65103,65288,65289,65077,65078,65371,65373,65079,65080,12308,12309,65081,65082,12304,12305,65083,65084,12298,12299,65085,65086,12296,12297,65087,65088,12300,12301,65089,65090,12302,12303,65091,65092,65113,65114,65115,65116,65117,65118,8216,8217,8220,8221,12317,12318,8245,8242,65283,65286,65290,8251,167,12291,9675,9679,9651,9650,9678,9734,9733,9671,9670,9633,9632,9661,9660,12963,8453,175,65507,65343,717,65097,65098,65101,65102,65099,65100,65119,65120,65121,65291,65293,215,247,177,8730,65308,65310,65309,8806,8807,8800,8734,8786,8801,65122,65123,65124,65125,65126,65374,8745,8746,8869,8736,8735,8895,13266,13265,8747,8750,8757,8756,9792,9794,8853,8857,8593,8595,8592,8594,8598,8599,8601,8600,8741,8739,65295,65340,8725,65128,65284,65509,12306,65504,65505,65285,65312,8451,8457,65129,65130,65131,13269,13212,13213,13214,13262,13217,13198,13199,13252,176,20825,20827,20830,20829,20833,20835,21991,29929,31950,9601,9602,9603,9604,9605,9606,9607,9608,9615,9614,9613,9612,9611,9610,9609,9532,9524,9516,9508,9500,9620,9472,9474,9621,9484,9488,9492,9496,9581,9582,9584,9583,9552,9566,9578,9569,9698,9699,9701,9700,9585,9586,9587,65296,65297,65298,65299,65300,65301,65302,65303,65304,65305,8544,8545,8546,8547,8548,8549,8550,8551,8552,8553,12321,12322,12323,12324,12325,12326,12327,12328,12329,21313,21316,21317,65313,65314,65315,65316,65317,65318,65319,65320,65321,65322,65323,65324,65325,65326,65327,65328,65329,65330,65331,65332,65333,65334,65335,65336,65337,65338,65345,65346,65347,65348,65349,65350,65351,65352,65353,65354,65355,65356,65357,65358,65359,65360,65361,65362,65363,65364,65365,65366,65367,65368,65369,65370,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,963,964,965,966,967,968,969,12549,12550,12551,12552,12553,12554,12555,12556,12557,12558,12559,12560,12561,12562,12563,12564,12565,12566,12567,12568,12569,12570,12571,12572,12573,12574,12575,12576,12577,12578,12579,12580,12581,12582,12583,12584,12585,729,713,714,711,715,9216,9217,9218,9219,9220,9221,9222,9223,9224,9225,9226,9227,9228,9229,9230,9231,9232,9233,9234,9235,9236,9237,9238,9239,9240,9241,9242,9243,9244,9245,9246,9247,9249,8364,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19968,20057,19969,19971,20035,20061,20102,20108,20154,20799,20837,20843,20960,20992,20993,21147,21269,21313,21340,21448,19977,19979,19976,19978,20011,20024,20961,20037,20040,20063,20062,20110,20129,20800,20995,21242,21315,21449,21475,22303,22763,22805,22823,22899,23376,23377,23379,23544,23567,23586,23608,23665,24029,24037,24049,24050,24051,24062,24178,24318,24331,24339,25165,19985,19984,19981,20013,20016,20025,20043,23609,20104,20113,20117,20114,20116,20130,20161,20160,20163,20166,20167,20173,20170,20171,20164,20803,20801,20839,20845,20846,20844,20887,20982,20998,20999,21e3,21243,21246,21247,21270,21305,21320,21319,21317,21342,21380,21451,21450,21453,22764,22825,22827,22826,22829,23380,23569,23588,23610,23663,24052,24187,24319,24340,24341,24515,25096,25142,25163,25166,25903,25991,26007,26020,26041,26085,26352,26376,26408,27424,27490,27513,27595,27604,27611,27663,27700,28779,29226,29238,29243,29255,29273,29275,29356,29579,19993,19990,19989,19988,19992,20027,20045,20047,20046,20197,20184,20180,20181,20182,20183,20195,20196,20185,20190,20805,20804,20873,20874,20908,20985,20986,20984,21002,21152,21151,21253,21254,21271,21277,20191,21322,21321,21345,21344,21359,21358,21435,21487,21476,21491,21484,21486,21481,21480,21500,21496,21493,21483,21478,21482,21490,21489,21488,21477,21485,21499,22235,22234,22806,22830,22833,22900,22902,23381,23427,23612,24040,24039,24038,24066,24067,24179,24188,24321,24344,24343,24517,25098,25171,25172,25170,25169,26021,26086,26414,26412,26410,26411,26413,27491,27597,27665,27664,27704,27713,27712,27710,29359,29572,29577,29916,29926,29976,29983,29992,29993,3e4,30001,30002,30003,30091,30333,30382,30399,30446,30683,30690,30707,31034,31166,31348,31435,19998,19999,20050,20051,20073,20121,20132,20134,20133,20223,20233,20249,20234,20245,20237,20240,20241,20239,20210,20214,20219,20208,20211,20221,20225,20235,20809,20807,20806,20808,20840,20849,20877,20912,21015,21009,21010,21006,21014,21155,21256,21281,21280,21360,21361,21513,21519,21516,21514,21520,21505,21515,21508,21521,21517,21512,21507,21518,21510,21522,22240,22238,22237,22323,22320,22312,22317,22316,22319,22313,22809,22810,22839,22840,22916,22904,22915,22909,22905,22914,22913,23383,23384,23431,23432,23429,23433,23546,23574,23673,24030,24070,24182,24180,24335,24347,24537,24534,25102,25100,25101,25104,25187,25179,25176,25910,26089,26088,26092,26093,26354,26355,26377,26429,26420,26417,26421,27425,27492,27515,27670,27741,27735,27737,27743,27744,27728,27733,27745,27739,27725,27726,28784,29279,29277,30334,31481,31859,31992,32566,32650,32701,32769,32771,32780,32786,32819,32895,32905,32907,32908,33251,33258,33267,33276,33292,33307,33311,33390,33394,33406,34411,34880,34892,34915,35199,38433,20018,20136,20301,20303,20295,20311,20318,20276,20315,20309,20272,20304,20305,20285,20282,20280,20291,20308,20284,20294,20323,20316,20320,20271,20302,20278,20313,20317,20296,20314,20812,20811,20813,20853,20918,20919,21029,21028,21033,21034,21032,21163,21161,21162,21164,21283,21363,21365,21533,21549,21534,21566,21542,21582,21543,21574,21571,21555,21576,21570,21531,21545,21578,21561,21563,21560,21550,21557,21558,21536,21564,21568,21553,21547,21535,21548,22250,22256,22244,22251,22346,22353,22336,22349,22343,22350,22334,22352,22351,22331,22767,22846,22941,22930,22952,22942,22947,22937,22934,22925,22948,22931,22922,22949,23389,23388,23386,23387,23436,23435,23439,23596,23616,23617,23615,23614,23696,23697,23700,23692,24043,24076,24207,24199,24202,24311,24324,24351,24420,24418,24439,24441,24536,24524,24535,24525,24561,24555,24568,24554,25106,25105,25220,25239,25238,25216,25206,25225,25197,25226,25212,25214,25209,25203,25234,25199,25240,25198,25237,25235,25233,25222,25913,25915,25912,26097,26356,26463,26446,26447,26448,26449,26460,26454,26462,26441,26438,26464,26451,26455,27493,27599,27714,27742,27801,27777,27784,27785,27781,27803,27754,27770,27792,27760,27788,27752,27798,27794,27773,27779,27762,27774,27764,27782,27766,27789,27796,27800,27778,28790,28796,28797,28792,29282,29281,29280,29380,29378,29590,29996,29995,30007,30008,30338,30447,30691,31169,31168,31167,31350,31995,32597,32918,32915,32925,32920,32923,32922,32946,33391,33426,33419,33421,35211,35282,35328,35895,35910,35925,35997,36196,36208,36275,36523,36554,36763,36784,36802,36806,36805,36804,24033,37009,37026,37034,37030,37027,37193,37318,37324,38450,38446,38449,38442,38444,20006,20054,20083,20107,20123,20126,20139,20140,20335,20381,20365,20339,20351,20332,20379,20363,20358,20355,20336,20341,20360,20329,20347,20374,20350,20367,20369,20346,20820,20818,20821,20841,20855,20854,20856,20925,20989,21051,21048,21047,21050,21040,21038,21046,21057,21182,21179,21330,21332,21331,21329,21350,21367,21368,21369,21462,21460,21463,21619,21621,21654,21624,21653,21632,21627,21623,21636,21650,21638,21628,21648,21617,21622,21644,21658,21602,21608,21643,21629,21646,22266,22403,22391,22378,22377,22369,22374,22372,22396,22812,22857,22855,22856,22852,22868,22974,22971,22996,22969,22958,22993,22982,22992,22989,22987,22995,22986,22959,22963,22994,22981,23391,23396,23395,23447,23450,23448,23452,23449,23451,23578,23624,23621,23622,23735,23713,23736,23721,23723,23729,23731,24088,24090,24086,24085,24091,24081,24184,24218,24215,24220,24213,24214,24310,24358,24359,24361,24448,24449,24447,24444,24541,24544,24573,24565,24575,24591,24596,24623,24629,24598,24618,24597,24609,24615,24617,24619,24603,25110,25109,25151,25150,25152,25215,25289,25292,25284,25279,25282,25273,25298,25307,25259,25299,25300,25291,25288,25256,25277,25276,25296,25305,25287,25293,25269,25306,25265,25304,25302,25303,25286,25260,25294,25918,26023,26044,26106,26132,26131,26124,26118,26114,26126,26112,26127,26133,26122,26119,26381,26379,26477,26507,26517,26481,26524,26483,26487,26503,26525,26519,26479,26480,26495,26505,26494,26512,26485,26522,26515,26492,26474,26482,27427,27494,27495,27519,27667,27675,27875,27880,27891,27825,27852,27877,27827,27837,27838,27836,27874,27819,27861,27859,27832,27844,27833,27841,27822,27863,27845,27889,27839,27835,27873,27867,27850,27820,27887,27868,27862,27872,28821,28814,28818,28810,28825,29228,29229,29240,29256,29287,29289,29376,29390,29401,29399,29392,29609,29608,29599,29611,29605,30013,30109,30105,30106,30340,30402,30450,30452,30693,30717,31038,31040,31041,31177,31176,31354,31353,31482,31998,32596,32652,32651,32773,32954,32933,32930,32945,32929,32939,32937,32948,32938,32943,33253,33278,33293,33459,33437,33433,33453,33469,33439,33465,33457,33452,33445,33455,33464,33443,33456,33470,33463,34382,34417,21021,34920,36555,36814,36820,36817,37045,37048,37041,37046,37319,37329,38263,38272,38428,38464,38463,38459,38468,38466,38585,38632,38738,38750,20127,20141,20142,20449,20405,20399,20415,20448,20433,20431,20445,20419,20406,20440,20447,20426,20439,20398,20432,20420,20418,20442,20430,20446,20407,20823,20882,20881,20896,21070,21059,21066,21069,21068,21067,21063,21191,21193,21187,21185,21261,21335,21371,21402,21467,21676,21696,21672,21710,21705,21688,21670,21683,21703,21698,21693,21674,21697,21700,21704,21679,21675,21681,21691,21673,21671,21695,22271,22402,22411,22432,22435,22434,22478,22446,22419,22869,22865,22863,22862,22864,23004,23e3,23039,23011,23016,23043,23013,23018,23002,23014,23041,23035,23401,23459,23462,23460,23458,23461,23553,23630,23631,23629,23627,23769,23762,24055,24093,24101,24095,24189,24224,24230,24314,24328,24365,24421,24456,24453,24458,24459,24455,24460,24457,24594,24605,24608,24613,24590,24616,24653,24688,24680,24674,24646,24643,24684,24683,24682,24676,25153,25308,25366,25353,25340,25325,25345,25326,25341,25351,25329,25335,25327,25324,25342,25332,25361,25346,25919,25925,26027,26045,26082,26149,26157,26144,26151,26159,26143,26152,26161,26148,26359,26623,26579,26609,26580,26576,26604,26550,26543,26613,26601,26607,26564,26577,26548,26586,26597,26552,26575,26590,26611,26544,26585,26594,26589,26578,27498,27523,27526,27573,27602,27607,27679,27849,27915,27954,27946,27969,27941,27916,27953,27934,27927,27963,27965,27966,27958,27931,27893,27961,27943,27960,27945,27950,27957,27918,27947,28843,28858,28851,28844,28847,28845,28856,28846,28836,29232,29298,29295,29300,29417,29408,29409,29623,29642,29627,29618,29645,29632,29619,29978,29997,30031,30028,30030,30027,30123,30116,30117,30114,30115,30328,30342,30343,30344,30408,30406,30403,30405,30465,30457,30456,30473,30475,30462,30460,30471,30684,30722,30740,30732,30733,31046,31049,31048,31047,31161,31162,31185,31186,31179,31359,31361,31487,31485,31869,32002,32005,32e3,32009,32007,32004,32006,32568,32654,32703,32772,32784,32781,32785,32822,32982,32997,32986,32963,32964,32972,32993,32987,32974,32990,32996,32989,33268,33314,33511,33539,33541,33507,33499,33510,33540,33509,33538,33545,33490,33495,33521,33537,33500,33492,33489,33502,33491,33503,33519,33542,34384,34425,34427,34426,34893,34923,35201,35284,35336,35330,35331,35998,36e3,36212,36211,36276,36557,36556,36848,36838,36834,36842,36837,36845,36843,36836,36840,37066,37070,37057,37059,37195,37194,37325,38274,38480,38475,38476,38477,38754,38761,38859,38893,38899,38913,39080,39131,39135,39318,39321,20056,20147,20492,20493,20515,20463,20518,20517,20472,20521,20502,20486,20540,20511,20506,20498,20497,20474,20480,20500,20520,20465,20513,20491,20505,20504,20467,20462,20525,20522,20478,20523,20489,20860,20900,20901,20898,20941,20940,20934,20939,21078,21084,21076,21083,21085,21290,21375,21407,21405,21471,21736,21776,21761,21815,21756,21733,21746,21766,21754,21780,21737,21741,21729,21769,21742,21738,21734,21799,21767,21757,21775,22275,22276,22466,22484,22475,22467,22537,22799,22871,22872,22874,23057,23064,23068,23071,23067,23059,23020,23072,23075,23081,23077,23052,23049,23403,23640,23472,23475,23478,23476,23470,23477,23481,23480,23556,23633,23637,23632,23789,23805,23803,23786,23784,23792,23798,23809,23796,24046,24109,24107,24235,24237,24231,24369,24466,24465,24464,24665,24675,24677,24656,24661,24685,24681,24687,24708,24735,24730,24717,24724,24716,24709,24726,25159,25331,25352,25343,25422,25406,25391,25429,25410,25414,25423,25417,25402,25424,25405,25386,25387,25384,25421,25420,25928,25929,26009,26049,26053,26178,26185,26191,26179,26194,26188,26181,26177,26360,26388,26389,26391,26657,26680,26696,26694,26707,26681,26690,26708,26665,26803,26647,26700,26705,26685,26612,26704,26688,26684,26691,26666,26693,26643,26648,26689,27530,27529,27575,27683,27687,27688,27686,27684,27888,28010,28053,28040,28039,28006,28024,28023,27993,28051,28012,28041,28014,27994,28020,28009,28044,28042,28025,28037,28005,28052,28874,28888,28900,28889,28872,28879,29241,29305,29436,29433,29437,29432,29431,29574,29677,29705,29678,29664,29674,29662,30036,30045,30044,30042,30041,30142,30149,30151,30130,30131,30141,30140,30137,30146,30136,30347,30384,30410,30413,30414,30505,30495,30496,30504,30697,30768,30759,30776,30749,30772,30775,30757,30765,30752,30751,30770,31061,31056,31072,31071,31062,31070,31069,31063,31066,31204,31203,31207,31199,31206,31209,31192,31364,31368,31449,31494,31505,31881,32033,32023,32011,32010,32032,32034,32020,32016,32021,32026,32028,32013,32025,32027,32570,32607,32660,32709,32705,32774,32792,32789,32793,32791,32829,32831,33009,33026,33008,33029,33005,33012,33030,33016,33011,33032,33021,33034,33020,33007,33261,33260,33280,33296,33322,33323,33320,33324,33467,33579,33618,33620,33610,33592,33616,33609,33589,33588,33615,33586,33593,33590,33559,33600,33585,33576,33603,34388,34442,34474,34451,34468,34473,34444,34467,34460,34928,34935,34945,34946,34941,34937,35352,35344,35342,35340,35349,35338,35351,35347,35350,35343,35345,35912,35962,35961,36001,36002,36215,36524,36562,36564,36559,36785,36865,36870,36855,36864,36858,36852,36867,36861,36869,36856,37013,37089,37085,37090,37202,37197,37196,37336,37341,37335,37340,37337,38275,38498,38499,38497,38491,38493,38500,38488,38494,38587,39138,39340,39592,39640,39717,39730,39740,20094,20602,20605,20572,20551,20547,20556,20570,20553,20581,20598,20558,20565,20597,20596,20599,20559,20495,20591,20589,20828,20885,20976,21098,21103,21202,21209,21208,21205,21264,21263,21273,21311,21312,21310,21443,26364,21830,21866,21862,21828,21854,21857,21827,21834,21809,21846,21839,21845,21807,21860,21816,21806,21852,21804,21859,21811,21825,21847,22280,22283,22281,22495,22533,22538,22534,22496,22500,22522,22530,22581,22519,22521,22816,22882,23094,23105,23113,23142,23146,23104,23100,23138,23130,23110,23114,23408,23495,23493,23492,23490,23487,23494,23561,23560,23559,23648,23644,23645,23815,23814,23822,23835,23830,23842,23825,23849,23828,23833,23844,23847,23831,24034,24120,24118,24115,24119,24247,24248,24246,24245,24254,24373,24375,24407,24428,24425,24427,24471,24473,24478,24472,24481,24480,24476,24703,24739,24713,24736,24744,24779,24756,24806,24765,24773,24763,24757,24796,24764,24792,24789,24774,24799,24760,24794,24775,25114,25115,25160,25504,25511,25458,25494,25506,25509,25463,25447,25496,25514,25457,25513,25481,25475,25499,25451,25512,25476,25480,25497,25505,25516,25490,25487,25472,25467,25449,25448,25466,25949,25942,25937,25945,25943,21855,25935,25944,25941,25940,26012,26011,26028,26063,26059,26060,26062,26205,26202,26212,26216,26214,26206,26361,21207,26395,26753,26799,26786,26771,26805,26751,26742,26801,26791,26775,26800,26755,26820,26797,26758,26757,26772,26781,26792,26783,26785,26754,27442,27578,27627,27628,27691,28046,28092,28147,28121,28082,28129,28108,28132,28155,28154,28165,28103,28107,28079,28113,28078,28126,28153,28088,28151,28149,28101,28114,28186,28085,28122,28139,28120,28138,28145,28142,28136,28102,28100,28074,28140,28095,28134,28921,28937,28938,28925,28911,29245,29309,29313,29468,29467,29462,29459,29465,29575,29701,29706,29699,29702,29694,29709,29920,29942,29943,29980,29986,30053,30054,30050,30064,30095,30164,30165,30133,30154,30157,30350,30420,30418,30427,30519,30526,30524,30518,30520,30522,30827,30787,30798,31077,31080,31085,31227,31378,31381,31520,31528,31515,31532,31526,31513,31518,31534,31890,31895,31893,32070,32067,32113,32046,32057,32060,32064,32048,32051,32068,32047,32066,32050,32049,32573,32670,32666,32716,32718,32722,32796,32842,32838,33071,33046,33059,33067,33065,33072,33060,33282,33333,33335,33334,33337,33678,33694,33688,33656,33698,33686,33725,33707,33682,33674,33683,33673,33696,33655,33659,33660,33670,33703,34389,24426,34503,34496,34486,34500,34485,34502,34507,34481,34479,34505,34899,34974,34952,34987,34962,34966,34957,34955,35219,35215,35370,35357,35363,35365,35377,35373,35359,35355,35362,35913,35930,36009,36012,36011,36008,36010,36007,36199,36198,36286,36282,36571,36575,36889,36877,36890,36887,36899,36895,36893,36880,36885,36894,36896,36879,36898,36886,36891,36884,37096,37101,37117,37207,37326,37365,37350,37347,37351,37357,37353,38281,38506,38517,38515,38520,38512,38516,38518,38519,38508,38592,38634,38633,31456,31455,38914,38915,39770,40165,40565,40575,40613,40635,20642,20621,20613,20633,20625,20608,20630,20632,20634,26368,20977,21106,21108,21109,21097,21214,21213,21211,21338,21413,21883,21888,21927,21884,21898,21917,21912,21890,21916,21930,21908,21895,21899,21891,21939,21934,21919,21822,21938,21914,21947,21932,21937,21886,21897,21931,21913,22285,22575,22570,22580,22564,22576,22577,22561,22557,22560,22777,22778,22880,23159,23194,23167,23186,23195,23207,23411,23409,23506,23500,23507,23504,23562,23563,23601,23884,23888,23860,23879,24061,24133,24125,24128,24131,24190,24266,24257,24258,24260,24380,24429,24489,24490,24488,24785,24801,24754,24758,24800,24860,24867,24826,24853,24816,24827,24820,24936,24817,24846,24822,24841,24832,24850,25119,25161,25507,25484,25551,25536,25577,25545,25542,25549,25554,25571,25552,25569,25558,25581,25582,25462,25588,25578,25563,25682,25562,25593,25950,25958,25954,25955,26001,26e3,26031,26222,26224,26228,26230,26223,26257,26234,26238,26231,26366,26367,26399,26397,26874,26837,26848,26840,26839,26885,26847,26869,26862,26855,26873,26834,26866,26851,26827,26829,26893,26898,26894,26825,26842,26990,26875,27454,27450,27453,27544,27542,27580,27631,27694,27695,27692,28207,28216,28244,28193,28210,28263,28234,28192,28197,28195,28187,28251,28248,28196,28246,28270,28205,28198,28271,28212,28237,28218,28204,28227,28189,28222,28363,28297,28185,28238,28259,28228,28274,28265,28255,28953,28954,28966,28976,28961,28982,29038,28956,29260,29316,29312,29494,29477,29492,29481,29754,29738,29747,29730,29733,29749,29750,29748,29743,29723,29734,29736,29989,29990,30059,30058,30178,30171,30179,30169,30168,30174,30176,30331,30332,30358,30355,30388,30428,30543,30701,30813,30828,30831,31245,31240,31243,31237,31232,31384,31383,31382,31461,31459,31561,31574,31558,31568,31570,31572,31565,31563,31567,31569,31903,31909,32094,32080,32104,32085,32043,32110,32114,32097,32102,32098,32112,32115,21892,32724,32725,32779,32850,32901,33109,33108,33099,33105,33102,33081,33094,33086,33100,33107,33140,33298,33308,33769,33795,33784,33805,33760,33733,33803,33729,33775,33777,33780,33879,33802,33776,33804,33740,33789,33778,33738,33848,33806,33796,33756,33799,33748,33759,34395,34527,34521,34541,34516,34523,34532,34512,34526,34903,35009,35010,34993,35203,35222,35387,35424,35413,35422,35388,35393,35412,35419,35408,35398,35380,35386,35382,35414,35937,35970,36015,36028,36019,36029,36033,36027,36032,36020,36023,36022,36031,36024,36234,36229,36225,36302,36317,36299,36314,36305,36300,36315,36294,36603,36600,36604,36764,36910,36917,36913,36920,36914,36918,37122,37109,37129,37118,37219,37221,37327,37396,37397,37411,37385,37406,37389,37392,37383,37393,38292,38287,38283,38289,38291,38290,38286,38538,38542,38539,38525,38533,38534,38541,38514,38532,38593,38597,38596,38598,38599,38639,38642,38860,38917,38918,38920,39143,39146,39151,39145,39154,39149,39342,39341,40643,40653,40657,20098,20653,20661,20658,20659,20677,20670,20652,20663,20667,20655,20679,21119,21111,21117,21215,21222,21220,21218,21219,21295,21983,21992,21971,21990,21966,21980,21959,21969,21987,21988,21999,21978,21985,21957,21958,21989,21961,22290,22291,22622,22609,22616,22615,22618,22612,22635,22604,22637,22602,22626,22610,22603,22887,23233,23241,23244,23230,23229,23228,23219,23234,23218,23913,23919,24140,24185,24265,24264,24338,24409,24492,24494,24858,24847,24904,24863,24819,24859,24825,24833,24840,24910,24908,24900,24909,24894,24884,24871,24845,24838,24887,25121,25122,25619,25662,25630,25642,25645,25661,25644,25615,25628,25620,25613,25654,25622,25623,25606,25964,26015,26032,26263,26249,26247,26248,26262,26244,26264,26253,26371,27028,26989,26970,26999,26976,26964,26997,26928,27010,26954,26984,26987,26974,26963,27001,27014,26973,26979,26971,27463,27506,27584,27583,27603,27645,28322,28335,28371,28342,28354,28304,28317,28359,28357,28325,28312,28348,28346,28331,28369,28310,28316,28356,28372,28330,28327,28340,29006,29017,29033,29028,29001,29031,29020,29036,29030,29004,29029,29022,28998,29032,29014,29242,29266,29495,29509,29503,29502,29807,29786,29781,29791,29790,29761,29759,29785,29787,29788,30070,30072,30208,30192,30209,30194,30193,30202,30207,30196,30195,30430,30431,30555,30571,30566,30558,30563,30585,30570,30572,30556,30565,30568,30562,30702,30862,30896,30871,30872,30860,30857,30844,30865,30867,30847,31098,31103,31105,33836,31165,31260,31258,31264,31252,31263,31262,31391,31392,31607,31680,31584,31598,31591,31921,31923,31925,32147,32121,32145,32129,32143,32091,32622,32617,32618,32626,32681,32680,32676,32854,32856,32902,32900,33137,33136,33144,33125,33134,33139,33131,33145,33146,33126,33285,33351,33922,33911,33853,33841,33909,33894,33899,33865,33900,33883,33852,33845,33889,33891,33897,33901,33862,34398,34396,34399,34553,34579,34568,34567,34560,34558,34555,34562,34563,34566,34570,34905,35039,35028,35033,35036,35032,35037,35041,35018,35029,35026,35228,35299,35435,35442,35443,35430,35433,35440,35463,35452,35427,35488,35441,35461,35437,35426,35438,35436,35449,35451,35390,35432,35938,35978,35977,36042,36039,36040,36036,36018,36035,36034,36037,36321,36319,36328,36335,36339,36346,36330,36324,36326,36530,36611,36617,36606,36618,36767,36786,36939,36938,36947,36930,36948,36924,36949,36944,36935,36943,36942,36941,36945,36926,36929,37138,37143,37228,37226,37225,37321,37431,37463,37432,37437,37440,37438,37467,37451,37476,37457,37428,37449,37453,37445,37433,37439,37466,38296,38552,38548,38549,38605,38603,38601,38602,38647,38651,38649,38646,38742,38772,38774,38928,38929,38931,38922,38930,38924,39164,39156,39165,39166,39347,39345,39348,39649,40169,40578,40718,40723,40736,20711,20718,20709,20694,20717,20698,20693,20687,20689,20721,20686,20713,20834,20979,21123,21122,21297,21421,22014,22016,22043,22039,22013,22036,22022,22025,22029,22030,22007,22038,22047,22024,22032,22006,22296,22294,22645,22654,22659,22675,22666,22649,22661,22653,22781,22821,22818,22820,22890,22889,23265,23270,23273,23255,23254,23256,23267,23413,23518,23527,23521,23525,23526,23528,23522,23524,23519,23565,23650,23940,23943,24155,24163,24149,24151,24148,24275,24278,24330,24390,24432,24505,24903,24895,24907,24951,24930,24931,24927,24922,24920,24949,25130,25735,25688,25684,25764,25720,25695,25722,25681,25703,25652,25709,25723,25970,26017,26071,26070,26274,26280,26269,27036,27048,27029,27073,27054,27091,27083,27035,27063,27067,27051,27060,27088,27085,27053,27084,27046,27075,27043,27465,27468,27699,28467,28436,28414,28435,28404,28457,28478,28448,28460,28431,28418,28450,28415,28399,28422,28465,28472,28466,28451,28437,28459,28463,28552,28458,28396,28417,28402,28364,28407,29076,29081,29053,29066,29060,29074,29246,29330,29334,29508,29520,29796,29795,29802,29808,29805,29956,30097,30247,30221,30219,30217,30227,30433,30435,30596,30589,30591,30561,30913,30879,30887,30899,30889,30883,31118,31119,31117,31278,31281,31402,31401,31469,31471,31649,31637,31627,31605,31639,31645,31636,31631,31672,31623,31620,31929,31933,31934,32187,32176,32156,32189,32190,32160,32202,32180,32178,32177,32186,32162,32191,32181,32184,32173,32210,32199,32172,32624,32736,32737,32735,32862,32858,32903,33104,33152,33167,33160,33162,33151,33154,33255,33274,33287,33300,33310,33355,33993,33983,33990,33988,33945,33950,33970,33948,33995,33976,33984,34003,33936,33980,34001,33994,34623,34588,34619,34594,34597,34612,34584,34645,34615,34601,35059,35074,35060,35065,35064,35069,35048,35098,35055,35494,35468,35486,35491,35469,35489,35475,35492,35498,35493,35496,35480,35473,35482,35495,35946,35981,35980,36051,36049,36050,36203,36249,36245,36348,36628,36626,36629,36627,36771,36960,36952,36956,36963,36953,36958,36962,36957,36955,37145,37144,37150,37237,37240,37239,37236,37496,37504,37509,37528,37526,37499,37523,37532,37544,37500,37521,38305,38312,38313,38307,38309,38308,38553,38556,38555,38604,38610,38656,38780,38789,38902,38935,38936,39087,39089,39171,39173,39180,39177,39361,39599,39600,39654,39745,39746,40180,40182,40179,40636,40763,40778,20740,20736,20731,20725,20729,20738,20744,20745,20741,20956,21127,21128,21129,21133,21130,21232,21426,22062,22075,22073,22066,22079,22068,22057,22099,22094,22103,22132,22070,22063,22064,22656,22687,22686,22707,22684,22702,22697,22694,22893,23305,23291,23307,23285,23308,23304,23534,23532,23529,23531,23652,23653,23965,23956,24162,24159,24161,24290,24282,24287,24285,24291,24288,24392,24433,24503,24501,24950,24935,24942,24925,24917,24962,24956,24944,24939,24958,24999,24976,25003,24974,25004,24986,24996,24980,25006,25134,25705,25711,25721,25758,25778,25736,25744,25776,25765,25747,25749,25769,25746,25774,25773,25771,25754,25772,25753,25762,25779,25973,25975,25976,26286,26283,26292,26289,27171,27167,27112,27137,27166,27161,27133,27169,27155,27146,27123,27138,27141,27117,27153,27472,27470,27556,27589,27590,28479,28540,28548,28497,28518,28500,28550,28525,28507,28536,28526,28558,28538,28528,28516,28567,28504,28373,28527,28512,28511,29087,29100,29105,29096,29270,29339,29518,29527,29801,29835,29827,29822,29824,30079,30240,30249,30239,30244,30246,30241,30242,30362,30394,30436,30606,30599,30604,30609,30603,30923,30917,30906,30922,30910,30933,30908,30928,31295,31292,31296,31293,31287,31291,31407,31406,31661,31665,31684,31668,31686,31687,31681,31648,31692,31946,32224,32244,32239,32251,32216,32236,32221,32232,32227,32218,32222,32233,32158,32217,32242,32249,32629,32631,32687,32745,32806,33179,33180,33181,33184,33178,33176,34071,34109,34074,34030,34092,34093,34067,34065,34083,34081,34068,34028,34085,34047,34054,34690,34676,34678,34656,34662,34680,34664,34649,34647,34636,34643,34907,34909,35088,35079,35090,35091,35093,35082,35516,35538,35527,35524,35477,35531,35576,35506,35529,35522,35519,35504,35542,35533,35510,35513,35547,35916,35918,35948,36064,36062,36070,36068,36076,36077,36066,36067,36060,36074,36065,36205,36255,36259,36395,36368,36381,36386,36367,36393,36383,36385,36382,36538,36637,36635,36639,36649,36646,36650,36636,36638,36645,36969,36974,36968,36973,36983,37168,37165,37159,37169,37255,37257,37259,37251,37573,37563,37559,37610,37548,37604,37569,37555,37564,37586,37575,37616,37554,38317,38321,38660,38662,38663,38665,38752,38797,38795,38799,38945,38955,38940,39091,39178,39187,39186,39192,39389,39376,39391,39387,39377,39381,39378,39385,39607,39662,39663,39719,39749,39748,39799,39791,40198,40201,40195,40617,40638,40654,22696,40786,20754,20760,20756,20752,20757,20864,20906,20957,21137,21139,21235,22105,22123,22137,22121,22116,22136,22122,22120,22117,22129,22127,22124,22114,22134,22721,22718,22727,22725,22894,23325,23348,23416,23536,23566,24394,25010,24977,25001,24970,25037,25014,25022,25034,25032,25136,25797,25793,25803,25787,25788,25818,25796,25799,25794,25805,25791,25810,25812,25790,25972,26310,26313,26297,26308,26311,26296,27197,27192,27194,27225,27243,27224,27193,27204,27234,27233,27211,27207,27189,27231,27208,27481,27511,27653,28610,28593,28577,28611,28580,28609,28583,28595,28608,28601,28598,28582,28576,28596,29118,29129,29136,29138,29128,29141,29113,29134,29145,29148,29123,29124,29544,29852,29859,29848,29855,29854,29922,29964,29965,30260,30264,30266,30439,30437,30624,30622,30623,30629,30952,30938,30956,30951,31142,31309,31310,31302,31308,31307,31418,31705,31761,31689,31716,31707,31713,31721,31718,31957,31958,32266,32273,32264,32283,32291,32286,32285,32265,32272,32633,32690,32752,32753,32750,32808,33203,33193,33192,33275,33288,33368,33369,34122,34137,34120,34152,34153,34115,34121,34157,34154,34142,34691,34719,34718,34722,34701,34913,35114,35122,35109,35115,35105,35242,35238,35558,35578,35563,35569,35584,35548,35559,35566,35582,35585,35586,35575,35565,35571,35574,35580,35947,35949,35987,36084,36420,36401,36404,36418,36409,36405,36667,36655,36664,36659,36776,36774,36981,36980,36984,36978,36988,36986,37172,37266,37664,37686,37624,37683,37679,37666,37628,37675,37636,37658,37648,37670,37665,37653,37678,37657,38331,38567,38568,38570,38613,38670,38673,38678,38669,38675,38671,38747,38748,38758,38808,38960,38968,38971,38967,38957,38969,38948,39184,39208,39198,39195,39201,39194,39405,39394,39409,39608,39612,39675,39661,39720,39825,40213,40227,40230,40232,40210,40219,40664,40660,40845,40860,20778,20767,20769,20786,21237,22158,22144,22160,22149,22151,22159,22741,22739,22737,22734,23344,23338,23332,23418,23607,23656,23996,23994,23997,23992,24171,24396,24509,25033,25026,25031,25062,25035,25138,25140,25806,25802,25816,25824,25840,25830,25836,25841,25826,25837,25986,25987,26329,26326,27264,27284,27268,27298,27292,27355,27299,27262,27287,27280,27296,27484,27566,27610,27656,28632,28657,28639,28640,28635,28644,28651,28655,28544,28652,28641,28649,28629,28654,28656,29159,29151,29166,29158,29157,29165,29164,29172,29152,29237,29254,29552,29554,29865,29872,29862,29864,30278,30274,30284,30442,30643,30634,30640,30636,30631,30637,30703,30967,30970,30964,30959,30977,31143,31146,31319,31423,31751,31757,31742,31735,31756,31712,31968,31964,31966,31970,31967,31961,31965,32302,32318,32326,32311,32306,32323,32299,32317,32305,32325,32321,32308,32313,32328,32309,32319,32303,32580,32755,32764,32881,32882,32880,32879,32883,33222,33219,33210,33218,33216,33215,33213,33225,33214,33256,33289,33393,34218,34180,34174,34204,34193,34196,34223,34203,34183,34216,34186,34407,34752,34769,34739,34770,34758,34731,34747,34746,34760,34763,35131,35126,35140,35128,35133,35244,35598,35607,35609,35611,35594,35616,35613,35588,35600,35905,35903,35955,36090,36093,36092,36088,36091,36264,36425,36427,36424,36426,36676,36670,36674,36677,36671,36991,36989,36996,36993,36994,36992,37177,37283,37278,37276,37709,37762,37672,37749,37706,37733,37707,37656,37758,37740,37723,37744,37722,37716,38346,38347,38348,38344,38342,38577,38584,38614,38684,38686,38816,38867,38982,39094,39221,39425,39423,39854,39851,39850,39853,40251,40255,40587,40655,40670,40668,40669,40667,40766,40779,21474,22165,22190,22745,22744,23352,24413,25059,25139,25844,25842,25854,25862,25850,25851,25847,26039,26332,26406,27315,27308,27331,27323,27320,27330,27310,27311,27487,27512,27567,28681,28683,28670,28678,28666,28689,28687,29179,29180,29182,29176,29559,29557,29863,29887,29973,30294,30296,30290,30653,30655,30651,30652,30990,31150,31329,31330,31328,31428,31429,31787,31783,31786,31774,31779,31777,31975,32340,32341,32350,32346,32353,32338,32345,32584,32761,32763,32887,32886,33229,33231,33290,34255,34217,34253,34256,34249,34224,34234,34233,34214,34799,34796,34802,34784,35206,35250,35316,35624,35641,35628,35627,35920,36101,36441,36451,36454,36452,36447,36437,36544,36681,36685,36999,36995,37e3,37291,37292,37328,37780,37770,37782,37794,37811,37806,37804,37808,37784,37786,37783,38356,38358,38352,38357,38626,38620,38617,38619,38622,38692,38819,38822,38829,38905,38989,38991,38988,38990,38995,39098,39230,39231,39229,39214,39333,39438,39617,39683,39686,39759,39758,39757,39882,39881,39933,39880,39872,40273,40285,40288,40672,40725,40748,20787,22181,22750,22751,22754,23541,40848,24300,25074,25079,25078,25077,25856,25871,26336,26333,27365,27357,27354,27347,28699,28703,28712,28698,28701,28693,28696,29190,29197,29272,29346,29560,29562,29885,29898,29923,30087,30086,30303,30305,30663,31001,31153,31339,31337,31806,31807,31800,31805,31799,31808,32363,32365,32377,32361,32362,32645,32371,32694,32697,32696,33240,34281,34269,34282,34261,34276,34277,34295,34811,34821,34829,34809,34814,35168,35167,35158,35166,35649,35676,35672,35657,35674,35662,35663,35654,35673,36104,36106,36476,36466,36487,36470,36460,36474,36468,36692,36686,36781,37002,37003,37297,37294,37857,37841,37855,37827,37832,37852,37853,37846,37858,37837,37848,37860,37847,37864,38364,38580,38627,38698,38695,38753,38876,38907,39006,39e3,39003,39100,39237,39241,39446,39449,39693,39912,39911,39894,39899,40329,40289,40306,40298,40300,40594,40599,40595,40628,21240,22184,22199,22198,22196,22204,22756,23360,23363,23421,23542,24009,25080,25082,25880,25876,25881,26342,26407,27372,28734,28720,28722,29200,29563,29903,30306,30309,31014,31018,31020,31019,31431,31478,31820,31811,31821,31983,31984,36782,32381,32380,32386,32588,32768,33242,33382,34299,34297,34321,34298,34310,34315,34311,34314,34836,34837,35172,35258,35320,35696,35692,35686,35695,35679,35691,36111,36109,36489,36481,36485,36482,37300,37323,37912,37891,37885,38369,38704,39108,39250,39249,39336,39467,39472,39479,39477,39955,39949,40569,40629,40680,40751,40799,40803,40801,20791,20792,22209,22208,22210,22804,23660,24013,25084,25086,25885,25884,26005,26345,27387,27396,27386,27570,28748,29211,29351,29910,29908,30313,30675,31824,32399,32396,32700,34327,34349,34330,34851,34850,34849,34847,35178,35180,35261,35700,35703,35709,36115,36490,36493,36491,36703,36783,37306,37934,37939,37941,37946,37944,37938,37931,38370,38712,38713,38706,38911,39015,39013,39255,39493,39491,39488,39486,39631,39764,39761,39981,39973,40367,40372,40386,40376,40605,40687,40729,40796,40806,40807,20796,20795,22216,22218,22217,23423,24020,24018,24398,25087,25892,27402,27489,28753,28760,29568,29924,30090,30318,30316,31155,31840,31839,32894,32893,33247,35186,35183,35324,35712,36118,36119,36497,36499,36705,37192,37956,37969,37970,38717,38718,38851,38849,39019,39253,39509,39501,39634,39706,40009,39985,39998,39995,40403,40407,40756,40812,40810,40852,22220,24022,25088,25891,25899,25898,26348,27408,29914,31434,31844,31843,31845,32403,32406,32404,33250,34360,34367,34865,35722,37008,37007,37987,37984,37988,38760,39023,39260,39514,39515,39511,39635,39636,39633,40020,40023,40022,40421,40607,40692,22225,22761,25900,28766,30321,30322,30679,32592,32648,34870,34873,34914,35731,35730,35734,33399,36123,37312,37994,38722,38728,38724,38854,39024,39519,39714,39768,40031,40441,40442,40572,40573,40711,40823,40818,24307,27414,28771,31852,31854,34875,35264,36513,37313,38002,38e3,39025,39262,39638,39715,40652,28772,30682,35738,38007,38857,39522,39525,32412,35740,36522,37317,38013,38014,38012,40055,40056,40695,35924,38015,40474,29224,39530,39729,40475,40478,31858,9312,9313,9314,9315,9316,9317,9318,9319,9320,9321,9332,9333,9334,9335,9336,9337,9338,9339,9340,9341,8560,8561,8562,8563,8564,8565,8566,8567,8568,8569,20022,20031,20101,20128,20866,20886,20907,21241,21304,21353,21430,22794,23424,24027,12083,24191,24308,24400,24417,25908,26080,30098,30326,36789,38582,168,710,12541,12542,12445,12446,12291,20189,12293,12294,12295,12540,65339,65341,10045,12353,12354,12355,12356,12357,12358,12359,12360,12361,12362,12363,12364,12365,12366,12367,12368,12369,12370,12371,12372,12373,12374,12375,12376,12377,12378,12379,12380,12381,12382,12383,12384,12385,12386,12387,12388,12389,12390,12391,12392,12393,12394,12395,12396,12397,12398,12399,12400,12401,12402,12403,12404,12405,12406,12407,12408,12409,12410,12411,12412,12413,12414,12415,12416,12417,12418,12419,12420,12421,12422,12423,12424,12425,12426,12427,12428,12429,12430,12431,12432,12433,12434,12435,12449,12450,12451,12452,12453,12454,12455,12456,12457,12458,12459,12460,12461,12462,12463,12464,12465,12466,12467,12468,12469,12470,12471,12472,12473,12474,12475,12476,12477,12478,12479,12480,12481,12482,12483,12484,12485,12486,12487,12488,12489,12490,12491,12492,12493,12494,12495,12496,12497,12498,12499,12500,12501,12502,12503,12504,12505,12506,12507,12508,12509,12510,12511,12512,12513,12514,12515,12516,12517,12518,12519,12520,12521,12522,12523,12524,12525,12526,12527,12528,12529,12530,12531,12532,12533,12534,1040,1041,1042,1043,1044,1045,1025,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1105,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,8679,8632,8633,12751,131276,20058,131210,20994,17553,40880,20872,40881,161287,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,65506,65508,65287,65282,12849,8470,8481,12443,12444,11904,11908,11910,11911,11912,11914,11916,11917,11925,11932,11933,11941,11943,11946,11948,11950,11958,11964,11966,11974,11978,11980,11981,11983,11990,11991,11998,12003,null,null,null,643,592,603,596,629,339,248,331,650,618,20034,20060,20981,21274,21378,19975,19980,20039,20109,22231,64012,23662,24435,19983,20871,19982,20014,20115,20162,20169,20168,20888,21244,21356,21433,22304,22787,22828,23568,24063,26081,27571,27596,27668,29247,20017,20028,20200,20188,20201,20193,20189,20186,21004,21276,21324,22306,22307,22807,22831,23425,23428,23570,23611,23668,23667,24068,24192,24194,24521,25097,25168,27669,27702,27715,27711,27707,29358,29360,29578,31160,32906,38430,20238,20248,20268,20213,20244,20209,20224,20215,20232,20253,20226,20229,20258,20243,20228,20212,20242,20913,21011,21001,21008,21158,21282,21279,21325,21386,21511,22241,22239,22318,22314,22324,22844,22912,22908,22917,22907,22910,22903,22911,23382,23573,23589,23676,23674,23675,23678,24031,24181,24196,24322,24346,24436,24533,24532,24527,25180,25182,25188,25185,25190,25186,25177,25184,25178,25189,26095,26094,26430,26425,26424,26427,26426,26431,26428,26419,27672,27718,27730,27740,27727,27722,27732,27723,27724,28785,29278,29364,29365,29582,29994,30335,31349,32593,33400,33404,33408,33405,33407,34381,35198,37017,37015,37016,37019,37012,38434,38436,38432,38435,20310,20283,20322,20297,20307,20324,20286,20327,20306,20319,20289,20312,20269,20275,20287,20321,20879,20921,21020,21022,21025,21165,21166,21257,21347,21362,21390,21391,21552,21559,21546,21588,21573,21529,21532,21541,21528,21565,21583,21569,21544,21540,21575,22254,22247,22245,22337,22341,22348,22345,22347,22354,22790,22848,22950,22936,22944,22935,22926,22946,22928,22927,22951,22945,23438,23442,23592,23594,23693,23695,23688,23691,23689,23698,23690,23686,23699,23701,24032,24074,24078,24203,24201,24204,24200,24205,24325,24349,24440,24438,24530,24529,24528,24557,24552,24558,24563,24545,24548,24547,24570,24559,24567,24571,24576,24564,25146,25219,25228,25230,25231,25236,25223,25201,25211,25210,25200,25217,25224,25207,25213,25202,25204,25911,26096,26100,26099,26098,26101,26437,26439,26457,26453,26444,26440,26461,26445,26458,26443,27600,27673,27674,27768,27751,27755,27780,27787,27791,27761,27759,27753,27802,27757,27783,27797,27804,27750,27763,27749,27771,27790,28788,28794,29283,29375,29373,29379,29382,29377,29370,29381,29589,29591,29587,29588,29586,30010,30009,30100,30101,30337,31037,32820,32917,32921,32912,32914,32924,33424,33423,33413,33422,33425,33427,33418,33411,33412,35960,36809,36799,37023,37025,37029,37022,37031,37024,38448,38440,38447,38445,20019,20376,20348,20357,20349,20352,20359,20342,20340,20361,20356,20343,20300,20375,20330,20378,20345,20353,20344,20368,20380,20372,20382,20370,20354,20373,20331,20334,20894,20924,20926,21045,21042,21043,21062,21041,21180,21258,21259,21308,21394,21396,21639,21631,21633,21649,21634,21640,21611,21626,21630,21605,21612,21620,21606,21645,21615,21601,21600,21656,21603,21607,21604,22263,22265,22383,22386,22381,22379,22385,22384,22390,22400,22389,22395,22387,22388,22370,22376,22397,22796,22853,22965,22970,22991,22990,22962,22988,22977,22966,22972,22979,22998,22961,22973,22976,22984,22964,22983,23394,23397,23443,23445,23620,23623,23726,23716,23712,23733,23727,23720,23724,23711,23715,23725,23714,23722,23719,23709,23717,23734,23728,23718,24087,24084,24089,24360,24354,24355,24356,24404,24450,24446,24445,24542,24549,24621,24614,24601,24626,24587,24628,24586,24599,24627,24602,24606,24620,24610,24589,24592,24622,24595,24593,24588,24585,24604,25108,25149,25261,25268,25297,25278,25258,25270,25290,25262,25267,25263,25275,25257,25264,25272,25917,26024,26043,26121,26108,26116,26130,26120,26107,26115,26123,26125,26117,26109,26129,26128,26358,26378,26501,26476,26510,26514,26486,26491,26520,26502,26500,26484,26509,26508,26490,26527,26513,26521,26499,26493,26497,26488,26489,26516,27429,27520,27518,27614,27677,27795,27884,27883,27886,27865,27830,27860,27821,27879,27831,27856,27842,27834,27843,27846,27885,27890,27858,27869,27828,27786,27805,27776,27870,27840,27952,27853,27847,27824,27897,27855,27881,27857,28820,28824,28805,28819,28806,28804,28817,28822,28802,28826,28803,29290,29398,29387,29400,29385,29404,29394,29396,29402,29388,29393,29604,29601,29613,29606,29602,29600,29612,29597,29917,29928,30015,30016,30014,30092,30104,30383,30451,30449,30448,30453,30712,30716,30713,30715,30714,30711,31042,31039,31173,31352,31355,31483,31861,31997,32821,32911,32942,32931,32952,32949,32941,33312,33440,33472,33451,33434,33432,33435,33461,33447,33454,33468,33438,33466,33460,33448,33441,33449,33474,33444,33475,33462,33442,34416,34415,34413,34414,35926,36818,36811,36819,36813,36822,36821,36823,37042,37044,37039,37043,37040,38457,38461,38460,38458,38467,20429,20421,20435,20402,20425,20427,20417,20436,20444,20441,20411,20403,20443,20423,20438,20410,20416,20409,20460,21060,21065,21184,21186,21309,21372,21399,21398,21401,21400,21690,21665,21677,21669,21711,21699,33549,21687,21678,21718,21686,21701,21702,21664,21616,21692,21666,21694,21618,21726,21680,22453,22430,22431,22436,22412,22423,22429,22427,22420,22424,22415,22425,22437,22426,22421,22772,22797,22867,23009,23006,23022,23040,23025,23005,23034,23037,23036,23030,23012,23026,23031,23003,23017,23027,23029,23008,23038,23028,23021,23464,23628,23760,23768,23756,23767,23755,23771,23774,23770,23753,23751,23754,23766,23763,23764,23759,23752,23750,23758,23775,23800,24057,24097,24098,24099,24096,24100,24240,24228,24226,24219,24227,24229,24327,24366,24406,24454,24631,24633,24660,24690,24670,24645,24659,24647,24649,24667,24652,24640,24642,24671,24612,24644,24664,24678,24686,25154,25155,25295,25357,25355,25333,25358,25347,25323,25337,25359,25356,25336,25334,25344,25363,25364,25338,25365,25339,25328,25921,25923,26026,26047,26166,26145,26162,26165,26140,26150,26146,26163,26155,26170,26141,26164,26169,26158,26383,26384,26561,26610,26568,26554,26588,26555,26616,26584,26560,26551,26565,26603,26596,26591,26549,26573,26547,26615,26614,26606,26595,26562,26553,26574,26599,26608,26546,26620,26566,26605,26572,26542,26598,26587,26618,26569,26570,26563,26602,26571,27432,27522,27524,27574,27606,27608,27616,27680,27681,27944,27956,27949,27935,27964,27967,27922,27914,27866,27955,27908,27929,27962,27930,27921,27904,27933,27970,27905,27928,27959,27907,27919,27968,27911,27936,27948,27912,27938,27913,27920,28855,28831,28862,28849,28848,28833,28852,28853,28841,29249,29257,29258,29292,29296,29299,29294,29386,29412,29416,29419,29407,29418,29414,29411,29573,29644,29634,29640,29637,29625,29622,29621,29620,29675,29631,29639,29630,29635,29638,29624,29643,29932,29934,29998,30023,30024,30119,30122,30329,30404,30472,30467,30468,30469,30474,30455,30459,30458,30695,30696,30726,30737,30738,30725,30736,30735,30734,30729,30723,30739,31050,31052,31051,31045,31044,31189,31181,31183,31190,31182,31360,31358,31441,31488,31489,31866,31864,31865,31871,31872,31873,32003,32008,32001,32600,32657,32653,32702,32775,32782,32783,32788,32823,32984,32967,32992,32977,32968,32962,32976,32965,32995,32985,32988,32970,32981,32969,32975,32983,32998,32973,33279,33313,33428,33497,33534,33529,33543,33512,33536,33493,33594,33515,33494,33524,33516,33505,33522,33525,33548,33531,33526,33520,33514,33508,33504,33530,33523,33517,34423,34420,34428,34419,34881,34894,34919,34922,34921,35283,35332,35335,36210,36835,36833,36846,36832,37105,37053,37055,37077,37061,37054,37063,37067,37064,37332,37331,38484,38479,38481,38483,38474,38478,20510,20485,20487,20499,20514,20528,20507,20469,20468,20531,20535,20524,20470,20471,20503,20508,20512,20519,20533,20527,20529,20494,20826,20884,20883,20938,20932,20933,20936,20942,21089,21082,21074,21086,21087,21077,21090,21197,21262,21406,21798,21730,21783,21778,21735,21747,21732,21786,21759,21764,21768,21739,21777,21765,21745,21770,21755,21751,21752,21728,21774,21763,21771,22273,22274,22476,22578,22485,22482,22458,22470,22461,22460,22456,22454,22463,22471,22480,22457,22465,22798,22858,23065,23062,23085,23086,23061,23055,23063,23050,23070,23091,23404,23463,23469,23468,23555,23638,23636,23788,23807,23790,23793,23799,23808,23801,24105,24104,24232,24238,24234,24236,24371,24368,24423,24669,24666,24679,24641,24738,24712,24704,24722,24705,24733,24707,24725,24731,24727,24711,24732,24718,25113,25158,25330,25360,25430,25388,25412,25413,25398,25411,25572,25401,25419,25418,25404,25385,25409,25396,25432,25428,25433,25389,25415,25395,25434,25425,25400,25431,25408,25416,25930,25926,26054,26051,26052,26050,26186,26207,26183,26193,26386,26387,26655,26650,26697,26674,26675,26683,26699,26703,26646,26673,26652,26677,26667,26669,26671,26702,26692,26676,26653,26642,26644,26662,26664,26670,26701,26682,26661,26656,27436,27439,27437,27441,27444,27501,32898,27528,27622,27620,27624,27619,27618,27623,27685,28026,28003,28004,28022,27917,28001,28050,27992,28002,28013,28015,28049,28045,28143,28031,28038,27998,28007,28e3,28055,28016,28028,27999,28034,28056,27951,28008,28043,28030,28032,28036,27926,28035,28027,28029,28021,28048,28892,28883,28881,28893,28875,32569,28898,28887,28882,28894,28896,28884,28877,28869,28870,28871,28890,28878,28897,29250,29304,29303,29302,29440,29434,29428,29438,29430,29427,29435,29441,29651,29657,29669,29654,29628,29671,29667,29673,29660,29650,29659,29652,29661,29658,29655,29656,29672,29918,29919,29940,29941,29985,30043,30047,30128,30145,30139,30148,30144,30143,30134,30138,30346,30409,30493,30491,30480,30483,30482,30499,30481,30485,30489,30490,30498,30503,30755,30764,30754,30773,30767,30760,30766,30763,30753,30761,30771,30762,30769,31060,31067,31055,31068,31059,31058,31057,31211,31212,31200,31214,31213,31210,31196,31198,31197,31366,31369,31365,31371,31372,31370,31367,31448,31504,31492,31507,31493,31503,31496,31498,31502,31497,31506,31876,31889,31882,31884,31880,31885,31877,32030,32029,32017,32014,32024,32022,32019,32031,32018,32015,32012,32604,32609,32606,32608,32605,32603,32662,32658,32707,32706,32704,32790,32830,32825,33018,33010,33017,33013,33025,33019,33024,33281,33327,33317,33587,33581,33604,33561,33617,33573,33622,33599,33601,33574,33564,33570,33602,33614,33563,33578,33544,33596,33613,33558,33572,33568,33591,33583,33577,33607,33605,33612,33619,33566,33580,33611,33575,33608,34387,34386,34466,34472,34454,34445,34449,34462,34439,34455,34438,34443,34458,34437,34469,34457,34465,34471,34453,34456,34446,34461,34448,34452,34883,34884,34925,34933,34934,34930,34944,34929,34943,34927,34947,34942,34932,34940,35346,35911,35927,35963,36004,36003,36214,36216,36277,36279,36278,36561,36563,36862,36853,36866,36863,36859,36868,36860,36854,37078,37088,37081,37082,37091,37087,37093,37080,37083,37079,37084,37092,37200,37198,37199,37333,37346,37338,38492,38495,38588,39139,39647,39727,20095,20592,20586,20577,20574,20576,20563,20555,20573,20594,20552,20557,20545,20571,20554,20578,20501,20549,20575,20585,20587,20579,20580,20550,20544,20590,20595,20567,20561,20944,21099,21101,21100,21102,21206,21203,21293,21404,21877,21878,21820,21837,21840,21812,21802,21841,21858,21814,21813,21808,21842,21829,21772,21810,21861,21838,21817,21832,21805,21819,21824,21835,22282,22279,22523,22548,22498,22518,22492,22516,22528,22509,22525,22536,22520,22539,22515,22479,22535,22510,22499,22514,22501,22508,22497,22542,22524,22544,22503,22529,22540,22513,22505,22512,22541,22532,22876,23136,23128,23125,23143,23134,23096,23093,23149,23120,23135,23141,23148,23123,23140,23127,23107,23133,23122,23108,23131,23112,23182,23102,23117,23097,23116,23152,23145,23111,23121,23126,23106,23132,23410,23406,23489,23488,23641,23838,23819,23837,23834,23840,23820,23848,23821,23846,23845,23823,23856,23826,23843,23839,23854,24126,24116,24241,24244,24249,24242,24243,24374,24376,24475,24470,24479,24714,24720,24710,24766,24752,24762,24787,24788,24783,24804,24793,24797,24776,24753,24795,24759,24778,24767,24771,24781,24768,25394,25445,25482,25474,25469,25533,25502,25517,25501,25495,25515,25486,25455,25479,25488,25454,25519,25461,25500,25453,25518,25468,25508,25403,25503,25464,25477,25473,25489,25485,25456,25939,26061,26213,26209,26203,26201,26204,26210,26392,26745,26759,26768,26780,26733,26734,26798,26795,26966,26735,26787,26796,26793,26741,26740,26802,26767,26743,26770,26748,26731,26738,26794,26752,26737,26750,26779,26774,26763,26784,26761,26788,26744,26747,26769,26764,26762,26749,27446,27443,27447,27448,27537,27535,27533,27534,27532,27690,28096,28075,28084,28083,28276,28076,28137,28130,28087,28150,28116,28160,28104,28128,28127,28118,28094,28133,28124,28125,28123,28148,28106,28093,28141,28144,28090,28117,28098,28111,28105,28112,28146,28115,28157,28119,28109,28131,28091,28922,28941,28919,28951,28916,28940,28912,28932,28915,28944,28924,28927,28934,28947,28928,28920,28918,28939,28930,28942,29310,29307,29308,29311,29469,29463,29447,29457,29464,29450,29448,29439,29455,29470,29576,29686,29688,29685,29700,29697,29693,29703,29696,29690,29692,29695,29708,29707,29684,29704,30052,30051,30158,30162,30159,30155,30156,30161,30160,30351,30345,30419,30521,30511,30509,30513,30514,30516,30515,30525,30501,30523,30517,30792,30802,30793,30797,30794,30796,30758,30789,30800,31076,31079,31081,31082,31075,31083,31073,31163,31226,31224,31222,31223,31375,31380,31376,31541,31559,31540,31525,31536,31522,31524,31539,31512,31530,31517,31537,31531,31533,31535,31538,31544,31514,31523,31892,31896,31894,31907,32053,32061,32056,32054,32058,32069,32044,32041,32065,32071,32062,32063,32074,32059,32040,32611,32661,32668,32669,32667,32714,32715,32717,32720,32721,32711,32719,32713,32799,32798,32795,32839,32835,32840,33048,33061,33049,33051,33069,33055,33068,33054,33057,33045,33063,33053,33058,33297,33336,33331,33338,33332,33330,33396,33680,33699,33704,33677,33658,33651,33700,33652,33679,33665,33685,33689,33653,33684,33705,33661,33667,33676,33693,33691,33706,33675,33662,33701,33711,33672,33687,33712,33663,33702,33671,33710,33654,33690,34393,34390,34495,34487,34498,34497,34501,34490,34480,34504,34489,34483,34488,34508,34484,34491,34492,34499,34493,34494,34898,34953,34965,34984,34978,34986,34970,34961,34977,34975,34968,34983,34969,34971,34967,34980,34988,34956,34963,34958,35202,35286,35289,35285,35376,35367,35372,35358,35897,35899,35932,35933,35965,36005,36221,36219,36217,36284,36290,36281,36287,36289,36568,36574,36573,36572,36567,36576,36577,36900,36875,36881,36892,36876,36897,37103,37098,37104,37108,37106,37107,37076,37099,37100,37097,37206,37208,37210,37203,37205,37356,37364,37361,37363,37368,37348,37369,37354,37355,37367,37352,37358,38266,38278,38280,38524,38509,38507,38513,38511,38591,38762,38916,39141,39319,20635,20629,20628,20638,20619,20643,20611,20620,20622,20637,20584,20636,20626,20610,20615,20831,20948,21266,21265,21412,21415,21905,21928,21925,21933,21879,22085,21922,21907,21896,21903,21941,21889,21923,21906,21924,21885,21900,21926,21887,21909,21921,21902,22284,22569,22583,22553,22558,22567,22563,22568,22517,22600,22565,22556,22555,22579,22591,22582,22574,22585,22584,22573,22572,22587,22881,23215,23188,23199,23162,23202,23198,23160,23206,23164,23205,23212,23189,23214,23095,23172,23178,23191,23171,23179,23209,23163,23165,23180,23196,23183,23187,23197,23530,23501,23499,23508,23505,23498,23502,23564,23600,23863,23875,23915,23873,23883,23871,23861,23889,23886,23893,23859,23866,23890,23869,23857,23897,23874,23865,23881,23864,23868,23858,23862,23872,23877,24132,24129,24408,24486,24485,24491,24777,24761,24780,24802,24782,24772,24852,24818,24842,24854,24837,24821,24851,24824,24828,24830,24769,24835,24856,24861,24848,24831,24836,24843,25162,25492,25521,25520,25550,25573,25576,25583,25539,25757,25587,25546,25568,25590,25557,25586,25589,25697,25567,25534,25565,25564,25540,25560,25555,25538,25543,25548,25547,25544,25584,25559,25561,25906,25959,25962,25956,25948,25960,25957,25996,26013,26014,26030,26064,26066,26236,26220,26235,26240,26225,26233,26218,26226,26369,26892,26835,26884,26844,26922,26860,26858,26865,26895,26838,26871,26859,26852,26870,26899,26896,26867,26849,26887,26828,26888,26992,26804,26897,26863,26822,26900,26872,26832,26877,26876,26856,26891,26890,26903,26830,26824,26845,26846,26854,26868,26833,26886,26836,26857,26901,26917,26823,27449,27451,27455,27452,27540,27543,27545,27541,27581,27632,27634,27635,27696,28156,28230,28231,28191,28233,28296,28220,28221,28229,28258,28203,28223,28225,28253,28275,28188,28211,28235,28224,28241,28219,28163,28206,28254,28264,28252,28257,28209,28200,28256,28273,28267,28217,28194,28208,28243,28261,28199,28280,28260,28279,28245,28281,28242,28262,28213,28214,28250,28960,28958,28975,28923,28974,28977,28963,28965,28962,28978,28959,28968,28986,28955,29259,29274,29320,29321,29318,29317,29323,29458,29451,29488,29474,29489,29491,29479,29490,29485,29478,29475,29493,29452,29742,29740,29744,29739,29718,29722,29729,29741,29745,29732,29731,29725,29737,29728,29746,29947,29999,30063,30060,30183,30170,30177,30182,30173,30175,30180,30167,30357,30354,30426,30534,30535,30532,30541,30533,30538,30542,30539,30540,30686,30700,30816,30820,30821,30812,30829,30833,30826,30830,30832,30825,30824,30814,30818,31092,31091,31090,31088,31234,31242,31235,31244,31236,31385,31462,31460,31562,31547,31556,31560,31564,31566,31552,31576,31557,31906,31902,31912,31905,32088,32111,32099,32083,32086,32103,32106,32079,32109,32092,32107,32082,32084,32105,32081,32095,32078,32574,32575,32613,32614,32674,32672,32673,32727,32849,32847,32848,33022,32980,33091,33098,33106,33103,33095,33085,33101,33082,33254,33262,33271,33272,33273,33284,33340,33341,33343,33397,33595,33743,33785,33827,33728,33768,33810,33767,33764,33788,33782,33808,33734,33736,33771,33763,33727,33793,33757,33765,33752,33791,33761,33739,33742,33750,33781,33737,33801,33807,33758,33809,33798,33730,33779,33749,33786,33735,33745,33770,33811,33731,33772,33774,33732,33787,33751,33762,33819,33755,33790,34520,34530,34534,34515,34531,34522,34538,34525,34539,34524,34540,34537,34519,34536,34513,34888,34902,34901,35002,35031,35001,35e3,35008,35006,34998,35004,34999,35005,34994,35073,35017,35221,35224,35223,35293,35290,35291,35406,35405,35385,35417,35392,35415,35416,35396,35397,35410,35400,35409,35402,35404,35407,35935,35969,35968,36026,36030,36016,36025,36021,36228,36224,36233,36312,36307,36301,36295,36310,36316,36303,36309,36313,36296,36311,36293,36591,36599,36602,36601,36582,36590,36581,36597,36583,36584,36598,36587,36593,36588,36596,36585,36909,36916,36911,37126,37164,37124,37119,37116,37128,37113,37115,37121,37120,37127,37125,37123,37217,37220,37215,37218,37216,37377,37386,37413,37379,37402,37414,37391,37388,37376,37394,37375,37373,37382,37380,37415,37378,37404,37412,37401,37399,37381,37398,38267,38285,38284,38288,38535,38526,38536,38537,38531,38528,38594,38600,38595,38641,38640,38764,38768,38766,38919,39081,39147,40166,40697,20099,20100,20150,20669,20671,20678,20654,20676,20682,20660,20680,20674,20656,20673,20666,20657,20683,20681,20662,20664,20951,21114,21112,21115,21116,21955,21979,21964,21968,21963,21962,21981,21952,21972,21956,21993,21951,21970,21901,21967,21973,21986,21974,21960,22002,21965,21977,21954,22292,22611,22632,22628,22607,22605,22601,22639,22613,22606,22621,22617,22629,22619,22589,22627,22641,22780,23239,23236,23243,23226,23224,23217,23221,23216,23231,23240,23227,23238,23223,23232,23242,23220,23222,23245,23225,23184,23510,23512,23513,23583,23603,23921,23907,23882,23909,23922,23916,23902,23912,23911,23906,24048,24143,24142,24138,24141,24139,24261,24268,24262,24267,24263,24384,24495,24493,24823,24905,24906,24875,24901,24886,24882,24878,24902,24879,24911,24873,24896,25120,37224,25123,25125,25124,25541,25585,25579,25616,25618,25609,25632,25636,25651,25667,25631,25621,25624,25657,25655,25634,25635,25612,25638,25648,25640,25665,25653,25647,25610,25626,25664,25637,25639,25611,25575,25627,25646,25633,25614,25967,26002,26067,26246,26252,26261,26256,26251,26250,26265,26260,26232,26400,26982,26975,26936,26958,26978,26993,26943,26949,26986,26937,26946,26967,26969,27002,26952,26953,26933,26988,26931,26941,26981,26864,27e3,26932,26985,26944,26991,26948,26998,26968,26945,26996,26956,26939,26955,26935,26972,26959,26961,26930,26962,26927,27003,26940,27462,27461,27459,27458,27464,27457,27547,64013,27643,27644,27641,27639,27640,28315,28374,28360,28303,28352,28319,28307,28308,28320,28337,28345,28358,28370,28349,28353,28318,28361,28343,28336,28365,28326,28367,28338,28350,28355,28380,28376,28313,28306,28302,28301,28324,28321,28351,28339,28368,28362,28311,28334,28323,28999,29012,29010,29027,29024,28993,29021,29026,29042,29048,29034,29025,28994,29016,28995,29003,29040,29023,29008,29011,28996,29005,29018,29263,29325,29324,29329,29328,29326,29500,29506,29499,29498,29504,29514,29513,29764,29770,29771,29778,29777,29783,29760,29775,29776,29774,29762,29766,29773,29780,29921,29951,29950,29949,29981,30073,30071,27011,30191,30223,30211,30199,30206,30204,30201,30200,30224,30203,30198,30189,30197,30205,30361,30389,30429,30549,30559,30560,30546,30550,30554,30569,30567,30548,30553,30573,30688,30855,30874,30868,30863,30852,30869,30853,30854,30881,30851,30841,30873,30848,30870,30843,31100,31106,31101,31097,31249,31256,31257,31250,31255,31253,31266,31251,31259,31248,31395,31394,31390,31467,31590,31588,31597,31604,31593,31602,31589,31603,31601,31600,31585,31608,31606,31587,31922,31924,31919,32136,32134,32128,32141,32127,32133,32122,32142,32123,32131,32124,32140,32148,32132,32125,32146,32621,32619,32615,32616,32620,32678,32677,32679,32731,32732,32801,33124,33120,33143,33116,33129,33115,33122,33138,26401,33118,33142,33127,33135,33092,33121,33309,33353,33348,33344,33346,33349,34033,33855,33878,33910,33913,33935,33933,33893,33873,33856,33926,33895,33840,33869,33917,33882,33881,33908,33907,33885,34055,33886,33847,33850,33844,33914,33859,33912,33842,33861,33833,33753,33867,33839,33858,33837,33887,33904,33849,33870,33868,33874,33903,33989,33934,33851,33863,33846,33843,33896,33918,33860,33835,33888,33876,33902,33872,34571,34564,34551,34572,34554,34518,34549,34637,34552,34574,34569,34561,34550,34573,34565,35030,35019,35021,35022,35038,35035,35034,35020,35024,35205,35227,35295,35301,35300,35297,35296,35298,35292,35302,35446,35462,35455,35425,35391,35447,35458,35460,35445,35459,35457,35444,35450,35900,35915,35914,35941,35940,35942,35974,35972,35973,36044,36200,36201,36241,36236,36238,36239,36237,36243,36244,36240,36242,36336,36320,36332,36337,36334,36304,36329,36323,36322,36327,36338,36331,36340,36614,36607,36609,36608,36613,36615,36616,36610,36619,36946,36927,36932,36937,36925,37136,37133,37135,37137,37142,37140,37131,37134,37230,37231,37448,37458,37424,37434,37478,37427,37477,37470,37507,37422,37450,37446,37485,37484,37455,37472,37479,37487,37430,37473,37488,37425,37460,37475,37456,37490,37454,37459,37452,37462,37426,38303,38300,38302,38299,38546,38547,38545,38551,38606,38650,38653,38648,38645,38771,38775,38776,38770,38927,38925,38926,39084,39158,39161,39343,39346,39344,39349,39597,39595,39771,40170,40173,40167,40576,40701,20710,20692,20695,20712,20723,20699,20714,20701,20708,20691,20716,20720,20719,20707,20704,20952,21120,21121,21225,21227,21296,21420,22055,22037,22028,22034,22012,22031,22044,22017,22035,22018,22010,22045,22020,22015,22009,22665,22652,22672,22680,22662,22657,22655,22644,22667,22650,22663,22673,22670,22646,22658,22664,22651,22676,22671,22782,22891,23260,23278,23269,23253,23274,23258,23277,23275,23283,23266,23264,23259,23276,23262,23261,23257,23272,23263,23415,23520,23523,23651,23938,23936,23933,23942,23930,23937,23927,23946,23945,23944,23934,23932,23949,23929,23935,24152,24153,24147,24280,24273,24279,24270,24284,24277,24281,24274,24276,24388,24387,24431,24502,24876,24872,24897,24926,24945,24947,24914,24915,24946,24940,24960,24948,24916,24954,24923,24933,24891,24938,24929,24918,25129,25127,25131,25643,25677,25691,25693,25716,25718,25714,25715,25725,25717,25702,25766,25678,25730,25694,25692,25675,25683,25696,25680,25727,25663,25708,25707,25689,25701,25719,25971,26016,26273,26272,26271,26373,26372,26402,27057,27062,27081,27040,27086,27030,27056,27052,27068,27025,27033,27022,27047,27021,27049,27070,27055,27071,27076,27069,27044,27092,27065,27082,27034,27087,27059,27027,27050,27041,27038,27097,27031,27024,27074,27061,27045,27078,27466,27469,27467,27550,27551,27552,27587,27588,27646,28366,28405,28401,28419,28453,28408,28471,28411,28462,28425,28494,28441,28442,28455,28440,28475,28434,28397,28426,28470,28531,28409,28398,28461,28480,28464,28476,28469,28395,28423,28430,28483,28421,28413,28406,28473,28444,28412,28474,28447,28429,28446,28424,28449,29063,29072,29065,29056,29061,29058,29071,29051,29062,29057,29079,29252,29267,29335,29333,29331,29507,29517,29521,29516,29794,29811,29809,29813,29810,29799,29806,29952,29954,29955,30077,30096,30230,30216,30220,30229,30225,30218,30228,30392,30593,30588,30597,30594,30574,30592,30575,30590,30595,30898,30890,30900,30893,30888,30846,30891,30878,30885,30880,30892,30882,30884,31128,31114,31115,31126,31125,31124,31123,31127,31112,31122,31120,31275,31306,31280,31279,31272,31270,31400,31403,31404,31470,31624,31644,31626,31633,31632,31638,31629,31628,31643,31630,31621,31640,21124,31641,31652,31618,31931,31935,31932,31930,32167,32183,32194,32163,32170,32193,32192,32197,32157,32206,32196,32198,32203,32204,32175,32185,32150,32188,32159,32166,32174,32169,32161,32201,32627,32738,32739,32741,32734,32804,32861,32860,33161,33158,33155,33159,33165,33164,33163,33301,33943,33956,33953,33951,33978,33998,33986,33964,33966,33963,33977,33972,33985,33997,33962,33946,33969,34e3,33949,33959,33979,33954,33940,33991,33996,33947,33961,33967,33960,34006,33944,33974,33999,33952,34007,34004,34002,34011,33968,33937,34401,34611,34595,34600,34667,34624,34606,34590,34593,34585,34587,34627,34604,34625,34622,34630,34592,34610,34602,34605,34620,34578,34618,34609,34613,34626,34598,34599,34616,34596,34586,34608,34577,35063,35047,35057,35058,35066,35070,35054,35068,35062,35067,35056,35052,35051,35229,35233,35231,35230,35305,35307,35304,35499,35481,35467,35474,35471,35478,35901,35944,35945,36053,36047,36055,36246,36361,36354,36351,36365,36349,36362,36355,36359,36358,36357,36350,36352,36356,36624,36625,36622,36621,37155,37148,37152,37154,37151,37149,37146,37156,37153,37147,37242,37234,37241,37235,37541,37540,37494,37531,37498,37536,37524,37546,37517,37542,37530,37547,37497,37527,37503,37539,37614,37518,37506,37525,37538,37501,37512,37537,37514,37510,37516,37529,37543,37502,37511,37545,37533,37515,37421,38558,38561,38655,38744,38781,38778,38782,38787,38784,38786,38779,38788,38785,38783,38862,38861,38934,39085,39086,39170,39168,39175,39325,39324,39363,39353,39355,39354,39362,39357,39367,39601,39651,39655,39742,39743,39776,39777,39775,40177,40178,40181,40615,20735,20739,20784,20728,20742,20743,20726,20734,20747,20748,20733,20746,21131,21132,21233,21231,22088,22082,22092,22069,22081,22090,22089,22086,22104,22106,22080,22067,22077,22060,22078,22072,22058,22074,22298,22699,22685,22705,22688,22691,22703,22700,22693,22689,22783,23295,23284,23293,23287,23286,23299,23288,23298,23289,23297,23303,23301,23311,23655,23961,23959,23967,23954,23970,23955,23957,23968,23964,23969,23962,23966,24169,24157,24160,24156,32243,24283,24286,24289,24393,24498,24971,24963,24953,25009,25008,24994,24969,24987,24979,25007,25005,24991,24978,25002,24993,24973,24934,25011,25133,25710,25712,25750,25760,25733,25751,25756,25743,25739,25738,25740,25763,25759,25704,25777,25752,25974,25978,25977,25979,26034,26035,26293,26288,26281,26290,26295,26282,26287,27136,27142,27159,27109,27128,27157,27121,27108,27168,27135,27116,27106,27163,27165,27134,27175,27122,27118,27156,27127,27111,27200,27144,27110,27131,27149,27132,27115,27145,27140,27160,27173,27151,27126,27174,27143,27124,27158,27473,27557,27555,27554,27558,27649,27648,27647,27650,28481,28454,28542,28551,28614,28562,28557,28553,28556,28514,28495,28549,28506,28566,28534,28524,28546,28501,28530,28498,28496,28503,28564,28563,28509,28416,28513,28523,28541,28519,28560,28499,28555,28521,28543,28565,28515,28535,28522,28539,29106,29103,29083,29104,29088,29082,29097,29109,29085,29093,29086,29092,29089,29098,29084,29095,29107,29336,29338,29528,29522,29534,29535,29536,29533,29531,29537,29530,29529,29538,29831,29833,29834,29830,29825,29821,29829,29832,29820,29817,29960,29959,30078,30245,30238,30233,30237,30236,30243,30234,30248,30235,30364,30365,30366,30363,30605,30607,30601,30600,30925,30907,30927,30924,30929,30926,30932,30920,30915,30916,30921,31130,31137,31136,31132,31138,31131,27510,31289,31410,31412,31411,31671,31691,31678,31660,31694,31663,31673,31690,31669,31941,31944,31948,31947,32247,32219,32234,32231,32215,32225,32259,32250,32230,32246,32241,32240,32238,32223,32630,32684,32688,32685,32749,32747,32746,32748,32742,32744,32868,32871,33187,33183,33182,33173,33186,33177,33175,33302,33359,33363,33362,33360,33358,33361,34084,34107,34063,34048,34089,34062,34057,34061,34079,34058,34087,34076,34043,34091,34042,34056,34060,34036,34090,34034,34069,34039,34027,34035,34044,34066,34026,34025,34070,34046,34088,34077,34094,34050,34045,34078,34038,34097,34086,34023,34024,34032,34031,34041,34072,34080,34096,34059,34073,34095,34402,34646,34659,34660,34679,34785,34675,34648,34644,34651,34642,34657,34650,34641,34654,34669,34666,34640,34638,34655,34653,34671,34668,34682,34670,34652,34661,34639,34683,34677,34658,34663,34665,34906,35077,35084,35092,35083,35095,35096,35097,35078,35094,35089,35086,35081,35234,35236,35235,35309,35312,35308,35535,35526,35512,35539,35537,35540,35541,35515,35543,35518,35520,35525,35544,35523,35514,35517,35545,35902,35917,35983,36069,36063,36057,36072,36058,36061,36071,36256,36252,36257,36251,36384,36387,36389,36388,36398,36373,36379,36374,36369,36377,36390,36391,36372,36370,36376,36371,36380,36375,36378,36652,36644,36632,36634,36640,36643,36630,36631,36979,36976,36975,36967,36971,37167,37163,37161,37162,37170,37158,37166,37253,37254,37258,37249,37250,37252,37248,37584,37571,37572,37568,37593,37558,37583,37617,37599,37592,37609,37591,37597,37580,37615,37570,37608,37578,37576,37582,37606,37581,37589,37577,37600,37598,37607,37585,37587,37557,37601,37574,37556,38268,38316,38315,38318,38320,38564,38562,38611,38661,38664,38658,38746,38794,38798,38792,38864,38863,38942,38941,38950,38953,38952,38944,38939,38951,39090,39176,39162,39185,39188,39190,39191,39189,39388,39373,39375,39379,39380,39374,39369,39382,39384,39371,39383,39372,39603,39660,39659,39667,39666,39665,39750,39747,39783,39796,39793,39782,39798,39797,39792,39784,39780,39788,40188,40186,40189,40191,40183,40199,40192,40185,40187,40200,40197,40196,40579,40659,40719,40720,20764,20755,20759,20762,20753,20958,21300,21473,22128,22112,22126,22131,22118,22115,22125,22130,22110,22135,22300,22299,22728,22717,22729,22719,22714,22722,22716,22726,23319,23321,23323,23329,23316,23315,23312,23318,23336,23322,23328,23326,23535,23980,23985,23977,23975,23989,23984,23982,23978,23976,23986,23981,23983,23988,24167,24168,24166,24175,24297,24295,24294,24296,24293,24395,24508,24989,25e3,24982,25029,25012,25030,25025,25036,25018,25023,25016,24972,25815,25814,25808,25807,25801,25789,25737,25795,25819,25843,25817,25907,25983,25980,26018,26312,26302,26304,26314,26315,26319,26301,26299,26298,26316,26403,27188,27238,27209,27239,27186,27240,27198,27229,27245,27254,27227,27217,27176,27226,27195,27199,27201,27242,27236,27216,27215,27220,27247,27241,27232,27196,27230,27222,27221,27213,27214,27206,27477,27476,27478,27559,27562,27563,27592,27591,27652,27651,27654,28589,28619,28579,28615,28604,28622,28616,28510,28612,28605,28574,28618,28584,28676,28581,28590,28602,28588,28586,28623,28607,28600,28578,28617,28587,28621,28591,28594,28592,29125,29122,29119,29112,29142,29120,29121,29131,29140,29130,29127,29135,29117,29144,29116,29126,29146,29147,29341,29342,29545,29542,29543,29548,29541,29547,29546,29823,29850,29856,29844,29842,29845,29857,29963,30080,30255,30253,30257,30269,30259,30268,30261,30258,30256,30395,30438,30618,30621,30625,30620,30619,30626,30627,30613,30617,30615,30941,30953,30949,30954,30942,30947,30939,30945,30946,30957,30943,30944,31140,31300,31304,31303,31414,31416,31413,31409,31415,31710,31715,31719,31709,31701,31717,31706,31720,31737,31700,31722,31714,31708,31723,31704,31711,31954,31956,31959,31952,31953,32274,32289,32279,32268,32287,32288,32275,32270,32284,32277,32282,32290,32267,32271,32278,32269,32276,32293,32292,32579,32635,32636,32634,32689,32751,32810,32809,32876,33201,33190,33198,33209,33205,33195,33200,33196,33204,33202,33207,33191,33266,33365,33366,33367,34134,34117,34155,34125,34131,34145,34136,34112,34118,34148,34113,34146,34116,34129,34119,34147,34110,34139,34161,34126,34158,34165,34133,34151,34144,34188,34150,34141,34132,34149,34156,34403,34405,34404,34715,34703,34711,34707,34706,34696,34689,34710,34712,34681,34695,34723,34693,34704,34705,34717,34692,34708,34716,34714,34697,35102,35110,35120,35117,35118,35111,35121,35106,35113,35107,35119,35116,35103,35313,35552,35554,35570,35572,35573,35549,35604,35556,35551,35568,35528,35550,35553,35560,35583,35567,35579,35985,35986,35984,36085,36078,36081,36080,36083,36204,36206,36261,36263,36403,36414,36408,36416,36421,36406,36412,36413,36417,36400,36415,36541,36662,36654,36661,36658,36665,36663,36660,36982,36985,36987,36998,37114,37171,37173,37174,37267,37264,37265,37261,37263,37671,37662,37640,37663,37638,37647,37754,37688,37692,37659,37667,37650,37633,37702,37677,37646,37645,37579,37661,37626,37669,37651,37625,37623,37684,37634,37668,37631,37673,37689,37685,37674,37652,37644,37643,37630,37641,37632,37627,37654,38332,38349,38334,38329,38330,38326,38335,38325,38333,38569,38612,38667,38674,38672,38809,38807,38804,38896,38904,38965,38959,38962,39204,39199,39207,39209,39326,39406,39404,39397,39396,39408,39395,39402,39401,39399,39609,39615,39604,39611,39670,39674,39673,39671,39731,39808,39813,39815,39804,39806,39803,39810,39827,39826,39824,39802,39829,39805,39816,40229,40215,40224,40222,40212,40233,40221,40216,40226,40208,40217,40223,40584,40582,40583,40622,40621,40661,40662,40698,40722,40765,20774,20773,20770,20772,20768,20777,21236,22163,22156,22157,22150,22148,22147,22142,22146,22143,22145,22742,22740,22735,22738,23341,23333,23346,23331,23340,23335,23334,23343,23342,23419,23537,23538,23991,24172,24170,24510,24507,25027,25013,25020,25063,25056,25061,25060,25064,25054,25839,25833,25827,25835,25828,25832,25985,25984,26038,26074,26322,27277,27286,27265,27301,27273,27295,27291,27297,27294,27271,27283,27278,27285,27267,27304,27300,27281,27263,27302,27290,27269,27276,27282,27483,27565,27657,28620,28585,28660,28628,28643,28636,28653,28647,28646,28638,28658,28637,28642,28648,29153,29169,29160,29170,29156,29168,29154,29555,29550,29551,29847,29874,29867,29840,29866,29869,29873,29861,29871,29968,29969,29970,29967,30084,30275,30280,30281,30279,30372,30441,30645,30635,30642,30647,30646,30644,30641,30632,30704,30963,30973,30978,30971,30972,30962,30981,30969,30974,30980,31147,31144,31324,31323,31318,31320,31316,31322,31422,31424,31425,31749,31759,31730,31744,31743,31739,31758,31732,31755,31731,31746,31753,31747,31745,31736,31741,31750,31728,31729,31760,31754,31976,32301,32316,32322,32307,38984,32312,32298,32329,32320,32327,32297,32332,32304,32315,32310,32324,32314,32581,32639,32638,32637,32756,32754,32812,33211,33220,33228,33226,33221,33223,33212,33257,33371,33370,33372,34179,34176,34191,34215,34197,34208,34187,34211,34171,34212,34202,34206,34167,34172,34185,34209,34170,34168,34135,34190,34198,34182,34189,34201,34205,34177,34210,34178,34184,34181,34169,34166,34200,34192,34207,34408,34750,34730,34733,34757,34736,34732,34745,34741,34748,34734,34761,34755,34754,34764,34743,34735,34756,34762,34740,34742,34751,34744,34749,34782,34738,35125,35123,35132,35134,35137,35154,35127,35138,35245,35247,35246,35314,35315,35614,35608,35606,35601,35589,35595,35618,35599,35602,35605,35591,35597,35592,35590,35612,35603,35610,35919,35952,35954,35953,35951,35989,35988,36089,36207,36430,36429,36435,36432,36428,36423,36675,36672,36997,36990,37176,37274,37282,37275,37273,37279,37281,37277,37280,37793,37763,37807,37732,37718,37703,37756,37720,37724,37750,37705,37712,37713,37728,37741,37775,37708,37738,37753,37719,37717,37714,37711,37745,37751,37755,37729,37726,37731,37735,37760,37710,37721,38343,38336,38345,38339,38341,38327,38574,38576,38572,38688,38687,38680,38685,38681,38810,38817,38812,38814,38813,38869,38868,38897,38977,38980,38986,38985,38981,38979,39205,39211,39212,39210,39219,39218,39215,39213,39217,39216,39320,39331,39329,39426,39418,39412,39415,39417,39416,39414,39419,39421,39422,39420,39427,39614,39678,39677,39681,39676,39752,39834,39848,39838,39835,39846,39841,39845,39844,39814,39842,39840,39855,40243,40257,40295,40246,40238,40239,40241,40248,40240,40261,40258,40259,40254,40247,40256,40253,32757,40237,40586,40585,40589,40624,40648,40666,40699,40703,40740,40739,40738,40788,40864,20785,20781,20782,22168,22172,22167,22170,22173,22169,22896,23356,23657,23658,24e3,24173,24174,25048,25055,25069,25070,25073,25066,25072,25067,25046,25065,25855,25860,25853,25848,25857,25859,25852,26004,26075,26330,26331,26328,27333,27321,27325,27361,27334,27322,27318,27319,27335,27316,27309,27486,27593,27659,28679,28684,28685,28673,28677,28692,28686,28671,28672,28667,28710,28668,28663,28682,29185,29183,29177,29187,29181,29558,29880,29888,29877,29889,29886,29878,29883,29890,29972,29971,30300,30308,30297,30288,30291,30295,30298,30374,30397,30444,30658,30650,30975,30988,30995,30996,30985,30992,30994,30993,31149,31148,31327,31772,31785,31769,31776,31775,31789,31773,31782,31784,31778,31781,31792,32348,32336,32342,32355,32344,32354,32351,32337,32352,32343,32339,32693,32691,32759,32760,32885,33233,33234,33232,33375,33374,34228,34246,34240,34243,34242,34227,34229,34237,34247,34244,34239,34251,34254,34248,34245,34225,34230,34258,34340,34232,34231,34238,34409,34791,34790,34786,34779,34795,34794,34789,34783,34803,34788,34772,34780,34771,34797,34776,34787,34724,34775,34777,34817,34804,34792,34781,35155,35147,35151,35148,35142,35152,35153,35145,35626,35623,35619,35635,35632,35637,35655,35631,35644,35646,35633,35621,35639,35622,35638,35630,35620,35643,35645,35642,35906,35957,35993,35992,35991,36094,36100,36098,36096,36444,36450,36448,36439,36438,36446,36453,36455,36443,36442,36449,36445,36457,36436,36678,36679,36680,36683,37160,37178,37179,37182,37288,37285,37287,37295,37290,37813,37772,37778,37815,37787,37789,37769,37799,37774,37802,37790,37798,37781,37768,37785,37791,37773,37809,37777,37810,37796,37800,37812,37795,37797,38354,38355,38353,38579,38615,38618,24002,38623,38616,38621,38691,38690,38693,38828,38830,38824,38827,38820,38826,38818,38821,38871,38873,38870,38872,38906,38992,38993,38994,39096,39233,39228,39226,39439,39435,39433,39437,39428,39441,39434,39429,39431,39430,39616,39644,39688,39684,39685,39721,39733,39754,39756,39755,39879,39878,39875,39871,39873,39861,39864,39891,39862,39876,39865,39869,40284,40275,40271,40266,40283,40267,40281,40278,40268,40279,40274,40276,40287,40280,40282,40590,40588,40671,40705,40704,40726,40741,40747,40746,40745,40744,40780,40789,20788,20789,21142,21239,21428,22187,22189,22182,22183,22186,22188,22746,22749,22747,22802,23357,23358,23359,24003,24176,24511,25083,25863,25872,25869,25865,25868,25870,25988,26078,26077,26334,27367,27360,27340,27345,27353,27339,27359,27356,27344,27371,27343,27341,27358,27488,27568,27660,28697,28711,28704,28694,28715,28705,28706,28707,28713,28695,28708,28700,28714,29196,29194,29191,29186,29189,29349,29350,29348,29347,29345,29899,29893,29879,29891,29974,30304,30665,30666,30660,30705,31005,31003,31009,31004,30999,31006,31152,31335,31336,31795,31804,31801,31788,31803,31980,31978,32374,32373,32376,32368,32375,32367,32378,32370,32372,32360,32587,32586,32643,32646,32695,32765,32766,32888,33239,33237,33380,33377,33379,34283,34289,34285,34265,34273,34280,34266,34263,34284,34290,34296,34264,34271,34275,34268,34257,34288,34278,34287,34270,34274,34816,34810,34819,34806,34807,34825,34828,34827,34822,34812,34824,34815,34826,34818,35170,35162,35163,35159,35169,35164,35160,35165,35161,35208,35255,35254,35318,35664,35656,35658,35648,35667,35670,35668,35659,35669,35665,35650,35666,35671,35907,35959,35958,35994,36102,36103,36105,36268,36266,36269,36267,36461,36472,36467,36458,36463,36475,36546,36690,36689,36687,36688,36691,36788,37184,37183,37296,37293,37854,37831,37839,37826,37850,37840,37881,37868,37836,37849,37801,37862,37834,37844,37870,37859,37845,37828,37838,37824,37842,37863,38269,38362,38363,38625,38697,38699,38700,38696,38694,38835,38839,38838,38877,38878,38879,39004,39001,39005,38999,39103,39101,39099,39102,39240,39239,39235,39334,39335,39450,39445,39461,39453,39460,39451,39458,39456,39463,39459,39454,39452,39444,39618,39691,39690,39694,39692,39735,39914,39915,39904,39902,39908,39910,39906,39920,39892,39895,39916,39900,39897,39909,39893,39905,39898,40311,40321,40330,40324,40328,40305,40320,40312,40326,40331,40332,40317,40299,40308,40309,40304,40297,40325,40307,40315,40322,40303,40313,40319,40327,40296,40596,40593,40640,40700,40749,40768,40769,40781,40790,40791,40792,21303,22194,22197,22195,22755,23365,24006,24007,24302,24303,24512,24513,25081,25879,25878,25877,25875,26079,26344,26339,26340,27379,27376,27370,27368,27385,27377,27374,27375,28732,28725,28719,28727,28724,28721,28738,28728,28735,28730,28729,28736,28731,28723,28737,29203,29204,29352,29565,29564,29882,30379,30378,30398,30445,30668,30670,30671,30669,30706,31013,31011,31015,31016,31012,31017,31154,31342,31340,31341,31479,31817,31816,31818,31815,31813,31982,32379,32382,32385,32384,32698,32767,32889,33243,33241,33291,33384,33385,34338,34303,34305,34302,34331,34304,34294,34308,34313,34309,34316,34301,34841,34832,34833,34839,34835,34838,35171,35174,35257,35319,35680,35690,35677,35688,35683,35685,35687,35693,36270,36486,36488,36484,36697,36694,36695,36693,36696,36698,37005,37187,37185,37303,37301,37298,37299,37899,37907,37883,37920,37903,37908,37886,37909,37904,37928,37913,37901,37877,37888,37879,37895,37902,37910,37906,37882,37897,37880,37898,37887,37884,37900,37878,37905,37894,38366,38368,38367,38702,38703,38841,38843,38909,38910,39008,39010,39011,39007,39105,39106,39248,39246,39257,39244,39243,39251,39474,39476,39473,39468,39466,39478,39465,39470,39480,39469,39623,39626,39622,39696,39698,39697,39947,39944,39927,39941,39954,39928,4e4,39943,39950,39942,39959,39956,39945,40351,40345,40356,40349,40338,40344,40336,40347,40352,40340,40348,40362,40343,40353,40346,40354,40360,40350,40355,40383,40361,40342,40358,40359,40601,40603,40602,40677,40676,40679,40678,40752,40750,40795,40800,40798,40797,40793,40849,20794,20793,21144,21143,22211,22205,22206,23368,23367,24011,24015,24305,25085,25883,27394,27388,27395,27384,27392,28739,28740,28746,28744,28745,28741,28742,29213,29210,29209,29566,29975,30314,30672,31021,31025,31023,31828,31827,31986,32394,32391,32392,32395,32390,32397,32589,32699,32816,33245,34328,34346,34342,34335,34339,34332,34329,34343,34350,34337,34336,34345,34334,34341,34857,34845,34843,34848,34852,34844,34859,34890,35181,35177,35182,35179,35322,35705,35704,35653,35706,35707,36112,36116,36271,36494,36492,36702,36699,36701,37190,37188,37189,37305,37951,37947,37942,37929,37949,37948,37936,37945,37930,37943,37932,37952,37937,38373,38372,38371,38709,38714,38847,38881,39012,39113,39110,39104,39256,39254,39481,39485,39494,39492,39490,39489,39482,39487,39629,39701,39703,39704,39702,39738,39762,39979,39965,39964,39980,39971,39976,39977,39972,39969,40375,40374,40380,40385,40391,40394,40399,40382,40389,40387,40379,40373,40398,40377,40378,40364,40392,40369,40365,40396,40371,40397,40370,40570,40604,40683,40686,40685,40731,40728,40730,40753,40782,40805,40804,40850,20153,22214,22213,22219,22897,23371,23372,24021,24017,24306,25889,25888,25894,25890,27403,27400,27401,27661,28757,28758,28759,28754,29214,29215,29353,29567,29912,29909,29913,29911,30317,30381,31029,31156,31344,31345,31831,31836,31833,31835,31834,31988,31985,32401,32591,32647,33246,33387,34356,34357,34355,34348,34354,34358,34860,34856,34854,34858,34853,35185,35263,35262,35323,35710,35716,35714,35718,35717,35711,36117,36501,36500,36506,36498,36496,36502,36503,36704,36706,37191,37964,37968,37962,37963,37967,37959,37957,37960,37961,37958,38719,38883,39018,39017,39115,39252,39259,39502,39507,39508,39500,39503,39496,39498,39497,39506,39504,39632,39705,39723,39739,39766,39765,40006,40008,39999,40004,39993,39987,40001,39996,39991,39988,39986,39997,39990,40411,40402,40414,40410,40395,40400,40412,40401,40415,40425,40409,40408,40406,40437,40405,40413,40630,40688,40757,40755,40754,40770,40811,40853,40866,20797,21145,22760,22759,22898,23373,24024,34863,24399,25089,25091,25092,25897,25893,26006,26347,27409,27410,27407,27594,28763,28762,29218,29570,29569,29571,30320,30676,31847,31846,32405,33388,34362,34368,34361,34364,34353,34363,34366,34864,34866,34862,34867,35190,35188,35187,35326,35724,35726,35723,35720,35909,36121,36504,36708,36707,37308,37986,37973,37981,37975,37982,38852,38853,38912,39510,39513,39710,39711,39712,40018,40024,40016,40010,40013,40011,40021,40025,40012,40014,40443,40439,40431,40419,40427,40440,40420,40438,40417,40430,40422,40434,40432,40418,40428,40436,40435,40424,40429,40642,40656,40690,40691,40710,40732,40760,40759,40758,40771,40783,40817,40816,40814,40815,22227,22221,23374,23661,25901,26349,26350,27411,28767,28769,28765,28768,29219,29915,29925,30677,31032,31159,31158,31850,32407,32649,33389,34371,34872,34871,34869,34891,35732,35733,36510,36511,36512,36509,37310,37309,37314,37995,37992,37993,38629,38726,38723,38727,38855,38885,39518,39637,39769,40035,40039,40038,40034,40030,40032,40450,40446,40455,40451,40454,40453,40448,40449,40457,40447,40445,40452,40608,40734,40774,40820,40821,40822,22228,25902,26040,27416,27417,27415,27418,28770,29222,29354,30680,30681,31033,31849,31851,31990,32410,32408,32411,32409,33248,33249,34374,34375,34376,35193,35194,35196,35195,35327,35736,35737,36517,36516,36515,37998,37997,37999,38001,38003,38729,39026,39263,40040,40046,40045,40459,40461,40464,40463,40466,40465,40609,40693,40713,40775,40824,40827,40826,40825,22302,28774,31855,34876,36274,36518,37315,38004,38008,38006,38005,39520,40052,40051,40049,40053,40468,40467,40694,40714,40868,28776,28773,31991,34410,34878,34877,34879,35742,35996,36521,36553,38731,39027,39028,39116,39265,39339,39524,39526,39527,39716,40469,40471,40776,25095,27422,29223,34380,36520,38018,38016,38017,39529,39528,39726,40473,29225,34379,35743,38019,40057,40631,30325,39531,40058,40477,28777,28778,40612,40830,40777,40856,30849,37561,35023,22715,24658,31911,23290,9556,9574,9559,9568,9580,9571,9562,9577,9565,9554,9572,9557,9566,9578,9569,9560,9575,9563,9555,9573,9558,9567,9579,9570,9561,9576,9564,9553,9552,9581,9582,9584,9583,65517,132423,37595,132575,147397,34124,17077,29679,20917,13897,149826,166372,37700,137691,33518,146632,30780,26436,25311,149811,166314,131744,158643,135941,20395,140525,20488,159017,162436,144896,150193,140563,20521,131966,24484,131968,131911,28379,132127,20605,20737,13434,20750,39020,14147,33814,149924,132231,20832,144308,20842,134143,139516,131813,140592,132494,143923,137603,23426,34685,132531,146585,20914,20920,40244,20937,20943,20945,15580,20947,150182,20915,20962,21314,20973,33741,26942,145197,24443,21003,21030,21052,21173,21079,21140,21177,21189,31765,34114,21216,34317,158483,21253,166622,21833,28377,147328,133460,147436,21299,21316,134114,27851,136998,26651,29653,24650,16042,14540,136936,29149,17570,21357,21364,165547,21374,21375,136598,136723,30694,21395,166555,21408,21419,21422,29607,153458,16217,29596,21441,21445,27721,20041,22526,21465,15019,134031,21472,147435,142755,21494,134263,21523,28793,21803,26199,27995,21613,158547,134516,21853,21647,21668,18342,136973,134877,15796,134477,166332,140952,21831,19693,21551,29719,21894,21929,22021,137431,147514,17746,148533,26291,135348,22071,26317,144010,26276,26285,22093,22095,30961,22257,38791,21502,22272,22255,22253,166758,13859,135759,22342,147877,27758,28811,22338,14001,158846,22502,136214,22531,136276,148323,22566,150517,22620,22698,13665,22752,22748,135740,22779,23551,22339,172368,148088,37843,13729,22815,26790,14019,28249,136766,23076,21843,136850,34053,22985,134478,158849,159018,137180,23001,137211,137138,159142,28017,137256,136917,23033,159301,23211,23139,14054,149929,23159,14088,23190,29797,23251,159649,140628,15749,137489,14130,136888,24195,21200,23414,25992,23420,162318,16388,18525,131588,23509,24928,137780,154060,132517,23539,23453,19728,23557,138052,23571,29646,23572,138405,158504,23625,18653,23685,23785,23791,23947,138745,138807,23824,23832,23878,138916,23738,24023,33532,14381,149761,139337,139635,33415,14390,15298,24110,27274,24181,24186,148668,134355,21414,20151,24272,21416,137073,24073,24308,164994,24313,24315,14496,24316,26686,37915,24333,131521,194708,15070,18606,135994,24378,157832,140240,24408,140401,24419,38845,159342,24434,37696,166454,24487,23990,15711,152144,139114,159992,140904,37334,131742,166441,24625,26245,137335,14691,15815,13881,22416,141236,31089,15936,24734,24740,24755,149890,149903,162387,29860,20705,23200,24932,33828,24898,194726,159442,24961,20980,132694,24967,23466,147383,141407,25043,166813,170333,25040,14642,141696,141505,24611,24924,25886,25483,131352,25285,137072,25301,142861,25452,149983,14871,25656,25592,136078,137212,25744,28554,142902,38932,147596,153373,25825,25829,38011,14950,25658,14935,25933,28438,150056,150051,25989,25965,25951,143486,26037,149824,19255,26065,16600,137257,26080,26083,24543,144384,26136,143863,143864,26180,143780,143781,26187,134773,26215,152038,26227,26228,138813,143921,165364,143816,152339,30661,141559,39332,26370,148380,150049,15147,27130,145346,26462,26471,26466,147917,168173,26583,17641,26658,28240,37436,26625,144358,159136,26717,144495,27105,27147,166623,26995,26819,144845,26881,26880,15666,14849,144956,15232,26540,26977,166474,17148,26934,27032,15265,132041,33635,20624,27129,144985,139562,27205,145155,27293,15347,26545,27336,168348,15373,27421,133411,24798,27445,27508,141261,28341,146139,132021,137560,14144,21537,146266,27617,147196,27612,27703,140427,149745,158545,27738,33318,27769,146876,17605,146877,147876,149772,149760,146633,14053,15595,134450,39811,143865,140433,32655,26679,159013,159137,159211,28054,27996,28284,28420,149887,147589,159346,34099,159604,20935,27804,28189,33838,166689,28207,146991,29779,147330,31180,28239,23185,143435,28664,14093,28573,146992,28410,136343,147517,17749,37872,28484,28508,15694,28532,168304,15675,28575,147780,28627,147601,147797,147513,147440,147380,147775,20959,147798,147799,147776,156125,28747,28798,28839,28801,28876,28885,28886,28895,16644,15848,29108,29078,148087,28971,28997,23176,29002,29038,23708,148325,29007,37730,148161,28972,148570,150055,150050,29114,166888,28861,29198,37954,29205,22801,37955,29220,37697,153093,29230,29248,149876,26813,29269,29271,15957,143428,26637,28477,29314,29482,29483,149539,165931,18669,165892,29480,29486,29647,29610,134202,158254,29641,29769,147938,136935,150052,26147,14021,149943,149901,150011,29687,29717,26883,150054,29753,132547,16087,29788,141485,29792,167602,29767,29668,29814,33721,29804,14128,29812,37873,27180,29826,18771,150156,147807,150137,166799,23366,166915,137374,29896,137608,29966,29929,29982,167641,137803,23511,167596,37765,30029,30026,30055,30062,151426,16132,150803,30094,29789,30110,30132,30210,30252,30289,30287,30319,30326,156661,30352,33263,14328,157969,157966,30369,30373,30391,30412,159647,33890,151709,151933,138780,30494,30502,30528,25775,152096,30552,144044,30639,166244,166248,136897,30708,30729,136054,150034,26826,30895,30919,30931,38565,31022,153056,30935,31028,30897,161292,36792,34948,166699,155779,140828,31110,35072,26882,31104,153687,31133,162617,31036,31145,28202,160038,16040,31174,168205,31188],"euc-kr":[44034,44035,44037,44038,44043,44044,44045,44046,44047,44056,44062,44063,44065,44066,44067,44069,44070,44071,44072,44073,44074,44075,44078,44082,44083,44084,null,null,null,null,null,null,44085,44086,44087,44090,44091,44093,44094,44095,44097,44098,44099,44100,44101,44102,44103,44104,44105,44106,44108,44110,44111,44112,44113,44114,44115,44117,null,null,null,null,null,null,44118,44119,44121,44122,44123,44125,44126,44127,44128,44129,44130,44131,44132,44133,44134,44135,44136,44137,44138,44139,44140,44141,44142,44143,44146,44147,44149,44150,44153,44155,44156,44157,44158,44159,44162,44167,44168,44173,44174,44175,44177,44178,44179,44181,44182,44183,44184,44185,44186,44187,44190,44194,44195,44196,44197,44198,44199,44203,44205,44206,44209,44210,44211,44212,44213,44214,44215,44218,44222,44223,44224,44226,44227,44229,44230,44231,44233,44234,44235,44237,44238,44239,44240,44241,44242,44243,44244,44246,44248,44249,44250,44251,44252,44253,44254,44255,44258,44259,44261,44262,44265,44267,44269,44270,44274,44276,44279,44280,44281,44282,44283,44286,44287,44289,44290,44291,44293,44295,44296,44297,44298,44299,44302,44304,44306,44307,44308,44309,44310,44311,44313,44314,44315,44317,44318,44319,44321,44322,44323,44324,44325,44326,44327,44328,44330,44331,44334,44335,44336,44337,44338,44339,null,null,null,null,null,null,44342,44343,44345,44346,44347,44349,44350,44351,44352,44353,44354,44355,44358,44360,44362,44363,44364,44365,44366,44367,44369,44370,44371,44373,44374,44375,null,null,null,null,null,null,44377,44378,44379,44380,44381,44382,44383,44384,44386,44388,44389,44390,44391,44392,44393,44394,44395,44398,44399,44401,44402,44407,44408,44409,44410,44414,44416,44419,44420,44421,44422,44423,44426,44427,44429,44430,44431,44433,44434,44435,44436,44437,44438,44439,44440,44441,44442,44443,44446,44447,44448,44449,44450,44451,44453,44454,44455,44456,44457,44458,44459,44460,44461,44462,44463,44464,44465,44466,44467,44468,44469,44470,44472,44473,44474,44475,44476,44477,44478,44479,44482,44483,44485,44486,44487,44489,44490,44491,44492,44493,44494,44495,44498,44500,44501,44502,44503,44504,44505,44506,44507,44509,44510,44511,44513,44514,44515,44517,44518,44519,44520,44521,44522,44523,44524,44525,44526,44527,44528,44529,44530,44531,44532,44533,44534,44535,44538,44539,44541,44542,44546,44547,44548,44549,44550,44551,44554,44556,44558,44559,44560,44561,44562,44563,44565,44566,44567,44568,44569,44570,44571,44572,null,null,null,null,null,null,44573,44574,44575,44576,44577,44578,44579,44580,44581,44582,44583,44584,44585,44586,44587,44588,44589,44590,44591,44594,44595,44597,44598,44601,44603,44604,null,null,null,null,null,null,44605,44606,44607,44610,44612,44615,44616,44617,44619,44623,44625,44626,44627,44629,44631,44632,44633,44634,44635,44638,44642,44643,44644,44646,44647,44650,44651,44653,44654,44655,44657,44658,44659,44660,44661,44662,44663,44666,44670,44671,44672,44673,44674,44675,44678,44679,44680,44681,44682,44683,44685,44686,44687,44688,44689,44690,44691,44692,44693,44694,44695,44696,44697,44698,44699,44700,44701,44702,44703,44704,44705,44706,44707,44708,44709,44710,44711,44712,44713,44714,44715,44716,44717,44718,44719,44720,44721,44722,44723,44724,44725,44726,44727,44728,44729,44730,44731,44735,44737,44738,44739,44741,44742,44743,44744,44745,44746,44747,44750,44754,44755,44756,44757,44758,44759,44762,44763,44765,44766,44767,44768,44769,44770,44771,44772,44773,44774,44775,44777,44778,44780,44782,44783,44784,44785,44786,44787,44789,44790,44791,44793,44794,44795,44797,44798,44799,44800,44801,44802,44803,44804,44805,null,null,null,null,null,null,44806,44809,44810,44811,44812,44814,44815,44817,44818,44819,44820,44821,44822,44823,44824,44825,44826,44827,44828,44829,44830,44831,44832,44833,44834,44835,null,null,null,null,null,null,44836,44837,44838,44839,44840,44841,44842,44843,44846,44847,44849,44851,44853,44854,44855,44856,44857,44858,44859,44862,44864,44868,44869,44870,44871,44874,44875,44876,44877,44878,44879,44881,44882,44883,44884,44885,44886,44887,44888,44889,44890,44891,44894,44895,44896,44897,44898,44899,44902,44903,44904,44905,44906,44907,44908,44909,44910,44911,44912,44913,44914,44915,44916,44917,44918,44919,44920,44922,44923,44924,44925,44926,44927,44929,44930,44931,44933,44934,44935,44937,44938,44939,44940,44941,44942,44943,44946,44947,44948,44950,44951,44952,44953,44954,44955,44957,44958,44959,44960,44961,44962,44963,44964,44965,44966,44967,44968,44969,44970,44971,44972,44973,44974,44975,44976,44977,44978,44979,44980,44981,44982,44983,44986,44987,44989,44990,44991,44993,44994,44995,44996,44997,44998,45002,45004,45007,45008,45009,45010,45011,45013,45014,45015,45016,45017,45018,45019,45021,45022,45023,45024,45025,null,null,null,null,null,null,45026,45027,45028,45029,45030,45031,45034,45035,45036,45037,45038,45039,45042,45043,45045,45046,45047,45049,45050,45051,45052,45053,45054,45055,45058,45059,null,null,null,null,null,null,45061,45062,45063,45064,45065,45066,45067,45069,45070,45071,45073,45074,45075,45077,45078,45079,45080,45081,45082,45083,45086,45087,45088,45089,45090,45091,45092,45093,45094,45095,45097,45098,45099,45100,45101,45102,45103,45104,45105,45106,45107,45108,45109,45110,45111,45112,45113,45114,45115,45116,45117,45118,45119,45120,45121,45122,45123,45126,45127,45129,45131,45133,45135,45136,45137,45138,45142,45144,45146,45147,45148,45150,45151,45152,45153,45154,45155,45156,45157,45158,45159,45160,45161,45162,45163,45164,45165,45166,45167,45168,45169,45170,45171,45172,45173,45174,45175,45176,45177,45178,45179,45182,45183,45185,45186,45187,45189,45190,45191,45192,45193,45194,45195,45198,45200,45202,45203,45204,45205,45206,45207,45211,45213,45214,45219,45220,45221,45222,45223,45226,45232,45234,45238,45239,45241,45242,45243,45245,45246,45247,45248,45249,45250,45251,45254,45258,45259,45260,45261,45262,45263,45266,null,null,null,null,null,null,45267,45269,45270,45271,45273,45274,45275,45276,45277,45278,45279,45281,45282,45283,45284,45286,45287,45288,45289,45290,45291,45292,45293,45294,45295,45296,null,null,null,null,null,null,45297,45298,45299,45300,45301,45302,45303,45304,45305,45306,45307,45308,45309,45310,45311,45312,45313,45314,45315,45316,45317,45318,45319,45322,45325,45326,45327,45329,45332,45333,45334,45335,45338,45342,45343,45344,45345,45346,45350,45351,45353,45354,45355,45357,45358,45359,45360,45361,45362,45363,45366,45370,45371,45372,45373,45374,45375,45378,45379,45381,45382,45383,45385,45386,45387,45388,45389,45390,45391,45394,45395,45398,45399,45401,45402,45403,45405,45406,45407,45409,45410,45411,45412,45413,45414,45415,45416,45417,45418,45419,45420,45421,45422,45423,45424,45425,45426,45427,45428,45429,45430,45431,45434,45435,45437,45438,45439,45441,45443,45444,45445,45446,45447,45450,45452,45454,45455,45456,45457,45461,45462,45463,45465,45466,45467,45469,45470,45471,45472,45473,45474,45475,45476,45477,45478,45479,45481,45482,45483,45484,45485,45486,45487,45488,45489,45490,45491,45492,45493,45494,45495,45496,null,null,null,null,null,null,45497,45498,45499,45500,45501,45502,45503,45504,45505,45506,45507,45508,45509,45510,45511,45512,45513,45514,45515,45517,45518,45519,45521,45522,45523,45525,null,null,null,null,null,null,45526,45527,45528,45529,45530,45531,45534,45536,45537,45538,45539,45540,45541,45542,45543,45546,45547,45549,45550,45551,45553,45554,45555,45556,45557,45558,45559,45560,45562,45564,45566,45567,45568,45569,45570,45571,45574,45575,45577,45578,45581,45582,45583,45584,45585,45586,45587,45590,45592,45594,45595,45596,45597,45598,45599,45601,45602,45603,45604,45605,45606,45607,45608,45609,45610,45611,45612,45613,45614,45615,45616,45617,45618,45619,45621,45622,45623,45624,45625,45626,45627,45629,45630,45631,45632,45633,45634,45635,45636,45637,45638,45639,45640,45641,45642,45643,45644,45645,45646,45647,45648,45649,45650,45651,45652,45653,45654,45655,45657,45658,45659,45661,45662,45663,45665,45666,45667,45668,45669,45670,45671,45674,45675,45676,45677,45678,45679,45680,45681,45682,45683,45686,45687,45688,45689,45690,45691,45693,45694,45695,45696,45697,45698,45699,45702,45703,45704,45706,45707,45708,45709,45710,null,null,null,null,null,null,45711,45714,45715,45717,45718,45719,45723,45724,45725,45726,45727,45730,45732,45735,45736,45737,45739,45741,45742,45743,45745,45746,45747,45749,45750,45751,null,null,null,null,null,null,45752,45753,45754,45755,45756,45757,45758,45759,45760,45761,45762,45763,45764,45765,45766,45767,45770,45771,45773,45774,45775,45777,45779,45780,45781,45782,45783,45786,45788,45790,45791,45792,45793,45795,45799,45801,45802,45808,45809,45810,45814,45820,45821,45822,45826,45827,45829,45830,45831,45833,45834,45835,45836,45837,45838,45839,45842,45846,45847,45848,45849,45850,45851,45853,45854,45855,45856,45857,45858,45859,45860,45861,45862,45863,45864,45865,45866,45867,45868,45869,45870,45871,45872,45873,45874,45875,45876,45877,45878,45879,45880,45881,45882,45883,45884,45885,45886,45887,45888,45889,45890,45891,45892,45893,45894,45895,45896,45897,45898,45899,45900,45901,45902,45903,45904,45905,45906,45907,45911,45913,45914,45917,45920,45921,45922,45923,45926,45928,45930,45932,45933,45935,45938,45939,45941,45942,45943,45945,45946,45947,45948,45949,45950,45951,45954,45958,45959,45960,45961,45962,45963,45965,null,null,null,null,null,null,45966,45967,45969,45970,45971,45973,45974,45975,45976,45977,45978,45979,45980,45981,45982,45983,45986,45987,45988,45989,45990,45991,45993,45994,45995,45997,null,null,null,null,null,null,45998,45999,46e3,46001,46002,46003,46004,46005,46006,46007,46008,46009,46010,46011,46012,46013,46014,46015,46016,46017,46018,46019,46022,46023,46025,46026,46029,46031,46033,46034,46035,46038,46040,46042,46044,46046,46047,46049,46050,46051,46053,46054,46055,46057,46058,46059,46060,46061,46062,46063,46064,46065,46066,46067,46068,46069,46070,46071,46072,46073,46074,46075,46077,46078,46079,46080,46081,46082,46083,46084,46085,46086,46087,46088,46089,46090,46091,46092,46093,46094,46095,46097,46098,46099,46100,46101,46102,46103,46105,46106,46107,46109,46110,46111,46113,46114,46115,46116,46117,46118,46119,46122,46124,46125,46126,46127,46128,46129,46130,46131,46133,46134,46135,46136,46137,46138,46139,46140,46141,46142,46143,46144,46145,46146,46147,46148,46149,46150,46151,46152,46153,46154,46155,46156,46157,46158,46159,46162,46163,46165,46166,46167,46169,46170,46171,46172,46173,46174,46175,46178,46180,46182,null,null,null,null,null,null,46183,46184,46185,46186,46187,46189,46190,46191,46192,46193,46194,46195,46196,46197,46198,46199,46200,46201,46202,46203,46204,46205,46206,46207,46209,46210,null,null,null,null,null,null,46211,46212,46213,46214,46215,46217,46218,46219,46220,46221,46222,46223,46224,46225,46226,46227,46228,46229,46230,46231,46232,46233,46234,46235,46236,46238,46239,46240,46241,46242,46243,46245,46246,46247,46249,46250,46251,46253,46254,46255,46256,46257,46258,46259,46260,46262,46264,46266,46267,46268,46269,46270,46271,46273,46274,46275,46277,46278,46279,46281,46282,46283,46284,46285,46286,46287,46289,46290,46291,46292,46294,46295,46296,46297,46298,46299,46302,46303,46305,46306,46309,46311,46312,46313,46314,46315,46318,46320,46322,46323,46324,46325,46326,46327,46329,46330,46331,46332,46333,46334,46335,46336,46337,46338,46339,46340,46341,46342,46343,46344,46345,46346,46347,46348,46349,46350,46351,46352,46353,46354,46355,46358,46359,46361,46362,46365,46366,46367,46368,46369,46370,46371,46374,46379,46380,46381,46382,46383,46386,46387,46389,46390,46391,46393,46394,46395,46396,46397,46398,46399,46402,46406,null,null,null,null,null,null,46407,46408,46409,46410,46414,46415,46417,46418,46419,46421,46422,46423,46424,46425,46426,46427,46430,46434,46435,46436,46437,46438,46439,46440,46441,46442,null,null,null,null,null,null,46443,46444,46445,46446,46447,46448,46449,46450,46451,46452,46453,46454,46455,46456,46457,46458,46459,46460,46461,46462,46463,46464,46465,46466,46467,46468,46469,46470,46471,46472,46473,46474,46475,46476,46477,46478,46479,46480,46481,46482,46483,46484,46485,46486,46487,46488,46489,46490,46491,46492,46493,46494,46495,46498,46499,46501,46502,46503,46505,46508,46509,46510,46511,46514,46518,46519,46520,46521,46522,46526,46527,46529,46530,46531,46533,46534,46535,46536,46537,46538,46539,46542,46546,46547,46548,46549,46550,46551,46553,46554,46555,46556,46557,46558,46559,46560,46561,46562,46563,46564,46565,46566,46567,46568,46569,46570,46571,46573,46574,46575,46576,46577,46578,46579,46580,46581,46582,46583,46584,46585,46586,46587,46588,46589,46590,46591,46592,46593,46594,46595,46596,46597,46598,46599,46600,46601,46602,46603,46604,46605,46606,46607,46610,46611,46613,46614,46615,46617,46618,46619,46620,46621,null,null,null,null,null,null,46622,46623,46624,46625,46626,46627,46628,46630,46631,46632,46633,46634,46635,46637,46638,46639,46640,46641,46642,46643,46645,46646,46647,46648,46649,46650,null,null,null,null,null,null,46651,46652,46653,46654,46655,46656,46657,46658,46659,46660,46661,46662,46663,46665,46666,46667,46668,46669,46670,46671,46672,46673,46674,46675,46676,46677,46678,46679,46680,46681,46682,46683,46684,46685,46686,46687,46688,46689,46690,46691,46693,46694,46695,46697,46698,46699,46700,46701,46702,46703,46704,46705,46706,46707,46708,46709,46710,46711,46712,46713,46714,46715,46716,46717,46718,46719,46720,46721,46722,46723,46724,46725,46726,46727,46728,46729,46730,46731,46732,46733,46734,46735,46736,46737,46738,46739,46740,46741,46742,46743,46744,46745,46746,46747,46750,46751,46753,46754,46755,46757,46758,46759,46760,46761,46762,46765,46766,46767,46768,46770,46771,46772,46773,46774,46775,46776,46777,46778,46779,46780,46781,46782,46783,46784,46785,46786,46787,46788,46789,46790,46791,46792,46793,46794,46795,46796,46797,46798,46799,46800,46801,46802,46803,46805,46806,46807,46808,46809,46810,46811,46812,46813,null,null,null,null,null,null,46814,46815,46816,46817,46818,46819,46820,46821,46822,46823,46824,46825,46826,46827,46828,46829,46830,46831,46833,46834,46835,46837,46838,46839,46841,46842,null,null,null,null,null,null,46843,46844,46845,46846,46847,46850,46851,46852,46854,46855,46856,46857,46858,46859,46860,46861,46862,46863,46864,46865,46866,46867,46868,46869,46870,46871,46872,46873,46874,46875,46876,46877,46878,46879,46880,46881,46882,46883,46884,46885,46886,46887,46890,46891,46893,46894,46897,46898,46899,46900,46901,46902,46903,46906,46908,46909,46910,46911,46912,46913,46914,46915,46917,46918,46919,46921,46922,46923,46925,46926,46927,46928,46929,46930,46931,46934,46935,46936,46937,46938,46939,46940,46941,46942,46943,46945,46946,46947,46949,46950,46951,46953,46954,46955,46956,46957,46958,46959,46962,46964,46966,46967,46968,46969,46970,46971,46974,46975,46977,46978,46979,46981,46982,46983,46984,46985,46986,46987,46990,46995,46996,46997,47002,47003,47005,47006,47007,47009,47010,47011,47012,47013,47014,47015,47018,47022,47023,47024,47025,47026,47027,47030,47031,47033,47034,47035,47036,47037,47038,47039,47040,47041,null,null,null,null,null,null,47042,47043,47044,47045,47046,47048,47050,47051,47052,47053,47054,47055,47056,47057,47058,47059,47060,47061,47062,47063,47064,47065,47066,47067,47068,47069,null,null,null,null,null,null,47070,47071,47072,47073,47074,47075,47076,47077,47078,47079,47080,47081,47082,47083,47086,47087,47089,47090,47091,47093,47094,47095,47096,47097,47098,47099,47102,47106,47107,47108,47109,47110,47114,47115,47117,47118,47119,47121,47122,47123,47124,47125,47126,47127,47130,47132,47134,47135,47136,47137,47138,47139,47142,47143,47145,47146,47147,47149,47150,47151,47152,47153,47154,47155,47158,47162,47163,47164,47165,47166,47167,47169,47170,47171,47173,47174,47175,47176,47177,47178,47179,47180,47181,47182,47183,47184,47186,47188,47189,47190,47191,47192,47193,47194,47195,47198,47199,47201,47202,47203,47205,47206,47207,47208,47209,47210,47211,47214,47216,47218,47219,47220,47221,47222,47223,47225,47226,47227,47229,47230,47231,47232,47233,47234,47235,47236,47237,47238,47239,47240,47241,47242,47243,47244,47246,47247,47248,47249,47250,47251,47252,47253,47254,47255,47256,47257,47258,47259,47260,47261,47262,47263,null,null,null,null,null,null,47264,47265,47266,47267,47268,47269,47270,47271,47273,47274,47275,47276,47277,47278,47279,47281,47282,47283,47285,47286,47287,47289,47290,47291,47292,47293,null,null,null,null,null,null,47294,47295,47298,47300,47302,47303,47304,47305,47306,47307,47309,47310,47311,47313,47314,47315,47317,47318,47319,47320,47321,47322,47323,47324,47326,47328,47330,47331,47332,47333,47334,47335,47338,47339,47341,47342,47343,47345,47346,47347,47348,47349,47350,47351,47354,47356,47358,47359,47360,47361,47362,47363,47365,47366,47367,47368,47369,47370,47371,47372,47373,47374,47375,47376,47377,47378,47379,47380,47381,47382,47383,47385,47386,47387,47388,47389,47390,47391,47393,47394,47395,47396,47397,47398,47399,47400,47401,47402,47403,47404,47405,47406,47407,47408,47409,47410,47411,47412,47413,47414,47415,47416,47417,47418,47419,47422,47423,47425,47426,47427,47429,47430,47431,47432,47433,47434,47435,47437,47438,47440,47442,47443,47444,47445,47446,47447,47450,47451,47453,47454,47455,47457,47458,47459,47460,47461,47462,47463,47466,47468,47470,47471,47472,47473,47474,47475,47478,47479,47481,47482,47483,47485,null,null,null,null,null,null,47486,47487,47488,47489,47490,47491,47494,47496,47499,47500,47503,47504,47505,47506,47507,47508,47509,47510,47511,47512,47513,47514,47515,47516,47517,47518,null,null,null,null,null,null,47519,47520,47521,47522,47523,47524,47525,47526,47527,47528,47529,47530,47531,47534,47535,47537,47538,47539,47541,47542,47543,47544,47545,47546,47547,47550,47552,47554,47555,47556,47557,47558,47559,47562,47563,47565,47571,47572,47573,47574,47575,47578,47580,47583,47584,47586,47590,47591,47593,47594,47595,47597,47598,47599,47600,47601,47602,47603,47606,47611,47612,47613,47614,47615,47618,47619,47620,47621,47622,47623,47625,47626,47627,47628,47629,47630,47631,47632,47633,47634,47635,47636,47638,47639,47640,47641,47642,47643,47644,47645,47646,47647,47648,47649,47650,47651,47652,47653,47654,47655,47656,47657,47658,47659,47660,47661,47662,47663,47664,47665,47666,47667,47668,47669,47670,47671,47674,47675,47677,47678,47679,47681,47683,47684,47685,47686,47687,47690,47692,47695,47696,47697,47698,47702,47703,47705,47706,47707,47709,47710,47711,47712,47713,47714,47715,47718,47722,47723,47724,47725,47726,47727,null,null,null,null,null,null,47730,47731,47733,47734,47735,47737,47738,47739,47740,47741,47742,47743,47744,47745,47746,47750,47752,47753,47754,47755,47757,47758,47759,47760,47761,47762,null,null,null,null,null,null,47763,47764,47765,47766,47767,47768,47769,47770,47771,47772,47773,47774,47775,47776,47777,47778,47779,47780,47781,47782,47783,47786,47789,47790,47791,47793,47795,47796,47797,47798,47799,47802,47804,47806,47807,47808,47809,47810,47811,47813,47814,47815,47817,47818,47819,47820,47821,47822,47823,47824,47825,47826,47827,47828,47829,47830,47831,47834,47835,47836,47837,47838,47839,47840,47841,47842,47843,47844,47845,47846,47847,47848,47849,47850,47851,47852,47853,47854,47855,47856,47857,47858,47859,47860,47861,47862,47863,47864,47865,47866,47867,47869,47870,47871,47873,47874,47875,47877,47878,47879,47880,47881,47882,47883,47884,47886,47888,47890,47891,47892,47893,47894,47895,47897,47898,47899,47901,47902,47903,47905,47906,47907,47908,47909,47910,47911,47912,47914,47916,47917,47918,47919,47920,47921,47922,47923,47927,47929,47930,47935,47936,47937,47938,47939,47942,47944,47946,47947,47948,47950,47953,47954,null,null,null,null,null,null,47955,47957,47958,47959,47961,47962,47963,47964,47965,47966,47967,47968,47970,47972,47973,47974,47975,47976,47977,47978,47979,47981,47982,47983,47984,47985,null,null,null,null,null,null,47986,47987,47988,47989,47990,47991,47992,47993,47994,47995,47996,47997,47998,47999,48e3,48001,48002,48003,48004,48005,48006,48007,48009,48010,48011,48013,48014,48015,48017,48018,48019,48020,48021,48022,48023,48024,48025,48026,48027,48028,48029,48030,48031,48032,48033,48034,48035,48037,48038,48039,48041,48042,48043,48045,48046,48047,48048,48049,48050,48051,48053,48054,48056,48057,48058,48059,48060,48061,48062,48063,48065,48066,48067,48069,48070,48071,48073,48074,48075,48076,48077,48078,48079,48081,48082,48084,48085,48086,48087,48088,48089,48090,48091,48092,48093,48094,48095,48096,48097,48098,48099,48100,48101,48102,48103,48104,48105,48106,48107,48108,48109,48110,48111,48112,48113,48114,48115,48116,48117,48118,48119,48122,48123,48125,48126,48129,48131,48132,48133,48134,48135,48138,48142,48144,48146,48147,48153,48154,48160,48161,48162,48163,48166,48168,48170,48171,48172,48174,48175,48178,48179,48181,null,null,null,null,null,null,48182,48183,48185,48186,48187,48188,48189,48190,48191,48194,48198,48199,48200,48202,48203,48206,48207,48209,48210,48211,48212,48213,48214,48215,48216,48217,null,null,null,null,null,null,48218,48219,48220,48222,48223,48224,48225,48226,48227,48228,48229,48230,48231,48232,48233,48234,48235,48236,48237,48238,48239,48240,48241,48242,48243,48244,48245,48246,48247,48248,48249,48250,48251,48252,48253,48254,48255,48256,48257,48258,48259,48262,48263,48265,48266,48269,48271,48272,48273,48274,48275,48278,48280,48283,48284,48285,48286,48287,48290,48291,48293,48294,48297,48298,48299,48300,48301,48302,48303,48306,48310,48311,48312,48313,48314,48315,48318,48319,48321,48322,48323,48325,48326,48327,48328,48329,48330,48331,48332,48334,48338,48339,48340,48342,48343,48345,48346,48347,48349,48350,48351,48352,48353,48354,48355,48356,48357,48358,48359,48360,48361,48362,48363,48364,48365,48366,48367,48368,48369,48370,48371,48375,48377,48378,48379,48381,48382,48383,48384,48385,48386,48387,48390,48392,48394,48395,48396,48397,48398,48399,48401,48402,48403,48405,48406,48407,48408,48409,48410,48411,48412,48413,null,null,null,null,null,null,48414,48415,48416,48417,48418,48419,48421,48422,48423,48424,48425,48426,48427,48429,48430,48431,48432,48433,48434,48435,48436,48437,48438,48439,48440,48441,null,null,null,null,null,null,48442,48443,48444,48445,48446,48447,48449,48450,48451,48452,48453,48454,48455,48458,48459,48461,48462,48463,48465,48466,48467,48468,48469,48470,48471,48474,48475,48476,48477,48478,48479,48480,48481,48482,48483,48485,48486,48487,48489,48490,48491,48492,48493,48494,48495,48496,48497,48498,48499,48500,48501,48502,48503,48504,48505,48506,48507,48508,48509,48510,48511,48514,48515,48517,48518,48523,48524,48525,48526,48527,48530,48532,48534,48535,48536,48539,48541,48542,48543,48544,48545,48546,48547,48549,48550,48551,48552,48553,48554,48555,48556,48557,48558,48559,48561,48562,48563,48564,48565,48566,48567,48569,48570,48571,48572,48573,48574,48575,48576,48577,48578,48579,48580,48581,48582,48583,48584,48585,48586,48587,48588,48589,48590,48591,48592,48593,48594,48595,48598,48599,48601,48602,48603,48605,48606,48607,48608,48609,48610,48611,48612,48613,48614,48615,48616,48618,48619,48620,48621,48622,48623,48625,null,null,null,null,null,null,48626,48627,48629,48630,48631,48633,48634,48635,48636,48637,48638,48639,48641,48642,48644,48646,48647,48648,48649,48650,48651,48654,48655,48657,48658,48659,null,null,null,null,null,null,48661,48662,48663,48664,48665,48666,48667,48670,48672,48673,48674,48675,48676,48677,48678,48679,48680,48681,48682,48683,48684,48685,48686,48687,48688,48689,48690,48691,48692,48693,48694,48695,48696,48697,48698,48699,48700,48701,48702,48703,48704,48705,48706,48707,48710,48711,48713,48714,48715,48717,48719,48720,48721,48722,48723,48726,48728,48732,48733,48734,48735,48738,48739,48741,48742,48743,48745,48747,48748,48749,48750,48751,48754,48758,48759,48760,48761,48762,48766,48767,48769,48770,48771,48773,48774,48775,48776,48777,48778,48779,48782,48786,48787,48788,48789,48790,48791,48794,48795,48796,48797,48798,48799,48800,48801,48802,48803,48804,48805,48806,48807,48809,48810,48811,48812,48813,48814,48815,48816,48817,48818,48819,48820,48821,48822,48823,48824,48825,48826,48827,48828,48829,48830,48831,48832,48833,48834,48835,48836,48837,48838,48839,48840,48841,48842,48843,48844,48845,48846,48847,48850,48851,null,null,null,null,null,null,48853,48854,48857,48858,48859,48860,48861,48862,48863,48865,48866,48870,48871,48872,48873,48874,48875,48877,48878,48879,48880,48881,48882,48883,48884,48885,null,null,null,null,null,null,48886,48887,48888,48889,48890,48891,48892,48893,48894,48895,48896,48898,48899,48900,48901,48902,48903,48906,48907,48908,48909,48910,48911,48912,48913,48914,48915,48916,48917,48918,48919,48922,48926,48927,48928,48929,48930,48931,48932,48933,48934,48935,48936,48937,48938,48939,48940,48941,48942,48943,48944,48945,48946,48947,48948,48949,48950,48951,48952,48953,48954,48955,48956,48957,48958,48959,48962,48963,48965,48966,48967,48969,48970,48971,48972,48973,48974,48975,48978,48979,48980,48982,48983,48984,48985,48986,48987,48988,48989,48990,48991,48992,48993,48994,48995,48996,48997,48998,48999,49e3,49001,49002,49003,49004,49005,49006,49007,49008,49009,49010,49011,49012,49013,49014,49015,49016,49017,49018,49019,49020,49021,49022,49023,49024,49025,49026,49027,49028,49029,49030,49031,49032,49033,49034,49035,49036,49037,49038,49039,49040,49041,49042,49043,49045,49046,49047,49048,49049,49050,49051,49052,49053,null,null,null,null,null,null,49054,49055,49056,49057,49058,49059,49060,49061,49062,49063,49064,49065,49066,49067,49068,49069,49070,49071,49073,49074,49075,49076,49077,49078,49079,49080,null,null,null,null,null,null,49081,49082,49083,49084,49085,49086,49087,49088,49089,49090,49091,49092,49094,49095,49096,49097,49098,49099,49102,49103,49105,49106,49107,49109,49110,49111,49112,49113,49114,49115,49117,49118,49120,49122,49123,49124,49125,49126,49127,49128,49129,49130,49131,49132,49133,49134,49135,49136,49137,49138,49139,49140,49141,49142,49143,49144,49145,49146,49147,49148,49149,49150,49151,49152,49153,49154,49155,49156,49157,49158,49159,49160,49161,49162,49163,49164,49165,49166,49167,49168,49169,49170,49171,49172,49173,49174,49175,49176,49177,49178,49179,49180,49181,49182,49183,49184,49185,49186,49187,49188,49189,49190,49191,49192,49193,49194,49195,49196,49197,49198,49199,49200,49201,49202,49203,49204,49205,49206,49207,49208,49209,49210,49211,49213,49214,49215,49216,49217,49218,49219,49220,49221,49222,49223,49224,49225,49226,49227,49228,49229,49230,49231,49232,49234,49235,49236,49237,49238,49239,49241,49242,49243,null,null,null,null,null,null,49245,49246,49247,49249,49250,49251,49252,49253,49254,49255,49258,49259,49260,49261,49262,49263,49264,49265,49266,49267,49268,49269,49270,49271,49272,49273,null,null,null,null,null,null,49274,49275,49276,49277,49278,49279,49280,49281,49282,49283,49284,49285,49286,49287,49288,49289,49290,49291,49292,49293,49294,49295,49298,49299,49301,49302,49303,49305,49306,49307,49308,49309,49310,49311,49314,49316,49318,49319,49320,49321,49322,49323,49326,49329,49330,49335,49336,49337,49338,49339,49342,49346,49347,49348,49350,49351,49354,49355,49357,49358,49359,49361,49362,49363,49364,49365,49366,49367,49370,49374,49375,49376,49377,49378,49379,49382,49383,49385,49386,49387,49389,49390,49391,49392,49393,49394,49395,49398,49400,49402,49403,49404,49405,49406,49407,49409,49410,49411,49413,49414,49415,49417,49418,49419,49420,49421,49422,49423,49425,49426,49427,49428,49430,49431,49432,49433,49434,49435,49441,49442,49445,49448,49449,49450,49451,49454,49458,49459,49460,49461,49463,49466,49467,49469,49470,49471,49473,49474,49475,49476,49477,49478,49479,49482,49486,49487,49488,49489,49490,49491,49494,49495,null,null,null,null,null,null,49497,49498,49499,49501,49502,49503,49504,49505,49506,49507,49510,49514,49515,49516,49517,49518,49519,49521,49522,49523,49525,49526,49527,49529,49530,49531,null,null,null,null,null,null,49532,49533,49534,49535,49536,49537,49538,49539,49540,49542,49543,49544,49545,49546,49547,49551,49553,49554,49555,49557,49559,49560,49561,49562,49563,49566,49568,49570,49571,49572,49574,49575,49578,49579,49581,49582,49583,49585,49586,49587,49588,49589,49590,49591,49592,49593,49594,49595,49596,49598,49599,49600,49601,49602,49603,49605,49606,49607,49609,49610,49611,49613,49614,49615,49616,49617,49618,49619,49621,49622,49625,49626,49627,49628,49629,49630,49631,49633,49634,49635,49637,49638,49639,49641,49642,49643,49644,49645,49646,49647,49650,49652,49653,49654,49655,49656,49657,49658,49659,49662,49663,49665,49666,49667,49669,49670,49671,49672,49673,49674,49675,49678,49680,49682,49683,49684,49685,49686,49687,49690,49691,49693,49694,49697,49698,49699,49700,49701,49702,49703,49706,49708,49710,49712,49715,49717,49718,49719,49720,49721,49722,49723,49724,49725,49726,49727,49728,49729,49730,49731,49732,49733,null,null,null,null,null,null,49734,49735,49737,49738,49739,49740,49741,49742,49743,49746,49747,49749,49750,49751,49753,49754,49755,49756,49757,49758,49759,49761,49762,49763,49764,49766,null,null,null,null,null,null,49767,49768,49769,49770,49771,49774,49775,49777,49778,49779,49781,49782,49783,49784,49785,49786,49787,49790,49792,49794,49795,49796,49797,49798,49799,49802,49803,49804,49805,49806,49807,49809,49810,49811,49812,49813,49814,49815,49817,49818,49820,49822,49823,49824,49825,49826,49827,49830,49831,49833,49834,49835,49838,49839,49840,49841,49842,49843,49846,49848,49850,49851,49852,49853,49854,49855,49856,49857,49858,49859,49860,49861,49862,49863,49864,49865,49866,49867,49868,49869,49870,49871,49872,49873,49874,49875,49876,49877,49878,49879,49880,49881,49882,49883,49886,49887,49889,49890,49893,49894,49895,49896,49897,49898,49902,49904,49906,49907,49908,49909,49911,49914,49917,49918,49919,49921,49922,49923,49924,49925,49926,49927,49930,49931,49934,49935,49936,49937,49938,49942,49943,49945,49946,49947,49949,49950,49951,49952,49953,49954,49955,49958,49959,49962,49963,49964,49965,49966,49967,49968,49969,49970,null,null,null,null,null,null,49971,49972,49973,49974,49975,49976,49977,49978,49979,49980,49981,49982,49983,49984,49985,49986,49987,49988,49990,49991,49992,49993,49994,49995,49996,49997,null,null,null,null,null,null,49998,49999,5e4,50001,50002,50003,50004,50005,50006,50007,50008,50009,50010,50011,50012,50013,50014,50015,50016,50017,50018,50019,50020,50021,50022,50023,50026,50027,50029,50030,50031,50033,50035,50036,50037,50038,50039,50042,50043,50046,50047,50048,50049,50050,50051,50053,50054,50055,50057,50058,50059,50061,50062,50063,50064,50065,50066,50067,50068,50069,50070,50071,50072,50073,50074,50075,50076,50077,50078,50079,50080,50081,50082,50083,50084,50085,50086,50087,50088,50089,50090,50091,50092,50093,50094,50095,50096,50097,50098,50099,50100,50101,50102,50103,50104,50105,50106,50107,50108,50109,50110,50111,50113,50114,50115,50116,50117,50118,50119,50120,50121,50122,50123,50124,50125,50126,50127,50128,50129,50130,50131,50132,50133,50134,50135,50138,50139,50141,50142,50145,50147,50148,50149,50150,50151,50154,50155,50156,50158,50159,50160,50161,50162,50163,50166,50167,50169,50170,50171,50172,50173,50174,null,null,null,null,null,null,50175,50176,50177,50178,50179,50180,50181,50182,50183,50185,50186,50187,50188,50189,50190,50191,50193,50194,50195,50196,50197,50198,50199,50200,50201,50202,null,null,null,null,null,null,50203,50204,50205,50206,50207,50208,50209,50210,50211,50213,50214,50215,50216,50217,50218,50219,50221,50222,50223,50225,50226,50227,50229,50230,50231,50232,50233,50234,50235,50238,50239,50240,50241,50242,50243,50244,50245,50246,50247,50249,50250,50251,50252,50253,50254,50255,50256,50257,50258,50259,50260,50261,50262,50263,50264,50265,50266,50267,50268,50269,50270,50271,50272,50273,50274,50275,50278,50279,50281,50282,50283,50285,50286,50287,50288,50289,50290,50291,50294,50295,50296,50298,50299,50300,50301,50302,50303,50305,50306,50307,50308,50309,50310,50311,50312,50313,50314,50315,50316,50317,50318,50319,50320,50321,50322,50323,50325,50326,50327,50328,50329,50330,50331,50333,50334,50335,50336,50337,50338,50339,50340,50341,50342,50343,50344,50345,50346,50347,50348,50349,50350,50351,50352,50353,50354,50355,50356,50357,50358,50359,50361,50362,50363,50365,50366,50367,50368,50369,50370,50371,50372,50373,null,null,null,null,null,null,50374,50375,50376,50377,50378,50379,50380,50381,50382,50383,50384,50385,50386,50387,50388,50389,50390,50391,50392,50393,50394,50395,50396,50397,50398,50399,null,null,null,null,null,null,50400,50401,50402,50403,50404,50405,50406,50407,50408,50410,50411,50412,50413,50414,50415,50418,50419,50421,50422,50423,50425,50427,50428,50429,50430,50434,50435,50436,50437,50438,50439,50440,50441,50442,50443,50445,50446,50447,50449,50450,50451,50453,50454,50455,50456,50457,50458,50459,50461,50462,50463,50464,50465,50466,50467,50468,50469,50470,50471,50474,50475,50477,50478,50479,50481,50482,50483,50484,50485,50486,50487,50490,50492,50494,50495,50496,50497,50498,50499,50502,50503,50507,50511,50512,50513,50514,50518,50522,50523,50524,50527,50530,50531,50533,50534,50535,50537,50538,50539,50540,50541,50542,50543,50546,50550,50551,50552,50553,50554,50555,50558,50559,50561,50562,50563,50565,50566,50568,50569,50570,50571,50574,50576,50578,50579,50580,50582,50585,50586,50587,50589,50590,50591,50593,50594,50595,50596,50597,50598,50599,50600,50602,50603,50604,50605,50606,50607,50608,50609,50610,50611,50614,null,null,null,null,null,null,50615,50618,50623,50624,50625,50626,50627,50635,50637,50639,50642,50643,50645,50646,50647,50649,50650,50651,50652,50653,50654,50655,50658,50660,50662,50663,null,null,null,null,null,null,50664,50665,50666,50667,50671,50673,50674,50675,50677,50680,50681,50682,50683,50690,50691,50692,50697,50698,50699,50701,50702,50703,50705,50706,50707,50708,50709,50710,50711,50714,50717,50718,50719,50720,50721,50722,50723,50726,50727,50729,50730,50731,50735,50737,50738,50742,50744,50746,50748,50749,50750,50751,50754,50755,50757,50758,50759,50761,50762,50763,50764,50765,50766,50767,50770,50774,50775,50776,50777,50778,50779,50782,50783,50785,50786,50787,50788,50789,50790,50791,50792,50793,50794,50795,50797,50798,50800,50802,50803,50804,50805,50806,50807,50810,50811,50813,50814,50815,50817,50818,50819,50820,50821,50822,50823,50826,50828,50830,50831,50832,50833,50834,50835,50838,50839,50841,50842,50843,50845,50846,50847,50848,50849,50850,50851,50854,50856,50858,50859,50860,50861,50862,50863,50866,50867,50869,50870,50871,50875,50876,50877,50878,50879,50882,50884,50886,50887,50888,50889,50890,50891,50894,null,null,null,null,null,null,50895,50897,50898,50899,50901,50902,50903,50904,50905,50906,50907,50910,50911,50914,50915,50916,50917,50918,50919,50922,50923,50925,50926,50927,50929,50930,null,null,null,null,null,null,50931,50932,50933,50934,50935,50938,50939,50940,50942,50943,50944,50945,50946,50947,50950,50951,50953,50954,50955,50957,50958,50959,50960,50961,50962,50963,50966,50968,50970,50971,50972,50973,50974,50975,50978,50979,50981,50982,50983,50985,50986,50987,50988,50989,50990,50991,50994,50996,50998,51e3,51001,51002,51003,51006,51007,51009,51010,51011,51013,51014,51015,51016,51017,51019,51022,51024,51033,51034,51035,51037,51038,51039,51041,51042,51043,51044,51045,51046,51047,51049,51050,51052,51053,51054,51055,51056,51057,51058,51059,51062,51063,51065,51066,51067,51071,51072,51073,51074,51078,51083,51084,51085,51087,51090,51091,51093,51097,51099,51100,51101,51102,51103,51106,51111,51112,51113,51114,51115,51118,51119,51121,51122,51123,51125,51126,51127,51128,51129,51130,51131,51134,51138,51139,51140,51141,51142,51143,51146,51147,51149,51151,51153,51154,51155,51156,51157,51158,51159,51161,51162,51163,51164,null,null,null,null,null,null,51166,51167,51168,51169,51170,51171,51173,51174,51175,51177,51178,51179,51181,51182,51183,51184,51185,51186,51187,51188,51189,51190,51191,51192,51193,51194,null,null,null,null,null,null,51195,51196,51197,51198,51199,51202,51203,51205,51206,51207,51209,51211,51212,51213,51214,51215,51218,51220,51223,51224,51225,51226,51227,51230,51231,51233,51234,51235,51237,51238,51239,51240,51241,51242,51243,51246,51248,51250,51251,51252,51253,51254,51255,51257,51258,51259,51261,51262,51263,51265,51266,51267,51268,51269,51270,51271,51274,51275,51278,51279,51280,51281,51282,51283,51285,51286,51287,51288,51289,51290,51291,51292,51293,51294,51295,51296,51297,51298,51299,51300,51301,51302,51303,51304,51305,51306,51307,51308,51309,51310,51311,51314,51315,51317,51318,51319,51321,51323,51324,51325,51326,51327,51330,51332,51336,51337,51338,51342,51343,51344,51345,51346,51347,51349,51350,51351,51352,51353,51354,51355,51356,51358,51360,51362,51363,51364,51365,51366,51367,51369,51370,51371,51372,51373,51374,51375,51376,51377,51378,51379,51380,51381,51382,51383,51384,51385,51386,51387,51390,51391,51392,51393,null,null,null,null,null,null,51394,51395,51397,51398,51399,51401,51402,51403,51405,51406,51407,51408,51409,51410,51411,51414,51416,51418,51419,51420,51421,51422,51423,51426,51427,51429,null,null,null,null,null,null,51430,51431,51432,51433,51434,51435,51436,51437,51438,51439,51440,51441,51442,51443,51444,51446,51447,51448,51449,51450,51451,51454,51455,51457,51458,51459,51463,51464,51465,51466,51467,51470,12288,12289,12290,183,8229,8230,168,12291,173,8213,8741,65340,8764,8216,8217,8220,8221,12308,12309,12296,12297,12298,12299,12300,12301,12302,12303,12304,12305,177,215,247,8800,8804,8805,8734,8756,176,8242,8243,8451,8491,65504,65505,65509,9794,9792,8736,8869,8978,8706,8711,8801,8786,167,8251,9734,9733,9675,9679,9678,9671,9670,9633,9632,9651,9650,9661,9660,8594,8592,8593,8595,8596,12307,8810,8811,8730,8765,8733,8757,8747,8748,8712,8715,8838,8839,8834,8835,8746,8745,8743,8744,65506,51472,51474,51475,51476,51477,51478,51479,51481,51482,51483,51484,51485,51486,51487,51488,51489,51490,51491,51492,51493,51494,51495,51496,51497,51498,51499,null,null,null,null,null,null,51501,51502,51503,51504,51505,51506,51507,51509,51510,51511,51512,51513,51514,51515,51516,51517,51518,51519,51520,51521,51522,51523,51524,51525,51526,51527,null,null,null,null,null,null,51528,51529,51530,51531,51532,51533,51534,51535,51538,51539,51541,51542,51543,51545,51546,51547,51548,51549,51550,51551,51554,51556,51557,51558,51559,51560,51561,51562,51563,51565,51566,51567,8658,8660,8704,8707,180,65374,711,728,733,730,729,184,731,161,191,720,8750,8721,8719,164,8457,8240,9665,9664,9655,9654,9828,9824,9825,9829,9831,9827,8857,9672,9635,9680,9681,9618,9636,9637,9640,9639,9638,9641,9832,9743,9742,9756,9758,182,8224,8225,8597,8599,8601,8598,8600,9837,9833,9834,9836,12927,12828,8470,13255,8482,13250,13272,8481,8364,174,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,51569,51570,51571,51573,51574,51575,51576,51577,51578,51579,51581,51582,51583,51584,51585,51586,51587,51588,51589,51590,51591,51594,51595,51597,51598,51599,null,null,null,null,null,null,51601,51602,51603,51604,51605,51606,51607,51610,51612,51614,51615,51616,51617,51618,51619,51620,51621,51622,51623,51624,51625,51626,51627,51628,51629,51630,null,null,null,null,null,null,51631,51632,51633,51634,51635,51636,51637,51638,51639,51640,51641,51642,51643,51644,51645,51646,51647,51650,51651,51653,51654,51657,51659,51660,51661,51662,51663,51666,51668,51671,51672,51675,65281,65282,65283,65284,65285,65286,65287,65288,65289,65290,65291,65292,65293,65294,65295,65296,65297,65298,65299,65300,65301,65302,65303,65304,65305,65306,65307,65308,65309,65310,65311,65312,65313,65314,65315,65316,65317,65318,65319,65320,65321,65322,65323,65324,65325,65326,65327,65328,65329,65330,65331,65332,65333,65334,65335,65336,65337,65338,65339,65510,65341,65342,65343,65344,65345,65346,65347,65348,65349,65350,65351,65352,65353,65354,65355,65356,65357,65358,65359,65360,65361,65362,65363,65364,65365,65366,65367,65368,65369,65370,65371,65372,65373,65507,51678,51679,51681,51683,51685,51686,51688,51689,51690,51691,51694,51698,51699,51700,51701,51702,51703,51706,51707,51709,51710,51711,51713,51714,51715,51716,null,null,null,null,null,null,51717,51718,51719,51722,51726,51727,51728,51729,51730,51731,51733,51734,51735,51737,51738,51739,51740,51741,51742,51743,51744,51745,51746,51747,51748,51749,null,null,null,null,null,null,51750,51751,51752,51754,51755,51756,51757,51758,51759,51760,51761,51762,51763,51764,51765,51766,51767,51768,51769,51770,51771,51772,51773,51774,51775,51776,51777,51778,51779,51780,51781,51782,12593,12594,12595,12596,12597,12598,12599,12600,12601,12602,12603,12604,12605,12606,12607,12608,12609,12610,12611,12612,12613,12614,12615,12616,12617,12618,12619,12620,12621,12622,12623,12624,12625,12626,12627,12628,12629,12630,12631,12632,12633,12634,12635,12636,12637,12638,12639,12640,12641,12642,12643,12644,12645,12646,12647,12648,12649,12650,12651,12652,12653,12654,12655,12656,12657,12658,12659,12660,12661,12662,12663,12664,12665,12666,12667,12668,12669,12670,12671,12672,12673,12674,12675,12676,12677,12678,12679,12680,12681,12682,12683,12684,12685,12686,51783,51784,51785,51786,51787,51790,51791,51793,51794,51795,51797,51798,51799,51800,51801,51802,51803,51806,51810,51811,51812,51813,51814,51815,51817,51818,null,null,null,null,null,null,51819,51820,51821,51822,51823,51824,51825,51826,51827,51828,51829,51830,51831,51832,51833,51834,51835,51836,51838,51839,51840,51841,51842,51843,51845,51846,null,null,null,null,null,null,51847,51848,51849,51850,51851,51852,51853,51854,51855,51856,51857,51858,51859,51860,51861,51862,51863,51865,51866,51867,51868,51869,51870,51871,51872,51873,51874,51875,51876,51877,51878,51879,8560,8561,8562,8563,8564,8565,8566,8567,8568,8569,null,null,null,null,null,8544,8545,8546,8547,8548,8549,8550,8551,8552,8553,null,null,null,null,null,null,null,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,null,null,null,null,null,null,null,null,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,963,964,965,966,967,968,969,null,null,null,null,null,null,51880,51881,51882,51883,51884,51885,51886,51887,51888,51889,51890,51891,51892,51893,51894,51895,51896,51897,51898,51899,51902,51903,51905,51906,51907,51909,null,null,null,null,null,null,51910,51911,51912,51913,51914,51915,51918,51920,51922,51924,51925,51926,51927,51930,51931,51932,51933,51934,51935,51937,51938,51939,51940,51941,51942,51943,null,null,null,null,null,null,51944,51945,51946,51947,51949,51950,51951,51952,51953,51954,51955,51957,51958,51959,51960,51961,51962,51963,51964,51965,51966,51967,51968,51969,51970,51971,51972,51973,51974,51975,51977,51978,9472,9474,9484,9488,9496,9492,9500,9516,9508,9524,9532,9473,9475,9487,9491,9499,9495,9507,9523,9515,9531,9547,9504,9519,9512,9527,9535,9501,9520,9509,9528,9538,9490,9489,9498,9497,9494,9493,9486,9485,9502,9503,9505,9506,9510,9511,9513,9514,9517,9518,9521,9522,9525,9526,9529,9530,9533,9534,9536,9537,9539,9540,9541,9542,9543,9544,9545,9546,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,51979,51980,51981,51982,51983,51985,51986,51987,51989,51990,51991,51993,51994,51995,51996,51997,51998,51999,52002,52003,52004,52005,52006,52007,52008,52009,null,null,null,null,null,null,52010,52011,52012,52013,52014,52015,52016,52017,52018,52019,52020,52021,52022,52023,52024,52025,52026,52027,52028,52029,52030,52031,52032,52034,52035,52036,null,null,null,null,null,null,52037,52038,52039,52042,52043,52045,52046,52047,52049,52050,52051,52052,52053,52054,52055,52058,52059,52060,52062,52063,52064,52065,52066,52067,52069,52070,52071,52072,52073,52074,52075,52076,13205,13206,13207,8467,13208,13252,13219,13220,13221,13222,13209,13210,13211,13212,13213,13214,13215,13216,13217,13218,13258,13197,13198,13199,13263,13192,13193,13256,13223,13224,13232,13233,13234,13235,13236,13237,13238,13239,13240,13241,13184,13185,13186,13187,13188,13242,13243,13244,13245,13246,13247,13200,13201,13202,13203,13204,8486,13248,13249,13194,13195,13196,13270,13253,13229,13230,13231,13275,13225,13226,13227,13228,13277,13264,13267,13251,13257,13276,13254,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,52077,52078,52079,52080,52081,52082,52083,52084,52085,52086,52087,52090,52091,52092,52093,52094,52095,52096,52097,52098,52099,52100,52101,52102,52103,52104,null,null,null,null,null,null,52105,52106,52107,52108,52109,52110,52111,52112,52113,52114,52115,52116,52117,52118,52119,52120,52121,52122,52123,52125,52126,52127,52128,52129,52130,52131,null,null,null,null,null,null,52132,52133,52134,52135,52136,52137,52138,52139,52140,52141,52142,52143,52144,52145,52146,52147,52148,52149,52150,52151,52153,52154,52155,52156,52157,52158,52159,52160,52161,52162,52163,52164,198,208,170,294,null,306,null,319,321,216,338,186,222,358,330,null,12896,12897,12898,12899,12900,12901,12902,12903,12904,12905,12906,12907,12908,12909,12910,12911,12912,12913,12914,12915,12916,12917,12918,12919,12920,12921,12922,12923,9424,9425,9426,9427,9428,9429,9430,9431,9432,9433,9434,9435,9436,9437,9438,9439,9440,9441,9442,9443,9444,9445,9446,9447,9448,9449,9312,9313,9314,9315,9316,9317,9318,9319,9320,9321,9322,9323,9324,9325,9326,189,8531,8532,188,190,8539,8540,8541,8542,52165,52166,52167,52168,52169,52170,52171,52172,52173,52174,52175,52176,52177,52178,52179,52181,52182,52183,52184,52185,52186,52187,52188,52189,52190,52191,null,null,null,null,null,null,52192,52193,52194,52195,52197,52198,52200,52202,52203,52204,52205,52206,52207,52208,52209,52210,52211,52212,52213,52214,52215,52216,52217,52218,52219,52220,null,null,null,null,null,null,52221,52222,52223,52224,52225,52226,52227,52228,52229,52230,52231,52232,52233,52234,52235,52238,52239,52241,52242,52243,52245,52246,52247,52248,52249,52250,52251,52254,52255,52256,52259,52260,230,273,240,295,305,307,312,320,322,248,339,223,254,359,331,329,12800,12801,12802,12803,12804,12805,12806,12807,12808,12809,12810,12811,12812,12813,12814,12815,12816,12817,12818,12819,12820,12821,12822,12823,12824,12825,12826,12827,9372,9373,9374,9375,9376,9377,9378,9379,9380,9381,9382,9383,9384,9385,9386,9387,9388,9389,9390,9391,9392,9393,9394,9395,9396,9397,9332,9333,9334,9335,9336,9337,9338,9339,9340,9341,9342,9343,9344,9345,9346,185,178,179,8308,8319,8321,8322,8323,8324,52261,52262,52266,52267,52269,52271,52273,52274,52275,52276,52277,52278,52279,52282,52287,52288,52289,52290,52291,52294,52295,52297,52298,52299,52301,52302,null,null,null,null,null,null,52303,52304,52305,52306,52307,52310,52314,52315,52316,52317,52318,52319,52321,52322,52323,52325,52327,52329,52330,52331,52332,52333,52334,52335,52337,52338,null,null,null,null,null,null,52339,52340,52342,52343,52344,52345,52346,52347,52348,52349,52350,52351,52352,52353,52354,52355,52356,52357,52358,52359,52360,52361,52362,52363,52364,52365,52366,52367,52368,52369,52370,52371,12353,12354,12355,12356,12357,12358,12359,12360,12361,12362,12363,12364,12365,12366,12367,12368,12369,12370,12371,12372,12373,12374,12375,12376,12377,12378,12379,12380,12381,12382,12383,12384,12385,12386,12387,12388,12389,12390,12391,12392,12393,12394,12395,12396,12397,12398,12399,12400,12401,12402,12403,12404,12405,12406,12407,12408,12409,12410,12411,12412,12413,12414,12415,12416,12417,12418,12419,12420,12421,12422,12423,12424,12425,12426,12427,12428,12429,12430,12431,12432,12433,12434,12435,null,null,null,null,null,null,null,null,null,null,null,52372,52373,52374,52375,52378,52379,52381,52382,52383,52385,52386,52387,52388,52389,52390,52391,52394,52398,52399,52400,52401,52402,52403,52406,52407,52409,null,null,null,null,null,null,52410,52411,52413,52414,52415,52416,52417,52418,52419,52422,52424,52426,52427,52428,52429,52430,52431,52433,52434,52435,52437,52438,52439,52440,52441,52442,null,null,null,null,null,null,52443,52444,52445,52446,52447,52448,52449,52450,52451,52453,52454,52455,52456,52457,52458,52459,52461,52462,52463,52465,52466,52467,52468,52469,52470,52471,52472,52473,52474,52475,52476,52477,12449,12450,12451,12452,12453,12454,12455,12456,12457,12458,12459,12460,12461,12462,12463,12464,12465,12466,12467,12468,12469,12470,12471,12472,12473,12474,12475,12476,12477,12478,12479,12480,12481,12482,12483,12484,12485,12486,12487,12488,12489,12490,12491,12492,12493,12494,12495,12496,12497,12498,12499,12500,12501,12502,12503,12504,12505,12506,12507,12508,12509,12510,12511,12512,12513,12514,12515,12516,12517,12518,12519,12520,12521,12522,12523,12524,12525,12526,12527,12528,12529,12530,12531,12532,12533,12534,null,null,null,null,null,null,null,null,52478,52479,52480,52482,52483,52484,52485,52486,52487,52490,52491,52493,52494,52495,52497,52498,52499,52500,52501,52502,52503,52506,52508,52510,52511,52512,null,null,null,null,null,null,52513,52514,52515,52517,52518,52519,52521,52522,52523,52525,52526,52527,52528,52529,52530,52531,52532,52533,52534,52535,52536,52538,52539,52540,52541,52542,null,null,null,null,null,null,52543,52544,52545,52546,52547,52548,52549,52550,52551,52552,52553,52554,52555,52556,52557,52558,52559,52560,52561,52562,52563,52564,52565,52566,52567,52568,52569,52570,52571,52573,52574,52575,1040,1041,1042,1043,1044,1045,1025,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1072,1073,1074,1075,1076,1077,1105,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,null,null,null,null,null,null,null,null,null,null,null,null,null,52577,52578,52579,52581,52582,52583,52584,52585,52586,52587,52590,52592,52594,52595,52596,52597,52598,52599,52601,52602,52603,52604,52605,52606,52607,52608,null,null,null,null,null,null,52609,52610,52611,52612,52613,52614,52615,52617,52618,52619,52620,52621,52622,52623,52624,52625,52626,52627,52630,52631,52633,52634,52635,52637,52638,52639,null,null,null,null,null,null,52640,52641,52642,52643,52646,52648,52650,52651,52652,52653,52654,52655,52657,52658,52659,52660,52661,52662,52663,52664,52665,52666,52667,52668,52669,52670,52671,52672,52673,52674,52675,52677,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,52678,52679,52680,52681,52682,52683,52685,52686,52687,52689,52690,52691,52692,52693,52694,52695,52696,52697,52698,52699,52700,52701,52702,52703,52704,52705,null,null,null,null,null,null,52706,52707,52708,52709,52710,52711,52713,52714,52715,52717,52718,52719,52721,52722,52723,52724,52725,52726,52727,52730,52732,52734,52735,52736,52737,52738,null,null,null,null,null,null,52739,52741,52742,52743,52745,52746,52747,52749,52750,52751,52752,52753,52754,52755,52757,52758,52759,52760,52762,52763,52764,52765,52766,52767,52770,52771,52773,52774,52775,52777,52778,52779,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,52780,52781,52782,52783,52786,52788,52790,52791,52792,52793,52794,52795,52796,52797,52798,52799,52800,52801,52802,52803,52804,52805,52806,52807,52808,52809,null,null,null,null,null,null,52810,52811,52812,52813,52814,52815,52816,52817,52818,52819,52820,52821,52822,52823,52826,52827,52829,52830,52834,52835,52836,52837,52838,52839,52842,52844,null,null,null,null,null,null,52846,52847,52848,52849,52850,52851,52854,52855,52857,52858,52859,52861,52862,52863,52864,52865,52866,52867,52870,52872,52874,52875,52876,52877,52878,52879,52882,52883,52885,52886,52887,52889,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,52890,52891,52892,52893,52894,52895,52898,52902,52903,52904,52905,52906,52907,52910,52911,52912,52913,52914,52915,52916,52917,52918,52919,52920,52921,52922,null,null,null,null,null,null,52923,52924,52925,52926,52927,52928,52930,52931,52932,52933,52934,52935,52936,52937,52938,52939,52940,52941,52942,52943,52944,52945,52946,52947,52948,52949,null,null,null,null,null,null,52950,52951,52952,52953,52954,52955,52956,52957,52958,52959,52960,52961,52962,52963,52966,52967,52969,52970,52973,52974,52975,52976,52977,52978,52979,52982,52986,52987,52988,52989,52990,52991,44032,44033,44036,44039,44040,44041,44042,44048,44049,44050,44051,44052,44053,44054,44055,44057,44058,44059,44060,44061,44064,44068,44076,44077,44079,44080,44081,44088,44089,44092,44096,44107,44109,44116,44120,44124,44144,44145,44148,44151,44152,44154,44160,44161,44163,44164,44165,44166,44169,44170,44171,44172,44176,44180,44188,44189,44191,44192,44193,44200,44201,44202,44204,44207,44208,44216,44217,44219,44220,44221,44225,44228,44232,44236,44245,44247,44256,44257,44260,44263,44264,44266,44268,44271,44272,44273,44275,44277,44278,44284,44285,44288,44292,44294,52994,52995,52997,52998,52999,53001,53002,53003,53004,53005,53006,53007,53010,53012,53014,53015,53016,53017,53018,53019,53021,53022,53023,53025,53026,53027,null,null,null,null,null,null,53029,53030,53031,53032,53033,53034,53035,53038,53042,53043,53044,53045,53046,53047,53049,53050,53051,53052,53053,53054,53055,53056,53057,53058,53059,53060,null,null,null,null,null,null,53061,53062,53063,53064,53065,53066,53067,53068,53069,53070,53071,53072,53073,53074,53075,53078,53079,53081,53082,53083,53085,53086,53087,53088,53089,53090,53091,53094,53096,53098,53099,53100,44300,44301,44303,44305,44312,44316,44320,44329,44332,44333,44340,44341,44344,44348,44356,44357,44359,44361,44368,44372,44376,44385,44387,44396,44397,44400,44403,44404,44405,44406,44411,44412,44413,44415,44417,44418,44424,44425,44428,44432,44444,44445,44452,44471,44480,44481,44484,44488,44496,44497,44499,44508,44512,44516,44536,44537,44540,44543,44544,44545,44552,44553,44555,44557,44564,44592,44593,44596,44599,44600,44602,44608,44609,44611,44613,44614,44618,44620,44621,44622,44624,44628,44630,44636,44637,44639,44640,44641,44645,44648,44649,44652,44656,44664,53101,53102,53103,53106,53107,53109,53110,53111,53113,53114,53115,53116,53117,53118,53119,53121,53122,53123,53124,53126,53127,53128,53129,53130,53131,53133,null,null,null,null,null,null,53134,53135,53136,53137,53138,53139,53140,53141,53142,53143,53144,53145,53146,53147,53148,53149,53150,53151,53152,53154,53155,53156,53157,53158,53159,53161,null,null,null,null,null,null,53162,53163,53164,53165,53166,53167,53169,53170,53171,53172,53173,53174,53175,53176,53177,53178,53179,53180,53181,53182,53183,53184,53185,53186,53187,53189,53190,53191,53192,53193,53194,53195,44665,44667,44668,44669,44676,44677,44684,44732,44733,44734,44736,44740,44748,44749,44751,44752,44753,44760,44761,44764,44776,44779,44781,44788,44792,44796,44807,44808,44813,44816,44844,44845,44848,44850,44852,44860,44861,44863,44865,44866,44867,44872,44873,44880,44892,44893,44900,44901,44921,44928,44932,44936,44944,44945,44949,44956,44984,44985,44988,44992,44999,45e3,45001,45003,45005,45006,45012,45020,45032,45033,45040,45041,45044,45048,45056,45057,45060,45068,45072,45076,45084,45085,45096,45124,45125,45128,45130,45132,45134,45139,45140,45141,45143,45145,53196,53197,53198,53199,53200,53201,53202,53203,53204,53205,53206,53207,53208,53209,53210,53211,53212,53213,53214,53215,53218,53219,53221,53222,53223,53225,null,null,null,null,null,null,53226,53227,53228,53229,53230,53231,53234,53236,53238,53239,53240,53241,53242,53243,53245,53246,53247,53249,53250,53251,53253,53254,53255,53256,53257,53258,null,null,null,null,null,null,53259,53260,53261,53262,53263,53264,53266,53267,53268,53269,53270,53271,53273,53274,53275,53276,53277,53278,53279,53280,53281,53282,53283,53284,53285,53286,53287,53288,53289,53290,53291,53292,45149,45180,45181,45184,45188,45196,45197,45199,45201,45208,45209,45210,45212,45215,45216,45217,45218,45224,45225,45227,45228,45229,45230,45231,45233,45235,45236,45237,45240,45244,45252,45253,45255,45256,45257,45264,45265,45268,45272,45280,45285,45320,45321,45323,45324,45328,45330,45331,45336,45337,45339,45340,45341,45347,45348,45349,45352,45356,45364,45365,45367,45368,45369,45376,45377,45380,45384,45392,45393,45396,45397,45400,45404,45408,45432,45433,45436,45440,45442,45448,45449,45451,45453,45458,45459,45460,45464,45468,45480,45516,45520,45524,45532,45533,53294,53295,53296,53297,53298,53299,53302,53303,53305,53306,53307,53309,53310,53311,53312,53313,53314,53315,53318,53320,53322,53323,53324,53325,53326,53327,null,null,null,null,null,null,53329,53330,53331,53333,53334,53335,53337,53338,53339,53340,53341,53342,53343,53345,53346,53347,53348,53349,53350,53351,53352,53353,53354,53355,53358,53359,null,null,null,null,null,null,53361,53362,53363,53365,53366,53367,53368,53369,53370,53371,53374,53375,53376,53378,53379,53380,53381,53382,53383,53384,53385,53386,53387,53388,53389,53390,53391,53392,53393,53394,53395,53396,45535,45544,45545,45548,45552,45561,45563,45565,45572,45573,45576,45579,45580,45588,45589,45591,45593,45600,45620,45628,45656,45660,45664,45672,45673,45684,45685,45692,45700,45701,45705,45712,45713,45716,45720,45721,45722,45728,45729,45731,45733,45734,45738,45740,45744,45748,45768,45769,45772,45776,45778,45784,45785,45787,45789,45794,45796,45797,45798,45800,45803,45804,45805,45806,45807,45811,45812,45813,45815,45816,45817,45818,45819,45823,45824,45825,45828,45832,45840,45841,45843,45844,45845,45852,45908,45909,45910,45912,45915,45916,45918,45919,45924,45925,53397,53398,53399,53400,53401,53402,53403,53404,53405,53406,53407,53408,53409,53410,53411,53414,53415,53417,53418,53419,53421,53422,53423,53424,53425,53426,null,null,null,null,null,null,53427,53430,53432,53434,53435,53436,53437,53438,53439,53442,53443,53445,53446,53447,53450,53451,53452,53453,53454,53455,53458,53462,53463,53464,53465,53466,null,null,null,null,null,null,53467,53470,53471,53473,53474,53475,53477,53478,53479,53480,53481,53482,53483,53486,53490,53491,53492,53493,53494,53495,53497,53498,53499,53500,53501,53502,53503,53504,53505,53506,53507,53508,45927,45929,45931,45934,45936,45937,45940,45944,45952,45953,45955,45956,45957,45964,45968,45972,45984,45985,45992,45996,46020,46021,46024,46027,46028,46030,46032,46036,46037,46039,46041,46043,46045,46048,46052,46056,46076,46096,46104,46108,46112,46120,46121,46123,46132,46160,46161,46164,46168,46176,46177,46179,46181,46188,46208,46216,46237,46244,46248,46252,46261,46263,46265,46272,46276,46280,46288,46293,46300,46301,46304,46307,46308,46310,46316,46317,46319,46321,46328,46356,46357,46360,46363,46364,46372,46373,46375,46376,46377,46378,46384,46385,46388,46392,53509,53510,53511,53512,53513,53514,53515,53516,53518,53519,53520,53521,53522,53523,53524,53525,53526,53527,53528,53529,53530,53531,53532,53533,53534,53535,null,null,null,null,null,null,53536,53537,53538,53539,53540,53541,53542,53543,53544,53545,53546,53547,53548,53549,53550,53551,53554,53555,53557,53558,53559,53561,53563,53564,53565,53566,null,null,null,null,null,null,53567,53570,53574,53575,53576,53577,53578,53579,53582,53583,53585,53586,53587,53589,53590,53591,53592,53593,53594,53595,53598,53600,53602,53603,53604,53605,53606,53607,53609,53610,53611,53613,46400,46401,46403,46404,46405,46411,46412,46413,46416,46420,46428,46429,46431,46432,46433,46496,46497,46500,46504,46506,46507,46512,46513,46515,46516,46517,46523,46524,46525,46528,46532,46540,46541,46543,46544,46545,46552,46572,46608,46609,46612,46616,46629,46636,46644,46664,46692,46696,46748,46749,46752,46756,46763,46764,46769,46804,46832,46836,46840,46848,46849,46853,46888,46889,46892,46895,46896,46904,46905,46907,46916,46920,46924,46932,46933,46944,46948,46952,46960,46961,46963,46965,46972,46973,46976,46980,46988,46989,46991,46992,46993,46994,46998,46999,53614,53615,53616,53617,53618,53619,53620,53621,53622,53623,53624,53625,53626,53627,53629,53630,53631,53632,53633,53634,53635,53637,53638,53639,53641,53642,null,null,null,null,null,null,53643,53644,53645,53646,53647,53648,53649,53650,53651,53652,53653,53654,53655,53656,53657,53658,53659,53660,53661,53662,53663,53666,53667,53669,53670,53671,null,null,null,null,null,null,53673,53674,53675,53676,53677,53678,53679,53682,53684,53686,53687,53688,53689,53691,53693,53694,53695,53697,53698,53699,53700,53701,53702,53703,53704,53705,53706,53707,53708,53709,53710,53711,47e3,47001,47004,47008,47016,47017,47019,47020,47021,47028,47029,47032,47047,47049,47084,47085,47088,47092,47100,47101,47103,47104,47105,47111,47112,47113,47116,47120,47128,47129,47131,47133,47140,47141,47144,47148,47156,47157,47159,47160,47161,47168,47172,47185,47187,47196,47197,47200,47204,47212,47213,47215,47217,47224,47228,47245,47272,47280,47284,47288,47296,47297,47299,47301,47308,47312,47316,47325,47327,47329,47336,47337,47340,47344,47352,47353,47355,47357,47364,47384,47392,47420,47421,47424,47428,47436,47439,47441,47448,47449,47452,47456,47464,47465,53712,53713,53714,53715,53716,53717,53718,53719,53721,53722,53723,53724,53725,53726,53727,53728,53729,53730,53731,53732,53733,53734,53735,53736,53737,53738,null,null,null,null,null,null,53739,53740,53741,53742,53743,53744,53745,53746,53747,53749,53750,53751,53753,53754,53755,53756,53757,53758,53759,53760,53761,53762,53763,53764,53765,53766,null,null,null,null,null,null,53768,53770,53771,53772,53773,53774,53775,53777,53778,53779,53780,53781,53782,53783,53784,53785,53786,53787,53788,53789,53790,53791,53792,53793,53794,53795,53796,53797,53798,53799,53800,53801,47467,47469,47476,47477,47480,47484,47492,47493,47495,47497,47498,47501,47502,47532,47533,47536,47540,47548,47549,47551,47553,47560,47561,47564,47566,47567,47568,47569,47570,47576,47577,47579,47581,47582,47585,47587,47588,47589,47592,47596,47604,47605,47607,47608,47609,47610,47616,47617,47624,47637,47672,47673,47676,47680,47682,47688,47689,47691,47693,47694,47699,47700,47701,47704,47708,47716,47717,47719,47720,47721,47728,47729,47732,47736,47747,47748,47749,47751,47756,47784,47785,47787,47788,47792,47794,47800,47801,47803,47805,47812,47816,47832,47833,47868,53802,53803,53806,53807,53809,53810,53811,53813,53814,53815,53816,53817,53818,53819,53822,53824,53826,53827,53828,53829,53830,53831,53833,53834,53835,53836,null,null,null,null,null,null,53837,53838,53839,53840,53841,53842,53843,53844,53845,53846,53847,53848,53849,53850,53851,53853,53854,53855,53856,53857,53858,53859,53861,53862,53863,53864,null,null,null,null,null,null,53865,53866,53867,53868,53869,53870,53871,53872,53873,53874,53875,53876,53877,53878,53879,53880,53881,53882,53883,53884,53885,53886,53887,53890,53891,53893,53894,53895,53897,53898,53899,53900,47872,47876,47885,47887,47889,47896,47900,47904,47913,47915,47924,47925,47926,47928,47931,47932,47933,47934,47940,47941,47943,47945,47949,47951,47952,47956,47960,47969,47971,47980,48008,48012,48016,48036,48040,48044,48052,48055,48064,48068,48072,48080,48083,48120,48121,48124,48127,48128,48130,48136,48137,48139,48140,48141,48143,48145,48148,48149,48150,48151,48152,48155,48156,48157,48158,48159,48164,48165,48167,48169,48173,48176,48177,48180,48184,48192,48193,48195,48196,48197,48201,48204,48205,48208,48221,48260,48261,48264,48267,48268,48270,48276,48277,48279,53901,53902,53903,53906,53907,53908,53910,53911,53912,53913,53914,53915,53917,53918,53919,53921,53922,53923,53925,53926,53927,53928,53929,53930,53931,53933,null,null,null,null,null,null,53934,53935,53936,53938,53939,53940,53941,53942,53943,53946,53947,53949,53950,53953,53955,53956,53957,53958,53959,53962,53964,53965,53966,53967,53968,53969,null,null,null,null,null,null,53970,53971,53973,53974,53975,53977,53978,53979,53981,53982,53983,53984,53985,53986,53987,53990,53991,53992,53993,53994,53995,53996,53997,53998,53999,54002,54003,54005,54006,54007,54009,54010,48281,48282,48288,48289,48292,48295,48296,48304,48305,48307,48308,48309,48316,48317,48320,48324,48333,48335,48336,48337,48341,48344,48348,48372,48373,48374,48376,48380,48388,48389,48391,48393,48400,48404,48420,48428,48448,48456,48457,48460,48464,48472,48473,48484,48488,48512,48513,48516,48519,48520,48521,48522,48528,48529,48531,48533,48537,48538,48540,48548,48560,48568,48596,48597,48600,48604,48617,48624,48628,48632,48640,48643,48645,48652,48653,48656,48660,48668,48669,48671,48708,48709,48712,48716,48718,48724,48725,48727,48729,48730,48731,48736,48737,48740,54011,54012,54013,54014,54015,54018,54020,54022,54023,54024,54025,54026,54027,54031,54033,54034,54035,54037,54039,54040,54041,54042,54043,54046,54050,54051,null,null,null,null,null,null,54052,54054,54055,54058,54059,54061,54062,54063,54065,54066,54067,54068,54069,54070,54071,54074,54078,54079,54080,54081,54082,54083,54086,54087,54088,54089,null,null,null,null,null,null,54090,54091,54092,54093,54094,54095,54096,54097,54098,54099,54100,54101,54102,54103,54104,54105,54106,54107,54108,54109,54110,54111,54112,54113,54114,54115,54116,54117,54118,54119,54120,54121,48744,48746,48752,48753,48755,48756,48757,48763,48764,48765,48768,48772,48780,48781,48783,48784,48785,48792,48793,48808,48848,48849,48852,48855,48856,48864,48867,48868,48869,48876,48897,48904,48905,48920,48921,48923,48924,48925,48960,48961,48964,48968,48976,48977,48981,49044,49072,49093,49100,49101,49104,49108,49116,49119,49121,49212,49233,49240,49244,49248,49256,49257,49296,49297,49300,49304,49312,49313,49315,49317,49324,49325,49327,49328,49331,49332,49333,49334,49340,49341,49343,49344,49345,49349,49352,49353,49356,49360,49368,49369,49371,49372,49373,49380,54122,54123,54124,54125,54126,54127,54128,54129,54130,54131,54132,54133,54134,54135,54136,54137,54138,54139,54142,54143,54145,54146,54147,54149,54150,54151,null,null,null,null,null,null,54152,54153,54154,54155,54158,54162,54163,54164,54165,54166,54167,54170,54171,54173,54174,54175,54177,54178,54179,54180,54181,54182,54183,54186,54188,54190,null,null,null,null,null,null,54191,54192,54193,54194,54195,54197,54198,54199,54201,54202,54203,54205,54206,54207,54208,54209,54210,54211,54214,54215,54218,54219,54220,54221,54222,54223,54225,54226,54227,54228,54229,54230,49381,49384,49388,49396,49397,49399,49401,49408,49412,49416,49424,49429,49436,49437,49438,49439,49440,49443,49444,49446,49447,49452,49453,49455,49456,49457,49462,49464,49465,49468,49472,49480,49481,49483,49484,49485,49492,49493,49496,49500,49508,49509,49511,49512,49513,49520,49524,49528,49541,49548,49549,49550,49552,49556,49558,49564,49565,49567,49569,49573,49576,49577,49580,49584,49597,49604,49608,49612,49620,49623,49624,49632,49636,49640,49648,49649,49651,49660,49661,49664,49668,49676,49677,49679,49681,49688,49689,49692,49695,49696,49704,49705,49707,49709,54231,54233,54234,54235,54236,54237,54238,54239,54240,54242,54244,54245,54246,54247,54248,54249,54250,54251,54254,54255,54257,54258,54259,54261,54262,54263,null,null,null,null,null,null,54264,54265,54266,54267,54270,54272,54274,54275,54276,54277,54278,54279,54281,54282,54283,54284,54285,54286,54287,54288,54289,54290,54291,54292,54293,54294,null,null,null,null,null,null,54295,54296,54297,54298,54299,54300,54302,54303,54304,54305,54306,54307,54308,54309,54310,54311,54312,54313,54314,54315,54316,54317,54318,54319,54320,54321,54322,54323,54324,54325,54326,54327,49711,49713,49714,49716,49736,49744,49745,49748,49752,49760,49765,49772,49773,49776,49780,49788,49789,49791,49793,49800,49801,49808,49816,49819,49821,49828,49829,49832,49836,49837,49844,49845,49847,49849,49884,49885,49888,49891,49892,49899,49900,49901,49903,49905,49910,49912,49913,49915,49916,49920,49928,49929,49932,49933,49939,49940,49941,49944,49948,49956,49957,49960,49961,49989,50024,50025,50028,50032,50034,50040,50041,50044,50045,50052,50056,50060,50112,50136,50137,50140,50143,50144,50146,50152,50153,50157,50164,50165,50168,50184,50192,50212,50220,50224,54328,54329,54330,54331,54332,54333,54334,54335,54337,54338,54339,54341,54342,54343,54344,54345,54346,54347,54348,54349,54350,54351,54352,54353,54354,54355,null,null,null,null,null,null,54356,54357,54358,54359,54360,54361,54362,54363,54365,54366,54367,54369,54370,54371,54373,54374,54375,54376,54377,54378,54379,54380,54382,54384,54385,54386,null,null,null,null,null,null,54387,54388,54389,54390,54391,54394,54395,54397,54398,54401,54403,54404,54405,54406,54407,54410,54412,54414,54415,54416,54417,54418,54419,54421,54422,54423,54424,54425,54426,54427,54428,54429,50228,50236,50237,50248,50276,50277,50280,50284,50292,50293,50297,50304,50324,50332,50360,50364,50409,50416,50417,50420,50424,50426,50431,50432,50433,50444,50448,50452,50460,50472,50473,50476,50480,50488,50489,50491,50493,50500,50501,50504,50505,50506,50508,50509,50510,50515,50516,50517,50519,50520,50521,50525,50526,50528,50529,50532,50536,50544,50545,50547,50548,50549,50556,50557,50560,50564,50567,50572,50573,50575,50577,50581,50583,50584,50588,50592,50601,50612,50613,50616,50617,50619,50620,50621,50622,50628,50629,50630,50631,50632,50633,50634,50636,50638,54430,54431,54432,54433,54434,54435,54436,54437,54438,54439,54440,54442,54443,54444,54445,54446,54447,54448,54449,54450,54451,54452,54453,54454,54455,54456,null,null,null,null,null,null,54457,54458,54459,54460,54461,54462,54463,54464,54465,54466,54467,54468,54469,54470,54471,54472,54473,54474,54475,54477,54478,54479,54481,54482,54483,54485,null,null,null,null,null,null,54486,54487,54488,54489,54490,54491,54493,54494,54496,54497,54498,54499,54500,54501,54502,54503,54505,54506,54507,54509,54510,54511,54513,54514,54515,54516,54517,54518,54519,54521,54522,54524,50640,50641,50644,50648,50656,50657,50659,50661,50668,50669,50670,50672,50676,50678,50679,50684,50685,50686,50687,50688,50689,50693,50694,50695,50696,50700,50704,50712,50713,50715,50716,50724,50725,50728,50732,50733,50734,50736,50739,50740,50741,50743,50745,50747,50752,50753,50756,50760,50768,50769,50771,50772,50773,50780,50781,50784,50796,50799,50801,50808,50809,50812,50816,50824,50825,50827,50829,50836,50837,50840,50844,50852,50853,50855,50857,50864,50865,50868,50872,50873,50874,50880,50881,50883,50885,50892,50893,50896,50900,50908,50909,50912,50913,50920,54526,54527,54528,54529,54530,54531,54533,54534,54535,54537,54538,54539,54541,54542,54543,54544,54545,54546,54547,54550,54552,54553,54554,54555,54556,54557,null,null,null,null,null,null,54558,54559,54560,54561,54562,54563,54564,54565,54566,54567,54568,54569,54570,54571,54572,54573,54574,54575,54576,54577,54578,54579,54580,54581,54582,54583,null,null,null,null,null,null,54584,54585,54586,54587,54590,54591,54593,54594,54595,54597,54598,54599,54600,54601,54602,54603,54606,54608,54610,54611,54612,54613,54614,54615,54618,54619,54621,54622,54623,54625,54626,54627,50921,50924,50928,50936,50937,50941,50948,50949,50952,50956,50964,50965,50967,50969,50976,50977,50980,50984,50992,50993,50995,50997,50999,51004,51005,51008,51012,51018,51020,51021,51023,51025,51026,51027,51028,51029,51030,51031,51032,51036,51040,51048,51051,51060,51061,51064,51068,51069,51070,51075,51076,51077,51079,51080,51081,51082,51086,51088,51089,51092,51094,51095,51096,51098,51104,51105,51107,51108,51109,51110,51116,51117,51120,51124,51132,51133,51135,51136,51137,51144,51145,51148,51150,51152,51160,51165,51172,51176,51180,51200,51201,51204,51208,51210,54628,54630,54631,54634,54636,54638,54639,54640,54641,54642,54643,54646,54647,54649,54650,54651,54653,54654,54655,54656,54657,54658,54659,54662,54666,54667,null,null,null,null,null,null,54668,54669,54670,54671,54673,54674,54675,54676,54677,54678,54679,54680,54681,54682,54683,54684,54685,54686,54687,54688,54689,54690,54691,54692,54694,54695,null,null,null,null,null,null,54696,54697,54698,54699,54700,54701,54702,54703,54704,54705,54706,54707,54708,54709,54710,54711,54712,54713,54714,54715,54716,54717,54718,54719,54720,54721,54722,54723,54724,54725,54726,54727,51216,51217,51219,51221,51222,51228,51229,51232,51236,51244,51245,51247,51249,51256,51260,51264,51272,51273,51276,51277,51284,51312,51313,51316,51320,51322,51328,51329,51331,51333,51334,51335,51339,51340,51341,51348,51357,51359,51361,51368,51388,51389,51396,51400,51404,51412,51413,51415,51417,51424,51425,51428,51445,51452,51453,51456,51460,51461,51462,51468,51469,51471,51473,51480,51500,51508,51536,51537,51540,51544,51552,51553,51555,51564,51568,51572,51580,51592,51593,51596,51600,51608,51609,51611,51613,51648,51649,51652,51655,51656,51658,51664,51665,51667,54730,54731,54733,54734,54735,54737,54739,54740,54741,54742,54743,54746,54748,54750,54751,54752,54753,54754,54755,54758,54759,54761,54762,54763,54765,54766,null,null,null,null,null,null,54767,54768,54769,54770,54771,54774,54776,54778,54779,54780,54781,54782,54783,54786,54787,54789,54790,54791,54793,54794,54795,54796,54797,54798,54799,54802,null,null,null,null,null,null,54806,54807,54808,54809,54810,54811,54813,54814,54815,54817,54818,54819,54821,54822,54823,54824,54825,54826,54827,54828,54830,54831,54832,54833,54834,54835,54836,54837,54838,54839,54842,54843,51669,51670,51673,51674,51676,51677,51680,51682,51684,51687,51692,51693,51695,51696,51697,51704,51705,51708,51712,51720,51721,51723,51724,51725,51732,51736,51753,51788,51789,51792,51796,51804,51805,51807,51808,51809,51816,51837,51844,51864,51900,51901,51904,51908,51916,51917,51919,51921,51923,51928,51929,51936,51948,51956,51976,51984,51988,51992,52e3,52001,52033,52040,52041,52044,52048,52056,52057,52061,52068,52088,52089,52124,52152,52180,52196,52199,52201,52236,52237,52240,52244,52252,52253,52257,52258,52263,52264,52265,52268,52270,52272,52280,52281,52283,54845,54846,54847,54849,54850,54851,54852,54854,54855,54858,54860,54862,54863,54864,54866,54867,54870,54871,54873,54874,54875,54877,54878,54879,54880,54881,null,null,null,null,null,null,54882,54883,54884,54885,54886,54888,54890,54891,54892,54893,54894,54895,54898,54899,54901,54902,54903,54904,54905,54906,54907,54908,54909,54910,54911,54912,null,null,null,null,null,null,54913,54914,54916,54918,54919,54920,54921,54922,54923,54926,54927,54929,54930,54931,54933,54934,54935,54936,54937,54938,54939,54940,54942,54944,54946,54947,54948,54949,54950,54951,54953,54954,52284,52285,52286,52292,52293,52296,52300,52308,52309,52311,52312,52313,52320,52324,52326,52328,52336,52341,52376,52377,52380,52384,52392,52393,52395,52396,52397,52404,52405,52408,52412,52420,52421,52423,52425,52432,52436,52452,52460,52464,52481,52488,52489,52492,52496,52504,52505,52507,52509,52516,52520,52524,52537,52572,52576,52580,52588,52589,52591,52593,52600,52616,52628,52629,52632,52636,52644,52645,52647,52649,52656,52676,52684,52688,52712,52716,52720,52728,52729,52731,52733,52740,52744,52748,52756,52761,52768,52769,52772,52776,52784,52785,52787,52789,54955,54957,54958,54959,54961,54962,54963,54964,54965,54966,54967,54968,54970,54972,54973,54974,54975,54976,54977,54978,54979,54982,54983,54985,54986,54987,null,null,null,null,null,null,54989,54990,54991,54992,54994,54995,54997,54998,55e3,55002,55003,55004,55005,55006,55007,55009,55010,55011,55013,55014,55015,55017,55018,55019,55020,55021,null,null,null,null,null,null,55022,55023,55025,55026,55027,55028,55030,55031,55032,55033,55034,55035,55038,55039,55041,55042,55043,55045,55046,55047,55048,55049,55050,55051,55052,55053,55054,55055,55056,55058,55059,55060,52824,52825,52828,52831,52832,52833,52840,52841,52843,52845,52852,52853,52856,52860,52868,52869,52871,52873,52880,52881,52884,52888,52896,52897,52899,52900,52901,52908,52909,52929,52964,52965,52968,52971,52972,52980,52981,52983,52984,52985,52992,52993,52996,53e3,53008,53009,53011,53013,53020,53024,53028,53036,53037,53039,53040,53041,53048,53076,53077,53080,53084,53092,53093,53095,53097,53104,53105,53108,53112,53120,53125,53132,53153,53160,53168,53188,53216,53217,53220,53224,53232,53233,53235,53237,53244,53248,53252,53265,53272,53293,53300,53301,53304,53308,55061,55062,55063,55066,55067,55069,55070,55071,55073,55074,55075,55076,55077,55078,55079,55082,55084,55086,55087,55088,55089,55090,55091,55094,55095,55097,null,null,null,null,null,null,55098,55099,55101,55102,55103,55104,55105,55106,55107,55109,55110,55112,55114,55115,55116,55117,55118,55119,55122,55123,55125,55130,55131,55132,55133,55134,null,null,null,null,null,null,55135,55138,55140,55142,55143,55144,55146,55147,55149,55150,55151,55153,55154,55155,55157,55158,55159,55160,55161,55162,55163,55166,55167,55168,55170,55171,55172,55173,55174,55175,55178,55179,53316,53317,53319,53321,53328,53332,53336,53344,53356,53357,53360,53364,53372,53373,53377,53412,53413,53416,53420,53428,53429,53431,53433,53440,53441,53444,53448,53449,53456,53457,53459,53460,53461,53468,53469,53472,53476,53484,53485,53487,53488,53489,53496,53517,53552,53553,53556,53560,53562,53568,53569,53571,53572,53573,53580,53581,53584,53588,53596,53597,53599,53601,53608,53612,53628,53636,53640,53664,53665,53668,53672,53680,53681,53683,53685,53690,53692,53696,53720,53748,53752,53767,53769,53776,53804,53805,53808,53812,53820,53821,53823,53825,53832,53852,55181,55182,55183,55185,55186,55187,55188,55189,55190,55191,55194,55196,55198,55199,55200,55201,55202,55203,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,53860,53888,53889,53892,53896,53904,53905,53909,53916,53920,53924,53932,53937,53944,53945,53948,53951,53952,53954,53960,53961,53963,53972,53976,53980,53988,53989,54e3,54001,54004,54008,54016,54017,54019,54021,54028,54029,54030,54032,54036,54038,54044,54045,54047,54048,54049,54053,54056,54057,54060,54064,54072,54073,54075,54076,54077,54084,54085,54140,54141,54144,54148,54156,54157,54159,54160,54161,54168,54169,54172,54176,54184,54185,54187,54189,54196,54200,54204,54212,54213,54216,54217,54224,54232,54241,54243,54252,54253,54256,54260,54268,54269,54271,54273,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,54280,54301,54336,54340,54364,54368,54372,54381,54383,54392,54393,54396,54399,54400,54402,54408,54409,54411,54413,54420,54441,54476,54480,54484,54492,54495,54504,54508,54512,54520,54523,54525,54532,54536,54540,54548,54549,54551,54588,54589,54592,54596,54604,54605,54607,54609,54616,54617,54620,54624,54629,54632,54633,54635,54637,54644,54645,54648,54652,54660,54661,54663,54664,54665,54672,54693,54728,54729,54732,54736,54738,54744,54745,54747,54749,54756,54757,54760,54764,54772,54773,54775,54777,54784,54785,54788,54792,54800,54801,54803,54804,54805,54812,54816,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,54820,54829,54840,54841,54844,54848,54853,54856,54857,54859,54861,54865,54868,54869,54872,54876,54887,54889,54896,54897,54900,54915,54917,54924,54925,54928,54932,54941,54943,54945,54952,54956,54960,54969,54971,54980,54981,54984,54988,54993,54996,54999,55001,55008,55012,55016,55024,55029,55036,55037,55040,55044,55057,55064,55065,55068,55072,55080,55081,55083,55085,55092,55093,55096,55100,55108,55111,55113,55120,55121,55124,55126,55127,55128,55129,55136,55137,55139,55141,55145,55148,55152,55156,55164,55165,55169,55176,55177,55180,55184,55192,55193,55195,55197,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,20285,20339,20551,20729,21152,21487,21621,21733,22025,23233,23478,26247,26550,26551,26607,27468,29634,30146,31292,33499,33540,34903,34952,35382,36040,36303,36603,36838,39381,21051,21364,21508,24682,24932,27580,29647,33050,35258,35282,38307,20355,21002,22718,22904,23014,24178,24185,25031,25536,26438,26604,26751,28567,30286,30475,30965,31240,31487,31777,32925,33390,33393,35563,38291,20075,21917,26359,28212,30883,31469,33883,35088,34638,38824,21208,22350,22570,23884,24863,25022,25121,25954,26577,27204,28187,29976,30131,30435,30640,32058,37039,37969,37970,40853,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,21283,23724,30002,32987,37440,38296,21083,22536,23004,23713,23831,24247,24378,24394,24951,27743,30074,30086,31968,32115,32177,32652,33108,33313,34193,35137,35611,37628,38477,40007,20171,20215,20491,20977,22607,24887,24894,24936,25913,27114,28433,30117,30342,30422,31623,33445,33995,63744,37799,38283,21888,23458,22353,63745,31923,32697,37301,20520,21435,23621,24040,25298,25454,25818,25831,28192,28844,31067,36317,36382,63746,36989,37445,37624,20094,20214,20581,24062,24314,24838,26967,33137,34388,36423,37749,39467,20062,20625,26480,26688,20745,21133,21138,27298,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,30652,37392,40660,21163,24623,36850,20552,25001,25581,25802,26684,27268,28608,33160,35233,38548,22533,29309,29356,29956,32121,32365,32937,35211,35700,36963,40273,25225,27770,28500,32080,32570,35363,20860,24906,31645,35609,37463,37772,20140,20435,20510,20670,20742,21185,21197,21375,22384,22659,24218,24465,24950,25004,25806,25964,26223,26299,26356,26775,28039,28805,28913,29855,29861,29898,30169,30828,30956,31455,31478,32069,32147,32789,32831,33051,33686,35686,36629,36885,37857,38915,38968,39514,39912,20418,21843,22586,22865,23395,23622,24760,25106,26690,26800,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,26856,28330,30028,30328,30926,31293,31995,32363,32380,35336,35489,35903,38542,40388,21476,21481,21578,21617,22266,22993,23396,23611,24235,25335,25911,25925,25970,26272,26543,27073,27837,30204,30352,30590,31295,32660,32771,32929,33167,33510,33533,33776,34241,34865,34996,35493,63747,36764,37678,38599,39015,39640,40723,21741,26011,26354,26767,31296,35895,40288,22256,22372,23825,26118,26801,26829,28414,29736,34974,39908,27752,63748,39592,20379,20844,20849,21151,23380,24037,24656,24685,25329,25511,25915,29657,31354,34467,36002,38799,20018,23521,25096,26524,29916,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,31185,33747,35463,35506,36328,36942,37707,38982,24275,27112,34303,37101,63749,20896,23448,23532,24931,26874,27454,28748,29743,29912,31649,32592,33733,35264,36011,38364,39208,21038,24669,25324,36866,20362,20809,21281,22745,24291,26336,27960,28826,29378,29654,31568,33009,37979,21350,25499,32619,20054,20608,22602,22750,24618,24871,25296,27088,39745,23439,32024,32945,36703,20132,20689,21676,21932,23308,23968,24039,25898,25934,26657,27211,29409,30350,30703,32094,32761,33184,34126,34527,36611,36686,37066,39171,39509,39851,19992,20037,20061,20167,20465,20855,21246,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,21312,21475,21477,21646,22036,22389,22434,23495,23943,24272,25084,25304,25937,26552,26601,27083,27472,27590,27628,27714,28317,28792,29399,29590,29699,30655,30697,31350,32127,32777,33276,33285,33290,33503,34914,35635,36092,36544,36881,37041,37476,37558,39378,39493,40169,40407,40860,22283,23616,33738,38816,38827,40628,21531,31384,32676,35033,36557,37089,22528,23624,25496,31391,23470,24339,31353,31406,33422,36524,20518,21048,21240,21367,22280,25331,25458,27402,28099,30519,21413,29527,34152,36470,38357,26426,27331,28528,35437,36556,39243,63750,26231,27512,36020,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,39740,63751,21483,22317,22862,25542,27131,29674,30789,31418,31429,31998,33909,35215,36211,36917,38312,21243,22343,30023,31584,33740,37406,63752,27224,20811,21067,21127,25119,26840,26997,38553,20677,21156,21220,25027,26020,26681,27135,29822,31563,33465,33771,35250,35641,36817,39241,63753,20170,22935,25810,26129,27278,29748,31105,31165,33449,34942,34943,35167,63754,37670,20235,21450,24613,25201,27762,32026,32102,20120,20834,30684,32943,20225,20238,20854,20864,21980,22120,22331,22522,22524,22804,22855,22931,23492,23696,23822,24049,24190,24524,25216,26071,26083,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,26398,26399,26462,26827,26820,27231,27450,27683,27773,27778,28103,29592,29734,29738,29826,29859,30072,30079,30849,30959,31041,31047,31048,31098,31637,32e3,32186,32648,32774,32813,32908,35352,35663,35912,36215,37665,37668,39138,39249,39438,39439,39525,40594,32202,20342,21513,25326,26708,37329,21931,20794,63755,63756,23068,25062,63757,25295,25343,63758,63759,63760,63761,63762,63763,37027,63764,63765,63766,63767,63768,35582,63769,63770,63771,63772,26262,63773,29014,63774,63775,38627,63776,25423,25466,21335,63777,26511,26976,28275,63778,30007,63779,63780,63781,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,32013,63782,63783,34930,22218,23064,63784,63785,63786,63787,63788,20035,63789,20839,22856,26608,32784,63790,22899,24180,25754,31178,24565,24684,25288,25467,23527,23511,21162,63791,22900,24361,24594,63792,63793,63794,29785,63795,63796,63797,63798,63799,63800,39377,63801,63802,63803,63804,63805,63806,63807,63808,63809,63810,63811,28611,63812,63813,33215,36786,24817,63814,63815,33126,63816,63817,23615,63818,63819,63820,63821,63822,63823,63824,63825,23273,35365,26491,32016,63826,63827,63828,63829,63830,63831,33021,63832,63833,23612,27877,21311,28346,22810,33590,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,20025,20150,20294,21934,22296,22727,24406,26039,26086,27264,27573,28237,30701,31471,31774,32222,34507,34962,37170,37723,25787,28606,29562,30136,36948,21846,22349,25018,25812,26311,28129,28251,28525,28601,30192,32835,33213,34113,35203,35527,35674,37663,27795,30035,31572,36367,36957,21776,22530,22616,24162,25095,25758,26848,30070,31958,34739,40680,20195,22408,22382,22823,23565,23729,24118,24453,25140,25825,29619,33274,34955,36024,38538,40667,23429,24503,24755,20498,20992,21040,22294,22581,22615,23566,23648,23798,23947,24230,24466,24764,25361,25481,25623,26691,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,26873,27330,28120,28193,28372,28644,29182,30428,30585,31153,31291,33796,35241,36077,36339,36424,36867,36884,36947,37117,37709,38518,38876,27602,28678,29272,29346,29544,30563,31167,31716,32411,35712,22697,24775,25958,26109,26302,27788,28958,29129,35930,38931,20077,31361,20189,20908,20941,21205,21516,24999,26481,26704,26847,27934,28540,30140,30643,31461,33012,33891,37509,20828,26007,26460,26515,30168,31431,33651,63834,35910,36887,38957,23663,33216,33434,36929,36975,37389,24471,23965,27225,29128,30331,31561,34276,35588,37159,39472,21895,25078,63835,30313,32645,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,34367,34746,35064,37007,63836,27931,28889,29662,32097,33853,63837,37226,39409,63838,20098,21365,27396,27410,28734,29211,34349,40478,21068,36771,23888,25829,25900,27414,28651,31811,32412,34253,35172,35261,25289,33240,34847,24266,26391,28010,29436,29701,29807,34690,37086,20358,23821,24480,33802,20919,25504,30053,20142,20486,20841,20937,26753,27153,31918,31921,31975,33391,35538,36635,37327,20406,20791,21237,21570,24300,24942,25150,26053,27354,28670,31018,34268,34851,38317,39522,39530,40599,40654,21147,26310,27511,28701,31019,36706,38722,24976,25088,25891,28451,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,29001,29833,32244,32879,34030,36646,36899,37706,20925,21015,21155,27916,28872,35010,24265,25986,27566,28610,31806,29557,20196,20278,22265,63839,23738,23994,24604,29618,31533,32666,32718,32838,36894,37428,38646,38728,38936,40801,20363,28583,31150,37300,38583,21214,63840,25736,25796,27347,28510,28696,29200,30439,32769,34310,34396,36335,36613,38706,39791,40442,40565,30860,31103,32160,33737,37636,40575,40595,35542,22751,24324,26407,28711,29903,31840,32894,20769,28712,29282,30922,36034,36058,36084,38647,20102,20698,23534,24278,26009,29134,30274,30637,32842,34044,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,36988,39719,40845,22744,23105,23650,27155,28122,28431,30267,32047,32311,34078,35128,37860,38475,21129,26066,26611,27060,27969,28316,28687,29705,29792,30041,30244,30827,35628,39006,20845,25134,38520,20374,20523,23833,28138,32184,36650,24459,24900,26647,63841,38534,21202,32907,20956,20940,26974,31260,32190,33777,38517,20442,21033,21400,21519,21774,23653,24743,26446,26792,28012,29313,29432,29702,29827,63842,30178,31852,32633,32696,33673,35023,35041,37324,37328,38626,39881,21533,28542,29136,29848,34298,36522,38563,40023,40607,26519,28107,29747,33256,38678,30764,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,31435,31520,31890,25705,29802,30194,30908,30952,39340,39764,40635,23518,24149,28448,33180,33707,37e3,19975,21325,23081,24018,24398,24930,25405,26217,26364,28415,28459,28771,30622,33836,34067,34875,36627,39237,39995,21788,25273,26411,27819,33545,35178,38778,20129,22916,24536,24537,26395,32178,32596,33426,33579,33725,36638,37017,22475,22969,23186,23504,26151,26522,26757,27599,29028,32629,36023,36067,36993,39749,33032,35978,38476,39488,40613,23391,27667,29467,30450,30431,33804,20906,35219,20813,20885,21193,26825,27796,30468,30496,32191,32236,38754,40629,28357,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,34065,20901,21517,21629,26126,26269,26919,28319,30399,30609,33559,33986,34719,37225,37528,40180,34946,20398,20882,21215,22982,24125,24917,25720,25721,26286,26576,27169,27597,27611,29279,29281,29761,30520,30683,32791,33468,33541,35584,35624,35980,26408,27792,29287,30446,30566,31302,40361,27519,27794,22818,26406,33945,21359,22675,22937,24287,25551,26164,26483,28218,29483,31447,33495,37672,21209,24043,25006,25035,25098,25287,25771,26080,26969,27494,27595,28961,29687,30045,32326,33310,33538,34154,35491,36031,38695,40289,22696,40664,20497,21006,21563,21839,25991,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,27766,32010,32011,32862,34442,38272,38639,21247,27797,29289,21619,23194,23614,23883,24396,24494,26410,26806,26979,28220,28228,30473,31859,32654,34183,35598,36855,38753,40692,23735,24758,24845,25003,25935,26107,26108,27665,27887,29599,29641,32225,38292,23494,34588,35600,21085,21338,25293,25615,25778,26420,27192,27850,29632,29854,31636,31893,32283,33162,33334,34180,36843,38649,39361,20276,21322,21453,21467,25292,25644,25856,26001,27075,27886,28504,29677,30036,30242,30436,30460,30928,30971,31020,32070,33324,34784,36820,38930,39151,21187,25300,25765,28196,28497,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,30332,36299,37297,37474,39662,39747,20515,20621,22346,22952,23592,24135,24439,25151,25918,26041,26049,26121,26507,27036,28354,30917,32033,32938,33152,33323,33459,33953,34444,35370,35607,37030,38450,40848,20493,20467,63843,22521,24472,25308,25490,26479,28227,28953,30403,32972,32986,35060,35061,35097,36064,36649,37197,38506,20271,20336,24091,26575,26658,30333,30334,39748,24161,27146,29033,29140,30058,63844,32321,34115,34281,39132,20240,31567,32624,38309,20961,24070,26805,27710,27726,27867,29359,31684,33539,27861,29754,20731,21128,22721,25816,27287,29863,30294,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,30887,34327,38370,38713,63845,21342,24321,35722,36776,36783,37002,21029,30629,40009,40712,19993,20482,20853,23643,24183,26142,26170,26564,26821,28851,29953,30149,31177,31453,36647,39200,39432,20445,22561,22577,23542,26222,27493,27921,28282,28541,29668,29995,33769,35036,35091,35676,36628,20239,20693,21264,21340,23443,24489,26381,31119,33145,33583,34068,35079,35206,36665,36667,39333,39954,26412,20086,20472,22857,23553,23791,23792,25447,26834,28925,29090,29739,32299,34028,34562,36898,37586,40179,19981,20184,20463,20613,21078,21103,21542,21648,22496,22827,23142,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,23386,23413,23500,24220,63846,25206,25975,26023,28014,28325,29238,31526,31807,32566,33104,33105,33178,33344,33433,33705,35331,36e3,36070,36091,36212,36282,37096,37340,38428,38468,39385,40167,21271,20998,21545,22132,22707,22868,22894,24575,24996,25198,26128,27774,28954,30406,31881,31966,32027,33452,36033,38640,63847,20315,24343,24447,25282,23849,26379,26842,30844,32323,40300,19989,20633,21269,21290,21329,22915,23138,24199,24754,24970,25161,25209,26e3,26503,27047,27604,27606,27607,27608,27832,63848,29749,30202,30738,30865,31189,31192,31875,32203,32737,32933,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,33086,33218,33778,34586,35048,35513,35692,36027,37145,38750,39131,40763,22188,23338,24428,25996,27315,27567,27996,28657,28693,29277,29613,36007,36051,38971,24977,27703,32856,39425,20045,20107,20123,20181,20282,20284,20351,20447,20735,21490,21496,21766,21987,22235,22763,22882,23057,23531,23546,23556,24051,24107,24473,24605,25448,26012,26031,26614,26619,26797,27515,27801,27863,28195,28681,29509,30722,31038,31040,31072,31169,31721,32023,32114,32902,33293,33678,34001,34503,35039,35408,35422,35613,36060,36198,36781,37034,39164,39391,40605,21066,63849,26388,63850,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,20632,21034,23665,25955,27733,29642,29987,30109,31639,33948,37240,38704,20087,25746,27578,29022,34217,19977,63851,26441,26862,28183,33439,34072,34923,25591,28545,37394,39087,19978,20663,20687,20767,21830,21930,22039,23360,23577,23776,24120,24202,24224,24258,24819,26705,27233,28248,29245,29248,29376,30456,31077,31665,32724,35059,35316,35443,35937,36062,38684,22622,29885,36093,21959,63852,31329,32034,33394,29298,29983,29989,63853,31513,22661,22779,23996,24207,24246,24464,24661,25234,25471,25933,26257,26329,26360,26646,26866,29312,29790,31598,32110,32214,32626,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,32997,33298,34223,35199,35475,36893,37604,40653,40736,22805,22893,24109,24796,26132,26227,26512,27728,28101,28511,30707,30889,33990,37323,37675,20185,20682,20808,21892,23307,23459,25159,25982,26059,28210,29053,29697,29764,29831,29887,30316,31146,32218,32341,32680,33146,33203,33337,34330,34796,35445,36323,36984,37521,37925,39245,39854,21352,23633,26964,27844,27945,28203,33292,34203,35131,35373,35498,38634,40807,21089,26297,27570,32406,34814,36109,38275,38493,25885,28041,29166,63854,22478,22995,23468,24615,24826,25104,26143,26207,29481,29689,30427,30465,31596,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,32854,32882,33125,35488,37266,19990,21218,27506,27927,31237,31545,32048,63855,36016,21484,22063,22609,23477,23567,23569,24034,25152,25475,25620,26157,26803,27836,28040,28335,28703,28836,29138,29990,30095,30094,30233,31505,31712,31787,32032,32057,34092,34157,34311,35380,36877,36961,37045,37559,38902,39479,20439,23660,26463,28049,31903,32396,35606,36118,36895,23403,24061,25613,33984,36956,39137,29575,23435,24730,26494,28126,35359,35494,36865,38924,21047,63856,28753,30862,37782,34928,37335,20462,21463,22013,22234,22402,22781,23234,23432,23723,23744,24101,24833,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,25101,25163,25480,25628,25910,25976,27193,27530,27700,27929,28465,29159,29417,29560,29703,29874,30246,30561,31168,31319,31466,31929,32143,32172,32353,32670,33065,33585,33936,34010,34282,34966,35504,35728,36664,36930,36995,37228,37526,37561,38539,38567,38568,38614,38656,38920,39318,39635,39706,21460,22654,22809,23408,23487,28113,28506,29087,29729,29881,32901,33789,24033,24455,24490,24642,26092,26642,26991,27219,27529,27957,28147,29667,30462,30636,31565,32020,33059,33308,33600,34036,34147,35426,35524,37255,37662,38918,39348,25100,34899,36848,37477,23815,23847,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,23913,29791,33181,34664,28629,25342,32722,35126,35186,19998,20056,20711,21213,21319,25215,26119,32361,34821,38494,20365,21273,22070,22987,23204,23608,23630,23629,24066,24337,24643,26045,26159,26178,26558,26612,29468,30690,31034,32709,33940,33997,35222,35430,35433,35553,35925,35962,22516,23508,24335,24687,25325,26893,27542,28252,29060,31698,34645,35672,36606,39135,39166,20280,20353,20449,21627,23072,23480,24892,26032,26216,29180,30003,31070,32051,33102,33251,33688,34218,34254,34563,35338,36523,36763,63857,36805,22833,23460,23526,24713,23529,23563,24515,27777,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,63858,28145,28683,29978,33455,35574,20160,21313,63859,38617,27663,20126,20420,20818,21854,23077,23784,25105,29273,33469,33706,34558,34905,35357,38463,38597,39187,40201,40285,22538,23731,23997,24132,24801,24853,25569,27138,28197,37122,37716,38990,39952,40823,23433,23736,25353,26191,26696,30524,38593,38797,38996,39839,26017,35585,36555,38332,21813,23721,24022,24245,26263,30284,33780,38343,22739,25276,29390,40232,20208,22830,24591,26171,27523,31207,40230,21395,21696,22467,23830,24859,26326,28079,30861,33406,38552,38724,21380,25212,25494,28082,32266,33099,38989,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,27387,32588,40367,40474,20063,20539,20918,22812,24825,25590,26928,29242,32822,63860,37326,24369,63861,63862,32004,33509,33903,33979,34277,36493,63863,20335,63864,63865,22756,23363,24665,25562,25880,25965,26264,63866,26954,27171,27915,28673,29036,30162,30221,31155,31344,63867,32650,63868,35140,63869,35731,37312,38525,63870,39178,22276,24481,26044,28417,30208,31142,35486,39341,39770,40812,20740,25014,25233,27277,33222,20547,22576,24422,28937,35328,35578,23420,34326,20474,20796,22196,22852,25513,28153,23978,26989,20870,20104,20313,63871,63872,63873,22914,63874,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,63875,27487,27741,63876,29877,30998,63877,33287,33349,33593,36671,36701,63878,39192,63879,63880,63881,20134,63882,22495,24441,26131,63883,63884,30123,32377,35695,63885,36870,39515,22181,22567,23032,23071,23476,63886,24310,63887,63888,25424,25403,63889,26941,27783,27839,28046,28051,28149,28436,63890,28895,28982,29017,63891,29123,29141,63892,30799,30831,63893,31605,32227,63894,32303,63895,34893,36575,63896,63897,63898,37467,63899,40182,63900,63901,63902,24709,28037,63903,29105,63904,63905,38321,21421,63906,63907,63908,26579,63909,28814,28976,29744,33398,33490,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,63910,38331,39653,40573,26308,63911,29121,33865,63912,63913,22603,63914,63915,23992,24433,63916,26144,26254,27001,27054,27704,27891,28214,28481,28634,28699,28719,29008,29151,29552,63917,29787,63918,29908,30408,31310,32403,63919,63920,33521,35424,36814,63921,37704,63922,38681,63923,63924,20034,20522,63925,21e3,21473,26355,27757,28618,29450,30591,31330,33454,34269,34306,63926,35028,35427,35709,35947,63927,37555,63928,38675,38928,20116,20237,20425,20658,21320,21566,21555,21978,22626,22714,22887,23067,23524,24735,63929,25034,25942,26111,26212,26791,27738,28595,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,28879,29100,29522,31613,34568,35492,39986,40711,23627,27779,29508,29577,37434,28331,29797,30239,31337,32277,34314,20800,22725,25793,29934,29973,30320,32705,37013,38605,39252,28198,29926,31401,31402,33253,34521,34680,35355,23113,23436,23451,26785,26880,28003,29609,29715,29740,30871,32233,32747,33048,33109,33694,35916,38446,38929,26352,24448,26106,26505,27754,29579,20525,23043,27498,30702,22806,23916,24013,29477,30031,63930,63931,20709,20985,22575,22829,22934,23002,23525,63932,63933,23970,25303,25622,25747,25854,63934,26332,63935,27208,63936,29183,29796,63937,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,31368,31407,32327,32350,32768,33136,63938,34799,35201,35616,36953,63939,36992,39250,24958,27442,28020,32287,35109,36785,20433,20653,20887,21191,22471,22665,23481,24248,24898,27029,28044,28263,28342,29076,29794,29992,29996,32883,33592,33993,36362,37780,37854,63940,20110,20305,20598,20778,21448,21451,21491,23431,23507,23588,24858,24962,26100,29275,29591,29760,30402,31056,31121,31161,32006,32701,33419,34261,34398,36802,36935,37109,37354,38533,38632,38633,21206,24423,26093,26161,26671,29020,31286,37057,38922,20113,63941,27218,27550,28560,29065,32792,33464,34131,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,36939,38549,38642,38907,34074,39729,20112,29066,38596,20803,21407,21729,22291,22290,22435,23195,23236,23491,24616,24895,25588,27781,27961,28274,28304,29232,29503,29783,33489,34945,36677,36960,63942,38498,39e3,40219,26376,36234,37470,20301,20553,20702,21361,22285,22996,23041,23561,24944,26256,28205,29234,29771,32239,32963,33806,33894,34111,34655,34907,35096,35586,36949,38859,39759,20083,20369,20754,20842,63943,21807,21929,23418,23461,24188,24189,24254,24736,24799,24840,24841,25540,25912,26377,63944,26580,26586,63945,26977,26978,27833,27943,63946,28216,63947,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,28641,29494,29495,63948,29788,30001,63949,30290,63950,63951,32173,33278,33848,35029,35480,35547,35565,36400,36418,36938,36926,36986,37193,37321,37742,63952,63953,22537,63954,27603,32905,32946,63955,63956,20801,22891,23609,63957,63958,28516,29607,32996,36103,63959,37399,38287,63960,63961,63962,63963,32895,25102,28700,32104,34701,63964,22432,24681,24903,27575,35518,37504,38577,20057,21535,28139,34093,38512,38899,39150,25558,27875,37009,20957,25033,33210,40441,20381,20506,20736,23452,24847,25087,25836,26885,27589,30097,30691,32681,33380,34191,34811,34915,35516,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,35696,37291,20108,20197,20234,63965,63966,22839,23016,63967,24050,24347,24411,24609,63968,63969,63970,63971,29246,29669,63972,30064,30157,63973,31227,63974,32780,32819,32900,33505,33617,63975,63976,36029,36019,36999,63977,63978,39156,39180,63979,63980,28727,30410,32714,32716,32764,35610,20154,20161,20995,21360,63981,21693,22240,23035,23493,24341,24525,28270,63982,63983,32106,33589,63984,34451,35469,63985,38765,38775,63986,63987,19968,20314,20350,22777,26085,28322,36920,37808,39353,20219,22764,22922,23001,24641,63988,63989,31252,63990,33615,36035,20837,21316,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,63991,63992,63993,20173,21097,23381,33471,20180,21050,21672,22985,23039,23376,23383,23388,24675,24904,28363,28825,29038,29574,29943,30133,30913,32043,32773,33258,33576,34071,34249,35566,36039,38604,20316,21242,22204,26027,26152,28796,28856,29237,32189,33421,37196,38592,40306,23409,26855,27544,28538,30430,23697,26283,28507,31668,31786,34870,38620,19976,20183,21280,22580,22715,22767,22892,23559,24115,24196,24373,25484,26290,26454,27167,27299,27404,28479,29254,63994,29520,29835,31456,31911,33144,33247,33255,33674,33900,34083,34196,34255,35037,36115,37292,38263,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,38556,20877,21705,22312,23472,25165,26448,26685,26771,28221,28371,28797,32289,35009,36001,36617,40779,40782,29229,31631,35533,37658,20295,20302,20786,21632,22992,24213,25269,26485,26990,27159,27822,28186,29401,29482,30141,31672,32053,33511,33785,33879,34295,35419,36015,36487,36889,37048,38606,40799,21219,21514,23265,23490,25688,25973,28404,29380,63995,30340,31309,31515,31821,32318,32735,33659,35627,36042,36196,36321,36447,36842,36857,36969,37841,20291,20346,20659,20840,20856,21069,21098,22625,22652,22880,23560,23637,24283,24731,25136,26643,27583,27656,28593,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,29006,29728,3e4,30008,30033,30322,31564,31627,31661,31686,32399,35438,36670,36681,37439,37523,37666,37931,38651,39002,39019,39198,20999,25130,25240,27993,30308,31434,31680,32118,21344,23742,24215,28472,28857,31896,38673,39822,40670,25509,25722,34678,19969,20117,20141,20572,20597,21576,22979,23450,24128,24237,24311,24449,24773,25402,25919,25972,26060,26230,26232,26622,26984,27273,27491,27712,28096,28136,28191,28254,28702,28833,29582,29693,30010,30555,30855,31118,31243,31357,31934,32142,33351,35330,35562,35998,37165,37194,37336,37478,37580,37664,38662,38742,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,38748,38914,40718,21046,21137,21884,22564,24093,24351,24716,25552,26799,28639,31085,31532,33229,34234,35069,35576,36420,37261,38500,38555,38717,38988,40778,20430,20806,20939,21161,22066,24340,24427,25514,25805,26089,26177,26362,26361,26397,26781,26839,27133,28437,28526,29031,29157,29226,29866,30522,31062,31066,31199,31264,31381,31895,31967,32068,32368,32903,34299,34468,35412,35519,36249,36481,36896,36973,37347,38459,38613,40165,26063,31751,36275,37827,23384,23562,21330,25305,29469,20519,23447,24478,24752,24939,26837,28121,29742,31278,32066,32156,32305,33131,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,36394,36405,37758,37912,20304,22352,24038,24231,25387,32618,20027,20303,20367,20570,23005,32964,21610,21608,22014,22863,23449,24030,24282,26205,26417,26609,26666,27880,27954,28234,28557,28855,29664,30087,31820,32002,32044,32162,33311,34523,35387,35461,36208,36490,36659,36913,37198,37202,37956,39376,31481,31909,20426,20737,20934,22472,23535,23803,26201,27197,27994,28310,28652,28940,30063,31459,34850,36897,36981,38603,39423,33537,20013,20210,34886,37325,21373,27355,26987,27713,33914,22686,24974,26366,25327,28893,29969,30151,32338,33976,35657,36104,20043,21482,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,21675,22320,22336,24535,25345,25351,25711,25903,26088,26234,26525,26547,27490,27744,27802,28460,30693,30757,31049,31063,32025,32930,33026,33267,33437,33463,34584,35468,63996,36100,36286,36978,30452,31257,31287,32340,32887,21767,21972,22645,25391,25634,26185,26187,26733,27035,27524,27941,28337,29645,29800,29857,30043,30137,30433,30494,30603,31206,32265,32285,33275,34095,34967,35386,36049,36587,36784,36914,37805,38499,38515,38663,20356,21489,23018,23241,24089,26702,29894,30142,31209,31378,33187,34541,36074,36300,36845,26015,26389,63997,22519,28503,32221,36655,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,37878,38598,24501,25074,28548,19988,20376,20511,21449,21983,23919,24046,27425,27492,30923,31642,63998,36425,36554,36974,25417,25662,30528,31364,37679,38015,40810,25776,28591,29158,29864,29914,31428,31762,32386,31922,32408,35738,36106,38013,39184,39244,21049,23519,25830,26413,32046,20717,21443,22649,24920,24921,25082,26028,31449,35730,35734,20489,20513,21109,21809,23100,24288,24432,24884,25950,26124,26166,26274,27085,28356,28466,29462,30241,31379,33081,33369,33750,33980,20661,22512,23488,23528,24425,25505,30758,32181,33756,34081,37319,37365,20874,26613,31574,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,36012,20932,22971,24765,34389,20508,63999,21076,23610,24957,25114,25299,25842,26021,28364,30240,33034,36448,38495,38587,20191,21315,21912,22825,24029,25797,27849,28154,29588,31359,33307,34214,36068,36368,36983,37351,38369,38433,38854,20984,21746,21894,24505,25764,28552,32180,36639,36685,37941,20681,23574,27838,28155,29979,30651,31805,31844,35449,35522,22558,22974,24086,25463,29266,30090,30571,35548,36028,36626,24307,26228,28152,32893,33729,35531,38737,39894,64e3,21059,26367,28053,28399,32224,35558,36910,36958,39636,21021,21119,21736,24980,25220,25307,26786,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,26898,26970,27189,28818,28966,30813,30977,30990,31186,31245,32918,33400,33493,33609,34121,35970,36229,37218,37259,37294,20419,22225,29165,30679,34560,35320,23544,24534,26449,37032,21474,22618,23541,24740,24961,25696,32317,32880,34085,37507,25774,20652,23828,26368,22684,25277,25512,26894,27e3,27166,28267,30394,31179,33467,33833,35535,36264,36861,37138,37195,37276,37648,37656,37786,38619,39478,39949,19985,30044,31069,31482,31569,31689,32302,33988,36441,36468,36600,36880,26149,26943,29763,20986,26414,40668,20805,24544,27798,34802,34909,34935,24756,33205,33795,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,36101,21462,21561,22068,23094,23601,28810,32736,32858,33030,33261,36259,37257,39519,40434,20596,20164,21408,24827,28204,23652,20360,20516,21988,23769,24159,24677,26772,27835,28100,29118,30164,30196,30305,31258,31305,32199,32251,32622,33268,34473,36636,38601,39347,40786,21063,21189,39149,35242,19971,26578,28422,20405,23522,26517,27784,28024,29723,30759,37341,37756,34756,31204,31281,24555,20182,21668,21822,22702,22949,24816,25171,25302,26422,26965,33333,38464,39345,39389,20524,21331,21828,22396,64001,25176,64002,25826,26219,26589,28609,28655,29730,29752,35351,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,37944,21585,22022,22374,24392,24986,27470,28760,28845,32187,35477,22890,33067,25506,30472,32829,36010,22612,25645,27067,23445,24081,28271,64003,34153,20812,21488,22826,24608,24907,27526,27760,27888,31518,32974,33492,36294,37040,39089,64004,25799,28580,25745,25860,20814,21520,22303,35342,24927,26742,64005,30171,31570,32113,36890,22534,27084,33151,35114,36864,38969,20600,22871,22956,25237,36879,39722,24925,29305,38358,22369,23110,24052,25226,25773,25850,26487,27874,27966,29228,29750,30772,32631,33453,36315,38935,21028,22338,26495,29256,29923,36009,36774,37393,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,38442,20843,21485,25420,20329,21764,24726,25943,27803,28031,29260,29437,31255,35207,35997,24429,28558,28921,33192,24846,20415,20559,25153,29255,31687,32232,32745,36941,38829,39449,36022,22378,24179,26544,33805,35413,21536,23318,24163,24290,24330,25987,32954,34109,38281,38491,20296,21253,21261,21263,21638,21754,22275,24067,24598,25243,25265,25429,64006,27873,28006,30129,30770,32990,33071,33502,33889,33970,34957,35090,36875,37610,39165,39825,24133,26292,26333,28689,29190,64007,20469,21117,24426,24915,26451,27161,28418,29922,31080,34920,35961,39111,39108,39491,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,21697,31263,26963,35575,35914,39080,39342,24444,25259,30130,30382,34987,36991,38466,21305,24380,24517,27852,29644,30050,30091,31558,33534,39325,20047,36924,19979,20309,21414,22799,24264,26160,27827,29781,33655,34662,36032,36944,38686,39957,22737,23416,34384,35604,40372,23506,24680,24717,26097,27735,28450,28579,28698,32597,32752,38289,38290,38480,38867,21106,36676,20989,21547,21688,21859,21898,27323,28085,32216,33382,37532,38519,40569,21512,21704,30418,34532,38308,38356,38492,20130,20233,23022,23270,24055,24658,25239,26477,26689,27782,28207,32568,32923,33322,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,64008,64009,38917,20133,20565,21683,22419,22874,23401,23475,25032,26999,28023,28707,34809,35299,35442,35559,36994,39405,39608,21182,26680,20502,24184,26447,33607,34892,20139,21521,22190,29670,37141,38911,39177,39255,39321,22099,22687,34395,35377,25010,27382,29563,36562,27463,38570,39511,22869,29184,36203,38761,20436,23796,24358,25080,26203,27883,28843,29572,29625,29694,30505,30541,32067,32098,32291,33335,34898,64010,36066,37449,39023,23377,31348,34880,38913,23244,20448,21332,22846,23805,25406,28025,29433,33029,33031,33698,37583,38960,20136,20804,21009,22411,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,24418,27842,28366,28677,28752,28847,29074,29673,29801,33610,34722,34913,36872,37026,37795,39336,20846,24407,24800,24935,26291,34137,36426,37295,38795,20046,20114,21628,22741,22778,22909,23733,24359,25142,25160,26122,26215,27627,28009,28111,28246,28408,28564,28640,28649,28765,29392,29733,29786,29920,30355,31068,31946,32286,32993,33446,33899,33983,34382,34399,34676,35703,35946,37804,38912,39013,24785,25110,37239,23130,26127,28151,28222,29759,39746,24573,24794,31503,21700,24344,27742,27859,27946,28888,32005,34425,35340,40251,21270,21644,23301,27194,28779,30069,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,31117,31166,33457,33775,35441,35649,36008,38772,64011,25844,25899,30906,30907,31339,20024,21914,22864,23462,24187,24739,25563,27489,26213,26707,28185,29029,29872,32008,36996,39529,39973,27963,28369,29502,35905,38346,20976,24140,24488,24653,24822,24880,24908,26179,26180,27045,27841,28255,28361,28514,29004,29852,30343,31681,31783,33618,34647,36945,38541,40643,21295,22238,24315,24458,24674,24724,25079,26214,26371,27292,28142,28590,28784,29546,32362,33214,33588,34516,35496,36036,21123,29554,23446,27243,37892,21742,22150,23389,25928,25989,26313,26783,28045,28102,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,29243,32948,37237,39501,20399,20505,21402,21518,21564,21897,21957,24127,24460,26429,29030,29661,36869,21211,21235,22628,22734,28932,29071,29179,34224,35347,26248,34216,21927,26244,29002,33841,21321,21913,27585,24409,24509,25582,26249,28999,35569,36637,40638,20241,25658,28875,30054,34407,24676,35662,40440,20807,20982,21256,27958,33016,40657,26133,27427,28824,30165,21507,23673,32007,35350,27424,27453,27462,21560,24688,27965,32725,33288,20694,20958,21916,22123,22221,23020,23305,24076,24985,24984,25137,26206,26342,29081,29113,29114,29351,31143,31232,32690,35440,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],gb18030:[19970,19972,19973,19974,19983,19986,19991,19999,2e4,20001,20003,20006,20009,20014,20015,20017,20019,20021,20023,20028,20032,20033,20034,20036,20038,20042,20049,20053,20055,20058,20059,20066,20067,20068,20069,20071,20072,20074,20075,20076,20077,20078,20079,20082,20084,20085,20086,20087,20088,20089,20090,20091,20092,20093,20095,20096,20097,20098,20099,20100,20101,20103,20106,20112,20118,20119,20121,20124,20125,20126,20131,20138,20143,20144,20145,20148,20150,20151,20152,20153,20156,20157,20158,20168,20172,20175,20176,20178,20186,20187,20188,20192,20194,20198,20199,20201,20205,20206,20207,20209,20212,20216,20217,20218,20220,20222,20224,20226,20227,20228,20229,20230,20231,20232,20235,20236,20242,20243,20244,20245,20246,20252,20253,20257,20259,20264,20265,20268,20269,20270,20273,20275,20277,20279,20281,20283,20286,20287,20288,20289,20290,20292,20293,20295,20296,20297,20298,20299,20300,20306,20308,20310,20321,20322,20326,20328,20330,20331,20333,20334,20337,20338,20341,20343,20344,20345,20346,20349,20352,20353,20354,20357,20358,20359,20362,20364,20366,20368,20370,20371,20373,20374,20376,20377,20378,20380,20382,20383,20385,20386,20388,20395,20397,20400,20401,20402,20403,20404,20406,20407,20408,20409,20410,20411,20412,20413,20414,20416,20417,20418,20422,20423,20424,20425,20427,20428,20429,20434,20435,20436,20437,20438,20441,20443,20448,20450,20452,20453,20455,20459,20460,20464,20466,20468,20469,20470,20471,20473,20475,20476,20477,20479,20480,20481,20482,20483,20484,20485,20486,20487,20488,20489,20490,20491,20494,20496,20497,20499,20501,20502,20503,20507,20509,20510,20512,20514,20515,20516,20519,20523,20527,20528,20529,20530,20531,20532,20533,20534,20535,20536,20537,20539,20541,20543,20544,20545,20546,20548,20549,20550,20553,20554,20555,20557,20560,20561,20562,20563,20564,20566,20567,20568,20569,20571,20573,20574,20575,20576,20577,20578,20579,20580,20582,20583,20584,20585,20586,20587,20589,20590,20591,20592,20593,20594,20595,20596,20597,20600,20601,20602,20604,20605,20609,20610,20611,20612,20614,20615,20617,20618,20619,20620,20622,20623,20624,20625,20626,20627,20628,20629,20630,20631,20632,20633,20634,20635,20636,20637,20638,20639,20640,20641,20642,20644,20646,20650,20651,20653,20654,20655,20656,20657,20659,20660,20661,20662,20663,20664,20665,20668,20669,20670,20671,20672,20673,20674,20675,20676,20677,20678,20679,20680,20681,20682,20683,20684,20685,20686,20688,20689,20690,20691,20692,20693,20695,20696,20697,20699,20700,20701,20702,20703,20704,20705,20706,20707,20708,20709,20712,20713,20714,20715,20719,20720,20721,20722,20724,20726,20727,20728,20729,20730,20732,20733,20734,20735,20736,20737,20738,20739,20740,20741,20744,20745,20746,20748,20749,20750,20751,20752,20753,20755,20756,20757,20758,20759,20760,20761,20762,20763,20764,20765,20766,20767,20768,20770,20771,20772,20773,20774,20775,20776,20777,20778,20779,20780,20781,20782,20783,20784,20785,20786,20787,20788,20789,20790,20791,20792,20793,20794,20795,20796,20797,20798,20802,20807,20810,20812,20814,20815,20816,20818,20819,20823,20824,20825,20827,20829,20830,20831,20832,20833,20835,20836,20838,20839,20841,20842,20847,20850,20858,20862,20863,20867,20868,20870,20871,20874,20875,20878,20879,20880,20881,20883,20884,20888,20890,20893,20894,20895,20897,20899,20902,20903,20904,20905,20906,20909,20910,20916,20920,20921,20922,20926,20927,20929,20930,20931,20933,20936,20938,20941,20942,20944,20946,20947,20948,20949,20950,20951,20952,20953,20954,20956,20958,20959,20962,20963,20965,20966,20967,20968,20969,20970,20972,20974,20977,20978,20980,20983,20990,20996,20997,21001,21003,21004,21007,21008,21011,21012,21013,21020,21022,21023,21025,21026,21027,21029,21030,21031,21034,21036,21039,21041,21042,21044,21045,21052,21054,21060,21061,21062,21063,21064,21065,21067,21070,21071,21074,21075,21077,21079,21080,21081,21082,21083,21085,21087,21088,21090,21091,21092,21094,21096,21099,21100,21101,21102,21104,21105,21107,21108,21109,21110,21111,21112,21113,21114,21115,21116,21118,21120,21123,21124,21125,21126,21127,21129,21130,21131,21132,21133,21134,21135,21137,21138,21140,21141,21142,21143,21144,21145,21146,21148,21156,21157,21158,21159,21166,21167,21168,21172,21173,21174,21175,21176,21177,21178,21179,21180,21181,21184,21185,21186,21188,21189,21190,21192,21194,21196,21197,21198,21199,21201,21203,21204,21205,21207,21209,21210,21211,21212,21213,21214,21216,21217,21218,21219,21221,21222,21223,21224,21225,21226,21227,21228,21229,21230,21231,21233,21234,21235,21236,21237,21238,21239,21240,21243,21244,21245,21249,21250,21251,21252,21255,21257,21258,21259,21260,21262,21265,21266,21267,21268,21272,21275,21276,21278,21279,21282,21284,21285,21287,21288,21289,21291,21292,21293,21295,21296,21297,21298,21299,21300,21301,21302,21303,21304,21308,21309,21312,21314,21316,21318,21323,21324,21325,21328,21332,21336,21337,21339,21341,21349,21352,21354,21356,21357,21362,21366,21369,21371,21372,21373,21374,21376,21377,21379,21383,21384,21386,21390,21391,21392,21393,21394,21395,21396,21398,21399,21401,21403,21404,21406,21408,21409,21412,21415,21418,21419,21420,21421,21423,21424,21425,21426,21427,21428,21429,21431,21432,21433,21434,21436,21437,21438,21440,21443,21444,21445,21446,21447,21454,21455,21456,21458,21459,21461,21466,21468,21469,21470,21473,21474,21479,21492,21498,21502,21503,21504,21506,21509,21511,21515,21524,21528,21529,21530,21532,21538,21540,21541,21546,21552,21555,21558,21559,21562,21565,21567,21569,21570,21572,21573,21575,21577,21580,21581,21582,21583,21585,21594,21597,21598,21599,21600,21601,21603,21605,21607,21609,21610,21611,21612,21613,21614,21615,21616,21620,21625,21626,21630,21631,21633,21635,21637,21639,21640,21641,21642,21645,21649,21651,21655,21656,21660,21662,21663,21664,21665,21666,21669,21678,21680,21682,21685,21686,21687,21689,21690,21692,21694,21699,21701,21706,21707,21718,21720,21723,21728,21729,21730,21731,21732,21739,21740,21743,21744,21745,21748,21749,21750,21751,21752,21753,21755,21758,21760,21762,21763,21764,21765,21768,21770,21771,21772,21773,21774,21778,21779,21781,21782,21783,21784,21785,21786,21788,21789,21790,21791,21793,21797,21798,21800,21801,21803,21805,21810,21812,21813,21814,21816,21817,21818,21819,21821,21824,21826,21829,21831,21832,21835,21836,21837,21838,21839,21841,21842,21843,21844,21847,21848,21849,21850,21851,21853,21854,21855,21856,21858,21859,21864,21865,21867,21871,21872,21873,21874,21875,21876,21881,21882,21885,21887,21893,21894,21900,21901,21902,21904,21906,21907,21909,21910,21911,21914,21915,21918,21920,21921,21922,21923,21924,21925,21926,21928,21929,21930,21931,21932,21933,21934,21935,21936,21938,21940,21942,21944,21946,21948,21951,21952,21953,21954,21955,21958,21959,21960,21962,21963,21966,21967,21968,21973,21975,21976,21977,21978,21979,21982,21984,21986,21991,21993,21997,21998,22e3,22001,22004,22006,22008,22009,22010,22011,22012,22015,22018,22019,22020,22021,22022,22023,22026,22027,22029,22032,22033,22034,22035,22036,22037,22038,22039,22041,22042,22044,22045,22048,22049,22050,22053,22054,22056,22057,22058,22059,22062,22063,22064,22067,22069,22071,22072,22074,22076,22077,22078,22080,22081,22082,22083,22084,22085,22086,22087,22088,22089,22090,22091,22095,22096,22097,22098,22099,22101,22102,22106,22107,22109,22110,22111,22112,22113,22115,22117,22118,22119,22125,22126,22127,22128,22130,22131,22132,22133,22135,22136,22137,22138,22141,22142,22143,22144,22145,22146,22147,22148,22151,22152,22153,22154,22155,22156,22157,22160,22161,22162,22164,22165,22166,22167,22168,22169,22170,22171,22172,22173,22174,22175,22176,22177,22178,22180,22181,22182,22183,22184,22185,22186,22187,22188,22189,22190,22192,22193,22194,22195,22196,22197,22198,22200,22201,22202,22203,22205,22206,22207,22208,22209,22210,22211,22212,22213,22214,22215,22216,22217,22219,22220,22221,22222,22223,22224,22225,22226,22227,22229,22230,22232,22233,22236,22243,22245,22246,22247,22248,22249,22250,22252,22254,22255,22258,22259,22262,22263,22264,22267,22268,22272,22273,22274,22277,22279,22283,22284,22285,22286,22287,22288,22289,22290,22291,22292,22293,22294,22295,22296,22297,22298,22299,22301,22302,22304,22305,22306,22308,22309,22310,22311,22315,22321,22322,22324,22325,22326,22327,22328,22332,22333,22335,22337,22339,22340,22341,22342,22344,22345,22347,22354,22355,22356,22357,22358,22360,22361,22370,22371,22373,22375,22380,22382,22384,22385,22386,22388,22389,22392,22393,22394,22397,22398,22399,22400,22401,22407,22408,22409,22410,22413,22414,22415,22416,22417,22420,22421,22422,22423,22424,22425,22426,22428,22429,22430,22431,22437,22440,22442,22444,22447,22448,22449,22451,22453,22454,22455,22457,22458,22459,22460,22461,22462,22463,22464,22465,22468,22469,22470,22471,22472,22473,22474,22476,22477,22480,22481,22483,22486,22487,22491,22492,22494,22497,22498,22499,22501,22502,22503,22504,22505,22506,22507,22508,22510,22512,22513,22514,22515,22517,22518,22519,22523,22524,22526,22527,22529,22531,22532,22533,22536,22537,22538,22540,22542,22543,22544,22546,22547,22548,22550,22551,22552,22554,22555,22556,22557,22559,22562,22563,22565,22566,22567,22568,22569,22571,22572,22573,22574,22575,22577,22578,22579,22580,22582,22583,22584,22585,22586,22587,22588,22589,22590,22591,22592,22593,22594,22595,22597,22598,22599,22600,22601,22602,22603,22606,22607,22608,22610,22611,22613,22614,22615,22617,22618,22619,22620,22621,22623,22624,22625,22626,22627,22628,22630,22631,22632,22633,22634,22637,22638,22639,22640,22641,22642,22643,22644,22645,22646,22647,22648,22649,22650,22651,22652,22653,22655,22658,22660,22662,22663,22664,22666,22667,22668,22669,22670,22671,22672,22673,22676,22677,22678,22679,22680,22683,22684,22685,22688,22689,22690,22691,22692,22693,22694,22695,22698,22699,22700,22701,22702,22703,22704,22705,22706,22707,22708,22709,22710,22711,22712,22713,22714,22715,22717,22718,22719,22720,22722,22723,22724,22726,22727,22728,22729,22730,22731,22732,22733,22734,22735,22736,22738,22739,22740,22742,22743,22744,22745,22746,22747,22748,22749,22750,22751,22752,22753,22754,22755,22757,22758,22759,22760,22761,22762,22765,22767,22769,22770,22772,22773,22775,22776,22778,22779,22780,22781,22782,22783,22784,22785,22787,22789,22790,22792,22793,22794,22795,22796,22798,22800,22801,22802,22803,22807,22808,22811,22813,22814,22816,22817,22818,22819,22822,22824,22828,22832,22834,22835,22837,22838,22843,22845,22846,22847,22848,22851,22853,22854,22858,22860,22861,22864,22866,22867,22873,22875,22876,22877,22878,22879,22881,22883,22884,22886,22887,22888,22889,22890,22891,22892,22893,22894,22895,22896,22897,22898,22901,22903,22906,22907,22908,22910,22911,22912,22917,22921,22923,22924,22926,22927,22928,22929,22932,22933,22936,22938,22939,22940,22941,22943,22944,22945,22946,22950,22951,22956,22957,22960,22961,22963,22964,22965,22966,22967,22968,22970,22972,22973,22975,22976,22977,22978,22979,22980,22981,22983,22984,22985,22988,22989,22990,22991,22997,22998,23001,23003,23006,23007,23008,23009,23010,23012,23014,23015,23017,23018,23019,23021,23022,23023,23024,23025,23026,23027,23028,23029,23030,23031,23032,23034,23036,23037,23038,23040,23042,23050,23051,23053,23054,23055,23056,23058,23060,23061,23062,23063,23065,23066,23067,23069,23070,23073,23074,23076,23078,23079,23080,23082,23083,23084,23085,23086,23087,23088,23091,23093,23095,23096,23097,23098,23099,23101,23102,23103,23105,23106,23107,23108,23109,23111,23112,23115,23116,23117,23118,23119,23120,23121,23122,23123,23124,23126,23127,23128,23129,23131,23132,23133,23134,23135,23136,23137,23139,23140,23141,23142,23144,23145,23147,23148,23149,23150,23151,23152,23153,23154,23155,23160,23161,23163,23164,23165,23166,23168,23169,23170,23171,23172,23173,23174,23175,23176,23177,23178,23179,23180,23181,23182,23183,23184,23185,23187,23188,23189,23190,23191,23192,23193,23196,23197,23198,23199,23200,23201,23202,23203,23204,23205,23206,23207,23208,23209,23211,23212,23213,23214,23215,23216,23217,23220,23222,23223,23225,23226,23227,23228,23229,23231,23232,23235,23236,23237,23238,23239,23240,23242,23243,23245,23246,23247,23248,23249,23251,23253,23255,23257,23258,23259,23261,23262,23263,23266,23268,23269,23271,23272,23274,23276,23277,23278,23279,23280,23282,23283,23284,23285,23286,23287,23288,23289,23290,23291,23292,23293,23294,23295,23296,23297,23298,23299,23300,23301,23302,23303,23304,23306,23307,23308,23309,23310,23311,23312,23313,23314,23315,23316,23317,23320,23321,23322,23323,23324,23325,23326,23327,23328,23329,23330,23331,23332,23333,23334,23335,23336,23337,23338,23339,23340,23341,23342,23343,23344,23345,23347,23349,23350,23352,23353,23354,23355,23356,23357,23358,23359,23361,23362,23363,23364,23365,23366,23367,23368,23369,23370,23371,23372,23373,23374,23375,23378,23382,23390,23392,23393,23399,23400,23403,23405,23406,23407,23410,23412,23414,23415,23416,23417,23419,23420,23422,23423,23426,23430,23434,23437,23438,23440,23441,23442,23444,23446,23455,23463,23464,23465,23468,23469,23470,23471,23473,23474,23479,23482,23483,23484,23488,23489,23491,23496,23497,23498,23499,23501,23502,23503,23505,23508,23509,23510,23511,23512,23513,23514,23515,23516,23520,23522,23523,23526,23527,23529,23530,23531,23532,23533,23535,23537,23538,23539,23540,23541,23542,23543,23549,23550,23552,23554,23555,23557,23559,23560,23563,23564,23565,23566,23568,23570,23571,23575,23577,23579,23582,23583,23584,23585,23587,23590,23592,23593,23594,23595,23597,23598,23599,23600,23602,23603,23605,23606,23607,23619,23620,23622,23623,23628,23629,23634,23635,23636,23638,23639,23640,23642,23643,23644,23645,23647,23650,23652,23655,23656,23657,23658,23659,23660,23661,23664,23666,23667,23668,23669,23670,23671,23672,23675,23676,23677,23678,23680,23683,23684,23685,23686,23687,23689,23690,23691,23694,23695,23698,23699,23701,23709,23710,23711,23712,23713,23716,23717,23718,23719,23720,23722,23726,23727,23728,23730,23732,23734,23737,23738,23739,23740,23742,23744,23746,23747,23749,23750,23751,23752,23753,23754,23756,23757,23758,23759,23760,23761,23763,23764,23765,23766,23767,23768,23770,23771,23772,23773,23774,23775,23776,23778,23779,23783,23785,23787,23788,23790,23791,23793,23794,23795,23796,23797,23798,23799,23800,23801,23802,23804,23805,23806,23807,23808,23809,23812,23813,23816,23817,23818,23819,23820,23821,23823,23824,23825,23826,23827,23829,23831,23832,23833,23834,23836,23837,23839,23840,23841,23842,23843,23845,23848,23850,23851,23852,23855,23856,23857,23858,23859,23861,23862,23863,23864,23865,23866,23867,23868,23871,23872,23873,23874,23875,23876,23877,23878,23880,23881,23885,23886,23887,23888,23889,23890,23891,23892,23893,23894,23895,23897,23898,23900,23902,23903,23904,23905,23906,23907,23908,23909,23910,23911,23912,23914,23917,23918,23920,23921,23922,23923,23925,23926,23927,23928,23929,23930,23931,23932,23933,23934,23935,23936,23937,23939,23940,23941,23942,23943,23944,23945,23946,23947,23948,23949,23950,23951,23952,23953,23954,23955,23956,23957,23958,23959,23960,23962,23963,23964,23966,23967,23968,23969,23970,23971,23972,23973,23974,23975,23976,23977,23978,23979,23980,23981,23982,23983,23984,23985,23986,23987,23988,23989,23990,23992,23993,23994,23995,23996,23997,23998,23999,24e3,24001,24002,24003,24004,24006,24007,24008,24009,24010,24011,24012,24014,24015,24016,24017,24018,24019,24020,24021,24022,24023,24024,24025,24026,24028,24031,24032,24035,24036,24042,24044,24045,24048,24053,24054,24056,24057,24058,24059,24060,24063,24064,24068,24071,24073,24074,24075,24077,24078,24082,24083,24087,24094,24095,24096,24097,24098,24099,24100,24101,24104,24105,24106,24107,24108,24111,24112,24114,24115,24116,24117,24118,24121,24122,24126,24127,24128,24129,24131,24134,24135,24136,24137,24138,24139,24141,24142,24143,24144,24145,24146,24147,24150,24151,24152,24153,24154,24156,24157,24159,24160,24163,24164,24165,24166,24167,24168,24169,24170,24171,24172,24173,24174,24175,24176,24177,24181,24183,24185,24190,24193,24194,24195,24197,24200,24201,24204,24205,24206,24210,24216,24219,24221,24225,24226,24227,24228,24232,24233,24234,24235,24236,24238,24239,24240,24241,24242,24244,24250,24251,24252,24253,24255,24256,24257,24258,24259,24260,24261,24262,24263,24264,24267,24268,24269,24270,24271,24272,24276,24277,24279,24280,24281,24282,24284,24285,24286,24287,24288,24289,24290,24291,24292,24293,24294,24295,24297,24299,24300,24301,24302,24303,24304,24305,24306,24307,24309,24312,24313,24315,24316,24317,24325,24326,24327,24329,24332,24333,24334,24336,24338,24340,24342,24345,24346,24348,24349,24350,24353,24354,24355,24356,24360,24363,24364,24366,24368,24370,24371,24372,24373,24374,24375,24376,24379,24381,24382,24383,24385,24386,24387,24388,24389,24390,24391,24392,24393,24394,24395,24396,24397,24398,24399,24401,24404,24409,24410,24411,24412,24414,24415,24416,24419,24421,24423,24424,24427,24430,24431,24434,24436,24437,24438,24440,24442,24445,24446,24447,24451,24454,24461,24462,24463,24465,24467,24468,24470,24474,24475,24477,24478,24479,24480,24482,24483,24484,24485,24486,24487,24489,24491,24492,24495,24496,24497,24498,24499,24500,24502,24504,24505,24506,24507,24510,24511,24512,24513,24514,24519,24520,24522,24523,24526,24531,24532,24533,24538,24539,24540,24542,24543,24546,24547,24549,24550,24552,24553,24556,24559,24560,24562,24563,24564,24566,24567,24569,24570,24572,24583,24584,24585,24587,24588,24592,24593,24595,24599,24600,24602,24606,24607,24610,24611,24612,24620,24621,24622,24624,24625,24626,24627,24628,24630,24631,24632,24633,24634,24637,24638,24640,24644,24645,24646,24647,24648,24649,24650,24652,24654,24655,24657,24659,24660,24662,24663,24664,24667,24668,24670,24671,24672,24673,24677,24678,24686,24689,24690,24692,24693,24695,24702,24704,24705,24706,24709,24710,24711,24712,24714,24715,24718,24719,24720,24721,24723,24725,24727,24728,24729,24732,24734,24737,24738,24740,24741,24743,24745,24746,24750,24752,24755,24757,24758,24759,24761,24762,24765,24766,24767,24768,24769,24770,24771,24772,24775,24776,24777,24780,24781,24782,24783,24784,24786,24787,24788,24790,24791,24793,24795,24798,24801,24802,24803,24804,24805,24810,24817,24818,24821,24823,24824,24827,24828,24829,24830,24831,24834,24835,24836,24837,24839,24842,24843,24844,24848,24849,24850,24851,24852,24854,24855,24856,24857,24859,24860,24861,24862,24865,24866,24869,24872,24873,24874,24876,24877,24878,24879,24880,24881,24882,24883,24884,24885,24886,24887,24888,24889,24890,24891,24892,24893,24894,24896,24897,24898,24899,24900,24901,24902,24903,24905,24907,24909,24911,24912,24914,24915,24916,24918,24919,24920,24921,24922,24923,24924,24926,24927,24928,24929,24931,24932,24933,24934,24937,24938,24939,24940,24941,24942,24943,24945,24946,24947,24948,24950,24952,24953,24954,24955,24956,24957,24958,24959,24960,24961,24962,24963,24964,24965,24966,24967,24968,24969,24970,24972,24973,24975,24976,24977,24978,24979,24981,24982,24983,24984,24985,24986,24987,24988,24990,24991,24992,24993,24994,24995,24996,24997,24998,25002,25003,25005,25006,25007,25008,25009,25010,25011,25012,25013,25014,25016,25017,25018,25019,25020,25021,25023,25024,25025,25027,25028,25029,25030,25031,25033,25036,25037,25038,25039,25040,25043,25045,25046,25047,25048,25049,25050,25051,25052,25053,25054,25055,25056,25057,25058,25059,25060,25061,25063,25064,25065,25066,25067,25068,25069,25070,25071,25072,25073,25074,25075,25076,25078,25079,25080,25081,25082,25083,25084,25085,25086,25088,25089,25090,25091,25092,25093,25095,25097,25107,25108,25113,25116,25117,25118,25120,25123,25126,25127,25128,25129,25131,25133,25135,25136,25137,25138,25141,25142,25144,25145,25146,25147,25148,25154,25156,25157,25158,25162,25167,25168,25173,25174,25175,25177,25178,25180,25181,25182,25183,25184,25185,25186,25188,25189,25192,25201,25202,25204,25205,25207,25208,25210,25211,25213,25217,25218,25219,25221,25222,25223,25224,25227,25228,25229,25230,25231,25232,25236,25241,25244,25245,25246,25251,25254,25255,25257,25258,25261,25262,25263,25264,25266,25267,25268,25270,25271,25272,25274,25278,25280,25281,25283,25291,25295,25297,25301,25309,25310,25312,25313,25316,25322,25323,25328,25330,25333,25336,25337,25338,25339,25344,25347,25348,25349,25350,25354,25355,25356,25357,25359,25360,25362,25363,25364,25365,25367,25368,25369,25372,25382,25383,25385,25388,25389,25390,25392,25393,25395,25396,25397,25398,25399,25400,25403,25404,25406,25407,25408,25409,25412,25415,25416,25418,25425,25426,25427,25428,25430,25431,25432,25433,25434,25435,25436,25437,25440,25444,25445,25446,25448,25450,25451,25452,25455,25456,25458,25459,25460,25461,25464,25465,25468,25469,25470,25471,25473,25475,25476,25477,25478,25483,25485,25489,25491,25492,25493,25495,25497,25498,25499,25500,25501,25502,25503,25505,25508,25510,25515,25519,25521,25522,25525,25526,25529,25531,25533,25535,25536,25537,25538,25539,25541,25543,25544,25546,25547,25548,25553,25555,25556,25557,25559,25560,25561,25562,25563,25564,25565,25567,25570,25572,25573,25574,25575,25576,25579,25580,25582,25583,25584,25585,25587,25589,25591,25593,25594,25595,25596,25598,25603,25604,25606,25607,25608,25609,25610,25613,25614,25617,25618,25621,25622,25623,25624,25625,25626,25629,25631,25634,25635,25636,25637,25639,25640,25641,25643,25646,25647,25648,25649,25650,25651,25653,25654,25655,25656,25657,25659,25660,25662,25664,25666,25667,25673,25675,25676,25677,25678,25679,25680,25681,25683,25685,25686,25687,25689,25690,25691,25692,25693,25695,25696,25697,25698,25699,25700,25701,25702,25704,25706,25707,25708,25710,25711,25712,25713,25714,25715,25716,25717,25718,25719,25723,25724,25725,25726,25727,25728,25729,25731,25734,25736,25737,25738,25739,25740,25741,25742,25743,25744,25747,25748,25751,25752,25754,25755,25756,25757,25759,25760,25761,25762,25763,25765,25766,25767,25768,25770,25771,25775,25777,25778,25779,25780,25782,25785,25787,25789,25790,25791,25793,25795,25796,25798,25799,25800,25801,25802,25803,25804,25807,25809,25811,25812,25813,25814,25817,25818,25819,25820,25821,25823,25824,25825,25827,25829,25831,25832,25833,25834,25835,25836,25837,25838,25839,25840,25841,25842,25843,25844,25845,25846,25847,25848,25849,25850,25851,25852,25853,25854,25855,25857,25858,25859,25860,25861,25862,25863,25864,25866,25867,25868,25869,25870,25871,25872,25873,25875,25876,25877,25878,25879,25881,25882,25883,25884,25885,25886,25887,25888,25889,25890,25891,25892,25894,25895,25896,25897,25898,25900,25901,25904,25905,25906,25907,25911,25914,25916,25917,25920,25921,25922,25923,25924,25926,25927,25930,25931,25933,25934,25936,25938,25939,25940,25943,25944,25946,25948,25951,25952,25953,25956,25957,25959,25960,25961,25962,25965,25966,25967,25969,25971,25973,25974,25976,25977,25978,25979,25980,25981,25982,25983,25984,25985,25986,25987,25988,25989,25990,25992,25993,25994,25997,25998,25999,26002,26004,26005,26006,26008,26010,26013,26014,26016,26018,26019,26022,26024,26026,26028,26030,26033,26034,26035,26036,26037,26038,26039,26040,26042,26043,26046,26047,26048,26050,26055,26056,26057,26058,26061,26064,26065,26067,26068,26069,26072,26073,26074,26075,26076,26077,26078,26079,26081,26083,26084,26090,26091,26098,26099,26100,26101,26104,26105,26107,26108,26109,26110,26111,26113,26116,26117,26119,26120,26121,26123,26125,26128,26129,26130,26134,26135,26136,26138,26139,26140,26142,26145,26146,26147,26148,26150,26153,26154,26155,26156,26158,26160,26162,26163,26167,26168,26169,26170,26171,26173,26175,26176,26178,26180,26181,26182,26183,26184,26185,26186,26189,26190,26192,26193,26200,26201,26203,26204,26205,26206,26208,26210,26211,26213,26215,26217,26218,26219,26220,26221,26225,26226,26227,26229,26232,26233,26235,26236,26237,26239,26240,26241,26243,26245,26246,26248,26249,26250,26251,26253,26254,26255,26256,26258,26259,26260,26261,26264,26265,26266,26267,26268,26270,26271,26272,26273,26274,26275,26276,26277,26278,26281,26282,26283,26284,26285,26287,26288,26289,26290,26291,26293,26294,26295,26296,26298,26299,26300,26301,26303,26304,26305,26306,26307,26308,26309,26310,26311,26312,26313,26314,26315,26316,26317,26318,26319,26320,26321,26322,26323,26324,26325,26326,26327,26328,26330,26334,26335,26336,26337,26338,26339,26340,26341,26343,26344,26346,26347,26348,26349,26350,26351,26353,26357,26358,26360,26362,26363,26365,26369,26370,26371,26372,26373,26374,26375,26380,26382,26383,26385,26386,26387,26390,26392,26393,26394,26396,26398,26400,26401,26402,26403,26404,26405,26407,26409,26414,26416,26418,26419,26422,26423,26424,26425,26427,26428,26430,26431,26433,26436,26437,26439,26442,26443,26445,26450,26452,26453,26455,26456,26457,26458,26459,26461,26466,26467,26468,26470,26471,26475,26476,26478,26481,26484,26486,26488,26489,26490,26491,26493,26496,26498,26499,26501,26502,26504,26506,26508,26509,26510,26511,26513,26514,26515,26516,26518,26521,26523,26527,26528,26529,26532,26534,26537,26540,26542,26545,26546,26548,26553,26554,26555,26556,26557,26558,26559,26560,26562,26565,26566,26567,26568,26569,26570,26571,26572,26573,26574,26581,26582,26583,26587,26591,26593,26595,26596,26598,26599,26600,26602,26603,26605,26606,26610,26613,26614,26615,26616,26617,26618,26619,26620,26622,26625,26626,26627,26628,26630,26637,26640,26642,26644,26645,26648,26649,26650,26651,26652,26654,26655,26656,26658,26659,26660,26661,26662,26663,26664,26667,26668,26669,26670,26671,26672,26673,26676,26677,26678,26682,26683,26687,26695,26699,26701,26703,26706,26710,26711,26712,26713,26714,26715,26716,26717,26718,26719,26730,26732,26733,26734,26735,26736,26737,26738,26739,26741,26744,26745,26746,26747,26748,26749,26750,26751,26752,26754,26756,26759,26760,26761,26762,26763,26764,26765,26766,26768,26769,26770,26772,26773,26774,26776,26777,26778,26779,26780,26781,26782,26783,26784,26785,26787,26788,26789,26793,26794,26795,26796,26798,26801,26802,26804,26806,26807,26808,26809,26810,26811,26812,26813,26814,26815,26817,26819,26820,26821,26822,26823,26824,26826,26828,26830,26831,26832,26833,26835,26836,26838,26839,26841,26843,26844,26845,26846,26847,26849,26850,26852,26853,26854,26855,26856,26857,26858,26859,26860,26861,26863,26866,26867,26868,26870,26871,26872,26875,26877,26878,26879,26880,26882,26883,26884,26886,26887,26888,26889,26890,26892,26895,26897,26899,26900,26901,26902,26903,26904,26905,26906,26907,26908,26909,26910,26913,26914,26915,26917,26918,26919,26920,26921,26922,26923,26924,26926,26927,26929,26930,26931,26933,26934,26935,26936,26938,26939,26940,26942,26944,26945,26947,26948,26949,26950,26951,26952,26953,26954,26955,26956,26957,26958,26959,26960,26961,26962,26963,26965,26966,26968,26969,26971,26972,26975,26977,26978,26980,26981,26983,26984,26985,26986,26988,26989,26991,26992,26994,26995,26996,26997,26998,27002,27003,27005,27006,27007,27009,27011,27013,27018,27019,27020,27022,27023,27024,27025,27026,27027,27030,27031,27033,27034,27037,27038,27039,27040,27041,27042,27043,27044,27045,27046,27049,27050,27052,27054,27055,27056,27058,27059,27061,27062,27064,27065,27066,27068,27069,27070,27071,27072,27074,27075,27076,27077,27078,27079,27080,27081,27083,27085,27087,27089,27090,27091,27093,27094,27095,27096,27097,27098,27100,27101,27102,27105,27106,27107,27108,27109,27110,27111,27112,27113,27114,27115,27116,27118,27119,27120,27121,27123,27124,27125,27126,27127,27128,27129,27130,27131,27132,27134,27136,27137,27138,27139,27140,27141,27142,27143,27144,27145,27147,27148,27149,27150,27151,27152,27153,27154,27155,27156,27157,27158,27161,27162,27163,27164,27165,27166,27168,27170,27171,27172,27173,27174,27175,27177,27179,27180,27181,27182,27184,27186,27187,27188,27190,27191,27192,27193,27194,27195,27196,27199,27200,27201,27202,27203,27205,27206,27208,27209,27210,27211,27212,27213,27214,27215,27217,27218,27219,27220,27221,27222,27223,27226,27228,27229,27230,27231,27232,27234,27235,27236,27238,27239,27240,27241,27242,27243,27244,27245,27246,27247,27248,27250,27251,27252,27253,27254,27255,27256,27258,27259,27261,27262,27263,27265,27266,27267,27269,27270,27271,27272,27273,27274,27275,27276,27277,27279,27282,27283,27284,27285,27286,27288,27289,27290,27291,27292,27293,27294,27295,27297,27298,27299,27300,27301,27302,27303,27304,27306,27309,27310,27311,27312,27313,27314,27315,27316,27317,27318,27319,27320,27321,27322,27323,27324,27325,27326,27327,27328,27329,27330,27331,27332,27333,27334,27335,27336,27337,27338,27339,27340,27341,27342,27343,27344,27345,27346,27347,27348,27349,27350,27351,27352,27353,27354,27355,27356,27357,27358,27359,27360,27361,27362,27363,27364,27365,27366,27367,27368,27369,27370,27371,27372,27373,27374,27375,27376,27377,27378,27379,27380,27381,27382,27383,27384,27385,27386,27387,27388,27389,27390,27391,27392,27393,27394,27395,27396,27397,27398,27399,27400,27401,27402,27403,27404,27405,27406,27407,27408,27409,27410,27411,27412,27413,27414,27415,27416,27417,27418,27419,27420,27421,27422,27423,27429,27430,27432,27433,27434,27435,27436,27437,27438,27439,27440,27441,27443,27444,27445,27446,27448,27451,27452,27453,27455,27456,27457,27458,27460,27461,27464,27466,27467,27469,27470,27471,27472,27473,27474,27475,27476,27477,27478,27479,27480,27482,27483,27484,27485,27486,27487,27488,27489,27496,27497,27499,27500,27501,27502,27503,27504,27505,27506,27507,27508,27509,27510,27511,27512,27514,27517,27518,27519,27520,27525,27528,27532,27534,27535,27536,27537,27540,27541,27543,27544,27545,27548,27549,27550,27551,27552,27554,27555,27556,27557,27558,27559,27560,27561,27563,27564,27565,27566,27567,27568,27569,27570,27574,27576,27577,27578,27579,27580,27581,27582,27584,27587,27588,27590,27591,27592,27593,27594,27596,27598,27600,27601,27608,27610,27612,27613,27614,27615,27616,27618,27619,27620,27621,27622,27623,27624,27625,27628,27629,27630,27632,27633,27634,27636,27638,27639,27640,27642,27643,27644,27646,27647,27648,27649,27650,27651,27652,27656,27657,27658,27659,27660,27662,27666,27671,27676,27677,27678,27680,27683,27685,27691,27692,27693,27697,27699,27702,27703,27705,27706,27707,27708,27710,27711,27715,27716,27717,27720,27723,27724,27725,27726,27727,27729,27730,27731,27734,27736,27737,27738,27746,27747,27749,27750,27751,27755,27756,27757,27758,27759,27761,27763,27765,27767,27768,27770,27771,27772,27775,27776,27780,27783,27786,27787,27789,27790,27793,27794,27797,27798,27799,27800,27802,27804,27805,27806,27808,27810,27816,27820,27823,27824,27828,27829,27830,27831,27834,27840,27841,27842,27843,27846,27847,27848,27851,27853,27854,27855,27857,27858,27864,27865,27866,27868,27869,27871,27876,27878,27879,27881,27884,27885,27890,27892,27897,27903,27904,27906,27907,27909,27910,27912,27913,27914,27917,27919,27920,27921,27923,27924,27925,27926,27928,27932,27933,27935,27936,27937,27938,27939,27940,27942,27944,27945,27948,27949,27951,27952,27956,27958,27959,27960,27962,27967,27968,27970,27972,27977,27980,27984,27989,27990,27991,27992,27995,27997,27999,28001,28002,28004,28005,28007,28008,28011,28012,28013,28016,28017,28018,28019,28021,28022,28025,28026,28027,28029,28030,28031,28032,28033,28035,28036,28038,28039,28042,28043,28045,28047,28048,28050,28054,28055,28056,28057,28058,28060,28066,28069,28076,28077,28080,28081,28083,28084,28086,28087,28089,28090,28091,28092,28093,28094,28097,28098,28099,28104,28105,28106,28109,28110,28111,28112,28114,28115,28116,28117,28119,28122,28123,28124,28127,28130,28131,28133,28135,28136,28137,28138,28141,28143,28144,28146,28148,28149,28150,28152,28154,28157,28158,28159,28160,28161,28162,28163,28164,28166,28167,28168,28169,28171,28175,28178,28179,28181,28184,28185,28187,28188,28190,28191,28194,28198,28199,28200,28202,28204,28206,28208,28209,28211,28213,28214,28215,28217,28219,28220,28221,28222,28223,28224,28225,28226,28229,28230,28231,28232,28233,28234,28235,28236,28239,28240,28241,28242,28245,28247,28249,28250,28252,28253,28254,28256,28257,28258,28259,28260,28261,28262,28263,28264,28265,28266,28268,28269,28271,28272,28273,28274,28275,28276,28277,28278,28279,28280,28281,28282,28283,28284,28285,28288,28289,28290,28292,28295,28296,28298,28299,28300,28301,28302,28305,28306,28307,28308,28309,28310,28311,28313,28314,28315,28317,28318,28320,28321,28323,28324,28326,28328,28329,28331,28332,28333,28334,28336,28339,28341,28344,28345,28348,28350,28351,28352,28355,28356,28357,28358,28360,28361,28362,28364,28365,28366,28368,28370,28374,28376,28377,28379,28380,28381,28387,28391,28394,28395,28396,28397,28398,28399,28400,28401,28402,28403,28405,28406,28407,28408,28410,28411,28412,28413,28414,28415,28416,28417,28419,28420,28421,28423,28424,28426,28427,28428,28429,28430,28432,28433,28434,28438,28439,28440,28441,28442,28443,28444,28445,28446,28447,28449,28450,28451,28453,28454,28455,28456,28460,28462,28464,28466,28468,28469,28471,28472,28473,28474,28475,28476,28477,28479,28480,28481,28482,28483,28484,28485,28488,28489,28490,28492,28494,28495,28496,28497,28498,28499,28500,28501,28502,28503,28505,28506,28507,28509,28511,28512,28513,28515,28516,28517,28519,28520,28521,28522,28523,28524,28527,28528,28529,28531,28533,28534,28535,28537,28539,28541,28542,28543,28544,28545,28546,28547,28549,28550,28551,28554,28555,28559,28560,28561,28562,28563,28564,28565,28566,28567,28568,28569,28570,28571,28573,28574,28575,28576,28578,28579,28580,28581,28582,28584,28585,28586,28587,28588,28589,28590,28591,28592,28593,28594,28596,28597,28599,28600,28602,28603,28604,28605,28606,28607,28609,28611,28612,28613,28614,28615,28616,28618,28619,28620,28621,28622,28623,28624,28627,28628,28629,28630,28631,28632,28633,28634,28635,28636,28637,28639,28642,28643,28644,28645,28646,28647,28648,28649,28650,28651,28652,28653,28656,28657,28658,28659,28660,28661,28662,28663,28664,28665,28666,28667,28668,28669,28670,28671,28672,28673,28674,28675,28676,28677,28678,28679,28680,28681,28682,28683,28684,28685,28686,28687,28688,28690,28691,28692,28693,28694,28695,28696,28697,28700,28701,28702,28703,28704,28705,28706,28708,28709,28710,28711,28712,28713,28714,28715,28716,28717,28718,28719,28720,28721,28722,28723,28724,28726,28727,28728,28730,28731,28732,28733,28734,28735,28736,28737,28738,28739,28740,28741,28742,28743,28744,28745,28746,28747,28749,28750,28752,28753,28754,28755,28756,28757,28758,28759,28760,28761,28762,28763,28764,28765,28767,28768,28769,28770,28771,28772,28773,28774,28775,28776,28777,28778,28782,28785,28786,28787,28788,28791,28793,28794,28795,28797,28801,28802,28803,28804,28806,28807,28808,28811,28812,28813,28815,28816,28817,28819,28823,28824,28826,28827,28830,28831,28832,28833,28834,28835,28836,28837,28838,28839,28840,28841,28842,28848,28850,28852,28853,28854,28858,28862,28863,28868,28869,28870,28871,28873,28875,28876,28877,28878,28879,28880,28881,28882,28883,28884,28885,28886,28887,28890,28892,28893,28894,28896,28897,28898,28899,28901,28906,28910,28912,28913,28914,28915,28916,28917,28918,28920,28922,28923,28924,28926,28927,28928,28929,28930,28931,28932,28933,28934,28935,28936,28939,28940,28941,28942,28943,28945,28946,28948,28951,28955,28956,28957,28958,28959,28960,28961,28962,28963,28964,28965,28967,28968,28969,28970,28971,28972,28973,28974,28978,28979,28980,28981,28983,28984,28985,28986,28987,28988,28989,28990,28991,28992,28993,28994,28995,28996,28998,28999,29e3,29001,29003,29005,29007,29008,29009,29010,29011,29012,29013,29014,29015,29016,29017,29018,29019,29021,29023,29024,29025,29026,29027,29029,29033,29034,29035,29036,29037,29039,29040,29041,29044,29045,29046,29047,29049,29051,29052,29054,29055,29056,29057,29058,29059,29061,29062,29063,29064,29065,29067,29068,29069,29070,29072,29073,29074,29075,29077,29078,29079,29082,29083,29084,29085,29086,29089,29090,29091,29092,29093,29094,29095,29097,29098,29099,29101,29102,29103,29104,29105,29106,29108,29110,29111,29112,29114,29115,29116,29117,29118,29119,29120,29121,29122,29124,29125,29126,29127,29128,29129,29130,29131,29132,29133,29135,29136,29137,29138,29139,29142,29143,29144,29145,29146,29147,29148,29149,29150,29151,29153,29154,29155,29156,29158,29160,29161,29162,29163,29164,29165,29167,29168,29169,29170,29171,29172,29173,29174,29175,29176,29178,29179,29180,29181,29182,29183,29184,29185,29186,29187,29188,29189,29191,29192,29193,29194,29195,29196,29197,29198,29199,29200,29201,29202,29203,29204,29205,29206,29207,29208,29209,29210,29211,29212,29214,29215,29216,29217,29218,29219,29220,29221,29222,29223,29225,29227,29229,29230,29231,29234,29235,29236,29242,29244,29246,29248,29249,29250,29251,29252,29253,29254,29257,29258,29259,29262,29263,29264,29265,29267,29268,29269,29271,29272,29274,29276,29278,29280,29283,29284,29285,29288,29290,29291,29292,29293,29296,29297,29299,29300,29302,29303,29304,29307,29308,29309,29314,29315,29317,29318,29319,29320,29321,29324,29326,29328,29329,29331,29332,29333,29334,29335,29336,29337,29338,29339,29340,29341,29342,29344,29345,29346,29347,29348,29349,29350,29351,29352,29353,29354,29355,29358,29361,29362,29363,29365,29370,29371,29372,29373,29374,29375,29376,29381,29382,29383,29385,29386,29387,29388,29391,29393,29395,29396,29397,29398,29400,29402,29403,58566,58567,58568,58569,58570,58571,58572,58573,58574,58575,58576,58577,58578,58579,58580,58581,58582,58583,58584,58585,58586,58587,58588,58589,58590,58591,58592,58593,58594,58595,58596,58597,58598,58599,58600,58601,58602,58603,58604,58605,58606,58607,58608,58609,58610,58611,58612,58613,58614,58615,58616,58617,58618,58619,58620,58621,58622,58623,58624,58625,58626,58627,58628,58629,58630,58631,58632,58633,58634,58635,58636,58637,58638,58639,58640,58641,58642,58643,58644,58645,58646,58647,58648,58649,58650,58651,58652,58653,58654,58655,58656,58657,58658,58659,58660,58661,12288,12289,12290,183,713,711,168,12291,12293,8212,65374,8214,8230,8216,8217,8220,8221,12308,12309,12296,12297,12298,12299,12300,12301,12302,12303,12310,12311,12304,12305,177,215,247,8758,8743,8744,8721,8719,8746,8745,8712,8759,8730,8869,8741,8736,8978,8857,8747,8750,8801,8780,8776,8765,8733,8800,8814,8815,8804,8805,8734,8757,8756,9794,9792,176,8242,8243,8451,65284,164,65504,65505,8240,167,8470,9734,9733,9675,9679,9678,9671,9670,9633,9632,9651,9650,8251,8594,8592,8593,8595,12307,58662,58663,58664,58665,58666,58667,58668,58669,58670,58671,58672,58673,58674,58675,58676,58677,58678,58679,58680,58681,58682,58683,58684,58685,58686,58687,58688,58689,58690,58691,58692,58693,58694,58695,58696,58697,58698,58699,58700,58701,58702,58703,58704,58705,58706,58707,58708,58709,58710,58711,58712,58713,58714,58715,58716,58717,58718,58719,58720,58721,58722,58723,58724,58725,58726,58727,58728,58729,58730,58731,58732,58733,58734,58735,58736,58737,58738,58739,58740,58741,58742,58743,58744,58745,58746,58747,58748,58749,58750,58751,58752,58753,58754,58755,58756,58757,8560,8561,8562,8563,8564,8565,8566,8567,8568,8569,59238,59239,59240,59241,59242,59243,9352,9353,9354,9355,9356,9357,9358,9359,9360,9361,9362,9363,9364,9365,9366,9367,9368,9369,9370,9371,9332,9333,9334,9335,9336,9337,9338,9339,9340,9341,9342,9343,9344,9345,9346,9347,9348,9349,9350,9351,9312,9313,9314,9315,9316,9317,9318,9319,9320,9321,8364,59245,12832,12833,12834,12835,12836,12837,12838,12839,12840,12841,59246,59247,8544,8545,8546,8547,8548,8549,8550,8551,8552,8553,8554,8555,59248,59249,58758,58759,58760,58761,58762,58763,58764,58765,58766,58767,58768,58769,58770,58771,58772,58773,58774,58775,58776,58777,58778,58779,58780,58781,58782,58783,58784,58785,58786,58787,58788,58789,58790,58791,58792,58793,58794,58795,58796,58797,58798,58799,58800,58801,58802,58803,58804,58805,58806,58807,58808,58809,58810,58811,58812,58813,58814,58815,58816,58817,58818,58819,58820,58821,58822,58823,58824,58825,58826,58827,58828,58829,58830,58831,58832,58833,58834,58835,58836,58837,58838,58839,58840,58841,58842,58843,58844,58845,58846,58847,58848,58849,58850,58851,58852,12288,65281,65282,65283,65509,65285,65286,65287,65288,65289,65290,65291,65292,65293,65294,65295,65296,65297,65298,65299,65300,65301,65302,65303,65304,65305,65306,65307,65308,65309,65310,65311,65312,65313,65314,65315,65316,65317,65318,65319,65320,65321,65322,65323,65324,65325,65326,65327,65328,65329,65330,65331,65332,65333,65334,65335,65336,65337,65338,65339,65340,65341,65342,65343,65344,65345,65346,65347,65348,65349,65350,65351,65352,65353,65354,65355,65356,65357,65358,65359,65360,65361,65362,65363,65364,65365,65366,65367,65368,65369,65370,65371,65372,65373,65507,58854,58855,58856,58857,58858,58859,58860,58861,58862,58863,58864,58865,58866,58867,58868,58869,58870,58871,58872,58873,58874,58875,58876,58877,58878,58879,58880,58881,58882,58883,58884,58885,58886,58887,58888,58889,58890,58891,58892,58893,58894,58895,58896,58897,58898,58899,58900,58901,58902,58903,58904,58905,58906,58907,58908,58909,58910,58911,58912,58913,58914,58915,58916,58917,58918,58919,58920,58921,58922,58923,58924,58925,58926,58927,58928,58929,58930,58931,58932,58933,58934,58935,58936,58937,58938,58939,58940,58941,58942,58943,58944,58945,58946,58947,58948,58949,12353,12354,12355,12356,12357,12358,12359,12360,12361,12362,12363,12364,12365,12366,12367,12368,12369,12370,12371,12372,12373,12374,12375,12376,12377,12378,12379,12380,12381,12382,12383,12384,12385,12386,12387,12388,12389,12390,12391,12392,12393,12394,12395,12396,12397,12398,12399,12400,12401,12402,12403,12404,12405,12406,12407,12408,12409,12410,12411,12412,12413,12414,12415,12416,12417,12418,12419,12420,12421,12422,12423,12424,12425,12426,12427,12428,12429,12430,12431,12432,12433,12434,12435,59250,59251,59252,59253,59254,59255,59256,59257,59258,59259,59260,58950,58951,58952,58953,58954,58955,58956,58957,58958,58959,58960,58961,58962,58963,58964,58965,58966,58967,58968,58969,58970,58971,58972,58973,58974,58975,58976,58977,58978,58979,58980,58981,58982,58983,58984,58985,58986,58987,58988,58989,58990,58991,58992,58993,58994,58995,58996,58997,58998,58999,59e3,59001,59002,59003,59004,59005,59006,59007,59008,59009,59010,59011,59012,59013,59014,59015,59016,59017,59018,59019,59020,59021,59022,59023,59024,59025,59026,59027,59028,59029,59030,59031,59032,59033,59034,59035,59036,59037,59038,59039,59040,59041,59042,59043,59044,59045,12449,12450,12451,12452,12453,12454,12455,12456,12457,12458,12459,12460,12461,12462,12463,12464,12465,12466,12467,12468,12469,12470,12471,12472,12473,12474,12475,12476,12477,12478,12479,12480,12481,12482,12483,12484,12485,12486,12487,12488,12489,12490,12491,12492,12493,12494,12495,12496,12497,12498,12499,12500,12501,12502,12503,12504,12505,12506,12507,12508,12509,12510,12511,12512,12513,12514,12515,12516,12517,12518,12519,12520,12521,12522,12523,12524,12525,12526,12527,12528,12529,12530,12531,12532,12533,12534,59261,59262,59263,59264,59265,59266,59267,59268,59046,59047,59048,59049,59050,59051,59052,59053,59054,59055,59056,59057,59058,59059,59060,59061,59062,59063,59064,59065,59066,59067,59068,59069,59070,59071,59072,59073,59074,59075,59076,59077,59078,59079,59080,59081,59082,59083,59084,59085,59086,59087,59088,59089,59090,59091,59092,59093,59094,59095,59096,59097,59098,59099,59100,59101,59102,59103,59104,59105,59106,59107,59108,59109,59110,59111,59112,59113,59114,59115,59116,59117,59118,59119,59120,59121,59122,59123,59124,59125,59126,59127,59128,59129,59130,59131,59132,59133,59134,59135,59136,59137,59138,59139,59140,59141,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,59269,59270,59271,59272,59273,59274,59275,59276,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,963,964,965,966,967,968,969,59277,59278,59279,59280,59281,59282,59283,65077,65078,65081,65082,65087,65088,65085,65086,65089,65090,65091,65092,59284,59285,65083,65084,65079,65080,65073,59286,65075,65076,59287,59288,59289,59290,59291,59292,59293,59294,59295,59142,59143,59144,59145,59146,59147,59148,59149,59150,59151,59152,59153,59154,59155,59156,59157,59158,59159,59160,59161,59162,59163,59164,59165,59166,59167,59168,59169,59170,59171,59172,59173,59174,59175,59176,59177,59178,59179,59180,59181,59182,59183,59184,59185,59186,59187,59188,59189,59190,59191,59192,59193,59194,59195,59196,59197,59198,59199,59200,59201,59202,59203,59204,59205,59206,59207,59208,59209,59210,59211,59212,59213,59214,59215,59216,59217,59218,59219,59220,59221,59222,59223,59224,59225,59226,59227,59228,59229,59230,59231,59232,59233,59234,59235,59236,59237,1040,1041,1042,1043,1044,1045,1025,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,59296,59297,59298,59299,59300,59301,59302,59303,59304,59305,59306,59307,59308,59309,59310,1072,1073,1074,1075,1076,1077,1105,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,59311,59312,59313,59314,59315,59316,59317,59318,59319,59320,59321,59322,59323,714,715,729,8211,8213,8229,8245,8453,8457,8598,8599,8600,8601,8725,8735,8739,8786,8806,8807,8895,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9581,9582,9583,9584,9585,9586,9587,9601,9602,9603,9604,9605,9606,9607,9608,9609,9610,9611,9612,9613,9614,9615,9619,9620,9621,9660,9661,9698,9699,9700,9701,9737,8853,12306,12317,12318,59324,59325,59326,59327,59328,59329,59330,59331,59332,59333,59334,257,225,462,224,275,233,283,232,299,237,464,236,333,243,466,242,363,250,468,249,470,472,474,476,252,234,593,7743,324,328,505,609,59337,59338,59339,59340,12549,12550,12551,12552,12553,12554,12555,12556,12557,12558,12559,12560,12561,12562,12563,12564,12565,12566,12567,12568,12569,12570,12571,12572,12573,12574,12575,12576,12577,12578,12579,12580,12581,12582,12583,12584,12585,59341,59342,59343,59344,59345,59346,59347,59348,59349,59350,59351,59352,59353,59354,59355,59356,59357,59358,59359,59360,59361,12321,12322,12323,12324,12325,12326,12327,12328,12329,12963,13198,13199,13212,13213,13214,13217,13252,13262,13265,13266,13269,65072,65506,65508,59362,8481,12849,59363,8208,59364,59365,59366,12540,12443,12444,12541,12542,12294,12445,12446,65097,65098,65099,65100,65101,65102,65103,65104,65105,65106,65108,65109,65110,65111,65113,65114,65115,65116,65117,65118,65119,65120,65121,65122,65123,65124,65125,65126,65128,65129,65130,65131,12350,12272,12273,12274,12275,12276,12277,12278,12279,12280,12281,12282,12283,12295,59380,59381,59382,59383,59384,59385,59386,59387,59388,59389,59390,59391,59392,9472,9473,9474,9475,9476,9477,9478,9479,9480,9481,9482,9483,9484,9485,9486,9487,9488,9489,9490,9491,9492,9493,9494,9495,9496,9497,9498,9499,9500,9501,9502,9503,9504,9505,9506,9507,9508,9509,9510,9511,9512,9513,9514,9515,9516,9517,9518,9519,9520,9521,9522,9523,9524,9525,9526,9527,9528,9529,9530,9531,9532,9533,9534,9535,9536,9537,9538,9539,9540,9541,9542,9543,9544,9545,9546,9547,59393,59394,59395,59396,59397,59398,59399,59400,59401,59402,59403,59404,59405,59406,59407,29404,29405,29407,29410,29411,29412,29413,29414,29415,29418,29419,29429,29430,29433,29437,29438,29439,29440,29442,29444,29445,29446,29447,29448,29449,29451,29452,29453,29455,29456,29457,29458,29460,29464,29465,29466,29471,29472,29475,29476,29478,29479,29480,29485,29487,29488,29490,29491,29493,29494,29498,29499,29500,29501,29504,29505,29506,29507,29508,29509,29510,29511,29512,29513,29514,29515,29516,29518,29519,29521,29523,29524,29525,29526,29528,29529,29530,29531,29532,29533,29534,29535,29537,29538,29539,29540,29541,29542,29543,29544,29545,29546,29547,29550,29552,29553,57344,57345,57346,57347,57348,57349,57350,57351,57352,57353,57354,57355,57356,57357,57358,57359,57360,57361,57362,57363,57364,57365,57366,57367,57368,57369,57370,57371,57372,57373,57374,57375,57376,57377,57378,57379,57380,57381,57382,57383,57384,57385,57386,57387,57388,57389,57390,57391,57392,57393,57394,57395,57396,57397,57398,57399,57400,57401,57402,57403,57404,57405,57406,57407,57408,57409,57410,57411,57412,57413,57414,57415,57416,57417,57418,57419,57420,57421,57422,57423,57424,57425,57426,57427,57428,57429,57430,57431,57432,57433,57434,57435,57436,57437,29554,29555,29556,29557,29558,29559,29560,29561,29562,29563,29564,29565,29567,29568,29569,29570,29571,29573,29574,29576,29578,29580,29581,29583,29584,29586,29587,29588,29589,29591,29592,29593,29594,29596,29597,29598,29600,29601,29603,29604,29605,29606,29607,29608,29610,29612,29613,29617,29620,29621,29622,29624,29625,29628,29629,29630,29631,29633,29635,29636,29637,29638,29639,29643,29644,29646,29650,29651,29652,29653,29654,29655,29656,29658,29659,29660,29661,29663,29665,29666,29667,29668,29670,29672,29674,29675,29676,29678,29679,29680,29681,29683,29684,29685,29686,29687,57438,57439,57440,57441,57442,57443,57444,57445,57446,57447,57448,57449,57450,57451,57452,57453,57454,57455,57456,57457,57458,57459,57460,57461,57462,57463,57464,57465,57466,57467,57468,57469,57470,57471,57472,57473,57474,57475,57476,57477,57478,57479,57480,57481,57482,57483,57484,57485,57486,57487,57488,57489,57490,57491,57492,57493,57494,57495,57496,57497,57498,57499,57500,57501,57502,57503,57504,57505,57506,57507,57508,57509,57510,57511,57512,57513,57514,57515,57516,57517,57518,57519,57520,57521,57522,57523,57524,57525,57526,57527,57528,57529,57530,57531,29688,29689,29690,29691,29692,29693,29694,29695,29696,29697,29698,29700,29703,29704,29707,29708,29709,29710,29713,29714,29715,29716,29717,29718,29719,29720,29721,29724,29725,29726,29727,29728,29729,29731,29732,29735,29737,29739,29741,29743,29745,29746,29751,29752,29753,29754,29755,29757,29758,29759,29760,29762,29763,29764,29765,29766,29767,29768,29769,29770,29771,29772,29773,29774,29775,29776,29777,29778,29779,29780,29782,29784,29789,29792,29793,29794,29795,29796,29797,29798,29799,29800,29801,29802,29803,29804,29806,29807,29809,29810,29811,29812,29813,29816,29817,29818,57532,57533,57534,57535,57536,57537,57538,57539,57540,57541,57542,57543,57544,57545,57546,57547,57548,57549,57550,57551,57552,57553,57554,57555,57556,57557,57558,57559,57560,57561,57562,57563,57564,57565,57566,57567,57568,57569,57570,57571,57572,57573,57574,57575,57576,57577,57578,57579,57580,57581,57582,57583,57584,57585,57586,57587,57588,57589,57590,57591,57592,57593,57594,57595,57596,57597,57598,57599,57600,57601,57602,57603,57604,57605,57606,57607,57608,57609,57610,57611,57612,57613,57614,57615,57616,57617,57618,57619,57620,57621,57622,57623,57624,57625,29819,29820,29821,29823,29826,29828,29829,29830,29832,29833,29834,29836,29837,29839,29841,29842,29843,29844,29845,29846,29847,29848,29849,29850,29851,29853,29855,29856,29857,29858,29859,29860,29861,29862,29866,29867,29868,29869,29870,29871,29872,29873,29874,29875,29876,29877,29878,29879,29880,29881,29883,29884,29885,29886,29887,29888,29889,29890,29891,29892,29893,29894,29895,29896,29897,29898,29899,29900,29901,29902,29903,29904,29905,29907,29908,29909,29910,29911,29912,29913,29914,29915,29917,29919,29921,29925,29927,29928,29929,29930,29931,29932,29933,29936,29937,29938,57626,57627,57628,57629,57630,57631,57632,57633,57634,57635,57636,57637,57638,57639,57640,57641,57642,57643,57644,57645,57646,57647,57648,57649,57650,57651,57652,57653,57654,57655,57656,57657,57658,57659,57660,57661,57662,57663,57664,57665,57666,57667,57668,57669,57670,57671,57672,57673,57674,57675,57676,57677,57678,57679,57680,57681,57682,57683,57684,57685,57686,57687,57688,57689,57690,57691,57692,57693,57694,57695,57696,57697,57698,57699,57700,57701,57702,57703,57704,57705,57706,57707,57708,57709,57710,57711,57712,57713,57714,57715,57716,57717,57718,57719,29939,29941,29944,29945,29946,29947,29948,29949,29950,29952,29953,29954,29955,29957,29958,29959,29960,29961,29962,29963,29964,29966,29968,29970,29972,29973,29974,29975,29979,29981,29982,29984,29985,29986,29987,29988,29990,29991,29994,29998,30004,30006,30009,30012,30013,30015,30017,30018,30019,30020,30022,30023,30025,30026,30029,30032,30033,30034,30035,30037,30038,30039,30040,30045,30046,30047,30048,30049,30050,30051,30052,30055,30056,30057,30059,30060,30061,30062,30063,30064,30065,30067,30069,30070,30071,30074,30075,30076,30077,30078,30080,30081,30082,30084,30085,30087,57720,57721,57722,57723,57724,57725,57726,57727,57728,57729,57730,57731,57732,57733,57734,57735,57736,57737,57738,57739,57740,57741,57742,57743,57744,57745,57746,57747,57748,57749,57750,57751,57752,57753,57754,57755,57756,57757,57758,57759,57760,57761,57762,57763,57764,57765,57766,57767,57768,57769,57770,57771,57772,57773,57774,57775,57776,57777,57778,57779,57780,57781,57782,57783,57784,57785,57786,57787,57788,57789,57790,57791,57792,57793,57794,57795,57796,57797,57798,57799,57800,57801,57802,57803,57804,57805,57806,57807,57808,57809,57810,57811,57812,57813,30088,30089,30090,30092,30093,30094,30096,30099,30101,30104,30107,30108,30110,30114,30118,30119,30120,30121,30122,30125,30134,30135,30138,30139,30143,30144,30145,30150,30155,30156,30158,30159,30160,30161,30163,30167,30169,30170,30172,30173,30175,30176,30177,30181,30185,30188,30189,30190,30191,30194,30195,30197,30198,30199,30200,30202,30203,30205,30206,30210,30212,30214,30215,30216,30217,30219,30221,30222,30223,30225,30226,30227,30228,30230,30234,30236,30237,30238,30241,30243,30247,30248,30252,30254,30255,30257,30258,30262,30263,30265,30266,30267,30269,30273,30274,30276,57814,57815,57816,57817,57818,57819,57820,57821,57822,57823,57824,57825,57826,57827,57828,57829,57830,57831,57832,57833,57834,57835,57836,57837,57838,57839,57840,57841,57842,57843,57844,57845,57846,57847,57848,57849,57850,57851,57852,57853,57854,57855,57856,57857,57858,57859,57860,57861,57862,57863,57864,57865,57866,57867,57868,57869,57870,57871,57872,57873,57874,57875,57876,57877,57878,57879,57880,57881,57882,57883,57884,57885,57886,57887,57888,57889,57890,57891,57892,57893,57894,57895,57896,57897,57898,57899,57900,57901,57902,57903,57904,57905,57906,57907,30277,30278,30279,30280,30281,30282,30283,30286,30287,30288,30289,30290,30291,30293,30295,30296,30297,30298,30299,30301,30303,30304,30305,30306,30308,30309,30310,30311,30312,30313,30314,30316,30317,30318,30320,30321,30322,30323,30324,30325,30326,30327,30329,30330,30332,30335,30336,30337,30339,30341,30345,30346,30348,30349,30351,30352,30354,30356,30357,30359,30360,30362,30363,30364,30365,30366,30367,30368,30369,30370,30371,30373,30374,30375,30376,30377,30378,30379,30380,30381,30383,30384,30387,30389,30390,30391,30392,30393,30394,30395,30396,30397,30398,30400,30401,30403,21834,38463,22467,25384,21710,21769,21696,30353,30284,34108,30702,33406,30861,29233,38552,38797,27688,23433,20474,25353,26263,23736,33018,26696,32942,26114,30414,20985,25942,29100,32753,34948,20658,22885,25034,28595,33453,25420,25170,21485,21543,31494,20843,30116,24052,25300,36299,38774,25226,32793,22365,38712,32610,29240,30333,26575,30334,25670,20336,36133,25308,31255,26001,29677,25644,25203,33324,39041,26495,29256,25198,25292,20276,29923,21322,21150,32458,37030,24110,26758,27036,33152,32465,26834,30917,34444,38225,20621,35876,33502,32990,21253,35090,21093,30404,30407,30409,30411,30412,30419,30421,30425,30426,30428,30429,30430,30432,30433,30434,30435,30436,30438,30439,30440,30441,30442,30443,30444,30445,30448,30451,30453,30454,30455,30458,30459,30461,30463,30464,30466,30467,30469,30470,30474,30476,30478,30479,30480,30481,30482,30483,30484,30485,30486,30487,30488,30491,30492,30493,30494,30497,30499,30500,30501,30503,30506,30507,30508,30510,30512,30513,30514,30515,30516,30521,30523,30525,30526,30527,30530,30532,30533,30534,30536,30537,30538,30539,30540,30541,30542,30543,30546,30547,30548,30549,30550,30551,30552,30553,30556,34180,38649,20445,22561,39281,23453,25265,25253,26292,35961,40077,29190,26479,30865,24754,21329,21271,36744,32972,36125,38049,20493,29384,22791,24811,28953,34987,22868,33519,26412,31528,23849,32503,29997,27893,36454,36856,36924,40763,27604,37145,31508,24444,30887,34006,34109,27605,27609,27606,24065,24199,30201,38381,25949,24330,24517,36767,22721,33218,36991,38491,38829,36793,32534,36140,25153,20415,21464,21342,36776,36777,36779,36941,26631,24426,33176,34920,40150,24971,21035,30250,24428,25996,28626,28392,23486,25672,20853,20912,26564,19993,31177,39292,28851,30557,30558,30559,30560,30564,30567,30569,30570,30573,30574,30575,30576,30577,30578,30579,30580,30581,30582,30583,30584,30586,30587,30588,30593,30594,30595,30598,30599,30600,30601,30602,30603,30607,30608,30611,30612,30613,30614,30615,30616,30617,30618,30619,30620,30621,30622,30625,30627,30628,30630,30632,30635,30637,30638,30639,30641,30642,30644,30646,30647,30648,30649,30650,30652,30654,30656,30657,30658,30659,30660,30661,30662,30663,30664,30665,30666,30667,30668,30670,30671,30672,30673,30674,30675,30676,30677,30678,30680,30681,30682,30685,30686,30687,30688,30689,30692,30149,24182,29627,33760,25773,25320,38069,27874,21338,21187,25615,38082,31636,20271,24091,33334,33046,33162,28196,27850,39539,25429,21340,21754,34917,22496,19981,24067,27493,31807,37096,24598,25830,29468,35009,26448,25165,36130,30572,36393,37319,24425,33756,34081,39184,21442,34453,27531,24813,24808,28799,33485,33329,20179,27815,34255,25805,31961,27133,26361,33609,21397,31574,20391,20876,27979,23618,36461,25554,21449,33580,33590,26597,30900,25661,23519,23700,24046,35815,25286,26612,35962,25600,25530,34633,39307,35863,32544,38130,20135,38416,39076,26124,29462,30694,30696,30698,30703,30704,30705,30706,30708,30709,30711,30713,30714,30715,30716,30723,30724,30725,30726,30727,30728,30730,30731,30734,30735,30736,30739,30741,30745,30747,30750,30752,30753,30754,30756,30760,30762,30763,30766,30767,30769,30770,30771,30773,30774,30781,30783,30785,30786,30787,30788,30790,30792,30793,30794,30795,30797,30799,30801,30803,30804,30808,30809,30810,30811,30812,30814,30815,30816,30817,30818,30819,30820,30821,30822,30823,30824,30825,30831,30832,30833,30834,30835,30836,30837,30838,30840,30841,30842,30843,30845,30846,30847,30848,30849,30850,30851,22330,23581,24120,38271,20607,32928,21378,25950,30021,21809,20513,36229,25220,38046,26397,22066,28526,24034,21557,28818,36710,25199,25764,25507,24443,28552,37108,33251,36784,23576,26216,24561,27785,38472,36225,34924,25745,31216,22478,27225,25104,21576,20056,31243,24809,28548,35802,25215,36894,39563,31204,21507,30196,25345,21273,27744,36831,24347,39536,32827,40831,20360,23610,36196,32709,26021,28861,20805,20914,34411,23815,23456,25277,37228,30068,36364,31264,24833,31609,20167,32504,30597,19985,33261,21021,20986,27249,21416,36487,38148,38607,28353,38500,26970,30852,30853,30854,30856,30858,30859,30863,30864,30866,30868,30869,30870,30873,30877,30878,30880,30882,30884,30886,30888,30889,30890,30891,30892,30893,30894,30895,30901,30902,30903,30904,30906,30907,30908,30909,30911,30912,30914,30915,30916,30918,30919,30920,30924,30925,30926,30927,30929,30930,30931,30934,30935,30936,30938,30939,30940,30941,30942,30943,30944,30945,30946,30947,30948,30949,30950,30951,30953,30954,30955,30957,30958,30959,30960,30961,30963,30965,30966,30968,30969,30971,30972,30973,30974,30975,30976,30978,30979,30980,30982,30983,30984,30985,30986,30987,30988,30784,20648,30679,25616,35302,22788,25571,24029,31359,26941,20256,33337,21912,20018,30126,31383,24162,24202,38383,21019,21561,28810,25462,38180,22402,26149,26943,37255,21767,28147,32431,34850,25139,32496,30133,33576,30913,38604,36766,24904,29943,35789,27492,21050,36176,27425,32874,33905,22257,21254,20174,19995,20945,31895,37259,31751,20419,36479,31713,31388,25703,23828,20652,33030,30209,31929,28140,32736,26449,23384,23544,30923,25774,25619,25514,25387,38169,25645,36798,31572,30249,25171,22823,21574,27513,20643,25140,24102,27526,20195,36151,34955,24453,36910,30989,30990,30991,30992,30993,30994,30996,30997,30998,30999,31e3,31001,31002,31003,31004,31005,31007,31008,31009,31010,31011,31013,31014,31015,31016,31017,31018,31019,31020,31021,31022,31023,31024,31025,31026,31027,31029,31030,31031,31032,31033,31037,31039,31042,31043,31044,31045,31047,31050,31051,31052,31053,31054,31055,31056,31057,31058,31060,31061,31064,31065,31073,31075,31076,31078,31081,31082,31083,31084,31086,31088,31089,31090,31091,31092,31093,31094,31097,31099,31100,31101,31102,31103,31106,31107,31110,31111,31112,31113,31115,31116,31117,31118,31120,31121,31122,24608,32829,25285,20025,21333,37112,25528,32966,26086,27694,20294,24814,28129,35806,24377,34507,24403,25377,20826,33633,26723,20992,25443,36424,20498,23707,31095,23548,21040,31291,24764,36947,30423,24503,24471,30340,36460,28783,30331,31561,30634,20979,37011,22564,20302,28404,36842,25932,31515,29380,28068,32735,23265,25269,24213,22320,33922,31532,24093,24351,36882,32532,39072,25474,28359,30872,28857,20856,38747,22443,30005,20291,30008,24215,24806,22880,28096,27583,30857,21500,38613,20939,20993,25481,21514,38035,35843,36300,29241,30879,34678,36845,35853,21472,31123,31124,31125,31126,31127,31128,31129,31131,31132,31133,31134,31135,31136,31137,31138,31139,31140,31141,31142,31144,31145,31146,31147,31148,31149,31150,31151,31152,31153,31154,31156,31157,31158,31159,31160,31164,31167,31170,31172,31173,31175,31176,31178,31180,31182,31183,31184,31187,31188,31190,31191,31193,31194,31195,31196,31197,31198,31200,31201,31202,31205,31208,31210,31212,31214,31217,31218,31219,31220,31221,31222,31223,31225,31226,31228,31230,31231,31233,31236,31237,31239,31240,31241,31242,31244,31247,31248,31249,31250,31251,31253,31254,31256,31257,31259,31260,19969,30447,21486,38025,39030,40718,38189,23450,35746,20002,19996,20908,33891,25026,21160,26635,20375,24683,20923,27934,20828,25238,26007,38497,35910,36887,30168,37117,30563,27602,29322,29420,35835,22581,30585,36172,26460,38208,32922,24230,28193,22930,31471,30701,38203,27573,26029,32526,22534,20817,38431,23545,22697,21544,36466,25958,39039,22244,38045,30462,36929,25479,21702,22810,22842,22427,36530,26421,36346,33333,21057,24816,22549,34558,23784,40517,20420,39069,35769,23077,24694,21380,25212,36943,37122,39295,24681,32780,20799,32819,23572,39285,27953,20108,31261,31263,31265,31266,31268,31269,31270,31271,31272,31273,31274,31275,31276,31277,31278,31279,31280,31281,31282,31284,31285,31286,31288,31290,31294,31296,31297,31298,31299,31300,31301,31303,31304,31305,31306,31307,31308,31309,31310,31311,31312,31314,31315,31316,31317,31318,31320,31321,31322,31323,31324,31325,31326,31327,31328,31329,31330,31331,31332,31333,31334,31335,31336,31337,31338,31339,31340,31341,31342,31343,31345,31346,31347,31349,31355,31356,31357,31358,31362,31365,31367,31369,31370,31371,31372,31374,31375,31376,31379,31380,31385,31386,31387,31390,31393,31394,36144,21457,32602,31567,20240,20047,38400,27861,29648,34281,24070,30058,32763,27146,30718,38034,32321,20961,28902,21453,36820,33539,36137,29359,39277,27867,22346,33459,26041,32938,25151,38450,22952,20223,35775,32442,25918,33778,38750,21857,39134,32933,21290,35837,21536,32954,24223,27832,36153,33452,37210,21545,27675,20998,32439,22367,28954,27774,31881,22859,20221,24575,24868,31914,20016,23553,26539,34562,23792,38155,39118,30127,28925,36898,20911,32541,35773,22857,20964,20315,21542,22827,25975,32932,23413,25206,25282,36752,24133,27679,31526,20239,20440,26381,31395,31396,31399,31401,31402,31403,31406,31407,31408,31409,31410,31412,31413,31414,31415,31416,31417,31418,31419,31420,31421,31422,31424,31425,31426,31427,31428,31429,31430,31431,31432,31433,31434,31436,31437,31438,31439,31440,31441,31442,31443,31444,31445,31447,31448,31450,31451,31452,31453,31457,31458,31460,31463,31464,31465,31466,31467,31468,31470,31472,31473,31474,31475,31476,31477,31478,31479,31480,31483,31484,31486,31488,31489,31490,31493,31495,31497,31500,31501,31502,31504,31506,31507,31510,31511,31512,31514,31516,31517,31519,31521,31522,31523,31527,31529,31533,28014,28074,31119,34993,24343,29995,25242,36741,20463,37340,26023,33071,33105,24220,33104,36212,21103,35206,36171,22797,20613,20184,38428,29238,33145,36127,23500,35747,38468,22919,32538,21648,22134,22030,35813,25913,27010,38041,30422,28297,24178,29976,26438,26577,31487,32925,36214,24863,31174,25954,36195,20872,21018,38050,32568,32923,32434,23703,28207,26464,31705,30347,39640,33167,32660,31957,25630,38224,31295,21578,21733,27468,25601,25096,40509,33011,30105,21106,38761,33883,26684,34532,38401,38548,38124,20010,21508,32473,26681,36319,32789,26356,24218,32697,31535,31536,31538,31540,31541,31542,31543,31545,31547,31549,31551,31552,31553,31554,31555,31556,31558,31560,31562,31565,31566,31571,31573,31575,31577,31580,31582,31583,31585,31587,31588,31589,31590,31591,31592,31593,31594,31595,31596,31597,31599,31600,31603,31604,31606,31608,31610,31612,31613,31615,31617,31618,31619,31620,31622,31623,31624,31625,31626,31627,31628,31630,31631,31633,31634,31635,31638,31640,31641,31642,31643,31646,31647,31648,31651,31652,31653,31662,31663,31664,31666,31667,31669,31670,31671,31673,31674,31675,31676,31677,31678,31679,31680,31682,31683,31684,22466,32831,26775,24037,25915,21151,24685,40858,20379,36524,20844,23467,24339,24041,27742,25329,36129,20849,38057,21246,27807,33503,29399,22434,26500,36141,22815,36764,33735,21653,31629,20272,27837,23396,22993,40723,21476,34506,39592,35895,32929,25925,39038,22266,38599,21038,29916,21072,23521,25346,35074,20054,25296,24618,26874,20851,23448,20896,35266,31649,39302,32592,24815,28748,36143,20809,24191,36891,29808,35268,22317,30789,24402,40863,38394,36712,39740,35809,30328,26690,26588,36330,36149,21053,36746,28378,26829,38149,37101,22269,26524,35065,36807,21704,31685,31688,31689,31690,31691,31693,31694,31695,31696,31698,31700,31701,31702,31703,31704,31707,31708,31710,31711,31712,31714,31715,31716,31719,31720,31721,31723,31724,31725,31727,31728,31730,31731,31732,31733,31734,31736,31737,31738,31739,31741,31743,31744,31745,31746,31747,31748,31749,31750,31752,31753,31754,31757,31758,31760,31761,31762,31763,31764,31765,31767,31768,31769,31770,31771,31772,31773,31774,31776,31777,31778,31779,31780,31781,31784,31785,31787,31788,31789,31790,31791,31792,31793,31794,31795,31796,31797,31798,31799,31801,31802,31803,31804,31805,31806,31810,39608,23401,28023,27686,20133,23475,39559,37219,25e3,37039,38889,21547,28085,23506,20989,21898,32597,32752,25788,25421,26097,25022,24717,28938,27735,27721,22831,26477,33322,22741,22158,35946,27627,37085,22909,32791,21495,28009,21621,21917,33655,33743,26680,31166,21644,20309,21512,30418,35977,38402,27827,28088,36203,35088,40548,36154,22079,40657,30165,24456,29408,24680,21756,20136,27178,34913,24658,36720,21700,28888,34425,40511,27946,23439,24344,32418,21897,20399,29492,21564,21402,20505,21518,21628,20046,24573,29786,22774,33899,32993,34676,29392,31946,28246,31811,31812,31813,31814,31815,31816,31817,31818,31819,31820,31822,31823,31824,31825,31826,31827,31828,31829,31830,31831,31832,31833,31834,31835,31836,31837,31838,31839,31840,31841,31842,31843,31844,31845,31846,31847,31848,31849,31850,31851,31852,31853,31854,31855,31856,31857,31858,31861,31862,31863,31864,31865,31866,31870,31871,31872,31873,31874,31875,31876,31877,31878,31879,31880,31882,31883,31884,31885,31886,31887,31888,31891,31892,31894,31897,31898,31899,31904,31905,31907,31910,31911,31912,31913,31915,31916,31917,31919,31920,31924,31925,31926,31927,31928,31930,31931,24359,34382,21804,25252,20114,27818,25143,33457,21719,21326,29502,28369,30011,21010,21270,35805,27088,24458,24576,28142,22351,27426,29615,26707,36824,32531,25442,24739,21796,30186,35938,28949,28067,23462,24187,33618,24908,40644,30970,34647,31783,30343,20976,24822,29004,26179,24140,24653,35854,28784,25381,36745,24509,24674,34516,22238,27585,24724,24935,21321,24800,26214,36159,31229,20250,28905,27719,35763,35826,32472,33636,26127,23130,39746,27985,28151,35905,27963,20249,28779,33719,25110,24785,38669,36135,31096,20987,22334,22522,26426,30072,31293,31215,31637,31935,31936,31938,31939,31940,31942,31945,31947,31950,31951,31952,31953,31954,31955,31956,31960,31962,31963,31965,31966,31969,31970,31971,31972,31973,31974,31975,31977,31978,31979,31980,31981,31982,31984,31985,31986,31987,31988,31989,31990,31991,31993,31994,31996,31997,31998,31999,32e3,32001,32002,32003,32004,32005,32006,32007,32008,32009,32011,32012,32013,32014,32015,32016,32017,32018,32019,32020,32021,32022,32023,32024,32025,32026,32027,32028,32029,32030,32031,32033,32035,32036,32037,32038,32040,32041,32042,32044,32045,32046,32048,32049,32050,32051,32052,32053,32054,32908,39269,36857,28608,35749,40481,23020,32489,32521,21513,26497,26840,36753,31821,38598,21450,24613,30142,27762,21363,23241,32423,25380,20960,33034,24049,34015,25216,20864,23395,20238,31085,21058,24760,27982,23492,23490,35745,35760,26082,24524,38469,22931,32487,32426,22025,26551,22841,20339,23478,21152,33626,39050,36158,30002,38078,20551,31292,20215,26550,39550,23233,27516,30417,22362,23574,31546,38388,29006,20860,32937,33392,22904,32516,33575,26816,26604,30897,30839,25315,25441,31616,20461,21098,20943,33616,27099,37492,36341,36145,35265,38190,31661,20214,32055,32056,32057,32058,32059,32060,32061,32062,32063,32064,32065,32066,32067,32068,32069,32070,32071,32072,32073,32074,32075,32076,32077,32078,32079,32080,32081,32082,32083,32084,32085,32086,32087,32088,32089,32090,32091,32092,32093,32094,32095,32096,32097,32098,32099,32100,32101,32102,32103,32104,32105,32106,32107,32108,32109,32111,32112,32113,32114,32115,32116,32117,32118,32120,32121,32122,32123,32124,32125,32126,32127,32128,32129,32130,32131,32132,32133,32134,32135,32136,32137,32138,32139,32140,32141,32142,32143,32144,32145,32146,32147,32148,32149,32150,32151,32152,20581,33328,21073,39279,28176,28293,28071,24314,20725,23004,23558,27974,27743,30086,33931,26728,22870,35762,21280,37233,38477,34121,26898,30977,28966,33014,20132,37066,27975,39556,23047,22204,25605,38128,30699,20389,33050,29409,35282,39290,32564,32478,21119,25945,37237,36735,36739,21483,31382,25581,25509,30342,31224,34903,38454,25130,21163,33410,26708,26480,25463,30571,31469,27905,32467,35299,22992,25106,34249,33445,30028,20511,20171,30117,35819,23626,24062,31563,26020,37329,20170,27941,35167,32039,38182,20165,35880,36827,38771,26187,31105,36817,28908,28024,32153,32154,32155,32156,32157,32158,32159,32160,32161,32162,32163,32164,32165,32167,32168,32169,32170,32171,32172,32173,32175,32176,32177,32178,32179,32180,32181,32182,32183,32184,32185,32186,32187,32188,32189,32190,32191,32192,32193,32194,32195,32196,32197,32198,32199,32200,32201,32202,32203,32204,32205,32206,32207,32208,32209,32210,32211,32212,32213,32214,32215,32216,32217,32218,32219,32220,32221,32222,32223,32224,32225,32226,32227,32228,32229,32230,32231,32232,32233,32234,32235,32236,32237,32238,32239,32240,32241,32242,32243,32244,32245,32246,32247,32248,32249,32250,23613,21170,33606,20834,33550,30555,26230,40120,20140,24778,31934,31923,32463,20117,35686,26223,39048,38745,22659,25964,38236,24452,30153,38742,31455,31454,20928,28847,31384,25578,31350,32416,29590,38893,20037,28792,20061,37202,21417,25937,26087,33276,33285,21646,23601,30106,38816,25304,29401,30141,23621,39545,33738,23616,21632,30697,20030,27822,32858,25298,25454,24040,20855,36317,36382,38191,20465,21477,24807,28844,21095,25424,40515,23071,20518,30519,21367,32482,25733,25899,25225,25496,20500,29237,35273,20915,35776,32477,22343,33740,38055,20891,21531,23803,32251,32252,32253,32254,32255,32256,32257,32258,32259,32260,32261,32262,32263,32264,32265,32266,32267,32268,32269,32270,32271,32272,32273,32274,32275,32276,32277,32278,32279,32280,32281,32282,32283,32284,32285,32286,32287,32288,32289,32290,32291,32292,32293,32294,32295,32296,32297,32298,32299,32300,32301,32302,32303,32304,32305,32306,32307,32308,32309,32310,32311,32312,32313,32314,32316,32317,32318,32319,32320,32322,32323,32324,32325,32326,32328,32329,32330,32331,32332,32333,32334,32335,32336,32337,32338,32339,32340,32341,32342,32343,32344,32345,32346,32347,32348,32349,20426,31459,27994,37089,39567,21888,21654,21345,21679,24320,25577,26999,20975,24936,21002,22570,21208,22350,30733,30475,24247,24951,31968,25179,25239,20130,28821,32771,25335,28900,38752,22391,33499,26607,26869,30933,39063,31185,22771,21683,21487,28212,20811,21051,23458,35838,32943,21827,22438,24691,22353,21549,31354,24656,23380,25511,25248,21475,25187,23495,26543,21741,31391,33510,37239,24211,35044,22840,22446,25358,36328,33007,22359,31607,20393,24555,23485,27454,21281,31568,29378,26694,30719,30518,26103,20917,20111,30420,23743,31397,33909,22862,39745,20608,32350,32351,32352,32353,32354,32355,32356,32357,32358,32359,32360,32361,32362,32363,32364,32365,32366,32367,32368,32369,32370,32371,32372,32373,32374,32375,32376,32377,32378,32379,32380,32381,32382,32383,32384,32385,32387,32388,32389,32390,32391,32392,32393,32394,32395,32396,32397,32398,32399,32400,32401,32402,32403,32404,32405,32406,32407,32408,32409,32410,32412,32413,32414,32430,32436,32443,32444,32470,32484,32492,32505,32522,32528,32542,32567,32569,32571,32572,32573,32574,32575,32576,32577,32579,32582,32583,32584,32585,32586,32587,32588,32589,32590,32591,32594,32595,39304,24871,28291,22372,26118,25414,22256,25324,25193,24275,38420,22403,25289,21895,34593,33098,36771,21862,33713,26469,36182,34013,23146,26639,25318,31726,38417,20848,28572,35888,25597,35272,25042,32518,28866,28389,29701,27028,29436,24266,37070,26391,28010,25438,21171,29282,32769,20332,23013,37226,28889,28061,21202,20048,38647,38253,34174,30922,32047,20769,22418,25794,32907,31867,27882,26865,26974,20919,21400,26792,29313,40654,31729,29432,31163,28435,29702,26446,37324,40100,31036,33673,33620,21519,26647,20029,21385,21169,30782,21382,21033,20616,20363,20432,32598,32601,32603,32604,32605,32606,32608,32611,32612,32613,32614,32615,32619,32620,32621,32623,32624,32627,32629,32630,32631,32632,32634,32635,32636,32637,32639,32640,32642,32643,32644,32645,32646,32647,32648,32649,32651,32653,32655,32656,32657,32658,32659,32661,32662,32663,32664,32665,32667,32668,32672,32674,32675,32677,32678,32680,32681,32682,32683,32684,32685,32686,32689,32691,32692,32693,32694,32695,32698,32699,32702,32704,32706,32707,32708,32710,32711,32712,32713,32715,32717,32719,32720,32721,32722,32723,32726,32727,32729,32730,32731,32732,32733,32734,32738,32739,30178,31435,31890,27813,38582,21147,29827,21737,20457,32852,33714,36830,38256,24265,24604,28063,24088,25947,33080,38142,24651,28860,32451,31918,20937,26753,31921,33391,20004,36742,37327,26238,20142,35845,25769,32842,20698,30103,29134,23525,36797,28518,20102,25730,38243,24278,26009,21015,35010,28872,21155,29454,29747,26519,30967,38678,20020,37051,40158,28107,20955,36161,21533,25294,29618,33777,38646,40836,38083,20278,32666,20940,28789,38517,23725,39046,21478,20196,28316,29705,27060,30827,39311,30041,21016,30244,27969,26611,20845,40857,32843,21657,31548,31423,32740,32743,32744,32746,32747,32748,32749,32751,32754,32756,32757,32758,32759,32760,32761,32762,32765,32766,32767,32770,32775,32776,32777,32778,32782,32783,32785,32787,32794,32795,32797,32798,32799,32801,32803,32804,32811,32812,32813,32814,32815,32816,32818,32820,32825,32826,32828,32830,32832,32833,32836,32837,32839,32840,32841,32846,32847,32848,32849,32851,32853,32854,32855,32857,32859,32860,32861,32862,32863,32864,32865,32866,32867,32868,32869,32870,32871,32872,32875,32876,32877,32878,32879,32880,32882,32883,32884,32885,32886,32887,32888,32889,32890,32891,32892,32893,38534,22404,25314,38471,27004,23044,25602,31699,28431,38475,33446,21346,39045,24208,28809,25523,21348,34383,40065,40595,30860,38706,36335,36162,40575,28510,31108,24405,38470,25134,39540,21525,38109,20387,26053,23653,23649,32533,34385,27695,24459,29575,28388,32511,23782,25371,23402,28390,21365,20081,25504,30053,25249,36718,20262,20177,27814,32438,35770,33821,34746,32599,36923,38179,31657,39585,35064,33853,27931,39558,32476,22920,40635,29595,30721,34434,39532,39554,22043,21527,22475,20080,40614,21334,36808,33033,30610,39314,34542,28385,34067,26364,24930,28459,32894,32897,32898,32901,32904,32906,32909,32910,32911,32912,32913,32914,32916,32917,32919,32921,32926,32931,32934,32935,32936,32940,32944,32947,32949,32950,32952,32953,32955,32965,32967,32968,32969,32970,32971,32975,32976,32977,32978,32979,32980,32981,32984,32991,32992,32994,32995,32998,33006,33013,33015,33017,33019,33022,33023,33024,33025,33027,33028,33029,33031,33032,33035,33036,33045,33047,33049,33051,33052,33053,33055,33056,33057,33058,33059,33060,33061,33062,33063,33064,33065,33066,33067,33069,33070,33072,33075,33076,33077,33079,33081,33082,33083,33084,33085,33087,35881,33426,33579,30450,27667,24537,33725,29483,33541,38170,27611,30683,38086,21359,33538,20882,24125,35980,36152,20040,29611,26522,26757,37238,38665,29028,27809,30473,23186,38209,27599,32654,26151,23504,22969,23194,38376,38391,20204,33804,33945,27308,30431,38192,29467,26790,23391,30511,37274,38753,31964,36855,35868,24357,31859,31192,35269,27852,34588,23494,24130,26825,30496,32501,20885,20813,21193,23081,32517,38754,33495,25551,30596,34256,31186,28218,24217,22937,34065,28781,27665,25279,30399,25935,24751,38397,26126,34719,40483,38125,21517,21629,35884,25720,33088,33089,33090,33091,33092,33093,33095,33097,33101,33102,33103,33106,33110,33111,33112,33115,33116,33117,33118,33119,33121,33122,33123,33124,33126,33128,33130,33131,33132,33135,33138,33139,33141,33142,33143,33144,33153,33155,33156,33157,33158,33159,33161,33163,33164,33165,33166,33168,33170,33171,33172,33173,33174,33175,33177,33178,33182,33183,33184,33185,33186,33188,33189,33191,33193,33195,33196,33197,33198,33199,33200,33201,33202,33204,33205,33206,33207,33208,33209,33212,33213,33214,33215,33220,33221,33223,33224,33225,33227,33229,33230,33231,33232,33233,33234,33235,25721,34321,27169,33180,30952,25705,39764,25273,26411,33707,22696,40664,27819,28448,23518,38476,35851,29279,26576,25287,29281,20137,22982,27597,22675,26286,24149,21215,24917,26408,30446,30566,29287,31302,25343,21738,21584,38048,37027,23068,32435,27670,20035,22902,32784,22856,21335,30007,38590,22218,25376,33041,24700,38393,28118,21602,39297,20869,23273,33021,22958,38675,20522,27877,23612,25311,20320,21311,33147,36870,28346,34091,25288,24180,30910,25781,25467,24565,23064,37247,40479,23615,25423,32834,23421,21870,38218,38221,28037,24744,26592,29406,20957,23425,33236,33237,33238,33239,33240,33241,33242,33243,33244,33245,33246,33247,33248,33249,33250,33252,33253,33254,33256,33257,33259,33262,33263,33264,33265,33266,33269,33270,33271,33272,33273,33274,33277,33279,33283,33287,33288,33289,33290,33291,33294,33295,33297,33299,33301,33302,33303,33304,33305,33306,33309,33312,33316,33317,33318,33319,33321,33326,33330,33338,33340,33341,33343,33344,33345,33346,33347,33349,33350,33352,33354,33356,33357,33358,33360,33361,33362,33363,33364,33365,33366,33367,33369,33371,33372,33373,33374,33376,33377,33378,33379,33380,33381,33382,33383,33385,25319,27870,29275,25197,38062,32445,33043,27987,20892,24324,22900,21162,24594,22899,26262,34384,30111,25386,25062,31983,35834,21734,27431,40485,27572,34261,21589,20598,27812,21866,36276,29228,24085,24597,29750,25293,25490,29260,24472,28227,27966,25856,28504,30424,30928,30460,30036,21028,21467,20051,24222,26049,32810,32982,25243,21638,21032,28846,34957,36305,27873,21624,32986,22521,35060,36180,38506,37197,20329,27803,21943,30406,30768,25256,28921,28558,24429,34028,26842,30844,31735,33192,26379,40527,25447,30896,22383,30738,38713,25209,25259,21128,29749,27607,33386,33387,33388,33389,33393,33397,33398,33399,33400,33403,33404,33408,33409,33411,33413,33414,33415,33417,33420,33424,33427,33428,33429,33430,33434,33435,33438,33440,33442,33443,33447,33458,33461,33462,33466,33467,33468,33471,33472,33474,33475,33477,33478,33481,33488,33494,33497,33498,33501,33506,33511,33512,33513,33514,33516,33517,33518,33520,33522,33523,33525,33526,33528,33530,33532,33533,33534,33535,33536,33546,33547,33549,33552,33554,33555,33558,33560,33561,33565,33566,33567,33568,33569,33570,33571,33572,33573,33574,33577,33578,33582,33584,33586,33591,33595,33597,21860,33086,30130,30382,21305,30174,20731,23617,35692,31687,20559,29255,39575,39128,28418,29922,31080,25735,30629,25340,39057,36139,21697,32856,20050,22378,33529,33805,24179,20973,29942,35780,23631,22369,27900,39047,23110,30772,39748,36843,31893,21078,25169,38138,20166,33670,33889,33769,33970,22484,26420,22275,26222,28006,35889,26333,28689,26399,27450,26646,25114,22971,19971,20932,28422,26578,27791,20854,26827,22855,27495,30054,23822,33040,40784,26071,31048,31041,39569,36215,23682,20062,20225,21551,22865,30732,22120,27668,36804,24323,27773,27875,35755,25488,33598,33599,33601,33602,33604,33605,33608,33610,33611,33612,33613,33614,33619,33621,33622,33623,33624,33625,33629,33634,33648,33649,33650,33651,33652,33653,33654,33657,33658,33662,33663,33664,33665,33666,33667,33668,33671,33672,33674,33675,33676,33677,33679,33680,33681,33684,33685,33686,33687,33689,33690,33693,33695,33697,33698,33699,33700,33701,33702,33703,33708,33709,33710,33711,33717,33723,33726,33727,33730,33731,33732,33734,33736,33737,33739,33741,33742,33744,33745,33746,33747,33749,33751,33753,33754,33755,33758,33762,33763,33764,33766,33767,33768,33771,33772,33773,24688,27965,29301,25190,38030,38085,21315,36801,31614,20191,35878,20094,40660,38065,38067,21069,28508,36963,27973,35892,22545,23884,27424,27465,26538,21595,33108,32652,22681,34103,24378,25250,27207,38201,25970,24708,26725,30631,20052,20392,24039,38808,25772,32728,23789,20431,31373,20999,33540,19988,24623,31363,38054,20405,20146,31206,29748,21220,33465,25810,31165,23517,27777,38738,36731,27682,20542,21375,28165,25806,26228,27696,24773,39031,35831,24198,29756,31351,31179,19992,37041,29699,27714,22234,37195,27845,36235,21306,34502,26354,36527,23624,39537,28192,33774,33775,33779,33780,33781,33782,33783,33786,33787,33788,33790,33791,33792,33794,33797,33799,33800,33801,33802,33808,33810,33811,33812,33813,33814,33815,33817,33818,33819,33822,33823,33824,33825,33826,33827,33833,33834,33835,33836,33837,33838,33839,33840,33842,33843,33844,33845,33846,33847,33849,33850,33851,33854,33855,33856,33857,33858,33859,33860,33861,33863,33864,33865,33866,33867,33868,33869,33870,33871,33872,33874,33875,33876,33877,33878,33880,33885,33886,33887,33888,33890,33892,33893,33894,33895,33896,33898,33902,33903,33904,33906,33908,33911,33913,33915,33916,21462,23094,40843,36259,21435,22280,39079,26435,37275,27849,20840,30154,25331,29356,21048,21149,32570,28820,30264,21364,40522,27063,30830,38592,35033,32676,28982,29123,20873,26579,29924,22756,25880,22199,35753,39286,25200,32469,24825,28909,22764,20161,20154,24525,38887,20219,35748,20995,22922,32427,25172,20173,26085,25102,33592,33993,33635,34701,29076,28342,23481,32466,20887,25545,26580,32905,33593,34837,20754,23418,22914,36785,20083,27741,20837,35109,36719,38446,34122,29790,38160,38384,28070,33509,24369,25746,27922,33832,33134,40131,22622,36187,19977,21441,33917,33918,33919,33920,33921,33923,33924,33925,33926,33930,33933,33935,33936,33937,33938,33939,33940,33941,33942,33944,33946,33947,33949,33950,33951,33952,33954,33955,33956,33957,33958,33959,33960,33961,33962,33963,33964,33965,33966,33968,33969,33971,33973,33974,33975,33979,33980,33982,33984,33986,33987,33989,33990,33991,33992,33995,33996,33998,33999,34002,34004,34005,34007,34008,34009,34010,34011,34012,34014,34017,34018,34020,34023,34024,34025,34026,34027,34029,34030,34031,34033,34034,34035,34036,34037,34038,34039,34040,34041,34042,34043,34045,34046,34048,34049,34050,20254,25955,26705,21971,20007,25620,39578,25195,23234,29791,33394,28073,26862,20711,33678,30722,26432,21049,27801,32433,20667,21861,29022,31579,26194,29642,33515,26441,23665,21024,29053,34923,38378,38485,25797,36193,33203,21892,27733,25159,32558,22674,20260,21830,36175,26188,19978,23578,35059,26786,25422,31245,28903,33421,21242,38902,23569,21736,37045,32461,22882,36170,34503,33292,33293,36198,25668,23556,24913,28041,31038,35774,30775,30003,21627,20280,36523,28145,23072,32453,31070,27784,23457,23158,29978,32958,24910,28183,22768,29983,29989,29298,21319,32499,34051,34052,34053,34054,34055,34056,34057,34058,34059,34061,34062,34063,34064,34066,34068,34069,34070,34072,34073,34075,34076,34077,34078,34080,34082,34083,34084,34085,34086,34087,34088,34089,34090,34093,34094,34095,34096,34097,34098,34099,34100,34101,34102,34110,34111,34112,34113,34114,34116,34117,34118,34119,34123,34124,34125,34126,34127,34128,34129,34130,34131,34132,34133,34135,34136,34138,34139,34140,34141,34143,34144,34145,34146,34147,34149,34150,34151,34153,34154,34155,34156,34157,34158,34159,34160,34161,34163,34165,34166,34167,34168,34172,34173,34175,34176,34177,30465,30427,21097,32988,22307,24072,22833,29422,26045,28287,35799,23608,34417,21313,30707,25342,26102,20160,39135,34432,23454,35782,21490,30690,20351,23630,39542,22987,24335,31034,22763,19990,26623,20107,25325,35475,36893,21183,26159,21980,22124,36866,20181,20365,37322,39280,27663,24066,24643,23460,35270,35797,25910,25163,39318,23432,23551,25480,21806,21463,30246,20861,34092,26530,26803,27530,25234,36755,21460,33298,28113,30095,20070,36174,23408,29087,34223,26257,26329,32626,34560,40653,40736,23646,26415,36848,26641,26463,25101,31446,22661,24246,25968,28465,34178,34179,34182,34184,34185,34186,34187,34188,34189,34190,34192,34193,34194,34195,34196,34197,34198,34199,34200,34201,34202,34205,34206,34207,34208,34209,34210,34211,34213,34214,34215,34217,34219,34220,34221,34225,34226,34227,34228,34229,34230,34232,34234,34235,34236,34237,34238,34239,34240,34242,34243,34244,34245,34246,34247,34248,34250,34251,34252,34253,34254,34257,34258,34260,34262,34263,34264,34265,34266,34267,34269,34270,34271,34272,34273,34274,34275,34277,34278,34279,34280,34282,34283,34284,34285,34286,34287,34288,34289,34290,34291,34292,34293,34294,34295,34296,24661,21047,32781,25684,34928,29993,24069,26643,25332,38684,21452,29245,35841,27700,30561,31246,21550,30636,39034,33308,35828,30805,26388,28865,26031,25749,22070,24605,31169,21496,19997,27515,32902,23546,21987,22235,20282,20284,39282,24051,26494,32824,24578,39042,36865,23435,35772,35829,25628,33368,25822,22013,33487,37221,20439,32032,36895,31903,20723,22609,28335,23487,35785,32899,37240,33948,31639,34429,38539,38543,32485,39635,30862,23681,31319,36930,38567,31071,23385,25439,31499,34001,26797,21766,32553,29712,32034,38145,25152,22604,20182,23427,22905,22612,34297,34298,34300,34301,34302,34304,34305,34306,34307,34308,34310,34311,34312,34313,34314,34315,34316,34317,34318,34319,34320,34322,34323,34324,34325,34327,34328,34329,34330,34331,34332,34333,34334,34335,34336,34337,34338,34339,34340,34341,34342,34344,34346,34347,34348,34349,34350,34351,34352,34353,34354,34355,34356,34357,34358,34359,34361,34362,34363,34365,34366,34367,34368,34369,34370,34371,34372,34373,34374,34375,34376,34377,34378,34379,34380,34386,34387,34389,34390,34391,34392,34393,34395,34396,34397,34399,34400,34401,34403,34404,34405,34406,34407,34408,34409,34410,29549,25374,36427,36367,32974,33492,25260,21488,27888,37214,22826,24577,27760,22349,25674,36138,30251,28393,22363,27264,30192,28525,35885,35848,22374,27631,34962,30899,25506,21497,28845,27748,22616,25642,22530,26848,33179,21776,31958,20504,36538,28108,36255,28907,25487,28059,28372,32486,33796,26691,36867,28120,38518,35752,22871,29305,34276,33150,30140,35466,26799,21076,36386,38161,25552,39064,36420,21884,20307,26367,22159,24789,28053,21059,23625,22825,28155,22635,3e4,29980,24684,33300,33094,25361,26465,36834,30522,36339,36148,38081,24086,21381,21548,28867,34413,34415,34416,34418,34419,34420,34421,34422,34423,34424,34435,34436,34437,34438,34439,34440,34441,34446,34447,34448,34449,34450,34452,34454,34455,34456,34457,34458,34459,34462,34463,34464,34465,34466,34469,34470,34475,34477,34478,34482,34483,34487,34488,34489,34491,34492,34493,34494,34495,34497,34498,34499,34501,34504,34508,34509,34514,34515,34517,34518,34519,34522,34524,34525,34528,34529,34530,34531,34533,34534,34535,34536,34538,34539,34540,34543,34549,34550,34551,34554,34555,34556,34557,34559,34561,34564,34565,34566,34571,34572,34574,34575,34576,34577,34580,34582,27712,24311,20572,20141,24237,25402,33351,36890,26704,37230,30643,21516,38108,24420,31461,26742,25413,31570,32479,30171,20599,25237,22836,36879,20984,31171,31361,22270,24466,36884,28034,23648,22303,21520,20820,28237,22242,25512,39059,33151,34581,35114,36864,21534,23663,33216,25302,25176,33073,40501,38464,39534,39548,26925,22949,25299,21822,25366,21703,34521,27964,23043,29926,34972,27498,22806,35916,24367,28286,29609,39037,20024,28919,23436,30871,25405,26202,30358,24779,23451,23113,19975,33109,27754,29579,20129,26505,32593,24448,26106,26395,24536,22916,23041,34585,34587,34589,34591,34592,34596,34598,34599,34600,34602,34603,34604,34605,34607,34608,34610,34611,34613,34614,34616,34617,34618,34620,34621,34624,34625,34626,34627,34628,34629,34630,34634,34635,34637,34639,34640,34641,34642,34644,34645,34646,34648,34650,34651,34652,34653,34654,34655,34657,34658,34662,34663,34664,34665,34666,34667,34668,34669,34671,34673,34674,34675,34677,34679,34680,34681,34682,34687,34688,34689,34692,34694,34695,34697,34698,34700,34702,34703,34704,34705,34706,34708,34709,34710,34712,34713,34714,34715,34716,34717,34718,34720,34721,34722,34723,34724,24013,24494,21361,38886,36829,26693,22260,21807,24799,20026,28493,32500,33479,33806,22996,20255,20266,23614,32428,26410,34074,21619,30031,32963,21890,39759,20301,28205,35859,23561,24944,21355,30239,28201,34442,25991,38395,32441,21563,31283,32010,38382,21985,32705,29934,25373,34583,28065,31389,25105,26017,21351,25569,27779,24043,21596,38056,20044,27745,35820,23627,26080,33436,26791,21566,21556,27595,27494,20116,25410,21320,33310,20237,20398,22366,25098,38654,26212,29289,21247,21153,24735,35823,26132,29081,26512,35199,30802,30717,26224,22075,21560,38177,29306,34725,34726,34727,34729,34730,34734,34736,34737,34738,34740,34742,34743,34744,34745,34747,34748,34750,34751,34753,34754,34755,34756,34757,34759,34760,34761,34764,34765,34766,34767,34768,34772,34773,34774,34775,34776,34777,34778,34780,34781,34782,34783,34785,34786,34787,34788,34790,34791,34792,34793,34795,34796,34797,34799,34800,34801,34802,34803,34804,34805,34806,34807,34808,34810,34811,34812,34813,34815,34816,34817,34818,34820,34821,34822,34823,34824,34825,34827,34828,34829,34830,34831,34832,34833,34834,34836,34839,34840,34841,34842,34844,34845,34846,34847,34848,34851,31232,24687,24076,24713,33181,22805,24796,29060,28911,28330,27728,29312,27268,34989,24109,20064,23219,21916,38115,27927,31995,38553,25103,32454,30606,34430,21283,38686,36758,26247,23777,20384,29421,19979,21414,22799,21523,25472,38184,20808,20185,40092,32420,21688,36132,34900,33335,38386,28046,24358,23244,26174,38505,29616,29486,21439,33146,39301,32673,23466,38519,38480,32447,30456,21410,38262,39321,31665,35140,28248,20065,32724,31077,35814,24819,21709,20139,39033,24055,27233,20687,21521,35937,33831,30813,38660,21066,21742,22179,38144,28040,23477,28102,26195,34852,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34867,34868,34869,34870,34871,34872,34874,34875,34877,34878,34879,34881,34882,34883,34886,34887,34888,34889,34890,34891,34894,34895,34896,34897,34898,34899,34901,34902,34904,34906,34907,34908,34909,34910,34911,34912,34918,34919,34922,34925,34927,34929,34931,34932,34933,34934,34936,34937,34938,34939,34940,34944,34947,34950,34951,34953,34954,34956,34958,34959,34960,34961,34963,34964,34965,34967,34968,34969,34970,34971,34973,34974,34975,34976,34977,34979,34981,34982,34983,34984,34985,34986,23567,23389,26657,32918,21880,31505,25928,26964,20123,27463,34638,38795,21327,25375,25658,37034,26012,32961,35856,20889,26800,21368,34809,25032,27844,27899,35874,23633,34218,33455,38156,27427,36763,26032,24571,24515,20449,34885,26143,33125,29481,24826,20852,21009,22411,24418,37026,34892,37266,24184,26447,24615,22995,20804,20982,33016,21256,27769,38596,29066,20241,20462,32670,26429,21957,38152,31168,34966,32483,22687,25100,38656,34394,22040,39035,24464,35768,33988,37207,21465,26093,24207,30044,24676,32110,23167,32490,32493,36713,21927,23459,24748,26059,29572,34988,34990,34991,34992,34994,34995,34996,34997,34998,35e3,35001,35002,35003,35005,35006,35007,35008,35011,35012,35015,35016,35018,35019,35020,35021,35023,35024,35025,35027,35030,35031,35034,35035,35036,35037,35038,35040,35041,35046,35047,35049,35050,35051,35052,35053,35054,35055,35058,35061,35062,35063,35066,35067,35069,35071,35072,35073,35075,35076,35077,35078,35079,35080,35081,35083,35084,35085,35086,35087,35089,35092,35093,35094,35095,35096,35100,35101,35102,35103,35104,35106,35107,35108,35110,35111,35112,35113,35116,35117,35118,35119,35121,35122,35123,35125,35127,36873,30307,30505,32474,38772,34203,23398,31348,38634,34880,21195,29071,24490,26092,35810,23547,39535,24033,27529,27739,35757,35759,36874,36805,21387,25276,40486,40493,21568,20011,33469,29273,34460,23830,34905,28079,38597,21713,20122,35766,28937,21693,38409,28895,28153,30416,20005,30740,34578,23721,24310,35328,39068,38414,28814,27839,22852,25513,30524,34893,28436,33395,22576,29141,21388,30746,38593,21761,24422,28976,23476,35866,39564,27523,22830,40495,31207,26472,25196,20335,30113,32650,27915,38451,27687,20208,30162,20859,26679,28478,36992,33136,22934,29814,35128,35129,35130,35131,35132,35133,35134,35135,35136,35138,35139,35141,35142,35143,35144,35145,35146,35147,35148,35149,35150,35151,35152,35153,35154,35155,35156,35157,35158,35159,35160,35161,35162,35163,35164,35165,35168,35169,35170,35171,35172,35173,35175,35176,35177,35178,35179,35180,35181,35182,35183,35184,35185,35186,35187,35188,35189,35190,35191,35192,35193,35194,35196,35197,35198,35200,35202,35204,35205,35207,35208,35209,35210,35211,35212,35213,35214,35215,35216,35217,35218,35219,35220,35221,35222,35223,35224,35225,35226,35227,35228,35229,35230,35231,35232,35233,25671,23591,36965,31377,35875,23002,21676,33280,33647,35201,32768,26928,22094,32822,29239,37326,20918,20063,39029,25494,19994,21494,26355,33099,22812,28082,19968,22777,21307,25558,38129,20381,20234,34915,39056,22839,36951,31227,20202,33008,30097,27778,23452,23016,24413,26885,34433,20506,24050,20057,30691,20197,33402,25233,26131,37009,23673,20159,24441,33222,36920,32900,30123,20134,35028,24847,27589,24518,20041,30410,28322,35811,35758,35850,35793,24322,32764,32716,32462,33589,33643,22240,27575,38899,38452,23035,21535,38134,28139,23493,39278,23609,24341,38544,35234,35235,35236,35237,35238,35239,35240,35241,35242,35243,35244,35245,35246,35247,35248,35249,35250,35251,35252,35253,35254,35255,35256,35257,35258,35259,35260,35261,35262,35263,35264,35267,35277,35283,35284,35285,35287,35288,35289,35291,35293,35295,35296,35297,35298,35300,35303,35304,35305,35306,35308,35309,35310,35312,35313,35314,35316,35317,35318,35319,35320,35321,35322,35323,35324,35325,35326,35327,35329,35330,35331,35332,35333,35334,35336,35337,35338,35339,35340,35341,35342,35343,35344,35345,35346,35347,35348,35349,35350,35351,35352,35353,35354,35355,35356,35357,21360,33521,27185,23156,40560,24212,32552,33721,33828,33829,33639,34631,36814,36194,30408,24433,39062,30828,26144,21727,25317,20323,33219,30152,24248,38605,36362,34553,21647,27891,28044,27704,24703,21191,29992,24189,20248,24736,24551,23588,30001,37038,38080,29369,27833,28216,37193,26377,21451,21491,20305,37321,35825,21448,24188,36802,28132,20110,30402,27014,34398,24858,33286,20313,20446,36926,40060,24841,28189,28180,38533,20104,23089,38632,19982,23679,31161,23431,35821,32701,29577,22495,33419,37057,21505,36935,21947,23786,24481,24840,27442,29425,32946,35465,35358,35359,35360,35361,35362,35363,35364,35365,35366,35367,35368,35369,35370,35371,35372,35373,35374,35375,35376,35377,35378,35379,35380,35381,35382,35383,35384,35385,35386,35387,35388,35389,35391,35392,35393,35394,35395,35396,35397,35398,35399,35401,35402,35403,35404,35405,35406,35407,35408,35409,35410,35411,35412,35413,35414,35415,35416,35417,35418,35419,35420,35421,35422,35423,35424,35425,35426,35427,35428,35429,35430,35431,35432,35433,35434,35435,35436,35437,35438,35439,35440,35441,35442,35443,35444,35445,35446,35447,35448,35450,35451,35452,35453,35454,35455,35456,28020,23507,35029,39044,35947,39533,40499,28170,20900,20803,22435,34945,21407,25588,36757,22253,21592,22278,29503,28304,32536,36828,33489,24895,24616,38498,26352,32422,36234,36291,38053,23731,31908,26376,24742,38405,32792,20113,37095,21248,38504,20801,36816,34164,37213,26197,38901,23381,21277,30776,26434,26685,21705,28798,23472,36733,20877,22312,21681,25874,26242,36190,36163,33039,33900,36973,31967,20991,34299,26531,26089,28577,34468,36481,22122,36896,30338,28790,29157,36131,25321,21017,27901,36156,24590,22686,24974,26366,36192,25166,21939,28195,26413,36711,35457,35458,35459,35460,35461,35462,35463,35464,35467,35468,35469,35470,35471,35472,35473,35474,35476,35477,35478,35479,35480,35481,35482,35483,35484,35485,35486,35487,35488,35489,35490,35491,35492,35493,35494,35495,35496,35497,35498,35499,35500,35501,35502,35503,35504,35505,35506,35507,35508,35509,35510,35511,35512,35513,35514,35515,35516,35517,35518,35519,35520,35521,35522,35523,35524,35525,35526,35527,35528,35529,35530,35531,35532,35533,35534,35535,35536,35537,35538,35539,35540,35541,35542,35543,35544,35545,35546,35547,35548,35549,35550,35551,35552,35553,35554,35555,38113,38392,30504,26629,27048,21643,20045,28856,35784,25688,25995,23429,31364,20538,23528,30651,27617,35449,31896,27838,30415,26025,36759,23853,23637,34360,26632,21344,25112,31449,28251,32509,27167,31456,24432,28467,24352,25484,28072,26454,19976,24080,36134,20183,32960,30260,38556,25307,26157,25214,27836,36213,29031,32617,20806,32903,21484,36974,25240,21746,34544,36761,32773,38167,34071,36825,27993,29645,26015,30495,29956,30759,33275,36126,38024,20390,26517,30137,35786,38663,25391,38215,38453,33976,25379,30529,24449,29424,20105,24596,25972,25327,27491,25919,35556,35557,35558,35559,35560,35561,35562,35563,35564,35565,35566,35567,35568,35569,35570,35571,35572,35573,35574,35575,35576,35577,35578,35579,35580,35581,35582,35583,35584,35585,35586,35587,35588,35589,35590,35592,35593,35594,35595,35596,35597,35598,35599,35600,35601,35602,35603,35604,35605,35606,35607,35608,35609,35610,35611,35612,35613,35614,35615,35616,35617,35618,35619,35620,35621,35623,35624,35625,35626,35627,35628,35629,35630,35631,35632,35633,35634,35635,35636,35637,35638,35639,35640,35641,35642,35643,35644,35645,35646,35647,35648,35649,35650,35651,35652,35653,24103,30151,37073,35777,33437,26525,25903,21553,34584,30693,32930,33026,27713,20043,32455,32844,30452,26893,27542,25191,20540,20356,22336,25351,27490,36286,21482,26088,32440,24535,25370,25527,33267,33268,32622,24092,23769,21046,26234,31209,31258,36136,28825,30164,28382,27835,31378,20013,30405,24544,38047,34935,32456,31181,32959,37325,20210,20247,33311,21608,24030,27954,35788,31909,36724,32920,24090,21650,30385,23449,26172,39588,29664,26666,34523,26417,29482,35832,35803,36880,31481,28891,29038,25284,30633,22065,20027,33879,26609,21161,34496,36142,38136,31569,35654,35655,35656,35657,35658,35659,35660,35661,35662,35663,35664,35665,35666,35667,35668,35669,35670,35671,35672,35673,35674,35675,35676,35677,35678,35679,35680,35681,35682,35683,35684,35685,35687,35688,35689,35690,35691,35693,35694,35695,35696,35697,35698,35699,35700,35701,35702,35703,35704,35705,35706,35707,35708,35709,35710,35711,35712,35713,35714,35715,35716,35717,35718,35719,35720,35721,35722,35723,35724,35725,35726,35727,35728,35729,35730,35731,35732,35733,35734,35735,35736,35737,35738,35739,35740,35741,35742,35743,35756,35761,35771,35783,35792,35818,35849,35870,20303,27880,31069,39547,25235,29226,25341,19987,30742,36716,25776,36186,31686,26729,24196,35013,22918,25758,22766,29366,26894,38181,36861,36184,22368,32512,35846,20934,25417,25305,21331,26700,29730,33537,37196,21828,30528,28796,27978,20857,21672,36164,23039,28363,28100,23388,32043,20180,31869,28371,23376,33258,28173,23383,39683,26837,36394,23447,32508,24635,32437,37049,36208,22863,25549,31199,36275,21330,26063,31062,35781,38459,32452,38075,32386,22068,37257,26368,32618,23562,36981,26152,24038,20304,26590,20570,20316,22352,24231,59408,59409,59410,59411,59412,35896,35897,35898,35899,35900,35901,35902,35903,35904,35906,35907,35908,35909,35912,35914,35915,35917,35918,35919,35920,35921,35922,35923,35924,35926,35927,35928,35929,35931,35932,35933,35934,35935,35936,35939,35940,35941,35942,35943,35944,35945,35948,35949,35950,35951,35952,35953,35954,35956,35957,35958,35959,35963,35964,35965,35966,35967,35968,35969,35971,35972,35974,35975,35976,35979,35981,35982,35983,35984,35985,35986,35987,35989,35990,35991,35993,35994,35995,35996,35997,35998,35999,36e3,36001,36002,36003,36004,36005,36006,36007,36008,36009,36010,36011,36012,36013,20109,19980,20800,19984,24319,21317,19989,20120,19998,39730,23404,22121,20008,31162,20031,21269,20039,22829,29243,21358,27664,22239,32996,39319,27603,30590,40727,20022,20127,40720,20060,20073,20115,33416,23387,21868,22031,20164,21389,21405,21411,21413,21422,38757,36189,21274,21493,21286,21294,21310,36188,21350,21347,20994,21e3,21006,21037,21043,21055,21056,21068,21086,21089,21084,33967,21117,21122,21121,21136,21139,20866,32596,20155,20163,20169,20162,20200,20193,20203,20190,20251,20211,20258,20324,20213,20261,20263,20233,20267,20318,20327,25912,20314,20317,36014,36015,36016,36017,36018,36019,36020,36021,36022,36023,36024,36025,36026,36027,36028,36029,36030,36031,36032,36033,36034,36035,36036,36037,36038,36039,36040,36041,36042,36043,36044,36045,36046,36047,36048,36049,36050,36051,36052,36053,36054,36055,36056,36057,36058,36059,36060,36061,36062,36063,36064,36065,36066,36067,36068,36069,36070,36071,36072,36073,36074,36075,36076,36077,36078,36079,36080,36081,36082,36083,36084,36085,36086,36087,36088,36089,36090,36091,36092,36093,36094,36095,36096,36097,36098,36099,36100,36101,36102,36103,36104,36105,36106,36107,36108,36109,20319,20311,20274,20285,20342,20340,20369,20361,20355,20367,20350,20347,20394,20348,20396,20372,20454,20456,20458,20421,20442,20451,20444,20433,20447,20472,20521,20556,20467,20524,20495,20526,20525,20478,20508,20492,20517,20520,20606,20547,20565,20552,20558,20588,20603,20645,20647,20649,20666,20694,20742,20717,20716,20710,20718,20743,20747,20189,27709,20312,20325,20430,40864,27718,31860,20846,24061,40649,39320,20865,22804,21241,21261,35335,21264,20971,22809,20821,20128,20822,20147,34926,34980,20149,33044,35026,31104,23348,34819,32696,20907,20913,20925,20924,36110,36111,36112,36113,36114,36115,36116,36117,36118,36119,36120,36121,36122,36123,36124,36128,36177,36178,36183,36191,36197,36200,36201,36202,36204,36206,36207,36209,36210,36216,36217,36218,36219,36220,36221,36222,36223,36224,36226,36227,36230,36231,36232,36233,36236,36237,36238,36239,36240,36242,36243,36245,36246,36247,36248,36249,36250,36251,36252,36253,36254,36256,36257,36258,36260,36261,36262,36263,36264,36265,36266,36267,36268,36269,36270,36271,36272,36274,36278,36279,36281,36283,36285,36288,36289,36290,36293,36295,36296,36297,36298,36301,36304,36306,36307,36308,20935,20886,20898,20901,35744,35750,35751,35754,35764,35765,35767,35778,35779,35787,35791,35790,35794,35795,35796,35798,35800,35801,35804,35807,35808,35812,35816,35817,35822,35824,35827,35830,35833,35836,35839,35840,35842,35844,35847,35852,35855,35857,35858,35860,35861,35862,35865,35867,35864,35869,35871,35872,35873,35877,35879,35882,35883,35886,35887,35890,35891,35893,35894,21353,21370,38429,38434,38433,38449,38442,38461,38460,38466,38473,38484,38495,38503,38508,38514,38516,38536,38541,38551,38576,37015,37019,37021,37017,37036,37025,37044,37043,37046,37050,36309,36312,36313,36316,36320,36321,36322,36325,36326,36327,36329,36333,36334,36336,36337,36338,36340,36342,36348,36350,36351,36352,36353,36354,36355,36356,36358,36359,36360,36363,36365,36366,36368,36369,36370,36371,36373,36374,36375,36376,36377,36378,36379,36380,36384,36385,36388,36389,36390,36391,36392,36395,36397,36400,36402,36403,36404,36406,36407,36408,36411,36412,36414,36415,36419,36421,36422,36428,36429,36430,36431,36432,36435,36436,36437,36438,36439,36440,36442,36443,36444,36445,36446,36447,36448,36449,36450,36451,36452,36453,36455,36456,36458,36459,36462,36465,37048,37040,37071,37061,37054,37072,37060,37063,37075,37094,37090,37084,37079,37083,37099,37103,37118,37124,37154,37150,37155,37169,37167,37177,37187,37190,21005,22850,21154,21164,21165,21182,21759,21200,21206,21232,21471,29166,30669,24308,20981,20988,39727,21430,24321,30042,24047,22348,22441,22433,22654,22716,22725,22737,22313,22316,22314,22323,22329,22318,22319,22364,22331,22338,22377,22405,22379,22406,22396,22395,22376,22381,22390,22387,22445,22436,22412,22450,22479,22439,22452,22419,22432,22485,22488,22490,22489,22482,22456,22516,22511,22520,22500,22493,36467,36469,36471,36472,36473,36474,36475,36477,36478,36480,36482,36483,36484,36486,36488,36489,36490,36491,36492,36493,36494,36497,36498,36499,36501,36502,36503,36504,36505,36506,36507,36509,36511,36512,36513,36514,36515,36516,36517,36518,36519,36520,36521,36522,36525,36526,36528,36529,36531,36532,36533,36534,36535,36536,36537,36539,36540,36541,36542,36543,36544,36545,36546,36547,36548,36549,36550,36551,36552,36553,36554,36555,36556,36557,36559,36560,36561,36562,36563,36564,36565,36566,36567,36568,36569,36570,36571,36572,36573,36574,36575,36576,36577,36578,36579,36580,22539,22541,22525,22509,22528,22558,22553,22596,22560,22629,22636,22657,22665,22682,22656,39336,40729,25087,33401,33405,33407,33423,33418,33448,33412,33422,33425,33431,33433,33451,33464,33470,33456,33480,33482,33507,33432,33463,33454,33483,33484,33473,33449,33460,33441,33450,33439,33476,33486,33444,33505,33545,33527,33508,33551,33543,33500,33524,33490,33496,33548,33531,33491,33553,33562,33542,33556,33557,33504,33493,33564,33617,33627,33628,33544,33682,33596,33588,33585,33691,33630,33583,33615,33607,33603,33631,33600,33559,33632,33581,33594,33587,33638,33637,36581,36582,36583,36584,36585,36586,36587,36588,36589,36590,36591,36592,36593,36594,36595,36596,36597,36598,36599,36600,36601,36602,36603,36604,36605,36606,36607,36608,36609,36610,36611,36612,36613,36614,36615,36616,36617,36618,36619,36620,36621,36622,36623,36624,36625,36626,36627,36628,36629,36630,36631,36632,36633,36634,36635,36636,36637,36638,36639,36640,36641,36642,36643,36644,36645,36646,36647,36648,36649,36650,36651,36652,36653,36654,36655,36656,36657,36658,36659,36660,36661,36662,36663,36664,36665,36666,36667,36668,36669,36670,36671,36672,36673,36674,36675,36676,33640,33563,33641,33644,33642,33645,33646,33712,33656,33715,33716,33696,33706,33683,33692,33669,33660,33718,33705,33661,33720,33659,33688,33694,33704,33722,33724,33729,33793,33765,33752,22535,33816,33803,33757,33789,33750,33820,33848,33809,33798,33748,33759,33807,33795,33784,33785,33770,33733,33728,33830,33776,33761,33884,33873,33882,33881,33907,33927,33928,33914,33929,33912,33852,33862,33897,33910,33932,33934,33841,33901,33985,33997,34e3,34022,33981,34003,33994,33983,33978,34016,33953,33977,33972,33943,34021,34019,34060,29965,34104,34032,34105,34079,34106,36677,36678,36679,36680,36681,36682,36683,36684,36685,36686,36687,36688,36689,36690,36691,36692,36693,36694,36695,36696,36697,36698,36699,36700,36701,36702,36703,36704,36705,36706,36707,36708,36709,36714,36736,36748,36754,36765,36768,36769,36770,36772,36773,36774,36775,36778,36780,36781,36782,36783,36786,36787,36788,36789,36791,36792,36794,36795,36796,36799,36800,36803,36806,36809,36810,36811,36812,36813,36815,36818,36822,36823,36826,36832,36833,36835,36839,36844,36847,36849,36850,36852,36853,36854,36858,36859,36860,36862,36863,36871,36872,36876,36878,36883,36885,36888,34134,34107,34047,34044,34137,34120,34152,34148,34142,34170,30626,34115,34162,34171,34212,34216,34183,34191,34169,34222,34204,34181,34233,34231,34224,34259,34241,34268,34303,34343,34309,34345,34326,34364,24318,24328,22844,22849,32823,22869,22874,22872,21263,23586,23589,23596,23604,25164,25194,25247,25275,25290,25306,25303,25326,25378,25334,25401,25419,25411,25517,25590,25457,25466,25486,25524,25453,25516,25482,25449,25518,25532,25586,25592,25568,25599,25540,25566,25550,25682,25542,25534,25669,25665,25611,25627,25632,25612,25638,25633,25694,25732,25709,25750,36889,36892,36899,36900,36901,36903,36904,36905,36906,36907,36908,36912,36913,36914,36915,36916,36919,36921,36922,36925,36927,36928,36931,36933,36934,36936,36937,36938,36939,36940,36942,36948,36949,36950,36953,36954,36956,36957,36958,36959,36960,36961,36964,36966,36967,36969,36970,36971,36972,36975,36976,36977,36978,36979,36982,36983,36984,36985,36986,36987,36988,36990,36993,36996,36997,36998,36999,37001,37002,37004,37005,37006,37007,37008,37010,37012,37014,37016,37018,37020,37022,37023,37024,37028,37029,37031,37032,37033,37035,37037,37042,37047,37052,37053,37055,37056,25722,25783,25784,25753,25786,25792,25808,25815,25828,25826,25865,25893,25902,24331,24530,29977,24337,21343,21489,21501,21481,21480,21499,21522,21526,21510,21579,21586,21587,21588,21590,21571,21537,21591,21593,21539,21554,21634,21652,21623,21617,21604,21658,21659,21636,21622,21606,21661,21712,21677,21698,21684,21714,21671,21670,21715,21716,21618,21667,21717,21691,21695,21708,21721,21722,21724,21673,21674,21668,21725,21711,21726,21787,21735,21792,21757,21780,21747,21794,21795,21775,21777,21799,21802,21863,21903,21941,21833,21869,21825,21845,21823,21840,21820,37058,37059,37062,37064,37065,37067,37068,37069,37074,37076,37077,37078,37080,37081,37082,37086,37087,37088,37091,37092,37093,37097,37098,37100,37102,37104,37105,37106,37107,37109,37110,37111,37113,37114,37115,37116,37119,37120,37121,37123,37125,37126,37127,37128,37129,37130,37131,37132,37133,37134,37135,37136,37137,37138,37139,37140,37141,37142,37143,37144,37146,37147,37148,37149,37151,37152,37153,37156,37157,37158,37159,37160,37161,37162,37163,37164,37165,37166,37168,37170,37171,37172,37173,37174,37175,37176,37178,37179,37180,37181,37182,37183,37184,37185,37186,37188,21815,21846,21877,21878,21879,21811,21808,21852,21899,21970,21891,21937,21945,21896,21889,21919,21886,21974,21905,21883,21983,21949,21950,21908,21913,21994,22007,21961,22047,21969,21995,21996,21972,21990,21981,21956,21999,21989,22002,22003,21964,21965,21992,22005,21988,36756,22046,22024,22028,22017,22052,22051,22014,22016,22055,22061,22104,22073,22103,22060,22093,22114,22105,22108,22092,22100,22150,22116,22129,22123,22139,22140,22149,22163,22191,22228,22231,22237,22241,22261,22251,22265,22271,22276,22282,22281,22300,24079,24089,24084,24081,24113,24123,24124,37189,37191,37192,37201,37203,37204,37205,37206,37208,37209,37211,37212,37215,37216,37222,37223,37224,37227,37229,37235,37242,37243,37244,37248,37249,37250,37251,37252,37254,37256,37258,37262,37263,37267,37268,37269,37270,37271,37272,37273,37276,37277,37278,37279,37280,37281,37284,37285,37286,37287,37288,37289,37291,37292,37296,37297,37298,37299,37302,37303,37304,37305,37307,37308,37309,37310,37311,37312,37313,37314,37315,37316,37317,37318,37320,37323,37328,37330,37331,37332,37333,37334,37335,37336,37337,37338,37339,37341,37342,37343,37344,37345,37346,37347,37348,37349,24119,24132,24148,24155,24158,24161,23692,23674,23693,23696,23702,23688,23704,23705,23697,23706,23708,23733,23714,23741,23724,23723,23729,23715,23745,23735,23748,23762,23780,23755,23781,23810,23811,23847,23846,23854,23844,23838,23814,23835,23896,23870,23860,23869,23916,23899,23919,23901,23915,23883,23882,23913,23924,23938,23961,23965,35955,23991,24005,24435,24439,24450,24455,24457,24460,24469,24473,24476,24488,24493,24501,24508,34914,24417,29357,29360,29364,29367,29368,29379,29377,29390,29389,29394,29416,29423,29417,29426,29428,29431,29441,29427,29443,29434,37350,37351,37352,37353,37354,37355,37356,37357,37358,37359,37360,37361,37362,37363,37364,37365,37366,37367,37368,37369,37370,37371,37372,37373,37374,37375,37376,37377,37378,37379,37380,37381,37382,37383,37384,37385,37386,37387,37388,37389,37390,37391,37392,37393,37394,37395,37396,37397,37398,37399,37400,37401,37402,37403,37404,37405,37406,37407,37408,37409,37410,37411,37412,37413,37414,37415,37416,37417,37418,37419,37420,37421,37422,37423,37424,37425,37426,37427,37428,37429,37430,37431,37432,37433,37434,37435,37436,37437,37438,37439,37440,37441,37442,37443,37444,37445,29435,29463,29459,29473,29450,29470,29469,29461,29474,29497,29477,29484,29496,29489,29520,29517,29527,29536,29548,29551,29566,33307,22821,39143,22820,22786,39267,39271,39272,39273,39274,39275,39276,39284,39287,39293,39296,39300,39303,39306,39309,39312,39313,39315,39316,39317,24192,24209,24203,24214,24229,24224,24249,24245,24254,24243,36179,24274,24273,24283,24296,24298,33210,24516,24521,24534,24527,24579,24558,24580,24545,24548,24574,24581,24582,24554,24557,24568,24601,24629,24614,24603,24591,24589,24617,24619,24586,24639,24609,24696,24697,24699,24698,24642,37446,37447,37448,37449,37450,37451,37452,37453,37454,37455,37456,37457,37458,37459,37460,37461,37462,37463,37464,37465,37466,37467,37468,37469,37470,37471,37472,37473,37474,37475,37476,37477,37478,37479,37480,37481,37482,37483,37484,37485,37486,37487,37488,37489,37490,37491,37493,37494,37495,37496,37497,37498,37499,37500,37501,37502,37503,37504,37505,37506,37507,37508,37509,37510,37511,37512,37513,37514,37515,37516,37517,37519,37520,37521,37522,37523,37524,37525,37526,37527,37528,37529,37530,37531,37532,37533,37534,37535,37536,37537,37538,37539,37540,37541,37542,37543,24682,24701,24726,24730,24749,24733,24707,24722,24716,24731,24812,24763,24753,24797,24792,24774,24794,24756,24864,24870,24853,24867,24820,24832,24846,24875,24906,24949,25004,24980,24999,25015,25044,25077,24541,38579,38377,38379,38385,38387,38389,38390,38396,38398,38403,38404,38406,38408,38410,38411,38412,38413,38415,38418,38421,38422,38423,38425,38426,20012,29247,25109,27701,27732,27740,27722,27811,27781,27792,27796,27788,27752,27753,27764,27766,27782,27817,27856,27860,27821,27895,27896,27889,27863,27826,27872,27862,27898,27883,27886,27825,27859,27887,27902,37544,37545,37546,37547,37548,37549,37551,37552,37553,37554,37555,37556,37557,37558,37559,37560,37561,37562,37563,37564,37565,37566,37567,37568,37569,37570,37571,37572,37573,37574,37575,37577,37578,37579,37580,37581,37582,37583,37584,37585,37586,37587,37588,37589,37590,37591,37592,37593,37594,37595,37596,37597,37598,37599,37600,37601,37602,37603,37604,37605,37606,37607,37608,37609,37610,37611,37612,37613,37614,37615,37616,37617,37618,37619,37620,37621,37622,37623,37624,37625,37626,37627,37628,37629,37630,37631,37632,37633,37634,37635,37636,37637,37638,37639,37640,37641,27961,27943,27916,27971,27976,27911,27908,27929,27918,27947,27981,27950,27957,27930,27983,27986,27988,27955,28049,28015,28062,28064,27998,28051,28052,27996,28e3,28028,28003,28186,28103,28101,28126,28174,28095,28128,28177,28134,28125,28121,28182,28075,28172,28078,28203,28270,28238,28267,28338,28255,28294,28243,28244,28210,28197,28228,28383,28337,28312,28384,28461,28386,28325,28327,28349,28347,28343,28375,28340,28367,28303,28354,28319,28514,28486,28487,28452,28437,28409,28463,28470,28491,28532,28458,28425,28457,28553,28557,28556,28536,28530,28540,28538,28625,37642,37643,37644,37645,37646,37647,37648,37649,37650,37651,37652,37653,37654,37655,37656,37657,37658,37659,37660,37661,37662,37663,37664,37665,37666,37667,37668,37669,37670,37671,37672,37673,37674,37675,37676,37677,37678,37679,37680,37681,37682,37683,37684,37685,37686,37687,37688,37689,37690,37691,37692,37693,37695,37696,37697,37698,37699,37700,37701,37702,37703,37704,37705,37706,37707,37708,37709,37710,37711,37712,37713,37714,37715,37716,37717,37718,37719,37720,37721,37722,37723,37724,37725,37726,37727,37728,37729,37730,37731,37732,37733,37734,37735,37736,37737,37739,28617,28583,28601,28598,28610,28641,28654,28638,28640,28655,28698,28707,28699,28729,28725,28751,28766,23424,23428,23445,23443,23461,23480,29999,39582,25652,23524,23534,35120,23536,36423,35591,36790,36819,36821,36837,36846,36836,36841,36838,36851,36840,36869,36868,36875,36902,36881,36877,36886,36897,36917,36918,36909,36911,36932,36945,36946,36944,36968,36952,36962,36955,26297,36980,36989,36994,37e3,36995,37003,24400,24407,24406,24408,23611,21675,23632,23641,23409,23651,23654,32700,24362,24361,24365,33396,24380,39739,23662,22913,22915,22925,22953,22954,22947,37740,37741,37742,37743,37744,37745,37746,37747,37748,37749,37750,37751,37752,37753,37754,37755,37756,37757,37758,37759,37760,37761,37762,37763,37764,37765,37766,37767,37768,37769,37770,37771,37772,37773,37774,37776,37777,37778,37779,37780,37781,37782,37783,37784,37785,37786,37787,37788,37789,37790,37791,37792,37793,37794,37795,37796,37797,37798,37799,37800,37801,37802,37803,37804,37805,37806,37807,37808,37809,37810,37811,37812,37813,37814,37815,37816,37817,37818,37819,37820,37821,37822,37823,37824,37825,37826,37827,37828,37829,37830,37831,37832,37833,37835,37836,37837,22935,22986,22955,22942,22948,22994,22962,22959,22999,22974,23045,23046,23005,23048,23011,23e3,23033,23052,23049,23090,23092,23057,23075,23059,23104,23143,23114,23125,23100,23138,23157,33004,23210,23195,23159,23162,23230,23275,23218,23250,23252,23224,23264,23267,23281,23254,23270,23256,23260,23305,23319,23318,23346,23351,23360,23573,23580,23386,23397,23411,23377,23379,23394,39541,39543,39544,39546,39551,39549,39552,39553,39557,39560,39562,39568,39570,39571,39574,39576,39579,39580,39581,39583,39584,39586,39587,39589,39591,32415,32417,32419,32421,32424,32425,37838,37839,37840,37841,37842,37843,37844,37845,37847,37848,37849,37850,37851,37852,37853,37854,37855,37856,37857,37858,37859,37860,37861,37862,37863,37864,37865,37866,37867,37868,37869,37870,37871,37872,37873,37874,37875,37876,37877,37878,37879,37880,37881,37882,37883,37884,37885,37886,37887,37888,37889,37890,37891,37892,37893,37894,37895,37896,37897,37898,37899,37900,37901,37902,37903,37904,37905,37906,37907,37908,37909,37910,37911,37912,37913,37914,37915,37916,37917,37918,37919,37920,37921,37922,37923,37924,37925,37926,37927,37928,37929,37930,37931,37932,37933,37934,32429,32432,32446,32448,32449,32450,32457,32459,32460,32464,32468,32471,32475,32480,32481,32488,32491,32494,32495,32497,32498,32525,32502,32506,32507,32510,32513,32514,32515,32519,32520,32523,32524,32527,32529,32530,32535,32537,32540,32539,32543,32545,32546,32547,32548,32549,32550,32551,32554,32555,32556,32557,32559,32560,32561,32562,32563,32565,24186,30079,24027,30014,37013,29582,29585,29614,29602,29599,29647,29634,29649,29623,29619,29632,29641,29640,29669,29657,39036,29706,29673,29671,29662,29626,29682,29711,29738,29787,29734,29733,29736,29744,29742,29740,37935,37936,37937,37938,37939,37940,37941,37942,37943,37944,37945,37946,37947,37948,37949,37951,37952,37953,37954,37955,37956,37957,37958,37959,37960,37961,37962,37963,37964,37965,37966,37967,37968,37969,37970,37971,37972,37973,37974,37975,37976,37977,37978,37979,37980,37981,37982,37983,37984,37985,37986,37987,37988,37989,37990,37991,37992,37993,37994,37996,37997,37998,37999,38e3,38001,38002,38003,38004,38005,38006,38007,38008,38009,38010,38011,38012,38013,38014,38015,38016,38017,38018,38019,38020,38033,38038,38040,38087,38095,38099,38100,38106,38118,38139,38172,38176,29723,29722,29761,29788,29783,29781,29785,29815,29805,29822,29852,29838,29824,29825,29831,29835,29854,29864,29865,29840,29863,29906,29882,38890,38891,38892,26444,26451,26462,26440,26473,26533,26503,26474,26483,26520,26535,26485,26536,26526,26541,26507,26487,26492,26608,26633,26584,26634,26601,26544,26636,26585,26549,26586,26547,26589,26624,26563,26552,26594,26638,26561,26621,26674,26675,26720,26721,26702,26722,26692,26724,26755,26653,26709,26726,26689,26727,26688,26686,26698,26697,26665,26805,26767,26740,26743,26771,26731,26818,26990,26876,26911,26912,26873,38183,38195,38205,38211,38216,38219,38229,38234,38240,38254,38260,38261,38263,38264,38265,38266,38267,38268,38269,38270,38272,38273,38274,38275,38276,38277,38278,38279,38280,38281,38282,38283,38284,38285,38286,38287,38288,38289,38290,38291,38292,38293,38294,38295,38296,38297,38298,38299,38300,38301,38302,38303,38304,38305,38306,38307,38308,38309,38310,38311,38312,38313,38314,38315,38316,38317,38318,38319,38320,38321,38322,38323,38324,38325,38326,38327,38328,38329,38330,38331,38332,38333,38334,38335,38336,38337,38338,38339,38340,38341,38342,38343,38344,38345,38346,38347,26916,26864,26891,26881,26967,26851,26896,26993,26937,26976,26946,26973,27012,26987,27008,27032,27e3,26932,27084,27015,27016,27086,27017,26982,26979,27001,27035,27047,27067,27051,27053,27092,27057,27073,27082,27103,27029,27104,27021,27135,27183,27117,27159,27160,27237,27122,27204,27198,27296,27216,27227,27189,27278,27257,27197,27176,27224,27260,27281,27280,27305,27287,27307,29495,29522,27521,27522,27527,27524,27538,27539,27533,27546,27547,27553,27562,36715,36717,36721,36722,36723,36725,36726,36728,36727,36729,36730,36732,36734,36737,36738,36740,36743,36747,38348,38349,38350,38351,38352,38353,38354,38355,38356,38357,38358,38359,38360,38361,38362,38363,38364,38365,38366,38367,38368,38369,38370,38371,38372,38373,38374,38375,38380,38399,38407,38419,38424,38427,38430,38432,38435,38436,38437,38438,38439,38440,38441,38443,38444,38445,38447,38448,38455,38456,38457,38458,38462,38465,38467,38474,38478,38479,38481,38482,38483,38486,38487,38488,38489,38490,38492,38493,38494,38496,38499,38501,38502,38507,38509,38510,38511,38512,38513,38515,38520,38521,38522,38523,38524,38525,38526,38527,38528,38529,38530,38531,38532,38535,38537,38538,36749,36750,36751,36760,36762,36558,25099,25111,25115,25119,25122,25121,25125,25124,25132,33255,29935,29940,29951,29967,29969,29971,25908,26094,26095,26096,26122,26137,26482,26115,26133,26112,28805,26359,26141,26164,26161,26166,26165,32774,26207,26196,26177,26191,26198,26209,26199,26231,26244,26252,26279,26269,26302,26331,26332,26342,26345,36146,36147,36150,36155,36157,36160,36165,36166,36168,36169,36167,36173,36181,36185,35271,35274,35275,35276,35278,35279,35280,35281,29294,29343,29277,29286,29295,29310,29311,29316,29323,29325,29327,29330,25352,25394,25520,38540,38542,38545,38546,38547,38549,38550,38554,38555,38557,38558,38559,38560,38561,38562,38563,38564,38565,38566,38568,38569,38570,38571,38572,38573,38574,38575,38577,38578,38580,38581,38583,38584,38586,38587,38591,38594,38595,38600,38602,38603,38608,38609,38611,38612,38614,38615,38616,38617,38618,38619,38620,38621,38622,38623,38625,38626,38627,38628,38629,38630,38631,38635,38636,38637,38638,38640,38641,38642,38644,38645,38648,38650,38651,38652,38653,38655,38658,38659,38661,38666,38667,38668,38672,38673,38674,38676,38677,38679,38680,38681,38682,38683,38685,38687,38688,25663,25816,32772,27626,27635,27645,27637,27641,27653,27655,27654,27661,27669,27672,27673,27674,27681,27689,27684,27690,27698,25909,25941,25963,29261,29266,29270,29232,34402,21014,32927,32924,32915,32956,26378,32957,32945,32939,32941,32948,32951,32999,33e3,33001,33002,32987,32962,32964,32985,32973,32983,26384,32989,33003,33009,33012,33005,33037,33038,33010,33020,26389,33042,35930,33078,33054,33068,33048,33074,33096,33100,33107,33140,33113,33114,33137,33120,33129,33148,33149,33133,33127,22605,23221,33160,33154,33169,28373,33187,33194,33228,26406,33226,33211,38689,38690,38691,38692,38693,38694,38695,38696,38697,38699,38700,38702,38703,38705,38707,38708,38709,38710,38711,38714,38715,38716,38717,38719,38720,38721,38722,38723,38724,38725,38726,38727,38728,38729,38730,38731,38732,38733,38734,38735,38736,38737,38740,38741,38743,38744,38746,38748,38749,38751,38755,38756,38758,38759,38760,38762,38763,38764,38765,38766,38767,38768,38769,38770,38773,38775,38776,38777,38778,38779,38781,38782,38783,38784,38785,38786,38787,38788,38790,38791,38792,38793,38794,38796,38798,38799,38800,38803,38805,38806,38807,38809,38810,38811,38812,38813,33217,33190,27428,27447,27449,27459,27462,27481,39121,39122,39123,39125,39129,39130,27571,24384,27586,35315,26e3,40785,26003,26044,26054,26052,26051,26060,26062,26066,26070,28800,28828,28822,28829,28859,28864,28855,28843,28849,28904,28874,28944,28947,28950,28975,28977,29043,29020,29032,28997,29042,29002,29048,29050,29080,29107,29109,29096,29088,29152,29140,29159,29177,29213,29224,28780,28952,29030,29113,25150,25149,25155,25160,25161,31035,31040,31046,31049,31067,31068,31059,31066,31074,31063,31072,31087,31079,31098,31109,31114,31130,31143,31155,24529,24528,38814,38815,38817,38818,38820,38821,38822,38823,38824,38825,38826,38828,38830,38832,38833,38835,38837,38838,38839,38840,38841,38842,38843,38844,38845,38846,38847,38848,38849,38850,38851,38852,38853,38854,38855,38856,38857,38858,38859,38860,38861,38862,38863,38864,38865,38866,38867,38868,38869,38870,38871,38872,38873,38874,38875,38876,38877,38878,38879,38880,38881,38882,38883,38884,38885,38888,38894,38895,38896,38897,38898,38900,38903,38904,38905,38906,38907,38908,38909,38910,38911,38912,38913,38914,38915,38916,38917,38918,38919,38920,38921,38922,38923,38924,38925,38926,24636,24669,24666,24679,24641,24665,24675,24747,24838,24845,24925,25001,24989,25035,25041,25094,32896,32895,27795,27894,28156,30710,30712,30720,30729,30743,30744,30737,26027,30765,30748,30749,30777,30778,30779,30751,30780,30757,30764,30755,30761,30798,30829,30806,30807,30758,30800,30791,30796,30826,30875,30867,30874,30855,30876,30881,30883,30898,30905,30885,30932,30937,30921,30956,30962,30981,30964,30995,31012,31006,31028,40859,40697,40699,40700,30449,30468,30477,30457,30471,30472,30490,30498,30489,30509,30502,30517,30520,30544,30545,30535,30531,30554,30568,38927,38928,38929,38930,38931,38932,38933,38934,38935,38936,38937,38938,38939,38940,38941,38942,38943,38944,38945,38946,38947,38948,38949,38950,38951,38952,38953,38954,38955,38956,38957,38958,38959,38960,38961,38962,38963,38964,38965,38966,38967,38968,38969,38970,38971,38972,38973,38974,38975,38976,38977,38978,38979,38980,38981,38982,38983,38984,38985,38986,38987,38988,38989,38990,38991,38992,38993,38994,38995,38996,38997,38998,38999,39e3,39001,39002,39003,39004,39005,39006,39007,39008,39009,39010,39011,39012,39013,39014,39015,39016,39017,39018,39019,39020,39021,39022,30562,30565,30591,30605,30589,30592,30604,30609,30623,30624,30640,30645,30653,30010,30016,30030,30027,30024,30043,30066,30073,30083,32600,32609,32607,35400,32616,32628,32625,32633,32641,32638,30413,30437,34866,38021,38022,38023,38027,38026,38028,38029,38031,38032,38036,38039,38037,38042,38043,38044,38051,38052,38059,38058,38061,38060,38063,38064,38066,38068,38070,38071,38072,38073,38074,38076,38077,38079,38084,38088,38089,38090,38091,38092,38093,38094,38096,38097,38098,38101,38102,38103,38105,38104,38107,38110,38111,38112,38114,38116,38117,38119,38120,38122,39023,39024,39025,39026,39027,39028,39051,39054,39058,39061,39065,39075,39080,39081,39082,39083,39084,39085,39086,39087,39088,39089,39090,39091,39092,39093,39094,39095,39096,39097,39098,39099,39100,39101,39102,39103,39104,39105,39106,39107,39108,39109,39110,39111,39112,39113,39114,39115,39116,39117,39119,39120,39124,39126,39127,39131,39132,39133,39136,39137,39138,39139,39140,39141,39142,39145,39146,39147,39148,39149,39150,39151,39152,39153,39154,39155,39156,39157,39158,39159,39160,39161,39162,39163,39164,39165,39166,39167,39168,39169,39170,39171,39172,39173,39174,39175,38121,38123,38126,38127,38131,38132,38133,38135,38137,38140,38141,38143,38147,38146,38150,38151,38153,38154,38157,38158,38159,38162,38163,38164,38165,38166,38168,38171,38173,38174,38175,38178,38186,38187,38185,38188,38193,38194,38196,38198,38199,38200,38204,38206,38207,38210,38197,38212,38213,38214,38217,38220,38222,38223,38226,38227,38228,38230,38231,38232,38233,38235,38238,38239,38237,38241,38242,38244,38245,38246,38247,38248,38249,38250,38251,38252,38255,38257,38258,38259,38202,30695,30700,38601,31189,31213,31203,31211,31238,23879,31235,31234,31262,31252,39176,39177,39178,39179,39180,39182,39183,39185,39186,39187,39188,39189,39190,39191,39192,39193,39194,39195,39196,39197,39198,39199,39200,39201,39202,39203,39204,39205,39206,39207,39208,39209,39210,39211,39212,39213,39215,39216,39217,39218,39219,39220,39221,39222,39223,39224,39225,39226,39227,39228,39229,39230,39231,39232,39233,39234,39235,39236,39237,39238,39239,39240,39241,39242,39243,39244,39245,39246,39247,39248,39249,39250,39251,39254,39255,39256,39257,39258,39259,39260,39261,39262,39263,39264,39265,39266,39268,39270,39283,39288,39289,39291,39294,39298,39299,39305,31289,31287,31313,40655,39333,31344,30344,30350,30355,30361,30372,29918,29920,29996,40480,40482,40488,40489,40490,40491,40492,40498,40497,40502,40504,40503,40505,40506,40510,40513,40514,40516,40518,40519,40520,40521,40523,40524,40526,40529,40533,40535,40538,40539,40540,40542,40547,40550,40551,40552,40553,40554,40555,40556,40561,40557,40563,30098,30100,30102,30112,30109,30124,30115,30131,30132,30136,30148,30129,30128,30147,30146,30166,30157,30179,30184,30182,30180,30187,30183,30211,30193,30204,30207,30224,30208,30213,30220,30231,30218,30245,30232,30229,30233,39308,39310,39322,39323,39324,39325,39326,39327,39328,39329,39330,39331,39332,39334,39335,39337,39338,39339,39340,39341,39342,39343,39344,39345,39346,39347,39348,39349,39350,39351,39352,39353,39354,39355,39356,39357,39358,39359,39360,39361,39362,39363,39364,39365,39366,39367,39368,39369,39370,39371,39372,39373,39374,39375,39376,39377,39378,39379,39380,39381,39382,39383,39384,39385,39386,39387,39388,39389,39390,39391,39392,39393,39394,39395,39396,39397,39398,39399,39400,39401,39402,39403,39404,39405,39406,39407,39408,39409,39410,39411,39412,39413,39414,39415,39416,39417,30235,30268,30242,30240,30272,30253,30256,30271,30261,30275,30270,30259,30285,30302,30292,30300,30294,30315,30319,32714,31462,31352,31353,31360,31366,31368,31381,31398,31392,31404,31400,31405,31411,34916,34921,34930,34941,34943,34946,34978,35014,34999,35004,35017,35042,35022,35043,35045,35057,35098,35068,35048,35070,35056,35105,35097,35091,35099,35082,35124,35115,35126,35137,35174,35195,30091,32997,30386,30388,30684,32786,32788,32790,32796,32800,32802,32805,32806,32807,32809,32808,32817,32779,32821,32835,32838,32845,32850,32873,32881,35203,39032,39040,39043,39418,39419,39420,39421,39422,39423,39424,39425,39426,39427,39428,39429,39430,39431,39432,39433,39434,39435,39436,39437,39438,39439,39440,39441,39442,39443,39444,39445,39446,39447,39448,39449,39450,39451,39452,39453,39454,39455,39456,39457,39458,39459,39460,39461,39462,39463,39464,39465,39466,39467,39468,39469,39470,39471,39472,39473,39474,39475,39476,39477,39478,39479,39480,39481,39482,39483,39484,39485,39486,39487,39488,39489,39490,39491,39492,39493,39494,39495,39496,39497,39498,39499,39500,39501,39502,39503,39504,39505,39506,39507,39508,39509,39510,39511,39512,39513,39049,39052,39053,39055,39060,39066,39067,39070,39071,39073,39074,39077,39078,34381,34388,34412,34414,34431,34426,34428,34427,34472,34445,34443,34476,34461,34471,34467,34474,34451,34473,34486,34500,34485,34510,34480,34490,34481,34479,34505,34511,34484,34537,34545,34546,34541,34547,34512,34579,34526,34548,34527,34520,34513,34563,34567,34552,34568,34570,34573,34569,34595,34619,34590,34597,34606,34586,34622,34632,34612,34609,34601,34615,34623,34690,34594,34685,34686,34683,34656,34672,34636,34670,34699,34643,34659,34684,34660,34649,34661,34707,34735,34728,34770,39514,39515,39516,39517,39518,39519,39520,39521,39522,39523,39524,39525,39526,39527,39528,39529,39530,39531,39538,39555,39561,39565,39566,39572,39573,39577,39590,39593,39594,39595,39596,39597,39598,39599,39602,39603,39604,39605,39609,39611,39613,39614,39615,39619,39620,39622,39623,39624,39625,39626,39629,39630,39631,39632,39634,39636,39637,39638,39639,39641,39642,39643,39644,39645,39646,39648,39650,39651,39652,39653,39655,39656,39657,39658,39660,39662,39664,39665,39666,39667,39668,39669,39670,39671,39672,39674,39676,39677,39678,39679,39680,39681,39682,39684,39685,39686,34758,34696,34693,34733,34711,34691,34731,34789,34732,34741,34739,34763,34771,34749,34769,34752,34762,34779,34794,34784,34798,34838,34835,34814,34826,34843,34849,34873,34876,32566,32578,32580,32581,33296,31482,31485,31496,31491,31492,31509,31498,31531,31503,31559,31544,31530,31513,31534,31537,31520,31525,31524,31539,31550,31518,31576,31578,31557,31605,31564,31581,31584,31598,31611,31586,31602,31601,31632,31654,31655,31672,31660,31645,31656,31621,31658,31644,31650,31659,31668,31697,31681,31692,31709,31706,31717,31718,31722,31756,31742,31740,31759,31766,31755,39687,39689,39690,39691,39692,39693,39694,39696,39697,39698,39700,39701,39702,39703,39704,39705,39706,39707,39708,39709,39710,39712,39713,39714,39716,39717,39718,39719,39720,39721,39722,39723,39724,39725,39726,39728,39729,39731,39732,39733,39734,39735,39736,39737,39738,39741,39742,39743,39744,39750,39754,39755,39756,39758,39760,39762,39763,39765,39766,39767,39768,39769,39770,39771,39772,39773,39774,39775,39776,39777,39778,39779,39780,39781,39782,39783,39784,39785,39786,39787,39788,39789,39790,39791,39792,39793,39794,39795,39796,39797,39798,39799,39800,39801,39802,39803,31775,31786,31782,31800,31809,31808,33278,33281,33282,33284,33260,34884,33313,33314,33315,33325,33327,33320,33323,33336,33339,33331,33332,33342,33348,33353,33355,33359,33370,33375,33384,34942,34949,34952,35032,35039,35166,32669,32671,32679,32687,32688,32690,31868,25929,31889,31901,31900,31902,31906,31922,31932,31933,31937,31943,31948,31949,31944,31941,31959,31976,33390,26280,32703,32718,32725,32741,32737,32742,32745,32750,32755,31992,32119,32166,32174,32327,32411,40632,40628,36211,36228,36244,36241,36273,36199,36205,35911,35913,37194,37200,37198,37199,37220,39804,39805,39806,39807,39808,39809,39810,39811,39812,39813,39814,39815,39816,39817,39818,39819,39820,39821,39822,39823,39824,39825,39826,39827,39828,39829,39830,39831,39832,39833,39834,39835,39836,39837,39838,39839,39840,39841,39842,39843,39844,39845,39846,39847,39848,39849,39850,39851,39852,39853,39854,39855,39856,39857,39858,39859,39860,39861,39862,39863,39864,39865,39866,39867,39868,39869,39870,39871,39872,39873,39874,39875,39876,39877,39878,39879,39880,39881,39882,39883,39884,39885,39886,39887,39888,39889,39890,39891,39892,39893,39894,39895,39896,39897,39898,39899,37218,37217,37232,37225,37231,37245,37246,37234,37236,37241,37260,37253,37264,37261,37265,37282,37283,37290,37293,37294,37295,37301,37300,37306,35925,40574,36280,36331,36357,36441,36457,36277,36287,36284,36282,36292,36310,36311,36314,36318,36302,36303,36315,36294,36332,36343,36344,36323,36345,36347,36324,36361,36349,36372,36381,36383,36396,36398,36387,36399,36410,36416,36409,36405,36413,36401,36425,36417,36418,36433,36434,36426,36464,36470,36476,36463,36468,36485,36495,36500,36496,36508,36510,35960,35970,35978,35973,35992,35988,26011,35286,35294,35290,35292,39900,39901,39902,39903,39904,39905,39906,39907,39908,39909,39910,39911,39912,39913,39914,39915,39916,39917,39918,39919,39920,39921,39922,39923,39924,39925,39926,39927,39928,39929,39930,39931,39932,39933,39934,39935,39936,39937,39938,39939,39940,39941,39942,39943,39944,39945,39946,39947,39948,39949,39950,39951,39952,39953,39954,39955,39956,39957,39958,39959,39960,39961,39962,39963,39964,39965,39966,39967,39968,39969,39970,39971,39972,39973,39974,39975,39976,39977,39978,39979,39980,39981,39982,39983,39984,39985,39986,39987,39988,39989,39990,39991,39992,39993,39994,39995,35301,35307,35311,35390,35622,38739,38633,38643,38639,38662,38657,38664,38671,38670,38698,38701,38704,38718,40832,40835,40837,40838,40839,40840,40841,40842,40844,40702,40715,40717,38585,38588,38589,38606,38610,30655,38624,37518,37550,37576,37694,37738,37834,37775,37950,37995,40063,40066,40069,40070,40071,40072,31267,40075,40078,40080,40081,40082,40084,40085,40090,40091,40094,40095,40096,40097,40098,40099,40101,40102,40103,40104,40105,40107,40109,40110,40112,40113,40114,40115,40116,40117,40118,40119,40122,40123,40124,40125,40132,40133,40134,40135,40138,40139,39996,39997,39998,39999,4e4,40001,40002,40003,40004,40005,40006,40007,40008,40009,40010,40011,40012,40013,40014,40015,40016,40017,40018,40019,40020,40021,40022,40023,40024,40025,40026,40027,40028,40029,40030,40031,40032,40033,40034,40035,40036,40037,40038,40039,40040,40041,40042,40043,40044,40045,40046,40047,40048,40049,40050,40051,40052,40053,40054,40055,40056,40057,40058,40059,40061,40062,40064,40067,40068,40073,40074,40076,40079,40083,40086,40087,40088,40089,40093,40106,40108,40111,40121,40126,40127,40128,40129,40130,40136,40137,40145,40146,40154,40155,40160,40161,40140,40141,40142,40143,40144,40147,40148,40149,40151,40152,40153,40156,40157,40159,40162,38780,38789,38801,38802,38804,38831,38827,38819,38834,38836,39601,39600,39607,40536,39606,39610,39612,39617,39616,39621,39618,39627,39628,39633,39749,39747,39751,39753,39752,39757,39761,39144,39181,39214,39253,39252,39647,39649,39654,39663,39659,39675,39661,39673,39688,39695,39699,39711,39715,40637,40638,32315,40578,40583,40584,40587,40594,37846,40605,40607,40667,40668,40669,40672,40671,40674,40681,40679,40677,40682,40687,40738,40748,40751,40761,40759,40765,40766,40772,40163,40164,40165,40166,40167,40168,40169,40170,40171,40172,40173,40174,40175,40176,40177,40178,40179,40180,40181,40182,40183,40184,40185,40186,40187,40188,40189,40190,40191,40192,40193,40194,40195,40196,40197,40198,40199,40200,40201,40202,40203,40204,40205,40206,40207,40208,40209,40210,40211,40212,40213,40214,40215,40216,40217,40218,40219,40220,40221,40222,40223,40224,40225,40226,40227,40228,40229,40230,40231,40232,40233,40234,40235,40236,40237,40238,40239,40240,40241,40242,40243,40244,40245,40246,40247,40248,40249,40250,40251,40252,40253,40254,40255,40256,40257,40258,57908,57909,57910,57911,57912,57913,57914,57915,57916,57917,57918,57919,57920,57921,57922,57923,57924,57925,57926,57927,57928,57929,57930,57931,57932,57933,57934,57935,57936,57937,57938,57939,57940,57941,57942,57943,57944,57945,57946,57947,57948,57949,57950,57951,57952,57953,57954,57955,57956,57957,57958,57959,57960,57961,57962,57963,57964,57965,57966,57967,57968,57969,57970,57971,57972,57973,57974,57975,57976,57977,57978,57979,57980,57981,57982,57983,57984,57985,57986,57987,57988,57989,57990,57991,57992,57993,57994,57995,57996,57997,57998,57999,58e3,58001,40259,40260,40261,40262,40263,40264,40265,40266,40267,40268,40269,40270,40271,40272,40273,40274,40275,40276,40277,40278,40279,40280,40281,40282,40283,40284,40285,40286,40287,40288,40289,40290,40291,40292,40293,40294,40295,40296,40297,40298,40299,40300,40301,40302,40303,40304,40305,40306,40307,40308,40309,40310,40311,40312,40313,40314,40315,40316,40317,40318,40319,40320,40321,40322,40323,40324,40325,40326,40327,40328,40329,40330,40331,40332,40333,40334,40335,40336,40337,40338,40339,40340,40341,40342,40343,40344,40345,40346,40347,40348,40349,40350,40351,40352,40353,40354,58002,58003,58004,58005,58006,58007,58008,58009,58010,58011,58012,58013,58014,58015,58016,58017,58018,58019,58020,58021,58022,58023,58024,58025,58026,58027,58028,58029,58030,58031,58032,58033,58034,58035,58036,58037,58038,58039,58040,58041,58042,58043,58044,58045,58046,58047,58048,58049,58050,58051,58052,58053,58054,58055,58056,58057,58058,58059,58060,58061,58062,58063,58064,58065,58066,58067,58068,58069,58070,58071,58072,58073,58074,58075,58076,58077,58078,58079,58080,58081,58082,58083,58084,58085,58086,58087,58088,58089,58090,58091,58092,58093,58094,58095,40355,40356,40357,40358,40359,40360,40361,40362,40363,40364,40365,40366,40367,40368,40369,40370,40371,40372,40373,40374,40375,40376,40377,40378,40379,40380,40381,40382,40383,40384,40385,40386,40387,40388,40389,40390,40391,40392,40393,40394,40395,40396,40397,40398,40399,40400,40401,40402,40403,40404,40405,40406,40407,40408,40409,40410,40411,40412,40413,40414,40415,40416,40417,40418,40419,40420,40421,40422,40423,40424,40425,40426,40427,40428,40429,40430,40431,40432,40433,40434,40435,40436,40437,40438,40439,40440,40441,40442,40443,40444,40445,40446,40447,40448,40449,40450,58096,58097,58098,58099,58100,58101,58102,58103,58104,58105,58106,58107,58108,58109,58110,58111,58112,58113,58114,58115,58116,58117,58118,58119,58120,58121,58122,58123,58124,58125,58126,58127,58128,58129,58130,58131,58132,58133,58134,58135,58136,58137,58138,58139,58140,58141,58142,58143,58144,58145,58146,58147,58148,58149,58150,58151,58152,58153,58154,58155,58156,58157,58158,58159,58160,58161,58162,58163,58164,58165,58166,58167,58168,58169,58170,58171,58172,58173,58174,58175,58176,58177,58178,58179,58180,58181,58182,58183,58184,58185,58186,58187,58188,58189,40451,40452,40453,40454,40455,40456,40457,40458,40459,40460,40461,40462,40463,40464,40465,40466,40467,40468,40469,40470,40471,40472,40473,40474,40475,40476,40477,40478,40484,40487,40494,40496,40500,40507,40508,40512,40525,40528,40530,40531,40532,40534,40537,40541,40543,40544,40545,40546,40549,40558,40559,40562,40564,40565,40566,40567,40568,40569,40570,40571,40572,40573,40576,40577,40579,40580,40581,40582,40585,40586,40588,40589,40590,40591,40592,40593,40596,40597,40598,40599,40600,40601,40602,40603,40604,40606,40608,40609,40610,40611,40612,40613,40615,40616,40617,40618,58190,58191,58192,58193,58194,58195,58196,58197,58198,58199,58200,58201,58202,58203,58204,58205,58206,58207,58208,58209,58210,58211,58212,58213,58214,58215,58216,58217,58218,58219,58220,58221,58222,58223,58224,58225,58226,58227,58228,58229,58230,58231,58232,58233,58234,58235,58236,58237,58238,58239,58240,58241,58242,58243,58244,58245,58246,58247,58248,58249,58250,58251,58252,58253,58254,58255,58256,58257,58258,58259,58260,58261,58262,58263,58264,58265,58266,58267,58268,58269,58270,58271,58272,58273,58274,58275,58276,58277,58278,58279,58280,58281,58282,58283,40619,40620,40621,40622,40623,40624,40625,40626,40627,40629,40630,40631,40633,40634,40636,40639,40640,40641,40642,40643,40645,40646,40647,40648,40650,40651,40652,40656,40658,40659,40661,40662,40663,40665,40666,40670,40673,40675,40676,40678,40680,40683,40684,40685,40686,40688,40689,40690,40691,40692,40693,40694,40695,40696,40698,40701,40703,40704,40705,40706,40707,40708,40709,40710,40711,40712,40713,40714,40716,40719,40721,40722,40724,40725,40726,40728,40730,40731,40732,40733,40734,40735,40737,40739,40740,40741,40742,40743,40744,40745,40746,40747,40749,40750,40752,40753,58284,58285,58286,58287,58288,58289,58290,58291,58292,58293,58294,58295,58296,58297,58298,58299,58300,58301,58302,58303,58304,58305,58306,58307,58308,58309,58310,58311,58312,58313,58314,58315,58316,58317,58318,58319,58320,58321,58322,58323,58324,58325,58326,58327,58328,58329,58330,58331,58332,58333,58334,58335,58336,58337,58338,58339,58340,58341,58342,58343,58344,58345,58346,58347,58348,58349,58350,58351,58352,58353,58354,58355,58356,58357,58358,58359,58360,58361,58362,58363,58364,58365,58366,58367,58368,58369,58370,58371,58372,58373,58374,58375,58376,58377,40754,40755,40756,40757,40758,40760,40762,40764,40767,40768,40769,40770,40771,40773,40774,40775,40776,40777,40778,40779,40780,40781,40782,40783,40786,40787,40788,40789,40790,40791,40792,40793,40794,40795,40796,40797,40798,40799,40800,40801,40802,40803,40804,40805,40806,40807,40808,40809,40810,40811,40812,40813,40814,40815,40816,40817,40818,40819,40820,40821,40822,40823,40824,40825,40826,40827,40828,40829,40830,40833,40834,40845,40846,40847,40848,40849,40850,40851,40852,40853,40854,40855,40856,40860,40861,40862,40865,40866,40867,40868,40869,63788,63865,63893,63975,63985,58378,58379,58380,58381,58382,58383,58384,58385,58386,58387,58388,58389,58390,58391,58392,58393,58394,58395,58396,58397,58398,58399,58400,58401,58402,58403,58404,58405,58406,58407,58408,58409,58410,58411,58412,58413,58414,58415,58416,58417,58418,58419,58420,58421,58422,58423,58424,58425,58426,58427,58428,58429,58430,58431,58432,58433,58434,58435,58436,58437,58438,58439,58440,58441,58442,58443,58444,58445,58446,58447,58448,58449,58450,58451,58452,58453,58454,58455,58456,58457,58458,58459,58460,58461,58462,58463,58464,58465,58466,58467,58468,58469,58470,58471,64012,64013,64014,64015,64017,64019,64020,64024,64031,64032,64033,64035,64036,64039,64040,64041,11905,59414,59415,59416,11908,13427,13383,11912,11915,59422,13726,13850,13838,11916,11927,14702,14616,59430,14799,14815,14963,14800,59435,59436,15182,15470,15584,11943,59441,59442,11946,16470,16735,11950,17207,11955,11958,11959,59451,17329,17324,11963,17373,17622,18017,17996,59459,18211,18217,18300,18317,11978,18759,18810,18813,18818,18819,18821,18822,18847,18843,18871,18870,59476,59477,19619,19615,19616,19617,19575,19618,19731,19732,19733,19734,19735,19736,19737,19886,59492,58472,58473,58474,58475,58476,58477,58478,58479,58480,58481,58482,58483,58484,58485,58486,58487,58488,58489,58490,58491,58492,58493,58494,58495,58496,58497,58498,58499,58500,58501,58502,58503,58504,58505,58506,58507,58508,58509,58510,58511,58512,58513,58514,58515,58516,58517,58518,58519,58520,58521,58522,58523,58524,58525,58526,58527,58528,58529,58530,58531,58532,58533,58534,58535,58536,58537,58538,58539,58540,58541,58542,58543,58544,58545,58546,58547,58548,58549,58550,58551,58552,58553,58554,58555,58556,58557,58558,58559,58560,58561,58562,58563,58564,58565],"gb18030-ranges":[[0,128],[36,165],[38,169],[45,178],[50,184],[81,216],[89,226],[95,235],[96,238],[100,244],[103,248],[104,251],[105,253],[109,258],[126,276],[133,284],[148,300],[172,325],[175,329],[179,334],[208,364],[306,463],[307,465],[308,467],[309,469],[310,471],[311,473],[312,475],[313,477],[341,506],[428,594],[443,610],[544,712],[545,716],[558,730],[741,930],[742,938],[749,962],[750,970],[805,1026],[819,1104],[820,1106],[7922,8209],[7924,8215],[7925,8218],[7927,8222],[7934,8231],[7943,8241],[7944,8244],[7945,8246],[7950,8252],[8062,8365],[8148,8452],[8149,8454],[8152,8458],[8164,8471],[8174,8482],[8236,8556],[8240,8570],[8262,8596],[8264,8602],[8374,8713],[8380,8720],[8381,8722],[8384,8726],[8388,8731],[8390,8737],[8392,8740],[8393,8742],[8394,8748],[8396,8751],[8401,8760],[8406,8766],[8416,8777],[8419,8781],[8424,8787],[8437,8802],[8439,8808],[8445,8816],[8482,8854],[8485,8858],[8496,8870],[8521,8896],[8603,8979],[8936,9322],[8946,9372],[9046,9548],[9050,9588],[9063,9616],[9066,9622],[9076,9634],[9092,9652],[9100,9662],[9108,9672],[9111,9676],[9113,9680],[9131,9702],[9162,9735],[9164,9738],[9218,9793],[9219,9795],[11329,11906],[11331,11909],[11334,11913],[11336,11917],[11346,11928],[11361,11944],[11363,11947],[11366,11951],[11370,11956],[11372,11960],[11375,11964],[11389,11979],[11682,12284],[11686,12292],[11687,12312],[11692,12319],[11694,12330],[11714,12351],[11716,12436],[11723,12447],[11725,12535],[11730,12543],[11736,12586],[11982,12842],[11989,12850],[12102,12964],[12336,13200],[12348,13215],[12350,13218],[12384,13253],[12393,13263],[12395,13267],[12397,13270],[12510,13384],[12553,13428],[12851,13727],[12962,13839],[12973,13851],[13738,14617],[13823,14703],[13919,14801],[13933,14816],[14080,14964],[14298,15183],[14585,15471],[14698,15585],[15583,16471],[15847,16736],[16318,17208],[16434,17325],[16438,17330],[16481,17374],[16729,17623],[17102,17997],[17122,18018],[17315,18212],[17320,18218],[17402,18301],[17418,18318],[17859,18760],[17909,18811],[17911,18814],[17915,18820],[17916,18823],[17936,18844],[17939,18848],[17961,18872],[18664,19576],[18703,19620],[18814,19738],[18962,19887],[19043,40870],[33469,59244],[33470,59336],[33471,59367],[33484,59413],[33485,59417],[33490,59423],[33497,59431],[33501,59437],[33505,59443],[33513,59452],[33520,59460],[33536,59478],[33550,59493],[37845,63789],[37921,63866],[37948,63894],[38029,63976],[38038,63986],[38064,64016],[38065,64018],[38066,64021],[38069,64025],[38075,64034],[38076,64037],[38078,64042],[39108,65074],[39109,65093],[39113,65107],[39114,65112],[39115,65127],[39116,65132],[39265,65375],[39394,65510],[189e3,65536]],jis0208:[12288,12289,12290,65292,65294,12539,65306,65307,65311,65281,12443,12444,180,65344,168,65342,65507,65343,12541,12542,12445,12446,12291,20189,12293,12294,12295,12540,8213,8208,65295,65340,65374,8741,65372,8230,8229,8216,8217,8220,8221,65288,65289,12308,12309,65339,65341,65371,65373,12296,12297,12298,12299,12300,12301,12302,12303,12304,12305,65291,65293,177,215,247,65309,8800,65308,65310,8806,8807,8734,8756,9794,9792,176,8242,8243,8451,65509,65284,65504,65505,65285,65283,65286,65290,65312,167,9734,9733,9675,9679,9678,9671,9670,9633,9632,9651,9650,9661,9660,8251,12306,8594,8592,8593,8595,12307,null,null,null,null,null,null,null,null,null,null,null,8712,8715,8838,8839,8834,8835,8746,8745,null,null,null,null,null,null,null,null,8743,8744,65506,8658,8660,8704,8707,null,null,null,null,null,null,null,null,null,null,null,8736,8869,8978,8706,8711,8801,8786,8810,8811,8730,8765,8733,8757,8747,8748,null,null,null,null,null,null,null,8491,8240,9839,9837,9834,8224,8225,182,null,null,null,null,9711,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,65296,65297,65298,65299,65300,65301,65302,65303,65304,65305,null,null,null,null,null,null,null,65313,65314,65315,65316,65317,65318,65319,65320,65321,65322,65323,65324,65325,65326,65327,65328,65329,65330,65331,65332,65333,65334,65335,65336,65337,65338,null,null,null,null,null,null,65345,65346,65347,65348,65349,65350,65351,65352,65353,65354,65355,65356,65357,65358,65359,65360,65361,65362,65363,65364,65365,65366,65367,65368,65369,65370,null,null,null,null,12353,12354,12355,12356,12357,12358,12359,12360,12361,12362,12363,12364,12365,12366,12367,12368,12369,12370,12371,12372,12373,12374,12375,12376,12377,12378,12379,12380,12381,12382,12383,12384,12385,12386,12387,12388,12389,12390,12391,12392,12393,12394,12395,12396,12397,12398,12399,12400,12401,12402,12403,12404,12405,12406,12407,12408,12409,12410,12411,12412,12413,12414,12415,12416,12417,12418,12419,12420,12421,12422,12423,12424,12425,12426,12427,12428,12429,12430,12431,12432,12433,12434,12435,null,null,null,null,null,null,null,null,null,null,null,12449,12450,12451,12452,12453,12454,12455,12456,12457,12458,12459,12460,12461,12462,12463,12464,12465,12466,12467,12468,12469,12470,12471,12472,12473,12474,12475,12476,12477,12478,12479,12480,12481,12482,12483,12484,12485,12486,12487,12488,12489,12490,12491,12492,12493,12494,12495,12496,12497,12498,12499,12500,12501,12502,12503,12504,12505,12506,12507,12508,12509,12510,12511,12512,12513,12514,12515,12516,12517,12518,12519,12520,12521,12522,12523,12524,12525,12526,12527,12528,12529,12530,12531,12532,12533,12534,null,null,null,null,null,null,null,null,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,null,null,null,null,null,null,null,null,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,963,964,965,966,967,968,969,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1040,1041,1042,1043,1044,1045,1025,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1072,1073,1074,1075,1076,1077,1105,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,null,null,null,null,null,null,null,null,null,null,null,null,null,9472,9474,9484,9488,9496,9492,9500,9516,9508,9524,9532,9473,9475,9487,9491,9499,9495,9507,9523,9515,9531,9547,9504,9519,9512,9527,9535,9501,9520,9509,9528,9538,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,9312,9313,9314,9315,9316,9317,9318,9319,9320,9321,9322,9323,9324,9325,9326,9327,9328,9329,9330,9331,8544,8545,8546,8547,8548,8549,8550,8551,8552,8553,null,13129,13076,13090,13133,13080,13095,13059,13110,13137,13143,13069,13094,13091,13099,13130,13115,13212,13213,13214,13198,13199,13252,13217,null,null,null,null,null,null,null,null,13179,12317,12319,8470,13261,8481,12964,12965,12966,12967,12968,12849,12850,12857,13182,13181,13180,8786,8801,8747,8750,8721,8730,8869,8736,8735,8895,8757,8745,8746,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,20124,21782,23043,38463,21696,24859,25384,23030,36898,33909,33564,31312,24746,25569,28197,26093,33894,33446,39925,26771,22311,26017,25201,23451,22992,34427,39156,32098,32190,39822,25110,31903,34999,23433,24245,25353,26263,26696,38343,38797,26447,20197,20234,20301,20381,20553,22258,22839,22996,23041,23561,24799,24847,24944,26131,26885,28858,30031,30064,31227,32173,32239,32963,33806,34915,35586,36949,36986,21307,20117,20133,22495,32946,37057,30959,19968,22769,28322,36920,31282,33576,33419,39983,20801,21360,21693,21729,22240,23035,24341,39154,28139,32996,34093,38498,38512,38560,38907,21515,21491,23431,28879,32701,36802,38632,21359,40284,31418,19985,30867,33276,28198,22040,21764,27421,34074,39995,23013,21417,28006,29916,38287,22082,20113,36939,38642,33615,39180,21473,21942,23344,24433,26144,26355,26628,27704,27891,27945,29787,30408,31310,38964,33521,34907,35424,37613,28082,30123,30410,39365,24742,35585,36234,38322,27022,21421,20870,22290,22576,22852,23476,24310,24616,25513,25588,27839,28436,28814,28948,29017,29141,29503,32257,33398,33489,34199,36960,37467,40219,22633,26044,27738,29989,20985,22830,22885,24448,24540,25276,26106,27178,27431,27572,29579,32705,35158,40236,40206,40644,23713,27798,33659,20740,23627,25014,33222,26742,29281,20057,20474,21368,24681,28201,31311,38899,19979,21270,20206,20309,20285,20385,20339,21152,21487,22025,22799,23233,23478,23521,31185,26247,26524,26550,27468,27827,28779,29634,31117,31166,31292,31623,33457,33499,33540,33655,33775,33747,34662,35506,22057,36008,36838,36942,38686,34442,20420,23784,25105,29273,30011,33253,33469,34558,36032,38597,39187,39381,20171,20250,35299,22238,22602,22730,24315,24555,24618,24724,24674,25040,25106,25296,25913,39745,26214,26800,28023,28784,30028,30342,32117,33445,34809,38283,38542,35997,20977,21182,22806,21683,23475,23830,24936,27010,28079,30861,33995,34903,35442,37799,39608,28012,39336,34521,22435,26623,34510,37390,21123,22151,21508,24275,25313,25785,26684,26680,27579,29554,30906,31339,35226,35282,36203,36611,37101,38307,38548,38761,23398,23731,27005,38989,38990,25499,31520,27179,27263,26806,39949,28511,21106,21917,24688,25324,27963,28167,28369,33883,35088,36676,19988,39993,21494,26907,27194,38788,26666,20828,31427,33970,37340,37772,22107,40232,26658,33541,33841,31909,21e3,33477,29926,20094,20355,20896,23506,21002,21208,21223,24059,21914,22570,23014,23436,23448,23515,24178,24185,24739,24863,24931,25022,25563,25954,26577,26707,26874,27454,27475,27735,28450,28567,28485,29872,29976,30435,30475,31487,31649,31777,32233,32566,32752,32925,33382,33694,35251,35532,36011,36996,37969,38291,38289,38306,38501,38867,39208,33304,20024,21547,23736,24012,29609,30284,30524,23721,32747,36107,38593,38929,38996,39e3,20225,20238,21361,21916,22120,22522,22855,23305,23492,23696,24076,24190,24524,25582,26426,26071,26082,26399,26827,26820,27231,24112,27589,27671,27773,30079,31048,23395,31232,32e3,24509,35215,35352,36020,36215,36556,36637,39138,39438,39740,20096,20605,20736,22931,23452,25135,25216,25836,27450,29344,30097,31047,32681,34811,35516,35696,25516,33738,38816,21513,21507,21931,26708,27224,35440,30759,26485,40653,21364,23458,33050,34384,36870,19992,20037,20167,20241,21450,21560,23470,24339,24613,25937,26429,27714,27762,27875,28792,29699,31350,31406,31496,32026,31998,32102,26087,29275,21435,23621,24040,25298,25312,25369,28192,34394,35377,36317,37624,28417,31142,39770,20136,20139,20140,20379,20384,20689,20807,31478,20849,20982,21332,21281,21375,21483,21932,22659,23777,24375,24394,24623,24656,24685,25375,25945,27211,27841,29378,29421,30703,33016,33029,33288,34126,37111,37857,38911,39255,39514,20208,20957,23597,26241,26989,23616,26354,26997,29577,26704,31873,20677,21220,22343,24062,37670,26020,27427,27453,29748,31105,31165,31563,32202,33465,33740,34943,35167,35641,36817,37329,21535,37504,20061,20534,21477,21306,29399,29590,30697,33510,36527,39366,39368,39378,20855,24858,34398,21936,31354,20598,23507,36935,38533,20018,27355,37351,23633,23624,25496,31391,27795,38772,36705,31402,29066,38536,31874,26647,32368,26705,37740,21234,21531,34219,35347,32676,36557,37089,21350,34952,31041,20418,20670,21009,20804,21843,22317,29674,22411,22865,24418,24452,24693,24950,24935,25001,25522,25658,25964,26223,26690,28179,30054,31293,31995,32076,32153,32331,32619,33550,33610,34509,35336,35427,35686,36605,38938,40335,33464,36814,39912,21127,25119,25731,28608,38553,26689,20625,27424,27770,28500,31348,32080,34880,35363,26376,20214,20537,20518,20581,20860,21048,21091,21927,22287,22533,23244,24314,25010,25080,25331,25458,26908,27177,29309,29356,29486,30740,30831,32121,30476,32937,35211,35609,36066,36562,36963,37749,38522,38997,39443,40568,20803,21407,21427,24187,24358,28187,28304,29572,29694,32067,33335,35328,35578,38480,20046,20491,21476,21628,22266,22993,23396,24049,24235,24359,25144,25925,26543,28246,29392,31946,34996,32929,32993,33776,34382,35463,36328,37431,38599,39015,40723,20116,20114,20237,21320,21577,21566,23087,24460,24481,24735,26791,27278,29786,30849,35486,35492,35703,37264,20062,39881,20132,20348,20399,20505,20502,20809,20844,21151,21177,21246,21402,21475,21521,21518,21897,22353,22434,22909,23380,23389,23439,24037,24039,24055,24184,24195,24218,24247,24344,24658,24908,25239,25304,25511,25915,26114,26179,26356,26477,26657,26775,27083,27743,27946,28009,28207,28317,30002,30343,30828,31295,31968,32005,32024,32094,32177,32789,32771,32943,32945,33108,33167,33322,33618,34892,34913,35611,36002,36092,37066,37237,37489,30783,37628,38308,38477,38917,39321,39640,40251,21083,21163,21495,21512,22741,25335,28640,35946,36703,40633,20811,21051,21578,22269,31296,37239,40288,40658,29508,28425,33136,29969,24573,24794,39592,29403,36796,27492,38915,20170,22256,22372,22718,23130,24680,25031,26127,26118,26681,26801,28151,30165,32058,33390,39746,20123,20304,21449,21766,23919,24038,24046,26619,27801,29811,30722,35408,37782,35039,22352,24231,25387,20661,20652,20877,26368,21705,22622,22971,23472,24425,25165,25505,26685,27507,28168,28797,37319,29312,30741,30758,31085,25998,32048,33756,35009,36617,38555,21092,22312,26448,32618,36001,20916,22338,38442,22586,27018,32948,21682,23822,22524,30869,40442,20316,21066,21643,25662,26152,26388,26613,31364,31574,32034,37679,26716,39853,31545,21273,20874,21047,23519,25334,25774,25830,26413,27578,34217,38609,30352,39894,25420,37638,39851,30399,26194,19977,20632,21442,23665,24808,25746,25955,26719,29158,29642,29987,31639,32386,34453,35715,36059,37240,39184,26028,26283,27531,20181,20180,20282,20351,21050,21496,21490,21987,22235,22763,22987,22985,23039,23376,23629,24066,24107,24535,24605,25351,25903,23388,26031,26045,26088,26525,27490,27515,27663,29509,31049,31169,31992,32025,32043,32930,33026,33267,35222,35422,35433,35430,35468,35566,36039,36060,38604,39164,27503,20107,20284,20365,20816,23383,23546,24904,25345,26178,27425,28363,27835,29246,29885,30164,30913,31034,32780,32819,33258,33940,36766,27728,40575,24335,35672,40235,31482,36600,23437,38635,19971,21489,22519,22833,23241,23460,24713,28287,28422,30142,36074,23455,34048,31712,20594,26612,33437,23649,34122,32286,33294,20889,23556,25448,36198,26012,29038,31038,32023,32773,35613,36554,36974,34503,37034,20511,21242,23610,26451,28796,29237,37196,37320,37675,33509,23490,24369,24825,20027,21462,23432,25163,26417,27530,29417,29664,31278,33131,36259,37202,39318,20754,21463,21610,23551,25480,27193,32172,38656,22234,21454,21608,23447,23601,24030,20462,24833,25342,27954,31168,31179,32066,32333,32722,33261,33311,33936,34886,35186,35728,36468,36655,36913,37195,37228,38598,37276,20160,20303,20805,21313,24467,25102,26580,27713,28171,29539,32294,37325,37507,21460,22809,23487,28113,31069,32302,31899,22654,29087,20986,34899,36848,20426,23803,26149,30636,31459,33308,39423,20934,24490,26092,26991,27529,28147,28310,28516,30462,32020,24033,36981,37255,38918,20966,21021,25152,26257,26329,28186,24246,32210,32626,26360,34223,34295,35576,21161,21465,22899,24207,24464,24661,37604,38500,20663,20767,21213,21280,21319,21484,21736,21830,21809,22039,22888,22974,23100,23477,23558,23567,23569,23578,24196,24202,24288,24432,25215,25220,25307,25484,25463,26119,26124,26157,26230,26494,26786,27167,27189,27836,28040,28169,28248,28988,28966,29031,30151,30465,30813,30977,31077,31216,31456,31505,31911,32057,32918,33750,33931,34121,34909,35059,35359,35388,35412,35443,35937,36062,37284,37478,37758,37912,38556,38808,19978,19976,19998,20055,20887,21104,22478,22580,22732,23330,24120,24773,25854,26465,26454,27972,29366,30067,31331,33976,35698,37304,37664,22065,22516,39166,25325,26893,27542,29165,32340,32887,33394,35302,39135,34645,36785,23611,20280,20449,20405,21767,23072,23517,23529,24515,24910,25391,26032,26187,26862,27035,28024,28145,30003,30137,30495,31070,31206,32051,33251,33455,34218,35242,35386,36523,36763,36914,37341,38663,20154,20161,20995,22645,22764,23563,29978,23613,33102,35338,36805,38499,38765,31525,35535,38920,37218,22259,21416,36887,21561,22402,24101,25512,27700,28810,30561,31883,32736,34928,36930,37204,37648,37656,38543,29790,39620,23815,23913,25968,26530,36264,38619,25454,26441,26905,33733,38935,38592,35070,28548,25722,23544,19990,28716,30045,26159,20932,21046,21218,22995,24449,24615,25104,25919,25972,26143,26228,26866,26646,27491,28165,29298,29983,30427,31934,32854,22768,35069,35199,35488,35475,35531,36893,37266,38738,38745,25993,31246,33030,38587,24109,24796,25114,26021,26132,26512,30707,31309,31821,32318,33034,36012,36196,36321,36447,30889,20999,25305,25509,25666,25240,35373,31363,31680,35500,38634,32118,33292,34633,20185,20808,21315,21344,23459,23554,23574,24029,25126,25159,25776,26643,26676,27849,27973,27927,26579,28508,29006,29053,26059,31359,31661,32218,32330,32680,33146,33307,33337,34214,35438,36046,36341,36984,36983,37549,37521,38275,39854,21069,21892,28472,28982,20840,31109,32341,33203,31950,22092,22609,23720,25514,26366,26365,26970,29401,30095,30094,30990,31062,31199,31895,32032,32068,34311,35380,38459,36961,40736,20711,21109,21452,21474,20489,21930,22766,22863,29245,23435,23652,21277,24803,24819,25436,25475,25407,25531,25805,26089,26361,24035,27085,27133,28437,29157,20105,30185,30456,31379,31967,32207,32156,32865,33609,33624,33900,33980,34299,35013,36208,36865,36973,37783,38684,39442,20687,22679,24974,33235,34101,36104,36896,20419,20596,21063,21363,24687,25417,26463,28204,36275,36895,20439,23646,36042,26063,32154,21330,34966,20854,25539,23384,23403,23562,25613,26449,36956,20182,22810,22826,27760,35409,21822,22549,22949,24816,25171,26561,33333,26965,38464,39364,39464,20307,22534,23550,32784,23729,24111,24453,24608,24907,25140,26367,27888,28382,32974,33151,33492,34955,36024,36864,36910,38538,40667,39899,20195,21488,22823,31532,37261,38988,40441,28381,28711,21331,21828,23429,25176,25246,25299,27810,28655,29730,35351,37944,28609,35582,33592,20967,34552,21482,21481,20294,36948,36784,22890,33073,24061,31466,36799,26842,35895,29432,40008,27197,35504,20025,21336,22022,22374,25285,25506,26086,27470,28129,28251,28845,30701,31471,31658,32187,32829,32966,34507,35477,37723,22243,22727,24382,26029,26262,27264,27573,30007,35527,20516,30693,22320,24347,24677,26234,27744,30196,31258,32622,33268,34584,36933,39347,31689,30044,31481,31569,33988,36880,31209,31378,33590,23265,30528,20013,20210,23449,24544,25277,26172,26609,27880,34411,34935,35387,37198,37619,39376,27159,28710,29482,33511,33879,36015,19969,20806,20939,21899,23541,24086,24115,24193,24340,24373,24427,24500,25074,25361,26274,26397,28526,29266,30010,30522,32884,33081,33144,34678,35519,35548,36229,36339,37530,38263,38914,40165,21189,25431,30452,26389,27784,29645,36035,37806,38515,27941,22684,26894,27084,36861,37786,30171,36890,22618,26626,25524,27131,20291,28460,26584,36795,34086,32180,37716,26943,28528,22378,22775,23340,32044,29226,21514,37347,40372,20141,20302,20572,20597,21059,35998,21576,22564,23450,24093,24213,24237,24311,24351,24716,25269,25402,25552,26799,27712,30855,31118,31243,32224,33351,35330,35558,36420,36883,37048,37165,37336,40718,27877,25688,25826,25973,28404,30340,31515,36969,37841,28346,21746,24505,25764,36685,36845,37444,20856,22635,22825,23637,24215,28155,32399,29980,36028,36578,39003,28857,20253,27583,28593,3e4,38651,20814,21520,22581,22615,22956,23648,24466,26007,26460,28193,30331,33759,36077,36884,37117,37709,30757,30778,21162,24230,22303,22900,24594,20498,20826,20908,20941,20992,21776,22612,22616,22871,23445,23798,23947,24764,25237,25645,26481,26691,26812,26847,30423,28120,28271,28059,28783,29128,24403,30168,31095,31561,31572,31570,31958,32113,21040,33891,34153,34276,35342,35588,35910,36367,36867,36879,37913,38518,38957,39472,38360,20685,21205,21516,22530,23566,24999,25758,27934,30643,31461,33012,33796,36947,37509,23776,40199,21311,24471,24499,28060,29305,30563,31167,31716,27602,29420,35501,26627,27233,20984,31361,26932,23626,40182,33515,23493,37193,28702,22136,23663,24775,25958,27788,35930,36929,38931,21585,26311,37389,22856,37027,20869,20045,20970,34201,35598,28760,25466,37707,26978,39348,32260,30071,21335,26976,36575,38627,27741,20108,23612,24336,36841,21250,36049,32905,34425,24319,26085,20083,20837,22914,23615,38894,20219,22922,24525,35469,28641,31152,31074,23527,33905,29483,29105,24180,24565,25467,25754,29123,31896,20035,24316,20043,22492,22178,24745,28611,32013,33021,33075,33215,36786,35223,34468,24052,25226,25773,35207,26487,27874,27966,29750,30772,23110,32629,33453,39340,20467,24259,25309,25490,25943,26479,30403,29260,32972,32954,36649,37197,20493,22521,23186,26757,26995,29028,29437,36023,22770,36064,38506,36889,34687,31204,30695,33833,20271,21093,21338,25293,26575,27850,30333,31636,31893,33334,34180,36843,26333,28448,29190,32283,33707,39361,40614,20989,31665,30834,31672,32903,31560,27368,24161,32908,30033,30048,20843,37474,28300,30330,37271,39658,20240,32624,25244,31567,38309,40169,22138,22617,34532,38588,20276,21028,21322,21453,21467,24070,25644,26001,26495,27710,27726,29256,29359,29677,30036,32321,33324,34281,36009,31684,37318,29033,38930,39151,25405,26217,30058,30436,30928,34115,34542,21290,21329,21542,22915,24199,24444,24754,25161,25209,25259,26e3,27604,27852,30130,30382,30865,31192,32203,32631,32933,34987,35513,36027,36991,38750,39131,27147,31800,20633,23614,24494,26503,27608,29749,30473,32654,40763,26570,31255,21305,30091,39661,24422,33181,33777,32920,24380,24517,30050,31558,36924,26727,23019,23195,32016,30334,35628,20469,24426,27161,27703,28418,29922,31080,34920,35413,35961,24287,25551,30149,31186,33495,37672,37618,33948,34541,39981,21697,24428,25996,27996,28693,36007,36051,38971,25935,29942,19981,20184,22496,22827,23142,23500,20904,24067,24220,24598,25206,25975,26023,26222,28014,29238,31526,33104,33178,33433,35676,36e3,36070,36212,38428,38468,20398,25771,27494,33310,33889,34154,37096,23553,26963,39080,33914,34135,20239,21103,24489,24133,26381,31119,33145,35079,35206,28149,24343,25173,27832,20175,29289,39826,20998,21563,22132,22707,24996,25198,28954,22894,31881,31966,32027,38640,25991,32862,19993,20341,20853,22592,24163,24179,24330,26564,20006,34109,38281,38491,31859,38913,20731,22721,30294,30887,21029,30629,34065,31622,20559,22793,29255,31687,32232,36794,36820,36941,20415,21193,23081,24321,38829,20445,33303,37610,22275,25429,27497,29995,35036,36628,31298,21215,22675,24917,25098,26286,27597,31807,33769,20515,20472,21253,21574,22577,22857,23453,23792,23791,23849,24214,25265,25447,25918,26041,26379,27861,27873,28921,30770,32299,32990,33459,33804,34028,34562,35090,35370,35914,37030,37586,39165,40179,40300,20047,20129,20621,21078,22346,22952,24125,24536,24537,25151,26292,26395,26576,26834,20882,32033,32938,33192,35584,35980,36031,37502,38450,21536,38956,21271,20693,21340,22696,25778,26420,29287,30566,31302,37350,21187,27809,27526,22528,24140,22868,26412,32763,20961,30406,25705,30952,39764,40635,22475,22969,26151,26522,27598,21737,27097,24149,33180,26517,39850,26622,40018,26717,20134,20451,21448,25273,26411,27819,36804,20397,32365,40639,19975,24930,28288,28459,34067,21619,26410,39749,24051,31637,23724,23494,34588,28234,34001,31252,33032,22937,31885,27665,30496,21209,22818,28961,29279,30683,38695,40289,26891,23167,23064,20901,21517,21629,26126,30431,36855,37528,40180,23018,29277,28357,20813,26825,32191,32236,38754,40634,25720,27169,33538,22916,23391,27611,29467,30450,32178,32791,33945,20786,26408,40665,30446,26466,21247,39173,23588,25147,31870,36016,21839,24758,32011,38272,21249,20063,20918,22812,29242,32822,37326,24357,30690,21380,24441,32004,34220,35379,36493,38742,26611,34222,37971,24841,24840,27833,30290,35565,36664,21807,20305,20778,21191,21451,23461,24189,24736,24962,25558,26377,26586,28263,28044,29494,29495,30001,31056,35029,35480,36938,37009,37109,38596,34701,22805,20104,20313,19982,35465,36671,38928,20653,24188,22934,23481,24248,25562,25594,25793,26332,26954,27096,27915,28342,29076,29992,31407,32650,32768,33865,33993,35201,35617,36362,36965,38525,39178,24958,25233,27442,27779,28020,32716,32764,28096,32645,34746,35064,26469,33713,38972,38647,27931,32097,33853,37226,20081,21365,23888,27396,28651,34253,34349,35239,21033,21519,23653,26446,26792,29702,29827,30178,35023,35041,37324,38626,38520,24459,29575,31435,33870,25504,30053,21129,27969,28316,29705,30041,30827,31890,38534,31452,40845,20406,24942,26053,34396,20102,20142,20698,20001,20940,23534,26009,26753,28092,29471,30274,30637,31260,31975,33391,35538,36988,37327,38517,38936,21147,32209,20523,21400,26519,28107,29136,29747,33256,36650,38563,40023,40607,29792,22593,28057,32047,39006,20196,20278,20363,20919,21169,23994,24604,29618,31036,33491,37428,38583,38646,38666,40599,40802,26278,27508,21015,21155,28872,35010,24265,24651,24976,28451,29001,31806,32244,32879,34030,36899,37676,21570,39791,27347,28809,36034,36335,38706,21172,23105,24266,24324,26391,27004,27028,28010,28431,29282,29436,31725,32769,32894,34635,37070,20845,40595,31108,32907,37682,35542,20525,21644,35441,27498,36036,33031,24785,26528,40434,20121,20120,39952,35435,34241,34152,26880,28286,30871,33109,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,24332,19984,19989,20010,20017,20022,20028,20031,20034,20054,20056,20098,20101,35947,20106,33298,24333,20110,20126,20127,20128,20130,20144,20147,20150,20174,20173,20164,20166,20162,20183,20190,20205,20191,20215,20233,20314,20272,20315,20317,20311,20295,20342,20360,20367,20376,20347,20329,20336,20369,20335,20358,20374,20760,20436,20447,20430,20440,20443,20433,20442,20432,20452,20453,20506,20520,20500,20522,20517,20485,20252,20470,20513,20521,20524,20478,20463,20497,20486,20547,20551,26371,20565,20560,20552,20570,20566,20588,20600,20608,20634,20613,20660,20658,20681,20682,20659,20674,20694,20702,20709,20717,20707,20718,20729,20725,20745,20737,20738,20758,20757,20756,20762,20769,20794,20791,20796,20795,20799,20800,20818,20812,20820,20834,31480,20841,20842,20846,20864,20866,22232,20876,20873,20879,20881,20883,20885,20886,20900,20902,20898,20905,20906,20907,20915,20913,20914,20912,20917,20925,20933,20937,20955,20960,34389,20969,20973,20976,20981,20990,20996,21003,21012,21006,21031,21034,21038,21043,21049,21071,21060,21067,21068,21086,21076,21098,21108,21097,21107,21119,21117,21133,21140,21138,21105,21128,21137,36776,36775,21164,21165,21180,21173,21185,21197,21207,21214,21219,21222,39149,21216,21235,21237,21240,21241,21254,21256,30008,21261,21264,21263,21269,21274,21283,21295,21297,21299,21304,21312,21318,21317,19991,21321,21325,20950,21342,21353,21358,22808,21371,21367,21378,21398,21408,21414,21413,21422,21424,21430,21443,31762,38617,21471,26364,29166,21486,21480,21485,21498,21505,21565,21568,21548,21549,21564,21550,21558,21545,21533,21582,21647,21621,21646,21599,21617,21623,21616,21650,21627,21632,21622,21636,21648,21638,21703,21666,21688,21669,21676,21700,21704,21672,21675,21698,21668,21694,21692,21720,21733,21734,21775,21780,21757,21742,21741,21754,21730,21817,21824,21859,21836,21806,21852,21829,21846,21847,21816,21811,21853,21913,21888,21679,21898,21919,21883,21886,21912,21918,21934,21884,21891,21929,21895,21928,21978,21957,21983,21956,21980,21988,21972,22036,22007,22038,22014,22013,22043,22009,22094,22096,29151,22068,22070,22066,22072,22123,22116,22063,22124,22122,22150,22144,22154,22176,22164,22159,22181,22190,22198,22196,22210,22204,22209,22211,22208,22216,22222,22225,22227,22231,22254,22265,22272,22271,22276,22281,22280,22283,22285,22291,22296,22294,21959,22300,22310,22327,22328,22350,22331,22336,22351,22377,22464,22408,22369,22399,22409,22419,22432,22451,22436,22442,22448,22467,22470,22484,22482,22483,22538,22486,22499,22539,22553,22557,22642,22561,22626,22603,22640,27584,22610,22589,22649,22661,22713,22687,22699,22714,22750,22715,22712,22702,22725,22739,22737,22743,22745,22744,22757,22748,22756,22751,22767,22778,22777,22779,22780,22781,22786,22794,22800,22811,26790,22821,22828,22829,22834,22840,22846,31442,22869,22864,22862,22874,22872,22882,22880,22887,22892,22889,22904,22913,22941,20318,20395,22947,22962,22982,23016,23004,22925,23001,23002,23077,23071,23057,23068,23049,23066,23104,23148,23113,23093,23094,23138,23146,23194,23228,23230,23243,23234,23229,23267,23255,23270,23273,23254,23290,23291,23308,23307,23318,23346,23248,23338,23350,23358,23363,23365,23360,23377,23381,23386,23387,23397,23401,23408,23411,23413,23416,25992,23418,23424,23427,23462,23480,23491,23495,23497,23508,23504,23524,23526,23522,23518,23525,23531,23536,23542,23539,23557,23559,23560,23565,23571,23584,23586,23592,23608,23609,23617,23622,23630,23635,23632,23631,23409,23660,23662,20066,23670,23673,23692,23697,23700,22939,23723,23739,23734,23740,23735,23749,23742,23751,23769,23785,23805,23802,23789,23948,23786,23819,23829,23831,23900,23839,23835,23825,23828,23842,23834,23833,23832,23884,23890,23886,23883,23916,23923,23926,23943,23940,23938,23970,23965,23980,23982,23997,23952,23991,23996,24009,24013,24019,24018,24022,24027,24043,24050,24053,24075,24090,24089,24081,24091,24118,24119,24132,24131,24128,24142,24151,24148,24159,24162,24164,24135,24181,24182,24186,40636,24191,24224,24257,24258,24264,24272,24271,24278,24291,24285,24282,24283,24290,24289,24296,24297,24300,24305,24307,24304,24308,24312,24318,24323,24329,24413,24412,24331,24337,24342,24361,24365,24376,24385,24392,24396,24398,24367,24401,24406,24407,24409,24417,24429,24435,24439,24451,24450,24447,24458,24456,24465,24455,24478,24473,24472,24480,24488,24493,24508,24534,24571,24548,24568,24561,24541,24755,24575,24609,24672,24601,24592,24617,24590,24625,24603,24597,24619,24614,24591,24634,24666,24641,24682,24695,24671,24650,24646,24653,24675,24643,24676,24642,24684,24683,24665,24705,24717,24807,24707,24730,24708,24731,24726,24727,24722,24743,24715,24801,24760,24800,24787,24756,24560,24765,24774,24757,24792,24909,24853,24838,24822,24823,24832,24820,24826,24835,24865,24827,24817,24845,24846,24903,24894,24872,24871,24906,24895,24892,24876,24884,24893,24898,24900,24947,24951,24920,24921,24922,24939,24948,24943,24933,24945,24927,24925,24915,24949,24985,24982,24967,25004,24980,24986,24970,24977,25003,25006,25036,25034,25033,25079,25032,25027,25030,25018,25035,32633,25037,25062,25059,25078,25082,25076,25087,25085,25084,25086,25088,25096,25097,25101,25100,25108,25115,25118,25121,25130,25134,25136,25138,25139,25153,25166,25182,25187,25179,25184,25192,25212,25218,25225,25214,25234,25235,25238,25300,25219,25236,25303,25297,25275,25295,25343,25286,25812,25288,25308,25292,25290,25282,25287,25243,25289,25356,25326,25329,25383,25346,25352,25327,25333,25424,25406,25421,25628,25423,25494,25486,25472,25515,25462,25507,25487,25481,25503,25525,25451,25449,25534,25577,25536,25542,25571,25545,25554,25590,25540,25622,25652,25606,25619,25638,25654,25885,25623,25640,25615,25703,25711,25718,25678,25898,25749,25747,25765,25769,25736,25788,25818,25810,25797,25799,25787,25816,25794,25841,25831,33289,25824,25825,25260,25827,25839,25900,25846,25844,25842,25850,25856,25853,25880,25884,25861,25892,25891,25899,25908,25909,25911,25910,25912,30027,25928,25942,25941,25933,25944,25950,25949,25970,25976,25986,25987,35722,26011,26015,26027,26039,26051,26054,26049,26052,26060,26066,26075,26073,26080,26081,26097,26482,26122,26115,26107,26483,26165,26166,26164,26140,26191,26180,26185,26177,26206,26205,26212,26215,26216,26207,26210,26224,26243,26248,26254,26249,26244,26264,26269,26305,26297,26313,26302,26300,26308,26296,26326,26330,26336,26175,26342,26345,26352,26357,26359,26383,26390,26398,26406,26407,38712,26414,26431,26422,26433,26424,26423,26438,26462,26464,26457,26467,26468,26505,26480,26537,26492,26474,26508,26507,26534,26529,26501,26551,26607,26548,26604,26547,26601,26552,26596,26590,26589,26594,26606,26553,26574,26566,26599,27292,26654,26694,26665,26688,26701,26674,26702,26803,26667,26713,26723,26743,26751,26783,26767,26797,26772,26781,26779,26755,27310,26809,26740,26805,26784,26810,26895,26765,26750,26881,26826,26888,26840,26914,26918,26849,26892,26829,26836,26855,26837,26934,26898,26884,26839,26851,26917,26873,26848,26863,26920,26922,26906,26915,26913,26822,27001,26999,26972,27e3,26987,26964,27006,26990,26937,26996,26941,26969,26928,26977,26974,26973,27009,26986,27058,27054,27088,27071,27073,27091,27070,27086,23528,27082,27101,27067,27075,27047,27182,27025,27040,27036,27029,27060,27102,27112,27138,27163,27135,27402,27129,27122,27111,27141,27057,27166,27117,27156,27115,27146,27154,27329,27171,27155,27204,27148,27250,27190,27256,27207,27234,27225,27238,27208,27192,27170,27280,27277,27296,27268,27298,27299,27287,34327,27323,27331,27330,27320,27315,27308,27358,27345,27359,27306,27354,27370,27387,27397,34326,27386,27410,27414,39729,27423,27448,27447,30428,27449,39150,27463,27459,27465,27472,27481,27476,27483,27487,27489,27512,27513,27519,27520,27524,27523,27533,27544,27541,27550,27556,27562,27563,27567,27570,27569,27571,27575,27580,27590,27595,27603,27615,27628,27627,27635,27631,40638,27656,27667,27668,27675,27684,27683,27742,27733,27746,27754,27778,27789,27802,27777,27803,27774,27752,27763,27794,27792,27844,27889,27859,27837,27863,27845,27869,27822,27825,27838,27834,27867,27887,27865,27882,27935,34893,27958,27947,27965,27960,27929,27957,27955,27922,27916,28003,28051,28004,27994,28025,27993,28046,28053,28644,28037,28153,28181,28170,28085,28103,28134,28088,28102,28140,28126,28108,28136,28114,28101,28154,28121,28132,28117,28138,28142,28205,28270,28206,28185,28274,28255,28222,28195,28267,28203,28278,28237,28191,28227,28218,28238,28196,28415,28189,28216,28290,28330,28312,28361,28343,28371,28349,28335,28356,28338,28372,28373,28303,28325,28354,28319,28481,28433,28748,28396,28408,28414,28479,28402,28465,28399,28466,28364,28478,28435,28407,28550,28538,28536,28545,28544,28527,28507,28659,28525,28546,28540,28504,28558,28561,28610,28518,28595,28579,28577,28580,28601,28614,28586,28639,28629,28652,28628,28632,28657,28654,28635,28681,28683,28666,28689,28673,28687,28670,28699,28698,28532,28701,28696,28703,28720,28734,28722,28753,28771,28825,28818,28847,28913,28844,28856,28851,28846,28895,28875,28893,28889,28937,28925,28956,28953,29029,29013,29064,29030,29026,29004,29014,29036,29071,29179,29060,29077,29096,29100,29143,29113,29118,29138,29129,29140,29134,29152,29164,29159,29173,29180,29177,29183,29197,29200,29211,29224,29229,29228,29232,29234,29243,29244,29247,29248,29254,29259,29272,29300,29310,29314,29313,29319,29330,29334,29346,29351,29369,29362,29379,29382,29380,29390,29394,29410,29408,29409,29433,29431,20495,29463,29450,29468,29462,29469,29492,29487,29481,29477,29502,29518,29519,40664,29527,29546,29544,29552,29560,29557,29563,29562,29640,29619,29646,29627,29632,29669,29678,29662,29858,29701,29807,29733,29688,29746,29754,29781,29759,29791,29785,29761,29788,29801,29808,29795,29802,29814,29822,29835,29854,29863,29898,29903,29908,29681,29920,29923,29927,29929,29934,29938,29936,29937,29944,29943,29956,29955,29957,29964,29966,29965,29973,29971,29982,29990,29996,30012,30020,30029,30026,30025,30043,30022,30042,30057,30052,30055,30059,30061,30072,30070,30086,30087,30068,30090,30089,30082,30100,30106,30109,30117,30115,30146,30131,30147,30133,30141,30136,30140,30129,30157,30154,30162,30169,30179,30174,30206,30207,30204,30209,30192,30202,30194,30195,30219,30221,30217,30239,30247,30240,30241,30242,30244,30260,30256,30267,30279,30280,30278,30300,30296,30305,30306,30312,30313,30314,30311,30316,30320,30322,30326,30328,30332,30336,30339,30344,30347,30350,30358,30355,30361,30362,30384,30388,30392,30393,30394,30402,30413,30422,30418,30430,30433,30437,30439,30442,34351,30459,30472,30471,30468,30505,30500,30494,30501,30502,30491,30519,30520,30535,30554,30568,30571,30555,30565,30591,30590,30585,30606,30603,30609,30624,30622,30640,30646,30649,30655,30652,30653,30651,30663,30669,30679,30682,30684,30691,30702,30716,30732,30738,31014,30752,31018,30789,30862,30836,30854,30844,30874,30860,30883,30901,30890,30895,30929,30918,30923,30932,30910,30908,30917,30922,30956,30951,30938,30973,30964,30983,30994,30993,31001,31020,31019,31040,31072,31063,31071,31066,31061,31059,31098,31103,31114,31133,31143,40779,31146,31150,31155,31161,31162,31177,31189,31207,31212,31201,31203,31240,31245,31256,31257,31264,31263,31104,31281,31291,31294,31287,31299,31319,31305,31329,31330,31337,40861,31344,31353,31357,31368,31383,31381,31384,31382,31401,31432,31408,31414,31429,31428,31423,36995,31431,31434,31437,31439,31445,31443,31449,31450,31453,31457,31458,31462,31469,31472,31490,31503,31498,31494,31539,31512,31513,31518,31541,31528,31542,31568,31610,31492,31565,31499,31564,31557,31605,31589,31604,31591,31600,31601,31596,31598,31645,31640,31647,31629,31644,31642,31627,31634,31631,31581,31641,31691,31681,31692,31695,31668,31686,31709,31721,31761,31764,31718,31717,31840,31744,31751,31763,31731,31735,31767,31757,31734,31779,31783,31786,31775,31799,31787,31805,31820,31811,31828,31823,31808,31824,31832,31839,31844,31830,31845,31852,31861,31875,31888,31908,31917,31906,31915,31905,31912,31923,31922,31921,31918,31929,31933,31936,31941,31938,31960,31954,31964,31970,39739,31983,31986,31988,31990,31994,32006,32002,32028,32021,32010,32069,32075,32046,32050,32063,32053,32070,32115,32086,32078,32114,32104,32110,32079,32099,32147,32137,32091,32143,32125,32155,32186,32174,32163,32181,32199,32189,32171,32317,32162,32175,32220,32184,32159,32176,32216,32221,32228,32222,32251,32242,32225,32261,32266,32291,32289,32274,32305,32287,32265,32267,32290,32326,32358,32315,32309,32313,32323,32311,32306,32314,32359,32349,32342,32350,32345,32346,32377,32362,32361,32380,32379,32387,32213,32381,36782,32383,32392,32393,32396,32402,32400,32403,32404,32406,32398,32411,32412,32568,32570,32581,32588,32589,32590,32592,32593,32597,32596,32600,32607,32608,32616,32617,32615,32632,32642,32646,32643,32648,32647,32652,32660,32670,32669,32666,32675,32687,32690,32697,32686,32694,32696,35697,32709,32710,32714,32725,32724,32737,32742,32745,32755,32761,39132,32774,32772,32779,32786,32792,32793,32796,32801,32808,32831,32827,32842,32838,32850,32856,32858,32863,32866,32872,32883,32882,32880,32886,32889,32893,32895,32900,32902,32901,32923,32915,32922,32941,20880,32940,32987,32997,32985,32989,32964,32986,32982,33033,33007,33009,33051,33065,33059,33071,33099,38539,33094,33086,33107,33105,33020,33137,33134,33125,33126,33140,33155,33160,33162,33152,33154,33184,33173,33188,33187,33119,33171,33193,33200,33205,33214,33208,33213,33216,33218,33210,33225,33229,33233,33241,33240,33224,33242,33247,33248,33255,33274,33275,33278,33281,33282,33285,33287,33290,33293,33296,33302,33321,33323,33336,33331,33344,33369,33368,33373,33370,33375,33380,33378,33384,33386,33387,33326,33393,33399,33400,33406,33421,33426,33451,33439,33467,33452,33505,33507,33503,33490,33524,33523,33530,33683,33539,33531,33529,33502,33542,33500,33545,33497,33589,33588,33558,33586,33585,33600,33593,33616,33605,33583,33579,33559,33560,33669,33690,33706,33695,33698,33686,33571,33678,33671,33674,33660,33717,33651,33653,33696,33673,33704,33780,33811,33771,33742,33789,33795,33752,33803,33729,33783,33799,33760,33778,33805,33826,33824,33725,33848,34054,33787,33901,33834,33852,34138,33924,33911,33899,33965,33902,33922,33897,33862,33836,33903,33913,33845,33994,33890,33977,33983,33951,34009,33997,33979,34010,34e3,33985,33990,34006,33953,34081,34047,34036,34071,34072,34092,34079,34069,34068,34044,34112,34147,34136,34120,34113,34306,34123,34133,34176,34212,34184,34193,34186,34216,34157,34196,34203,34282,34183,34204,34167,34174,34192,34249,34234,34255,34233,34256,34261,34269,34277,34268,34297,34314,34323,34315,34302,34298,34310,34338,34330,34352,34367,34381,20053,34388,34399,34407,34417,34451,34467,34473,34474,34443,34444,34486,34479,34500,34502,34480,34505,34851,34475,34516,34526,34537,34540,34527,34523,34543,34578,34566,34568,34560,34563,34555,34577,34569,34573,34553,34570,34612,34623,34615,34619,34597,34601,34586,34656,34655,34680,34636,34638,34676,34647,34664,34670,34649,34643,34659,34666,34821,34722,34719,34690,34735,34763,34749,34752,34768,38614,34731,34756,34739,34759,34758,34747,34799,34802,34784,34831,34829,34814,34806,34807,34830,34770,34833,34838,34837,34850,34849,34865,34870,34873,34855,34875,34884,34882,34898,34905,34910,34914,34923,34945,34942,34974,34933,34941,34997,34930,34946,34967,34962,34990,34969,34978,34957,34980,34992,35007,34993,35011,35012,35028,35032,35033,35037,35065,35074,35068,35060,35048,35058,35076,35084,35082,35091,35139,35102,35109,35114,35115,35137,35140,35131,35126,35128,35148,35101,35168,35166,35174,35172,35181,35178,35183,35188,35191,35198,35203,35208,35210,35219,35224,35233,35241,35238,35244,35247,35250,35258,35261,35263,35264,35290,35292,35293,35303,35316,35320,35331,35350,35344,35340,35355,35357,35365,35382,35393,35419,35410,35398,35400,35452,35437,35436,35426,35461,35458,35460,35496,35489,35473,35493,35494,35482,35491,35524,35533,35522,35546,35563,35571,35559,35556,35569,35604,35552,35554,35575,35550,35547,35596,35591,35610,35553,35606,35600,35607,35616,35635,38827,35622,35627,35646,35624,35649,35660,35663,35662,35657,35670,35675,35674,35691,35679,35692,35695,35700,35709,35712,35724,35726,35730,35731,35734,35737,35738,35898,35905,35903,35912,35916,35918,35920,35925,35938,35948,35960,35962,35970,35977,35973,35978,35981,35982,35988,35964,35992,25117,36013,36010,36029,36018,36019,36014,36022,36040,36033,36068,36067,36058,36093,36090,36091,36100,36101,36106,36103,36111,36109,36112,40782,36115,36045,36116,36118,36199,36205,36209,36211,36225,36249,36290,36286,36282,36303,36314,36310,36300,36315,36299,36330,36331,36319,36323,36348,36360,36361,36351,36381,36382,36368,36383,36418,36405,36400,36404,36426,36423,36425,36428,36432,36424,36441,36452,36448,36394,36451,36437,36470,36466,36476,36481,36487,36485,36484,36491,36490,36499,36497,36500,36505,36522,36513,36524,36528,36550,36529,36542,36549,36552,36555,36571,36579,36604,36603,36587,36606,36618,36613,36629,36626,36633,36627,36636,36639,36635,36620,36646,36659,36667,36665,36677,36674,36670,36684,36681,36678,36686,36695,36700,36706,36707,36708,36764,36767,36771,36781,36783,36791,36826,36837,36834,36842,36847,36999,36852,36869,36857,36858,36881,36885,36897,36877,36894,36886,36875,36903,36918,36917,36921,36856,36943,36944,36945,36946,36878,36937,36926,36950,36952,36958,36968,36975,36982,38568,36978,36994,36989,36993,36992,37002,37001,37007,37032,37039,37041,37045,37090,37092,25160,37083,37122,37138,37145,37170,37168,37194,37206,37208,37219,37221,37225,37235,37234,37259,37257,37250,37282,37291,37295,37290,37301,37300,37306,37312,37313,37321,37323,37328,37334,37343,37345,37339,37372,37365,37366,37406,37375,37396,37420,37397,37393,37470,37463,37445,37449,37476,37448,37525,37439,37451,37456,37532,37526,37523,37531,37466,37583,37561,37559,37609,37647,37626,37700,37678,37657,37666,37658,37667,37690,37685,37691,37724,37728,37756,37742,37718,37808,37804,37805,37780,37817,37846,37847,37864,37861,37848,37827,37853,37840,37832,37860,37914,37908,37907,37891,37895,37904,37942,37931,37941,37921,37946,37953,37970,37956,37979,37984,37986,37982,37994,37417,38e3,38005,38007,38013,37978,38012,38014,38017,38015,38274,38279,38282,38292,38294,38296,38297,38304,38312,38311,38317,38332,38331,38329,38334,38346,28662,38339,38349,38348,38357,38356,38358,38364,38369,38373,38370,38433,38440,38446,38447,38466,38476,38479,38475,38519,38492,38494,38493,38495,38502,38514,38508,38541,38552,38549,38551,38570,38567,38577,38578,38576,38580,38582,38584,38585,38606,38603,38601,38605,35149,38620,38669,38613,38649,38660,38662,38664,38675,38670,38673,38671,38678,38681,38692,38698,38704,38713,38717,38718,38724,38726,38728,38722,38729,38748,38752,38756,38758,38760,21202,38763,38769,38777,38789,38780,38785,38778,38790,38795,38799,38800,38812,38824,38822,38819,38835,38836,38851,38854,38856,38859,38876,38893,40783,38898,31455,38902,38901,38927,38924,38968,38948,38945,38967,38973,38982,38991,38987,39019,39023,39024,39025,39028,39027,39082,39087,39089,39094,39108,39107,39110,39145,39147,39171,39177,39186,39188,39192,39201,39197,39198,39204,39200,39212,39214,39229,39230,39234,39241,39237,39248,39243,39249,39250,39244,39253,39319,39320,39333,39341,39342,39356,39391,39387,39389,39384,39377,39405,39406,39409,39410,39419,39416,39425,39439,39429,39394,39449,39467,39479,39493,39490,39488,39491,39486,39509,39501,39515,39511,39519,39522,39525,39524,39529,39531,39530,39597,39600,39612,39616,39631,39633,39635,39636,39646,39647,39650,39651,39654,39663,39659,39662,39668,39665,39671,39675,39686,39704,39706,39711,39714,39715,39717,39719,39720,39721,39722,39726,39727,39730,39748,39747,39759,39757,39758,39761,39768,39796,39827,39811,39825,39830,39831,39839,39840,39848,39860,39872,39882,39865,39878,39887,39889,39890,39907,39906,39908,39892,39905,39994,39922,39921,39920,39957,39956,39945,39955,39948,39942,39944,39954,39946,39940,39982,39963,39973,39972,39969,39984,40007,39986,40006,39998,40026,40032,40039,40054,40056,40167,40172,40176,40201,40200,40171,40195,40198,40234,40230,40367,40227,40223,40260,40213,40210,40257,40255,40254,40262,40264,40285,40286,40292,40273,40272,40281,40306,40329,40327,40363,40303,40314,40346,40356,40361,40370,40388,40385,40379,40376,40378,40390,40399,40386,40409,40403,40440,40422,40429,40431,40445,40474,40475,40478,40565,40569,40573,40577,40584,40587,40588,40594,40597,40593,40605,40613,40617,40632,40618,40621,38753,40652,40654,40655,40656,40660,40668,40670,40669,40672,40677,40680,40687,40692,40694,40695,40697,40699,40700,40701,40711,40712,30391,40725,40737,40748,40766,40778,40786,40788,40803,40799,40800,40801,40806,40807,40812,40810,40823,40818,40822,40853,40860,40864,22575,27079,36953,29796,20956,29081,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,32394,35100,37704,37512,34012,20425,28859,26161,26824,37625,26363,24389,20008,20193,20220,20224,20227,20281,20310,20370,20362,20378,20372,20429,20544,20514,20479,20510,20550,20592,20546,20628,20724,20696,20810,20836,20893,20926,20972,21013,21148,21158,21184,21211,21248,21255,21284,21362,21395,21426,21469,64014,21660,21642,21673,21759,21894,22361,22373,22444,22472,22471,64015,64016,22686,22706,22795,22867,22875,22877,22883,22948,22970,23382,23488,29999,23512,23532,23582,23718,23738,23797,23847,23891,64017,23874,23917,23992,23993,24016,24353,24372,24423,24503,24542,24669,24709,24714,24798,24789,24864,24818,24849,24887,24880,24984,25107,25254,25589,25696,25757,25806,25934,26112,26133,26171,26121,26158,26142,26148,26213,26199,26201,64018,26227,26265,26272,26290,26303,26362,26382,63785,26470,26555,26706,26560,26625,26692,26831,64019,26984,64020,27032,27106,27184,27243,27206,27251,27262,27362,27364,27606,27711,27740,27782,27759,27866,27908,28039,28015,28054,28076,28111,28152,28146,28156,28217,28252,28199,28220,28351,28552,28597,28661,28677,28679,28712,28805,28843,28943,28932,29020,28998,28999,64021,29121,29182,29361,29374,29476,64022,29559,29629,29641,29654,29667,29650,29703,29685,29734,29738,29737,29742,29794,29833,29855,29953,30063,30338,30364,30366,30363,30374,64023,30534,21167,30753,30798,30820,30842,31024,64024,64025,64026,31124,64027,31131,31441,31463,64028,31467,31646,64029,32072,32092,32183,32160,32214,32338,32583,32673,64030,33537,33634,33663,33735,33782,33864,33972,34131,34137,34155,64031,34224,64032,64033,34823,35061,35346,35383,35449,35495,35518,35551,64034,35574,35667,35711,36080,36084,36114,36214,64035,36559,64036,64037,36967,37086,64038,37141,37159,37338,37335,37342,37357,37358,37348,37349,37382,37392,37386,37434,37440,37436,37454,37465,37457,37433,37479,37543,37495,37496,37607,37591,37593,37584,64039,37589,37600,37587,37669,37665,37627,64040,37662,37631,37661,37634,37744,37719,37796,37830,37854,37880,37937,37957,37960,38290,63964,64041,38557,38575,38707,38715,38723,38733,38735,38737,38741,38999,39013,64042,64043,39207,64044,39326,39502,39641,39644,39797,39794,39823,39857,39867,39936,40304,40299,64045,40473,40657,null,null,8560,8561,8562,8563,8564,8565,8566,8567,8568,8569,65506,65508,65287,65282,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,8560,8561,8562,8563,8564,8565,8566,8567,8568,8569,8544,8545,8546,8547,8548,8549,8550,8551,8552,8553,65506,65508,65287,65282,12849,8470,8481,8757,32394,35100,37704,37512,34012,20425,28859,26161,26824,37625,26363,24389,20008,20193,20220,20224,20227,20281,20310,20370,20362,20378,20372,20429,20544,20514,20479,20510,20550,20592,20546,20628,20724,20696,20810,20836,20893,20926,20972,21013,21148,21158,21184,21211,21248,21255,21284,21362,21395,21426,21469,64014,21660,21642,21673,21759,21894,22361,22373,22444,22472,22471,64015,64016,22686,22706,22795,22867,22875,22877,22883,22948,22970,23382,23488,29999,23512,23532,23582,23718,23738,23797,23847,23891,64017,23874,23917,23992,23993,24016,24353,24372,24423,24503,24542,24669,24709,24714,24798,24789,24864,24818,24849,24887,24880,24984,25107,25254,25589,25696,25757,25806,25934,26112,26133,26171,26121,26158,26142,26148,26213,26199,26201,64018,26227,26265,26272,26290,26303,26362,26382,63785,26470,26555,26706,26560,26625,26692,26831,64019,26984,64020,27032,27106,27184,27243,27206,27251,27262,27362,27364,27606,27711,27740,27782,27759,27866,27908,28039,28015,28054,28076,28111,28152,28146,28156,28217,28252,28199,28220,28351,28552,28597,28661,28677,28679,28712,28805,28843,28943,28932,29020,28998,28999,64021,29121,29182,29361,29374,29476,64022,29559,29629,29641,29654,29667,29650,29703,29685,29734,29738,29737,29742,29794,29833,29855,29953,30063,30338,30364,30366,30363,30374,64023,30534,21167,30753,30798,30820,30842,31024,64024,64025,64026,31124,64027,31131,31441,31463,64028,31467,31646,64029,32072,32092,32183,32160,32214,32338,32583,32673,64030,33537,33634,33663,33735,33782,33864,33972,34131,34137,34155,64031,34224,64032,64033,34823,35061,35346,35383,35449,35495,35518,35551,64034,35574,35667,35711,36080,36084,36114,36214,64035,36559,64036,64037,36967,37086,64038,37141,37159,37338,37335,37342,37357,37358,37348,37349,37382,37392,37386,37434,37440,37436,37454,37465,37457,37433,37479,37543,37495,37496,37607,37591,37593,37584,64039,37589,37600,37587,37669,37665,37627,64040,37662,37631,37661,37634,37744,37719,37796,37830,37854,37880,37937,37957,37960,38290,63964,64041,38557,38575,38707,38715,38723,38733,38735,38737,38741,38999,39013,64042,64043,39207,64044,39326,39502,39641,39644,39797,39794,39823,39857,39867,39936,40304,40299,64045,40473,40657,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],jis0212:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,728,711,184,729,733,175,731,730,65374,900,901,null,null,null,null,null,null,null,null,161,166,191,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,186,170,169,174,8482,164,8470,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,902,904,905,906,938,null,908,null,910,939,null,911,null,null,null,null,940,941,942,943,970,912,972,962,973,971,944,974,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1038,1039,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1118,1119,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,198,272,null,294,null,306,null,321,319,null,330,216,338,null,358,222,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,230,273,240,295,305,307,312,322,320,329,331,248,339,223,359,254,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,193,192,196,194,258,461,256,260,197,195,262,264,268,199,266,270,201,200,203,202,282,278,274,280,null,284,286,290,288,292,205,204,207,206,463,304,298,302,296,308,310,313,317,315,323,327,325,209,211,210,214,212,465,336,332,213,340,344,342,346,348,352,350,356,354,218,217,220,219,364,467,368,362,370,366,360,471,475,473,469,372,221,376,374,377,381,379,null,null,null,null,null,null,null,225,224,228,226,259,462,257,261,229,227,263,265,269,231,267,271,233,232,235,234,283,279,275,281,501,285,287,null,289,293,237,236,239,238,464,null,299,303,297,309,311,314,318,316,324,328,326,241,243,242,246,244,466,337,333,245,341,345,343,347,349,353,351,357,355,250,249,252,251,365,468,369,363,371,367,361,472,476,474,470,373,253,255,375,378,382,380,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19970,19972,19973,19980,19986,19999,20003,20004,20008,20011,20014,20015,20016,20021,20032,20033,20036,20039,20049,20058,20060,20067,20072,20073,20084,20085,20089,20095,20109,20118,20119,20125,20143,20153,20163,20176,20186,20187,20192,20193,20194,20200,20207,20209,20211,20213,20221,20222,20223,20224,20226,20227,20232,20235,20236,20242,20245,20246,20247,20249,20270,20273,20320,20275,20277,20279,20281,20283,20286,20288,20290,20296,20297,20299,20300,20306,20308,20310,20312,20319,20323,20330,20332,20334,20337,20343,20344,20345,20346,20349,20350,20353,20354,20356,20357,20361,20362,20364,20366,20368,20370,20371,20372,20375,20377,20378,20382,20383,20402,20407,20409,20411,20412,20413,20414,20416,20417,20421,20422,20424,20425,20427,20428,20429,20431,20434,20444,20448,20450,20464,20466,20476,20477,20479,20480,20481,20484,20487,20490,20492,20494,20496,20499,20503,20504,20507,20508,20509,20510,20514,20519,20526,20528,20530,20531,20533,20544,20545,20546,20549,20550,20554,20556,20558,20561,20562,20563,20567,20569,20575,20576,20578,20579,20582,20583,20586,20589,20592,20593,20539,20609,20611,20612,20614,20618,20622,20623,20624,20626,20627,20628,20630,20635,20636,20638,20639,20640,20641,20642,20650,20655,20656,20665,20666,20669,20672,20675,20676,20679,20684,20686,20688,20691,20692,20696,20700,20701,20703,20706,20708,20710,20712,20713,20719,20721,20726,20730,20734,20739,20742,20743,20744,20747,20748,20749,20750,20722,20752,20759,20761,20763,20764,20765,20766,20771,20775,20776,20780,20781,20783,20785,20787,20788,20789,20792,20793,20802,20810,20815,20819,20821,20823,20824,20831,20836,20838,20862,20867,20868,20875,20878,20888,20893,20897,20899,20909,20920,20922,20924,20926,20927,20930,20936,20943,20945,20946,20947,20949,20952,20958,20962,20965,20974,20978,20979,20980,20983,20993,20994,20997,21010,21011,21013,21014,21016,21026,21032,21041,21042,21045,21052,21061,21065,21077,21079,21080,21082,21084,21087,21088,21089,21094,21102,21111,21112,21113,21120,21122,21125,21130,21132,21139,21141,21142,21143,21144,21146,21148,21156,21157,21158,21159,21167,21168,21174,21175,21176,21178,21179,21181,21184,21188,21190,21192,21196,21199,21201,21204,21206,21211,21212,21217,21221,21224,21225,21226,21228,21232,21233,21236,21238,21239,21248,21251,21258,21259,21260,21265,21267,21272,21275,21276,21278,21279,21285,21287,21288,21289,21291,21292,21293,21296,21298,21301,21308,21309,21310,21314,21324,21323,21337,21339,21345,21347,21349,21356,21357,21362,21369,21374,21379,21383,21384,21390,21395,21396,21401,21405,21409,21412,21418,21419,21423,21426,21428,21429,21431,21432,21434,21437,21440,21445,21455,21458,21459,21461,21466,21469,21470,21472,21478,21479,21493,21506,21523,21530,21537,21543,21544,21546,21551,21553,21556,21557,21571,21572,21575,21581,21583,21598,21602,21604,21606,21607,21609,21611,21613,21614,21620,21631,21633,21635,21637,21640,21641,21645,21649,21653,21654,21660,21663,21665,21670,21671,21673,21674,21677,21678,21681,21687,21689,21690,21691,21695,21702,21706,21709,21710,21728,21738,21740,21743,21750,21756,21758,21759,21760,21761,21765,21768,21769,21772,21773,21774,21781,21802,21803,21810,21813,21814,21819,21820,21821,21825,21831,21833,21834,21837,21840,21841,21848,21850,21851,21854,21856,21857,21860,21862,21887,21889,21890,21894,21896,21902,21903,21905,21906,21907,21908,21911,21923,21924,21933,21938,21951,21953,21955,21958,21961,21963,21964,21966,21969,21970,21971,21975,21976,21979,21982,21986,21993,22006,22015,22021,22024,22026,22029,22030,22031,22032,22033,22034,22041,22060,22064,22067,22069,22071,22073,22075,22076,22077,22079,22080,22081,22083,22084,22086,22089,22091,22093,22095,22100,22110,22112,22113,22114,22115,22118,22121,22125,22127,22129,22130,22133,22148,22149,22152,22155,22156,22165,22169,22170,22173,22174,22175,22182,22183,22184,22185,22187,22188,22189,22193,22195,22199,22206,22213,22217,22218,22219,22223,22224,22220,22221,22233,22236,22237,22239,22241,22244,22245,22246,22247,22248,22257,22251,22253,22262,22263,22273,22274,22279,22282,22284,22289,22293,22298,22299,22301,22304,22306,22307,22308,22309,22313,22314,22316,22318,22319,22323,22324,22333,22334,22335,22341,22342,22348,22349,22354,22370,22373,22375,22376,22379,22381,22382,22383,22384,22385,22387,22388,22389,22391,22393,22394,22395,22396,22398,22401,22403,22412,22420,22423,22425,22426,22428,22429,22430,22431,22433,22421,22439,22440,22441,22444,22456,22461,22471,22472,22476,22479,22485,22493,22494,22500,22502,22503,22505,22509,22512,22517,22518,22520,22525,22526,22527,22531,22532,22536,22537,22497,22540,22541,22555,22558,22559,22560,22566,22567,22573,22578,22585,22591,22601,22604,22605,22607,22608,22613,22623,22625,22628,22631,22632,22648,22652,22655,22656,22657,22663,22664,22665,22666,22668,22669,22671,22672,22676,22678,22685,22688,22689,22690,22694,22697,22705,22706,22724,22716,22722,22728,22733,22734,22736,22738,22740,22742,22746,22749,22753,22754,22761,22771,22789,22790,22795,22796,22802,22803,22804,34369,22813,22817,22819,22820,22824,22831,22832,22835,22837,22838,22847,22851,22854,22866,22867,22873,22875,22877,22878,22879,22881,22883,22891,22893,22895,22898,22901,22902,22905,22907,22908,22923,22924,22926,22930,22933,22935,22943,22948,22951,22957,22958,22959,22960,22963,22967,22970,22972,22977,22979,22980,22984,22986,22989,22994,23005,23006,23007,23011,23012,23015,23022,23023,23025,23026,23028,23031,23040,23044,23052,23053,23054,23058,23059,23070,23075,23076,23079,23080,23082,23085,23088,23108,23109,23111,23112,23116,23120,23125,23134,23139,23141,23143,23149,23159,23162,23163,23166,23179,23184,23187,23190,23193,23196,23198,23199,23200,23202,23207,23212,23217,23218,23219,23221,23224,23226,23227,23231,23236,23238,23240,23247,23258,23260,23264,23269,23274,23278,23285,23286,23293,23296,23297,23304,23319,23348,23321,23323,23325,23329,23333,23341,23352,23361,23371,23372,23378,23382,23390,23400,23406,23407,23420,23421,23422,23423,23425,23428,23430,23434,23438,23440,23441,23443,23444,23446,23464,23465,23468,23469,23471,23473,23474,23479,23482,23484,23488,23489,23501,23503,23510,23511,23512,23513,23514,23520,23535,23537,23540,23549,23564,23575,23582,23583,23587,23590,23593,23595,23596,23598,23600,23602,23605,23606,23641,23642,23644,23650,23651,23655,23656,23657,23661,23664,23668,23669,23674,23675,23676,23677,23687,23688,23690,23695,23698,23709,23711,23712,23714,23715,23718,23722,23730,23732,23733,23738,23753,23755,23762,23773,23767,23790,23793,23794,23796,23809,23814,23821,23826,23851,23843,23844,23846,23847,23857,23860,23865,23869,23871,23874,23875,23878,23880,23893,23889,23897,23882,23903,23904,23905,23906,23908,23914,23917,23920,23929,23930,23934,23935,23937,23939,23944,23946,23954,23955,23956,23957,23961,23963,23967,23968,23975,23979,23984,23988,23992,23993,24003,24007,24011,24016,24014,24024,24025,24032,24036,24041,24056,24057,24064,24071,24077,24082,24084,24085,24088,24095,24096,24110,24104,24114,24117,24126,24139,24144,24137,24145,24150,24152,24155,24156,24158,24168,24170,24171,24172,24173,24174,24176,24192,24203,24206,24226,24228,24229,24232,24234,24236,24241,24243,24253,24254,24255,24262,24268,24267,24270,24273,24274,24276,24277,24284,24286,24293,24299,24322,24326,24327,24328,24334,24345,24348,24349,24353,24354,24355,24356,24360,24363,24364,24366,24368,24372,24374,24379,24381,24383,24384,24388,24389,24391,24397,24400,24404,24408,24411,24416,24419,24420,24423,24431,24434,24436,24437,24440,24442,24445,24446,24457,24461,24463,24470,24476,24477,24482,24487,24491,24484,24492,24495,24496,24497,24504,24516,24519,24520,24521,24523,24528,24529,24530,24531,24532,24542,24545,24546,24552,24553,24554,24556,24557,24558,24559,24562,24563,24566,24570,24572,24583,24586,24589,24595,24596,24599,24600,24602,24607,24612,24621,24627,24629,24640,24647,24648,24649,24652,24657,24660,24662,24663,24669,24673,24679,24689,24702,24703,24706,24710,24712,24714,24718,24721,24723,24725,24728,24733,24734,24738,24740,24741,24744,24752,24753,24759,24763,24766,24770,24772,24776,24777,24778,24779,24782,24783,24788,24789,24793,24795,24797,24798,24802,24805,24818,24821,24824,24828,24829,24834,24839,24842,24844,24848,24849,24850,24851,24852,24854,24855,24857,24860,24862,24866,24874,24875,24880,24881,24885,24886,24887,24889,24897,24901,24902,24905,24926,24928,24940,24946,24952,24955,24956,24959,24960,24961,24963,24964,24971,24973,24978,24979,24983,24984,24988,24989,24991,24992,24997,25e3,25002,25005,25016,25017,25020,25024,25025,25026,25038,25039,25045,25052,25053,25054,25055,25057,25058,25063,25065,25061,25068,25069,25071,25089,25091,25092,25095,25107,25109,25116,25120,25122,25123,25127,25129,25131,25145,25149,25154,25155,25156,25158,25164,25168,25169,25170,25172,25174,25178,25180,25188,25197,25199,25203,25210,25213,25229,25230,25231,25232,25254,25256,25267,25270,25271,25274,25278,25279,25284,25294,25301,25302,25306,25322,25330,25332,25340,25341,25347,25348,25354,25355,25357,25360,25363,25366,25368,25385,25386,25389,25397,25398,25401,25404,25409,25410,25411,25412,25414,25418,25419,25422,25426,25427,25428,25432,25435,25445,25446,25452,25453,25457,25460,25461,25464,25468,25469,25471,25474,25476,25479,25482,25488,25492,25493,25497,25498,25502,25508,25510,25517,25518,25519,25533,25537,25541,25544,25550,25553,25555,25556,25557,25564,25568,25573,25578,25580,25586,25587,25589,25592,25593,25609,25610,25616,25618,25620,25624,25630,25632,25634,25636,25637,25641,25642,25647,25648,25653,25661,25663,25675,25679,25681,25682,25683,25684,25690,25691,25692,25693,25695,25696,25697,25699,25709,25715,25716,25723,25725,25733,25735,25743,25744,25745,25752,25753,25755,25757,25759,25761,25763,25766,25768,25772,25779,25789,25790,25791,25796,25801,25802,25803,25804,25806,25808,25809,25813,25815,25828,25829,25833,25834,25837,25840,25845,25847,25851,25855,25857,25860,25864,25865,25866,25871,25875,25876,25878,25881,25883,25886,25887,25890,25894,25897,25902,25905,25914,25916,25917,25923,25927,25929,25936,25938,25940,25951,25952,25959,25963,25978,25981,25985,25989,25994,26002,26005,26008,26013,26016,26019,26022,26030,26034,26035,26036,26047,26050,26056,26057,26062,26064,26068,26070,26072,26079,26096,26098,26100,26101,26105,26110,26111,26112,26116,26120,26121,26125,26129,26130,26133,26134,26141,26142,26145,26146,26147,26148,26150,26153,26154,26155,26156,26158,26160,26161,26163,26169,26167,26176,26181,26182,26186,26188,26193,26190,26199,26200,26201,26203,26204,26208,26209,26363,26218,26219,26220,26238,26227,26229,26239,26231,26232,26233,26235,26240,26236,26251,26252,26253,26256,26258,26265,26266,26267,26268,26271,26272,26276,26285,26289,26290,26293,26299,26303,26304,26306,26307,26312,26316,26318,26319,26324,26331,26335,26344,26347,26348,26350,26362,26373,26375,26382,26387,26393,26396,26400,26402,26419,26430,26437,26439,26440,26444,26452,26453,26461,26470,26476,26478,26484,26486,26491,26497,26500,26510,26511,26513,26515,26518,26520,26521,26523,26544,26545,26546,26549,26555,26556,26557,26617,26560,26562,26563,26565,26568,26569,26578,26583,26585,26588,26593,26598,26608,26610,26614,26615,26706,26644,26649,26653,26655,26664,26663,26668,26669,26671,26672,26673,26675,26683,26687,26692,26693,26698,26700,26709,26711,26712,26715,26731,26734,26735,26736,26737,26738,26741,26745,26746,26747,26748,26754,26756,26758,26760,26774,26776,26778,26780,26785,26787,26789,26793,26794,26798,26802,26811,26821,26824,26828,26831,26832,26833,26835,26838,26841,26844,26845,26853,26856,26858,26859,26860,26861,26864,26865,26869,26870,26875,26876,26877,26886,26889,26890,26896,26897,26899,26902,26903,26929,26931,26933,26936,26939,26946,26949,26953,26958,26967,26971,26979,26980,26981,26982,26984,26985,26988,26992,26993,26994,27002,27003,27007,27008,27021,27026,27030,27032,27041,27045,27046,27048,27051,27053,27055,27063,27064,27066,27068,27077,27080,27089,27094,27095,27106,27109,27118,27119,27121,27123,27125,27134,27136,27137,27139,27151,27153,27157,27162,27165,27168,27172,27176,27184,27186,27188,27191,27195,27198,27199,27205,27206,27209,27210,27214,27216,27217,27218,27221,27222,27227,27236,27239,27242,27249,27251,27262,27265,27267,27270,27271,27273,27275,27281,27291,27293,27294,27295,27301,27307,27311,27312,27313,27316,27325,27326,27327,27334,27337,27336,27340,27344,27348,27349,27350,27356,27357,27364,27367,27372,27376,27377,27378,27388,27389,27394,27395,27398,27399,27401,27407,27408,27409,27415,27419,27422,27428,27432,27435,27436,27439,27445,27446,27451,27455,27462,27466,27469,27474,27478,27480,27485,27488,27495,27499,27502,27504,27509,27517,27518,27522,27525,27543,27547,27551,27552,27554,27555,27560,27561,27564,27565,27566,27568,27576,27577,27581,27582,27587,27588,27593,27596,27606,27610,27617,27619,27622,27623,27630,27633,27639,27641,27647,27650,27652,27653,27657,27661,27662,27664,27666,27673,27679,27686,27687,27688,27692,27694,27699,27701,27702,27706,27707,27711,27722,27723,27725,27727,27730,27732,27737,27739,27740,27755,27757,27759,27764,27766,27768,27769,27771,27781,27782,27783,27785,27796,27797,27799,27800,27804,27807,27824,27826,27828,27842,27846,27853,27855,27856,27857,27858,27860,27862,27866,27868,27872,27879,27881,27883,27884,27886,27890,27892,27908,27911,27914,27918,27919,27921,27923,27930,27942,27943,27944,27751,27950,27951,27953,27961,27964,27967,27991,27998,27999,28001,28005,28007,28015,28016,28028,28034,28039,28049,28050,28052,28054,28055,28056,28074,28076,28084,28087,28089,28093,28095,28100,28104,28106,28110,28111,28118,28123,28125,28127,28128,28130,28133,28137,28143,28144,28148,28150,28156,28160,28164,28190,28194,28199,28210,28214,28217,28219,28220,28228,28229,28232,28233,28235,28239,28241,28242,28243,28244,28247,28252,28253,28254,28258,28259,28264,28275,28283,28285,28301,28307,28313,28320,28327,28333,28334,28337,28339,28347,28351,28352,28353,28355,28359,28360,28362,28365,28366,28367,28395,28397,28398,28409,28411,28413,28420,28424,28426,28428,28429,28438,28440,28442,28443,28454,28457,28458,28463,28464,28467,28470,28475,28476,28461,28495,28497,28498,28499,28503,28505,28506,28509,28510,28513,28514,28520,28524,28541,28542,28547,28551,28552,28555,28556,28557,28560,28562,28563,28564,28566,28570,28575,28576,28581,28582,28583,28584,28590,28591,28592,28597,28598,28604,28613,28615,28616,28618,28634,28638,28648,28649,28656,28661,28665,28668,28669,28672,28677,28678,28679,28685,28695,28704,28707,28719,28724,28727,28729,28732,28739,28740,28744,28745,28746,28747,28756,28757,28765,28766,28750,28772,28773,28780,28782,28789,28790,28798,28801,28805,28806,28820,28821,28822,28823,28824,28827,28836,28843,28848,28849,28852,28855,28874,28881,28883,28884,28885,28886,28888,28892,28900,28922,28931,28932,28933,28934,28935,28939,28940,28943,28958,28960,28971,28973,28975,28976,28977,28984,28993,28997,28998,28999,29002,29003,29008,29010,29015,29018,29020,29022,29024,29032,29049,29056,29061,29063,29068,29074,29082,29083,29088,29090,29103,29104,29106,29107,29114,29119,29120,29121,29124,29131,29132,29139,29142,29145,29146,29148,29176,29182,29184,29191,29192,29193,29203,29207,29210,29213,29215,29220,29227,29231,29236,29240,29241,29249,29250,29251,29253,29262,29263,29264,29267,29269,29270,29274,29276,29278,29280,29283,29288,29291,29294,29295,29297,29303,29304,29307,29308,29311,29316,29321,29325,29326,29331,29339,29352,29357,29358,29361,29364,29374,29377,29383,29385,29388,29397,29398,29400,29407,29413,29427,29428,29434,29435,29438,29442,29444,29445,29447,29451,29453,29458,29459,29464,29465,29470,29474,29476,29479,29480,29484,29489,29490,29493,29498,29499,29501,29507,29517,29520,29522,29526,29528,29533,29534,29535,29536,29542,29543,29545,29547,29548,29550,29551,29553,29559,29561,29564,29568,29569,29571,29573,29574,29582,29584,29587,29589,29591,29592,29596,29598,29599,29600,29602,29605,29606,29610,29611,29613,29621,29623,29625,29628,29629,29631,29637,29638,29641,29643,29644,29647,29650,29651,29654,29657,29661,29665,29667,29670,29671,29673,29684,29685,29687,29689,29690,29691,29693,29695,29696,29697,29700,29703,29706,29713,29722,29723,29732,29734,29736,29737,29738,29739,29740,29741,29742,29743,29744,29745,29753,29760,29763,29764,29766,29767,29771,29773,29777,29778,29783,29789,29794,29798,29799,29800,29803,29805,29806,29809,29810,29824,29825,29829,29830,29831,29833,29839,29840,29841,29842,29848,29849,29850,29852,29855,29856,29857,29859,29862,29864,29865,29866,29867,29870,29871,29873,29874,29877,29881,29883,29887,29896,29897,29900,29904,29907,29912,29914,29915,29918,29919,29924,29928,29930,29931,29935,29940,29946,29947,29948,29951,29958,29970,29974,29975,29984,29985,29988,29991,29993,29994,29999,30006,30009,30013,30014,30015,30016,30019,30023,30024,30030,30032,30034,30039,30046,30047,30049,30063,30065,30073,30074,30075,30076,30077,30078,30081,30085,30096,30098,30099,30101,30105,30108,30114,30116,30132,30138,30143,30144,30145,30148,30150,30156,30158,30159,30167,30172,30175,30176,30177,30180,30183,30188,30190,30191,30193,30201,30208,30210,30211,30212,30215,30216,30218,30220,30223,30226,30227,30229,30230,30233,30235,30236,30237,30238,30243,30245,30246,30249,30253,30258,30259,30261,30264,30265,30266,30268,30282,30272,30273,30275,30276,30277,30281,30283,30293,30297,30303,30308,30309,30317,30318,30319,30321,30324,30337,30341,30348,30349,30357,30363,30364,30365,30367,30368,30370,30371,30372,30373,30374,30375,30376,30378,30381,30397,30401,30405,30409,30411,30412,30414,30420,30425,30432,30438,30440,30444,30448,30449,30454,30457,30460,30464,30470,30474,30478,30482,30484,30485,30487,30489,30490,30492,30498,30504,30509,30510,30511,30516,30517,30518,30521,30525,30526,30530,30533,30534,30538,30541,30542,30543,30546,30550,30551,30556,30558,30559,30560,30562,30564,30567,30570,30572,30576,30578,30579,30580,30586,30589,30592,30596,30604,30605,30612,30613,30614,30618,30623,30626,30631,30634,30638,30639,30641,30645,30654,30659,30665,30673,30674,30677,30681,30686,30687,30688,30692,30694,30698,30700,30704,30705,30708,30712,30715,30725,30726,30729,30733,30734,30737,30749,30753,30754,30755,30765,30766,30768,30773,30775,30787,30788,30791,30792,30796,30798,30802,30812,30814,30816,30817,30819,30820,30824,30826,30830,30842,30846,30858,30863,30868,30872,30881,30877,30878,30879,30884,30888,30892,30893,30896,30897,30898,30899,30907,30909,30911,30919,30920,30921,30924,30926,30930,30931,30933,30934,30948,30939,30943,30944,30945,30950,30954,30962,30963,30976,30966,30967,30970,30971,30975,30982,30988,30992,31002,31004,31006,31007,31008,31013,31015,31017,31021,31025,31028,31029,31035,31037,31039,31044,31045,31046,31050,31051,31055,31057,31060,31064,31067,31068,31079,31081,31083,31090,31097,31099,31100,31102,31115,31116,31121,31123,31124,31125,31126,31128,31131,31132,31137,31144,31145,31147,31151,31153,31156,31160,31163,31170,31172,31175,31176,31178,31183,31188,31190,31194,31197,31198,31200,31202,31205,31210,31211,31213,31217,31224,31228,31234,31235,31239,31241,31242,31244,31249,31253,31259,31262,31265,31271,31275,31277,31279,31280,31284,31285,31288,31289,31290,31300,31301,31303,31304,31308,31317,31318,31321,31324,31325,31327,31328,31333,31335,31338,31341,31349,31352,31358,31360,31362,31365,31366,31370,31371,31376,31377,31380,31390,31392,31395,31404,31411,31413,31417,31419,31420,31430,31433,31436,31438,31441,31451,31464,31465,31467,31468,31473,31476,31483,31485,31486,31495,31508,31519,31523,31527,31529,31530,31531,31533,31534,31535,31536,31537,31540,31549,31551,31552,31553,31559,31566,31573,31584,31588,31590,31593,31594,31597,31599,31602,31603,31607,31620,31625,31630,31632,31633,31638,31643,31646,31648,31653,31660,31663,31664,31666,31669,31670,31674,31675,31676,31677,31682,31685,31688,31690,31700,31702,31703,31705,31706,31707,31720,31722,31730,31732,31733,31736,31737,31738,31740,31742,31745,31746,31747,31748,31750,31753,31755,31756,31758,31759,31769,31771,31776,31781,31782,31784,31788,31793,31795,31796,31798,31801,31802,31814,31818,31829,31825,31826,31827,31833,31834,31835,31836,31837,31838,31841,31843,31847,31849,31853,31854,31856,31858,31865,31868,31869,31878,31879,31887,31892,31902,31904,31910,31920,31926,31927,31930,31931,31932,31935,31940,31943,31944,31945,31949,31951,31955,31956,31957,31959,31961,31962,31965,31974,31977,31979,31989,32003,32007,32008,32009,32015,32017,32018,32019,32022,32029,32030,32035,32038,32042,32045,32049,32060,32061,32062,32064,32065,32071,32072,32077,32081,32083,32087,32089,32090,32092,32093,32101,32103,32106,32112,32120,32122,32123,32127,32129,32130,32131,32133,32134,32136,32139,32140,32141,32145,32150,32151,32157,32158,32166,32167,32170,32179,32182,32183,32185,32194,32195,32196,32197,32198,32204,32205,32206,32215,32217,32256,32226,32229,32230,32234,32235,32237,32241,32245,32246,32249,32250,32264,32272,32273,32277,32279,32284,32285,32288,32295,32296,32300,32301,32303,32307,32310,32319,32324,32325,32327,32334,32336,32338,32344,32351,32353,32354,32357,32363,32366,32367,32371,32376,32382,32385,32390,32391,32394,32397,32401,32405,32408,32410,32413,32414,32572,32571,32573,32574,32575,32579,32580,32583,32591,32594,32595,32603,32604,32605,32609,32611,32612,32613,32614,32621,32625,32637,32638,32639,32640,32651,32653,32655,32656,32657,32662,32663,32668,32673,32674,32678,32682,32685,32692,32700,32703,32704,32707,32712,32718,32719,32731,32735,32739,32741,32744,32748,32750,32751,32754,32762,32765,32766,32767,32775,32776,32778,32781,32782,32783,32785,32787,32788,32790,32797,32798,32799,32800,32804,32806,32812,32814,32816,32820,32821,32823,32825,32826,32828,32830,32832,32836,32864,32868,32870,32877,32881,32885,32897,32904,32910,32924,32926,32934,32935,32939,32952,32953,32968,32973,32975,32978,32980,32981,32983,32984,32992,33005,33006,33008,33010,33011,33014,33017,33018,33022,33027,33035,33046,33047,33048,33052,33054,33056,33060,33063,33068,33072,33077,33082,33084,33093,33095,33098,33100,33106,33111,33120,33121,33127,33128,33129,33133,33135,33143,33153,33168,33156,33157,33158,33163,33166,33174,33176,33179,33182,33186,33198,33202,33204,33211,33227,33219,33221,33226,33230,33231,33237,33239,33243,33245,33246,33249,33252,33259,33260,33264,33265,33266,33269,33270,33272,33273,33277,33279,33280,33283,33295,33299,33300,33305,33306,33309,33313,33314,33320,33330,33332,33338,33347,33348,33349,33350,33355,33358,33359,33361,33366,33372,33376,33379,33383,33389,33396,33403,33405,33407,33408,33409,33411,33412,33415,33417,33418,33422,33425,33428,33430,33432,33434,33435,33440,33441,33443,33444,33447,33448,33449,33450,33454,33456,33458,33460,33463,33466,33468,33470,33471,33478,33488,33493,33498,33504,33506,33508,33512,33514,33517,33519,33526,33527,33533,33534,33536,33537,33543,33544,33546,33547,33620,33563,33565,33566,33567,33569,33570,33580,33581,33582,33584,33587,33591,33594,33596,33597,33602,33603,33604,33607,33613,33614,33617,33621,33622,33623,33648,33656,33661,33663,33664,33666,33668,33670,33677,33682,33684,33685,33688,33689,33691,33692,33693,33702,33703,33705,33708,33726,33727,33728,33735,33737,33743,33744,33745,33748,33757,33619,33768,33770,33782,33784,33785,33788,33793,33798,33802,33807,33809,33813,33817,33709,33839,33849,33861,33863,33864,33866,33869,33871,33873,33874,33878,33880,33881,33882,33884,33888,33892,33893,33895,33898,33904,33907,33908,33910,33912,33916,33917,33921,33925,33938,33939,33941,33950,33958,33960,33961,33962,33967,33969,33972,33978,33981,33982,33984,33986,33991,33992,33996,33999,34003,34012,34023,34026,34031,34032,34033,34034,34039,34098,34042,34043,34045,34050,34051,34055,34060,34062,34064,34076,34078,34082,34083,34084,34085,34087,34090,34091,34095,34099,34100,34102,34111,34118,34127,34128,34129,34130,34131,34134,34137,34140,34141,34142,34143,34144,34145,34146,34148,34155,34159,34169,34170,34171,34173,34175,34177,34181,34182,34185,34187,34188,34191,34195,34200,34205,34207,34208,34210,34213,34215,34228,34230,34231,34232,34236,34237,34238,34239,34242,34247,34250,34251,34254,34221,34264,34266,34271,34272,34278,34280,34285,34291,34294,34300,34303,34304,34308,34309,34317,34318,34320,34321,34322,34328,34329,34331,34334,34337,34343,34345,34358,34360,34362,34364,34365,34368,34370,34374,34386,34387,34390,34391,34392,34393,34397,34400,34401,34402,34403,34404,34409,34412,34415,34421,34422,34423,34426,34445,34449,34454,34456,34458,34460,34465,34470,34471,34472,34477,34481,34483,34484,34485,34487,34488,34489,34495,34496,34497,34499,34501,34513,34514,34517,34519,34522,34524,34528,34531,34533,34535,34440,34554,34556,34557,34564,34565,34567,34571,34574,34575,34576,34579,34580,34585,34590,34591,34593,34595,34600,34606,34607,34609,34610,34617,34618,34620,34621,34622,34624,34627,34629,34637,34648,34653,34657,34660,34661,34671,34673,34674,34683,34691,34692,34693,34694,34695,34696,34697,34699,34700,34704,34707,34709,34711,34712,34713,34718,34720,34723,34727,34732,34733,34734,34737,34741,34750,34751,34753,34760,34761,34762,34766,34773,34774,34777,34778,34780,34783,34786,34787,34788,34794,34795,34797,34801,34803,34808,34810,34815,34817,34819,34822,34825,34826,34827,34832,34841,34834,34835,34836,34840,34842,34843,34844,34846,34847,34856,34861,34862,34864,34866,34869,34874,34876,34881,34883,34885,34888,34889,34890,34891,34894,34897,34901,34902,34904,34906,34908,34911,34912,34916,34921,34929,34937,34939,34944,34968,34970,34971,34972,34975,34976,34984,34986,35002,35005,35006,35008,35018,35019,35020,35021,35022,35025,35026,35027,35035,35038,35047,35055,35056,35057,35061,35063,35073,35078,35085,35086,35087,35093,35094,35096,35097,35098,35100,35104,35110,35111,35112,35120,35121,35122,35125,35129,35130,35134,35136,35138,35141,35142,35145,35151,35154,35159,35162,35163,35164,35169,35170,35171,35179,35182,35184,35187,35189,35194,35195,35196,35197,35209,35213,35216,35220,35221,35227,35228,35231,35232,35237,35248,35252,35253,35254,35255,35260,35284,35285,35286,35287,35288,35301,35305,35307,35309,35313,35315,35318,35321,35325,35327,35332,35333,35335,35343,35345,35346,35348,35349,35358,35360,35362,35364,35366,35371,35372,35375,35381,35383,35389,35390,35392,35395,35397,35399,35401,35405,35406,35411,35414,35415,35416,35420,35421,35425,35429,35431,35445,35446,35447,35449,35450,35451,35454,35455,35456,35459,35462,35467,35471,35472,35474,35478,35479,35481,35487,35495,35497,35502,35503,35507,35510,35511,35515,35518,35523,35526,35528,35529,35530,35537,35539,35540,35541,35543,35549,35551,35564,35568,35572,35573,35574,35580,35583,35589,35590,35595,35601,35612,35614,35615,35594,35629,35632,35639,35644,35650,35651,35652,35653,35654,35656,35666,35667,35668,35673,35661,35678,35683,35693,35702,35704,35705,35708,35710,35713,35716,35717,35723,35725,35727,35732,35733,35740,35742,35743,35896,35897,35901,35902,35909,35911,35913,35915,35919,35921,35923,35924,35927,35928,35931,35933,35929,35939,35940,35942,35944,35945,35949,35955,35957,35958,35963,35966,35974,35975,35979,35984,35986,35987,35993,35995,35996,36004,36025,36026,36037,36038,36041,36043,36047,36054,36053,36057,36061,36065,36072,36076,36079,36080,36082,36085,36087,36088,36094,36095,36097,36099,36105,36114,36119,36123,36197,36201,36204,36206,36223,36226,36228,36232,36237,36240,36241,36245,36254,36255,36256,36262,36267,36268,36271,36274,36277,36279,36281,36283,36288,36293,36294,36295,36296,36298,36302,36305,36308,36309,36311,36313,36324,36325,36327,36332,36336,36284,36337,36338,36340,36349,36353,36356,36357,36358,36363,36369,36372,36374,36384,36385,36386,36387,36390,36391,36401,36403,36406,36407,36408,36409,36413,36416,36417,36427,36429,36430,36431,36436,36443,36444,36445,36446,36449,36450,36457,36460,36461,36463,36464,36465,36473,36474,36475,36482,36483,36489,36496,36498,36501,36506,36507,36509,36510,36514,36519,36521,36525,36526,36531,36533,36538,36539,36544,36545,36547,36548,36551,36559,36561,36564,36572,36584,36590,36592,36593,36599,36601,36602,36589,36608,36610,36615,36616,36623,36624,36630,36631,36632,36638,36640,36641,36643,36645,36647,36648,36652,36653,36654,36660,36661,36662,36663,36666,36672,36673,36675,36679,36687,36689,36690,36691,36692,36693,36696,36701,36702,36709,36765,36768,36769,36772,36773,36774,36789,36790,36792,36798,36800,36801,36806,36810,36811,36813,36816,36818,36819,36821,36832,36835,36836,36840,36846,36849,36853,36854,36859,36862,36866,36868,36872,36876,36888,36891,36904,36905,36911,36906,36908,36909,36915,36916,36919,36927,36931,36932,36940,36955,36957,36962,36966,36967,36972,36976,36980,36985,36997,37e3,37003,37004,37006,37008,37013,37015,37016,37017,37019,37024,37025,37026,37029,37040,37042,37043,37044,37046,37053,37068,37054,37059,37060,37061,37063,37064,37077,37079,37080,37081,37084,37085,37087,37093,37074,37110,37099,37103,37104,37108,37118,37119,37120,37124,37125,37126,37128,37133,37136,37140,37142,37143,37144,37146,37148,37150,37152,37157,37154,37155,37159,37161,37166,37167,37169,37172,37174,37175,37177,37178,37180,37181,37187,37191,37192,37199,37203,37207,37209,37210,37211,37217,37220,37223,37229,37236,37241,37242,37243,37249,37251,37253,37254,37258,37262,37265,37267,37268,37269,37272,37278,37281,37286,37288,37292,37293,37294,37296,37297,37298,37299,37302,37307,37308,37309,37311,37314,37315,37317,37331,37332,37335,37337,37338,37342,37348,37349,37353,37354,37356,37357,37358,37359,37360,37361,37367,37369,37371,37373,37376,37377,37380,37381,37382,37383,37385,37386,37388,37392,37394,37395,37398,37400,37404,37405,37411,37412,37413,37414,37416,37422,37423,37424,37427,37429,37430,37432,37433,37434,37436,37438,37440,37442,37443,37446,37447,37450,37453,37454,37455,37457,37464,37465,37468,37469,37472,37473,37477,37479,37480,37481,37486,37487,37488,37493,37494,37495,37496,37497,37499,37500,37501,37503,37512,37513,37514,37517,37518,37522,37527,37529,37535,37536,37540,37541,37543,37544,37547,37551,37554,37558,37560,37562,37563,37564,37565,37567,37568,37569,37570,37571,37573,37574,37575,37576,37579,37580,37581,37582,37584,37587,37589,37591,37592,37593,37596,37597,37599,37600,37601,37603,37605,37607,37608,37612,37614,37616,37625,37627,37631,37632,37634,37640,37645,37649,37652,37653,37660,37661,37662,37663,37665,37668,37669,37671,37673,37674,37683,37684,37686,37687,37703,37704,37705,37712,37713,37714,37717,37719,37720,37722,37726,37732,37733,37735,37737,37738,37741,37743,37744,37745,37747,37748,37750,37754,37757,37759,37760,37761,37762,37768,37770,37771,37773,37775,37778,37781,37784,37787,37790,37793,37795,37796,37798,37800,37803,37812,37813,37814,37818,37801,37825,37828,37829,37830,37831,37833,37834,37835,37836,37837,37843,37849,37852,37854,37855,37858,37862,37863,37881,37879,37880,37882,37883,37885,37889,37890,37892,37896,37897,37901,37902,37903,37909,37910,37911,37919,37934,37935,37937,37938,37939,37940,37947,37951,37949,37955,37957,37960,37962,37964,37973,37977,37980,37983,37985,37987,37992,37995,37997,37998,37999,38001,38002,38020,38019,38264,38265,38270,38276,38280,38284,38285,38286,38301,38302,38303,38305,38310,38313,38315,38316,38324,38326,38330,38333,38335,38342,38344,38345,38347,38352,38353,38354,38355,38361,38362,38365,38366,38367,38368,38372,38374,38429,38430,38434,38436,38437,38438,38444,38449,38451,38455,38456,38457,38458,38460,38461,38465,38482,38484,38486,38487,38488,38497,38510,38516,38523,38524,38526,38527,38529,38530,38531,38532,38537,38545,38550,38554,38557,38559,38564,38565,38566,38569,38574,38575,38579,38586,38602,38610,23986,38616,38618,38621,38622,38623,38633,38639,38641,38650,38658,38659,38661,38665,38682,38683,38685,38689,38690,38691,38696,38705,38707,38721,38723,38730,38734,38735,38741,38743,38744,38746,38747,38755,38759,38762,38766,38771,38774,38775,38776,38779,38781,38783,38784,38793,38805,38806,38807,38809,38810,38814,38815,38818,38828,38830,38833,38834,38837,38838,38840,38841,38842,38844,38846,38847,38849,38852,38853,38855,38857,38858,38860,38861,38862,38864,38865,38868,38871,38872,38873,38877,38878,38880,38875,38881,38884,38895,38897,38900,38903,38904,38906,38919,38922,38937,38925,38926,38932,38934,38940,38942,38944,38947,38950,38955,38958,38959,38960,38962,38963,38965,38949,38974,38980,38983,38986,38993,38994,38995,38998,38999,39001,39002,39010,39011,39013,39014,39018,39020,39083,39085,39086,39088,39092,39095,39096,39098,39099,39103,39106,39109,39112,39116,39137,39139,39141,39142,39143,39146,39155,39158,39170,39175,39176,39185,39189,39190,39191,39194,39195,39196,39199,39202,39206,39207,39211,39217,39218,39219,39220,39221,39225,39226,39227,39228,39232,39233,39238,39239,39240,39245,39246,39252,39256,39257,39259,39260,39262,39263,39264,39323,39325,39327,39334,39344,39345,39346,39349,39353,39354,39357,39359,39363,39369,39379,39380,39385,39386,39388,39390,39399,39402,39403,39404,39408,39412,39413,39417,39421,39422,39426,39427,39428,39435,39436,39440,39441,39446,39454,39456,39458,39459,39460,39463,39469,39470,39475,39477,39478,39480,39495,39489,39492,39498,39499,39500,39502,39505,39508,39510,39517,39594,39596,39598,39599,39602,39604,39605,39606,39609,39611,39614,39615,39617,39619,39622,39624,39630,39632,39634,39637,39638,39639,39643,39644,39648,39652,39653,39655,39657,39660,39666,39667,39669,39673,39674,39677,39679,39680,39681,39682,39683,39684,39685,39688,39689,39691,39692,39693,39694,39696,39698,39702,39705,39707,39708,39712,39718,39723,39725,39731,39732,39733,39735,39737,39738,39741,39752,39755,39756,39765,39766,39767,39771,39774,39777,39779,39781,39782,39784,39786,39787,39788,39789,39790,39795,39797,39799,39800,39801,39807,39808,39812,39813,39814,39815,39817,39818,39819,39821,39823,39824,39828,39834,39837,39838,39846,39847,39849,39852,39856,39857,39858,39863,39864,39867,39868,39870,39871,39873,39879,39880,39886,39888,39895,39896,39901,39903,39909,39911,39914,39915,39919,39923,39927,39928,39929,39930,39933,39935,39936,39938,39947,39951,39953,39958,39960,39961,39962,39964,39966,39970,39971,39974,39975,39976,39977,39978,39985,39989,39990,39991,39997,40001,40003,40004,40005,40009,40010,40014,40015,40016,40019,40020,40022,40024,40027,40029,40030,40031,40035,40041,40042,40028,40043,40040,40046,40048,40050,40053,40055,40059,40166,40178,40183,40185,40203,40194,40209,40215,40216,40220,40221,40222,40239,40240,40242,40243,40244,40250,40252,40261,40253,40258,40259,40263,40266,40275,40276,40287,40291,40290,40293,40297,40298,40299,40304,40310,40311,40315,40316,40318,40323,40324,40326,40330,40333,40334,40338,40339,40341,40342,40343,40344,40353,40362,40364,40366,40369,40373,40377,40380,40383,40387,40391,40393,40394,40404,40405,40406,40407,40410,40414,40415,40416,40421,40423,40425,40427,40430,40432,40435,40436,40446,40458,40450,40455,40462,40464,40465,40466,40469,40470,40473,40476,40477,40570,40571,40572,40576,40578,40579,40580,40581,40583,40590,40591,40598,40600,40603,40606,40612,40616,40620,40622,40623,40624,40627,40628,40629,40646,40648,40651,40661,40671,40676,40679,40684,40685,40686,40688,40689,40690,40693,40696,40703,40706,40707,40713,40719,40720,40721,40722,40724,40726,40727,40729,40730,40731,40735,40738,40742,40746,40747,40751,40753,40754,40756,40759,40761,40762,40764,40765,40767,40769,40771,40772,40773,40774,40775,40787,40789,40790,40791,40792,40794,40797,40798,40808,40809,40813,40814,40815,40816,40817,40819,40821,40826,40829,40847,40848,40849,40850,40852,40854,40855,40862,40865,40866,40867,40869,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],ibm866:[1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,9617,9618,9619,9474,9508,9569,9570,9558,9557,9571,9553,9559,9565,9564,9563,9488,9492,9524,9516,9500,9472,9532,9566,9567,9562,9556,9577,9574,9568,9552,9580,9575,9576,9572,9573,9561,9560,9554,9555,9579,9578,9496,9484,9608,9604,9612,9616,9600,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1025,1105,1028,1108,1031,1111,1038,1118,176,8729,183,8730,8470,164,9632,160],"iso-8859-2":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,260,728,321,164,317,346,167,168,352,350,356,377,173,381,379,176,261,731,322,180,318,347,711,184,353,351,357,378,733,382,380,340,193,194,258,196,313,262,199,268,201,280,203,282,205,206,270,272,323,327,211,212,336,214,215,344,366,218,368,220,221,354,223,341,225,226,259,228,314,263,231,269,233,281,235,283,237,238,271,273,324,328,243,244,337,246,247,345,367,250,369,252,253,355,729],"iso-8859-3":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,294,728,163,164,null,292,167,168,304,350,286,308,173,null,379,176,295,178,179,180,181,293,183,184,305,351,287,309,189,null,380,192,193,194,null,196,266,264,199,200,201,202,203,204,205,206,207,null,209,210,211,212,288,214,215,284,217,218,219,220,364,348,223,224,225,226,null,228,267,265,231,232,233,234,235,236,237,238,239,null,241,242,243,244,289,246,247,285,249,250,251,252,365,349,729],"iso-8859-4":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,260,312,342,164,296,315,167,168,352,274,290,358,173,381,175,176,261,731,343,180,297,316,711,184,353,275,291,359,330,382,331,256,193,194,195,196,197,198,302,268,201,280,203,278,205,206,298,272,325,332,310,212,213,214,215,216,370,218,219,220,360,362,223,257,225,226,227,228,229,230,303,269,233,281,235,279,237,238,299,273,326,333,311,244,245,246,247,248,371,250,251,252,361,363,729],"iso-8859-5":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,173,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,8470,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,167,1118,1119],"iso-8859-6":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,null,null,null,164,null,null,null,null,null,null,null,1548,173,null,null,null,null,null,null,null,null,null,null,null,null,null,1563,null,null,null,1567,null,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,null,null,null,null,null,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1611,1612,1613,1614,1615,1616,1617,1618,null,null,null,null,null,null,null,null,null,null,null,null,null],"iso-8859-7":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,8216,8217,163,8364,8367,166,167,168,169,890,171,172,173,null,8213,176,177,178,179,900,901,902,183,904,905,906,187,908,189,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,null,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,null],"iso-8859-8":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,null,162,163,164,165,166,167,168,169,215,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,247,187,188,189,190,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,8215,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,null,null,8206,8207,null],"iso-8859-10":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,260,274,290,298,296,310,167,315,272,352,358,381,173,362,330,176,261,275,291,299,297,311,183,316,273,353,359,382,8213,363,331,256,193,194,195,196,197,198,302,268,201,280,203,278,205,206,207,208,325,332,211,212,213,214,360,216,370,218,219,220,221,222,223,257,225,226,227,228,229,230,303,269,233,281,235,279,237,238,239,240,326,333,243,244,245,246,361,248,371,250,251,252,253,254,312],"iso-8859-13":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,8221,162,163,164,8222,166,167,216,169,342,171,172,173,174,198,176,177,178,179,8220,181,182,183,248,185,343,187,188,189,190,230,260,302,256,262,196,197,280,274,268,201,377,278,290,310,298,315,352,323,325,211,332,213,214,215,370,321,346,362,220,379,381,223,261,303,257,263,228,229,281,275,269,233,378,279,291,311,299,316,353,324,326,243,333,245,246,247,371,322,347,363,252,380,382,8217],"iso-8859-14":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,7682,7683,163,266,267,7690,167,7808,169,7810,7691,7922,173,174,376,7710,7711,288,289,7744,7745,182,7766,7809,7767,7811,7776,7923,7812,7813,7777,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,372,209,210,211,212,213,214,7786,216,217,218,219,220,221,374,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,373,241,242,243,244,245,246,7787,248,249,250,251,252,253,375,255],"iso-8859-15":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,8364,165,352,167,353,169,170,171,172,173,174,175,176,177,178,179,381,181,182,183,382,185,186,187,338,339,376,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255],"iso-8859-16":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,260,261,321,8364,8222,352,167,353,169,536,171,377,173,378,379,176,177,268,322,381,8221,182,183,382,269,537,187,338,339,376,380,192,193,194,258,196,262,198,199,200,201,202,203,204,205,206,207,272,323,210,211,212,336,214,346,368,217,218,219,220,280,538,223,224,225,226,259,228,263,230,231,232,233,234,235,236,237,238,239,273,324,242,243,244,337,246,347,369,249,250,251,252,281,539,255],"koi8-r":[9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9600,9604,9608,9612,9616,9617,9618,9619,8992,9632,8729,8730,8776,8804,8805,160,8993,176,178,183,247,9552,9553,9554,1105,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,1025,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,169,1102,1072,1073,1094,1076,1077,1092,1075,1093,1080,1081,1082,1083,1084,1085,1086,1087,1103,1088,1089,1090,1091,1078,1074,1100,1099,1079,1096,1101,1097,1095,1098,1070,1040,1041,1062,1044,1045,1060,1043,1061,1048,1049,1050,1051,1052,1053,1054,1055,1071,1056,1057,1058,1059,1046,1042,1068,1067,1047,1064,1069,1065,1063,1066],"koi8-u":[9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9600,9604,9608,9612,9616,9617,9618,9619,8992,9632,8729,8730,8776,8804,8805,160,8993,176,178,183,247,9552,9553,9554,1105,1108,9556,1110,1111,9559,9560,9561,9562,9563,1169,1118,9566,9567,9568,9569,1025,1028,9571,1030,1031,9574,9575,9576,9577,9578,1168,1038,169,1102,1072,1073,1094,1076,1077,1092,1075,1093,1080,1081,1082,1083,1084,1085,1086,1087,1103,1088,1089,1090,1091,1078,1074,1100,1099,1079,1096,1101,1097,1095,1098,1070,1040,1041,1062,1044,1045,1060,1043,1061,1048,1049,1050,1051,1052,1053,1054,1055,1071,1056,1057,1058,1059,1046,1042,1068,1067,1047,1064,1069,1065,1063,1066],macintosh:[196,197,199,201,209,214,220,225,224,226,228,227,229,231,233,232,234,235,237,236,238,239,241,243,242,244,246,245,250,249,251,252,8224,176,162,163,167,8226,182,223,174,169,8482,180,168,8800,198,216,8734,177,8804,8805,165,181,8706,8721,8719,960,8747,170,186,937,230,248,191,161,172,8730,402,8776,8710,171,187,8230,160,192,195,213,338,339,8211,8212,8220,8221,8216,8217,247,9674,255,376,8260,8364,8249,8250,64257,64258,8225,183,8218,8222,8240,194,202,193,203,200,205,206,207,204,211,212,63743,210,218,219,217,305,710,732,175,728,729,730,184,733,731,711],"windows-874":[8364,129,130,131,132,8230,134,135,136,137,138,139,140,141,142,143,144,8216,8217,8220,8221,8226,8211,8212,152,153,154,155,156,157,158,159,160,3585,3586,3587,3588,3589,3590,3591,3592,3593,3594,3595,3596,3597,3598,3599,3600,3601,3602,3603,3604,3605,3606,3607,3608,3609,3610,3611,3612,3613,3614,3615,3616,3617,3618,3619,3620,3621,3622,3623,3624,3625,3626,3627,3628,3629,3630,3631,3632,3633,3634,3635,3636,3637,3638,3639,3640,3641,3642,null,null,null,null,3647,3648,3649,3650,3651,3652,3653,3654,3655,3656,3657,3658,3659,3660,3661,3662,3663,3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3674,3675,null,null,null,null],"windows-1250":[8364,129,8218,131,8222,8230,8224,8225,136,8240,352,8249,346,356,381,377,144,8216,8217,8220,8221,8226,8211,8212,152,8482,353,8250,347,357,382,378,160,711,728,321,164,260,166,167,168,169,350,171,172,173,174,379,176,177,731,322,180,181,182,183,184,261,351,187,317,733,318,380,340,193,194,258,196,313,262,199,268,201,280,203,282,205,206,270,272,323,327,211,212,336,214,215,344,366,218,368,220,221,354,223,341,225,226,259,228,314,263,231,269,233,281,235,283,237,238,271,273,324,328,243,244,337,246,247,345,367,250,369,252,253,355,729],"windows-1251":[1026,1027,8218,1107,8222,8230,8224,8225,8364,8240,1033,8249,1034,1036,1035,1039,1106,8216,8217,8220,8221,8226,8211,8212,152,8482,1113,8250,1114,1116,1115,1119,160,1038,1118,1032,164,1168,166,167,1025,169,1028,171,172,173,174,1031,176,177,1030,1110,1169,181,182,183,1105,8470,1108,187,1112,1029,1109,1111,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103],"windows-1252":[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255],"windows-1253":[8364,129,8218,402,8222,8230,8224,8225,136,8240,138,8249,140,141,142,143,144,8216,8217,8220,8221,8226,8211,8212,152,8482,154,8250,156,157,158,159,160,901,902,163,164,165,166,167,168,169,null,171,172,173,174,8213,176,177,178,179,900,181,182,183,904,905,906,187,908,189,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,null,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,null],"windows-1254":[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,142,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,158,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,286,209,210,211,212,213,214,215,216,217,218,219,220,304,350,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,287,241,242,243,244,245,246,247,248,249,250,251,252,305,351,255],"windows-1255":[8364,129,8218,402,8222,8230,8224,8225,710,8240,138,8249,140,141,142,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,154,8250,156,157,158,159,160,161,162,163,8362,165,166,167,168,169,215,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,247,187,188,189,190,191,1456,1457,1458,1459,1460,1461,1462,1463,1464,1465,1466,1467,1468,1469,1470,1471,1472,1473,1474,1475,1520,1521,1522,1523,1524,null,null,null,null,null,null,null,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,null,null,8206,8207,null],"windows-1256":[8364,1662,8218,402,8222,8230,8224,8225,710,8240,1657,8249,338,1670,1688,1672,1711,8216,8217,8220,8221,8226,8211,8212,1705,8482,1681,8250,339,8204,8205,1722,160,1548,162,163,164,165,166,167,168,169,1726,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,1563,187,188,189,190,1567,1729,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,215,1591,1592,1593,1594,1600,1601,1602,1603,224,1604,226,1605,1606,1607,1608,231,232,233,234,235,1609,1610,238,239,1611,1612,1613,1614,244,1615,1616,247,1617,249,1618,251,252,8206,8207,1746],"windows-1257":[8364,129,8218,131,8222,8230,8224,8225,136,8240,138,8249,140,168,711,184,144,8216,8217,8220,8221,8226,8211,8212,152,8482,154,8250,156,175,731,159,160,null,162,163,164,null,166,167,216,169,342,171,172,173,174,198,176,177,178,179,180,181,182,183,248,185,343,187,188,189,190,230,260,302,256,262,196,197,280,274,268,201,377,278,290,310,298,315,352,323,325,211,332,213,214,215,370,321,346,362,220,379,381,223,261,303,257,263,228,229,281,275,269,233,378,279,291,311,299,316,353,324,326,243,333,245,246,247,371,322,347,363,252,380,382,729],"windows-1258":[8364,129,8218,402,8222,8230,8224,8225,710,8240,138,8249,338,141,142,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,154,8250,339,157,158,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,258,196,197,198,199,200,201,202,203,768,205,206,207,272,209,777,211,212,416,214,215,216,217,218,219,220,431,771,223,224,225,226,259,228,229,230,231,232,233,234,235,769,237,238,239,273,241,803,243,244,417,246,247,248,249,250,251,252,432,8363,255],"x-mac-cyrillic":[1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,8224,176,1168,163,167,8226,182,1030,174,169,8482,1026,1106,8800,1027,1107,8734,177,8804,8805,1110,181,1169,1032,1028,1108,1031,1111,1033,1113,1034,1114,1112,1029,172,8730,402,8776,8710,171,187,8230,160,1035,1115,1036,1116,1109,8211,8212,8220,8221,8216,8217,247,8222,1038,1118,1039,1119,8470,1025,1105,1103,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,8364]};var u=Math.floor;function e(l){if(void 0===l)return{};if(l===Object(l))return l;throw TypeError("Could not convert argument to dictionary")}function r(l){return 0<=l&&l<=127}var i=r,t=-1;function o(l){this.tokens=[].slice.call(l),this.tokens.reverse()}o.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():t},prepend:function(l){if(Array.isArray(l))for(var n=l;n.length;)this.tokens.push(n.pop());else this.tokens.push(l)},push:function(l){if(Array.isArray(l))for(var n=l;n.length;)this.tokens.unshift(n.shift());else this.tokens.unshift(l)}};var s=-1;function a(l,n){if(l)throw TypeError("Decoder error");return n||65533}function f(l){throw TypeError("The code point "+l+" could not be encoded.")}function c(l){return l=String(l).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(h,l)?h[l]:null}var d=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],h={};d.forEach(function(l){l.encodings.forEach(function(l){l.labels.forEach(function(n){h[n]=l})})});var g,p,w={},_={};function b(l,n){return n&&n[l]||null}function m(l,n){var u=n.indexOf(l);return-1===u?null:u}function v(n){if(!("encoding-indexes"in l))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return l["encoding-indexes"][n]}var y="utf-8";function k(l,n){if(!(this instanceof k))throw TypeError("Called as a function. Did you forget 'new'?");l=void 0!==l?String(l):y,n=e(n),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var u=c(l);if(null===u||"replacement"===u.name)throw RangeError("Unknown encoding: "+l);if(!_[u.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");var r=this;return r._encoding=u,Boolean(n.fatal)&&(r._error_mode="fatal"),Boolean(n.ignoreBOM)&&(r._ignoreBOM=!0),Object.defineProperty||(this.encoding=r._encoding.name.toLowerCase(),this.fatal="fatal"===r._error_mode,this.ignoreBOM=r._ignoreBOM),r}function O(n,u){if(!(this instanceof O))throw TypeError("Called as a function. Did you forget 'new'?");u=e(u),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(u.fatal)?"fatal":"replacement";if(Boolean(u.NONSTANDARD_allowLegacyEncoding)){var r=c(n=void 0!==n?String(n):y);if(null===r||"replacement"===r.name)throw RangeError("Unknown encoding: "+n);if(!w[r.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");this._encoding=r}else this._encoding=c("utf-8"),void 0!==n&&"console"in l&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase()),this}function x(l){var u=l.fatal,e=0,i=0,o=0;this.handler=function(l,f){if(f===t&&0===e&&0===i&&0===o)return s;var c;if(f!==t||0===e&&0===i&&0===o||(e=0,i=0,o=0,a(u)),0!==o){c=null,n(f,48,57)&&(c=function(l){if(l>39419&&l<189e3||l>1237575)return null;if(7457===l)return 59335;var n,u=0,e=0,r=v("gb18030-ranges");for(n=0;n<r.length;++n){var i=r[n];if(!(i[0]<=l))break;u=i[0],e=i[1]}return e+l-u}(10*(126*(10*(e-129)+i-48)+o-129)+f-48));var d=[i,o,f];return e=0,i=0,o=0,null===c?(l.prepend(d),a(u)):c}if(0!==i)return n(f,129,254)?(o=f,null):(l.prepend([i,f]),e=0,i=0,a(u));if(0!==e){if(n(f,48,57))return i=f,null;var h=e,g=null;e=0;var p=f<127?64:65;return(n(f,64,126)||n(f,128,254))&&(g=190*(h-129)+(f-p)),null===(c=null===g?null:b(g,v("gb18030")))&&r(f)&&l.prepend(f),null===c?a(u):c}return r(f)?f:128===f?8364:n(f,129,254)?(e=f,null):a(u)}}function j(l,n){l.fatal;this.handler=function(l,e){if(e===t)return s;if(i(e))return e;if(58853===e)return f(e);if(n&&8364===e)return 128;var r=m(e,v("gb18030"));if(null!==r){var o=r%190;return[u(r/190)+129,o+(o<63?64:65)]}if(n)return f(e);r=function(l){if(59335===l)return 7457;var n,u=0,e=0,r=v("gb18030-ranges");for(n=0;n<r.length;++n){var i=r[n];if(!(i[1]<=l))break;u=i[1],e=i[0]}return e+l-u}(e);var a=u(r/10/126/10),c=u((r-=10*a*126*10)/10/126),d=u((r-=10*c*126)/10);return[a+129,c+48,d+129,r-10*d+48]}}function E(l){l.fatal;this.handler=function(l,n){if(n===t)return s;if(i(n))return n;var e,r,o=(e=n,r=p=p||v("big5").map(function(l,n){return n<5024?null:l}),9552===e||9566===e||9569===e||9578===e||21313===e||21317===e?r.lastIndexOf(e):m(e,r));if(null===o)return f(n);var a=u(o/157)+129;if(a<161)return f(n);var c=o%157;return[a,c+(c<63?64:98)]}}function B(l){l.fatal;this.handler=function(l,e){if(e===t)return s;if(i(e)||128===e)return e;if(165===e)return 92;if(8254===e)return 126;if(n(e,65377,65439))return e-65377+161;8722===e&&(e=65293);var r,o=(r=e,(g=g||v("jis0208").map(function(l,u){return n(u,8272,8835)?null:l})).indexOf(r));if(null===o)return f(e);var a=u(o/188),c=o%188;return[a+(a<31?129:193),c+(c<63?64:65)]}}function S(l,n){var u=l>>8,e=255&l;return n?[u,e]:[e,u]}function I(l,u){var e=u.fatal,r=null,i=null;this.handler=function(u,o){if(o===t&&(null!==r||null!==i))return a(e);if(o===t&&null===r&&null===i)return s;if(null===r)return r=o,null;var f;if(f=l?(r<<8)+o:(o<<8)+r,r=null,null!==i){var c=i;return i=null,n(f,56320,57343)?65536+1024*(c-55296)+(f-56320):(u.prepend(S(f,l)),a(e))}return n(f,55296,56319)?(i=f,null):n(f,56320,57343)?a(e):f}}function T(l,u){u.fatal;this.handler=function(u,e){if(e===t)return s;if(n(e,0,65535))return S(e,l);var r=S(55296+(e-65536>>10),l),i=S(56320+(e-65536&1023),l);return r.concat(i)}}Object.defineProperty&&(Object.defineProperty(k.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(k.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(k.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),k.prototype.decode=function(l,n){var u;u="object"==typeof l&&l instanceof ArrayBuffer?new Uint8Array(l):"object"==typeof l&&"buffer"in l&&l.buffer instanceof ArrayBuffer?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):new Uint8Array(0),n=e(n),this._do_not_flush||(this._decoder=_[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(n.stream);for(var r,i=new o(u),a=[];;){var f=i.read();if(f===t)break;if((r=this._decoder.handler(i,f))===s)break;null!==r&&(Array.isArray(r)?a.push.apply(a,r):a.push(r))}if(!this._do_not_flush){do{if((r=this._decoder.handler(i,i.read()))===s)break;null!==r&&(Array.isArray(r)?a.push.apply(a,r):a.push(r))}while(!i.endOfStream());this._decoder=null}return function(l){var n,u;return n=["UTF-8","UTF-16LE","UTF-16BE"],u=this._encoding.name,-1===n.indexOf(u)||this._ignoreBOM||this._BOMseen||(l.length>0&&65279===l[0]?(this._BOMseen=!0,l.shift()):l.length>0&&(this._BOMseen=!0)),function(l){for(var n="",u=0;u<l.length;++u){var e=l[u];e<=65535?n+=String.fromCharCode(e):(e-=65536,n+=String.fromCharCode(55296+(e>>10),56320+(1023&e)))}return n}(l)}.call(this,a)},Object.defineProperty&&Object.defineProperty(O.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),O.prototype.encode=function(l,n){l=void 0===l?"":String(l),n=e(n),this._do_not_flush||(this._encoder=w[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(n.stream);for(var u,r=new o(function(l){for(var n=String(l),u=n.length,e=0,r=[];e<u;){var i=n.charCodeAt(e);if(i<55296||i>57343)r.push(i);else if(56320<=i&&i<=57343)r.push(65533);else if(55296<=i&&i<=56319)if(e===u-1)r.push(65533);else{var t=n.charCodeAt(e+1);if(56320<=t&&t<=57343){var o=1023&i,s=1023&t;r.push(65536+(o<<10)+s),e+=1}else r.push(65533)}e+=1}return r}(l)),i=[];;){var a=r.read();if(a===t)break;if((u=this._encoder.handler(r,a))===s)break;Array.isArray(u)?i.push.apply(i,u):i.push(u)}if(!this._do_not_flush){for(;(u=this._encoder.handler(r,r.read()))!==s;)Array.isArray(u)?i.push.apply(i,u):i.push(u);this._encoder=null}return new Uint8Array(i)},w["UTF-8"]=function(l){return new function(l){l.fatal,this.handler=function(l,u){if(u===t)return s;if(i(u))return u;var e,r;n(u,128,2047)?(e=1,r=192):n(u,2048,65535)?(e=2,r=224):n(u,65536,1114111)&&(e=3,r=240);for(var o=[(u>>6*e)+r];e>0;){var a=u>>6*(e-1);o.push(128|63&a),e-=1}return o}}(l)},_["UTF-8"]=function(l){return new function(l){var u=l.fatal,e=0,r=0,i=0,o=128,f=191;this.handler=function(l,c){if(c===t&&0!==i)return i=0,a(u);if(c===t)return s;if(0===i){if(n(c,0,127))return c;if(n(c,194,223))i=1,e=31&c;else if(n(c,224,239))224===c&&(o=160),237===c&&(f=159),i=2,e=15&c;else{if(!n(c,240,244))return a(u);240===c&&(o=144),244===c&&(f=143),i=3,e=7&c}return null}if(!n(c,o,f))return e=i=r=0,o=128,f=191,l.prepend(c),a(u);if(o=128,f=191,e=e<<6|63&c,(r+=1)!==i)return null;var d=e;return e=i=r=0,d}}(l)},"encoding-indexes"in l&&d.forEach(function(l){"Legacy single-byte encodings"===l.heading&&l.encodings.forEach(function(l){var n=l.name,u=v(n.toLowerCase());_[n]=function(l){return new function(l,n){var u=n.fatal;this.handler=function(n,e){if(e===t)return s;if(r(e))return e;var i=l[e-128];return null===i?a(u):i}}(u,l)},w[n]=function(l){return new function(l,n){n.fatal,this.handler=function(n,u){if(u===t)return s;if(i(u))return u;var e=m(u,l);return null===e&&f(u),e+128}}(u,l)}})}),_.GBK=function(l){return new x(l)},w.GBK=function(l){return new j(l,!0)},w.gb18030=function(l){return new j(l)},_.gb18030=function(l){return new x(l)},w.Big5=function(l){return new E(l)},_.Big5=function(l){return new function(l){var u=l.fatal,e=0;this.handler=function(l,i){if(i===t&&0!==e)return e=0,a(u);if(i===t&&0===e)return s;if(0!==e){var o=e,f=null;e=0;var c=i<127?64:98;switch((n(i,64,126)||n(i,161,254))&&(f=157*(o-129)+(i-c)),f){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var d=null===f?null:b(f,v("big5"));return null===d&&r(i)&&l.prepend(i),null===d?a(u):d}return r(i)?i:n(i,129,254)?(e=i,null):a(u)}}(l)},w["EUC-JP"]=function(l){return new function(l){l.fatal,this.handler=function(l,e){if(e===t)return s;if(i(e))return e;if(165===e)return 92;if(8254===e)return 126;if(n(e,65377,65439))return[142,e-65377+161];8722===e&&(e=65293);var r=m(e,v("jis0208"));return null===r?f(e):[u(r/94)+161,r%94+161]}}(l)},_["EUC-JP"]=function(l){return new function(l){var u=l.fatal,e=!1,i=0;this.handler=function(l,o){if(o===t&&0!==i)return i=0,a(u);if(o===t&&0===i)return s;if(142===i&&n(o,161,223))return i=0,65216+o;if(143===i&&n(o,161,254))return e=!0,i=o,null;if(0!==i){var f=i;i=0;var c=null;return n(f,161,254)&&n(o,161,254)&&(c=b(94*(f-161)+(o-161),v(e?"jis0212":"jis0208"))),e=!1,n(o,161,254)||l.prepend(o),null===c?a(u):c}return r(o)?o:142===o||143===o||n(o,161,254)?(i=o,null):a(u)}}(l)},w["ISO-2022-JP"]=function(l){return new function(l){l.fatal;var n=0,e=1,r=2,o=n;this.handler=function(l,a){if(a===t&&o!==n)return l.prepend(a),o=n,[27,40,66];if(a===t&&o===n)return s;if(!(o!==n&&o!==e||14!==a&&15!==a&&27!==a))return f(65533);if(o===n&&i(a))return a;if(o===e&&(i(a)&&92!==a&&126!==a||165==a||8254==a)){if(i(a))return a;if(165===a)return 92;if(8254===a)return 126}if(i(a)&&o!==n)return l.prepend(a),o=n,[27,40,66];if((165===a||8254===a)&&o!==e)return l.prepend(a),o=e,[27,40,74];8722===a&&(a=65293);var c=m(a,v("jis0208"));return null===c?f(a):o!==r?(l.prepend(a),o=r,[27,36,66]):[u(c/94)+33,c%94+33]}}(l)},_["ISO-2022-JP"]=function(l){return new function(l){var u=l.fatal,e=0,r=1,i=2,o=3,f=4,c=5,d=6,h=e,g=e,p=0,w=!1;this.handler=function(l,_){switch(h){default:case e:return 27===_?(h=c,null):n(_,0,127)&&14!==_&&15!==_&&27!==_?(w=!1,_):_===t?s:(w=!1,a(u));case r:return 27===_?(h=c,null):92===_?(w=!1,165):126===_?(w=!1,8254):n(_,0,127)&&14!==_&&15!==_&&27!==_&&92!==_&&126!==_?(w=!1,_):_===t?s:(w=!1,a(u));case i:return 27===_?(h=c,null):n(_,33,95)?(w=!1,65344+_):_===t?s:(w=!1,a(u));case o:return 27===_?(h=c,null):n(_,33,126)?(w=!1,p=_,h=f,null):_===t?s:(w=!1,a(u));case f:if(27===_)return h=c,a(u);if(n(_,33,126)){h=o;var m=b(94*(p-33)+_-33,v("jis0208"));return null===m?a(u):m}return _===t?(h=o,l.prepend(_),a(u)):(h=o,a(u));case c:return 36===_||40===_?(p=_,h=d,null):(l.prepend(_),w=!1,h=g,a(u));case d:var y=p;p=0;var k=null;if(40===y&&66===_&&(k=e),40===y&&74===_&&(k=r),40===y&&73===_&&(k=i),36!==y||64!==_&&66!==_||(k=o),null!==k){h=h=k;var O=w;return w=!0,O?a(u):null}return l.prepend([y,_]),w=!1,h=g,a(u)}}}(l)},w.Shift_JIS=function(l){return new B(l)},_.Shift_JIS=function(l){return new function(l){var u=l.fatal,e=0;this.handler=function(l,i){if(i===t&&0!==e)return e=0,a(u);if(i===t&&0===e)return s;if(0!==e){var o=e,f=null;e=0;var c=i<127?64:65,d=o<160?129:193;if((n(i,64,126)||n(i,128,252))&&(f=188*(o-d)+i-c),n(f,8836,10715))return 48508+f;var h=null===f?null:b(f,v("jis0208"));return null===h&&r(i)&&l.prepend(i),null===h?a(u):h}return r(i)||128===i?i:n(i,161,223)?65216+i:n(i,129,159)||n(i,224,252)?(e=i,null):a(u)}}(l)},w["EUC-KR"]=function(l){return new function(l){l.fatal,this.handler=function(l,n){if(n===t)return s;if(i(n))return n;var e=m(n,v("euc-kr"));return null===e?f(n):[u(e/190)+129,e%190+65]}}(l)},_["EUC-KR"]=function(l){return new function(l){var u=l.fatal,e=0;this.handler=function(l,i){if(i===t&&0!==e)return e=0,a(u);if(i===t&&0===e)return s;if(0!==e){var o=e,f=null;e=0,n(i,65,254)&&(f=190*(o-129)+(i-65));var c=null===f?null:b(f,v("euc-kr"));return null===f&&r(i)&&l.prepend(i),null===c?a(u):c}return r(i)?i:n(i,129,254)?(e=i,null):a(u)}}(l)},w["UTF-16BE"]=function(l){return new T(!0,l)},_["UTF-16BE"]=function(l){return new I(!0,l)},w["UTF-16LE"]=function(l){return new T(!1,l)},_["UTF-16LE"]=function(l){return new I(!1,l)},w["x-user-defined"]=function(l){return new function(l){l.fatal,this.handler=function(l,u){return u===t?s:i(u)?u:n(u,63360,63487)?u-63360+128:f(u)}}(l)},_["x-user-defined"]=function(l){return new function(l){l.fatal,this.handler=function(l,n){return n===t?s:r(n)?n:63360+n-128}}(l)},(l.__TextEncoder=O),(l.__TextDecoder=k)}(window);
﻿(function () {

    // this
    var _this = window.asc || (window.asc = {});

    // utils
    var utils = _this.utils || (_this.utils = {});

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //                                                                                                                    //
    //                                                      Domain                                                        //
    //                                                                                                                    //
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    function getHostName (url) {
        if (typeof url !== 'string') {
            return null;
        }

        if (url.indexOf('file:') === 0) {
            return 'localhost';
        }

        var match = url.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);
        if (match != null && match.length > 2 && typeof match[2] === 'string' && match[2].length > 0) {
            return match[2];
        }

        return null;
    }

    function getDomain (url) {
        if (typeof url !== 'string') {
            return null;
        }

        if (url.indexOf('file:') === 0) {
            return 'localhost';
        }

        var hostName = utils.getHostName(url);
        var domain = hostName;

        if (hostName != null) {
            var parts = hostName.split('.').reverse();

            if (parts != null && parts.length > 1) {
                domain = parts[1] + '.' + parts[0];

                if (hostName.toLowerCase().indexOf('.co.uk') != -1 && parts.length > 2) {
                    domain = parts[2] + '.' + domain;
                }
            }
        }

        return domain;
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //                                                                                                                    //
    //                                                         Map                                                        //
    //                                                                                                                    //
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    function MapSimple () {
        this.__arr = [];
        this.__len = 0;
        return this;
    }

    Object.defineProperty(MapSimple.prototype, 'get', {
        value: function (k) {
            var i = this.indexOf(k);
            if (i >= 0) return this.__arr[i].v;
            return undefined;
        }
    });

    Object.defineProperty(MapSimple.prototype, 'set', {
        value: function (k, v) {
            var i = this.indexOf(k);
            if (i >= 0) {
                this.__arr[i].v = v;
                return v;
            }
            this.__arr.push({ k: k, v: v });
            this.__len++;
            return v;
        }
    });

    Object.defineProperty(MapSimple.prototype, 'delete', {
        value: function (k) {
            var i = this.indexOf(k);
            if (i >= 0) {
                this.__arr.splice(i, 1);
                this.__len--;
                return true;
            }
            return false;
        }
    });

    Object.defineProperty(MapSimple.prototype, 'indexOf', {
        value: function (k) {
            for (var i = 0; i < this.__len; ++i) {
                if (this.__arr[i].k == k) {
                    return i;
                }
            }
            return -1;
        }
    });

    Object.defineProperty(MapSimple.prototype, 'keys', {
        get: function () {
            return this.__arr.map(function (o) { return o.k; });
        }
    });

    Object.defineProperty(MapSimple.prototype, 'values', {
        get: function () {
            return this.__arr.map(function (o) { return o.v; });
        }
    });

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //                                                                                                                    //
    //                                                       EReg                                                         //
    //                                                                                                                    //
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    function EReg (r, opt) {
        if (typeof r !== 'string') r = String(r);
        if (typeof opt !== 'string') r = String(opt);
        this.r = new RegExp(r, opt);
        return this;
    }

    Object.defineProperty(EReg.prototype, 'match', {
        value: function (s) {
            if (typeof s !== 'string') r = String(s);
            if (this.r.global) {
                this.r.lastIndex = 0;
            }
            return (this.result = this.r.exec(s)) != null;
        }
    });

    Object.defineProperty(EReg.prototype, 'matched', {
        value: function (n) {
            n = n | 0;
            if (this.result != null && n >= 0 && n < this.result.length) {
                return this.result[n];
            } else {
                throw "EReg::matched";
            }
        }
    });

    Object.defineProperty(EReg.prototype, 'matchedLeft', {
        value: function () {
            if (this.result == null) {
                throw "No string matched";
            }
            return this.result.input.substr(0, this.result.index);
        }
    });

    Object.defineProperty(EReg.prototype, 'matchedRight', {
        value: function () {
            if (this.result == null) {
                throw "No string matched";
            }
            var rl = (this.result.index | 0) + this.result[0].length;
            var s = this.result.input;
            return s.substr(rl, s.length - rl);
        }
    });

    Object.defineProperty(EReg.prototype, 'matchedPos', {
        value: function () {
            if (this.result == null) {
                throw "No string matched";
            }
            return {
                pos: (this.result.index) | 0,
                len: (String(this.result[0]).length) | 0
            };
        }
    });

    Object.defineProperty(EReg.prototype, 'matchSub', {
        value: function (s, pos, len) {
            if (typeof s !== 'string') r = String(s);
            if (typeof len === 'undefined') len = -1;
            pos = pos | 0;
            len = len | 0;
            if (this.r.global) {
                this.r.lastIndex = pos;
                this.result = this.r.exec(len < 0 ? s : s.substr(0, pos + len));
                var b = this.result != null;
                if (b) {
                    this.result.input = s;
                }
                return b;
            } else {
                var b = this.match(len < 0 ? s.substr(pos) : s.substr(pos, len));
                if (b) {
                    this.result.input = s;
                    this.result.index += pos;
                }
                return b;
            }
        }
    });

    Object.defineProperty(EReg.prototype, 'split', {
        value: function (s) {
            if (typeof s !== 'string') r = String(s);
            var d = "#__delim__#";
            return s.replace(this.r, d).split(d);
        }
    });

    Object.defineProperty(EReg.prototype, 'replace', {
        value: function (s, by) {
            if (typeof s !== 'string') r = String(s);
            return s.replace(this.r, by);
        }
    });

    Object.defineProperty(EReg.prototype, 'map', {
        value: function (s, f) {
            if (typeof s !== 'string') r = String(s);
            var offset = 0;
            var buf = '';
            var first = true;
            do {
                if (offset >= s.length) {
                    break;
                } else if (!this.matchSub(s, offset)) {
                    buf += s.substr(offset);
                    break;
                }
                var p = this.matchedPos();
                buf += s.substr(offset, p.pos - offset);
                buf += f(this);
                if (p.len == 0) {
                    buf += s.substr(p.pos, 1);
                    offset = p.pos + 1;
                } else {
                    offset = p.pos + p.len;
                }
                first = false;
            } while (this.r.global);

            if (!this.r.global && offset > 0 && offset < s.length) {
                buf += s.substr(offset);
            }

            return buf;
        }
    });

    Object.defineProperty(EReg, 'escape', {
        value: function (s) {
            if (typeof s !== 'string') r = String(s);
            return s.replace(EReg.escapeRe, "\\$&");
        }
    });

    Object.defineProperty(EReg, 'escapeRe', {
        value: new RegExp("[.*+?^${}()|[\\]\\\\]", "g")
    });

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //                                                                                                                    //
    //                                                       Attach                                                       //
    //                                                                                                                    //
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    // domain
    utils.getHostName = getHostName;
    utils.getDomain = getDomain;

    // map
    utils.NATIVE_MAP_AVAILABLE = window.Map && typeof Map.prototype.keys === 'function' && typeof Map.prototype.values === 'function';
    utils.MapSimple = MapSimple;

    // gesture
    if (typeof utils.wasGesture === 'undefined') {
        utils.wasGesture = true;
    }

    // haxe
    utils.EReg = EReg;

})();
﻿var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
        Object.defineProperty(d, '__extends', {
            enumerable: false,
            configurable: false,
            value: b
        });
    };
})();

(function () {

    // this
    var _this = window.asc || (window.asc = {});

    // text
    var text = _this.text || (_this.text = {});

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //                                                                                                                    //
    //                                                      NativeText                                                    //
    //                                                                                                                    //
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    function NativeText () {
        var _this = this;

        _this.__createDOM();

        _this.SCROLL_SHIFT = _this.__getScrollbarWidth();

        _this._bodyStyle = _this.body.style;
        _this._textStyle = _this._text.style;

        _this._bodyStyle.overflow = 'hidden';
        _this._bodyStyle.position = 'absolute';
        _this._bodyStyle.transformOrigin = 'left top';

        _this._textStyle.textAlign = 'left';
        _this._textStyle.overflow = 'scroll';
        _this._textStyle.position = 'relative';

        _this.setVisible(true);
        _this.setAlpha(1.0);
        _this.setSize(100, 100);
        _this.setTransform(1, 0, 0, 1, 0, 0);
        _this.setWordWrap(true);
        _this.setMouseWheel(true);
        _this.setSelectable(true);
		_this.setMultiline(false);
        _this.setTextFormat('Times', 12, 0x0, false, false, false, 'left', 0, 0, 0, 0);

        _this._text.onmousedown = _this._text.onmousemove = this._text.onmouseup = _this._text.onwheel = _this._defaultMouseHandler.bind(this);

        return _this;
    };

    Object.defineProperty(NativeText.prototype, 'setIndex', {
        value: function (value) {
            this._bodyStyle.zIndex = value;
        }
    });

    Object.defineProperty(NativeText.prototype, 'setMouseHandler', {
        value: function (value) {
            this._mouseHandler = value;
        }
    });

    Object.defineProperty(NativeText.prototype, 'setText', {
        value: function (value) {
            value = value.replace(/\r\n/g, '\n').replace(/\n/g, '<br>');
            this._text.innerHTML = value;
        }
    });

    Object.defineProperty(NativeText.prototype, 'setTextFormat', {
        value: function (font, size, color, bold, italic, underline, align, leftMargin, rightMargin, indent, leading, begin, end) {

            // TODO indent
            indent = 0;

            var r = this.__getPixelAspectRatio();
            var style = '';
            if (bold) {
                style += 'bold ';
            }
            if (italic) {
                style += 'italic ';
            }
            style += (+(size) / r) + 'px ' + font;

            this._lineHeight = Math.ceil((size|0) * 1.185) + leading;

            this._textStyle.font = style;
            this._textStyle.color = 'rgb(' + (((color)|0) >> 16 & 0xff) + ',' + (((color)|0) >> 8 & 0xff) + ',' + (((color)|0) & 0xff) + ')';
            this._textStyle.textDecoration = underline ? 'underline' : 'none';
            this._textStyle.textAlign = align;
            this._textStyle.marginLeft = leftMargin / r + 'px';
            this._textStyle.marginRight = rightMargin / r + 'px';
            this._textStyle.textIndent = indent / r + 'px';
            this._textStyle.lineHeight = this._lineHeight / r + 'px';
        }
    });

    Object.defineProperty(NativeText.prototype, 'setSize', {
        value: function (width, height) {
			this._width = width;
			this._height = height;
			this.__updateSize();
        }
    });

    Object.defineProperty(NativeText.prototype, 'setTransform', {
        value: function (a, b, c, d, tx, ty) {
            var m = this._matrix = this._matrix || {};

            if (m.a === a && m.b === b && m.c === c && m.d === d && m.tx === tx && m.ty === ty) {
                return;
            }

            var r = this.__getPixelAspectRatio();
            var s = 'matrix(';
            s += (m.a = a) + ',';
            s += (m.b = b) + ',';
            s += (m.c = c) + ',';
            s += (m.d = d) + ',';
            s += (m.tx = tx) / r + ',';
            s += (m.ty = ty) / r + ')';

            this._bodyStyle.transform = s;
            this.__updateMargin();
        }
    });

    Object.defineProperty(NativeText.prototype, 'setVisible', {
        value: function (value) {
            if (this._visible == value) {
                return;
            }
            this._visible = value;
            this._bodyStyle.visibility = value ? 'visible' : 'hidden';
        }
    });

    Object.defineProperty(NativeText.prototype, 'setAlpha', {
        value: function (value) {
            if (this._alpha == value) {
                return;
            }
            this._alpha = value;
            this._bodyStyle.opacity = value;
        }
    });

    Object.defineProperty(NativeText.prototype, 'setMouseWheel', {
        value: function (value) {
            this._mouseWheel = value;
        }
    });

    Object.defineProperty(NativeText.prototype, 'setWordWrap', {
        value: function (value) {
            this._wordWrap = value;
            this.__updateWhiteSpace();
        }
    });

    Object.defineProperty(NativeText.prototype, 'setMultiline', {
        value: function (value) {
            this._multiline = value;
            this.__updateWhiteSpace();
        }
    });

    Object.defineProperty(NativeText.prototype, 'getScrollH', {
        value: function () {
            return this._text.scrollLeft;
        }
    });

    Object.defineProperty(NativeText.prototype, 'getScrollV', {
        value: function () {
            return Math.max((this._text.scrollTop / this._lineHeight)|0, 1);
        }
    });

    Object.defineProperty(NativeText.prototype, 'getMaxScrollH', {
        value: function () {
            return this._text.scrollWidth - this._text.clientWidth;
        }
    });

    Object.defineProperty(NativeText.prototype, 'getMaxScrollV', {
        value: function () {
            return (Math.ceil((this._text.scrollHeight - this._text.clientHeight) / this._lineHeight)|0) + 1;
        }
    });

    Object.defineProperty(NativeText.prototype, 'setScrollH', {
        value: function (value) {
            this._text.scrollLeft = value;
        }
    });

    Object.defineProperty(NativeText.prototype, 'setScrollV', {
        value: function (value) {
            this._text.scrollTop = ((value-1) * this._lineHeight);
        }
    });

    Object.defineProperty(NativeText.prototype, 'setSelectable', {
        value: function (value) {
            if (value) {
                this._textStyle.userSelect = 'auto';
                this._textStyle.mozUserSelect = 'auto';
                this._textStyle.webkitUserSelect = this._textStyle.khtmlUserDrag = this._textStyle.khtmlUserSelect = this._textStyle.mozUserSelect = this._textStyle.msUserSelect = 'auto';
            } else {
                this._textStyle.userSelect = 'none';
                this._textStyle.mozUserSelect = '-moz-none';
                this._textStyle.webkitUserSelect = this._textStyle.khtmlUserDrag = this._textStyle.khtmlUserSelect = this._textStyle.mozUserSelect = this._textStyle.msUserSelect = 'none';
            }
        }
    });

    Object.defineProperty(NativeText.prototype, 'setMaxChars', {
        value: function (value) {
            // not implemented
        }
    });

    Object.defineProperty(NativeText.prototype, 'setRestrict', {
        value: function (value) {
            // not implemented
        }
    });

    Object.defineProperty(NativeText.prototype, 'getSelectionBegin', {
        value: function () {
            return this.__getSelected().begin;
        }
    });

    Object.defineProperty(NativeText.prototype, 'getSelectionEnd', {
        value: function () {
            return this.__getSelected().end;
        }
    });

    Object.defineProperty(NativeText.prototype, 'isFocused', {
        value: function () {
            return document.activeElement === this._text;
        }
    });

    Object.defineProperty(NativeText.prototype, 'setFocus', {
        value: function () {
            this._text.focus();
        }
    });

    Object.defineProperty(NativeText.prototype, 'setSelection', {
        value: function (begin, end) {
            // not implemented
        }
    });

    Object.defineProperty(NativeText.prototype, '__getSelected', {
        value: function () {
            // not implemented
            return { begin: 0, end: 0 };
        }
    });

    Object.defineProperty(NativeText.prototype, '__getScrollbarWidth', {
        value: function () {
            var outer = document.createElement('div');
            var inner = document.createElement('div');
            outer.style.visibility = 'hidden';
            outer.style.width = '100px';
            inner.style.width = '100%';
            outer.appendChild(inner);
            document.body.appendChild(outer);
            var widthWithoutScrollbar = outer.offsetWidth;
            outer.style.overflow = 'scroll';
            var widthWithScrollbar = inner.offsetWidth;
            document.body.removeChild(outer);
            return (widthWithoutScrollbar - widthWithScrollbar);
        }
    });

    Object.defineProperty(NativeText.prototype, '__updateWhiteSpace', {
        value: function () {
            var whiteSpace = 'pre-line';
            if (!this._wordWrap) {
                whiteSpace = 'pre';
            }
            if (!this._multiline) {
                whiteSpace = 'nowrap';
            }
            this._textStyle.whiteSpace = whiteSpace;
        }
    });
	
	Object.defineProperty(NativeText.prototype, '__updateSize', {
        value: function () {
			var x = this.SCROLL_SHIFT, y = this.SCROLL_SHIFT;
			var width = this._width, height = this._height;

            var r = this.__getPixelAspectRatio();
            x /= r; y /= r;
            width /= r; height /= r;
			
			width += x;
			height += y;

            this.__updateMargin();
			
			this._textStyle.left = x + 'px';
			this._textStyle.top = y + 'px';

            this._bodyStyle.width = width + 'px';
            this._bodyStyle.height = height + 'px';
			
			this._textStyle.width = width + 'px';
			this._textStyle.height = height + 'px';
        }
    });

    Object.defineProperty(NativeText.prototype, '__updateMargin', {
        value: function () {
            var x = this.SCROLL_SHIFT, y = this.SCROLL_SHIFT;

            var m = this._matrix;
            if (typeof m === 'object') {
                var px = x, py = y;
                x = m.a * px + m.c * py;
                y = m.d * py + m.b * px;
            }

            this._bodyStyle.marginLeft = -x + 'px';
            this._bodyStyle.marginTop = -y + 'px';
        }
    });

	Object.defineProperty(NativeText.prototype, '__textProcess', {
        value: function (value) {
			var value = value || '';
			
            if (typeof this._restrict === 'object' && this._restrict !== null) {
                value = this._restrict.split(value).join('');
			}

			if (typeof this._maxChars === 'number' && this._maxChars > 0) {
				value = value.substr(0, this._maxChars);
			}
			
			return value;
        }
    });
	
	Object.defineProperty(NativeText.prototype, '_defaultMouseHandler', {
        value: function (e) {
            switch (e.type) {
                case 'mousewheel':
                case 'DOMMouseScroll':
                    if (!this._mouseWheel) {
                        return false;
                    }
                    break;
            }
            if (typeof this._mouseHandler === 'function') {
                this._mouseHandler(e);
            }
        }
    });
	
	Object.defineProperty(NativeText.prototype, '__createDOM', {
        value: function (value) {
            this.body = document.createElement('div');
            this.body.appendChild(this._text = document.createElement('div'));
        }
    });

    Object.defineProperty(NativeText.prototype, '__getPixelAspectRatio', {
        value: function () {
            return window.devicePixelRatio > 0 ? window.devicePixelRatio : 1;
        }
    });

    Object.defineProperty(NativeText.prototype, '__createRegExp', {
        value: function (restrict) {
            var EReg;
            if (asc.utils && typeof (EReg = asc.utils.EReg) === 'function') {
                return null;
            }

            var declinedRange = new EReg('\\^(.-.|.)', 'gu');
            var declined = '';

            var parts = [];
            var accepted = declinedRange.map (restrict, function (ereg) {
                declined += ereg.matched (1); return '';
            });

            if (accepted.length > 0) {
                parts.push ('[^' + restrict + ']');
            }

            if (declined.length > 0) {
                parts.push ('[' + declined + ']');
            }

            return new EReg ('(' + parts.join('|') + ')', 'g');
        }
    });

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //                                                                                                                    //
    //                                                      NativeInput                                                   //
    //                                                                                                                    //
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    var NativeInput = (function (_super) {
        __extends(NativeInput, _super);
        function NativeInput() {
            var _newTarget = this.constructor, _this = this;
            _this = _super.call(this) || this;
            Object.setPrototypeOf(_this, _newTarget.prototype);

            _this._textStyle.border = 'none';
            _this._textStyle.background = 'none';
            _this._textStyle.outline = 'none';

            _this._text.onkeydown = _this._text.onkeyup = _this._defaultKeyboardHandler.bind(this);
            _this._text.oninput = _this._defaultChangeHandler.bind(this);

            return _this;
        }
        return NativeInput;
    }(NativeText));

    Object.defineProperty(NativeInput.prototype, 'setText', {
        value: function (value) {
            value = value || '';
            this._text.value = this.__textProcess(value);
        }
    });

    Object.defineProperty(NativeInput.prototype, 'getText', {
        value: function () {
            return this._text.value;
        }
    });

    Object.defineProperty(NativeInput.prototype, 'setSelectable', {
        value: function (value) {
            this._text.readOnly = !value;
        }
    });

    Object.defineProperty(NativeInput.prototype, 'setKeyboardHandler', {
        value: function (value) {
            this._ketboardHandler = value;
        }
    });

    Object.defineProperty(NativeInput.prototype, 'setChangeHandler', {
        value: function (value) {
            this._changeHandler = value;
        }
    });

    Object.defineProperty(NativeInput.prototype, 'setMaxChars', {
        value: function (value) {
            this._maxChars = (+value)|0;
            this._text.maxLength = this._maxChars > 0 ? this._maxChars : 0x7fffffff;
            this._text.value = this.__textProcess(this._text.value);
        }
    });

    Object.defineProperty(NativeInput.prototype, 'setRestrict', {
        value: function (value) {
            value = value || '';
            if (value.length > 0) {
                this._restrict = this.__createRegExp(value);
            } else {
                this._restrict = null;
            }
            this._text.value = this.__textProcess(this._text.value);
        }
    });

    Object.defineProperty(NativeInput.prototype, 'setSelection', {
        value: function (begin, end) {
            this._text.setSelectionRange(begin, end);
        }
    });

    Object.defineProperty(NativeInput.prototype, '__getSelected', {
        value: function () {
            return {
                begin: this._text.selectionStart,
                end: this._text.selectionEnd
            };
        }
    });

    Object.defineProperty(NativeInput.prototype, '_defaultKeyboardHandler', {
        value: function (e) {
            if (typeof this._ketboardHandler === 'function') {
                this._ketboardHandler(e);
            }
        }
    });

    Object.defineProperty(NativeInput.prototype, '_defaultChangeHandler', {
        value: function (e) {
            this._text.value = this.__textProcess(this._text.value);
            this.__updateSize();

            if (typeof this._changeHandler === 'function') {
                this._changeHandler(e);
            }
        }
    });

    Object.defineProperty(NativeInput.prototype, '__createDOM', {
        value: function (value) {
            this.body = document.createElement('div');
            this.body.appendChild(this._text = document.createElement('textarea'));
        }
    });

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //                                                                                                                    //
    //                                                       Attach                                                       //
    //                                                                                                                    //
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    text.NativeText = NativeText;
    text.NativeInput = NativeInput;

})();
﻿(function () {

    // this
    var _this = window.asc || (window.asc = {});

    // system
    var system = _this.system || (_this.system = {});

    // utils
    var utils = _this.utils || (_this.utils = {});

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //                                                                                                                    //
    //                                                   Capabilities                                                     //
    //                                                                                                                    //
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    function getCapabilities () {
        var unknown = '-';

        //browser
        var nVer = navigator.appVersion;
        var nAgt = navigator.userAgent;
        var browser = navigator.appName;
        var version = '' + parseFloat(navigator.appVersion);
        var majorVersion = parseInt(navigator.appVersion, 10);
        var nameOffset, verOffset, ix;

        // Opera
        if ((verOffset = nAgt.indexOf('Opera')) != -1) {
            browser = 'Opera';
            version = nAgt.substring(verOffset + 6);
            if ((verOffset = nAgt.indexOf('Version')) != -1) {
                version = nAgt.substring(verOffset + 8);
            }
        }
        else if ((verOffset = nAgt.indexOf(' OPR')) != -1) {
            browser = 'Opera';
            version = nAgt.substring(verOffset + 5);
        }
        // MSIE
        else if ((verOffset = nAgt.indexOf('MSIE')) != -1) {
            browser = 'Microsoft Internet Explorer';
            version = nAgt.substring(verOffset + 5);
        }
        // Edge
        else if ((verOffset = nAgt.indexOf('Edge')) != -1) {
            browser = 'Microsoft Edge';
            version = nAgt.substring(verOffset + 5);
        }
        // Chrome
        else if ((verOffset = nAgt.indexOf('Chrome')) != -1) {
            browser = 'Chrome';
            version = nAgt.substring(verOffset + 7);
        }
        // Safari
        else if ((verOffset = nAgt.indexOf('Safari')) != -1) {
            browser = 'Safari';
            version = nAgt.substring(verOffset + 7);
            if ((verOffset = nAgt.indexOf('Version')) != -1) {
                version = nAgt.substring(verOffset + 8);
            }
        }
        // Firefox
        else if ((verOffset = nAgt.indexOf('Firefox')) != -1) {
            browser = 'Firefox';
            version = nAgt.substring(verOffset + 8);
        }
        // MSIE 11+
        else if (nAgt.indexOf('Trident/') != -1) {
            browser = 'Microsoft Internet Explorer';
            version = nAgt.substring(nAgt.indexOf('rv:') + 3);
        }
        // Other browsers
        else if ((nameOffset = nAgt.lastIndexOf(' ') + 1) < (verOffset = nAgt.lastIndexOf('/'))) {
            browser = nAgt.substring(nameOffset, verOffset);
            version = nAgt.substring(verOffset + 1);
            if (browser.toLowerCase() == browser.toUpperCase()) {
                browser = navigator.appName;
            }
        }
        // trim the version string
        if ((ix = version.indexOf(';')) != -1) version = version.substring(0, ix);
        if ((ix = version.indexOf(' ')) != -1) version = version.substring(0, ix);
        if ((ix = version.indexOf(')')) != -1) version = version.substring(0, ix);

        majorVersion = parseInt('' + version, 10);
        if (isNaN(majorVersion)) {
            version = '' + parseFloat(navigator.appVersion);
            majorVersion = parseInt(navigator.appVersion, 10);
        }

        // mobile version
        var mobile = /Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(nVer);

        // cookie
        var cookieEnabled = (navigator.cookieEnabled) ? true : false;

        if (typeof navigator.cookieEnabled == 'undefined' && !cookieEnabled) {
            document.cookie = 'testcookie';
            cookieEnabled = (document.cookie.indexOf('testcookie') != -1) ? true : false;
        }

        // system
        var os = unknown;
        var clientStrings = [
            {s:'Windows 10', r:/(Windows 10.0|Windows NT 10.0)/},
            {s:'Windows 8.1', r:/(Windows 8.1|Windows NT 6.3)/},
            {s:'Windows 8', r:/(Windows 8|Windows NT 6.2)/},
            {s:'Windows 7', r:/(Windows 7|Windows NT 6.1)/},
            {s:'Windows Vista', r:/Windows NT 6.0/},
            {s:'Windows Server 2003', r:/Windows NT 5.2/},
            {s:'Windows XP', r:/(Windows NT 5.1|Windows XP)/},
            {s:'Windows 2000', r:/(Windows NT 5.0|Windows 2000)/},
            {s:'Windows ME', r:/(Win 9x 4.90|Windows ME)/},
            {s:'Windows 98', r:/(Windows 98|Win98)/},
            {s:'Windows 95', r:/(Windows 95|Win95|Windows_95)/},
            {s:'Windows NT 4.0', r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},
            {s:'Windows CE', r:/Windows CE/},
            {s:'Windows 3.11', r:/Win16/},
            {s:'Android', r:/Android/},
            {s:'Open BSD', r:/OpenBSD/},
            {s:'Sun OS', r:/SunOS/},
            {s:'Linux', r:/(Linux|X11)/},
            {s:'iOS', r:/(iPhone|iPad|iPod)/},
            {s:'Mac OS X', r:/Mac OS X/},
            {s:'Mac OS', r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},
            {s:'QNX', r:/QNX/},
            {s:'UNIX', r:/UNIX/},
            {s:'BeOS', r:/BeOS/},
            {s:'OS/2', r:/OS\/2/},
            {s:'Search Bot', r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}
        ];
        for (var id in clientStrings) {
            var cs = clientStrings[id];
            if (cs.r.test(nAgt)) {
                os = cs.s;
                break;
            }
        }

        var osVersion = unknown;

        if (/Windows/.test(os)) {
            osVersion = /Windows (.*)/.exec(os)[1];
            os = 'Windows';
        }

        switch (os) {
            case 'Mac OS X':
                osVersion = /Mac OS X (10[\.\_\d]+)/.exec(nAgt)[1];
                break;

            case 'Android':
                osVersion = /Android ([\.\_\d]+)/.exec(nAgt)[1];
                break;

            case 'iOS':
                var tmp = /OS (\d+)_(\d+)_?(\d+)?/.exec(nVer) || [];
                while (tmp.length < 4) tmp.push(0);
                osVersion = tmp[1] + '.' + tmp[2] + '.' + parseInt(tmp[3]);
                break;
        }

        var flashVersion = 'no check', d, fv = [];
        if (typeof navigator.plugins !== 'undefined' && typeof navigator.plugins["Shockwave Flash"] === "object") {
            d = navigator.plugins["Shockwave Flash"].description;
            if (d && !(typeof navigator.mimeTypes !== 'undefined' && navigator.mimeTypes["application/x-shockwave-flash"] && !navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)) { // navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin indicates whether plug-ins are enabled or disabled in Safari 3+
                d = d.replace(/^.*\s+(\S+\s+\S+$)/, "$1");
                fv[0] = parseInt(d.replace(/^(.*)\..*$/, "$1"), 10);
                fv[1] = parseInt(d.replace(/^.*\.(.*)\s.*$/, "$1"), 10);
                fv[2] = /[a-zA-Z]/.test(d) ? parseInt(d.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0;
            }
        } else if (typeof window.ActiveXObject !== 'undefined') {
            try {
                var a = new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
                if (a) { // a will return null when ActiveX is disabled
                    d = a.GetVariable("$version");
                    if (d) {
                        d = d.split(" ")[1].split(",");
                        fv = [parseInt(d[0], 10), parseInt(d[1], 10), parseInt(d[2], 10)];
                    }
                }
            }
            catch(e) {}
        }

        if (fv.length) {
            flashVersion = fv[0] + '.' + fv[1] + ' r' + fv[2];
        }

        var font;
        switch (os) {
            case 'Windows':
                if (parseFloat(osVersion) >= 10) {
                    font = 'Segoe UI';
                } else {
                    font = 'Times New Roman';
                }
                break;

            case 'iOS':
            case 'Mac OS':
            case 'Mac OS X':
                font = '-apple-system';
                break;

            case 'Android':
                font = 'Roboto';
                break;

            default:
                font = '_sans';
        }

        return {
            browser: browser,
            browserVersion: version,
            mobile: mobile,
            os: os,
            osVersion: osVersion,
            font: font,
            cookies: cookieEnabled,
            flashVersion: flashVersion
        };
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //                                                                                                                    //
    //                                                       Attach                                                       //
    //                                                                                                                    //
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    // capabilities
    system.Capabilities = getCapabilities();

    // gesture
    if (system.Capabilities.mobile) {
        utils.wasGesture = false;
        window.addEventListener('mousedown', onFirstTouch);
		
		function onFirstTouch (e) {
			window.removeEventListener('mousedown', onFirstTouch);
            utils.wasGesture = true;
        }
    }

})();
﻿(function () {

    // this
    var _this = window.asc || (window.asc = {});

    // storage
    var storage = _this.storage || (_this.storage = {});

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //                                                                                                                    //
    //                                                     IDBStorage                                                     //
    //                                                                                                                    //
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    function IDBStorage (h)
    {
        var Storage = {};

        var indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB || window.shimIndexedDB;
        var baseName = '__localStoragePolyfill', storeName = 'pairs';

        if (typeof indexedDB !== 'object') {

            setTimeout(h, 0);

            return {
                getItem: function (n) {

                    return this[n];

                },
                setItem: function (n, v) {

                    this[n] = v;

                },
                removeItem: function (n) {

                    delete this[n];

                }
            };

        }

        var updateBug = (navigator.userAgent || '')
            .indexOf('Edge') >= 0;

        connectDB(function (db) {

            getStorage(db, function (rows) {

                for (var i = 0, len = (rows || []).length; i < len; ++i) {

                    var o = rows[i];
                    Storage[o.n] = o.v;

                }

                h();

            });

        }, function () {

            h();

        });

        function connectDB (h, e) {

            var skipOne;

            var request = indexedDB.open(baseName, 1);
            request.onsuccess = function() {

                if (skipOne) {

                    skipOne = false;
                    return;

                }

                h(request.result);

            };
            request.onerror = e;
            request.onupgradeneeded = function(e) {

                skipOne = true;
                e.currentTarget.result.createObjectStore(storeName, { keyPath: 'n' });
                connectDB(h, e);

            };
        }

        function getStorage (db, h) {

            var rows = [],
                store = db.transaction([ storeName ], "readonly").objectStore(storeName);

            store.openCursor().onsuccess = function(e) {

                var cursor = e.target.result;

                if (cursor) {

                    rows.push(cursor.value);
                    cursor.continue();

                } else {

                    h(rows);

                }
            };

        }

        this.getItem = function (n) {

            if (n == null) {

                return null;

            }

            n = n + '';

            return Storage[n];

        };

        this.setItem = function (n, v) {

            if (n == null) {

                throw 'indexedDB Storage Error: at least one argument required';

            }

            n = n + '';
            v = v + '';

            if (Storage[n] === v) {

                return;

            }

            Storage[n] = v;

            connectDB(function(db) {

                if (updateBug) {

                    db.transaction([storeName], 'readwrite').objectStore(storeName).clear(n).onsuccess = function () {

                        for (n in Storage) {

                            db.transaction([storeName], 'readwrite').objectStore(storeName).put({ n: n, v: Storage[n] });

                        }

                    };
                    return;

                }

                db.transaction([storeName], 'readwrite').objectStore(storeName).put({ n: n, v: v });

            });
        };

        this.removeItem = function (n) {

            if (!n) {

                throw 'indexedDB Storage Error: at least one argument required';

            }

            n = n + '';

            delete Storage[n];

            connectDB(function(db) {

                db.transaction([storeName], 'readwrite').objectStore(storeName).delete(n);

            });

        };

        return this;
    }

    Object.defineProperty(IDBStorage, 'needToImplement', {
        value: function () {
            if (typeof window.localStorage === 'undefined') {

                return true;

            }

            try {

                localStorage.setItem('__storage_test__', '1');

                if (localStorage.getItem('__storage_test__') === '1') {

                    localStorage.removeItem('__storage_test__');
                    return false;

                }

            } catch (e) {

                return true;

            }
        }
    });

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //                                                                                                                    //
    //                                                       Attach                                                       //
    //                                                                                                                    //
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    storage.IDBStorage = IDBStorage;

})();
﻿(function () {

    // this
    var _this = window.asc || (window.asc = {});

    // system
    var system = _this.system || (_this.system = {});

    // panel
    var panel = _this.panel || (_this.panel = {});

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //                                                                                                                    //
    //                                                      Icons                                                         //
    //                                                                                                                    //
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    var SVG = {
        HORN: '<svg width="100%" height="100%" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"><g><polygon stroke="[color]" stroke-width="5" stroke-linejoin="round" fill="[color]" points="31.040430068969727,8.758011117577553 16.369016647338867,21.447723641991615 2.4836151599884033,21.447723641991615 2.4836151599884033,37.77761675417423 16.158618927001953,37.77761675417423 31.040430068969727,50.650381341576576 31.040430068969727,8.758011117577553 " id="polygon1"/><path stroke="[color]" fill="none" stroke-width="5" stroke-linecap="round" d="m38.514675,38.915891c1.649827,-2.647934 2.618855,-5.763704 2.618855,-9.111253c0,-3.402287 -0.995541,-6.563387 -2.691553,-9.236979" id="path1"/><path stroke="[color]" fill="none" stroke-width="5" stroke-linecap="round" d="m44.462263,14.546517c3.160244,4.264405 5.032443,9.542312 5.032443,15.258121c0,5.662781 -1.839698,10.894503 -4.950336,15.137527" id="path2"/><path stroke="[color]" fill="none" stroke-width="5" stroke-linecap="round" d="m50.131031,50.531392c4.504738,-5.701269 7.199712,-12.897559 7.199712,-20.725899c0,-7.883077 -2.73004,-15.122987 -7.286095,-20.841361" id="path1"/></g></svg>',
        HORN2: '<svg width="100%" height="100%" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"><g stroke="null"><polygon stroke="[color]" stroke-width="5" stroke-linejoin="round" fill="[color]" points="31.404865264892578,8.694420248270035 16.51249885559082,21.57529106736183 2.417943000793457,21.57529106736183 2.417943000793457,38.151018530130386 16.298933029174805,38.151018530130386 31.404865264892578,51.21766510605812 31.404865264892578,8.694420248270035 " id="polygon1"/><path stroke="[color]" fill="none" stroke-width="5" stroke-linecap="round" d="m39.446436,40.382762l18.0086,-21.095052" id="path3003"/><path stroke="[color]" fill="none" stroke-width="5" stroke-linecap="round" d="m57.455037,40.382762l-18.0086,-21.095052" id="path3003-1"/></g></svg>',
        EXPAND: '<svg width="100%" height="100%" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"><path fill="[color]" stroke="null" d="m8.574109,38.583491l-8.574109,0l0,21.435273l21.435273,0l0,-8.574109l-12.861164,0l0,-12.861164zm-8.574109,-17.148218l8.574109,0l0,-12.861164l12.861164,0l0,-8.574109l-21.435273,0l0,21.435273zm51.444654,30.009382l-12.861164,0l0,8.574109l21.435273,0l0,-21.435273l-8.574109,0l0,12.861164zm-12.861164,-51.444654l0,8.574109l12.861164,0l0,12.861164l8.574109,0l0,-21.435273l-21.435273,0z"/></svg>',
        NARROW: '<svg width="100%" height="100%" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"><path fill="[color]" stroke="null" d="m0,47.185865l12.868873,0l0,12.868873l8.579247,0l0,-21.44812l-21.44812,0l0,8.579247zm12.868873,-34.316992l-12.868873,0l0,8.579247l21.44812,0l0,-21.44812l-8.579247,0l0,12.868873zm25.737745,47.185865l8.579247,0l0,-12.868873l12.868873,0l0,-8.579247l-21.44812,0l0,21.44812zm8.579247,-47.185865l0,-12.868873l-8.579247,0l0,21.44812l21.44812,0l0,-8.579247l-12.868873,0z"/></svg>'
    };

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //                                                                                                                    //
    //                                                  ASCPanelButton                                                    //
    //                                                                                                                    //
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    function ASCPanelButton (panel, id, restore, width, height, iconWidth, iconHeight, corner, icons, handlers) {

        this.panel = panel;
        this.id = id;
        this.restore = restore;

        this.__x = this.__y = 0;
        this.__width = width;
        this.__height = height;
        this.__iconWidth = iconWidth;
        this.__iconHeight = iconHeight;
        this.__corner = corner;
        this.__icons = icons || [];
        this.__handlers = handlers || {};

        for (var f in this.__handlers) {
            if (typeof this.__handlers[f] === 'function') {
                this.__handlers[f] = this.__handlers[f].bind(this);
            }
        }

        this.body = createRoundDiv(this.__width, this.__height, this.__corner);
        this.__iconsBody = createDiv(this.__iconWidth, this.__iconHeight, (this.__width - this.__iconWidth)/ 2, (this.__height - this.__iconHeight) / 2);
        this.body.appendChild(this.__iconsBody);

        for (var i = 0, len = this.__icons.length; i < len; ++i) {
            this.__iconsBody.appendChild(this.__icons[i]);
        }

        if (!isMobile()) {
            addCursor(this.body, 'pointer');
        }

        return this;

    }

    Object.defineProperty(ASCPanelButton.prototype, 'click', {
        value: function () {
            if (typeof this.__handlers.click === 'function') {
                this.__handlers.click();
            }
        }
    });

    Object.defineProperty(ASCPanelButton.prototype, 'state', {
        get: function () {
            if (typeof this.__handlers.get === 'function') {
                this.__state = this.__handlers.get();
            }
            return this.__state;
        },
        set: function (state) {
            if (state < 0) {
                state = this.__icons.length-1;
            }
            if (state > this.__icons.length-1) {
                state = 0;
            }
            this.__state = state;
            if (typeof this.__handlers.set === 'function') {
                this.__handlers.set(this.__state);
            }
            this.__updateIcon();
        }
    });

    Object.defineProperty(ASCPanelButton.prototype, 'x', {
        get: function () {
            return this.__x;
        },
        set: function (v) {
            this.__x = v;
            setMargin(this.body, this.__x, this.__y);
        }
    });

    Object.defineProperty(ASCPanelButton.prototype, 'y', {
        get: function () {
            return this.__y;
        },
        set: function (v) {
            this.__y = v;
            setMargin(this.body, this.__x, this.__y);
        }
    });

    Object.defineProperty(ASCPanelButton.prototype, 'close', {
        value: function (a) {
            if (!this.panel || typeof this.panel.close !== 'function') {
                return;
            }
            this.panel.close(a);
        }
    });

    Object.defineProperty(ASCPanelButton.prototype, 'mouseHandler', {
        get: function () {
            return this.__mouseHandler;
        },
        set: function (h) {
            if (isMobile()) {
                this.body.addEventListener('touchstart', h);
                this.body.addEventListener('touchend', h);
                this.body.addEventListener('touchcancel', h);
                this.body.addEventListener('mousedown', preventDefault);
                this.body.addEventListener('mousemove', preventDefault);
            } else {
                this.body.addEventListener('mousedown', h);
                this.body.addEventListener('mouseup', h);
            }
            this.__mouseHandler = h;
        }
    });

    Object.defineProperty(ASCPanelButton.prototype, 'expandTopLeft', {
        value: function (top, left) {
            var div = createDiv(this.__width + left, this.__height + top, -left, -top);
            this.body.appendChild(div);
        }
    });

    Object.defineProperty(ASCPanelButton.prototype, '__updateIcon', {
        value: function () {
            var children = this.__iconsBody.children || [];
            for (var i = 0, len = children.length; i < len; ++i) {
                var c = children[i];
                if (i === this.state) {
                    c.style.visibility = 'inherit';
                    continue;
                }
                c.style.visibility = 'hidden';
            }
        }
    });

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //                                                                                                                    //
    //                                                      ASCPanel                                                      //
    //                                                                                                                    //
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    function ASCPanel (options) {

        var config = {
            size: {
                panel: {
                    width: 150,
                    height: 150,
                    corner: 5
                },
                icon: {
                    width: 60,
                    height: 60
                }
            },
            margin: {
                panel: {
                    x: 12,
                    y: 12
                }
            },
            color: {
                main: 'white',
                icon: 0x595959,
                buttonSelect: 0xe6e6e6,
                shadowToggle: 'black',
                shadowPanel: 'rgba(0,0,0,0.5)'
            },
            time: {
                panelShow: 200,
                buttonsShow: 100,
                buttonsSelect: 100,
                updateInterval: 100
            }
        };

        if (typeof options.config === 'object') {
            iterate(config, options.config);

            function iterate (t, f) {
                for (var p in t) {
                    if (typeof t[p] === 'object' && typeof f[p] === 'object' && f[p] !== null) {
                        iterate(t[p], f[p]);
                        continue;
                    }
                    if (typeof f[p] !== 'undefined') {
                        t[p] = f[p];
                    }
                }
            }
        }

        this.__align = options.align;
        this.__layoutViewport = { width: 1920, height: 1080 };
        this.__viewport = { x: 0, y: 0, width: 0, height: 0 };
        this.__config = config;
        this.__width = 0;
        this.__height = this.__config.size.panel.height;
        this.__collection = {};
        this.__collection.sound = new ASCPanelButton(
            this, 'sound', true,
            this.__config.size.panel.width, this.__config.size.panel.height,
            this.__config.size.icon.width, this.__config.size.icon.height,
            this.__config.size.panel.corner,
            [
                createSvg(setSVGColor(SVG.HORN, this.__config.color.icon)),
                createSvg(setSVGColor(SVG.HORN2, this.__config.color.icon))
            ],
            {
                click: function () {
                    this.state++;
                },
                get: function () {
                    if (window.flash && flash.media && typeof flash.media.SoundMixer === 'function') {
                        return flash.media.SoundMixer.__muted ? 1 : 0;
                    }
                    return 0;
                },
                set: function () {
                    if (window.flash && flash.media && typeof flash.media.SoundMixer === 'function') {
                        switch (this.__state) {
                            case 0:
                                if (!flash.media.SoundMixer.__muted) {
                                    return;
                                }
                                break;
                            case 1:
                                if (flash.media.SoundMixer.__muted) {
                                    return;
                                }
                                break;
                        }
                        flash.media.SoundMixer.__setMute(this.__state === 1);
                    }
                }
            }
        );

        this.__collection.displayState = new ASCPanelButton(
            this, 'displayState', false,
            this.__config.size.panel.width, this.__config.size.panel.height,
            this.__config.size.icon.width, this.__config.size.icon.height,
            this.__config.size.panel.corner,
            [
                createSvg(setSVGColor(SVG.EXPAND, this.__config.color.icon)),
                createSvg(setSVGColor(SVG.NARROW, this.__config.color.icon))
            ],
            {
                click: function () {
                    this.state++;
                },
                get: function () {
                    if (window.flash && flash.display && typeof flash.display.Stage === 'function' && typeof flash.display.Stage.sCurrent === 'object') {
                        return flash.display.Stage.sCurrent.displayState === 'fullScreen' ? 1 : 0;
                    }
                    return 0;
                },
                set: function () {
                    if (window.flash && flash.display && typeof flash.display.Stage === 'function' && typeof flash.display.Stage.sCurrent === 'object') {
                        switch (this.__state) {
                            case 0:
                                if (flash.display.Stage.sCurrent.displayState === 'normal') {
                                    return;
                                }
                                break;
                            case 1:
                                if (flash.display.Stage.sCurrent.displayState === 'fullScreen') {
                                    return;
                                }
                                break;
                        }
                        flash.display.Stage.sCurrent.displayState = this.__state === 1 ? 'fullScreen' : 'normal';
                        this.close(false);
                    }
                }
            }
        );

        this.body = createDiv();
        this.body.style.zIndex = typeof options.zIndex !== 'undefined' ? options.zIndex : 64;
        this.body.appendChild(this.__toggle = createToggle(this.__config.color.main, this.__config.color.shadowToggle));
        this.body.addEventListener('contextmenu', preventDefault);

        if (!isMobile()) {
            addCursor(this.__toggle, 'pointer');
        }

        this.body.appendChild(this.__panel = createRoundDiv(this.__width, this.__height, this.__config.size.panel.corner));
        setBackground(this.__panel, this.__config.color.main);
        setMargin(this.__panel, this.__config.margin.panel.x, this.__config.margin.panel.y);
        addShadow(this.__panel, 0, 0, 30, this.__config.color.shadowPanel);

        this.__buttons = [];
        if (typeof options === 'object') {
            if (typeof options.buttons === 'object') {
                var x = 0;
                for (var i = 0, len = options.buttons.length; i < len; ++i) {
                    var id = options.buttons[i];
                    if (typeof id !== 'string' || !this.__collection[id]) {
                        continue;
                    }
                    var b = this.__collection[id];
                    b.state = 0;
                    b.x = x;
                    b.mouseHandler = this.__onButtonMouse.bind(this);
                    b.expandTopLeft(this.__config.margin.panel.x, this.__config.margin.panel.y);
                    b.body.style.willChange = 'opacity, background-color';
                    this.__panel.appendChild(b.body);
                    x += config.size.panel.width;
                    this.__width += this.__config.size.panel.width;
                    this.__buttons.push(b);
                }
            }
        }

        if (isMobile()) {
            h = this.__onToggleMouseDown.bind(this);
            this.__toggle.addEventListener('touchstart', h);

            h = this.__onWindowMouseUp.bind(this);
            window.addEventListener('touchend', h);
            window.addEventListener('touchcancel', h);
            this.__toggle.addEventListener('mousedown', preventDefault);
            this.__toggle.addEventListener('mousemove', preventDefault);
        } else {
            h = this.__onToggleMouseDown.bind(this);
            this.__toggle.addEventListener('mousedown', h);

            h = this.__onWindowMouseUp.bind(this);
            window.addEventListener('mouseup', h);
        }

        this.__panel.style.willChange = 'width, height';
        this.__panel.addEventListener('transitionend', this.__onTransitionEnd.bind(this));

        this.__updateTransform();
        
        this.__load();
        this.__update();

        this.close(false);
        setInterval(this.__update.bind(this), this.__config.time.updateInterval);

        return this;

    }

    Object.defineProperty(ASCPanel.prototype, 'align', {
        get: function () {
            return this.__align;
        },
        set: function (v) {
            this.__align = v;
            this.__updateTransform();
        }
    });

    Object.defineProperty(ASCPanel.prototype, 'visible', {
        get: function () {
            return this.__visible;
        },
        set: function (v) {
            this.body.style.visibility = (this.__visible = v) ? 'visible' : 'hidden';
        }
    });

    Object.defineProperty(ASCPanel.prototype, 'open', {
        value: function (a) {
            this.__showed = true;
            if (typeof a === 'undefined' || a === true) {
                this.__transition = true;
                this.__panel.style.transition = 'width ' + this.__config.time.panelShow + 'ms, height ' + this.__config.time.panelShow + 'ms';
                this.__panel.style.transitionDelay = '0ms';
            } else {
                this.__transition = false;
                this.__panel.style.transition = '';
            }
            this.__panel.style.visibility = 'visible';
            this.__panel.style.width = this.__width + 'px';
            this.__panel.style.height = this.__height + 'px';
            this.__showButtons(a);
        }
    });

    Object.defineProperty(ASCPanel.prototype, 'close', {
        value: function (a) {
            this.__showed = false;
            if (typeof a === 'undefined' || a === true) {
                this.__transition = true;
                this.__panel.style.transition = 'width ' + this.__config.time.panelShow + 'ms, height ' + this.__config.time.panelShow + 'ms';
                this.__panel.style.transitionDelay = this.__config.time.buttonsShow + 'ms';
            } else {
                this.__transition = false;
                this.__panel.style.visibility = 'hidden';
            }
            this.__panel.style.width = 0 + 'px';
            this.__panel.style.height = 0 + 'px';
            this.__hideButtons(a);
        }
    });

    Object.defineProperty(ASCPanel.prototype, 'setViewport', {
        value: function (x, y, w, h) {
            this.__viewport.x = (+x)|0;
            this.__viewport.y = (+y)|0;
            this.__viewport.width = (+w)|0;
            this.__viewport.height = (+h)|0;
            this.__updateTransform();
        }
    });

    Object.defineProperty(ASCPanel.prototype, 'getSavedState', {
        value: function (id) {
            if (!this.__so) {
                return 0;
            }
            return this.__so.data[id];
        }
    });

    Object.defineProperty(ASCPanel.prototype, '__showButtons', {
        value: function (a) {
            for (var i = 0, len = this.__buttons.length; i < len; ++i) {
                var b = this.__buttons[i];
                if (typeof a === 'undefined' || a === true) {
                    b.body.style.transition = 'opacity ' + this.__config.time.buttonsShow + 'ms, background-color ' + this.__config.time.buttonsSelect + 'ms';
                    b.body.style.transitionDelay = this.__config.time.panelShow + 'ms';
                } else {
                    b.body.style.transition = '';
                }
                b.body.style.opacity = '1.0';
                if (!isMobile()) {
                    b.body.style.pointerEvents = 'auto';
                }
                b.body.style.visibility = 'visible';
            }
        }
    });

    Object.defineProperty(ASCPanel.prototype, '__hideButtons', {
        value: function (a) {
            for (var i = 0, len = this.__buttons.length; i < len; ++i) {
                var b = this.__buttons[i];
                if (typeof a === 'undefined' || a === true) {
                    b.body.style.transition = 'opacity ' + this.__config.time.buttonsShow + 'ms, background-color ' + this.__config.time.buttonsSelect + 'ms';
                    b.body.style.transitionDelay = '0ms';
                } else {
                    b.body.style.transition = '';
                    b.body.style.visibility = 'hidden';
                }
                b.body.style.opacity = '0.0';
                if (!isMobile()) {
                    b.body.style.pointerEvents = 'none';
                }
                setBackground(b.body, this.__config.color.main);
            }
        }
    });

    Object.defineProperty(ASCPanel.prototype, '__load', {
        value: function () {
            if (window.flash && flash.net && flash.net.SharedObject) {
                var so = flash.net.SharedObject.getLocal('asc.panel-data');
                if (!so || !so.data) {
                    return;
                }
                this.__so = so;
                for (var i = 0, len = this.__buttons.length; i < len; ++i) {
                    var b = this.__buttons[i];
                    if (!b || !b.restore) {
                        continue;
                    }
                    b.state = this.__so.data[b.id];
                }
            }
        }
    });

    Object.defineProperty(ASCPanel.prototype, '__save', {
        value: function () {
            if (!this.__so) {
                return;
            }
            for (var i = 0, len = this.__buttons.length; i < len; ++i) {
                var b = this.__buttons[i];
                if (!b) {
                    continue;
                }
                this.__so.data[b.id] = b.state;
            }
            try {
                this.__so.flush();
            } catch (e) {
                // something goes wrong
            }
        }
    });

    Object.defineProperty(ASCPanel.prototype, '__update', {
        value: function (c) {
            for (var i = 0, len = this.__buttons.length; i < len; ++i) {
                var b = this.__buttons[i];
                if (!b) {
                    continue;
                }
                b.state = b.state;
            }
        }
    });

    Object.defineProperty(ASCPanel.prototype, '__onToggleMouseDown', {
        value: function (e) {
            preventDefault(e);

            if (this.__showed) {
                this.close();
            } else {
                this.open();
            }
        }
    });

    Object.defineProperty(ASCPanel.prototype, '__onWindowMouseUp', {
        value: function  (e) {
            if (this.__transition) {
                return;
            }

            if (this.body.contains(e.target)) {
                return;
            }

            this.close();
        }
    });

    Object.defineProperty(ASCPanel.prototype, '__onButtonMouse', {
        value: function (e) {
            preventDefault(e);

            if (!this.__showed || this.__transition) {
                return;
            }

            var b, body;
            for (var i = 0, len = this.__buttons.length; i < len; ++i) {
                b = this.__buttons[i];
                if (b.body.contains(e.target)) {
                    div = b.body;
                    break;
                }
            }

            if (!div) {
                return;
            }

            switch (e.type) {
                case 'mousedown':
                case 'touchstart':
                    div.style.transitionDelay = '0ms';
                    setBackground(div, this.__config.color.buttonSelect);
                    break;
                case 'mouseup':
                case 'touchend':
                case 'touchcancel':
                    div.style.transitionDelay = '0ms';
                    setBackground(div, this.__config.color.main);
                    b.click();
                    this.__save();
                    break;
            }
        }
    });

    Object.defineProperty(ASCPanel.prototype, '__onTransitionEnd', {
        value: function (e) {
            switch (e.propertyName) {
                case 'width':
                case 'height':
                    this.__panel.style.visibility = this.__showed ? 'visible' : 'hidden';
                    if (!this.__showed) {
                        this.__transition = false;
                    }
                    break;
                case 'opacity':
                    for (var i = 0, len = this.__buttons.length; i < len; ++i) {
                        var b = this.__buttons[i];
                        b.body.style.visibility = this.__showed ? 'visible' : 'hidden';
                    }
                    if (this.__showed) {
                        this.__transition = false;
                    }
                    break;
            }
        }
    });

    Object.defineProperty(ASCPanel.prototype, '__updateTransform', {
        value: function () {
            var viewport = this.__viewport;
            var ratio = window.devicePixelRatio > 0 ? window.devicePixelRatio : 1;
            var scale = 1 / ratio;
            var width = viewport.width * ratio;

            if (width > 0 && width !== this.__layoutViewport.width) {
                scale *= width / this.__layoutViewport.width;
            }

            if (this.__align === 'right') {
                this.body.style.transform = 'scale(-' + scale + ', ' + scale + ')';
                setMargin(this.body, viewport.x + viewport.width, viewport.y);
            } else {
                this.body.style.transform = 'scale(' + scale + ', ' + scale + ')';
                setMargin(this.body, viewport.x, viewport.y);
            }

            for (var i = 0, len = this.__buttons.length; i < len; ++i) {
                var b = this.__buttons[i];
                b.body.style.transform = this.__align === 'right' ? 'scale(-1.0, 1.0)' : '';
            }
        }
    });

    function createDiv (w, h, x, y) {
        var div = document.createElement('div');
        div.style.position = 'absolute';
        if (typeof w === 'number') {
            div.style.width = w + 'px';
        } else if (typeof w === 'string') {
            div.style.width = w;
        }
        if (typeof h === 'number') {
            div.style.height = h + 'px';
        } else if (typeof h === 'string') {
            div.style.height = h;
        }
        setMargin(div, x, y);
        return div;
    }

    function createRoundDiv (w, h, r, x, y) {
        var div = createDiv(w, h);
        div.style.borderRadius = r + 'px';
        setMargin(div, x, y);
        return div;
    }

    function createToggle (color, shadowColor) {
        var width = 90;
        var height = 144;

        var dotSize = 14;
        var dotIndent = 20;
        var dotCorner = 7;
        var shadowSize = 6;

        var x = 40;
        var y = 36;

        var toggle = createDiv(width, height);
        var d1 = toggle.appendChild(createRoundDiv(dotSize, dotSize, dotCorner, x, y));
        var d2 = toggle.appendChild(createRoundDiv(dotSize, dotSize, dotCorner, x, y += dotIndent));
        var d3 = toggle.appendChild(createRoundDiv(dotSize, dotSize, dotCorner, x, y += dotIndent));

        addShadow(setBackground(d1, color), 0, 0, shadowSize, shadowColor);
        addShadow(setBackground(d2, color), 0, 0, shadowSize, shadowColor);
        addShadow(setBackground(d3, color), 0, 0, shadowSize, shadowColor);

        return toggle;
    }

    function setSVGColor (text, color) {
        if (typeof color === 'number') {
            color = '#' + color.toString(16);
        }
        return text.replace(/\[color\]/g, color);
    }

    function createSvg (text) {
        var div = document.createElement('div');
        div.innerHTML = text;
        var s = div.firstChild;
        s.style.position = 'absolute';
        return s;
    }

    function setBackground (div, color) {
        if (typeof color === 'number') {
            div.style.backgroundColor = '#' + color.toString(16);
        } else if (typeof color === 'string') {
            div.style.backgroundColor = color;
        }
        return div;
    }

    function setMargin (div, x, y) {
        if (typeof x === 'number') {
            div.style.marginLeft = x + 'px';
        } else if (typeof x === 'string') {
            div.style.marginLeft = x;
        }
        if (typeof y === 'number') {
            div.style.marginTop = y + 'px';
        } else if (typeof y === 'string') {
            div.style.marginTop = y;
        }
        return div;
    }

    function addShadow (div, x, y, blur, color) {
        if (typeof x === 'number') x = (x|0) + 'px';
        if (typeof y === 'number') y = (y|0) + 'px';
        if (typeof blur === 'number') blur = (blur|0) + 'px';
        if (typeof color === 'number') color = '#' + color.toString(16);
        div.style.boxShadow = x + ' ' + y + ' ' + blur + ' ' + color;
        return div;
    }

    function addCursor (div, cursor) {
        div.style.cursor = cursor;
        return div;
    }

    function isMobile () {
        if (system.Capabilities) {
            return system.Capabilities.mobile;
        }
        return false;
    }

    function preventDefault (e) {
        if (e && typeof e.preventDefault === 'function') {
            e.preventDefault();
        }
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //                                                                                                                    //
    //                                                       Attach                                                       //
    //                                                                                                                    //
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    panel.ASCPanelButton = ASCPanelButton;
    panel.ASCPanel = ASCPanel;

})();
﻿(function () {
	// this
    var _this = window.asc || (window.asc = {});

    // system
    var system = _this.system || (_this.system = {});

    // menu
    var menu = _this.menu || (_this.menu = {});

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //                                                                                                                    //
    //                                                    ContextMenu                                                     //
    //                                                                                                                    //
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    function ContextMenu () {

        this.__body = createDiv();
        this.__body.style.zIndex = 128;
        this.__body.style.minWidth = 250;
        this.__body.style.flexDirection = 'column';
        this.__body.style.display = 'flex';
        this.__body.style.position = 'absolute';
        this.__body.style.paddingTop = '2px';
        this.__body.style.paddingBottom = '2px';
        this.__body.style.transformOrigin = 'left top';
        this.__body.style.font = '9pt ' + getSystemFont();

        this.__body.addEventListener('touchstart', preventDefault);
        this.__body.addEventListener('touchend', preventDefault);
        this.__body.addEventListener('touchcancel', preventDefault);
        this.__body.addEventListener('mousedown', preventDefault);
        this.__body.addEventListener('mousemove', preventDefault);

        setBackground(this.__body, 'white');
        addShadow(this.__body, 2, 2, 3, 'rgba(0,0,0,0.56)');
        addBorder(this.__body, 1, 0xbababa);

        this.__initHitArea = [];

        return this;
    }

    Object.defineProperty(ContextMenu.prototype, 'open', {
        value: function (parent, items, x, y) {
            this.close();

            if (!parent || !items || !items.length) {
                return;
            }

            this.__clear();
            this.__build(items);
            (this.__parent = parent).appendChild(this.__body);

            this.__x = x|0;
            this.__y = y|0;

            this.__resize(true);
            this.__resizeInterval = setInterval(this.__resize.bind(this), 100);

            this.__autoHideHandler = function (e) {
                if (e && this.__body.contains(e.target)) {
                    return;
                }
                this.close();
            }.bind(this);
            document.addEventListener("mouseup", this.__autoHideHandler);
            document.addEventListener("touchend", this.__autoHideHandler);
            document.addEventListener("touchcancel", this.__autoHideHandler);

            this.__opened = true;
        }
    });

    Object.defineProperty(ContextMenu.prototype, 'close', {
        value: function () {
            if (this.__body.parentElement) {
                this.__body.parentElement.removeChild(this.__body);
            }

            clearInterval(this.__resizeInterval);

            document.removeEventListener("mouseup", this.__autoHideHandler);
            document.removeEventListener("touchend", this.__autoHideHandler);
            document.removeEventListener("touchcancel", this.__autoHideHandler);

            this.__opened = false;
        }
    });

    Object.defineProperty(ContextMenu.prototype, 'opened', {
        get: function () {
            return this.__opened;
        }
    });

    Object.defineProperty(ContextMenu.prototype, '__build', {
        value: function (items) {
            for (var i = 0, len = items.length; i < len; ++i) {
                var o = items[i];
                if (o.separatorBefore) {
                    this.__body.appendChild(createLine());
                }
                this.__body.appendChild(this.__createRow(o));
            }
        }
    });

    Object.defineProperty(ContextMenu.prototype, '__clear', {
        value: function () {
            this.__body.innerHTML = '';
            this.__initHitArea.length = 0;
        }
    });

    Object.defineProperty(ContextMenu.prototype, '__resize', {
        value: function (force) {
            while (this.__initHitArea.length) {
                var select = this.__initHitArea.pop();
                select.style.height = (select.parentElement.clientHeight) + 'px';
            }

            var ratio = window.devicePixelRatio > 0 ? window.devicePixelRatio : 1;
            var width = this.__parent.clientWidth;
            var height = this.__parent.clientHeight;
            if (!force) {
                if (ratio === this.__ratio && width === this.__width && height === this.__height) {
                    return;
                }
            }

            var x = Math.min(Math.max(this.__x, 0), (width * ratio) - (this.__body.clientWidth + 12));
            var y = Math.min(Math.max(this.__y, 0), (height * ratio) - (this.__body.clientHeight + 12));
            this.__body.style.left = (x / ratio) + 'px';
            this.__body.style.top = (y / ratio) + 'px';

            var scale = 1 / ratio;
            this.__body.style.transform = 'scale(' + scale + ',' + scale + ')';

            this.__ratio = ratio;
            this.__width = width;
            this.__height = height;
        }
    });

    Object.defineProperty(ContextMenu.prototype, '__createRow', {
        value: function (o) {
            var div = createDiv();
            div.style.marginLeft = '26px';
            div.style.marginRight = '26px';
            div.style.paddingTop = '4px';
            div.style.paddingBottom = '4px';
            if (!o.enabled) {
                div.style.color = '#a1a192';
            }
            if (!o.visible) {
                div.style.visibility = 'hidden';
            }

            var spt = (o.caption || '').split('\t');
            var left = createDiv();
            left.style.float = 'left';
            left.innerHTML = spt[0];

            var right = createDiv();
            right.style.float = 'right';
            right.style.textAlign = 'right';
            right.style.color = '#a1a192';
            if (spt.length > 1) {
                right.innerHTML = spt[spt.length-1];
                right.style.marginLeft = '26px';
            }

            div.appendChild(left);
            div.appendChild(right);

            var select = createDiv('100%', 0);
            select.style.backgroundColor = '#ebebeb';
            select.style.position = 'absolute';
            select.style.marginLeft = '-26px';
            select.style.marginTop = '-4px';
            select.style.opacity = 0;
            select.style.zIndex = -1;
            div.appendChild(select);

            var h = function (e) {
                preventDefault(e);

                var isSelect = o.enabled && o.visible;
                var isClick = false;
                switch (e.type) {
                    case 'mouseleave':
                        isSelect = false;
                        break;
                    case 'mouseup':
                    case 'touchend':
                        isClick = isSelect;
                        break;
                }

                select.style.opacity = isSelect ? 1 : 0;
                right.style.color = isSelect ? 'inherit' : '#a1a192';

                if (isClick) {
                    this.close();
                    if (typeof o.click === 'function') {
                        o.click();
                    }
                }

            }.bind(this);

            if (isMobile()) {
                div.addEventListener('touchstart', h);
                div.addEventListener('touchend', h);
                div.addEventListener('touchcancel', h);
            } else {
                div.addEventListener('mouseenter', h);
                div.addEventListener('mouseleave', h);
                div.addEventListener('mouseup', h);
            }

            this.__initHitArea.push(select);
            return addCursor(div, 'default');
        }
    });

    function createDiv (w, h, x, y) {
        var div = document.createElement('div');
        if (typeof w === 'number') {
            div.style.width = w + 'px';
        } else if (typeof w === 'string') {
            div.style.width = w;
        }
        if (typeof h === 'number') {
            div.style.height = h + 'px';
        } else if (typeof h === 'string') {
            div.style.height = h;
        }
        setMargin(div, x, y);
        return div;
    }

    function createRoundDiv (w, h, r, x, y) {
        var div = createDiv(w, h);
        div.style.borderRadius = r + 'px';
        setMargin(div, x, y);
        return div;
    }

    function createLine () {
        var hr = document.createElement('hr');
        hr.setAttribute('noshade', true);
        hr.style.borderColor = '#e9e9e9';
        hr.style.borderTop = '#e9e9e9';
        hr.style.marginLeft = '2px';
        hr.style.marginRight = '2px';
        return hr;
    }

    function setBackground (div, color) {
        if (typeof color === 'number') {
            div.style.backgroundColor = '#' + color.toString(16);
        } else if (typeof color === 'string') {
            div.style.backgroundColor = color;
        }
        return div;
    }

    function setMargin (div, x, y) {
        if (typeof x === 'number') {
            div.style.marginLeft = x + 'px';
        } else if (typeof x === 'string') {
            div.style.marginLeft = x;
        }
        if (typeof y === 'number') {
            div.style.marginTop = y + 'px';
        } else if (typeof y === 'string') {
            div.style.marginTop = y;
        }
        return div;
    }

    function addShadow (div, x, y, blur, color) {
        if (typeof x === 'number') x = (x|0) + 'px';
        if (typeof y === 'number') y = (y|0) + 'px';
        if (typeof blur === 'number') blur = (blur|0) + 'px';
        if (typeof color === 'number') color = '#' + color.toString(16);
        div.style.boxShadow = x + ' ' + y + ' ' + blur + ' ' + color;
        return div;
    }

    function addBorder (div, size, color) {
        if (typeof size === 'number') size = (size|0) + 'px';
        if (typeof color === 'number') color = '#' + color.toString(16);
        div.style.border = size + ' solid ' + color;
        return div;
    }

    function addCursor (div, cursor) {
        div.style.cursor = cursor;
        return div;
    }

    function isMobile () {
        if (system.Capabilities) {
            return system.Capabilities.mobile;
        }
        return false;
    }

    function getSystemFont () {
        if (system.Capabilities) {
            return system.Capabilities.font;
        }
        return 'Arial';
    }

    function preventDefault (e) {
        if (e && typeof e.preventDefault === 'function') {
            e.preventDefault();
        }
        if (e && typeof e.stopImmediatePropagation === 'function') {
            e.stopImmediatePropagation();
        }
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //                                                                                                                    //
    //                                                       Attach                                                       //
    //                                                                                                                    //
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    menu.ContextMenu = ContextMenu;

})();
﻿// typescript
var __extends = (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
        Object.defineProperty(d, '__extends', {
            enumerable: false,
            configurable: false,
            value: b
        });
    };
})();

(function () {

    // this
    var _this = window.asc || (window.asc = {});

    // vanilla
    var vanilla = _this.vanilla || (_this.vanilla = {});

    // base
    var base = _this.base || (_this.base = {});

    // error
    errorUtils();

    // viewport
    configureViewport();

    // create tool
    constructTool();

    // extend JavaScript
    javaScriptProto();

    // extend ActionScript
    actionScriptProto();

    // export this
    _this.in = In;
    _this.of = of;
    _this.sti = sti;
    _this.stb = stb;
    _this.e2e = e2e;
    _this.provide = provide;
    _this.kernel$ = kernel$;
    _this.font$ = font$;
    _this.embed$ = embed$;
    _this.getMimeType = getMimeType;
    _this.getMeta = getMeta;
    _this.getCtx = getCtx;
    _this.getCanvas = getCanvas;
    _this.getLocalStorage = getLocalStorage;
    _this.createRoot = createRoot;
    _this.getErrorHTMLText = getErrorHTMLText;

    // export as3
    window.is = is;
    window.as = as;
    window.strict = strict;
    window.int = int;
    window.uint = uint;
    window.unbind = unbind;
    window.trace = traceLater;

    // viewport
    function configureViewport (content) {
        if (typeof content !== 'string') {
            content = 'width=device-width, height=device-height, initial-scale=1, user-scalable=no, viewport-fit=cover, minimal-ui';
        }

        var head = document.getElementsByTagName('head'), m;
        if (!head || !(head = head[0])) {
            return;
        }

        // all
        m = document.createElement('meta');
        m.setAttribute('name', 'viewport');
        m.setAttribute('content', content);
        head.appendChild(m);

        m = document.createElement('meta');
        m.setAttribute('name', 'full-screen');
        m.setAttribute('content', 'yes');
        head.appendChild(m);

        // apple
        m = document.createElement('meta');
        m.setAttribute('name', 'apple-mobile-web-app-capable');
        m.setAttribute('content', 'yes');
        head.appendChild(m);

        m = document.createElement('meta');
        m.setAttribute('name', 'apple-mobile-web-app-status-bar-style');
        m.setAttribute('content', 'black-translucent');
        head.appendChild(m);
    }

    // title
    function configureTitle (content) {
        if (typeof content !== 'string') {
            return;
        }

        var head = document.getElementsByTagName('head'), m;
        if (!head || !(head = head[0])) {
            return;
        }

        m = document.createElement('meta');
        m.setAttribute('name', 'apple-mobile-web-app-title');
        m.setAttribute('content', content);
        head.appendChild(m);
    }

    // setup
    function provide(type, name, h) {
        base.provide.length = 0;
        if (!Array.isArray(name)) {
            name = [ name ];
        }
        var l = name.length;
        for (var i = 0; i < l; ++i) {
            one(name[i]);
        }
        if (_this.release === true) {
            if (typeof _this.include === 'object') {
                var st = base.init.state;
                base.init.state = 'initialize_load';
                try {
                    window.eval(decodeURI(atob(_this.include[type])));
                } catch (e) {
                    throwError(e);
                    return;
                }
                delete _this.include[type];
                base.init.state = st;
            }
        }
        initialize(h);

        function one (name) {
            var s = name.split('.'), c = s.pop(), p = s.join('.'), t = 'window';
            var l = s.length;
            for (var i = 0; i < l; ++i) if (!eval(t += '.' + s[i])) eval(t + '={}');
            base.provide.push(name);
            if (base.package.indexOf(p = eval(p)) === -1) {
                base.package.push(p);
            }
            if (s[0] === 'global') s.shift();
            var cn = (s.length ? s.join('.') + '::' : '') + c;
            Object.defineProperty(p, c, {
                enumerable: true,
                configurable: true,
                get: function () {
                    var st = base.init.state;
                    if (st === 'initialize_load' || st === 'initialize_idle') {
                        return {
                            __provide__: name
                        };
                    }
                    return undefined;
                },
                set: function (v) {
                    // prepare class
                    if (!Object.getOwnPropertyDescriptor(v, '__className')) {
                        // avmplus.getQualifiedClassName
                        Object.defineProperty(v, '__className', {
                            enumerable: false,
                            configurable: false,
                            value: cn
                        });

                        // accessors and methods
                        for (s in v.prototype) {
                            var pd = Object.getPropertyDescriptor(v.prototype, s);
                            if (pd === undefined) continue;
                            pd.enumerable = pd.configurable = false;
                            Object.defineProperty(v.prototype, s, pd);
                        }

                        // variables and constants
                        // ...
                    }

                    // cancel get / set
                    Object.defineProperty(p, c, {
                        enumerable: true,
                        configurable: true,
                        value: v
                    });
                }
            });
        }
    }

    // initialization
    function initialize(handler) {
        if (typeof base.init.error !== 'undefined') {
            trace('Initialization aborted');
            return;
        }
        base.init.async(initialize_resolve, function () {
            try {
                base.init.sync(initialize_imports);
                base.init.sync(initialize_validate);
                base.init.sync(initialize_static);
                base.init.complete();
                handler();
            } catch (e) {
                throwError(e);
            }
        })();
    }

    // check availability and load script if needed
    function initialize_resolve(h) {

        var list = [];
        var len = base.provide.length;
        for (var i = 0; i < len; ++i) {
            var v = base.provide[i], o;
            if ((o=eval(v)) && !o.__provide__) {
                continue;
            }
            if (_this.release === true) {
                continue;
            }
            list.push('./' + v.replace('global.', '').replace(/\./g, '/') + '.js');
        }
        base.init.async(initialize_load, h, list)();
    }

    // load scripts
    function initialize_load(h, list) {

        load();

        function load() {
            if (!list || !list.length) {
                onComplete();
                return;
            }
            var head = document.getElementsByTagName('head')[0];
            var script = document.createElement('script');
            script.addEventListener('load', load);
            script.addEventListener('error', throwError);
            script.type = 'text/javascript';
            script.src = list.shift();
            head.appendChild(script);
        }

        function onComplete () {
            if (typeof h === 'function') {
                h();
            }
        }
    }

    function initialize_validate() {
        var provide = base.provide;
        while (provide.length) {
            var c = provide.shift();
            var spt = c.split('.'), cn = spt.pop();
            if (spt[0] === 'global') spt.shift();
            c = (spt.length ? spt.join('.') + '::' : '') + cn;
            if (!flash.utils.getDefinitionByName(c)) {
                throw new Error(c + ' not loaded');
            }
        }
    }

    function initialize_imports() {
        var len = base.package.length;
        for (var i = 0; i < len; ++i) {
            var p = base.package[i];
            for (var c in p) {
                var d = p[c];
                if (d === undefined) {
                    continue;
                }
                if (!d.__provide__) {
                    continue;
                }
                var v = flash.utils.getDefinitionByName(d.__provide__);
                if (!v) {
                    continue;
                }
                p[c] = v;
            }
        }
    }

    function initialize_static () {
        var len = base.package.length;
        for (var i = 0; i < len; ++i) {
            var p = base.package[i];
            for (var c in p) {
                var v = p[c];
                if (v === undefined) {
                    continue;
                }
                if (!v.__className) {
                    continue;
                }
                (function (p, c, v) {
                    Object.defineProperty(p, c, {
                        enumerable: true,
                        configurable: true,
                        get: function () {
                            Object.defineProperty(p, c, {
                                enumerable: true,
                                configurable: true,
                                value: v
                            });
                            return st$(v);
                        }
                    });
                })(p, c, v);
            }
        }
    }

    function constructTool () {
        _this.startTime = Date.now();
        _this.cache = _this.cache || {};
        _this.compiler = {};
        Object.defineProperty(_this.compiler, 'arguments', {
            configurable: true,
            set: function (v) {
                if (v === null || typeof v !== 'object') {
                    v = {};
                }
                configureTitle(v.title);
                Object.defineProperty(_this.compiler, 'arguments', {
                    value: v
                });
            },
            get: function () {
                return {};
            }
        });

        vanilla.set = vanilla.set || function (f, v) {
            if (typeof f !== 'string') {
                return undefined;
            }
            vanilla[f] = window[f];
            window[f] = v;
            return vanilla[f];
        };
        vanilla.get = vanilla.get || function (f) {
            if (typeof f !== 'string') {
                return undefined;
            }
            return vanilla[f] || window[f];
        };

        // base
        base.provide = base.provide || [];
        base.package = base.package || [];
        base.classInfo = base.classInfo || {};
        base.init = base.init || {
            state: 'initialize_idle',
            complete: function () {
                window.trace = trace;
                base.init.debug.print();
                var queue = _this.cache.traceLater;
                while (queue && queue.length) {
                    trace.apply(null, queue.shift());
                }
                base.init.state = 'initialize_idle';
            },
            sync: function (t, p) {
                var s = base.init.state = t.name || 'anonymous';
                base.init.debug.temp[s] = new Date().time;
                t(p);
                base.init.debug.time[s] = base.init.debug.time[s] || 0;
                base.init.debug.time[s] += new Date().time - base.init.debug.temp[s];
            },
            async: function (t, h, p) {
                return function () {
                    var s = base.init.state = t.name || 'anonymous';
                    base.init.debug.temp[s] = new Date().time;
                    t(function () {
                        base.init.debug.time[s] = base.init.debug.time[s] || 0;
                        base.init.debug.time[s] += new Date().time - base.init.debug.temp[s];
                        if (typeof h === 'function') {
                            h();
                        }
                    }, p);
                };
            },
            debug: {
                temp: {},
                time: {},
                print: function () {
                    if (_this.release === true) {
                        return;
                    }
                    var s = '';
                    s += '----------------------------\n';
                    s += '            DEBUG\n';
                    s += '----------------------------\n';
                    for (var f in this.time) {
                        s += f + ': ' + this.time[f] + ' ms\n';
                    }
                    s += '----------------------------\n';
                    trace(s);
                }
            }
        };
        base.kernel = {
            db: {
                stage: {},
                utils: {}
            },
            init: function (h) {
                var IDBStorage;
                if (_this.storage && typeof (IDBStorage = _this.storage.IDBStorage) === 'function') {
                    if (IDBStorage.needToImplement() === true) {
                        base.kernel.db.utils.localStorage = new IDBStorage(h);
                        return;
                    }
                }
                _this.getCtx();
                h();
            }
        };
    }

    function javaScriptProto() {
        // super get/set
        if (!Object.getPropertyDescriptor) {
            Object__defineProperty(Object, 'getPropertyDescriptor', {
                enumerable: false,
                configurable: false,
                value: function (subject, name) {
                    var pd = Object.getOwnPropertyDescriptor(subject, name);
                    var proto = Object.getPrototypeOf(subject);
                    while (pd === undefined && proto !== null) {
                        pd = Object.getOwnPropertyDescriptor(proto, name);
                        proto = Object.getPrototypeOf(proto);
                    }
                    return pd;
                }
            });
        }
        if (!{}.super) {
            Object__defineProperty(Object.prototype, 'super', {
                enumerable: false,
                configurable: false,
                value: function (c, p, v) {
                    var __ = c + '_super_' + p, d = _this.cache[__];
                    if (typeof d !== 'object') {
                        d = _this.cache[__] = Object.getPropertyDescriptor(flash.utils.getDefinitionByName(c).prototype, p);
                    }
                    if (arguments.length === 2) return d.get.call(this);
                    else d.set.call(this, v);
                }
            });
        }

        // Array constants
        if (!Array.CASEINSENSITIVE || !Array.DESCENDING || !Array.UNIQUESORT || !Array.RETURNINDEXEDARRAY || !Array.NUMERIC) {
            Array.CASEINSENSITIVE = 1;
            Array.DESCENDING = 2;
            Array.UNIQUESORT = 4;
            Array.RETURNINDEXEDARRAY = 8;
            Array.NUMERIC = 16;
        }

        // Array.from
        // Шаги алгоритма ECMA-262, 6-е издание, 22.1.2.1
        // Ссылка: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-array.from
        if (!Array.from) {
            Array.from = (function() {
                var toStr = Object.prototype.toString;
                var isCallable = function(fn) {
                    return typeof fn === 'function' || toStr.call(fn) === '[object Function]';
                };
                var toInteger = function (value) {
                    var number = Number(value);
                    if (isNaN(number)) { return 0; }
                    if (number === 0 || !isFinite(number)) { return number; }
                    return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));
                };
                var maxSafeInteger = Math.pow(2, 53) - 1;
                var toLength = function (value) {
                    var len = toInteger(value);
                    return Math.min(Math.max(len, 0), maxSafeInteger);
                };

                // Свойство length метода from равно 1.
                return function from(arrayLike/*, mapFn, thisArg */) {
                    // 1. Положим C равным значению this.
                    var C = this;

                    // 2. Положим items равным ToObject(arrayLike).
                    var items = Object(arrayLike);

                    // 3. ReturnIfAbrupt(items).
                    if (arrayLike == null) {
                        throw new TypeError('Array.from requires an array-like object - not null or undefined');
                    }

                    // 4. Если mapfn равен undefined, положим mapping равным false.
                    var mapFn = arguments[1];
                    if (typeof mapFn !== 'undefined') {
                        mapFn = arguments.length > 1 ? arguments[1] : void undefined;
                        // 5. иначе
                        // 5. a. Если вызов IsCallable(mapfn) равен false, выкидываем исключение TypeError.
                        if (!isCallable(mapFn)) {
                            throw new TypeError('Array.from: when provided, the second argument must be a function');
                        }

                        // 5. b. Если thisArg присутствует, положим T равным thisArg; иначе положим T равным undefined.
                        if (arguments.length > 2) {
                            T = arguments[2];
                        }
                    }

                    // 10. Положим lenValue равным Get(items, "length").
                    // 11. Положим len равным ToLength(lenValue).
                    var len = toLength(items.length);

                    // 13. Если IsConstructor(C) равен true, то
                    // 13. a. Положим A равным результату вызова внутреннего метода [[Construct]]
                    //     объекта C со списком аргументов, содержащим единственный элемент len.
                    // 14. a. Иначе, положим A равным ArrayCreate(len).
                    var A = isCallable(C) ? Object(new C(len)) : new Array(len);

                    // 16. Положим k равным 0.
                    var k = 0;
                    // 17. Пока k < len, будем повторять... (шаги с a по h)
                    var kValue;
                    while (k < len) {
                        kValue = items[k];
                        if (mapFn) {
                            A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);
                        } else {
                            A[k] = kValue;
                        }
                        k += 1;
                    }
                    // 18. Положим putStatus равным Put(A, "length", len, true).
                    A.length = len;
                    // 20. Вернём A.
                    return A;
                };
            }());
        }

        // Array.sort
        if (![].__vanilla__sort) {
            Object__defineProperty(Array.prototype, '__vanilla__sort', Array.prototype.sort);
            Object__defineProperty(Array.prototype, 'sort', {
                enumerable: false,
                value: function (f) {
                    return is(f, 'uint') ?
                        this.sortOn(f) :
                        this.__vanilla__sort(f);
                }
            });
        }

        // Array.sortOn
        if (![].sortOn) {
            Object__defineProperty(Array.prototype, 'sortOn', {
                enumerable: false,
                value: function (fieldNames, options) {
                    var array = this;
                    if (arguments.length === 1 && is(fieldNames, 'Number')) {
                        options    = fieldNames;
                        fieldNames = undefined;
                    }

                    if (!Array.isArray(fieldNames)) fieldNames = [ fieldNames ];
                    if (!Array.isArray(options)) options = [ options ];

                    // Note: The fieldName and options arrays must have the same number of
                    // elements; otherwise, the options array is ignored.
                    // @see http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#sortOn()
                    if (fieldNames.length !== options.length) {
                        options = new Array(fieldNames.length).fill(undefined);
                    }

                    var returnIndexedArray = options[0] & Array.RETURNINDEXEDARRAY;
                    if (returnIndexedArray) array = Array.from(array);

                    var functions = fieldNames.map( function (fieldName, index) {
                        return createComparisonFn(fieldName, options[index]);
                    });

                    var sorted = array.sort(function comparisonFn(a, b) {
                        return functions.reduce( function (result, fn) { return result || fn(a, b) }, 0);
                    });

                    return returnIndexedArray ? sorted.map(function (o) { return array.indexOf(o); }) : sorted;


                    function createComparisonFn(fieldName, options) {
                        options = options || 0;

                        if(options & Array.UNIQUESORT) throw new Error('UNIQUESORT is not implemented');

                        var transformations = [];

                        if (fieldName) transformations.push(
                            function getProperty() { return this[fieldName]; }
                        );

                        transformations.push(
                            (options & Array.NUMERIC)
                                ? function() { return as(this, 'Number'); }
                                : function() { return as(this, 'String'); }
                        );

                        if (options & Array.CASEINSENSITIVE) {
                            transformations.push(String.prototype.toLowerCase);
                        }

                        transformations.apply = Array.prototype.reduce.bind(
                            transformations,
                            function (value, transformation) { return transformation.apply(value) }
                        );

                        var AGreaterThanB = (options & Array.DESCENDING) ? -1 : 1;
                        var ALessThanB    = -AGreaterThanB;

                        return function comparisonFn(a, b) {
                            a = transformations.apply(a);
                            b = transformations.apply(b);

                            if ( a > b || (a != null && b == null) ) return AGreaterThanB;
                            if ( a < b || (a == null && b != null) ) return ALessThanB;

                            return 0;
                        }
                    }
                }
            });
        }

        // Array.insertAt
        if (![].insertAt) {
            Object__defineProperty(Array.prototype, 'insertAt', {
                enumerable: false,
                value: function (index, item) {
                    this.splice( index, 0, item );
                }
            });
        }

        // Array.removeAt
        if (![].removeAt) {
            Object__defineProperty(Array.prototype, 'removeAt', {
                enumerable: false,
                value: function (index) {
                    this.splice( index, 1 );
                }
            });
        }

        // Vector.fixed
        if ([].fixed !== false) {
            Object__defineProperty(Array.prototype, 'fixed', {
                enumerable: false,
                value: false
            });
        }

        // Array
        if (!Array.prototype.fill) {
            Array.prototype.fill = function(value) {
                if (this == null) {
                    throw new TypeError('this is null or not defined');
                }
                var O = Object(this);
                var len = O.length >>> 0;
                var start = arguments[1];
                var relativeStart = start >> 0;
                var k = relativeStart < 0 ?
                    Math.max(len + relativeStart, 0) :
                    Math.min(relativeStart, len);
                var end = arguments[2];
                var relativeEnd = end === undefined ?
                    len : end >> 0;
                var final = relativeEnd < 0 ?
                    Math.max(len + relativeEnd, 0) :
                    Math.min(relativeEnd, len);
                while (k < final) {
                    O[k] = value;
                    k++;
                }
                return O;
            };
        }

        // TypedArray.fill
        if (!Int8Array.prototype.fill) Int8Array.prototype.fill = Array.prototype.fill;
        if (!Uint8Array.prototype.fill) Uint8Array.prototype.fill = Array.prototype.fill;
        if (!Uint8ClampedArray.prototype.fill) Uint8ClampedArray.prototype.fill = Array.prototype.fill;
        if (!Int16Array.prototype.fill) Int16Array.prototype.fill = Array.prototype.fill;
        if (!Uint16Array.prototype.fill) Uint16Array.prototype.fill = Array.prototype.fill;
        if (!Int32Array.prototype.fill) Int32Array.prototype.fill = Array.prototype.fill;
        if (!Uint32Array.prototype.fill) Uint32Array.prototype.fill = Array.prototype.fill;
        if (!Float32Array.prototype.fill) Float32Array.prototype.fill = Array.prototype.fill;
        if (!Float64Array.prototype.fill) Float64Array.prototype.fill = Array.prototype.fill;

        // bind
        if (!function () {}.bind().BoundTargetFunction) {
            Object__defineProperty(Function.prototype, 'bind', {
                enumerable: false,
                value: function (BoundThis) {
                    var BoundTargetFunction = this;
                    var BoundTargetArgs = Array.prototype.slice.call(arguments, 1);
                    var wrapper = function () {
                        return BoundTargetFunction.apply(BoundThis, BoundTargetArgs.concat(Array.prototype.slice.call(arguments)));
                    };
                    wrapper['BoundTargetFunction'] = BoundTargetFunction;
                    return wrapper;
                }
            });
        }

        // Date
        if (!new Date().date) {
            Object__defineProperty(Date.prototype, 'date', 			{ "get": function() { return this.getDate(); 			}, "set": function(v) { this.setDate(v); } });
            Object__defineProperty(Date.prototype, 'dateUTC', 		{ "get": function() { return this.getUTCDate(); 		}, "set": function(v) { this.setUTCDate(v); } });
            Object__defineProperty(Date.prototype, 'day', 			{ "get": function() { return this.getDay(); 			}, "set": function(v) { this.setDay(v); } });
            Object__defineProperty(Date.prototype, 'dayUTC', 			{ "get": function() { return this.getUTCDay(); 			}, "set": function(v) { this.setUTCDay(v); } });
            Object__defineProperty(Date.prototype, 'fullYear', 		{ "get": function() { return this.getFullYear(); 		}, "set": function(v) { this.setFullYear(v); } });
            Object__defineProperty(Date.prototype, 'fullYearUTC', 	{ "get": function() { return this.getUTCFullYear(); 	}, "set": function(v) { this.setUTCFullYear(v); } });
            Object__defineProperty(Date.prototype, 'hours', 			{ "get": function() { return this.getHours(); 			}, "set": function(v) { this.setHours(v); } });
            Object__defineProperty(Date.prototype, 'hoursUTC', 		{ "get": function() { return this.getUTCHours(); 		}, "set": function(v) { this.setUTCHours(v); } });
            Object__defineProperty(Date.prototype, 'milliseconds', 	{ "get": function() { return this.getMilliseconds(); 	}, "set": function(v) { this.setMilliseconds(v); } });
            Object__defineProperty(Date.prototype, 'millisecondsUTC', { "get": function() { return this.getUTCMilliseconds();	}, "set": function(v) { this.setUTCMilliseconds(v); } });
            Object__defineProperty(Date.prototype, 'minutes', 		{ "get": function() { return this.getMinutes(); 		}, "set": function(v) { this.setMinutes(v); } });
            Object__defineProperty(Date.prototype, 'minutesUTC', 		{ "get": function() { return this.getUTCMinutes(); 		}, "set": function(v) { this.setUTCMinutes(v); } });
            Object__defineProperty(Date.prototype, 'month', 			{ "get": function() { return this.getMonth(); 			}, "set": function(v) { this.setMonth(v); } });
            Object__defineProperty(Date.prototype, 'monthUTC', 		{ "get": function() { return this.getUTCMonth(); 		}, "set": function(v) { this.setUTCMonth(v); } });
            Object__defineProperty(Date.prototype, 'seconds', 		{ "get": function() { return this.getSeconds(); 		}, "set": function(v) { this.setSeconds(v); } });
            Object__defineProperty(Date.prototype, 'secondsUTC', 		{ "get": function() { return this.getUTCSeconds(); 		}, "set": function(v) { this.setUTCSeconds(v); } });
            Object__defineProperty(Date.prototype, 'time', 			{ "get": function() { return this.getTime(); 			}, "set": function(v) { this.setTime(v); } });
            Object__defineProperty(Date.prototype, 'timezoneOffset', 	{ "get": function() { return this.getTimezoneOffset(); 	} });
        }
    }

    function actionScriptProto () {
        // Number
        ['E','LN10','LN2','LOG10E','LOG2E','PI','SQRT1_2','SQRT2',
            'abs','acos','asin','atan','atan2','ceil','cos','exp','floor','log','max','min','pow','random','round','sin','sqrt','tan'
        ].forEach(function (n) { Object__defineProperty(Number, n, Math[n]); });

        // int
        Object__defineProperty(int.prototype, 'toExponential', function (precision) { return this.v.toExponential(precision); });
        Object__defineProperty(int.prototype, 'toFixed', function (fractionDigits) { return this.v.toFixed(fractionDigits); });
        Object__defineProperty(int.prototype, 'toPrecision', function (precision) { return this.v.toPrecision(precision); });
        Object__defineProperty(int.prototype, 'toString', function (radix) { return this.v.toString(radix); });
        Object__defineProperty(int.prototype, 'valueOf', function () { return this.v; });
        Object__defineProperty(int, 'MIN_VALUE', -0x80000000);
        Object__defineProperty(int, 'MAX_VALUE', 0x7fffffff);

        // uint
        Object__defineProperty(uint.prototype, 'toExponential', function (precision) { return this.v.toExponential(precision); });
        Object__defineProperty(uint.prototype, 'toFixed', function (fractionDigits) { return this.v.toFixed(fractionDigits); });
        Object__defineProperty(uint.prototype, 'toPrecision', function (precision) { return this.v.toPrecision(precision); });
        Object__defineProperty(uint.prototype, 'toString', function (radix) { return this.v.toString(radix); });
        Object__defineProperty(uint.prototype, 'valueOf', function () { return this.v; });
        Object__defineProperty(uint, 'MIN_VALUE', 0);
        Object__defineProperty(uint, 'MAX_VALUE', 0xffffffff);

        // *.name
        Object__defineProperty(int, 'name', 'int');
        Object__defineProperty(uint, 'name', 'uint');
        Object__defineProperty(Number, 'name', 'Number');
        Object__defineProperty(Boolean, 'name', 'Boolean');
        Object__defineProperty(String, 'name', 'String');
        Object__defineProperty(Object, 'name', 'Object');
        Object__defineProperty(Array, 'name', 'Array');
        Object__defineProperty(Date, 'name', 'Date');
        Object__defineProperty(Function, 'name', 'Function');

        // Error
        var AS3Error = (function (_super) {
            __extends(AS3Error, _super);
            function AS3Error(message, id) {
                var _newTarget = this.constructor, _this = this;
                _this = _super.call(this, message) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.id = id;
                return _this;
            }
            return AS3Error;
        }(Error));

        var JSError = vanilla.set('Error', AS3Error);
        AS3Error.prototype = Object.create(JSError.prototype);
        AS3Error.prototype.constructor = AS3Error;

        Object__defineProperty(AS3Error, 'throwError', function (type, index) {
            throw new type(AS3Error.getErrorMessage(index));
        });

        Object__defineProperty(AS3Error, 'getErrorMessage', function (index) {
            return 'Unknown error';
        });

        Object__defineProperty(AS3Error.prototype, 'errorID', {
            get: function () {
                return as(this.id || this.number, 'int') || 0;
            }
        });

        Object__defineProperty(AS3Error.prototype, 'getStackTrace', function () {
            // previous value
            if (this.as3stack) {
                return this.as3stack;
            }
            // Format to
            // Error msg 100 Error: msg
            //     at func3 (...\Class.as:39)
            //     at func2 (...\Class.as:29)
            //     at func1 (...\Class.as:19)
            var message = this.message, stack = this.stack;
            if (stack) {
                var _this = this;
                stack = stack.split('\n').map(function (l) {
                    l = l.trim();
                    // Chrome, Edge, Internet Explorer
                    var v1 = /^at\s/g.test(l);
                    // Firefox, Safari
                    var v2 = /@/g.test(l);
                    // switch
                    if (v1) {
                        if (l.indexOf('at ' + _this.name) === 0) return '';
                        if (l.indexOf('at new ' + _this.name) === 0) return '';
                        if (l.indexOf('at AS3Error') === 0) return '';
                        if (l.indexOf('at new AS3Error') === 0) return '';
                        if (l.indexOf('at wrapper') === 0) return '';
                    } else if (v2) {
                        if (l.indexOf(_this.name + '@') === 0) return '';
                        if (l.indexOf('AS3Error@') === 0) return '';
                        if (l.indexOf('wrapper@') === 0) return '';
                        var f = l.indexOf('@');
                        if (f === 0) l = 'at (' + l.substr(1) + ')';
                        else if (f > 0) l = 'at ' + l.substr(0, f) + ' (' + l.substr(f+1) + ')';
                    }
                    return l;
                }).filter(function (s) { return s !== ''; }).join('\n\t');
                // insert message
                if (message && stack.indexOf(message) === -1) {
                    stack = this.name + ': ' + message + '\n\t' + stack;
                }
            } else {
                stack = message;
            }
            return this.as3stack = stack;
        });

        vanilla.set('ArgumentError', (function(_super){__extends(ArgumentError,_super);function ArgumentError(message,id){var _newTarget=this.constructor,_this=this;_this=_super.call(this,message)||this;Object.setPrototypeOf(_this,_newTarget.prototype);_this.id=id;_this.name='ArgumentError';return _this;}return ArgumentError;}(AS3Error)));
        vanilla.set('DefinitionError', (function(_super){__extends(DefinitionError,_super);function DefinitionError(message,id){var _newTarget=this.constructor,_this=this;_this=_super.call(this,message)||this;Object.setPrototypeOf(_this,_newTarget.prototype);_this.id=id;_this.name='DefinitionError';return _this;}return DefinitionError;}(AS3Error)));
        vanilla.set('VerifyError', (function(_super){__extends(VerifyError,_super);function VerifyError(message,id){var _newTarget=this.constructor,_this=this;_this=_super.call(this,message)||this;Object.setPrototypeOf(_this,_newTarget.prototype);_this.id=id;_this.name='VerifyError';return _this;}return VerifyError;}(AS3Error)));
        vanilla.set('SecurityError', (function(_super){__extends(SecurityError,_super);function SecurityError(message,id){var _newTarget=this.constructor,_this=this;_this=_super.call(this,message)||this;Object.setPrototypeOf(_this,_newTarget.prototype);_this.id=id;_this.name='SecurityError';return _this;}return SecurityError;}(AS3Error)));
        vanilla.set('EvalError', (function(_super){__extends(EvalError,_super);function EvalError(message,id){var _newTarget=this.constructor,_this=this;_this=_super.call(this,message)||this;Object.setPrototypeOf(_this,_newTarget.prototype);_this.id=id;_this.name='EvalError';return _this;}return EvalError;}(AS3Error)));
        vanilla.set('RangeError', (function(_super){__extends(RangeError,_super);function RangeError(message,id){var _newTarget=this.constructor,_this=this;_this=_super.call(this,message)||this;Object.setPrototypeOf(_this,_newTarget.prototype);_this.id=id;_this.name='RangeError';return _this;}return RangeError;}(AS3Error)));
        vanilla.set('ReferenceError', (function(_super){__extends(ReferenceError,_super);function ReferenceError(message,id){var _newTarget=this.constructor,_this=this;_this=_super.call(this,message)||this;Object.setPrototypeOf(_this,_newTarget.prototype);_this.id=id;_this.name='ReferenceError';return _this;}return ReferenceError;}(AS3Error)));
        vanilla.set('SyntaxError', (function(_super){__extends(SyntaxError,_super);function SyntaxError(message,id){var _newTarget=this.constructor,_this=this;_this=_super.call(this,message)||this;Object.setPrototypeOf(_this,_newTarget.prototype);_this.id=id;_this.name='SyntaxError';return _this;}return SyntaxError;}(AS3Error)));
        vanilla.set('TypeError', (function(_super){__extends(TypeError,_super);function TypeError(message,id){var _newTarget=this.constructor,_this=this;_this=_super.call(this,message)||this;Object.setPrototypeOf(_this,_newTarget.prototype);_this.id=id;_this.name='TypeError';return _this;}return TypeError;}(AS3Error)));
        vanilla.set('URIError', (function(_super){__extends(URIError,_super);function URIError(message,id){var _newTarget=this.constructor,_this=this;_this=_super.call(this,message)||this;Object.setPrototypeOf(_this,_newTarget.prototype);_this.id=id;_this.name='URIError';return _this;}return URIError;}(AS3Error)));
    }

    function getCanvas (stageId) {
        stageId = stageId || 0;
        var db = base.kernel.db.stage[stageId] = base.kernel.db.stage[stageId] || {};
        var canvas = db.canvas;
        if (!canvas) {
            canvas = db.canvas = document.createElement('canvas');
            canvas.style.width = canvas.style.height = '100%';
            canvas.style.position = 'absolute';
            canvas.style.zIndex = '32';
        }
        return canvas;
    }

    function getCtx (stageId) {
        stageId = stageId || 0;
        var db = base.kernel.db.stage[stageId] = base.kernel.db.stage[stageId] || {};
        var ctx = db.ctx;
        if (!ctx) {
            var canvas = _this.getCanvas(stageId);
            ctx = db.ctx = new flash.__native.renderer.webgl.WebGLContext2D(canvas);
            canvas.width = flash.system.Capabilities.screenResolutionX;
            canvas.height = flash.system.Capabilities.screenResolutionY;
            ctx.context.configureBackBuffer(canvas.width, canvas.height, 0, false);
        }
        return ctx;
    }

    function getLocalStorage () {
        return base.kernel.db.utils.localStorage || window.localStorage;
    }

    function createRoot (s, t) {
        // start time
        _this.startTime = Date.now();
        // class
        var RootClass = (function (_super) {
            __extends(RootClass, _super);

            var ProxyClass = (function (_super) {
                __extends(ProxyClass, _super);
                function ProxyClass() {
                    var _this = this;
                    s._root = _this;
                    _this = _super.call(this) || this;
                    return _this;
                }
                return ProxyClass;
            }(_super));

            function RootClass() {
                var _this = this;
                // add to stage
                s._children.push(_this);
                s._childrenLength++;
                s._dirty = s._dirtyContent = true;
                s._loaderInfo.content = _this;
                s._name = null;
                // parent
                _this._stage = s;
                _this._parent = _this._renderParent = s;
                // name
                _this._name = 'root' + (s._id + 1);
                // constructor
                _this = ProxyClass.call(this) || this;
                // added
                _this.dispatchEvent(new flash.events.Event('addedToStage'));
                // self
                return _this;
            }
            return RootClass;
        }(t));
        // loading
        s._loaderInfo.__fakeLoading();
        // instance
        return new RootClass;
    }

    // casting
    function is(v, t) {
        if (v === null || v === undefined) {
            return false;
        }
        if (typeof t === 'string') {
            switch (t) {
                case 'int':
                    return typeof v === 'number' && v >= -0x80000000 && v <= 0x7fffffff;
                case 'uint':
                    return typeof v === 'number' && v >= 0 && v <= 0xffffffff;
                case 'Number':
                    return typeof v === 'number';
                case 'Boolean':
                    return typeof v === 'boolean';
                case 'String':
                    return typeof v === 'string';
                case 'Function':
                case 'Class':
                    return typeof v === 'function';
                case 'Object':
                    return v !== null && v !== undefined;
                default:
                    return 'implements_' + t.replace(/\./g, '_') in v;
            }
        }
        return v instanceof t;
    }

    function as(v, t) {
        switch (t) {
            case 'int':
                if (v === undefined) return 0;
                if (typeof v === 'string') v = +v;
                var i = v|0;
                if (i > 0x7fffffff) i = 0x7fffffff;
                if (i < -0x80000000) i = -0x80000000;
                return i;
            case 'uint':
                if (v === undefined) return 0;
                if (typeof v === 'string') v = +v;
                var ui = v|0;
                if (ui > 0xffffffff) ui = 0xffffffff;
                if (ui < 0) ui = 0xffffffff + ++ui;
                return ui;
            case 'Number':
                if (typeof v === 'number') return v;
                return isNaN(v) ? v : Number(v);
            case 'Boolean':
                if (typeof v === 'boolean') return v;
                return Boolean(v);
            case 'String':
                if (typeof v === 'string') return v;
                return v === null || v === undefined ? null : String(v);
            default:
                if (!is(v, t)) {
                    return null;
                }
        }
        return v;
    }

    function strict(v, t) {
        if (v === null || v === undefined) {
            return null;
        }
        if (!is(v, t)) {
            throw new TypeError('Type Coercion failed: cannot convert ' + v + ' to ' + t, 1034);
        }
        return v;
    }

    function In(v) {
        if (v === null || v === undefined) {
            return [];
        }
        if (typeof v === 'object') {
            if (is(v, global.XML) || is(v, global.XMLList)) {
                return v.iterator();
            }
            if (is(v, flash.utils.Dictionary)) {
                return v.keys;
            }
        }
        return Object.keys(v);
    }

    function of(v) {
        if (v === null || v === undefined) {
            return [];
        }
        if (typeof v === 'object') {
            if (is(v, global.XML) || is(v, global.XMLList)) {
                return v.iterator(true);
            }
            if (is(v, flash.utils.Dictionary)) {
                return v.values;
            }
        }
        return v;
    }

    function e2e(error_in) {
        var as3error;
        if (error_in !== null && error_in !== undefined) {
            // not need to convert
            if (is(error_in, Error) || (window.flash && flash.events && flash.events.ErrorEvent && is(error_in, flash.events.ErrorEvent))) {
                as3error = error_in;
            }
            // from String
            else if (is(error_in, 'String')) {
                as3error = new Error(error_in);
            }
            // from JavaScript Error object
            else if (is(error_in, 'Object')) {
                var c = window[error_in.name];
                if (!is(c, 'Class')) c = Error;
                as3error = new c(error_in.message);
                as3error.stack = error_in.stack; // NOTE: crossorigin problems
            }
        }
        return as3error || new Error;
    }

    // mime type
    function getMimeType (bytes) {
        if (is(bytes, flash.utils.ByteArray)) {
            // length
            var len = bytes.length, i = 0, byte,
                byte0 = len > 0 ? bytes.get(0) : 0,
                byte1 = len > 1 ? bytes.get(1) : 0,
                byte2 = len > 2 ? bytes.get(2) : 0;

            // swf
            if (len >= 3 &&
                (byte0 === 0x43 || byte0 === 0x46 || byte0 === 0x5A) && byte1 === 0x57 && byte2 === 0x53) {
                return 'application/x-shockwave-flash';
            }

            // jpeg
            else if (len >= 3 &&
                byte0 === 0xff && byte1 === 0xd8 && byte2 === 0xff) {
                return 'image/jpeg';
            }

            // gif
            else if (len >= 3 &&
                byte0 === 0x47 && byte1 === 0x49 && byte2 === 0x46) {
                return 'image/gif';
            }

            // png
            else if (len >= 8 &&
                byte0 === 0x89 && byte1 === 0x50 && byte2 === 0x4e && bytes.get(3) === 0x47 &&
                bytes.get(4) === 0x0d && bytes.get(5) === 0x0a && bytes.get(6) === 0x1a && bytes.get(7) === 0x0a) {
                return 'image/png';
            }

            // mp3
            else if (len >= 3 &&
                (byte0 === 73 && byte1 === 68 && byte2 === 51) ||
                (byte0 === 255 && (byte1 === 251 || byte1 === 250))) {
                return 'audio/mpeg';
            }

            // xml / svg
            else if (len >= 4) {
                // skip byte order mask and white space
                while (i < len) {
                    byte = bytes.get(i);
                    // byte order mask
                    if (i+3 <= len && byte === 0xef && bytes.get(i+1) === 0xbb && bytes.get(i+2) === 0xbf) {
                        i += 3;
                        continue;
                    }
                    // white space
                    if (byte === 0xa || byte === 0xd || byte === 0x9 || byte === 0x20) {
                        i++;
                        continue;
                    }
                    // <? <!
                    if ((byte === 0x3c && bytes.get(i+1) === 0x3f) || (byte === 0x3c && bytes.get(i+1) === 0x21)) {
                        i += 2;
                        while (i < len) {
                            byte = bytes.get(i);
                            if (byte !== 0x3e) {
                                i++;
                                continue;
                            }
                            break;
                        }
                        continue;
                    }
                    break;
                }

                // <
                if (bytes.get(i) === 0x3c) {
                    // svg
                    if (i+4 <= len && bytes.get(i+1) === 0x73 && bytes.get(i+2) === 0x76 && bytes.get(i+3) === 0x67) {
                        return 'image/svg-xml';
                    }
                    // xml
                    i = len-1;
                    while (i >= 0) {
                        byte = bytes.get(i);
                        // white space
                        if (byte === 0xa || byte === 0xd || byte === 0x9 || byte === 0x20) {
                            i--;
                            continue;
                        }
                        if (byte === 0x3e) {
                            return 'text/xml';
                        }
                        break;
                    }
                }
            }
        }

        return 'application/octet-stream';
    }

    // embed init
    function embed$(cb) {
        // embed list
        var list = _this.embedList;

        // validation
        if (!is(list, 'Object')) {
            // nothing to create
            if (typeof cb === 'function') {
                cb();
            }
            return;
        }

        // decode
        verbose('start prepare files...');
        var count = 0;
        for (var file in list) {
            if (!list.hasOwnProperty(file)) {
                continue;
            }
            var e = list[file], base64;
            if (!e || !is(base64 = e.base64, 'String')) {
                continue;
            }
            var bytes = e.bytes = flash.__native.utils.Base64.decode(base64);
            delete e.base64;

            var mimeType = getMimeType(bytes);
            switch (mimeType) {
                case 'application/octet-stream':
                    e.instance = bytes;
                    verbose('done', file);
                    break;
                case 'application/x-font':
                case 'application/x-font-truetype':
                    // not supported
                    break;
                case 'application/x-shockwave-flash':
                    decodeSWF(file, bytes);
                    break;
                case 'text/xml':
                    e.instance = bytes;
                    verbose('done', file);
                    break;
                case 'audio/mpeg':
                    decodeSound(file, bytes);
                    break;
                case 'image/gif':
                case 'image/jpeg':
                case 'image/png':
                case 'image/svg':
                case 'image/svg-xml':
                    decodeImage(file, bytes);
                    break;
            }
        }

        if (!count) {
            // sync complete
            if (typeof cb === 'function') {
                cb();
            }
        }

        function decodeSWF (file, bytes) {
            wait(file);

            try {
                var e = list[file];
                var swf = new flash.__native.format.swf.SWF(bytes);
                swf.addEventListener(flash.__native.format.swf.events.SWFProgressEvent.COMPLETE, h);
                swf.decodeImageDataAsync();
                e.instance = swf; // flash.__native.format.swf.SWF
            } catch (e) {
                throwError(e);
            }

            function h (event) {
                verbose('done', file);
                release(event);
            }
        }

        function decodeSound (file, bytes) {
            wait(file);

            try {
                var e = list[file];
                var sound = new flash.media.Sound;
                sound.addEventListener(flash.events.Event.COMPLETE, h);
                sound.addEventListener(flash.events.IOErrorEvent.IO_ERROR, h);
                sound.loadCompressedDataFromByteArray(bytes, bytes.length);
                e.instance = sound; // flash.media.Sound
            } catch (e) {
                throwError(e);
            }

            function h (event) {
                verbose('done', file);
                release(event);
            }
        }

        function decodeImage (file, bytes) {
            wait(file);

            try {
                var e = list[file];
                var width = e.width || 32;
                var height = e.height || 32;
                var transparent = mimeType !== 'image/jpeg';
                var bitmapData = new flash.display.BitmapData(width, height, transparent, 0x0, false);
                var loader = new flash.display.Loader;
                loader._predefinedData = bitmapData;
                loader.contentLoaderInfo.addEventListener(flash.events.Event.COMPLETE, h);
                loader.contentLoaderInfo.addEventListener(flash.events.IOErrorEvent.IO_ERROR, h);
                loader.loadBytes(bytes);
                e.instance = new flash.display.Bitmap(bitmapData); // flash.display.Bitmap
            } catch (e) {
                throwError(e);
            }

            function h (event) {
                verbose('done', file);
                release(event);
            }
        }

        function wait (file) {
            verbose('decoding...', file);
            count++;
        }

        function release (event) {
            if (--count > 0) {
                return;
            }
            if (typeof cb === 'function') {
                cb();
            }
        }

        function verbose (s, f) {
            if (_this.release === true) {
                return;
            }
            if (!f) {
                trace('[embed] ' + s);
                return;
            }
            trace('[embed] ' + f + ' ' + s);
        }
    }

    // meta tags
    function getMeta(name, params) {
        if (name === 'Embed' && is(params, Array)) {
            // embed list
            var list = _this.embedList;
            // validation
            if (!is(list, 'Object')) {
                return null;
            }
            var o = {
                mimeType: null,
                source: null,
                symbol: null,
                smoothing: null
            };
            for (var i = 0, len = params.length; i < len; ++i) {
                var p = params[i], n = p.key, v = p.value;
                if (n in o) {
                    o[n] = v;
                }
            }
            var source;
            if (!is(source=o.source, 'String')) {
                return null;
            }
            var e = list[source], bytes;
            if (!e || !is(bytes=e.bytes, flash.utils.ByteArray)) {
                return null;
            }

            var mimeType = o.mimeType || getMimeType(bytes);
            switch (mimeType) {
                case 'application/octet-stream':
                    if (is(e.instance, flash.utils.ByteArray)) {
                        return function (_super) {
                            __extends(class_ByteArray, _super);
                            function class_ByteArray() {
                                _super.call(this);
                                this.fromByteArray(e.instance);
                            }
                            return class_ByteArray;
                        }(flash.utils.ByteArray);
                    }
                    break;
                case 'application/x-font':
                case 'application/x-font-truetype':
                    // not supported
                    break;
                case 'application/x-shockwave-flash':
                    if (is(e.instance, flash.__native.format.swf.SWFTimelineContainer)) {
                        var data = e.instance, tag;
                        if (o.symbol) {
                            tag = e.instance.getCharacter(e.instance.getAsset(o.symbol).tagId);
                        }
                        if (is(tag, 'flash.__native.format.swf.tags.IDefinitionBitsTag')) {
                            // Bitmap
                            return function (_super) {
                                __extends(class_Bitmap, _super);
                                function class_Bitmap() {
                                    _super.call(this, tag);
                                }
                                return class_Bitmap;
                            }(flash.__native.format.swf.instance.Bitmap);
                        }
                        else if (is(tag, flash.__native.format.swf.tags.TagDefineShape)) {
                            // Shape
                            return function (_super) {
                                __extends(class_Shape, _super);
                                function class_Shape() {
                                    _super.call(this, data, tag);
                                }
                                return class_Shape;
                            }(flash.__native.format.swf.instance.Shape);
                        }
                        else if (is(tag, flash.__native.format.swf.tags.TagDefineMorphShape)) {
                            // MorphShape
                            return function (_super) {
                                __extends(class_MorphShape, _super);
                                function class_MorphShape() {
                                    _super.call(this, data, tag);
                                }
                                return class_MorphShape;
                            }(flash.__native.format.swf.instance.MorphShape);
                        }
                        else if (is(tag, flash.__native.format.swf.tags.TagDefineButton2)) {
                            // SimpleButton
                            return function (_super) {
                                __extends(class_SimpleButton, _super);
                                function class_SimpleButton() {
                                    _super.call(this, data, tag);
                                }
                                return class_SimpleButton;
                            }(flash.__native.format.swf.instance.SimpleButton);
                        }
                        else if (is(tag, flash.__native.format.swf.tags.TagDefineEditText)) {
                            // DynamicText
                            return function (_super) {
                                __extends(class_DynamicText, _super);
                                function class_DynamicText() {
                                    _super.call(this, data, tag);
                                }
                                return class_DynamicText;
                            }(flash.__native.format.swf.instance.DynamicText);
                        }
                        else if (is(tag, flash.__native.format.swf.tags.TagDefineText)) {
                            // StaticText
                            return function (_super) {
                                __extends(class_StaticText, _super);
                                function class_StaticText() {
                                    _super.call(this, data, tag);
                                }
                                return class_StaticText;
                            }(flash.__native.format.swf.instance.StaticText);
                        }
                        else {
                            // MovieClip
                            return function (_super) {
                                __extends(class_MovieClip, _super);
                                function class_MovieClip() {
                                    _super.call(this, tag || data);
                                }
                                return class_MovieClip;
                            }(flash.__native.format.swf.instance.MovieClip);
                        }
                    }
                    break;
                case 'text/xml':
                    if (is(e.instance, 'String') || is(e.instance, flash.utils.ByteArray)) {
                        return function (_super) {
                            __extends(class_XML, _super);
                            function class_XML() {
                                _super.call(this, e.instance);
                            }
                            return class_XML;
                        }(global.XML);
                    }
                    break;
                case 'audio/mpeg':
                    if (is(e.instance, flash.media.Sound)) {
                        return function (_super) {
                            __extends(class_Sound, _super);
                            function class_Sound() {
                                _super.call(this);
                                this.__fromAudioBuffer(e.instance._buffer);
                            }
                            return class_Sound;
                        }(flash.media.Sound);
                    }
                    break;
                case 'image/gif':
                case 'image/jpeg':
                case 'image/png':
                case 'image/svg':
                case 'image/svg-xml':
                    if (is(e.instance, flash.display.Bitmap)) {
                        return function (_super) {
                            __extends(class_Bitmap, _super);
                            function class_Bitmap() {
                                _super.call(this, e.instance.bitmapData.clone(), 'auto', as(o.smoothing, 'Boolean'));
                            }
                            return class_Bitmap;
                        }(flash.display.Bitmap);
                    }
                    break;
            }
        }
        return null;
    }

    // font init
    function font$(cb) {
        // font list
        var list = _this.fontList;

        // validation
        if (!is(list, 'Object')) {
            // nothing to create
            release();
            return;
        }

        // FontFace
        var FontFaceAvailable = typeof document.fonts === 'object' && typeof window.FontFace === 'function';
        if (FontFaceAvailable) {
            document.fonts.ready.then(function() {
                var c = document.createElement('canvas');
                var ctx = c.getContext('2d');
                for (var font in list) {
                    if (!list.hasOwnProperty(font)) {
                        continue;
                    }
                    ctx.font = "1px " + font;
                    ctx.fillText(' ', 0, 0);
                }
                count = 0;
                setTimeout(release, 0);
            });
        }

        // decode
        var count = 0;
        for (var font in list) {
            if (!list.hasOwnProperty(font)) {
                continue;
            }
            var e = list[font], base64;
            if (!e || !is(base64 = e.base64, 'String')) {
                continue;
            }
            wait();
            // data
            var src = 'url("data:application/x-font-woff;charset=utf-8;base64,' + base64 + '")';
            // next gen
            if (FontFaceAvailable) {
                document.fonts.add(new FontFace(font, src));
                continue;
            }
            // old
            var styleElement = document.createElement('style');
            styleElement.type = "text/css";
            styleElement.innerHTML = '@font-face { font-family: "' + font + '"; src: ' + src + ' format("woff"); font-style: normal; font-weight: normal }';
            document.head.appendChild(styleElement);
            setTimeout(release, 0);
        }

        if (!count) {
            // sync complete
            release();
        }

        function wait () {
            count++;
        }

        function release (event) {
            if (--count > 0) {
                return;
            }
            if (typeof cb === 'function') {
                cb();
                cb = undefined;
            }
        }
    }

    // kernel init
    function kernel$(cb) {
        try {
            base.kernel.init(cb);
        } catch (e) {
            throwError(e);
        }
    }

    // static init
    var stiList;
    function sti(ins, fn) {
        if (!stiList) stiList = getMapIns();
        var list = stiList.get(ins);
        if (!list) stiList.set(ins, list = []);
        list[list.length] = fn;
    }

    // static block
    var stbList;
    function stb(ins, fn) {
        if (!stbList) stbList = getMapIns();
        var list = stbList.get(ins);
        if (!list) stbList.set(ins, list = []);
        list[list.length] = fn;
    }

    // static apply
    function st$(ins) {
        if (ins == null) {
            return ins;
        }

        var list;

        if (stiList) {
            list = stiList.get(ins);
            if (list && list.length) {
                stiList.delete(ins);
                list.forEach(callFn);
            }
        }

        if (stbList) {
            list = stbList.get(ins);
            if (list && list.length) {
                stbList.delete(ins);
                list.forEach(callFn);
            }
        }

        function callFn (fn) {
            fn();
        }

        return ins;
    }

    function getMapIns () {
        return _this.utils.NATIVE_MAP_AVAILABLE ? new Map : new _this.utils.MapSimple;
    }

    // trace
    function trace() {
        var a = [];
        for (var i = 0; i < arguments.length; i++) {
            var v = a[i] = arguments[i];
            if (typeof v === 'object' && v !== null) a[i] = v.toString();
        }
        if (window.console && window.console.log) {
            console.log.apply(console, a);
        }
    }
    function traceLater() {
        (_this.cache.traceLater = _this.cache.traceLater || []).push(arguments);
    }

    // unbind
    function unbind(value) {
        if (value === undefined) return value;
        if (typeof value === 'function') {
            var BoundTargetFunction = value;
            while (BoundTargetFunction['BoundTargetFunction']) {
                BoundTargetFunction = BoundTargetFunction['BoundTargetFunction'];
            }
            return BoundTargetFunction;
        }
        return value;
    }

    // int
    function int(v) {
        this.v = as(v, 'int');
    }

    // uint
    function uint(v) {
        this.v = as(v, 'uint');
    }

    function Object__defineProperty(t, n, v) {
        var o = v;
        if (typeof o !== 'object') {
            o = {
                value: v
            };
        }
        if (typeof o.enumerable === 'undefined') {
            o.enumerable = true;
        }
        Object.defineProperty(t, n, o);
    }

    function errorUtils () {
        _this.provide = _this.provide || h;
        _this.kernel$ = _this.kernel$ || h;
        _this.font$ = _this.font$ || h;
        _this.embed$ = _this.embed$ || h;

        window.createProject = window.createProject || createNonProject;

        Object.defineProperty(_this, 'onerror', {
            configurable: true,
            set: function (v) {
                Object.defineProperty(_this, 'onerror', {
                    enumerable: true,
                    configurable: true,
                    value: v
                });
                checkBrowser();
            },
            get: function () {
                return undefined;
            }
        });

        function h () {
            throwError(new Error('Fatal error'));
        }
    }

    function checkBrowser () {
        var c = _this.system.Capabilities;
        if (!c) {
            return;
        }

        var needUpdate;
        switch (c.browser) {
            case 'Chrome':
                if (c.os === 'Android' && parseFloat(c.browserVersion) == 65.0) {
                    needUpdate = true;
                }
                break;
        }

        if (needUpdate) {
            throwError('Please upgrade your browser to the latest version.');
        }
    }

    function throwError (e) {
        var forceStop = false;
        if (typeof _this.onerror === 'function') {
            forceStop = _this.onerror(e) !== true;
        }

        if (!forceStop) {
            return;
        }

        base.init.error = e;
    }

    function createNonProject (p, h) {
        if (p === null || typeof p !== 'object') {
            p = {};
        }

        var parentElement = typeof p.parent === 'string' ? document.getElementById(p.parent) : p.parent;
        if (typeof parentElement === 'object' && 'tagName' in parentElement) {
            parentElement.innerHTML = _this.getErrorHTMLText();
        }
    }

    function getErrorHTMLText (e) {
        var message = 'Requires a modern browser to run the application.';
        switch (typeof e) {
            case 'string':
                message = e;
                break;
            case 'object':
                var debug = window.location.search.substr(1).indexOf('debug=true') >= 0;
                if (e !== null && (!asc.release || debug)) {
                    message = e2e(e).getStackTrace();
                }
                break;
        }
        var html = '<div style="position:fixed; display: flex; align-items: center; width:100%; height:100%; background: linear-gradient(to bottom right, white, Highlight);">';
        var textStyle = 'text-align:center; display:inline-block; margin-left:10%; width:80%; color:HighlightText;';
        if (_this.system.Capabilities) {
            textStyle += 'font-family: ' + _this.system.Capabilities.font + ';';
        }
        var h = asc.release ? 1 : 2;
        html += '<h' + h + ' style="' + textStyle + '">';
        html += message;
        html += '</h' + h + '>';
        html += '</div>';
        return html;
    }

    return _this;
})();
var s3eLifeStreet = {};
(function() {
  this.name = 's3eLifeStreet';
  
  var checkParam = function(param, defaulf) {
    param = param >= 100 ? param : defaulf;
    return Math.max(param, 100);
  };

  // контейнеры для рекламы
  var adDisplayContainer;

  // конкретные контейнеры для видео и баннера
  var _adContainer_;
  var _videoContent_;

  // менеджер рекламы
  var adsManager;

  // коллбэк
  var _callback_;
  
  var initialSize;

  // список возможных коллбэков
  this.S3E_HTML5ADS_INIT_FAIL                       = 0;
  this.S3E_HTML5ADS_INIT_SUCCESS                    = 1;
  this.S3E_HTML5ADS_AD_ISNT_AVAILABLE               = 2;
  this.S3E_HTML5ADS_AD_IS_AVAILABLE                 = 3;
  this.S3E_HTML5ADS_AD_STARTING_FAIL                = 4;
  this.S3E_HTML5ADS_AD_STARTING_SUCCESS             = 5;
  this.S3E_HTML5ADS_AD_SERVING_INTERRUPTED          = 6;
  this.S3E_HTML5ADS_AD_IS_SHOWN_SUCCESSFULLY        = 7;
  this.S3E_HTML5ADS_AD_WAS_CLICKED                  = 8;
  this.S3E_HTML5ADS_IDLE                            = 9;

  // консоль
  var _console_;

  // включение тестового режима
  var _testmode_;

  // сохраненные параметры для переинициализации провайдера
  var loadingNum = 0;
  var savedParams;
  var savedWidth;
  var savedHeight;
  var savedFullscreen;
  
  var currentPlacement;

  var _self_ = this;

  var _isMobile_ = /Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(navigator.appVersion);
  var _isNeedUserInteraction_ = true;
  var _wasClick_ = false;

  // загружена ли реклама
  // у нас может быть несколько плейсментов
  // и чтобы избегать нескольких загрузок сделали флажок
  // и будем использовать при показе рекламы, поскольку менеджер
  // будет думать, что реклама есть, а она могла не успеть еще загрузиться
  var _advertisementIsLoaded = false;

  // таймаут появления крестика закрытия рекламы
  this.closeBtnTimeout = '-1';
  this.closeBtnTimeoutStart = '-1';

  // инициализация
  this.init = function() {
    log('Init');
    callback(this.S3E_HTML5ADS_IDLE);
  };

  // установка коллбэка
  this.setCallback = function(callback) {
    log('Set callback');
    _callback_ = callback;
  };

  // установка контейнера для отображения рекламного баннера
  this.setAdContainer = function(adContainer) {
    log('Set adContainer');
    _adContainer_ = adContainer;
  };

  // установка контейнера для воспроизведения видеорекламы
  this.setVideoContent = function(videoContent) {
    log('Set videoContent');
    _videoContent_ = videoContent;
  };
  
  // установка консоли для вывода сообщений
  this.setConsole = function(callback) {
    _console_ = callback;
  };

  // включение тестового режима
  this.setTestmode = function(testmode) {
    log('Test mode = ' + (testmode ? 'on' : 'off'));
    _testmode_ = testmode;
  };

  this.configureReInit = function(params) {
	configureIma.bind(this)();
	
	function configureIma () {
  		log('configureIma - started!');
      // создаем рекламный контейнер из контейнера для видеорекламы и контейнера для баннеров
  		createAdDisplayContainer();
  		var adsLoader = new google.ima.AdsLoader(adDisplayContainer);
      // слушатели успеха инициализации загрузчика рекламы
  		adsLoader.addEventListener(
  		  google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,
  		  onAdsManagerLoaded.bind(this),
  		  false);
  		adsLoader.addEventListener(
  		  google.ima.AdErrorEvent.Type.AD_ERROR,
  		  onAdError.bind(this),
  		  false);

  		_videoContent_.onended = function() {
        adsLoader.contentComplete();
      };

  		var adsRequest = new google.ima.AdsRequest();
  		
      // получение параметров рекламы из params
  		for (var field in params) {
    		if (!params.hasOwnProperty(field)) continue;
        if (field === 'providerName') {
          log('Provider name = ' + params[field]);
          this.name = params[field];
          continue;
        }
        if (field === 'closeBtnTimeout') {
          log('Set timeout for closeBtn = ' + params[field]);
          this.closeBtnTimeout = params[field];
		  this.closeBtnTimeoutStart = params[field];
          continue;
        }
		if(currentPlacement == 'preroll') {
			if (field === 'preroll') {
				// бывает, что от rmsetup прилетает битый закодированный url
				// заменяем битые символы на нормальные
				adsRequest['adTagUrl'] = params[field].replace(/0X1.7F3C80016925P-1025/g, '%3A').replace(/0.000000/g, "%2F");
				log('Set value for adTagUrl preroll = ' + adsRequest['adTagUrl']);
  				continue;
  			}
		} else if(currentPlacement == 'midroll') {
			if (field === 'midroll') {
				// бывает, что от rmsetup прилетает битый закодированный url
				// заменяем битые символы на нормальные
				adsRequest['adTagUrl'] = params[field].replace(/0X1.7F3C80016925P-1025/g, '%3A').replace(/0.000000/g, "%2F");
				log('Set value for adTagUrl midroll = ' + adsRequest['adTagUrl']);
  				continue;
  			}
		} else if(currentPlacement == 'rewarded') {
			if (field === 'rewarded') {
				// бывает, что от rmsetup прилетает битый закодированный url
				// заменяем битые символы на нормальные
				adsRequest['adTagUrl'] = params[field].replace(/0X1.7F3C80016925P-1025/g, '%3A').replace(/0.000000/g, "%2F");
				log('Set value for adTagUrl rewarded= ' + adsRequest['adTagUrl']);
  				continue;
  			}
		} else {
  			if (field === 'adTagUrl') {
          // бывает, что от rmsetup прилетает битый закодированный url
          // заменяем битые символы на нормальные
          adsRequest[field] = params[field].replace(/0X1.7F3C80016925P-1025/g, '%3A').replace(/0.000000/g, "%2F");
          log('Set value for adTagUrl = ' + adsRequest[field]);
  				continue;
  			}
		 }
    		adsRequest[field] = params[field];
    	}

      // запрос на получение рекламы
  		adsLoader.requestAds(adsRequest);
  		
  		if (initialSize) {
  			this.resize(initialSize.width, initialSize.height, initialSize.fullscreen);
  			initialSize = null;
  		}
  	}
  
  };
  // загрузка ima3.js и инициализация загрузчика рекламы
  // params - json с параметрами рекламы
  this.configure = function(params) {
    log('Configure - check script');

    // сохраняем все параметры, чтобы выполнять переинит
    //if (loadingNum == 0)
      savedParams = params;
	
    // выполняем проверку загружен ли внешний скрипт
    // загружен - переходим дальше на инициализацию загрузчика рекламы
    // не загружен - пытаемся загрузить и переходим дальше, если успех
  	if (!checkIma()) {
  		loadIma(ImaLoadedSuccesfuly.bind(this), function () {  
        log('Configure - script loading error!');
  			callback(this.S3E_HTML5ADS_INIT_FAIL);
  		}.bind(this));
  		return;
  	}
  	
  	log('Configure - script loaded!');
  	callback(this.S3E_HTML5ADS_INIT_SUCCESS);
  	
  	function checkIma () {
      return window.google && window.google.ima;
  	}
  	
    // загрузка внешнего скрипта
  	function loadIma (success, error) {
  		var script = document.createElement('script');
  		script.src = './patch/google/ima3.js?jhttps://imasdk.googleapis.com/js/sdkloader/ima3.js';
  		script.onload = function () {
		  if (!checkIma()) {
			  error();
			  return;
		  }
		  success();
		};
  		script.onerror = error;
  		document.body.appendChild(script);
  	}
  	
	// инициализация загрузчика рекламы
  	function ImaLoadedSuccesfuly () {
		log('Configure - script loaded!');
		callback(this.S3E_HTML5ADS_INIT_SUCCESS);
	}
    // инициализация загрузчика рекламы
  };

  // меняем видимость сразу всем возможным контейнерам
  var changeVisibility = function(isVisible) {
    if (isVisible) {
      _adContainer_.style.visibility = 'visible';
      _videoContent_.style.visibility = 'visible';
      document.getElementById(_self_.name + 'Div').style.display = 'block';
      if (_adContainer_.parentNode) {
        _adContainer_.parentNode.style.visibility = 'visible'; 
      }
    } else {
      _adContainer_.style.visibility = 'hidden';
      _videoContent_.style.visibility = 'hidden'; 
	  if(document.getElementById(_self_.name + 'Div')) {
      document.getElementById(_self_.name + 'Div').style.display = 'none'; 
	  }
      if (_adContainer_.parentNode) {
        _adContainer_.parentNode.style.visibility = 'hidden';
      }
    }
  };

  // создать контейнер для отображения рекламы
  // здесь и находим div, в котором будет проигрываться реклама
  // ставим ему ID, чтобы в дальнейшем следить за размером рекламы
  // а то IMA SDK умеет его ломать
  var createAdDisplayContainer = function() {
    if (!adDisplayContainer)
      adDisplayContainer = new google.ima.AdDisplayContainer(_adContainer_, _videoContent_);
    for (var i = 0; i < _adContainer_.childNodes.length; i++) {
      if (_adContainer_.childNodes[i].localName === 'div' && !_adContainer_.childNodes[i].id) {
        var html5AdsDiv = document.getElementById(_self_.name + 'Div');
        if (!html5AdsDiv) {
          _adContainer_.childNodes[i].id = _self_.name + 'Div';
        } else {
          log('Div with ID = ' + _self_.name + 'Div is already exist!')
        }
      }
    }
  };

  // запускаем интервал, который меняет стиль div и iframe
  // используется, когда размер нашего canvas и div'а рекламы расходятся
  // тогда на мобильных часто реклама вне экрана
  // а на больших экранах - мелкая и в углу
  var fixAdContainersSize = function() {
    var html5AdsDiv = document.getElementById(_self_.name + 'Div');
    if (html5AdsDiv) {
      var html5AdsIFrame = html5AdsDiv.childNodes;

      // фикс запускам еще до старта рекламы
      // с интервалом, а через время удаляем интервал
      var fixInterval = setInterval(function() {
        html5AdsDiv.style.width = '100%';
        html5AdsDiv.style.height = '100%';
        if (html5AdsIFrame.length > 0) {
          for (var i = 0; i < html5AdsIFrame.length; i++) {
            // внутри div'а есть iframe с рекламой
            // который имеет высоту и ширину в пикселях
            // находим его и заменяем размеры на проценты
            if (html5AdsIFrame[i].localName === 'iframe') {
              html5AdsIFrame[i].style.width = '100%';
              html5AdsIFrame[i].style.height = '100%';
            }
          }
        }
      }, 100);

      setTimeout(function() {
        clearInterval(fixInterval);
      }, 5000);
    }
  };

  // сохранение параметров загрузки рекламы
  // переинициализация провайдера, если требуется
  // и загрузка рекламы
  this.loadAd = function(placementName,width, height, fullscreen) {
    log('Load ad');

	currentPlacement = placementName;
    if (_advertisementIsLoaded) {
      callback(this.S3E_HTML5ADS_AD_IS_AVAILABLE);
      return;
    }

    loadingNum++;
    savedWidth = width;
    savedHeight = height;
    savedFullscreen = fullscreen;
    log('Loading num = ' + loadingNum);
    //if (loadingNum > 1) {
      // если вторая загрузка рекламы
      // то сперва переинициализируемся
      // а с инициализации уже вызываем загрузку
      _self_.configureReInit(savedParams);
    //}
    //else {
      // настоящая загрузка рекламы
      //_self_.loadingFromSavedParams();
    //}
  };

  // загрузка рекламы из сохраненных ранее параметров
  this.loadingFromSavedParams = function() {
    log('Loading from saved params');

    var mode = google.ima.ViewMode.NORMAL;
    if (savedFullscreen !== undefined)
      mode = savedFullscreen ? google.ima.ViewMode.FULLSCREEN : google.ima.ViewMode.NORMAL;
    _videoContent_.load();
    adDisplayContainer.initialize();
    try {
      adsManager.init(checkParam(savedWidth, 640), checkParam(savedHeight, 360), mode);
    } catch (adError) {
      log('AdError = ' + adError);
      callback(this.S3E_HTML5ADS_AD_ISNT_AVAILABLE);
    }
  };

  // изменение размера рекламных контейнеров
  this.resize = function(width, height, fullscreen) {
    log('Resize');

  	if (!window.google || (window.google && !window.google.ima) || !adsManager) {
  		initialSize = { width: width, height: height, fullscreen: fullscreen };
  		return;
  	}
    var mode = fullscreen ? google.ima.ViewMode.FULLSCREEN : google.ima.ViewMode.NORMAL;
    adsManager.resize(checkParam(width, 640), checkParam(height, 360), mode);
    fixAdContainersSize();
  };

  // вопроизведение рекламы
  this.showAd = function(placementName) {
    log('Show ad');

	//currentPlacement = placementName;
    if (!_advertisementIsLoaded) {
      callback(this.S3E_HTML5ADS_AD_ISNT_AVAILABLE);
      return;
    } else {
      _advertisementIsLoaded = false;
    }

    try {
      if (_isNeedUserInteraction_ && !_wasClick_) {
        adsManager.setVolume(0);
      } else {
        adsManager.setVolume(1);
      }
      adsManager.start();
      fixAdContainersSize();
    } catch (adError) {
      log('AdError = ' + adError);
      callback(this.S3E_HTML5ADS_AD_STARTING_FAIL);
    }
  };

  // остановка просмотра рекламы
  this.stopAd = function() {
    log('Stop ad');

    onSafeAdPause();
    changeVisibility(false);
    callback(this.S3E_HTML5ADS_AD_SERVING_INTERRUPTED);
    if (!adsManager || adsManager && adsManager.getRemainingTime() == -1) {
      callback(this.S3E_HTML5ADS_INIT_FAIL);
    }
  };

  // при успешной инициализации менеджепра рекламы
  var onAdsManagerLoaded = function(adsManagerLoadedEvent) {
    var adsRenderingSettings = new google.ima.AdsRenderingSettings();
    adsManager = adsManagerLoadedEvent.getAdsManager(
        _videoContent_, adsRenderingSettings);

    if (!adsManager) {
      log('AdError = NO ADS MANAGER!')
      callback(this.S3E_HTML5ADS_AD_SERVING_INTERRUPTED);
      return;
    }

    adsManager.addEventListener(
        google.ima.AdErrorEvent.Type.AD_ERROR,
        onAdError.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,
        onContentPauseRequested.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,
        onContentResumeRequested.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.ALL_ADS_COMPLETED,
        onAdEvent.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.LOADED,
        onAdEvent.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.STARTED,
        onAdEvent.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.COMPLETE,
        onAdEvent.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.CLICK,
        onAdEvent.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.SKIPPED,
        onAdEvent.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.USER_CLOSE,
        onAdEvent.bind(this));

    //callback(this.S3E_HTML5ADS_INIT_SUCCESS);

    //if (loadingNum > 1) {
      _self_.loadingFromSavedParams();
    //}
  };

  // события от рекламного менеджера
  var onAdEvent = function(adEvent) {
    var ad = adEvent.getAd();
    switch (adEvent.type) {
      case google.ima.AdEvent.Type.LOADED:
      {
        if (ad.isLinear()) {
          _advertisementIsLoaded = true;
		  this.closeBtnTimeout = this.closeBtnTimeoutStart;
		  if(typeof ad.getSkipTimeOffset == 'function') {
			var adSenseTimeout = ad.getSkipTimeOffset();
		  if(adSenseTimeout != -1 && parseInt(adSenseTimeout) * 1000 < parseInt(this.closeBtnTimeoutStart)) {
			this.closeBtnTimeout = parseInt(adSenseTimeout) * 1000 + 1000;
		  }		  
		  }
          callback(this.S3E_HTML5ADS_AD_IS_AVAILABLE);
        }
        else {
          callback(this.S3E_HTML5ADS_AD_ISNT_AVAILABLE);
        }
        break;
      }
      case google.ima.AdEvent.Type.STARTED:
      {
        callback(this.S3E_HTML5ADS_AD_STARTING_SUCCESS);
        changeVisibility(true);
        break;
      }
      case google.ima.AdEvent.Type.COMPLETE:
      {
        onSafeAdPause();
        callback(this.S3E_HTML5ADS_AD_IS_SHOWN_SUCCESSFULLY);
        changeVisibility(false); 
        break;
      }
      case google.ima.AdEvent.Type.CLICK:
      {
        callback(this.S3E_HTML5ADS_AD_WAS_CLICKED);
        changeVisibility(true);
        break;
      }
      case google.ima.AdEvent.Type.SKIPPED:
      {
        onSafeAdPause();
        callback(this.S3E_HTML5ADS_AD_SERVING_INTERRUPTED);
        changeVisibility(false);
        break;
      }
      case google.ima.AdEvent.Type.USER_CLOSE:
      {
        onSafeAdPause();
        callback(this.S3E_HTML5ADS_AD_SERVING_INTERRUPTED);
        changeVisibility(false);
        break;
      }
    }
  }

  // ошибка инициализации рекламы
  var onAdError = function(adErrorEvent) {
    log('AdErrorEvent = ' + adErrorEvent.getError())
    callback(this.S3E_HTML5ADS_AD_SERVING_INTERRUPTED);
    if (adsManager) {
      adsManager.destroy();
    }
  };

  // безопасный метод остановки рекламы
  var onSafeAdPause = function() {
    log('On safe ad pause');

    if (_videoContent_)
      _videoContent_.pause();
    if (adsManager)
      adsManager.pause();
    var clsBtn = document.getElementById('s3eHTML5AdsCloseButton');
    if (clsBtn)
      _adContainer_.removeChild(clsBtn);
  }

  var onContentPauseRequested = function() {
    log('On content pause requested');
  };

  var onContentResumeRequested = function() {
    log('On content resume requested');
  };

  var log = function(message) {
    if (typeof _console_ === 'function') {
      _console_(_self_.name + ': ' + message);
    }
  };

  var callback = function(result) {
    if (_callback_) {
      log('Callback! Result = ' + result);
      _callback_(_self_.name, result);
    }
  };

  // отслеживаем первый клик на экране
  // используется для включения звука на мобильный устройствах
  var mouseEvent = function() {
    _wasClick_ = true;
    window.removeEventListener('mouseup', mouseEvent, false);
    window.removeEventListener('touchend', mouseEvent, false);
    window.removeEventListener('touchcancel', mouseEvent, false);
  };
  
  window.addEventListener('mouseup', mouseEvent, false);
  window.addEventListener('touchend', mouseEvent, false);
  window.addEventListener('touchcancel', mouseEvent, false);

  return this;
}).bind(s3eLifeStreet)();
var s3eiWin = {};
(function() {
  this.name = 's3eiWin';

  // коллбэк
  var _callback_;

  // конкретные контейнеры для видео и баннера
  // в iWin их запоминаем, чтобы никогда не включать
  var _adContainer_;
  var _videoContent_;

  // список возможных коллбэков
  this.S3E_IWIN_INIT_FAIL                       = 0;
  this.S3E_IWIN_INIT_SUCCESS                    = 1;
  this.S3E_IWIN_AD_ISNT_AVAILABLE               = 2;
  this.S3E_IWIN_AD_IS_AVAILABLE                 = 3;
  this.S3E_IWIN_AD_STARTING_FAIL                = 4;
  this.S3E_IWIN_AD_STARTING_SUCCESS             = 5;
  this.S3E_IWIN_AD_SERVING_INTERRUPTED          = 6;
  this.S3E_IWIN_AD_IS_SHOWN_SUCCESSFULLY        = 7;
  this.S3E_IWIN_AD_WAS_CLICKED                  = 8;
  this.S3E_IWIN_IDLE                            = 9;

  // консоль
  var _console_;

  var successInit = false;

  var _self_ = this;

  // таймаут появления крестика закрытия рекламы
  // выставили -1 и не меняем, чтобы ни в коем
  // случае не пытались его создать
  this.closeBtnTimeout = '-1';

  // инициализация
  this.init = function() {
    log('init');
    callback(this.S3E_IWIN_IDLE);
    log('Callback - S3E_IWIN_IDLE');
  };

  // установка коллбэка
  this.setCallback = function(callback) {
    log('setCallback');
    _callback_ = callback;
  };

  this.setAdContainer = function(adContainer) {
    log('setAdContainer');
    _adContainer_ = adContainer;
  };

  this.setVideoContent = function(videoContent) {
    log('setVideoContent');
    _videoContent_ = videoContent;
  };
  
  // установка консоли для вывода сообщений
  this.setConsole = function(callback) {
    _console_ = callback;
  };

  // включение тестового режима
  this.setTestmode = function(testmode) {
    log('testmode is unavailable for iWin');
  };

  // если есть iWin, то спокойно скрываем
  // эта контейнеры нам больше не нужны
  var containersBurying = function() {
    _adContainer_.style.visibility = 'hidden';
    _videoContent_.style.visibility = 'hidden';
    _adContainer_.parentNode.style.visibility = 'hidden';
  };

  this.configure = function(params) {
	  log('configure');
	  successInit = false;
  	// единственная проверка есть ли реклама
  	// проверить наличие iWin SDK
  	if (typeof iConsole === 'object') {
  	  // получение параметров рекламы из params 
  	  for (var field in params) {
      	if (!params.hasOwnProperty(field))
          continue;
        if (field === 'providerName') {
          log('providerName: ' + params[field]);
          this.name = params[field];
          continue;
        }
      }
  	  successInit = true;
      containersBurying();
      callback(this.S3E_IWIN_INIT_SUCCESS);
      log('Callback - S3E_IWIN_INIT_SUCCESS');
  	} else {
  	  callback(this.S3E_IWIN_INIT_FAIL);
  	  log('Callback - S3E_IWIN_INIT_FAIL');
  	}
  }

  // загрузка рекламы
  // в данном случае - просто коллбек, что мы готовы, если есть iConsole
  this.loadAd = function(placementName,width, height, fullscreen) {
    log('loadAd');
    if (successInit) {
      callback(this.S3E_IWIN_AD_IS_AVAILABLE);
      log('Callback - S3E_IWIN_AD_IS_AVAILABLE');
    } else {
      callback(this.S3E_IWIN_AD_ISNT_AVAILABLE);
      log('Callback - S3E_IWIN_AD_ISNT_AVAILABLE');
    }
  };

  // изменение размера рекламных контейнеров
  this.resize = function(width, height, fullscreen) {
    log('resize is unavailable for iWin');
  };

  // вопроизведение рекламы
  this.showAd = function(placementName) {
    log('showAd');
    containersBurying();
    if (successInit) {
      iConsole.ads.show({ type: 'interstitial' });
      callback(this.S3E_IWIN_AD_STARTING_SUCCESS);
      log('Callback - S3E_IWIN_AD_STARTING_SUCCESS');
      // через 15 секунд подаем сигнал, что мы просмотрели рекламу
      // поскольку от iWin нет никаких коллбеков
      setTimeout(function() {
        callback(_self_.S3E_IWIN_AD_IS_SHOWN_SUCCESSFULLY);
        log('Callback - S3E_IWIN_AD_IS_SHOWN_SUCCESSFULLY');
      }, 15000);
    } else {
      callback(this.S3E_IWIN_AD_STARTING_FAIL);
      log('Callback - S3E_IWIN_AD_STARTING_FAIL');
    }
  };

  // остановка просмотра рекламы
  this.stopAd = function() {
    log('stopAd');
    callback(this.S3E_IWIN_AD_SERVING_INTERRUPTED);
    log('Callback - S3E_IWIN_AD_SERVING_INTERRUPTED');
  };

  var log = function(message) {
    if (typeof _console_ === 'function') {
      _console_(_self_.name + ': ' + message);
	  }
  };

  var callback = function(result) {
    if (_callback_)
      _callback_(_self_.name, result);
  };

  return this;
}).bind(s3eiWin)();
var s3eGoogleAdSense = {};
(function() {
  this.name = 's3eGoogleAdSense';
  
  var checkParam = function(param, defaulf) {
    param = param >= 100 ? param : defaulf;
    return Math.max(param, 100);
  };

  // контейнеры для рекламы
  var adDisplayContainer;

  // конкретные контейнеры для видео и баннера
  var _adContainer_;
  var _videoContent_;

  // менеджер рекламы
  var adsManager;

  // коллбэк
  var _callback_;
  
  var initialSize;

  // список возможных коллбэков
  this.S3E_HTML5ADS_INIT_FAIL                       = 0;
  this.S3E_HTML5ADS_INIT_SUCCESS                    = 1;
  this.S3E_HTML5ADS_AD_ISNT_AVAILABLE               = 2;
  this.S3E_HTML5ADS_AD_IS_AVAILABLE                 = 3;
  this.S3E_HTML5ADS_AD_STARTING_FAIL                = 4;
  this.S3E_HTML5ADS_AD_STARTING_SUCCESS             = 5;
  this.S3E_HTML5ADS_AD_SERVING_INTERRUPTED          = 6;
  this.S3E_HTML5ADS_AD_IS_SHOWN_SUCCESSFULLY        = 7;
  this.S3E_HTML5ADS_AD_WAS_CLICKED                  = 8;
  this.S3E_HTML5ADS_IDLE                            = 9;

  // консоль
  var _console_;

  // включение тестового режима
  var _testmode_;

  // сохраненные параметры для переинициализации провайдера
  var loadingNum = 0;
  var savedParams;
  var savedWidth;
  var savedHeight;
  var savedFullscreen;

  var _self_ = this;

  var _isMobile_ = /Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(navigator.appVersion);
  var _isNeedUserInteraction_ = true;
  var _wasClick_ = false;

  // загружена ли реклама
  // у нас может быть несколько плейсментов
  // и чтобы избегать нескольких загрузок сделали флажок
  // и будем использовать при показе рекламы, поскольку менеджер
  // будет думать, что реклама есть, а она могла не успеть еще загрузиться
  var _advertisementIsLoaded = false;

  // таймаут появления крестика закрытия рекламы
  this.closeBtnTimeout = '-1';
  this.closeBtnTimeoutStart = '-1';

  // инициализация
  this.init = function() {
    log('Init');
    callback(this.S3E_HTML5ADS_IDLE);
  };

  // установка коллбэка
  this.setCallback = function(callback) {
    log('Set callback');
    _callback_ = callback;
  };

  // установка контейнера для отображения рекламного баннера
  this.setAdContainer = function(adContainer) {
    log('Set adContainer');
    _adContainer_ = adContainer;
  };

  // установка контейнера для воспроизведения видеорекламы
  this.setVideoContent = function(videoContent) {
    log('Set videoContent');
    _videoContent_ = videoContent;
  };
  
  // установка консоли для вывода сообщений
  this.setConsole = function(callback) {
    _console_ = callback;
  };

  // включение тестового режима
  this.setTestmode = function(testmode) {
    log('Test mode = ' + (testmode ? 'on' : 'off'));
    _testmode_ = testmode;
  };
  
  this.configureReInit = function(params) {
	configureIma.bind(this)();
	
	  // инициализация загрузчика рекламы
    function configureIma () {
      log('configureIma - started!');
      // создаем рекламный контейнер из контейнера для видеорекламы и контейнера для баннеров
      createAdDisplayContainer();
      var adsLoader = new google.ima.AdsLoader(adDisplayContainer);
      // слушатели успеха инициализации загрузчика рекламы
      adsLoader.addEventListener(
        google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,
        onAdsManagerLoaded.bind(this),
        false);
      adsLoader.addEventListener(
        google.ima.AdErrorEvent.Type.AD_ERROR,
        onAdError.bind(this),
        false);

      _videoContent_.onended = function() {
        adsLoader.contentComplete();
      };

      var adsRequest = new google.ima.AdsRequest();
      
      // получение параметров рекламы из params
      for (var field in params) {
        if (!params.hasOwnProperty(field)) continue;
        if (field === 'providerName') {
          log('Provider name = ' + params[field]);
          this.name = params[field];
          continue;
        }
        if (field === 'closeBtnTimeout') {
          log('Set timeout for closeBtn = ' + params[field]);
          this.closeBtnTimeout = params[field];
		  this.closeBtnTimeoutStart = params[field];
          continue;
        }
        if (field === 'adTagUrl') {
          // бывает, что от rmsetup прилетает битый закодированный url
          // заменяем битые символы на нормальные
          adsRequest[field] = params[field].replace(/0X1.7F3C80016925P-1025/g, '%3A').replace(/0.000000/g, "%2F");
          log('Set value for adTagUrl = ' + adsRequest[field]);
          continue;
        }
        adsRequest[field] = params[field];
      }

      // запрос на получение рекламы
      adsLoader.requestAds(adsRequest);
      
      if (initialSize) {
        this.resize(initialSize.width, initialSize.height, initialSize.fullscreen);
        initialSize = null;
      }
    }
  
	
  };

  // загрузка ima3.js и инициализация загрузчика рекламы
  // params - json с параметрами рекламы
  this.configure = function(params) {
    log('Configure - check script');

    // сохраняем все параметры, чтобы выполнять переинит
    //if (loadingNum == 0)
      savedParams = params;
  
    // выполняем проверку загружен ли внешний скрипт
    // загружен - переходим дальше на инициализацию загрузчика рекламы
    // не загружен - пытаемся загрузить и переходим дальше, если успех
    if (!checkIma()) {
      loadIma(ImaLoadedSuccesfuly.bind(this), function () {  
        log('Configure - script loading error!');
        callback(this.S3E_HTML5ADS_INIT_FAIL);
      }.bind(this));
      return;
    }
    
    log('Configure - script loaded!');
  	callback(this.S3E_HTML5ADS_INIT_SUCCESS);
    
    function checkIma () {
      return window.google && window.google.ima;
    }
    
    // загрузка внешнего скрипта
    function loadIma (success, error) {
      var script = document.createElement('script');
      script.src = './patch/google/ima3.js?jhttps://imasdk.googleapis.com/js/sdkloader/ima3.js';
      script.onload = function () {
		  if (!checkIma()) {
			  error();
			  return;
		  }
		  success();
	  };
      script.onerror = error;
      document.body.appendChild(script);
    }
    
	// инициализация загрузчика рекламы
  	function ImaLoadedSuccesfuly () {
		log('Configure - script loaded!');
		callback(this.S3E_HTML5ADS_INIT_SUCCESS);
	}
	
  };

  // меняем видимость сразу всем возможным контейнерам
  var changeVisibility = function(isVisible) {
    if (isVisible) {
      _adContainer_.style.visibility = 'visible';
      _videoContent_.style.visibility = 'visible';
      document.getElementById(_self_.name + 'Div').style.display = 'block';
      if (_adContainer_.parentNode) {
        _adContainer_.parentNode.style.visibility = 'visible'; 
      }
    } else {
      _adContainer_.style.visibility = 'hidden';
      _videoContent_.style.visibility = 'hidden'; 
	  if(document.getElementById(_self_.name + 'Div')) {
		document.getElementById(_self_.name + 'Div').style.display = 'none'; 
	   }      
      if (_adContainer_.parentNode) {
        _adContainer_.parentNode.style.visibility = 'hidden';
      }
    }
  };

  // создать контейнер для отображения рекламы
  // здесь и находим div, в котором будет проигрываться реклама
  // ставим ему ID, чтобы в дальнейшем следить за размером рекламы
  // а то IMA SDK умеет его ломать
  var createAdDisplayContainer = function() {
    if (!adDisplayContainer)
      adDisplayContainer = new google.ima.AdDisplayContainer(_adContainer_, _videoContent_);
    for (var i = 0; i < _adContainer_.childNodes.length; i++) {
      if (_adContainer_.childNodes[i].localName === 'div' && !_adContainer_.childNodes[i].id) {
        var html5AdsDiv = document.getElementById(_self_.name + 'Div');
        if (!html5AdsDiv) {
          _adContainer_.childNodes[i].id = _self_.name + 'Div';
        } else {
          log('Div with ID = ' + _self_.name + 'Div is already exist!')
        }
      }
    }
  };

  // запускаем интервал, который меняет стиль div и iframe
  // используется, когда размер нашего canvas и div'а рекламы расходятся
  // тогда на мобильных часто реклама вне экрана
  // а на больших экранах - мелкая и в углу
  var fixAdContainersSize = function() {
    var html5AdsDiv = document.getElementById(_self_.name + 'Div');
    if (html5AdsDiv) {
      var html5AdsIFrame = html5AdsDiv.childNodes;

      // фикс запускам еще до старта рекламы
      // с интервалом, а через время удаляем интервал
      var fixInterval = setInterval(function() {
        html5AdsDiv.style.width = '100%';
        html5AdsDiv.style.height = '100%';
        if (html5AdsIFrame.length > 0) {
          for (var i = 0; i < html5AdsIFrame.length; i++) {
            // внутри div'а есть iframe с рекламой
            // который имеет высоту и ширину в пикселях
            // находим его и заменяем размеры на проценты
            if (html5AdsIFrame[i].localName === 'iframe') {
              html5AdsIFrame[i].style.width = '100%';
              html5AdsIFrame[i].style.height = '100%';
            }
          }
        }
      }, 100);

      setTimeout(function() {
        clearInterval(fixInterval);
      }, 5000);
    }
  };

  // сохранение параметров загрузки рекламы
  // переинициализация провайдера, если требуется
  // и загрузка рекламы
  this.loadAd = function(placementName,width, height, fullscreen) {
    log('Load ad');

    if (_advertisementIsLoaded) {
      callback(this.S3E_HTML5ADS_AD_IS_AVAILABLE);
      return;
    }

    loadingNum++;
    savedWidth = width;
    savedHeight = height;
    savedFullscreen = fullscreen;
    log('Loading num = ' + loadingNum);
    //if (loadingNum > 1) {
      // если вторая загрузка рекламы
      // то сперва переинициализируемся
      // а с инициализации уже вызываем загрузку
      _self_.configureReInit(savedParams);
    //}
    //else {
      // настоящая загрузка рекламы
      //_self_.loadingFromSavedParams();
    //}
  };

  // загрузка рекламы из сохраненных ранее параметров
  this.loadingFromSavedParams = function() {
    log('Loading from saved params');

    var mode = google.ima.ViewMode.NORMAL;
    if (savedFullscreen !== undefined)
      mode = savedFullscreen ? google.ima.ViewMode.FULLSCREEN : google.ima.ViewMode.NORMAL;
    _videoContent_.load();
    adDisplayContainer.initialize();
	log('adDisplayContainer.initialize()');
    try {
      adsManager.init(checkParam(savedWidth, 640), checkParam(savedHeight, 360), mode);
    } catch (adError) {
      log('AdError = ' + adError);
      callback(this.S3E_HTML5ADS_AD_ISNT_AVAILABLE);
    }
  };

  // изменение размера рекламных контейнеров
  this.resize = function(width, height, fullscreen) {
    log('Resize');

    if (!window.google || (window.google && !window.google.ima) || !adsManager) {
      initialSize = { width: width, height: height, fullscreen: fullscreen };
      return;
    }
    var mode = fullscreen ? google.ima.ViewMode.FULLSCREEN : google.ima.ViewMode.NORMAL;
    adsManager.resize(checkParam(width, 640), checkParam(height, 360), mode);
    fixAdContainersSize();
  };

  // вопроизведение рекламы
  this.showAd = function(placementName) {
    log('Show ad');

    if (!_advertisementIsLoaded) {
      callback(this.S3E_HTML5ADS_AD_ISNT_AVAILABLE);
      return;
    } else {
      _advertisementIsLoaded = false;
    }

    try {
      if (_isNeedUserInteraction_ && !_wasClick_ || _isMobile_) {
		log('setVolume(0) ' + _isMobile_);
        adsManager.setVolume(0);
      } else {
		log('setVolume(1) ' + _isMobile_);
        adsManager.setVolume(1);
      }
      adsManager.start();
      fixAdContainersSize();
    } catch (adError) {
      log('AdError = ' + adError);
      callback(this.S3E_HTML5ADS_AD_STARTING_FAIL);
    }
  };

  // остановка просмотра рекламы
  this.stopAd = function() {
    log('Stop ad');

    onSafeAdPause();
    changeVisibility(false);
    callback(this.S3E_HTML5ADS_AD_SERVING_INTERRUPTED);
    if (!adsManager || adsManager && adsManager.getRemainingTime() == -1) {
      callback(this.S3E_HTML5ADS_INIT_FAIL);
    }
  };

  // при успешной инициализации менеджепра рекламы
  var onAdsManagerLoaded = function(adsManagerLoadedEvent) {
    var adsRenderingSettings = new google.ima.AdsRenderingSettings();
    adsManager = adsManagerLoadedEvent.getAdsManager(
        _videoContent_, adsRenderingSettings);

    if (!adsManager) {
      log('AdError = NO ADS MANAGER!')
      callback(this.S3E_HTML5ADS_AD_SERVING_INTERRUPTED);
      return;
    }

    adsManager.addEventListener(
        google.ima.AdErrorEvent.Type.AD_ERROR,
        onAdError.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,
        onContentPauseRequested.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,
        onContentResumeRequested.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.ALL_ADS_COMPLETED,
        onAdEvent.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.LOADED,
        onAdEvent.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.STARTED,
        onAdEvent.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.COMPLETE,
        onAdEvent.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.CLICK,
        onAdEvent.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.SKIPPED,
        onAdEvent.bind(this));
    adsManager.addEventListener(
        google.ima.AdEvent.Type.USER_CLOSE,
        onAdEvent.bind(this));

    //callback(this.S3E_HTML5ADS_INIT_SUCCESS);

    //if (loadingNum > 1) {
      _self_.loadingFromSavedParams();
    //}
  };

  // события от рекламного менеджера
  var onAdEvent = function(adEvent) {
    var ad = adEvent.getAd();
    switch (adEvent.type) {
      case google.ima.AdEvent.Type.LOADED:
      {
        if (ad.isLinear()) {
          _advertisementIsLoaded = true;
		  this.closeBtnTimeout = this.closeBtnTimeoutStart;		  
		  if(typeof ad.getSkipTimeOffset == 'function') {
			var adSenseTimeout = ad.getSkipTimeOffset();
			if(adSenseTimeout != -1 && parseInt(adSenseTimeout) * 1000 < parseInt(this.closeBtnTimeoutStart)) {
				this.closeBtnTimeout = parseInt(adSenseTimeout) * 1000 + 1000;
			}		  
		  }
          callback(this.S3E_HTML5ADS_AD_IS_AVAILABLE);
        }
        else {
          callback(this.S3E_HTML5ADS_AD_ISNT_AVAILABLE);
        }
        break;
      }
      case google.ima.AdEvent.Type.STARTED:
      {
        callback(this.S3E_HTML5ADS_AD_STARTING_SUCCESS);
        changeVisibility(true);
        break;
      }
      case google.ima.AdEvent.Type.COMPLETE:
      {
        onSafeAdPause();
        callback(this.S3E_HTML5ADS_AD_IS_SHOWN_SUCCESSFULLY);
        changeVisibility(false); 
        break;
      }
      case google.ima.AdEvent.Type.CLICK:
      {
        callback(this.S3E_HTML5ADS_AD_WAS_CLICKED);
        changeVisibility(true);
        break;
      }
      case google.ima.AdEvent.Type.SKIPPED:
      {
        onSafeAdPause();
        callback(this.S3E_HTML5ADS_AD_SERVING_INTERRUPTED);
        changeVisibility(false);
        break;
      }
      case google.ima.AdEvent.Type.USER_CLOSE:
      {
        onSafeAdPause();
        callback(this.S3E_HTML5ADS_AD_SERVING_INTERRUPTED);
        changeVisibility(false);
        break;
      }
    }
  }

  // ошибка инициализации рекламы
  var onAdError = function(adErrorEvent) {
    log('AdErrorEvent = ' + adErrorEvent.getError())
    callback(this.S3E_HTML5ADS_AD_SERVING_INTERRUPTED);
    if (adsManager) {
      adsManager.destroy();
    }
  };

  // безопасный метод остановки рекламы
  var onSafeAdPause = function() {
    log('On safe ad pause');

    if (_videoContent_)
      _videoContent_.pause();
    if (adsManager)
      adsManager.pause();
    var clsBtn = document.getElementById('s3eHTML5AdsCloseButton');
    if (clsBtn)
      _adContainer_.removeChild(clsBtn);
  }

  var onContentPauseRequested = function() {
    log('On content pause requested');
  };

  var onContentResumeRequested = function() {
    log('On content resume requested');
  };

  var log = function(message) {
    if (typeof _console_ === 'function') {
      _console_(_self_.name + ': ' + message);
    }
  };

  var callback = function(result) {
    if (_callback_) {
      log('Callback! Result = ' + result);
      _callback_(_self_.name, result);
    }
  };

  // отслеживаем первый клик на экране
  // используется для включения звука на мобильный устройствах
  var mouseEvent = function() {
    _wasClick_ = true;
    window.removeEventListener('mouseup', mouseEvent, false);
    window.removeEventListener('touchend', mouseEvent, false);
    window.removeEventListener('touchcancel', mouseEvent, false);
  };
  
  window.addEventListener('mouseup', mouseEvent, false);
  window.addEventListener('touchend', mouseEvent, false);
  window.addEventListener('touchcancel', mouseEvent, false);

  return this;
}).bind(s3eGoogleAdSense)();
var s3eFBInstant = {};
(function() {
  this.name = 's3eFBInstant';

  // коллбэк
  var _callback_;

  // конкретные контейнеры для видео и баннера
  // в FBInstant их запоминаем, чтобы никогда не включать
  var _adContainer_;
  var _videoContent_;

  var placementId = null;
  var preloadedInterstitial = null;

  // список возможных коллбэков
  this.S3E_HTML5ADS_INIT_FAIL                       = 0;
  this.S3E_HTML5ADS_INIT_SUCCESS                    = 1;
  this.S3E_HTML5ADS_AD_ISNT_AVAILABLE               = 2;
  this.S3E_HTML5ADS_AD_IS_AVAILABLE                 = 3;
  this.S3E_HTML5ADS_AD_STARTING_FAIL                = 4;
  this.S3E_HTML5ADS_AD_STARTING_SUCCESS             = 5;
  this.S3E_HTML5ADS_AD_SERVING_INTERRUPTED          = 6;
  this.S3E_HTML5ADS_AD_IS_SHOWN_SUCCESSFULLY        = 7;
  this.S3E_HTML5ADS_AD_WAS_CLICKED                  = 8;
  this.S3E_HTML5ADS_IDLE                            = 9;

  // консоль
  var _console_;

  var successInit = false;

  var _self_ = this;

  // таймаут появления крестика закрытия рекламы
  // выставили -1 и не меняем, чтобы ни в коем
  // случае не пытались его создать
  this.closeBtnTimeout = '-1';

  // инициализация
  this.init = function() {
    log('init');
    callback(_self_.S3E_HTML5ADS_IDLE);
    log('Callback - S3E_HTML5ADS_IDLE');
  };

  // установка коллбэка
  this.setCallback = function(callback) {
    log('setCallback');
    _callback_ = callback;
  };

  this.setAdContainer = function(adContainer) {
    log('setAdContainer');
    _adContainer_ = adContainer;
  };

  this.setVideoContent = function(videoContent) {
    log('setVideoContent');
    _videoContent_ = videoContent;
  };
  
  // установка консоли для вывода сообщений
  this.setConsole = function(callback) {
    _console_ = callback;
  };

  // включение тестового режима
  this.setTestmode = function(testmode) {
    log('testmode is unavailable for FBInstant');
  };

  // если есть FBInstant, то спокойно скрываем
  // эта контейнеры нам больше не нужны
  var containersBurying = function() {
    _adContainer_.style.visibility = 'hidden';
    _videoContent_.style.visibility = 'hidden';
    _adContainer_.parentNode.style.visibility = 'hidden';
  };

  this.configure = function(params) {
	  log('configure');
	  successInit = false;
  	// проверить наличие FBInstant SDK
  	if (typeof FBInstant === 'object') {
  	  // получение параметров рекламы из params 
  	  for (var field in params) {
      	if (!params.hasOwnProperty(field))
          continue;
        if (field === 'providerName') {
          log('providerName: ' + params[field]);
          _self_.name = params[field];
          continue;
        }
        if (field === 'placementId') {
          log('placementId: ' + params[field]);
          placementId = params[field];
          continue;
        }
      }
      successInit = true;
      containersBurying();
      callback(_self_.S3E_HTML5ADS_INIT_SUCCESS);
      log('Callback - S3E_HTML5ADS_INIT_SUCCESS');
    } else {
      callback(_self_.S3E_HTML5ADS_INIT_FAIL);
      log('Callback - S3E_HTML5ADS_INIT_FAIL');
    }
  }

  // загрузка рекламы
  // в данном случае - просто коллбек, что мы готовы, если есть FBInstant
  this.loadAd = function(placementName,width, height, fullscreen) {
    log('loadAd');
    if (typeof s3eFBInstantConsole === 'object') {
      if (!s3eFBInstantConsole.getIsStarted()) {
        callback(_self_.S3E_HTML5ADS_AD_ISNT_AVAILABLE);
        log('Callback - S3E_HTML5ADS_AD_ISNT_AVAILABLE');
        log('Game is not started! Wait...');
        return;
      }
    }
    if (successInit) {
      var supportedAPIs = FBInstant.getSupportedAPIs();
      if (placementId != null && placementId != '' && supportedAPIs.includes('getInterstitialAdAsync')) {
        // Preload Interstitial
        FBInstant.getInterstitialAdAsync(placementId).then(function(interstitial) {
          // Load the Ad asynchronously
          preloadedInterstitial = interstitial;
          return preloadedInterstitial.loadAsync();
        }).then(function() {
          callback(_self_.S3E_HTML5ADS_AD_IS_AVAILABLE);
          log('Callback - S3E_HTML5ADS_AD_IS_AVAILABLE');
        }).catch(function(err) {
          callback(_self_.S3E_HTML5ADS_AD_ISNT_AVAILABLE);
          log('Callback - S3E_HTML5ADS_AD_ISNT_AVAILABLE');
        });
      } else {
        callback(_self_.S3E_HTML5ADS_AD_ISNT_AVAILABLE);
        log('Callback - S3E_HTML5ADS_AD_ISNT_AVAILABLE');
      }
    } else {
      callback(_self_.S3E_HTML5ADS_INIT_FAIL);
      log('Callback - S3E_HTML5ADS_INIT_FAIL');
    }
  };

  // изменение размера рекламных контейнеров
  this.resize = function(width, height, fullscreen) {
    log('resize is unavailable for FBInstant');
  };

  // вопроизведение рекламы
  this.showAd = function(placementName) {
    log('showAd');
    containersBurying();
    if (successInit) {
      callback(_self_.S3E_HTML5ADS_AD_STARTING_SUCCESS);
      log('Callback - S3E_HTML5ADS_AD_STARTING_SUCCESS');
      preloadedInterstitial.showAsync().then(function() {
        callback(_self_.S3E_HTML5ADS_AD_IS_SHOWN_SUCCESSFULLY);
        log('Callback - S3E_HTML5ADS_AD_IS_SHOWN_SUCCESSFULLY');
      }).catch(function(e) {
        callback(_self_.S3E_HTML5ADS_AD_STARTING_FAIL);
        log('Callback - S3E_HTML5ADS_AD_STARTING_FAIL');
      });
    } else {
      callback(_self_.S3E_HTML5ADS_AD_STARTING_FAIL);
      log('Callback - S3E_HTML5ADS_AD_STARTING_FAIL');
    }
  };

  // остановка просмотра рекламы
  this.stopAd = function() {
    log('stopAd');
    callback(_self_.S3E_HTML5ADS_AD_SERVING_INTERRUPTED);
    log('Callback - S3E_HTML5ADS_AD_SERVING_INTERRUPTED');
  };

  var log = function(message) {
    if (typeof _console_ === 'function') {
      _console_(_self_.name + ': ' + message);
	  }
  };

  var callback = function(result) {
    if (_callback_)
      _callback_(_self_.name, result);
  };

  return this;
}).bind(s3eFBInstant)();
var s3eCPMStar = {};
(function() {
  this.name = 's3eCPMStar';
  
  var checkParam = function(param, defaulf) {
    param = param >= 100 ? param : defaulf;
    return Math.max(param, 100);
  };

  // контейнеры для рекламы
  var adDisplayContainer;

  // конкретные контейнеры для видео и баннера
  var _adContainer_;
  var _videoContent_;

  // менеджер рекламы
  var adsManager;

  // коллбэк
  var _callback_;
  
  var initialSize;

  // список возможных коллбэков
  this.S3E_HTML5ADS_INIT_FAIL                       = 0;
  this.S3E_HTML5ADS_INIT_SUCCESS                    = 1;
  this.S3E_HTML5ADS_AD_ISNT_AVAILABLE               = 2;
  this.S3E_HTML5ADS_AD_IS_AVAILABLE                 = 3;
  this.S3E_HTML5ADS_AD_STARTING_FAIL                = 4;
  this.S3E_HTML5ADS_AD_STARTING_SUCCESS             = 5;
  this.S3E_HTML5ADS_AD_SERVING_INTERRUPTED          = 6;
  this.S3E_HTML5ADS_AD_IS_SHOWN_SUCCESSFULLY        = 7;
  this.S3E_HTML5ADS_AD_WAS_CLICKED                  = 8;
  this.S3E_HTML5ADS_IDLE                            = 9;

  // консоль
  var _console_;

  // включение тестового режима
  var _testmode_;

  // сохраненные параметры для переинициализации провайдера
  var loadingNum = 0;
  var savedParams;
  var savedWidth;
  var savedHeight;
  var savedFullscreen;
  var currentAd;

  var _advertisementIsLoaded = false;
  //var cpmstar_instreamAd = null;

  var _self_ = this;

  var _isMobile_ = /Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(navigator.appVersion);
  var _isNeedUserInteraction_ = true;
  var _wasClick_ = false;

  // таймаут появления крестика закрытия рекламы
  this.closeBtnTimeout = '-1';

  // инициализация
  this.init = function() {
    log('init');
    callback(_self_.S3E_HTML5ADS_IDLE);
    log('Callback - S3E_HTML5ADS_IDLE');
  };

  // установка коллбэка
  this.setCallback = function(callback) {
    log('setCallback');
    _callback_ = callback;
  };

  // установка контейнера для отображения рекламного баннера
  this.setAdContainer = function(adContainer) {
    log('setAdContainer');
    _adContainer_ = adContainer;
  };

  // установка контейнера для воспроизведения видеорекламы
  this.setVideoContent = function(videoContent) {
    log('setVideoContent');
    _videoContent_ = videoContent;
  };
  
  // установка консоли для вывода сообщений
  this.setConsole = function(callback) {
    _console_ = callback;
  };

  // включение тестового режима
  this.setTestmode = function(testmode) {
    log('testmode = ' + (testmode ? 'on' : 'off'));
    _testmode_ = testmode;
  };
  
  // params - json с параметрами рекламы
  this.configure = function(params) {
    log('configure');
    log('configure - check script');

    // сохраняем все параметры, чтобы выполнять переинит
    /*if (loadingNum == 0)
      savedParams = params;*/

    //if(!cpmstar_instreamAd) {
     function initCPMStarScripts(poolID,i, w, d, p, c, e, o, a, s, t) {
        createAdDisplayContainer();
        cpmstar_instreamAd = null; // global variable for instream ad
        p.poolid = poolID;//38107; // your poolid
        o.select = '#' + _self_.name + 'Div'; // specify the element to overlay
        c.type = 'game';
        t = d.getElementsByTagName('script');
        sid = 'cpmstarfr' + Math.round(Math.random() * 999999);
        if (!w[i]) { w[i] = { instreamAds: [] }; s = d.createElement('script'); s.src = (d.location.protocol == 'https:' ? '//server' : '//cdn') + '.cpmstar.com/cached/js/global_v100.pack.js?poolid=' + p.poolid; s.type = 'text/javascript'; s.async = ''; t[0].parentNode.insertBefore(s, t[0]); }
        w[i].instreamAds.push(a = { params: p, config: c, events: e, overlay: o, placeholder: t[t.length - 1], scriptid: sid });
    
        var fixInterval = setInterval(function() {
        if(cpmstar_instreamAd) {
          clearInterval(fixInterval);
          onAdsManagerLoaded();
        }
      }, 100);


      setTimeout(function() {
        if(!cpmstar_instreamAd) {
          clearInterval(fixInterval);
          callback(_self_.S3E_HTML5ADS_INIT_FAIL);
          log('Callback - S3E_HTML5ADS_INIT_FAIL');
        }
      }, 5000);
    }
    //}
  		var initCalled = false;
      // получение параметров рекламы из params
  		for (var field in params) {
    		if (!params.hasOwnProperty(field)) continue;
        if (field === 'providerName') {
          log('providerName: ' + params[field]);
          this.name = params[field];
          continue;
        }
        if (field === 'closeBtnTimeout') {
          log('set timeout for closeBtn: ' + params[field]);
          this.closeBtnTimeout = params[field];
          if(this.closeBtnTimeout != -1 && this.closeBtnTimeout < 5500 ) {
              this.closeBtnTimeout = 5500;
          }
          continue;
        }
  			if (field === 'poolid') {   
				if(!window.cpmstar_instreamAd) {
					initCalled = true;
					initCPMStarScripts(params[field],'cpmstarinstream', window, document, {}, {}, {}, {});
				}
  				continue;
  			}
    		
    	}
		
		if(window.cpmstar_instreamAd && initCalled == false) {
			onAdsManagerLoaded();
		}

  		/*if (initialSize) {
  			this.resize(initialSize.width, initialSize.height, initialSize.fullscreen);
  			initialSize = null;
  		}*/
  	
  };

  var createAdDisplayContainer = function() {   
  if(!document.getElementById(_self_.name + 'Div')) {
    var divCpm = document.createElement("div");
    divCpm.id = _self_.name + 'Div';
    divCpm.style.width = '100%';
    divCpm.style.height = '100%';
    _adContainer_.appendChild(divCpm);
	document.getElementById(_self_.name + 'Div').style.display = 'block';
  }   
  };

  var changeVisibility = function(isVisible) {
    if (isVisible) {
      _adContainer_.style.visibility = 'visible';
      _videoContent_.style.visibility = 'visible';       
      if (_adContainer_.parentNode) {
        _adContainer_.parentNode.style.visibility = 'visible'; 
      }
    } else {
      _adContainer_.style.visibility = 'hidden';
      _videoContent_.style.visibility = 'hidden'; 
      //document.getElementById(_self_.name + 'Div').style.display = 'none'; 
      if (_adContainer_.parentNode) {
        _adContainer_.parentNode.style.visibility = 'hidden'; 
      }
    }
  };

  // запускаем интервал, который меняет стиль div и iframe
  var fixAdContainersSize = function() {

  };

  // сохранение параметров загрузки рекламы
  // переинициализация провайдера, если требуется
  // и загрузка рекламы
  this.loadAd = function(placementName,width, height, fullscreen) {
    log('loadAd');
    loadingNum++;
    savedWidth = width;
    savedHeight = height;
    savedFullscreen = fullscreen;
    log('loading num - ' + loadingNum);
    currentAd = null;
    if(cpmstar_instreamAd) {	  
      cpmstar_instreamAd.initAd();
      cpmstar_instreamAd.addEventListener('ready', function (ad) {
            if (ad) {
                currentAd = ad;
				_advertisementIsLoaded = true;
                callback(_self_.S3E_HTML5ADS_AD_IS_AVAILABLE);
                log('Callback - S3E_HTML5ADS_AD_IS_AVAILABLE');
            }
        });

        cpmstar_instreamAd.addEventListener('closed', function () {
            setTimeout(function () {
			    if(_advertisementIsLoaded) {
					onSafeAdPause();
					callback(_self_.S3E_HTML5ADS_AD_IS_SHOWN_SUCCESSFULLY);
					log('Callback - S3E_HTML5ADS_AD_IS_SHOWN_SUCCESSFULLY');
					changeVisibility(false); 
				} else {
					callback(_self_.S3E_HTML5ADS_AD_ISNT_AVAILABLE);
					log('Callback - S3E_HTML5ADS_AD_ISNT_AVAILABLE');
				}
            }, 10);
        });


        cpmstar_instreamAd.addEventListener('error', function () {
            setTimeout(function () {
                callback(_self_.S3E_HTML5ADS_INIT_FAIL);
                log('Callback - S3E_HTML5ADS_INIT_FAIL');               
            }, 10);
        });


        cpmstar_instreamAd.addEventListener('complete', function () {
            setTimeout(function () {              
              callback(_self_.S3E_HTML5ADS_AD_STARTING_SUCCESS);
              log('Callback - S3E_HTML5ADS_AD_STARTING_SUCCESS'); 
            }, 10);
        });
    }
  };

  // изменение размера рекламных контейнеров
  this.resize = function(width, height, fullscreen) {
    log('resize');  	
    fixAdContainersSize();
  };

  // вопроизведение рекламы
  this.showAd = function(placementName) {
    log('showAd');
    try {
      if(currentAd) {
	    changeVisibility(true);
        currentAd.showAd();
      }
      fixAdContainersSize();
    } catch (adError) {
      callback(_self_.S3E_HTML5ADS_AD_STARTING_FAIL);
      log('Callback - S3E_HTML5ADS_AD_STARTING_FAIL');
      log('AdError - ' + adError);
    }
  };

  // остановка просмотра рекламы
  this.stopAd = function() {
    log('stopAd'); 
    if(document.getElementById("cpmstart_closeLink_") 
                        && typeof document.getElementById("cpmstart_closeLink_").onclick === "function") {
        document.getElementById("cpmstart_closeLink_").onclick();
     }  else {
       callback(_self_.S3E_HTML5ADS_AD_STARTING_FAIL);
       log('Callback - S3E_HTML5ADS_AD_STARTING_FAIL');
     } 
    onSafeAdPause();    
    changeVisibility(false);    
  };

  var onAdsManagerLoaded = function() {  
    callback(_self_.S3E_HTML5ADS_INIT_SUCCESS);
    log('Callback - S3E_HTML5ADS_INIT_SUCCESS');   
  };


  var onSafeAdPause = function() {    
    log('onSafeAdPause');
    if (_videoContent_)
      _videoContent_.pause();    
    var clsBtn = document.getElementById('s3eHTML5AdsCloseButton');
    if (clsBtn)
      _adContainer_.removeChild(clsBtn);
  }

  var onContentPauseRequested = function() {
    log('onContentPauseRequested');
  };

  var onContentResumeRequested = function() {
    log('onContentResumeRequested');
    onSafeAdPause();
    callback(_self_.S3E_HTML5ADS_AD_IS_SHOWN_SUCCESSFULLY);
    log('Callback - S3E_HTML5ADS_AD_IS_SHOWN_SUCCESSFULLY');
    changeVisibility(false); 
  };

  var log = function(message) {
    if (typeof _console_ === 'function') {
      _console_(_self_.name + ': ' + message);
    }
  };

  var callback = function(result) {
    if (_callback_)
      _callback_(_self_.name, result);
  };

  var mouseEvent = function() {
    log('onClick');
    _wasClick_ = true;
    window.removeEventListener('mouseup', mouseEvent, false);
    window.removeEventListener('touchend', mouseEvent, false);
    window.removeEventListener('touchcancel', mouseEvent, false);
  };
  
  window.addEventListener('mouseup', mouseEvent, false);
  window.addEventListener('touchend', mouseEvent, false);
  window.addEventListener('touchcancel', mouseEvent, false);

  return this;
}).bind(s3eCPMStar)();
var s3eApplixir = {};
(function() {
  this.name = 's3eApplixir';

  // конкретные контейнеры для видео и баннера
  var _adContainer_;
  var _videoContent_;

  // контейнер и iframe для applixir
  var _applixirDiv_;
  var _applixirIFrame_;

  // коллбэк
  var _callback_;

  // список возможных коллбэков
  this.S3E_APPLIXIR_INIT_FAIL                       = 0;
  this.S3E_APPLIXIR_INIT_SUCCESS                    = 1;
  this.S3E_APPLIXIR_AD_ISNT_AVAILABLE               = 2;
  this.S3E_APPLIXIR_AD_IS_AVAILABLE                 = 3;
  this.S3E_APPLIXIR_AD_STARTING_FAIL                = 4;
  this.S3E_APPLIXIR_AD_STARTING_SUCCESS             = 5;
  this.S3E_APPLIXIR_AD_SERVING_INTERRUPTED          = 6;
  this.S3E_APPLIXIR_AD_IS_SHOWN_SUCCESSFULLY        = 7;
  this.S3E_APPLIXIR_AD_WAS_CLICKED                  = 8;
  this.S3E_APPLIXIR_IDLE                            = 9;

  // консоль
  var _console_;

  // сохраненные параметры для инициализации рекламы
  var savedZoneId = 0;
  var savedFallback = 1;

  var successInit = false;

  var _self_ = this;

  // таймаут появления крестика закрытия рекламы
  this.closeBtnTimeout = '-1';

  // инициализация
  this.init = function() {
    log('init');
    callback(this.S3E_APPLIXIR_IDLE);
    log('Callback - S3E_APPLIXIR_IDLE');
  };

  // установка коллбэка
  this.setCallback = function(callback) {
    log('setCallback');
    _callback_ = callback;
  };

  // установка контейнера для отображения рекламного баннера
  this.setAdContainer = function(adContainer) {
    log('setAdContainer');
    _adContainer_ = adContainer;
  };

  // установка контейнера для воспроизведения видеорекламы
  this.setVideoContent = function(videoContent) {
    log('setVideoContent');
    _videoContent_ = videoContent;
  };
  
  // установка консоли для вывода сообщений
  this.setConsole = function(callback) {
    _console_ = callback;
  };

  // включение тестового режима
  this.setTestmode = function(testmode) {
    log('testmode is unavailable for Applixir');
  };

  // загрузка ima3.js и инициализация загрузчика рекламы
  // params - json с параметрами рекламы
  this.configure = function(params) {
    log('configure');
    log('configure - check script');
	successInit = false;
	
    // выполняем проверку загружен ли внешний скрипт
    // загружен - переходим дальше на инициализацию загрузчика рекламы
    // не загружен - пытаемся загрузить и переходим дальше, если успех
  	if (!checkApplixir()) {
  		loadApplixir(configureApplixir.bind(this), function () {
  			log('configure - script loading error!');
  			callback(this.S3E_APPLIXIR_INIT_FAIL);
  			log('Callback - S3E_APPLIXIR_INIT_FAIL');
  		}.bind(this));
  		return;
  	}
  	
  	configureApplixir.bind(this)();
  	
  	function checkApplixir () {
      return window && window.invokeApplixirVideoUnit;
  	}
  	
    // загрузка внешнего скрипта
  	function loadApplixir (success, error) {
      // загружаем сперва IMA для проверки AdBlock
      var scriptIma = document.createElement('script');
      scriptIma.src = './patch/google/ima3.js?jhttps://imasdk.googleapis.com/js/sdkloader/ima3.js';
      scriptIma.onload = function () {
        // если загрузили IMA, то грузим Applixir
        var scriptApplixir = document.createElement('script');
        scriptApplixir.src = '//cdn.applixir.com/applixir.sdk3.0m.js';
        scriptApplixir.onload = success;
        scriptApplixir.onerror = error;
        document.body.appendChild(scriptApplixir);
      };
      scriptIma.onerror = error;
      document.body.appendChild(scriptIma);
  	}
  	
    // инициализация загрузчика рекламы
  	function configureApplixir () {
  		log('configure - script loaded');

      // создаем рекламный контейнер в _adContainer_
      if(!document.getElementById('applixir_vanishing_div')) {
        _applixirDiv_ = document.createElement('div');
        _applixirDiv_.id = 'applixir_vanishing_div';
        _applixirDiv_.style.position = 'absolute';
        _adContainer_.appendChild(_applixirDiv_);
      } else {
        _applixirDiv_ = document.getElementById('applixir_vanishing_div');
      }

      if(!document.getElementById('applixir_parent')) {
        _applixirIFrame_ = document.createElement('iframe');
        _applixirIFrame_.id = 'applixir_parent';
        _applixirIFrame_.style.border = 'none';
        _applixirDiv_.appendChild(_applixirIFrame_);
      } else {
        _applixirIFrame_ = document.getElementById('applixir_parent');
      }

      // получение параметров рекламы из params
  		for (var field in params) {
    		if (!params.hasOwnProperty(field))
          continue;
        if (field === 'providerName') {
          log('providerName: ' + params[field]);
          this.name = params[field];
          continue;
        }
        if (field === 'closeBtnTimeout') {
          log('set timeout for closeBtn: ' + params[field]);
          this.closeBtnTimeout = params[field];
          continue;
        }
  			if (field === 'zoneId') {
          savedZoneId = parseInt(params[field]);
          log('savedZoneId: ' + savedZoneId);
  				continue;
  			}
        if (field === 'fallback') {
          savedFallback = parseInt(params[field]);
          log('savedFallback: ' + savedFallback);
          continue;
        }
    	}

      successInit = true;

      callback(this.S3E_APPLIXIR_INIT_SUCCESS);
      log('Callback - S3E_APPLIXIR_INIT_SUCCESS');
  	}
  };

  var changeVisibility = function(isVisible) {
    if (isVisible) {
      _adContainer_.style.visibility = 'visible';
      _videoContent_.style.visibility = 'visible'; 
    } else {
      _adContainer_.style.visibility = 'hidden';
      _videoContent_.style.visibility = 'hidden';

      // может пригодиться, если таки придется удалять div и iframe
      // var aggressiveApplixirDiv = document.getElementById('applixir_vanishing_div');
      // if (aggressiveApplixirDiv && aggressiveApplixirDiv.parentNode)
      //   aggressiveApplixirDiv.parentNode.removeChild(aggressiveApplixirDiv);
    }
  };

  // загрузка рекламы
  // в данном случае - просто коллбек, что мы готовы, если есть скрипт
  this.loadAd = function(placementName,width, height, fullscreen) {
    log('loadAd');
    if (successInit) {
      callback(this.S3E_APPLIXIR_AD_IS_AVAILABLE);
      log('Callback - S3E_APPLIXIR_AD_IS_AVAILABLE');
    } else {
      callback(this.S3E_APPLIXIR_AD_ISNT_AVAILABLE);
      log('Callback - S3E_APPLIXIR_AD_ISNT_AVAILABLE');
    }
  };

  // изменение размера рекламных контейнеров
  this.resize = function(width, height, fullscreen) {
    log('resize is unavailable for Applixir');
  };

  // вопроизведение рекламы
  this.showAd = function(placementName) {
    log('showAd');

    if (!_applixirDiv_ || !_applixirIFrame_ || !successInit) {
      callback(this.S3E_APPLIXIR_INIT_FAIL);
      log('Callback - S3E_APPLIXIR_INIT_FAIL');
      return;
    }

    var options = {
      zoneId: savedZoneId,
      fallback: savedFallback,
      adStatusCb: adStatusHandler
    };
    changeVisibility(true);
    invokeApplixirVideoUnit(options);
    callback(this.S3E_APPLIXIR_AD_STARTING_SUCCESS);
    log('Callback - S3E_APPLIXIR_AD_STARTING_SUCCESS');
  };

  // остановка просмотра рекламы
  this.stopAd = function() {
    log('stopAd');

    callback(this.S3E_APPLIXIR_AD_SERVING_INTERRUPTED);
    log('Callback - S3E_APPLIXIR_AD_SERVING_INTERRUPTED');

    changeVisibility(false);
  };

  var adStatusHandler = function(adEvent) {
    if (adEvent === 'ads-unavailable') {
      log('rewarded video ads is unavailable. closing...');
      callback(_self_.S3E_APPLIXIR_AD_ISNT_AVAILABLE);
      log('Callback - S3E_APPLIXIR_AD_ISNT_AVAILABLE');
      return;
    }
    
    changeVisibility(false);

    if (adEvent === 'ad-fallback') {
      log('rewarded video ads is unavailable. it was a banner!');
      callback(_self_.S3E_APPLIXIR_AD_IS_SHOWN_SUCCESSFULLY);
      log('Callback - S3E_APPLIXIR_AD_IS_SHOWN_SUCCESSFULLY');
      return;
    }
    if (adEvent === 'ad-blocker' || adEvent === 'network-error' ||
      adEvent === 'cors-error' || adEvent === 'no-zoneId') {
      callback(_self_.S3E_APPLIXIR_INIT_FAIL);
      log('Callback - S3E_APPLIXIR_INIT_FAIL');
      return;
    }
    if (adEvent === 'ad-interrupted') {
      callback(_self_.S3E_APPLIXIR_AD_IS_SHOWN_SUCCESSFULLY);
      log('Callback - S3E_APPLIXIR_AD_IS_SHOWN_SUCCESSFULLY');
      //callback(_self_.S3E_APPLIXIR_AD_SERVING_INTERRUPTED);
      //log('Callback - S3E_APPLIXIR_AD_SERVING_INTERRUPTED');
      return;
    }
    if (adEvent === 'ad-watched') {
      callback(_self_.S3E_APPLIXIR_AD_IS_SHOWN_SUCCESSFULLY);
      log('Callback - S3E_APPLIXIR_AD_IS_SHOWN_SUCCESSFULLY');
      return;
    }
  }

  var log = function(message) {
    if (typeof _console_ === 'function') {
      _console_(_self_.name + ': ' + message);
	  }
  };

  var callback = function(result) {
    if (_callback_)
      _callback_(_self_.name, result);
  };

  return this;
}).bind(s3eApplixir)();
/// <IceStone>
'use strict';!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n():"function"==typeof define&&define.amd?define(n):n()}(0,function(){function e(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})}function n(){}function t(e){if(!(this instanceof t))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");
this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],u(e,this)}function o(e,n){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,t._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null!==t){var o;try{o=t(e._value)}catch(f){return void i(n.promise,f)}r(n.promise,o)}else(1===e._state?r:i)(n.promise,e._value)})):e._deferreds.push(n)}function r(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||
"function"==typeof n)){var o=n.then;if(n instanceof t)return e._state=3,e._value=n,void f(e);if("function"==typeof o)return void u(function(e,n){return function(){e.apply(n,arguments)}}(o,n),e)}e._state=1,e._value=n,f(e)}catch(r){i(e,r)}}function i(e,n){e._state=2,e._value=n,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&t._immediateFn(function(){e._handled||t._unhandledRejectionFn(e._value)});for(var n=0,r=e._deferreds.length;r>n;n++)o(e,e._deferreds[n]);e._deferreds=null}function u(e,
n){var t=!1;try{e(function(e){t||(t=!0,r(n,e))},function(e){t||(t=!0,i(n,e))})}catch(o){if(t)return;t=!0,i(n,o)}}var c=setTimeout;t.prototype["catch"]=function(e){return this.then(null,e)},t.prototype.then=function(e,t){var r=new this.constructor(n);return o(this,new function(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}(e,t,r)),r},t.prototype["finally"]=e,t.all=function(e){return new t(function(n,t){function o(e,f){try{if(f&&("object"==
typeof f||"function"==typeof f)){var u=f.then;if("function"==typeof u)return void u.call(f,function(n){o(e,n)},t)}r[e]=f,0==--i&&n(r)}catch(c){t(c)}}if(!e||"undefined"==typeof e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return n([]);for(var i=r.length,f=0;r.length>f;f++)o(f,r[f])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(n){n(e)})},t.reject=function(e){return new t(function(n,t){t(e)})},
t.race=function(e){return new t(function(n,t){for(var o=0,r=e.length;r>o;o++)e[o].then(n,t)})},t._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){c(e,0)},t._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var l=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object");
}();"Promise"in l?l.Promise.prototype["finally"]||(l.Promise.prototype["finally"]=e):l.Promise=t});window["__IceStone"]={};if(window["__IceStoneInited"])window["__IceStone"]["cloneObj"]={};
var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?
Object.create(b):(__.prototype=b.prototype,new __)}}();
(function(IceStone){var __;(function(__){var ad;(function(ad){var IAdChannelState=function(){function IAdChannelState(){}IAdChannelState.IAD_CHANNEL_STATE_IDLE=0;IAdChannelState.IAD_CHANNEL_STATE_LOAD=1;IAdChannelState.IAD_CHANNEL_STATE_LOAD_WAIT_SUCCESS=2;IAdChannelState.IAD_CHANNEL_STATE_LOAD_SUCCESS=3;IAdChannelState.IAD_CHANNEL_STATE_LOAD_ERROR=4;IAdChannelState.IAD_CHANNEL_STATE_SHOW=5;IAdChannelState.IAD_CHANNEL_STATE_SHOW_SUCCESS=6;IAdChannelState.IAD_CHANNEL_STATE_SHOW_ERROR=7;IAdChannelState.IAD_CHANNEL_STATE_PROVIDER_INIT_ERROR=
8;return IAdChannelState}();ad.IAdChannelState=IAdChannelState;var IAdPlacementlState=function(){function IAdPlacementlState(){}IAdPlacementlState.IAD_PLACEMENT_STATE_IDLE=0;IAdPlacementlState.IAD_PLACEMENT_STATE_LOAD=1;IAdPlacementlState.IAD_PLACEMENT_STATE_WAIT_TIME=2;IAdPlacementlState.IAD_PLACEMENT_STATE_LOAD_SUCCESS=3;IAdPlacementlState.IAD_PLACEMENT_STATE_LOAD_ERROR=4;IAdPlacementlState.IAD_PLACEMENT_STATE_SHOW=5;IAdPlacementlState.IAD_PLACEMENT_STATE_NOT_SHOW=6;return IAdPlacementlState}();
ad.IAdPlacementlState=IAdPlacementlState;var PlacementType=function(){function PlacementType(){}PlacementType.PLACEMENT_TYPE_BANNER_TOP=0;PlacementType.PLACEMENT_TYPE_BANNER_BOTTOM=1;PlacementType.PLACEMENT_TYPE_INTERSTITIAL=2;PlacementType.PLACEMENT_TYPE_REWARDED_VIDEO=3;PlacementType.PLACEMENT_TYPE_VIDEO=4;PlacementType.PLACEMENT_TYPE_MORE_APPS=5;PlacementType.PLACEMENT_TYPE_TASK_INSTALL=6;PlacementType.PLACEMENT_TYPE_LOGO=7;PlacementType.PLACEMENT_TYPE_STORE_BUTTON=8;PlacementType.PLACEMENT_TYPE_UNKNOWN=
100;return PlacementType}();ad.PlacementType=PlacementType;var IAdChannel=function(){function IAdChannel(){}return IAdChannel}();ad.IAdChannel=IAdChannel;var Placement=function(){function Placement(){}return Placement}();ad.Placement=Placement})(ad=__.ad||(__.ad={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var ad;(function(ad){var IAdProviderState=function(){function IAdProviderState(){}IAdProviderState.IAD_PROVIDER_STATE_IDLE=0;IAdProviderState.IAD_PROVIDER_STATE_INIT=1;IAdProviderState.IAD_PROVIDER_STATE_INIT_SUCCESS=2;IAdProviderState.IAD_PROVIDER_STATE_INIT_ERROR=3;IAdProviderState.IAD_PROVIDER_STATE_NOT_NEDED=4;return IAdProviderState}();ad.IAdProviderState=IAdProviderState;var Provider=function(){function Provider(){this.name="";this.state=IAdProviderState.IAD_PROVIDER_STATE_IDLE;
this.need=false;this.params=null;this.obj=null}return Provider}();ad.Provider=Provider})(ad=__.ad||(__.ad={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var system;(function(system){var Assets=function(){function Assets(){}Assets.bytes=function(path,copy){if(copy===void 0)copy=true;var bytes=Assets.__get(path);if(bytes==void 0)return null;if(!(bytes instanceof Uint8Array)){system.Logger.developer('Embedded file "'.concat(path,'" has wrong type (').concat(typeof bytes,")."));return null}if(copy)return new Uint8Array(bytes.buffer.slice(0));return bytes};Assets.text=function(path){var str=Assets.__get(path);if(str==
void 0)return null;if(typeof str!="string"){system.Logger.developer('Embedded file "'.concat(path,'" has wrong type (').concat(typeof str,")."));return null}return str};Assets.json=function(path){var str=Assets.__get(path);if(str==void 0)return{};if(typeof str!="string"){system.Logger.developer('Embedded file "'.concat(path,'" has wrong type (').concat(typeof str,")."));return{}}return JSON.parse(str)};Assets.div=function(path){var str=Assets.__get(path);if(str==void 0)return null;if(typeof str!=
"string"){system.Logger.developer('Embedded file "'.concat(path,'" has wrong type (').concat(typeof str,")."));return null}var element=document.createElement("div");element.innerHTML=str;return element};Assets.svg=function(path){var str=Assets.__get(path);if(str==void 0)return null;if(typeof str!="string"){system.Logger.developer('Embedded file "'.concat(path,'" has wrong type (').concat(typeof str,")."));return null}var element=(new DOMParser).parseFromString(str,"image/svg+xml").documentElement;
return element};Assets.__get=function(path){if(Assets._dict==void 0){system.Logger.developer("Embedded files are not supported.");return null}path=(path||"").replace(/\\/g,"/").replace("./","");var value=Assets._dict[path];if(value==void 0)system.Logger.developer('Embedded file "'.concat(path,'" not found.'));return value};Assets._dict={"ad/close.svg":'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="182" height="182" viewBox="0 0 182 182"><metadata><?xpacket begin="\ufeff" id="W5M0MpCehiHzreSzNTczkc9d"?><x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.6-c142 79.160924, 2017/07/13-01:06:39        "><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about=""/></rdf:RDF></x:xmpmeta><?xpacket end="w"?></metadata><image id="\u0421\u043b\u043e\u0439_1" data-name="\u0421\u043b\u043e\u0439 1" x="2" y="2" width="178" height="178" xlink:href="data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAACyCAQAAABMg13jAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAHdElNRQfiChIOHhztJtkGAAAZOklEQVR42uWdeXwV1dnHvwlLBbHYWlyqIu5LQQWVixuyigREwk6CIjsCQujytr5tP+3b9m37tlYCosiOIKCyCkJYQhJE1Otra9/6drFvF7e6byiCBpK8f5y5c8+cc+6dOXPn3pvAjz9Cnpl7lm8mkzlnzvM7BQ2k1m89300TXwpoAHiQ408OgWbUBSNwlfO10LKC8SyiQPr+OJLT4xLW0MKOQEDILuLFTGSJ+NTxhdnp7ShWMoLHaGlDIBBkp7BxLKYQGM8SmtlU0vTl9HQkj9AMKGYDXwpOIABkBbH4/9LjCbPTyxGsFr0GBvIErYIS8IXsFHIni90KAMay/HjB7PRwOGs8BPqxldbBCPhAdgoYm7hBSLqdh48HzC7itRqB3uygTRACBeke4WLiyx0s0yoQWsvtQR9nmqYcfMNYS3PjCfsZwIFUBII/wo1JiRhGJ+5Sx+bV7IsYrmc3J/sR8IM8hhUpEQOMPHYxOz0aypqUiAGuYQ+npCeQHnKJirhQ3OtljUz8nI8tzBLiFnK8gK+op3ZhD+3SEUgDOVbCShXxGL7Nl9UTh7PWdgzU2OX0ZAhrxLAjoQJG8j3OVE+/ghpOT00gJeTYKBVxAaV043TKaKuePIy1dmOgxi2nF8WJXiUJjKQ7JzGLs9WPXEYNX09FIAXk2ChnbCNVMIZrAcyYh/LosYLZ6cHgRI+SBEbQHYA2zOIc9WMXs5f2ZgJGyLEROuJSBzHAaSbMxTx+LGB2Wj8oMT+RJDCCm9zvWjOT89SPXsBeOpgIGCDHRihjGwoo5TrPOacxWzy5yLqN9U0ds4t4nYp4uIQYoBUzuED9eAf2iqCXgAY5NtwfMcCplOmYb2VjU8bstHqgCXEP7ewTmMFFarA9e7lYJaCM+GLD1afCAkq4PkWj3qOcj9RgBYOphaY3CnQRb1ARD6Nnis/Usog/qcG36S2CcSfguZJjw2wQQztm81U12J/NNtOAjUVOa4t0xENTIoaWTKGjGjydGq6QAxJkE+JRaRADfC0V5hOkhjcBuYg3eRHDUHql/WQLJnuJArRjD12S37qQY4axzShu9G3eKcwWo0pZt7A5+Gxr/uW0sr+OeJgPYoDmTKCzjmUPXRPfOPfk2BDzg3cwfcgcPlCDuyjmEDT+e7OD+JbEbS6pIIiF6lnBC2rwAAPi+8GBnBligA8p5301WMltjR9zasRD6GNRTj2r3D90rg5SFN8HhRDrzSr116SjFWL4KrP5mhrsE/zdQb7ktKwfmzJDDIXcof/9asOOWG8ohPgeBokrLqmX2GHZ3K8wW0xFyerFtsaM2UXs/KFOqtgSMUABvfU50dbcFWtZCBDfw2AV8xZ2WlbyFWZzqhrsQQUnSh1qRHJadDObdMR9Q5T3NuUcVYPrGR2vdZ4u4rsTf6aSesIa88mU6Zi7UxHsTVhu5SJ2noOSGhwK8VuU84kaXMfo+BHPiC9mrPBmy8oOUM47anAfRRyExvMn0EHcl83qW4jb6BeivLco51M1uI7R8TrwDEbiuyjmsPe8zey2rK4tZWL+WtaNVHCS1Lk8y2lFn6gQv8kcHfFjCcTKsDq+k2I+9567KRrMN1AhXqnkH7PTgt48oSIeFArxG5SLX1NZaymlLvGNMgtnxlxpWe2XKeMMNXg9FWISOr+Yndp7sUVHfEuI8t5gno54dWKphJA21RnfQTFfeGMbo8F8HTvyjdmpuWfiCT6pgaEQv85cHfEqxsqIjZP28R0Ui8nKpDZSZVn9ScwWL71kdWNXPjE7tfbgSR1xUYjyXmcen6nBhxmnLvgxvn6Ku3PCSa23xtyGMh1zVyr9F4NkR06NNyUGSEkNiA7xciboa6pSvEiNV+hXczjMZ6nBq6kUSxdyi9mprTvbdcQDQpT3GnN1xMuYaFq2lnJJQHw7Q1TMG0JgnqljvopKMQmdO8xRI36VuerYDZYwkXrQRwNpFrfEtzHUi7mBDVRbNqeNaZVCl9xidmq5ke1iiJ9UUSjErzBPHVDAEianyqZJv0zrSYarmNdTY9mkE5mpY+5Mpd8KsqiUDvHAEOX9k/t1xItSI/ZfcLhFx7wuBOZZYt2HrM5UitnR7GJ2Sr+B7WIGJalbQiH+B/N1xA8xNV1OmP/S2S2M1DHvtWxaa9OamyupTL9QL3OlQzwoRHl/NyF+kGnp0+7SQnY+tFnH/Lg15lbMFMtrZF3htx4yMzmlXs92MXOSVL+QiB9Qh8Mwnxl+mY0+V7KLebSO+SnLJrbibs5Vg52oFrOj0WN2SrzOhPi2EOX9jfk64nnM9E8e9b1dOB/eqGN+jH2WzWzFDH0F2Teo5jQJSkRyEVeoa31vDo34CzVYTlmQ/NwAKWYu5hKOyPEGHg2BebqO+TKq063uDSOnpGvZriLuy+AQ5f2N+eqgAe5jdrAU6EDJkk4hG0yYn7ZsbitmcL4avJRqMZ8UDWYXcYW6+LQvxSHK+6sJ8b18y0MnjQqCJrCnSlJJv5DLrM95gL+rwZfpyVvBGp1eTktj7FQR92FIiPJeZoGO+Nf8m39brRPYneLWU+J9W9jAGp6xbPYJpmWnF1Odeq16cEWN+C8mxL8KgjipwJDdItdR4p0tbWC1NeYvpcJ8pgQqhJxPXqMj7h0K8Z95SEf8S74r8QggC8jRYm5pWt17EdViPikcZudTV7NbRdyLoSHK+5MJ8c+5R2IRSFaQ3aIfjwbzNLFeWtaF1IiJDnvMLuJKHfEw69LgTyz0/p0H+BnflzgElCVkCfMYHfOzlmW15C4uUYPnU5MqwSWdnLOviuoq/iMP6Yh/wg8lBoFlDdmt4lHvy8KwmKdyqRo8jxox0REcs4u4Us2x6MlQYTVjpf9lob4a6Ef8SOq/hUJAdqtZyx1ezPWs5jnLsoyYz6XGnEdklnNWl0Sec1I9GRYK8SId8Q/5idR3K4WC7Fa1Rn0vW88j+gJSH7VgKpepwQ7UiIkOf8wSYiUjt0coxC+ZEH+fn0n9tlRIyG51q7lTxbwqBOYpOuZzqBEj8PSYnaOd2a3mVfRgeAjEf2Cxjvgefi712VqhIbtVPpJ4BZ5QPat43rKsFkzlG2qwPdV+mFMjvikU4t+zxIT4l1J/QygDyG61qxivYl5pjbm5KY+oPTViosOM2YleyW41baU7I0IgfpFlOuLvZoo4Q8hu1SsTr8ITqmcl/21ZVnMm00kNnk0NF4IJczrEI6NC/B1+JfUzpDKE7Fa/Qsf8sJ6q4qPmTOJyNXgW1WJo6MXsfHcFu9U8ihtDIf4dS70dAPgW90p9DK2MIUuYJ4lVBwkZM4J81JyJXKkGz6RaTaV1/ne5CfGoEIh/yzJv46GB2dwn9S8DRQDZbcbyxOKOhOpZofh9+qs54/WsuK9TLYaGAq6LuFJNU7k+FOIXWK4jLqNc6ltGCjyf7CfXaHKJt5eFjHPnVYOqjmW8qAbfphd/lr7vSJWOuCQU4hU64pnMh0wRW88n+8lpzjIm4fm51bOc31mW1cx0NZ9OtfQwbUB8XSjEz5sQz4gCcVKRXcngXs0TWKxezePlVONAqmeZ/sN510kRLTAhLg2BOM4qHfE0HoIoECeu5Eghu5gnsVDFbMg/9lE9y/UWvOd8jQTxczySRcRZuF0IOU1bzBT1pmG4y/qokHFcrQbbOf88ujYU4mdNiKdGh1juScRyMd/lxVwXCvOdyVT7lLqWMSEQP2NCPJlFUh8iU+SQ3SYu1DEvD4H5joRjaAp1C3UV72c1yo2ynokskdofobIAWcI83duToyzn99YNvJ1uKY92Y0yILjzNGhVxHRNZJrU9UmUFstvUBYnFeAkdZRn/Y93EMSkwx0Ih3sdaHfEElkvtjlhZguw290HuVjEvDYX5Wi3aldtDNP8pHtURj+Nhqc2RK2uQ3SY/kFj3mNBRlvIH62aOUWzTunJHKMSP6YjHskpqbxaURchus+czS8W8xBpzAaXScrBrQiGuMSG+ndVSW7OirEJ2m35/YolpQkdZwkuWZRVQwg0AXMPYEA2vZp2OeAxrpXZmSc1+nObgWxFUMIBtAHE+pp/8rFXP7zlbd8dIqwI68imncmcIxFVs0BGX8hhkD3EiVTTiYbVZzmC7jDneeHMm66+cfNRAQwjEe9igho5SwjrI5lWcpWG1WU43ypmt9nMRf7QsqyBEkyt1xEcYnW3ESeUEsoT5m974URZaY7bVbjaqoVpGs15qV5aVI8hud+Yk1qcndJSFuqVohNrJJjVUyyhxaefKrCdnkN0u3ce3vfFsYt7BE2qolhGCe+78kHII2e3Wb/iON34kS5h3sEUN1TJMcM+l5VROIbtdu1ekAySVDcwVJsRD2Cq1I0fKMWS3e7/me974ERZ63pNmqu2CpqxaBouH9lwbp+UcstvF/8om5id5Ug19wWAqpPpzqDxAljD/uzdeGxHmrWxXQ5/nD3GeILtd/YUJ818yLHuLoCnrMIOFw2t+HBbzBFnC/ANvvJaHeDmDcp/Q/XIPUyxsR/NlYpk3yG6X/5MV3ngtC0Jj3mQycZ2aX8R5hZy627Us4MMQ5b2QxvIyn1aseYWcegV9f33PhwDqoq/TCFBX9pVHyK736wj1SDjvV7FOw7Ac7IeZZLlGobxBjtr7NdEdw1LFC9gTRWp8eOUJctTer3KHxumbq1zEnmy4wwRvUx6U2vv11gwRg9hcRXvfckliHWg+MOcBsmtMavB+7R9JDc2ZrCesXZZd5650yjlkF/H2aLxfzWrOZD2ZuFMiTyrXmHMMOWpj0tRqwRTdgeAKduXD8TankHOHGERq/IVqsEs+bLJzCDlq71d/tWS6bsJzde4x5wxy1N6vwdSSabpBWteEW1yuMOcIctTer8F1AtN0u7/r2JbLzZJyAjlK79d/8g/LT7Riuu54e0Pi70IuMOcAcpTer68wnwd4xfJTrZip+zd3z91GdlmHHKX36yvcz2EOc38IzHfr3vq9crXJaJYhR+n9+qprc36Y+3nV8tMnMlM4+8nqm9jsMLuYswo5Su/XVz1m/YeZZ425DbP0XXz65WI78yxCjtL79VVtP4RwmA1bfxWxPtuYswbZNSat0I1JM0cMAvNrliWdxCwx5ynr1sQ2vNnCnCXIUXq/vmZEDOEwt2WWvr5/CKtpJrU7YmUFcmrv117WiF9PiRjgEPN43bLEkynTt8wdxprsYc4C5HTer7bGpK8zT9/+x6NwmGfpu8aPYGW2MEcOOUrvV+M+YZo+C4H5q5Tp78NLWJodzNnxuzAYk/ayNiY1Il7gfL3LGz6RWfpgw0fvcx8fq8HlTAi2GUAQZcVUJJ33q61r5humrdgWMN353wNRYH6POTrmJel2cbJTFrKfovR+fcN0FQvXAfFvujD/SOoz5vGGZYvbUabe02AiD4rGRnfTiAyyi7gyc+9X4+auXv+MBqax0HvCwRCYT2WWOhiFqcwNYaGRRhFBloxJFcT2xqT/MiF2nWAeTPwaN3CX8FlJ6iDz+Jdly09nljr/CncL272oruVIILuIK3XvV1tj0n+Z9s91PY0EYBfzVBZ7TzzIXN60bP0ZlOmYy/iN1LMMFQFkyZhUQWzv/fqmCfFSL2Lpfw1MYan35IOUW2P+OjPVd2LwTeE2GwXmjCFH6f36pmkvc9fOz/vX3sU8yYTZNvX+LGaKqWVZ3+WnUg8zUIaQo/R+fcuMeGKqByoJ8zLvkYPMscZ8tgnzD/ix1MvQyghyasQ3WBuTGhEvN1/FCaXDbH81n8MMHfOPRLpFZpgzgCzZ62rGpKNDIP5UDS5PtUVxUs6ReiYJo6akPg2B+Vymc4Ia/KlIhcsEc2jITqWdTPa6tsakbzNXR+z6MacfeaXDPJe3LXt1HtPF1LKsX4ik+/CYQ0J2KuyYWCmZlL3369uU84kaXGHey9wk54w6JqkpPp9Qbo35fBPmeymTem2tUJCdyr4RhferEfHK4Iils+qYyErvkTCYL+QuHfN9zJR6bqkQkLOO2N3tIfgUjYt5vI7Z/qZxMVNo4Q0VUC6mpMJgtobsVHIZVepbHHvv13eYqyN29y2xmwWTMD/iPXKAubxj2ctLmeLdQBMKeICJEgELWUKOFnE5B9SguwOP/USji/lOHXO5NebLmKxjXsR4iUJgWUF2Cr+UKvWVbzdKLX9e75oQu3tJhZvLlTCv8R45QDnvWpbWkYkmzGMlEgFlQSYdYltjUiNid1e08NPlLuY7osB8OePF+6ikmrGUUolGIAVm4xR6CVXq+hB779d3KdffSLj7+2X2RkLC/Kj3yMchMF/JeLVvzXiYkRKRAApIxynwYhNiW+9XI2J3p8rMX/q4mMcI/8KkPqbcNcUPqs6M0zGvFu+Eg2IOxMdFXK0uJrO3133PjLgkKsRSKXWU8rj3yMfMscZ8lW6+2ow1YgFJMMwBCDkFXUSVitje+9X46nJdtIilkuoSVpFJhcHcVb8htmCtWFwdBLMvIxdxtevv6cje+9V4FWcBsVRaXcIuMqkwN41u+mRBS9aJxEN/zD6UnAIupEpFfLU14vcp5yM16O7oHr0fhXQ1r/ce+Yhy3rcs7ToT5o0iS9kPc1pOLuJqdf301db2urlGLJV6NBrM1+uvIb7ERm6WSKWQP6kLqFIRX2WN+APKdS+WDZSIraGz56rilHyEEtV49kPK+cCytO764oZWbBJbJaXD7MfqgsTG80l10R9qfPQBc3TEG7OPWCrdiHmONeae+kbjrdnKTZAOc3pa55sQj48G8WhqJQhZlFNDLSWqx28YzIbFv63ZJnzgU2FOwyt2no64szXiD003is25QyzVUsto1efX2Dof9dFTik5ku9g8wow5JbHYedRwtjfWmQnWiA3XymZG5hKxVFMto9jsPWL8PfNRPz2L9iS2i/2TTJhTMIudS7WO2P4qNiDeknvEUm21jFTNaMNgNqTct2WnMPPSMRupxc6lRk3h7KzPSPnIiHgrw/OBWKqxluFRYB6gG/m0Zbcw81IxGyDHOlCtIr6ScZaIPzI9Ij3JsHwhlmqtZbhqSvuB6SneR4Poq4ZOZpfYrNiLWYMc60CNmu99JePV6WsffcQc/WF/G0PziViquZahKub3Q2AuprcaOoVdYodzGbOy0j52DjV08H7uCiZYIjZOwmynON+IhZzut2STanrUjtnq+nVfradKDb1HT7HlRNwJeK7k2DlUq4gvjwZxRWNBLF3NxarNsnGO0EdD6aGG2rHHa38kQY61p5pzvedfrr/n8lEKxIMbC2KpFbUUq1bL9pgLGM6NavA0qrgo+a0L2YS4UwjEhmnEHY3nKk5IwqzYLRunY9OqgFHKNnbAGVQl7Y8cyLGzqVZdZDoxKQRi7S3aDor5QupYI5HTmi8SHuFJvRsCc6m+KeOZVMccooVgRtzRGrHxffBOivlc6lQjkou5WHW2Nr5LT6sCSvUNc8+iOtYBoBBiZ1GtWk511Jd2+KipIZZa9TmDM8dcyO26e3N7qmLtoTB2BjtUxIXcFgKxtkZnF8Ui97xxIpZa9jnF7PIeeccac72+/Bee4XUojL/FTbygnm6XrWxcbdYEEEutO2zCPNcCcz1LdSf+LYyNNziDkdiX2Up37/FWTNf91IwyLk/dzWCR3t+4EQs5w5PWbFZHyqdTpidTGtTASnfo4aqKovgX4I74Yq1Zr/rqtmSqbimqyYh4D4OaDmKQMD9BH++RYJgfp0YNxekddzKXnUe4+CEGq69nalngu1nssYHYbekhbmOP94hxBbWiLTril+ifTA53ByPxWkaK/ZuTOsIi9XbtkTEro7rpIZZae4hB6mSEMaNFUqW+fczf6CvPNknD6ngdY1Uydazg6RSFG/OLqhnYFBFLLT7ErVR7jxhzsxw9re9c+QZ9vM8BngmieEN8ukh2TaqetVQaCjdmyu1tuoilVh9iIHu9R4xZhsALPKpu1PwefYSXWpKBNp8cv4d7vJEGNopt7CQZcz73UtSUEUstP0SRjnmOhvklVoosuKQO0E88yckMDG9G4r/kbvXHs42NUsh4FT/V9BFLrT9EEU95j6hX819ZKpY/JXWIgbyoMzC+44vPT+QfJVXJWuenZszD33dsIJZ6YMAsJ9i/wkIxtZhULUPEHzCVQYrXz/EVjFLLeJoV1JkdJfYlHliaPmKpF59RxD7vkYRVxJs8qLrV1VGaare0NEZPsf6sVw3+O/GRbkHzNP3FD/jYQCzkDE/asF2dkz+LEhapk6ENTBBpxzKDQG5ase5s9R3uHJOIQcJcIRZhJVWARm025TqDYG5aT9HXZ0HCfoqOTcRujw5SxH7vEQ3xf5gQJ+W3JOh5eqTJmt1PkXhKP/YQS736lP4qZo/KhfVIagb+665eonsKo+JnKBLD+mMTsdSzTynimRSnLOebfgzSQnY++H90N2xaehwglnr3Cf2NmNcnvGXSyedKdqp4jZv4g+fAsxSJGe1jG7HUw08o4lnl0E5KgyQV+d4unI+/Q0+ed4PP0f94QSz18gD9eU4K72dIsKUOAdbCOkV8SB9n2jTOLccTYqmnB7jFfQHyIgOCjnEDus46z4ytWMep9D3eEHsYtGUXXXmZG8UqnnQUrK193WV6rY5PxBKDtuxmiBj4pqcQwj9ZXgx6PCKWGLQNdqElIP8/FPfUvHzAvBMAAAAASUVORK5CYII="/></svg>',
"ad/config/default.json":"{}","ad/loader.svg":'<svg version="1.1"  \tclass="svg-loader"  \txmlns="http://www.w3.org/2000/svg"  \txmlns:xlink="http://www.w3.org/1999/xlink"  \tx="0px" \ty="0px"  \tviewBox="0 0 80 80"  \txml:space="preserve"><path  id="IceLoaderSVG"\tfill="#ffffff"  \td="M10,40c0,0,0-0.4,0-1.1c0-0.3,0-0.8,0-1.3c0-0.3,0-0.5,0-0.8c0-0.3,0.1-0.6,0.1-0.9c0.1-0.6,0.1-1.4,0.2-2.1 \tc0.2-0.8,0.3-1.6,0.5-2.5c0.2-0.9,0.6-1.8,0.8-2.8c0.3-1,0.8-1.9,1.2-3c0.5-1,1.1-2,1.7-3.1c0.7-1,1.4-2.1,2.2-3.1 \tc1.6-2.1,3.7-3.9,6-5.6c2.3-1.7,5-3,7.9-4.1c0.7-0.2,1.5-0.4,2.2-0.7c0.7-0.3,1.5-0.3,2.3-0.5c0.8-0.2,1.5-0.3,2.3-0.4l1.2-0.1 \tl0.6-0.1l0.3,0l0.1,0l0.1,0l0,0c0.1,0-0.1,0,0.1,0c1.5,0,2.9-0.1,4.5,0.2c0.8,0.1,1.6,0.1,2.4,0.3c0.8,0.2,1.5,0.3,2.3,0.5 \tc3,0.8,5.9,2,8.5,3.6c2.6,1.6,4.9,3.4,6.8,5.4c1,1,1.8,2.1,2.7,3.1c0.8,1.1,1.5,2.1,2.1,3.2c0.6,1.1,1.2,2.1,1.6,3.1 \tc0.4,1,0.9,2,1.2,3c0.3,1,0.6,1.9,0.8,2.7c0.2,0.9,0.3,1.6,0.5,2.4c0.1,0.4,0.1,0.7,0.2,1c0,0.3,0.1,0.6,0.1,0.9 \tc0.1,0.6,0.1,1,0.1,1.4C74,39.6,74,40,74,40c0.2,2.2-1.5,4.1-3.7,4.3s-4.1-1.5-4.3-3.7c0-0.1,0-0.2,0-0.3l0-0.4c0,0,0-0.3,0-0.9 \tc0-0.3,0-0.7,0-1.1c0-0.2,0-0.5,0-0.7c0-0.2-0.1-0.5-0.1-0.8c-0.1-0.6-0.1-1.2-0.2-1.9c-0.1-0.7-0.3-1.4-0.4-2.2 \tc-0.2-0.8-0.5-1.6-0.7-2.4c-0.3-0.8-0.7-1.7-1.1-2.6c-0.5-0.9-0.9-1.8-1.5-2.7c-0.6-0.9-1.2-1.8-1.9-2.7c-1.4-1.8-3.2-3.4-5.2-4.9 \tc-2-1.5-4.4-2.7-6.9-3.6c-0.6-0.2-1.3-0.4-1.9-0.6c-0.7-0.2-1.3-0.3-1.9-0.4c-1.2-0.3-2.8-0.4-4.2-0.5l-2,0c-0.7,0-1.4,0.1-2.1,0.1 \tc-0.7,0.1-1.4,0.1-2,0.3c-0.7,0.1-1.3,0.3-2,0.4c-2.6,0.7-5.2,1.7-7.5,3.1c-2.2,1.4-4.3,2.9-6,4.7c-0.9,0.8-1.6,1.8-2.4,2.7 \tc-0.7,0.9-1.3,1.9-1.9,2.8c-0.5,1-1,1.9-1.4,2.8c-0.4,0.9-0.8,1.8-1,2.6c-0.3,0.9-0.5,1.6-0.7,2.4c-0.2,0.7-0.3,1.4-0.4,2.1 \tc-0.1,0.3-0.1,0.6-0.2,0.9c0,0.3-0.1,0.6-0.1,0.8c0,0.5-0.1,0.9-0.1,1.3C10,39.6,10,40,10,40z" \t><animateTransform id="animateTransformLoader"\tattributeType="xml"\tattributeName="transform"\ttype="rotate"\tfrom="0 40 40"\tto="360 40 40"\tdur="0.6s"\trepeatCount="indefinite" \t/></path></svg>',
"config.json":'{"version":"1.2"}',"leaderboard/s3eFBInstantPanel.html":'<div id="s3eFBIGLeaderboardInviteFriends"style="display: block; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; background: linear-gradient(rgba(0, 0, 0, 0) 10%, rgba(0, 0, 0, 0.3) 55%, rgba(0, 0, 0, 0.7) 100%); font-family: &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; cursor: default; overflow: hidden; user-select: none; box-sizing: border-box; padding: 3%;"><div style="width: 100%; height: 85%;"><div id="cross-promo"style="border-radius: 18px; box-shadow: rgba(0, 0, 0, 0.498039) 0px 2px 8px 2px; margin-bottom: 10px; overflow: hidden; margin-left: auto; margin-right: auto; text-align: center; height: 81px; background-color: rgb(255, 255, 255);"></div><div style="height: 100%; background-color: rgb(255, 255, 255); border-radius: 18px; box-shadow: rgba(0, 0, 0, 0.5) 0px 2px 8px 2px; margin-bottom: 10px; overflow: hidden;"><div style="color: rgb(102, 102, 102); margin: 12px 12px; text-align: center; font-size: 20px;"><a id="s3eFBIGLeaderboardTab"style="float: left; width: calc(50% - 8px); position: relative; border: 1px solid rgb(64, 128, 250); padding: 8px 0px 8px 0px; display: inline-block; text-align: center; cursor: pointer; white-space: nowrap; border-radius: 18px 0px 0px 18px; background-color: rgb(64, 128, 250); color: rgb(255, 255, 255);">Leaderboard</a><a id="s3eFBIGInviteFriendsTab"style="width: calc(50% - 8px); float: right; position: relative; border: 1px solid rgb(64, 128, 250); padding: 8px 0px 8px 0px; display: inline-block; text-align: center; cursor: pointer; white-space: nowrap; border-radius: 0px 18px 18px 0px; color:#3b5998;">Play Together</a></div><a id="s3eFBIGInviteMoreFriends"style="width: 100%; margin-top: 10px; margin-bottom: 12px; height: 18px; color: rgb(64, 128, 250); text-align: center; cursor: pointer; display: inline-block; font-size: 18px; line-height: 18px;">Invite More Friends</a><div id="s3eFBIGLeaderboard"style="width: calc(100% + 100px);height: calc(100% - 115px);overflow-y: scroll;"></div><div id="s3eFBIGInviteFriends"style="width: calc(100% + 100px);height: calc(100% - 115px);overflow-y: scroll;"></div></div></div><div style="width: 100%; height: 15%; box-sizing: border-box; padding: 3% 0px 0px 0px;"><div id="s3eFBIGPlay"style="width: 100%; height: 100%; border-radius: 14px; box-shadow: rgba(0, 0, 0, 0.5) 0px 2px 8px 2px; background-color: rgb(64, 128, 250); color: rgb(255, 255, 255); text-align: center; cursor: pointer; font-size: 28px; font-weight: 400; user-select: none;"><div style="height: 48%;"></div><div id="s3eFBIGLeaderboardButtonText"style="width: 100%;height: 4%;line-height: 0px;">Play now</div><div style="height: 48%;"></div></div></div></div>',
"logo/block.html":'\ufeff<!DOCTYPE HTML>\n<html>\n\t<head>\n        <title>Block Game Page</title>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1, user-scalable=0"/>\n\t\t<style>\n            html,body{\n                padding:0;\n                margin:0;\n            }\n            #play{\n                float:left;\n            }\n            #button{\n                margin:0 auto;\n                text-align:center;\n                color:#414141;\n                font-weight:bold;\n                font-family:sans-serif;\n            }\n            #contact{\n                position:fixed;\n                bottom:0;\n                text-align:center;\n                color:#000;\n                font-family:sans-serif;\n            }\n            #contact_link{\n                text-decoration:none;\n            }\n\t\t\t#screen{\n                height:100%;\n                width:100%;\n                position:absolute;\n            }\n\t\t</style>\t\n\t</head>\n\t<body>\n            <div style="pointer-events: auto; z-index: 0; position: absolute;">\n        \t\t<div id="screen">\n                    <div id="button">\n                        The game is unavailable on this website.<br/>\n                        Please, click the button below to enjoy it free online.<br/>\n                        <a href="#" target="_blank" id="play">\n                            <img src="" id="play_img" />\n                        </a>\n                    </div>\n                    <div id="contact">\n                        Dear site owner,<br />\n                        To host the game on your site please use this link<br />\n                        <a href="#" target="_blank" id="contact_link"></a>\n                    </div>\n                </div>\n            </div>\n        \n\t</body>\n</html>',
"logo/preloader.svg":'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.0.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 300 100" style="enable-background:new 0 0 300 100;" xml:space="preserve">\n<style type="text/css">\t\n\t.st9{enable-background:new    ;}\t\n</style>\n<g>\n\t<g>\n\t\t<g>\n\t\t\t<path fill="none" d="M72.5,25.6l-29.9-8.9l0,0l30.2,8.9C72.6,25.6,72.6,25.6,72.5,25.6z"/>\n\t\t\t<polygon fill="none" points="76.4,40.4 76.5,31 76.5,31 \t\t\t"/>\n\t\t\t<polygon fill="none" points="75.3,65.7 75.3,65.7 72.3,64.7 \t\t\t"/>\n\t\t\t<path fill="none" d="M48.1,56.4v24.4l0,0V56.4L48.1,56.4z"/>\n\t\t\t<path fill="none" d="M39.1,16.8l-23.9,9.3c-0.1,0-0.1,0.1-0.2,0.1l24.7-9.6C39.6,16.7,39.3,16.8,39.1,16.8z"/>\n\t\t\t<polygon fill="none" points="75.2,27.4 75.2,27.4 61.8,33 \t\t\t"/>\n\t\t\t<polygon fill="none" points="40.9,36.3 40.9,36.3 44.9,37.6 \t\t\t"/>\n\t\t\t<path fill="#B7E5FA" d="M40.9,16.5c-0.4,0-0.7,0.1-1,0.2l-24.8,9.6c-0.9,0.4-1.7,0.9-2.2,1.7l27.9,8.3L40.9,16.5z"/>\n\t\t\t<path fill="#77D2F7" d="M40.9,36.3L40.9,36.3l4,1.3l3.3,1.1L61.8,33l13.4-5.6c-0.6-0.7-1.5-1.4-2.5-1.7l-30.2-9\n\t\t\t\tc-0.6-0.2-1.2-0.3-1.8-0.2L40.9,36.3L40.9,36.3z"/>\n\t\t\t<path fill="#66CDF6" d="M40.8,36.3L40.8,36.3L40.8,36.3L40.8,36.3L40.8,36.3l-27.9-8.4c-0.7,1-1.2,2.1-1.2,3.4L12,64\n\t\t\t\tc0,1.2,0.5,2.4,1.1,3.3l27.7-13.6L40.8,36.3z"/>\n\t\t\t<path fill="#29A0DB" d="M48.2,56.3L48.2,56.3L48.2,56.3l-0.1,24.5c0.7-0.1,1.6-0.3,2.2-0.6l23.1-12.5c0.8-0.5,1.5-1.1,2-1.8l-3-1.1\n\t\t\t\tL48.2,56.3z"/>\n\t\t\t<path fill="#9DDCF9" d="M40.7,53.8v-0.2L13.1,67.3c0.6,0.8,1.5,1.5,2.5,1.8l30.2,11.3c0.7,0.3,1.6,0.4,2.4,0.4V56.4L40.7,53.8z"/>\n\t\t\t<path fill="#2C87C8" d="M75.2,27.4L61.8,33l-13.6,5.7h0.1l-0.2,17.5l24.1,8.5l3,1.1c0.6-0.8,0.9-1.9,0.9-3l0.3-22.5l0.1-9.5\n\t\t\t\tC76.5,29.6,76,28.4,75.2,27.4z"/>\n\t\t\t<polygon fill="#49B2E5" points="40.9,36.3 40.8,36.3 40.7,53.6 40.7,53.8 48.1,56.4 48.1,56.4 48.2,56.4 48.2,56.3 48.4,38.7 \n\t\t\t\t48.2,38.7 44.9,37.6 \t\t\t"/>\n\t\t</g>\n\t\t<path fill="#E7F6FC" d="M13.2,28c0,0,32.2,11.2,35.6,10.8c10.3-1.5,25.9-11.2,25.9-11.2s-20.2,5.8-34.4,5.8\n\t\t\tC32.3,33.4,13.2,28,13.2,28z"/>\n\t</g>\n\t<g class="st9">\n\t\t<path fill="#4DC5F2" d="M90.6,67.1c-0.6-0.3-0.8-0.7-0.8-1.4V29.4c0-1.3,1.1-1.8,3.4-1.8h1.9c1.2,0,2,0.2,2.6,0.5s0.8,0.8,0.8,1.4\n\t\t\tv36.3c0,1.2-1.1,1.8-3.4,1.8h-1.9C92.1,67.6,91.2,67.5,90.6,67.1z"/>\n\t\t<path fill="#4DC5F2" d="M106.4,64.2c-2.3-2.5-3.5-6.3-3.5-11.3c0-5.2,1.2-9,3.5-11.6c2.4-2.6,6.1-3.9,11.1-3.9\n\t\t\tc1.4,0,2.9,0.2,4.3,0.5s2.7,0.7,3.6,1.4c1,0.6,1.5,1.3,1.5,2.1c0,0.4-0.2,0.8-0.6,1.6s-0.8,1.4-1.3,1.9c-0.5,0.6-0.9,0.8-1.2,0.8\n\t\t\tc-0.2,0-0.5-0.2-1-0.5c-0.8-0.4-1.6-0.6-2.3-0.9c-0.7-0.2-1.6-0.4-2.7-0.4c-2.2,0-3.9,0.7-4.9,2.1c-1,1.4-1.6,3.6-1.6,6.5\n\t\t\ts0.5,5.2,1.5,6.5c1,1.4,2.5,2.1,4.6,2.1c1.2,0,2.2-0.1,3-0.4c0.8-0.3,1.7-0.6,2.5-0.9c0.2-0.1,0.4-0.2,0.6-0.2\n\t\t\tc0.2-0.1,0.4-0.1,0.5-0.1c0.4,0,0.8,0.3,1.3,0.8c0.5,0.6,0.8,1.2,1.2,1.8c0.4,0.7,0.5,1.3,0.5,1.7c0,1-0.6,1.8-1.9,2.4\n\t\t\tc-1.3,0.6-2.7,1-4.2,1.3c-1.6,0.3-2.9,0.4-3.8,0.4C112.3,67.9,108.7,66.6,106.4,64.2z"/>\n\t\t<path fill="#4DC5F2" d="M132.3,63.9c-2.5-2.7-3.7-6.4-3.7-11.2c0-5.3,1.2-9.2,3.7-11.7s5.8-3.8,10.1-3.8c2.9,0,5.2,0.6,7,1.9\n\t\t\tc1.8,1.3,3.1,3,4,5.3c0.8,2.2,1.3,4.7,1.3,7.5c0,0.3-0.2,0.7-0.6,1.3c-0.4,0.6-0.8,1-1.3,1.5s-0.8,0.6-1.1,0.6h-14.5\n\t\t\tc0.2,2.2,0.8,3.7,1.9,4.6c1.1,0.9,2.6,1.4,4.6,1.4c1.1,0,2-0.1,2.9-0.4c0.8-0.3,1.8-0.6,2.8-1c0.6-0.3,1-0.5,1.2-0.5\n\t\t\tc0.4,0,0.8,0.3,1.3,0.8s0.8,1.2,1.2,1.8c0.4,0.7,0.5,1.3,0.5,1.7c0,0.8-0.6,1.7-1.8,2.2c-1.2,0.6-2.6,1.1-4.1,1.4\n\t\t\tc-1.6,0.3-3,0.5-4.2,0.5C138.5,67.9,134.8,66.6,132.3,63.9z M146.5,49.7c0-1.8-0.4-3.1-1-4.2c-0.6-1-1.7-1.6-3-1.6\n\t\t\tc-2.8,0-4.5,1.9-5.1,5.8H146.5z"/>\n\t\t<path fill="#4DC5F2" d="M162.6,67.1c-2-0.6-3.6-1.2-4.7-2c-1.1-0.8-1.6-1.6-1.6-2.2c0-0.6,0.2-1.2,0.6-2c0.5-0.8,0.9-1.5,1.5-2.1\n\t\t\tc0.6-0.6,1-0.9,1.5-0.9c0.3,0,0.7,0.2,1.5,0.6c1.1,0.6,2.2,1.1,3.3,1.5c1,0.4,2.2,0.6,3.6,0.6c1.5,0,2.8-0.3,3.8-0.9\n\t\t\tc1-0.6,1.6-1.6,1.6-3c0-0.8-0.3-1.6-0.8-2.2c-0.6-0.6-1.2-1.1-2-1.6c-0.8-0.5-1.9-0.9-3.4-1.5l-2.5-1.1c-1.6-0.7-2.9-1.6-4-2.5\n\t\t\tc-1.1-0.9-2-2.1-2.7-3.5c-0.7-1.5-1-3.2-1-5.4c0-2.6,0.6-4.8,1.9-6.5c1.3-1.7,3-3,5-3.8c2-0.8,4.2-1.2,6.5-1.2\n\t\t\tc1.9,0,3.7,0.2,5.2,0.6c1.6,0.4,2.8,0.9,3.7,1.5c0.9,0.6,1.3,1.2,1.3,1.8c0,0.6-0.2,1.2-0.5,1.9c-0.4,0.8-0.7,1.5-1.2,2.1\n\t\t\tc-0.5,0.6-0.9,0.9-1.4,0.9c-0.2,0-0.6-0.1-1-0.3c-0.8-0.3-1.6-0.6-2.4-0.7c-0.8-0.2-1.8-0.3-3-0.3c-1.9,0-3.3,0.3-4.1,0.9\n\t\t\tc-0.7,0.6-1.1,1.4-1.1,2.2c0,1,0.3,1.8,0.7,2.5c0.5,0.6,1.2,1.2,1.9,1.7c0.8,0.5,1.9,0.9,3.3,1.5c2.1,0.9,3.9,1.8,5.3,2.6\n\t\t\tc1.4,0.8,2.6,2,3.5,3.5c1,1.6,1.5,3.5,1.5,5.9c0,3-0.6,5.3-1.8,7.2c-1.2,1.8-2.8,3.2-4.7,4.1c-1.9,0.8-4,1.3-6.3,1.3\n\t\t\tC167.1,67.9,164.7,67.7,162.6,67.1z"/>\n\t\t<path fill="#4DC5F2" d="M188.3,65.6c-1.4-1.6-2.1-3.9-2.1-6.9V44.4h-0.9c-0.6,0-1-0.2-1.3-0.6c-0.3-0.5-0.4-1.2-0.4-2.2v-0.9\n\t\t\tc0-1,0.1-1.8,0.4-2.2s0.7-0.6,1.3-0.6h0.9l0.7-5.4c0.2-1.2,1.2-1.8,3-1.8h1.8c1,0,1.7,0.2,2.1,0.5s0.6,0.7,0.6,1.4v5.4h2.8\n\t\t\tc0.6,0,1,0.2,1.3,0.6c0.3,0.5,0.4,1.2,0.4,2.2v0.9c0,1-0.1,1.8-0.4,2.2c-0.3,0.5-0.7,0.6-1.3,0.6h-2.8v14.3c0,0.8,0.2,1.5,0.5,1.8\n\t\t\tc0.3,0.4,0.8,0.6,1.6,0.6c0.2,0,0.5,0,0.8-0.1c0.4-0.1,0.6-0.1,0.6-0.1c0.4,0,0.6,0.3,0.9,0.8c0.3,0.6,0.5,1.2,0.6,1.8\n\t\t\tc0.2,0.6,0.3,1.1,0.3,1.4c0,1.8-1.8,2.8-5.4,2.8C191.7,67.9,189.7,67.2,188.3,65.6z"/>\n\t\t<path fill="#4DC5F2" d="M205.3,64c-2.4-2.7-3.5-6.5-3.5-11.4s1.2-8.8,3.5-11.3c2.4-2.6,5.8-4,10.2-4c4.4,0,7.9,1.3,10.2,3.9\n\t\t\tc2.3,2.6,3.5,6.4,3.5,11.3c0,5-1.2,8.8-3.5,11.4s-5.7,4-10.2,4C211,67.8,207.7,66.6,205.3,64z M219.6,59.1\n\t\t\tc0.8-1.5,1.3-3.6,1.3-6.5c0-2.9-0.5-5.1-1.3-6.5c-0.8-1.5-2.1-2.2-4-2.2c-3.5,0-5.3,2.9-5.3,8.7c0,2.9,0.5,5.1,1.3,6.5\n\t\t\tc0.8,1.5,2.2,2.2,4,2.2C217.4,61.2,218.7,60.6,219.6,59.1z"/>\n\t\t<path fill="#4DC5F2" d="M233.5,65.7v-18c0-2.8-0.2-5-0.6-6.8c-0.1-0.6-0.2-1-0.2-1.2c0-0.5,0.4-0.7,1.2-1c0.8-0.3,1.7-0.5,2.7-0.6\n\t\t\tc1-0.1,1.8-0.2,2.4-0.2c0.6,0,1.1,0.3,1.4,0.7s0.5,1.2,0.7,2.1l0.2,0.8c0.9-1.2,2.1-2.2,3.6-3c1.5-0.8,3.1-1.3,4.8-1.3\n\t\t\tc2.9,0,5,0.7,6.4,2.2c1.4,1.5,2,3.8,2,6.9v19.3c0,1.2-1.1,1.8-3.4,1.8h-1.5c-2.2,0-3.4-0.6-3.4-1.8v-18c0-1.1-0.3-2-0.8-2.6\n\t\t\tc-0.6-0.6-1.4-0.9-2.7-0.9c-1,0-1.9,0.4-2.7,1c-0.7,0.6-1.4,1.5-1.8,2.3v18.3c0,1.2-1.1,1.8-3.4,1.8H237\n\t\t\tC234.7,67.6,233.5,66.9,233.5,65.7z"/>\n\t\t<path fill="#4DC5F2" d="M265.9,63.9c-2.5-2.7-3.7-6.4-3.7-11.2c0-5.3,1.2-9.2,3.7-11.7c2.5-2.5,5.8-3.8,10.1-3.8\n\t\t\tc2.9,0,5.2,0.6,7,1.9c1.8,1.3,3.1,3,4,5.3c0.8,2.2,1.3,4.7,1.3,7.5c0,0.3-0.2,0.7-0.6,1.3c-0.4,0.6-0.8,1-1.3,1.5\n\t\t\ts-0.8,0.6-1.1,0.6h-14.5c0.2,2.2,0.8,3.7,1.9,4.6c1.1,0.9,2.6,1.4,4.6,1.4c1.1,0,2-0.1,2.9-0.4c0.8-0.3,1.8-0.6,2.8-1\n\t\t\tc0.6-0.3,1-0.5,1.2-0.5c0.4,0,0.8,0.3,1.3,0.8s0.8,1.2,1.2,1.8c0.4,0.7,0.5,1.3,0.5,1.7c0,0.8-0.6,1.7-1.8,2.2\n\t\t\tc-1.2,0.6-2.6,1.1-4.1,1.4c-1.6,0.3-3,0.5-4.2,0.5C272.1,67.9,268.4,66.6,265.9,63.9z M280.1,49.7c0-1.8-0.4-3.1-1-4.2\n\t\t\tc-0.6-1-1.7-1.6-3-1.6c-2.8,0-4.5,1.9-5.1,5.8H280.1z"/>\n\t</g>\n</g>\n</svg>\n',
"logo/progressbar.svg":'<svg id="svg" xmlns="http://www.w3.org/2000/svg"  \txmlns:xlink="http://www.w3.org/1999/xlink"  width=\'100%\' height="100%" viewBox="0 0 200 200" version="1.1" >\n  <text id="progressText" x="98" y="117"     font-weight="bold" font-size="50px" font-family="sans-serif" text-anchor="middle" margin="2em auto" fill="#FF9F1E">1</text>\n  <circle id="bar"  transition="stroke-dashoffset 1s linear" stroke-width="17.5" stroke="#FF9F1E" r="90" cx="100" cy="100" fill="transparent" stroke-dasharray="565.48" stroke-dashoffset="0"><animateTransform\tattributeType="xml"\tattributeName="transform"\ttype="rotate"\tfrom="0 100 100"\tto="360 100 100"\tdur="1.2s"\trepeatCount="indefinite" \t/></circle>\n</svg>',
"ui/s3eStoreButtonsPanel.html":'<div id="btn_panel" style="background-color:#ffffff;margin:0 auto;pointer-events: auto;"><a href="#" target="_blunk" id="ios" style="float:left;"><img src="" id="ios_img" /></a><div id="image"  style="float:left;"><img src="" id="game_img" /></div><a href="#" target="_blunk" id="google"  style="float:left;"><img src="" id="google_img" /></a><div id="game_name" style="font-family:Tahome,sans-serif;color:#7b7b7b;float:left;width:100%;font-weight: bold;"></div><div id="drop_btn" style="text-align:center;"></div></div>',
"ui/storeButton.svg":'<?xml version="1.0" encoding="utf-8"?>\x3c!-- Generator: Adobe Illustrator 22.0.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e<svg version="1.1" id="Layer_3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 150 65" style="enable-background:new 0 0 150 65;" xml:space="preserve"><style type="text/css">.stStoreB2{fill:#9CA4AA;} \t.stSotreB3{fill:none;stroke:#FFFFFF;stroke-width:3;stroke-miterlimit:10;}</style><g><image style="overflow:visible;opacity:0.28;" width="135" height="53" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIcAAAA1CAYAAABr5fh0AAAACXBIWXMAAAsSAAALEgHS3X78AAAA GXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA9FJREFUeNrsnYty2jAQRWVhEpy0 pOnr/z+wbVqSQsLDqjRzd7IREgjSNjLcnbljg40ykz3srgRajKHRMta80Wtp/9fcv3RwU3BOqx8M dwgwTcF1ucdGzxGMYQHiFBB99HzS2gIwbEYNo8dgooYDECllo0izAwyBYASIRCPIJiIIQakvjQgY G2ittFGQuJLIocEI1y+ULnHUkBCOuuHQUCy9nnAUrVWqcbvg0KlEwJh4XSlNAMlYRRCCUScgEjFW gOLRa64kto5SUDZySCoZA4R3Xu+9ptC1VwdAWtYf1dcZa4Cx8PrtNYNvbaJY3eQih56FjBA1OsBx 6/UJxymem6j0wtlLnbMTSSchYjwAjAl8plOOqNGAtZl6Q8MRYPjo9QW6RSTpcA/hqBuOJaLGvdcd fO5UDSKycd2Rg0PqjSuA8MHrs9dXHKe4RjiGAcdcpROngJnj2KIuafallbgYvQYMkloCHDcRHJb+ qM76CI4LBYZOMRdR7diUpJUWRWcXFaU30LWasTBy1Bs5VvCTQWH6AH/qScUomljsXedoMeglCOui KW1HOAYBh9QYK+U3vRzRpsDQcDSJ1KJXRseQXhAbR3DQ6gNE0n3Kb20iamgOXFxzxFNagWRkXq6K alnCUf1C2CjjR2u2P0jN1hwmU6Badd5kRKvPmsSbPfZp1ne2YHCTIIs2TFAO8qU9gkLDaDHI6HGw 32zhgLTziCRHRw7amRnhoBEOGuGgEQ4a4aARDhrhoBEOGuGgEQ4a4aDRiuHQu68d/00naS7h66Mj hysZkFYlBEf5zR5BF6E4nUix05dtAXF6i35vXu6tZASpP2K4yJexT4uat7jEoHFfh3hvJXfY1w3H JiHtxz7xJt/aDunM87eONRTS5GMF6b2V8tre8GuDtUaNTcJv4su4gcsWIG1m4F5BIX0dZG9l0Bgw hHu4qal+OHRPjgX8+aQgKersE0cN6esQttCFXdphf+Ul7g0Dc69svRbvlf0F/93Dnwv4N44e2ZpD R40lCJOGH3eAocE17rIfRuTQu+y/w48z+PXRPLd+2ipQ2x0pRQYNpHUKjBXIY3+O4cCh+3N88/qJ x/MEHEVpRQad4T6pMQJx7OwzHDjizj4BkB84X8DPRWnFJIgT52/wR2aGPcGGstiV6wk2U3WHwOH2 pRVdyOhOLz0eLwy7CQ4JkH3dBB9xTSLH3tmKUcRpYCSSsA/pMMCIF8J29SFNrpayg/Hpw3F0B+Nd zmTv89OrP1LKfr7CX004r9nLQb+awN9bOb80kzp/FRx/+7W0twOERnu9/RFgAG7gv52n03heAAAA AElFTkSuQmCC" transform="matrix(1 0 0 1 8.375 5.75)"></image><g id="store_btn_arrow"><g><path class="stStoreB2" d="M128.6,43.8H22.9c-2.7,0-4.9-2.2-4.9-4.9V13.6c0-2.7,2.2-4.9,4.9-4.9h105.8c2.7,0,4.9,2.2,4.9,4.9v25.3\tC133.5,41.6,131.3,43.8,128.6,43.8z"/><g><line class="stSotreB3" x1="62.1" y1="32.5" x2="77" y2="17.8"/><line class="stSotreB3" x1="90" y1="32.5" x2="75.2" y2="17.8"/></g></g></g></g></svg>'};
return Assets}();system.Assets=Assets})(system=__.system||(__.system={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var system;(function(system){var DevicePlatform=function(){function DevicePlatform(){}DevicePlatform.WINDOWS="windows";DevicePlatform.MACOS="macos";DevicePlatform.IOS="ios";DevicePlatform.ANDROID="android";DevicePlatform.LINUX="linux";DevicePlatform.UNKNOWN="unknown";return DevicePlatform}();system.DevicePlatform=DevicePlatform;DevicePlatform["WINDOWS"]=DevicePlatform.WINDOWS;DevicePlatform["MACOS"]=DevicePlatform.MACOS;DevicePlatform["IOS"]=DevicePlatform.IOS;
DevicePlatform["ANDROID"]=DevicePlatform.ANDROID;DevicePlatform["LINUX"]=DevicePlatform.LINUX;DevicePlatform["UNKNOWN"]=DevicePlatform.UNKNOWN})(system=__.system||(__.system={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var system;(function(system){var Logger=function(){function Logger(){}Logger.greeting=function(){if(!window.console||!window.console.log||window["IceStone"]&&IceStone!=window["IceStone"]&&!Logger.HASHED)return;console.log("%c\u2655 IceStone SDK ".concat(IceStone.getSDKVersion()," \u2655"),"color: white; font-size: x-large; background-color: gray; padding: 20px")};Logger.verbose=function(){var args=[];for(var _i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];
Logger.VERBOSE=true;Logger.HASHED=true;if(!Logger.VERBOSE)return;if(!window.console||!window.console.log||window["IceStone"]&&IceStone!=window["IceStone"]&&!Logger.HASHED)return;console.log("%c".concat(parseArgumentsArray(Array.prototype.slice.call(arguments)).join(" ")),"color: gray; font-style: italic; padding: 5px")};Logger.error=function(value){if(!window.console||!window.console.log||window["IceStone"]&&IceStone!=window["IceStone"]&&!Logger.HASHED)return;var message=value;if(typeof value==="object")message=
value.stack||value.message;console.log("%c".concat(message),"color: red; font-size: x-medium; background-color: pink; padding: 5px")};Logger.developer=function(value){if(!Logger.DEVELOPER)return;if(!window.console||!window.console.log||window["IceStone"]&&IceStone!=window["IceStone"]&&!Logger.HASHED)return;var message=value;if(typeof value==="object")message=value.stack||value.message;console.log("%c".concat(message),"color: blue; font-size: x-medium; background-color: lightblue; padding: 5px")};
Logger.VERBOSE=false;Logger.DEVELOPER=false;Logger.HASHED=false;Logger.MESSAGE_DEPRECATED="This function is deprecated and will be removed in the next version of sdk.";return Logger}();system.Logger=Logger;function parseArgumentsArray(value){var len=value.length;for(var i=0;i<len;++i){var v=value[i];if(v==void 0){value[i]=String(v);continue}if(typeof v==="object")try{value[i]=JSON.stringify(v)}catch(e){}}return value}})(system=__.system||(__.system={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||
window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var system;(function(system){var Polyfill=function(){function Polyfill(){}Polyfill.__ArrayFilter=function(){if(!Array.prototype.filter)Array.prototype.filter=function(func,thisArg){if(!(typeof func==="function"&&this))throw new TypeError;var len=this.length>>>0,res=new Array(len),t=this,c=0,i=-1;if(thisArg===undefined)while(++i!==len){if(i in this)if(func(t[i],i,t))res[c++]=t[i]}else while(++i!==len)if(i in this)if(func.call(thisArg,t[i],i,t))res[c++]=t[i];
res.length=c;return res}};Polyfill.__ArrayMap=function(){if(!Array.prototype.map)Array.prototype.map=function(callback){var T,A,k;if(this==null)throw new TypeError("this is null or not defined");var O=Object(this);var len=O.length>>>0;if(typeof callback!=="function")throw new TypeError(callback+" is not a function");if(arguments.length>1)T=arguments[1];A=new Array(len);k=0;while(k<len){var kValue=void 0,mappedValue=void 0;if(k in O){kValue=O[k];mappedValue=callback.call(T,kValue,k,O);A[k]=mappedValue}k++}return A}};
Polyfill.injected=function(){Polyfill.__ArrayFilter();Polyfill.__ArrayMap();return true}();return Polyfill}();system.Polyfill=Polyfill})(system=__.system||(__.system={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var system;(function(system){var URLRequest=function(){function URLRequest(url){this.url=url}return URLRequest}();system.URLRequest=URLRequest;var URLRequestHeader=function(){function URLRequestHeader(name,value){this.name=name;this.value=value}return URLRequestHeader}();system.URLRequestHeader=URLRequestHeader})(system=__.system||(__.system={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]=
{}));
(function(IceStone){var __;(function(__){var system;(function(system){var URLRequestMethod=function(){function URLRequestMethod(){}URLRequestMethod.POST="POST";URLRequestMethod.GET="GET";URLRequestMethod.PUT="PUT";URLRequestMethod.DELETE="DELETE";URLRequestMethod.HEAD="HEAD";URLRequestMethod.OPTIONS="OPTIONS";return URLRequestMethod}();system.URLRequestMethod=URLRequestMethod})(system=__.system||(__.system={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]=
{}));
(function(IceStone){var __;(function(__){var system;(function(system){var Utils=function(){function Utils(){}Utils.__xor=function(binaryData,key){var keyIndex=0;var len=binaryData.byteLength;for(var i=0;i<len;i++){binaryData[i]=binaryData[i]^key.charCodeAt(keyIndex);keyIndex++;if(keyIndex>=key.length)keyIndex=0}};Utils.utf8ArrayToStr=function(array){var charCache=new Array(128);var charFromCodePt=String.fromCodePoint||String.fromCharCode;var result=[];var codePt,byte1;var buffLen=array.length;result.length=
0;for(var i=0;i<buffLen;){byte1=array[i++];if(byte1<=127)codePt=byte1;else if(byte1<=223)codePt=(byte1&31)<<6|array[i++]&63;else if(byte1<=239)codePt=(byte1&15)<<12|(array[i++]&63)<<6|array[i++]&63;else if(String.fromCodePoint)codePt=(byte1&7)<<18|(array[i++]&63)<<12|(array[i++]&63)<<6|array[i++]&63;else{codePt=63;i+=3}result.push(charCache[codePt]||(charCache[codePt]=charFromCodePt(codePt)))}return result.join("")};Utils.toUTF8Array=function(str){var utf8=[];for(var i=0;i<str.length;i++){var charcode=
str.charCodeAt(i);if(charcode<128)utf8.push(charcode);else if(charcode<2048)utf8.push(192|charcode>>6,128|charcode&63);else if(charcode<55296||charcode>=57344)utf8.push(224|charcode>>12,128|charcode>>6&63,128|charcode&63);else{i++;charcode=65536+((charcode&1023)<<10|str.charCodeAt(i)&1023);utf8.push(240|charcode>>18,128|charcode>>12&63,128|charcode>>6&63,128|charcode&63)}}return new Uint8Array(utf8)};Utils.decode=function(array){var tmpArray=new Uint8Array(array);Utils.__xor(tmpArray,tmpArray.length.toString());
if(tmpArray.reverse)tmpArray=tmpArray.reverse();else{var tmpNormalArray=Array.prototype.slice.call(tmpArray);tmpNormalArray=tmpNormalArray.reverse();tmpArray=new Uint8Array(tmpNormalArray)}var tmpStr=Utils.utf8ArrayToStr(tmpArray);return tmpStr};Utils.uidGenerator=function(a){return a?(a^Math.random()*16>>a/4).toString(16):(""+1E7+1E3+4E3+8E3+1E11).replace(/[018]/g,Utils.uidGenerator)};Utils.disposeElementScript=function(script){if(script){script.onload=null;script.onerror=null;if(script.parentElement)script.parentElement.removeChild(script)}};
Utils.disposeURLLoader=function(loader){if(loader)loader.dispose()};return Utils}();system.Utils=Utils})(system=__.system||(__.system={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var system;(function(system){var SDKUpdater=function(){function SDKUpdater(){}SDKUpdater.initializeAsync=function(sdkVersion){return(new Promise(function(resolve,reject){SDKUpdater.initializeStarted=true;reject();return})).catch(function(e){throw e;})};SDKUpdater.icestoneLast=null;SDKUpdater.initializeStarted=false;return SDKUpdater}();system.SDKUpdater=SDKUpdater})(system=__.system||(__.system={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||
window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var events;(function(events){var Logger=IceStone.__.system.Logger;var SDKUpdater=IceStone.__.system.SDKUpdater;var Events=function(){function Events(){}Events.PAUSE="pause";Events.RESUME="resume";Events.MUTE="mute";Events.UNMUTE="unmute";Events.QUIT="quit";Events.SIGNED_IN="signed.in";Events.SIGNED_OUT="signed.out";Events.STORE_READY="store.ready";return Events}();events.Events=Events;Events["PAUSE"]=Events.PAUSE;Events["RESUME"]=Events.RESUME;Events["MUTE"]=
Events.MUTE;Events["UNMUTE"]=Events.UNMUTE;Events["QUIT"]=Events.QUIT;Events["SIGNED_IN"]=Events.SIGNED_IN;Events["SIGNED_OUT"]=Events.SIGNED_OUT;Events["STORE_READY"]=Events.STORE_READY;var EventsInternal=function(){function EventsInternal(){}EventsInternal.PROGRESS="progress";EventsInternal.LOADING_STARTED="loading.started";EventsInternal.COMPLETE="complete";EventsInternal.ERROR="error";EventsInternal.ERROR_404="error.404";EventsInternal.ERROR_SECURITY="error.security";EventsInternal.SDK_INITED=
"sdk.inited";EventsInternal.SDK_GAME_STARTED="sdk.game.started";EventsInternal.SDK_GAME_BLOCKED="sdk.game.blocked";EventsInternal.GAME_STATE_CHANGED="game.state.changed";EventsInternal.UPDATE_LEADERBOARD="panel.update.leaderboard";EventsInternal.UPDATE_FRIENDS="panel.update.friends";EventsInternal.CLOSE_LEADERBOARDS="panel.close";EventsInternal.INVITE_MORE_FRIENDS="panel.invite.friends";EventsInternal.INVITE_FRIEND="panel.invite.friend";EventsInternal.WINDOW_RESIZE="window.resize";EventsInternal.UPDATE_LOGIN=
"update.login";EventsInternal.OPEN_URL="open.url";EventsInternal.HIDE_PRELOADER="hide.preloader";EventsInternal.SHOW_PRELOADER="show.preloader";EventsInternal.UPDATE_THEME="ui.update.theme";EventsInternal.UPDATE_LOADER="ui.update.loader";EventsInternal.ANIMATE_ENDED="ui.animate.ended";return EventsInternal}();events.EventsInternal=EventsInternal;var EventDispatcher=function(){function EventDispatcher(){this._handlers=[]}EventDispatcher.prototype.on=function(event,func){var scope=this._handlers[event]=
this._handlers[event]||[];scope.push(func)};EventDispatcher.prototype.removeAll=function(){this._handlers=[]};EventDispatcher.prototype.reatachEvents=function(){if(SDKUpdater.icestoneLast){var _loop_1=function(event_1){if(!this_1._handlers.hasOwnProperty(event_1))return"continue";if(event_1!=Events.MUTE&&event_1!=Events.PAUSE&&event_1!=Events.QUIT&&event_1!=Events.RESUME&&event_1!=Events.SIGNED_IN&&event_1!=Events.SIGNED_OUT&&event_1!=Events.STORE_READY&&event_1!=Events.UNMUTE)return"continue";var scope=
this_1._handlers[event_1];if(!scope)return"continue";scope.forEach(function(func){SDKUpdater.icestoneLast["on"](event_1,func)})};var this_1=this;for(var event_1 in this._handlers)_loop_1(event_1)}};EventDispatcher.prototype.dispatch=function(event){var params=[];for(var _i=1;_i<arguments.length;_i++)params[_i-1]=arguments[_i];var scope=this._handlers[event];if(!scope)return;scope.forEach(function(h){try{h.apply(null,params)}catch(e){Logger.error(e)}})};return EventDispatcher}();events.EventDispatcher=
EventDispatcher;var EventManager=function(){function EventManager(){}EventManager.reatachEvents=function(){EventManager._dispatcher.reatachEvents()};EventManager.on=function(event,func){if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["on"](event,func);return}EventManager._dispatcher.on(event,func)};EventManager.dispatch=function(event){var params=[];for(var _i=1;_i<arguments.length;_i++)params[_i-1]=arguments[_i];EventManager._dispatcher.dispatch(event,params)};EventManager._dispatcher=new EventDispatcher;
return EventManager}();events.EventManager=EventManager})(events=__.events||(__.events={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var ui;(function(ui){var EventManager=IceStone.__.events.EventManager;var EventsInternal=IceStone.__.events.EventsInternal;var Logger=IceStone.__.system.Logger;var AnimationEasing=function(){function AnimationEasing(){}AnimationEasing.LINIAR=0;AnimationEasing.EASE_OUT_QUAD=1;AnimationEasing.EASE_IN_QUAD=2;AnimationEasing.EASE_IN_OUT_QUAD=3;return AnimationEasing}();ui.AnimationEasing=AnimationEasing;var AnimateLoader=function(){function AnimateLoader(){this._rect=
null;this._handler=null;this._needToAnimate=false;this._interval=0;this._step=10;this._duration=1E3;this._currentTime=0;this._currentEasing=AnimationEasing.EASE_IN_OUT_QUAD;this._animationStarted=false}AnimateLoader.prototype.getEasingName=function(){switch(this._currentEasing){case AnimationEasing.LINIAR:return"liniar";case AnimationEasing.EASE_OUT_QUAD:return"easeOut";case AnimationEasing.EASE_IN_QUAD:return"easeIn";case AnimationEasing.EASE_IN_OUT_QUAD:return"easeInOut";default:return"liniar"}};
AnimateLoader.instance=function(){if(!AnimateLoader._instance)AnimateLoader._instance=new AnimateLoader;return AnimateLoader._instance};AnimateLoader.getRect=function(){return AnimateLoader.instance()._rect};AnimateLoader.getHandler=function(){return AnimateLoader.instance()._handler};AnimateLoader.prototype.isNeedAnimation=function(){return this._needToAnimate};AnimateLoader.prototype.animateTo=function(rect,handler){this._rect=rect.clone();this._rect.x/=this.__getPixelAspectRatio();this._rect.y/=
this.__getPixelAspectRatio();this._rect.width/=this.__getPixelAspectRatio();this._rect.height/=this.__getPixelAspectRatio();this._handler=handler;this._needToAnimate=true};AnimateLoader.prototype.setCurrentEasing=function(value){if(this._animationStarted)return;this._currentEasing=value};AnimateLoader.prototype.updateAnimationRect=function(rect){this._rect=rect.clone();this._rect.x/=this.__getPixelAspectRatio();this._rect.y/=this.__getPixelAspectRatio();this._rect.width/=this.__getPixelAspectRatio();
this._rect.height/=this.__getPixelAspectRatio();var currentChange=this.getCurrentChange();if(this._animationStarted)EventManager.dispatch(EventsInternal.UPDATE_LOADER,currentChange,this._rect)};AnimateLoader.prototype.startAnimation=function(){this._animationStarted=true;this._currentTime=0;this._interval=setInterval(this.updateAnimation.bind(this),this._step);Logger.verbose("Animation started duration : ",this._duration," easing : ",this.getEasingName())};AnimateLoader.prototype.updateAnimation=
function(){this._currentTime+=this._step;var currentChange=this.getCurrentChange();EventManager.dispatch(EventsInternal.UPDATE_LOADER,currentChange,this._rect);if(this._handler&&typeof this._handler=="function")this._handler(currentChange);if(this._currentTime>=this._duration){this._animationStarted=false;this._currentTime=this._duration;clearInterval(this._interval);EventManager.dispatch(EventsInternal.UPDATE_LOADER,currentChange,this._rect);if(this._handler&&typeof this._handler=="function")this._handler(currentChange,
true);EventManager.dispatch(EventsInternal.ANIMATE_ENDED)}};AnimateLoader.prototype.getCurrentChange=function(){var currentChange=0;switch(this._currentEasing){case AnimationEasing.LINIAR:currentChange=this._currentTime/this._duration;break;case AnimationEasing.EASE_OUT_QUAD:currentChange=this.easeOut(this._currentTime,0,1,this._duration);break;case AnimationEasing.EASE_IN_QUAD:currentChange=this.easeIn(this._currentTime,0,1,this._duration);break;case AnimationEasing.EASE_IN_OUT_QUAD:currentChange=
this.easeInOut(this._currentTime,0,1,this._duration);break;default:currentChange=this._currentTime/this._duration;break}return currentChange};AnimateLoader.prototype.easeOut=function(t,b,c,d){t/=d;return-c*t*(t-2)+b};AnimateLoader.prototype.easeIn=function(t,b,c,d){t/=d;return c*t*t+b};AnimateLoader.prototype.easeInOut=function(t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*(--t*(t-2)-1)+b};AnimateLoader.prototype.__getPixelAspectRatio=function(){return+window.devicePixelRatio||Math.sqrt(window.screen.deviceXDPI*
window.screen.deviceYDPI)/96||1};return AnimateLoader}();ui.AnimateLoader=AnimateLoader})(ui=__.ui||(__.ui={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var ui;(function(ui){var SDKUpdater=IceStone.__.system.SDKUpdater;var EventsInternal=IceStone.__.events.EventsInternal;var EventManager=IceStone.__.events.EventManager;var AnimateLoader=IceStone.__.ui.AnimateLoader;var UIElements=function(){function UIElements(){}UIElements.MORE_GAMES="moregames";UIElements.LOGO="logo";UIElements.LEADERBOARDS="leaderboards";return UIElements}();ui.UIElements=UIElements;var Themes=function(){function Themes(){}Themes.DARK="dark";
Themes.LIGHT="light";return Themes}();ui.Themes=Themes;var Style=function(){function Style(aCurrentTheme,aADBgAlpha,aADLoaderColor,aPreloaderBgColor,aPreloaderLoaderColor){if(aCurrentTheme===void 0)aCurrentTheme=Themes.DARK;if(aADBgAlpha===void 0)aADBgAlpha=.5;if(aADLoaderColor===void 0)aADLoaderColor="default";if(aPreloaderBgColor===void 0)aPreloaderBgColor="#FFFFFF";if(aPreloaderLoaderColor===void 0)aPreloaderLoaderColor="#15AEDA";this.currentTheme=aCurrentTheme;this.adBgAlpha=aADBgAlpha;this.adLoaderColor=
aADLoaderColor;if(this.adLoaderColor=="default"||this.adLoaderColor==""||this.adLoaderColor==null)if(this.currentTheme==Themes.DARK)this.adLoaderColor="#ffffff";else if(this.currentTheme==Themes.LIGHT)this.adLoaderColor="#000000";this.preloaderBgColor=aPreloaderBgColor;this.preloaderLoaderColor=aPreloaderLoaderColor}Style.prototype.setAdLoaderColor=function(color){if(this.adLoaderColor=="default"||this.adLoaderColor==""||this.adLoaderColor==null)if(this.currentTheme==Themes.DARK)this.adLoaderColor=
"#ffffff";else if(this.currentTheme==Themes.LIGHT)this.adLoaderColor="#000000"};return Style}();ui.Style=Style;var UI=function(){function UI(){}UI.openElement=function(elemtnID){if(elemtnID===void 0)elemtnID=UIElements.MORE_GAMES;if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["ui"]["openElement"](elemtnID);return}switch(elemtnID){case UIElements.LOGO:break;case UIElements.LEADERBOARDS:if(__.staticProvider!=null)__.staticProvider.showLeaderboardsAsync();break;default:break}};UI.isElementAvailable=
function(elemtnID){if(elemtnID===void 0)elemtnID=UIElements.MORE_GAMES;if(SDKUpdater.icestoneLast)return SDKUpdater.icestoneLast["ui"]["isElementAvailable"](elemtnID);switch(elemtnID){case UIElements.LEADERBOARDS:if(__.staticProvider!=null)return __.staticProvider.wouldShowLeaderboards();break}return false};UI.isElementInteractive=function(elemtnID){if(elemtnID===void 0)elemtnID=UIElements.MORE_GAMES;if(SDKUpdater.icestoneLast)return SDKUpdater.icestoneLast["ui"]["isElementInteractive"](elemtnID);
return false};UI.setTheme=function(theme,alpha,color){if(theme===void 0)theme=Themes.DARK;if(alpha===void 0)alpha=.5;if(color===void 0)color="default";if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["ui"]["setTheme"](theme,alpha,color);return}UI.currentStyle.currentTheme=theme;UI.currentStyle.adBgAlpha=alpha;UI.currentStyle.setAdLoaderColor(color);EventManager.dispatch(EventsInternal.UPDATE_THEME,theme,alpha,color)};UI.getStyle=function(){if(SDKUpdater.icestoneLast)return SDKUpdater.icestoneLast["ui"]["getStyle"]();
return UI.currentStyle};UI.animateTo=function(rect,handler){if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["ui"]["animateTo"](rect,handler);return}AnimateLoader.instance().animateTo(rect,handler)};UI.updateAnimationRect=function(rect){if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["ui"]["updateAnimationRect"](rect);return}AnimateLoader.instance().updateAnimationRect(rect)};UI.currentStyle=new Style;return UI}();ui.UI=UI;UI["openElement"]=UI.openElement;UI["isElementAvailable"]=UI.isElementAvailable;
UI["isElementInteractive"]=UI.isElementInteractive;UI["setTheme"]=UI.setTheme;UI["getStyle"]=UI.getStyle;UI["animateTo"]=UI.animateTo;UI["updateAnimationRect"]=UI.updateAnimationRect;UIElements["MORE_GAMES"]=UIElements.MORE_GAMES;UIElements["LOGO"]=UIElements.LOGO;UIElements["LEADERBOARDS"]=UIElements.LEADERBOARDS;Themes["DARK"]=Themes.DARK;Themes["LIGHT"]=Themes.LIGHT})(ui=__.ui||(__.ui={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]=
{}));
(function(IceStone){var __;(function(__){var display;(function(display){var EventManager=IceStone.__.events.EventManager;var EventsInternal=IceStone.__.events.EventsInternal;var Logger=IceStone.__.system.Logger;var Stage=function(){function Stage(){}Stage.pixelAspectRatio=function(){if(window.devicePixelRatio>0)return window.devicePixelRatio;return 1};Stage.rootResolution=function(){if(!Stage._root)return{width:-1,height:-1};var width=Stage._root.clientWidth;var height=Stage._root.clientHeight;width*=
Stage.pixelAspectRatio();height*=Stage.pixelAspectRatio();return{width:width,height:height}};Stage.screenResolution=function(){var sw=window.screen.width,sh=window.screen.height;var ow=window.outerWidth,oh=window.outerHeight;var sp=sw/sh,ip=ow/oh;var isValid=sp>1&&ip>1||sp<1&&ip<1;if(!isValid){var s=sw;sw=sh;sh=s}if(ow>sw)sw=ow;if(oh>sh)sh=oh;if(/Mobile|mini|Fennec|Samsung|Android|iP(ad|od|hone)/.test(navigator.appVersion)){sw*=Stage.pixelAspectRatio();sh*=Stage.pixelAspectRatio()}return{width:sw,
height:sh}};Stage.getRoot=function(){return Stage._root};Stage.removeFromRoot=function(){if(Stage._root!=void 0&&Stage._root.contains(Stage._body))Stage._root.removeChild(Stage._body)};Stage.setRoot=function(root){if(root==void 0||Stage._root==root)return;Logger.verbose("setRoot ("+root+")");if(Stage._root!=void 0&&Stage._root.contains(Stage._body))Stage._root.removeChild(Stage._body);(Stage._root=root).appendChild(Stage._body);window.onresize=function(){return EventManager.dispatch(EventsInternal.WINDOW_RESIZE)}};
Stage.setDefaultRoot=function(){if(Stage._root!=void 0)return;Logger.verbose("setDefaultRoot ("+document.body+")");Stage.setRoot(document.body)};Stage.addChild=function(child){return Stage.addChildAt(child,Stage.numChildren())};Stage.addChildAt=function(child,index){if(index===void 0)index=-1;if((child=Stage.__element(child))==void 0||Stage.getChildIndex(child)===index)return child;if(Stage.contains(child))Stage.removeChild(child);index=Math.min(Math.max(index,0),Stage.numChildren());var exists=Stage.getChildAt(index);
if(exists!=void 0&&exists!=child)Stage.__reindex(index,1);Stage._body.appendChild(child);child.style.zIndex=index;child.style.position="absolute";return child};Stage.removeChild=function(child){if((child=Stage.__element(child))==void 0||!Stage.contains(child))return child;var index=Stage.getChildIndex(child);if(index!==-1)return Stage.removeChildAt(index);return child};Stage.removeChildAt=function(index){var child=Stage.getChildAt(index);if(!Stage.contains(child))return child;Stage._body.removeChild(child);
Stage.__reindex(index+1,-1);return child};Stage.setChildIndex=function(child,index){Stage.removeChild(child);Stage.addChildAt(child,index)};Stage.swapChildrenAt=function(index1,index2){if(index1==void 0||index2==void 0||index1===-1||index2===-1)return;index1=Math.min(Math.max(index1,0),Stage.numChildren());index2=Math.min(Math.max(index2,0),Stage.numChildren());var child1=Stage.getChildAt(index1);var child2=Stage.getChildAt(index2);if(child1==void 0||child2==void 0||child1===child2)return;child1.style.zIndex=
index2.toString();child2.style.zIndex=index1.toString()};Stage.swapChildren=function(child1,child2){Stage.swapChildrenAt(Stage.getChildIndex(child1),Stage.getChildIndex(child2))};Stage.getChildIndex=function(child){if(Stage.__element(child)==void 0||!Stage.contains(child))return-1;return parseInt(child.style.zIndex,10)};Stage.contains=function(child){child=Stage.__element(child);if(child==void 0)return false;return Stage._body.contains(child)};Stage.getChildAt=function(index){if(index==void 0)return null;
var child;var children=Stage._body.children;var len=children.length;for(var i=0;i<len;++i){child=Stage.__element(children[i]);if(!child)continue;if(Stage.getChildIndex(child)===index)return child}return null};Stage.getChildById=function(id){if(id==void 0)return null;var child=document.getElementById(id);return Stage.contains(child)?child:null};Stage.numChildren=function(){return Stage._body.childElementCount};Stage.__reindex=function(fromIndex,shift){var found=[];var child;var children=Stage._body.children;
var len=children.length;for(var i=0;i<len;++i){child=Stage.__element(children[i]);if(!child)continue;if(Stage.getChildIndex(child)<fromIndex)continue;found.push(child)}found.sort(function(a,b){var index1=Stage.getChildIndex(a);var index2=Stage.getChildIndex(b);if(index1>index2)return 1;else if(index1<index2)return-1;else return 0}).forEach(function(child){return child.style.zIndex=(Stage.getChildIndex(child)+shift).toString()})};Stage.__element=function(child){if(child==void 0)return null;switch(typeof child){case "string":return document.getElementById(child);
case "object":if("nodeType"in child)return child;break}return null};Stage._body=function(){var div=document.createElement("div");div.style.width="100%";div.style.height="100%";div.style.zIndex="1024";div.style.margin="0px";div.style.left=div.style.top="0px";div.style.position="absolute";div.style.pointerEvents="none";div.id="sdk_root_div";return div}();return Stage}();display.Stage=Stage})(display=__.display||(__.display={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||
window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var system;(function(system){var EventDispatcher=IceStone.__.events.EventDispatcher;var EventsInternal=IceStone.__.events.EventsInternal;var URLLoader=function(_super){__extends(URLLoader,_super);function URLLoader(){return _super!==null&&_super.apply(this,arguments)||this}URLLoader.prototype.load=function(request){this._request=request;var headers=request.headers||[];var hasContentType=headers.some(function(h){return!!h.name&&h.name=="content-type"});if(request.contentType&&
!hasContentType)headers.push(new system.URLRequestHeader("Content-Type",request.contentType));var url=request.url;var data;if(request.data)if(typeof request.data==="string")data=request.data;else if(request.data instanceof ArrayBuffer)data=new DataView(request.data);else if(request.data instanceof Uint8Array)data=new DataView(request.data.buffer);else try{data=JSON.stringify(request.data)}catch(e){}try{this._create();this._open(request.method||system.URLRequestMethod.GET,url,request.sync);for(var i=
0;i<headers.length;++i){var h=headers[i];this._header(h.name,h.value)}this._load(data)}catch(e){this.dispatch(EventsInternal.ERROR,e.message)}};URLLoader.prototype.dispose=function(){this.removeAll();this.data=null;this._request=null;this._xhr=null};URLLoader.prototype.close=function(){try{this._xhr.onreadystatechange=undefined;this._xhr.onprogress=undefined;this._xhr.abort()}catch(e){}};URLLoader.prototype._create=function(){this._xhr=new XMLHttpRequest};URLLoader.prototype._open=function(method,
url,sync){this._xhr.open(method,url,!sync)};URLLoader.prototype._header=function(name,value){this._xhr.setRequestHeader(name,value)};URLLoader.prototype._load=function(data){var responseType="arraybuffer";var contentType=this._request.contentType;if(contentType&&contentType.indexOf("text")===0)responseType="text";this._xhr.responseType=responseType;this._xhr.onreadystatechange=this._xhrOnReadyStateChange.bind(this);this._xhr.onprogress=this._xhrProgress.bind(this);this._xhr.send(data)};URLLoader.prototype._xhrProgress=
function(e){this.dispatch(EventsInternal.PROGRESS,e.loaded,e.total)};URLLoader.prototype._xhrOnReadyStateChange=function(e){var state=this._xhr.readyState;var status=this._xhr.status;if(state===4)if(this._xhr.responseType==="arraybuffer")this.data=this._xhr.response;else this.data=this._xhr.responseText;var complete=state===4&&status===200;if(complete){this.dispatch(EventsInternal.PROGRESS,this.data.byteLength,this.data.byteLength);this.dispatch(EventsInternal.COMPLETE);return}var error_404=state===
4&&(status===403||status===404);if(error_404)this.dispatch(EventsInternal.ERROR_404);var error=state===4&&(status===400||status===403||status===404);if(error){this.dispatch(EventsInternal.ERROR);return}var securityError=state===4&&status===0;if(securityError){this.dispatch(EventsInternal.ERROR_SECURITY);return}};return URLLoader}(EventDispatcher);system.URLLoader=URLLoader})(system=__.system||(__.system={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||
(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var system;(function(system){var EventManager=IceStone.__.events.EventManager;var EventsInternal=IceStone.__.events.EventsInternal;var Utils=IceStone.__.system.Utils;var URLLoader=IceStone.__.system.URLLoader;var URLRequest=IceStone.__.system.URLRequest;var URLRequestMethod=IceStone.__.system.URLRequestMethod;var AUTO_FLUSH_INTERVAL=3*1E3;var POINTER="IceStone.__.system.Storage._data";var INSTALL_VALUES=defaultInstallValues();var SESSION_VALUES=defaultSessionValues();
function defaultInstallValues(){return{PLAY_TIME:0}}function defaultSessionValues(){return{}}var Storage=function(){function Storage(){}Storage.IP=function(){return null};Storage.COUNTRY=function(){return null};Storage.NETWORK_PROVIDER=function(){return null};Storage.DOMAIN=function(){return getDomain(window.location.href)};Storage.HOST_NAME=function(){return getHostName(window.location.href)};Storage.REFERRER_HOST_NAME=function(){return document.referrer?getHostName(document.referrer):getHostName(window.location.href)};
Storage.OS=function(){return Capabilities.os};Storage.BROWSER=function(){return Capabilities.browser};Storage.DEVICE_PLATFORM=function(){return Capabilities.platform};Storage.LANGUAGE=function(){return Capabilities.language};Storage.FONT=function(){return Capabilities.font};Storage.APP_ID=function(){return Storage._appId};Storage.getAPP_BUNDLE=function(){return Storage._appBundle};Storage.setAPP_BUNDLE=function(appBundle){Storage._appBundle=appBundle};Storage.DEFAULT_USER_ID=function(){return"default"};
Storage.getAD_CONFIG_TYPE=function(){return Storage._adConfigType};Storage.setAD_CONFIG_TYPE=function(value){Storage._adConfigType=value};Storage.getAD_CONFIG=function(){return Storage.__get("cache.ad.config")||system.Assets.text("ad/config/".concat(__.staticProvider.name,".json"))||system.Assets.text("ad/config/default.json")};Storage.setAD_CONFIG=function(value){Storage.__set("cache.ad.config",value)};Storage.getUSER_ID=function(){return Storage._userId};Storage.setUSER_ID=function(value){if(Storage._userId!=
void 0){system.Logger.error("Storage.USER_ID is already set.");return}system.Logger.verbose('Storage.USER_ID = "'.concat(value,'"'));Storage._userId=value};Storage.UID=function(){var tmp_uid=Storage.__get("user.uid","");if(tmp_uid==""){tmp_uid=Utils.uidGenerator(null);tmp_uid+=(new Date).getTime();Storage.__set("user.uid",tmp_uid)}return tmp_uid};Storage.getGAME_BLOCK=function(){return Storage._appBLocked};Storage.setGAME_BLOCK=function(value){Storage._appBLocked=value};Storage.getAPP_BLOCK_URL=function(){return Storage._appBlockURL};
Storage.setAPP_BLOCK_URL=function(value){Storage._appBlockURL=value};Storage.getAPP_BLOCK_FORM=function(){return Storage._appBlcokReForm};Storage.setAPP_BLOCK_FORM=function(value){Storage._appBlcokReForm=value};Storage.getCURRENT_STATE=function(){return Storage._currnetState};Storage.setCURRENT_STATE=function(value){Storage._currnetState=value};Storage.getUSER_NAME=function(){return Storage.__get("user.name","Guest")};Storage.setUSER_NAME=function(value){Storage.__set("user.name",value)};Storage.getUSER_PHOTO=
function(){return Storage.__get("user.photo")};Storage.setUSER_PHOTO=function(value){Storage.__set("user.photo",value)};Storage.getUSER_DATA=function(){return Storage.__get("user.data","")};Storage.setUSER_DATA=function(value){Storage.__set("user.data",value)};Storage.INSTALL_DATE=function(){return Storage.__getI("stats.install.date")};Storage.INSTALL_PLAY_TIME=function(){return INSTALL_VALUES.PLAY_TIME+Storage.SESSION_PLAY_TIME()};Storage.getINSTALL_LEVEL=function(){return Storage.__getI("stats.install.level",
-1)};Storage.setINSTALL_LEVEL=function(value){Storage.__set("stats.install.level",value)};Storage.getINSTALL_LEVEL_AUTO_INCREMENT=function(){return Storage.__getB("stats.install.level_auto_increment",false)};Storage.setINSTALL_LEVEL_AUTO_INCREMENT=function(value){Storage.__set("stats.install.level_auto_increment",value)};Storage.getINSTALL_SCORE=function(){return Storage.__getI("stats.install.score",-1)};Storage.setINSTALL_SCORE=function(value){Storage.__set("stats.install.score",value)};Storage.NUM_LAUNCHES=
function(){return Storage.__getI("stats.numLaunches")};Storage.SESSION_DATE=function(){return Storage.__getI("stats.session.date")};Storage.SESSION_LOAD_DATE=function(){return Storage.__getI("stats.session.loadDate")};Storage.SESSION_PLAY_TIME=function(){var loadDate=Storage.SESSION_LOAD_DATE();return loadDate>0?Date.now()-loadDate:0};Storage.getCustomParamI=function(name,def){return Storage.__getI(name,def)};Storage.setCustomParamI=function(name,value){Storage.__set(name,value)};Storage.initializeAsync=
function(appId){return new Promise(function(resolve,reject){system.Logger.verbose('Storage.initializeAsync ("'.concat(appId,'")'));Storage._appId=appId;Storage._dataBase=new IDBStorage(appId);Storage._dataBase.connectAsync().then(function(){Storage.__listenEvents();resolve()}).catch(reject)})};Storage.authorizeAsync=function(){return new Promise(function(resolve,reject){if(!Storage._appId){reject("APP_ID not configured");return}if(!Storage._userId){reject("USER_ID not configured");return}__.staticProvider.getUserDataAsync().then(function(data){if(document.location.search.indexOf("user_id")!=
-1&&!(typeof window.cordova==="object")&&(__.staticProvider.name==__.staticProviders.WELLGAMES||__.staticProvider.name==__.staticProviders.ABSOLUTIST||__.staticProvider.name==__.staticProviders.ICESTONE)){var url_1="";system.Logger.verbose("load in DB ",url_1);var loader_1=new URLLoader;loader_1.on(EventsInternal.COMPLETE,function(){system.Logger.verbose("load in DB  COMPLETE",url_1);try{var dataAr=new Uint8Array(loader_1.data);var dataStr=Utils.utf8ArrayToStr(dataAr);var dataDB=JSON.parse(dataStr);
if(dataDB["result"]=="ok"&&dataDB.hasOwnProperty("user_data"))Storage._data=dataDB["user_data"];else Storage.__loadData(data)}catch(e){Storage.__loadData(data)}Storage.__readStartValues();Utils.disposeURLLoader(loader_1);resolve()});loader_1.on(EventsInternal.ERROR,function(){system.Logger.verbose("load in DB ERROR",url_1);Storage.__loadData(data);Storage.__readStartValues();resolve()});loader_1.on(EventsInternal.ERROR_SECURITY,function(){system.Logger.verbose("load in DB ERROR_SECURITY",url_1);Storage.__loadData(data);
Storage.__readStartValues();resolve()});var request=new URLRequest(url_1);var uid=Storage.getQueryParams(document.location.search)["user_id"];request.data="user_id="+uid;request.method=URLRequestMethod.POST;request.contentType="application/x-www-form-urlencoded";loader_1.load(request);return}Storage.__loadData(data);Storage.__readStartValues();resolve()}).catch(reject)})};Storage.getQueryParams=function(qs){var paramsReturn={};if(qs.length<=1)return paramsReturn;else qs=qs.slice(1);var param=null;
var equalsIndex=0;var name=null;var value=null;var params=qs.split("&");for(var i=0;i<params.length;i++){param=params[i];equalsIndex=param.indexOf("=");if(equalsIndex==-1);else{name=decodeURI(param.substr(0,equalsIndex));value=decodeURI(param.substr(equalsIndex+1));paramsReturn[name]=value}}return paramsReturn};Storage.__loadData=function(providerData){try{var data=typeof providerData==="string"&&providerData.length>0?providerData:Storage._dataBase.getItem(Storage._userId);if(typeof data==="string"&&
data.length>0)Storage._data=JSON.parse(data)}catch(e){system.Logger.error(e)}Storage._data=Storage._data||{}};Storage.__readStartValues=function(){if(Storage.__getI("stats.install.date")===0)Storage.__set("stats.install.date",Date.now());if(Storage.__getI("stats.install.playTime")===0)Storage.__set("stats.install.playTime",0);Storage.__set("stats.session.date",Date.now());var numLaunches=Storage.__getI("stats.numLaunches");if(numLaunches>0)numLaunches++;else numLaunches=1;Storage.__set("stats.numLaunches",
numLaunches);INSTALL_VALUES.PLAY_TIME=Storage.__getI("stats.install.playTime",0)};Storage.__listenEvents=function(){window.onblur=function(){Storage.__softFlush()};window.onbeforeunload=function(){Storage.__flush();return undefined};EventManager.on(EventsInternal.SDK_INITED,function(){Storage.__set("stats.session.loadDate",Date.now());Storage.__flush()});EventManager.on(EventsInternal.SDK_GAME_STARTED,function(){})};Storage.__set=function(key,value,doSoftFlush){if(doSoftFlush===void 0)doSoftFlush=
true;if(!Storage.__resolve(key,true))return;Storage.__setValueForKey(key,value);if(doSoftFlush)Storage.__softFlush()};Storage.__get=function(key,def){if(!Storage.__resolve(key))return def;return Storage.__getValueFromKey(key)||def};Storage.__getI=function(key,def){var bigInt=parseInt(Storage.__get(key),10);return isNaN(bigInt)?def||0:bigInt};Storage.__getN=function(key,def){return+(Storage.__get(key)||def)};Storage.__getB=function(key,def){return Boolean(Storage.__get(key)||def)};Storage.__resolve=
function(key,create){if(create===void 0)create=false;if(key==void 0||typeof key!=="string")return false;try{var temp=key.split(".");var pointer="";while(temp.length>0){if(pointer!="")pointer+=".";pointer+="".concat(temp.shift());var absolute=Storage.__getValueFromKey(pointer);if(absolute==void 0)absolute=absolute[temp.shift()]}return true}catch(e){if(create){var temp=key.split(".");var pointer="";while(temp.length>1){if(pointer!="")pointer+=".";pointer+="".concat(temp.shift());var absolute=Storage.__getValueFromKey(pointer);
if(absolute==void 0)Storage.__setValueForKey(pointer,{})}return true}}return false};Storage.__getValueFromKey=function(key){var temp=key.split(".");var pointer="";var absolute=Storage._data;if(absolute==void 0)return absolute;while(temp.length>0){pointer="".concat(temp.shift());absolute=absolute[pointer]}return absolute};Storage.__setValueForKey=function(key,value){var temp=key.split(".");var pointer="";var absolute=Storage._data;while(temp.length>1){pointer="".concat(temp.shift());absolute=absolute[pointer]}absolute[temp.shift()]=
value};Storage.__softFlush=function(){if(!Storage._appId||!Storage._userId)return;if(Storage._softFlushTimeout>0){Storage._softFlushNext=true;return}Storage._softFlushNext=false;Storage._softFlushTimeout=setTimeout(function(){Storage._softFlushTimeout=0;if(Storage._softFlushNext)Storage.__softFlush()},AUTO_FLUSH_INTERVAL);Storage.__flush()};Storage.__flush=function(){if(!Storage._appId||!Storage._userId)return;Storage.__set("stats.install.playTime",Storage.INSTALL_PLAY_TIME(),false);try{var dataStr=
JSON.stringify(Storage._data);Storage._dataBase.setItem(Storage._userId,dataStr);__.staticProvider.setUserDataAsync(dataStr)}catch(e){system.Logger.error(e)}};Storage.getUserDataString=function(){try{var dataStr=JSON.stringify(Storage._data);return dataStr}catch(e){system.Logger.error(e);return"{}"}};Storage._appBundle="";Storage._data={};Storage._softFlushNext=false;Storage._softFlushTimeout=0;Storage._adConfigType="";Storage._currnetState="logo";Storage._appBLocked=false;Storage._appBlockURL="";
Storage._appBlcokReForm="";return Storage}();system.Storage=Storage;var IDBStorage=function(){function IDBStorage(appId){this._object={};this._storeName="users";this._baseName="IceStoneSDK";this._indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB;this._updateBug=(navigator.userAgent||"").indexOf("Edge")>=0;this._fallback=typeof this._indexedDB!=="object";this._baseName+="/".concat(__.staticProvider.name,"/").concat(appId)}IDBStorage.prototype.connectAsync=
function(){var _this=this;return new Promise(function(resolve,reject){if(_this._fallback)resolve();_this.__connectDB(function(db){_this.__getStorage(db,function(rows){(rows||[]).forEach(function(o){return _this._object[o.key]=o.value});resolve()})},function(){_this._fallback=true;resolve()})})};IDBStorage.prototype.getItem=function(key){if(key==null)return null;key=key+"";return this._object[key]};IDBStorage.prototype.setItem=function(key,value){var _this=this;if(key==null)throw"indexedDB Storage Error: at least one argument required";
key=key+"";value=value+"";if(this._object[key]===value)return;this._object[key]=value;if(this._fallback)return;this.__connectDB(function(db){if(_this._updateBug){db.transaction([_this._storeName],"readwrite").objectStore(_this._storeName).clear(key).onsuccess=function(){Object.keys(_this._object).forEach(function(key){db.transaction([_this._storeName],"readwrite").objectStore(_this._storeName).put({key:key,value:_this._object[key]})})};return}db.transaction([_this._storeName],"readwrite").objectStore(_this._storeName).put({key:key,
value:value})})};IDBStorage.prototype.removeItem=function(key){var _this=this;if(!key)throw"indexedDB Storage Error: at least one argument required";key=key+"";delete this._object[key];this.__connectDB(function(db){db.transaction([_this._storeName],"readwrite").objectStore(_this._storeName).delete(key)})};IDBStorage.prototype.__connectDB=function(complete,error){var _this=this;try{var skipOne_1;var request_1=indexedDB.open(this._baseName,1);request_1.onsuccess=function(){if(skipOne_1){skipOne_1=false;
return}complete(request_1.result)};request_1.onerror=function(ev){if(error)error()};request_1.onupgradeneeded=function(ev){skipOne_1=true;ev.currentTarget.result.createObjectStore(_this._storeName,{keyPath:"key"});_this.__connectDB(complete,error)}}catch(e){if(error)error()}};IDBStorage.prototype.__getStorage=function(db,handler){var rows=[];var store=db.transaction([this._storeName],"readonly").objectStore(this._storeName);store.openCursor().onsuccess=function(ev){var cursor=ev.target.result;if(cursor){rows.push(cursor.value);
cursor.continue()}else handler(rows)}};return IDBStorage}();function getHostName(url){if(typeof url!=="string")return null;if(url.indexOf("file:")===0)return"localhost";var match=url.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);if(match!=null&&match.length>2&&typeof match[2]==="string"&&match[2].length>0)return match[2];return null}function getDomain(url){if(typeof url!=="string")return null;if(url.indexOf("file:")===0)return"localhost";var hostName=getHostName(url);var domain=hostName;if(hostName!=null){var parts=
hostName.split(".").reverse();if(parts!=null&&parts.length>1){domain=parts[1]+"."+parts[0];if(hostName.toLowerCase().indexOf(".co.uk")!=-1&&parts.length>2)domain=parts[2]+"."+domain}}return domain}var Capabilities=function(){var unknown="-";var nVer=navigator.appVersion;var nAgt=navigator.userAgent;var browser=navigator.appName;var version=""+parseFloat(navigator.appVersion);var majorVersion=parseInt(navigator.appVersion,10);var nameOffset,verOffset,ix;if((verOffset=nAgt.indexOf("Opera"))!=-1){browser=
"Opera";version=nAgt.substring(verOffset+6);if((verOffset=nAgt.indexOf("Version"))!=-1)version=nAgt.substring(verOffset+8)}else if((verOffset=nAgt.indexOf(" OPR"))!=-1){browser="Opera";version=nAgt.substring(verOffset+5)}else if((verOffset=nAgt.indexOf("MSIE"))!=-1){browser="Microsoft Internet Explorer";version=nAgt.substring(verOffset+5)}else if((verOffset=nAgt.indexOf("Edge"))!=-1){browser="Microsoft Edge";version=nAgt.substring(verOffset+5)}else if((verOffset=nAgt.indexOf("Chrome"))!=-1){browser=
"Chrome";version=nAgt.substring(verOffset+7)}else if((verOffset=nAgt.indexOf("Safari"))!=-1){browser="Safari";version=nAgt.substring(verOffset+7);if((verOffset=nAgt.indexOf("Version"))!=-1)version=nAgt.substring(verOffset+8)}else if((verOffset=nAgt.indexOf("Firefox"))!=-1){browser="Firefox";version=nAgt.substring(verOffset+8)}else if(nAgt.indexOf("Trident/")!=-1){browser="Microsoft Internet Explorer";version=nAgt.substring(nAgt.indexOf("rv:")+3)}else if((nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=
nAgt.lastIndexOf("/"))){browser=nAgt.substring(nameOffset,verOffset);version=nAgt.substring(verOffset+1);if(browser.toLowerCase()==browser.toUpperCase())browser=navigator.appName}if((ix=version.indexOf(";"))!=-1)version=version.substring(0,ix);if((ix=version.indexOf(" "))!=-1)version=version.substring(0,ix);if((ix=version.indexOf(")"))!=-1)version=version.substring(0,ix);majorVersion=parseInt(""+version,10);if(isNaN(majorVersion)){version=""+parseFloat(navigator.appVersion);majorVersion=parseInt(navigator.appVersion,
10)}var mobile=/Mobile|mini|Fennec|Samsung|Android|iP(ad|od|hone)/.test(nVer);var cookieEnabled=navigator.cookieEnabled;if(typeof navigator.cookieEnabled=="undefined"){document.cookie="testcookie";cookieEnabled=document.cookie.indexOf("testcookie")!=-1}var os=unknown;var clientStrings=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",
r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},
{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var id in clientStrings){var cs=clientStrings[id];if(cs.r.test(nAgt)){os=cs.s;break}}var osVersion=unknown;if(/Windows/.test(os)){osVersion=/Windows (.*)/.exec(os)[1];os="Windows"}switch(os){case "Mac OS X":osVersion=
/Mac OS X (10[\._\d]+)/.exec(nAgt)[1];break;case "Android":osVersion=/Android ([\._\d]+)/.exec(nAgt)[1];break;case "iOS":var tmp=/OS (\d+)_(\d+)_?(\d+)?/.exec(nVer)||[];while(tmp.length<4)tmp.push("0");osVersion=tmp[1]+"."+tmp[2]+"."+parseInt(tmp[3],10);break}var font;var devicePlatform=system.DevicePlatform.UNKNOWN;switch(os){case "Windows":if(parseFloat(osVersion)>=10)font="Segoe UI";else font="Times New Roman";devicePlatform=system.DevicePlatform.WINDOWS;break;case "iOS":devicePlatform=system.DevicePlatform.IOS;
case "Mac OS":case "Mac OS X":font="-apple-system";devicePlatform=system.DevicePlatform.MACOS;break;case "Android":font="Roboto";devicePlatform=system.DevicePlatform.ANDROID;break;case "Linux":devicePlatform=system.DevicePlatform.LINUX;default:font="_sans"}var languages=navigator.languages;var language=languages!=void 0&&Array.isArray(languages)&&languages.length>0?languages[0]:navigator.language||navigator.userLanguage||"en-US";return{os:os,osVersion:osVersion,platform:devicePlatform,browser:browser,
browserVersion:version,cookies:cookieEnabled,mobile:mobile,language:language,font:font}}()})(system=__.system||(__.system={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var ad;(function(ad){var Logger=IceStone.__.system.Logger;var Storage=IceStone.__.system.Storage;var Stage=IceStone.__.display.Stage;var Assets=IceStone.__.system.Assets;var EventManager=IceStone.__.events.EventManager;var EventsInternal=IceStone.__.events.EventsInternal;var Theme=IceStone.__.ui.Themes;var AdStates=function(){function AdStates(){}AdStates.S3E_HTML5_ADS_INIT_FAIL=0;AdStates.S3E_HTML5_ADS_INIT_SUCCESS=1;AdStates.S3E_HTML5_ADS_AD_ISNT_AVAILABLE=
2;AdStates.S3E_HTML5_ADS_AD_IS_AVAILABLE=3;AdStates.S3E_HTML5_ADS_AD_STARTING_FAIL=4;AdStates.S3E_HTML5_ADS_AD_STARTING_SUCCESS=5;AdStates.S3E_HTML5_ADS_AD_SERVING_INTERRUPTED=6;AdStates.S3E_HTML5_ADS_AD_IS_SHOWN_SUCCESSFULLY=7;AdStates.S3E_HTML5_ADS_AD_WAS_CLICKED=8;AdStates.S3E_HTML5_ADS_IDLE=9;return AdStates}();ad.AdStates=AdStates;var AdUIStates=function(){function AdUIStates(){}AdUIStates.S3E_HTML5_ADS_SHOW_CONTAINERS=0;AdUIStates.S3E_HTML5_ADS_HIDE_CONTAINERS=1;AdUIStates.S3E_HTML5_ADS_HIDE_LOADER=
2;AdUIStates.S3E_HTML5_ADS_HIDE_CLOSE_BUTTON=3;AdUIStates.S3E_HTML5_ADS_HIDE_CONTAINERS_FADEOUT=4;AdUIStates.S3E_HTML5_ADS_SHOW_LOADER=5;return AdUIStates}();ad.AdUIStates=AdUIStates;var Ad=function(){function Ad(aDelay){if(aDelay===void 0)aDelay=0;this.ADS_IDLE=0;this.ADS_INIT_FAIL=1;this.ADS_INIT_SUCCESS=2;this.AD_LOAD=3;this.AD_LOADED=4;this.AD_FAILED=5;this.AD_SHOW=6;this._delay=0;this._lastTime=0;this._init=false;this._showState=false;this._cbfnAdFinished=null;this._placementParams=null;this._language=
null;this._placements=null;this._params=null;this._state=0;this._adInited=-1;this._adShowCalled=false;this._firstInit=false;this._preloadAD=false;this._showAdAgain=false;this._uiState=-1;this._delay=aDelay*1E3;this._lastTime=-1;this._init=false;this._state=this.ADS_IDLE;this._adInited=-1;this._showState=false;this._firstInit=true;this._preloadAD=true;Ad.initContainer()}Ad.initContainer=function(){if(!Ad._divRoot){Ad._divRoot=document.createElement("div");Ad._divRoot.style.width=Ad._divRoot.style.height=
"100%";Ad._divRoot.style.position="absolute";Ad._divRoot.style.zIndex="256";Ad._divRoot.style.top="0px";Ad._divRoot.style.left="0px";Ad._divRoot.style.visibility="hidden";Ad._divRoot.style.pointerEvents="auto";Ad._divRoot.style.overflowX="hidden";Ad._divRoot.style.overflowY="hidden";Stage.addChild(Ad._divRoot);Ad._divBG=document.createElement("div");Ad._divBG.style.width=Ad._divBG.style.height="100%";switch(Ad._currentTheme){case Theme.DARK:Ad._divBG.style.backgroundColor="black";break;case Theme.LIGHT:Ad._divBG.style.backgroundColor=
"white";break}Ad._divBG.style.position="absolute";Ad._divBG.style.opacity=Ad._currentAlpha+"";Ad._divBG.style.filter="alpha(opacity="+parseFloat(Ad._divBG.style.opacity)*100+")";Ad._divBG.style.visibility="hidden";Ad._divRoot.appendChild(Ad._divBG);Ad._divLoader=Assets.svg("ad/loader.svg");if(Ad._divLoader){Ad._divLoader["pauseAnimations"]();var rootLoader=document.createElement("div");var loaderDiv=document.createElement("div");loaderDiv.style.display="table-cell";loaderDiv.style.verticalAlign="middle";
loaderDiv.style.textAlign="center";rootLoader.style.display="table";rootLoader.style.position="absolute";rootLoader.style.height="100%";rootLoader.style.width="100%";loaderDiv.style.background="transparent";rootLoader.appendChild(loaderDiv);Ad._divRoot.appendChild(rootLoader);Ad._divLoader.style.width="20%";Ad._divLoader.style.height="20%";Ad._divLoader.style.visibility="hidden";loaderDiv.appendChild(Ad._divLoader);var adChildlength=Ad._divLoader.childNodes.length;for(var i=0;i<adChildlength;i++)if(Ad._divLoader.childNodes[i].localName===
"path"&&Ad._divLoader.childNodes[i].id=="IceLoaderSVG"){if(Ad._currentColor=="default"||Ad._currentColor==""||Ad._currentColor==null)switch(Ad._currentTheme){case Theme.DARK:Ad._divLoader.childNodes[i].setAttribute("fill","#ffffff");break;case Theme.LIGHT:Ad._divLoader.childNodes[i].setAttribute("fill","#000000");break}else Ad._divLoader.childNodes[i].setAttribute("fill",Ad._currentColor);break}}}if(!Ad._divVideo){Ad._divVideo=document.createElement("video");Ad._divVideo.style.position="absolute";
Ad._divVideo.style.height="100%";Ad._divVideo.style.width="100%";Ad._divVideo.addEventListener("selectstart",Ad.preventDefault);if(Ad.checkCordova())Ad._divVideo.style.visibility="hidden";else Ad._divRoot.appendChild(Ad._divVideo)}if(!Ad._divBanner){Ad._divBanner=document.createElement("div");Ad._divBanner.style.position="absolute";Ad._divBanner.style.height="100%";Ad._divBanner.style.width="100%";Ad._divBanner.addEventListener("selectstart",Ad.preventDefault);Ad._divRoot.appendChild(Ad._divBanner)}};
Ad.preventDefault=function(e){if(!e||typeof e.preventDefault!=="function")return;e.preventDefault()};Ad.prototype.DelayComplete=function(){if(this._lastTime==-1)return true;return Storage.SESSION_PLAY_TIME()-this._lastTime>=this._delay};Ad.prototype.loadAd=function(placementParams){this._state=this.AD_LOAD};Ad.prototype.Init=function(aParams){this._cbfnAdFinished=null;this._showAdAgain=false;this.KillAd();this._params=aParams;this._init=true};Ad.prototype.ShowAd=function(aPlacementParams,cbfnAdFinished){this._lastTime=
Storage.SESSION_PLAY_TIME();this._showState=true;this._placementParams=aPlacementParams;this._cbfnAdFinished=cbfnAdFinished;this._showAdAgain=true};Ad.prototype.findParamsForPlacementType=function(type){var i=0;var exists=this._placements.filter(function(e){return e["gamePlacementType"]==type});if(exists.length)return exists[0];return null};Ad.prototype.findParamsForPlacementName=function(name){var i=0;var exists=this._placements.filter(function(e){return e["gamePlacementName"]==name});if(exists.length)return exists[0];
return null};Ad.uiResultHandlerST=function(result){var _this=this;if((Ad._uiStateSt==AdUIStates.S3E_HTML5_ADS_HIDE_CLOSE_BUTTON||Ad._uiStateSt==AdUIStates.S3E_HTML5_ADS_HIDE_LOADER)&&result==AdUIStates.S3E_HTML5_ADS_SHOW_CONTAINERS){Logger.verbose("Containers already shown");return 0}if(Ad._uiStateSt==result){Logger.verbose("ui state "+result+" already called");return 0}Ad._uiStateSt=result;switch(result){case AdUIStates.S3E_HTML5_ADS_SHOW_CONTAINERS:if(Ad._divRoot)Ad._divRoot.style.visibility="visible";
if(!Ad._show_ad_preloader)break;if(Ad._divBG){Ad._divBG.style.filter="alpha(opacity=0)";Ad._divBG.style.opacity="0";Ad._divBG.style.visibility="visible"}Ad._deg=0;if(Ad._divLoader){Ad._divLoader.style.filter="alpha(opacity=0)";Ad._divLoader.style.opacity="0";Ad._divLoader.style.visibility="visible";Ad._divLoader["unpauseAnimations"]();if(Storage.BROWSER()=="Microsoft Internet Explorer"||Storage.BROWSER()=="Microsoft Edge")setTimeout(function(){Ad._deg=360;Ad._divLoader.style.transform="rotate(0deg)";
Ad._divLoader.style.transition="0.6s linear";Ad._divLoader.style.transform="rotate(".concat(Ad._deg,"deg)");Ad._divLoader.addEventListener("transitionend",_this.rotateLoader)},500)}Ad.fadeInAnimate();break;case AdUIStates.S3E_HTML5_ADS_HIDE_CONTAINERS:Ad.hideContainers();break;case AdUIStates.S3E_HTML5_ADS_HIDE_CONTAINERS_FADEOUT:Ad.fadeOutAnimate();break}};Ad.prototype.uiResultHandler=function(providerName,result){Logger.verbose("Recieved ui callback. Provider name: ",providerName," Result: ",result);
if(this.GetName()!=providerName){Logger.verbose("Unknown provider! Expected: ",this.GetName()," Got: ",providerName);return 0}if((this._uiState==AdUIStates.S3E_HTML5_ADS_HIDE_CLOSE_BUTTON||this._uiState==AdUIStates.S3E_HTML5_ADS_HIDE_LOADER)&&result==AdUIStates.S3E_HTML5_ADS_SHOW_CONTAINERS){Logger.verbose("Containers already shown");return 0}if(this._uiState==result){Logger.verbose("ui state "+result+" already called");return 0}this._uiState=result;switch(result){case AdUIStates.S3E_HTML5_ADS_HIDE_LOADER:if(Ad._divLoader)Ad._divLoader.style.visibility=
"hidden";break;case AdUIStates.S3E_HTML5_ADS_SHOW_LOADER:if(Ad._divLoader)Ad._divLoader.style.visibility="visible";break;case AdUIStates.S3E_HTML5_ADS_HIDE_CLOSE_BUTTON:var closeBtn=document.getElementById("s3eHTML5AdsCloseButton");if(closeBtn)Ad._divBanner.removeChild(closeBtn);break}};Ad.fadeInAnimate=function(){if(!Ad._divBG||!Ad._divLoader)return;Ad.stopFadeOutAnimate();var intervalTimeout=Ad.FADEIN_BG_DELAY;var step=20;var internal=intervalTimeout/step;var delta=Ad._currentAlpha/step;Ad._fixIntervalFadeIn=
setInterval(function(){Ad._divBG.style.opacity=""+(parseFloat(Ad._divBG.style.opacity)+delta);Ad._divBG.style.filter="alpha(opacity= "+parseFloat(Ad._divBG.style.opacity)*100+")";if(parseFloat(Ad._divBG.style.opacity)>=Ad._currentAlpha){Ad._divBG.style.opacity=""+Ad._currentAlpha;Ad._divBG.style.filter="alpha(opacity= "+parseFloat(Ad._divBG.style.opacity)*100+")";clearInterval(Ad._fixIntervalFadeIn);var loaderIntervalTimeout=Ad.FADEIN_LOADER_DELAY;var loaderStep=20;var loaderInternal=loaderIntervalTimeout/
loaderStep;var loaderDelta_1=parseFloat("1")/loaderStep;Ad._fixIntervalLoaderFadeIn=setInterval(function(){Ad._divLoader.style.opacity=""+(parseFloat(Ad._divLoader.style.opacity)+loaderDelta_1);Ad._divLoader.style.filter="alpha(opacity= "+parseFloat(Ad._divLoader.style.opacity)*100+")";if(parseFloat(Ad._divLoader.style.opacity)>=1){Ad._divLoader.style.opacity="1";Ad._divLoader.style.filter="alpha(opacity= "+parseFloat(Ad._divLoader.style.opacity)*100+")";clearInterval(Ad._fixIntervalLoaderFadeIn)}},
loaderInternal)}},internal)};Ad.stopFadeOutAnimate=function(){Ad._divBG.style.opacity="0";Ad._divBG.style.filter="alpha(opacity= "+parseFloat(Ad._divBG.style.opacity)*100+")";clearInterval(Ad._fixIntervalFadeOut)};Ad.stopFadeInAnimate=function(){Ad._divBG.style.opacity=""+Ad._currentAlpha;Ad._divBG.style.filter="alpha(opacity= "+parseFloat(Ad._divBG.style.opacity)*100+")";clearInterval(Ad._fixIntervalFadeIn);Ad._divLoader.style.opacity="1";Ad._divLoader.style.filter="alpha(opacity= "+parseFloat(Ad._divLoader.style.opacity)*
100+")";clearInterval(Ad._fixIntervalLoaderFadeIn)};Ad.fadeOutAnimate=function(){if(!Ad._divBG){Ad.hideContainers();return}Ad.stopFadeInAnimate();var intervalTimeout=Ad.FADEOUT_BG_DELAY;var step=20;var internal=intervalTimeout/step;var delta=parseFloat(Ad._divBG.style.opacity)/step;Ad._fixIntervalFadeOut=setInterval(function(){Ad._divBG.style.opacity=""+(parseFloat(Ad._divBG.style.opacity)-delta);Ad._divBG.style.filter="alpha(opacity= "+parseFloat(Ad._divBG.style.opacity)*100+")";if(parseFloat(Ad._divBG.style.opacity)<=
0){Ad._divBG.style.opacity="0";Ad._divBG.style.filter="alpha(opacity= "+parseFloat(Ad._divBG.style.opacity)*100+")";clearInterval(Ad._fixIntervalFadeOut);Ad.hideContainers()}},internal)};Ad.hideContainers=function(){if(Ad._divRoot)Ad._divRoot.style.visibility="hidden";if(Ad._divBG){Ad._divBG.style.filter="alpha(opacity=0)";Ad._divBG.style.opacity="0";Ad._divBG.style.visibility="hidden"}if(Ad._divLoader){Ad._divLoader.style.filter="alpha(opacity=0)";Ad._divLoader.style.opacity="0";Ad._divLoader.style.visibility=
"hidden";Ad._divLoader["pauseAnimations"]();if(Storage.BROWSER()=="Microsoft Internet Explorer"||Storage.BROWSER()=="Microsoft Edge"){Ad._deg=0;Ad._divLoader.style.transition="";Ad._divLoader.style.transform="rotate(0deg)";Ad._divLoader.removeEventListener("transitionend",Ad.rotateLoader,false)}}};Ad.rotateLoader=function(){Ad._divLoader.style.transform="rotate(".concat(Ad._deg+=360,"deg)")};Ad.prototype.resultHandler=function(providerName,result,providerParams){if(providerParams===void 0)providerParams=
null;Logger.verbose("Recieved callback. Provider name: ",providerName," Result: ",result);if(this.GetName()!=providerName){Logger.verbose("Unknown provider! Expected: ",this.GetName()," Got: ",providerName);return 0}Logger.verbose("CallbackResult - ",result);var params=this.findParamsForPlacementName("preroll");if(providerParams)params=providerParams;switch(result){case AdStates.S3E_HTML5_ADS_IDLE:Logger.verbose("AdIdle - first state of s3eHTML5Ads extension");this._state=this.ADS_IDLE;break;case AdStates.S3E_HTML5_ADS_INIT_FAIL:Logger.verbose("AdInitFail");
this._adInited=0;this._state=this.ADS_INIT_FAIL;if(this._showState)this.AdFinished(ad.AdErrorCode.AD_ERROR_INIT_FAILED);break;case AdStates.S3E_HTML5_ADS_INIT_SUCCESS:Logger.verbose("AdInitSuccess");this._adInited=1;if(this._firstInit){this._state=this.ADS_INIT_SUCCESS;this.loadAd(params);this._firstInit=false;break}this._state=this.ADS_INIT_SUCCESS;break;case AdStates.S3E_HTML5_ADS_AD_ISNT_AVAILABLE:Logger.verbose("AdAvailabilityChanged to false");this._state=this.AD_FAILED;if(this._showState)this.AdFinished(ad.AdErrorCode.AD_ERROR_NOT_FOUND);
break;case AdStates.S3E_HTML5_ADS_AD_IS_AVAILABLE:Logger.verbose("AdAvailabilityChanged to true");this._state=this.AD_LOADED;if(this._showState)this.ShowAd(this._placementParams,this._cbfnAdFinished);break;case AdStates.S3E_HTML5_ADS_AD_STARTING_FAIL:Logger.verbose("AdLoadError");this._state=this.AD_FAILED;if(this._showState)this.AdFinished(ad.AdErrorCode.AD_ERROR_UNKNOWN);break;case AdStates.S3E_HTML5_ADS_AD_STARTING_SUCCESS:Logger.verbose("AdLoadSuccess");break;case AdStates.S3E_HTML5_ADS_AD_SERVING_INTERRUPTED:Logger.verbose("AdClosed");
this.AdFinished(ad.AdErrorCode.AD_ERROR_NONE);break;case AdStates.S3E_HTML5_ADS_AD_IS_SHOWN_SUCCESSFULLY:Logger.verbose("AdIsShownSuccessfully");this.AdFinished(ad.AdErrorCode.AD_ERROR_NONE);break;case AdStates.S3E_HTML5_ADS_AD_WAS_CLICKED:Logger.verbose("AdClicked");break}return 0};Ad.prototype.KillAd=function(){if(this._showState){this.uiResultHandler(this.GetName(),AdUIStates.S3E_HTML5_ADS_HIDE_CONTAINERS);this.AdFinished(ad.AdErrorCode.AD_ERROR_SKIP)}};Ad.prototype.AdFinished=function(adErrorType){Logger.verbose("[Ad.as] -> AdFinished()");
this._showState=false;if(this._cbfnAdFinished!=null){this._showAdAgain=false;this._state=this.AD_FAILED;this._cbfnAdFinished(adErrorType);if(!this._showAdAgain)this._cbfnAdFinished=null}this._state=this.AD_FAILED};Ad.prototype.GetName=function(){return""};Ad.prototype.setCloseButton=function(closeBtnTimeoutVal,showAd){var _this=this;if(showAd===void 0)showAd=false;var closeBtnTimeout=parseInt(closeBtnTimeoutVal,10);var closeBtnRes=Assets.svg("ad/close.svg");var closeBtn=document.getElementById("s3eHTML5AdsCloseButton");
if(closeBtn)Ad._divBanner.removeChild(closeBtn);clearTimeout(Ad._closeButtonTimeoutInterval);if(closeBtnTimeout>=0&&closeBtnRes){var adContainerWidth=Ad._divBanner.clientWidth||window.innerWidth;var adContainerHeight=Ad._divBanner.clientHeight||window.innerHeight;var resultContainerSize=adContainerHeight;if(adContainerWidth<adContainerHeight)resultContainerSize=adContainerWidth;var closeBtn_1=document.createElement("a");closeBtn_1.id="s3eHTML5AdsCloseButton";closeBtn_1.style.position="absolute";closeBtn_1.style.display=
"none";closeBtn_1.style.zIndex="1";closeBtn_1.style.top=""+resultContainerSize/50/adContainerHeight*100+"%";closeBtn_1.style.right=""+resultContainerSize/50/adContainerWidth*100+"%";closeBtn_1.style.width=""+resultContainerSize/10/adContainerWidth*100*.75+"%";closeBtn_1.style.height=""+resultContainerSize/10/adContainerHeight*100*.75+"%";closeBtn_1.style.background="transparent";closeBtn_1.addEventListener("click",function(){_this.KillAd()});Ad._closeButtonTimeoutInterval=setTimeout(function(){if(!Ad._show_ad_preloader&&
!showAd){_this.KillAd();return}var closeBtnOld=document.getElementById("s3eHTML5AdsCloseButton");if(!closeBtnOld)Ad._divBanner.appendChild(closeBtn_1);closeBtn_1.style.display="block"},closeBtnTimeout);Ad._divBanner.appendChild(closeBtn_1);closeBtnRes.style.width="100%";closeBtnRes.style.height="100%";closeBtn_1.appendChild(closeBtnRes)}else;};Ad.prototype.SetPlacements=function(aPlacements){this._placements=aPlacements};Ad.prototype.getObjParam=function(obj,name,defValue){var returnValue=defValue;
if(obj.hasOwnProperty(name)&&obj[name]!=null&&obj[name]!="")returnValue=obj[name];return returnValue};Ad.checkCordova=function(){return typeof window.cordova==="object"};Ad.prototype.setConsent=function(consent){};Ad.prototype.updateConsent=function(cb,err){};Ad.prototype.getSite=function(url){if(typeof url!=="string")return null;if(url.indexOf("file:")===0)return"localhost";var match=url.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);if(match!=null&&match.length>2&&typeof match[2]==="string"&&match[2].length>
0)return match[2];return null};Ad.prototype.getMobileOperatingSystem=function(){var userAgent=navigator.userAgent||navigator.vendor||window.opera;if(/android/i.test(userAgent))return"android";if(/iPad|iPhone|iPod/.test(userAgent)&&!window["MSStream"])return"ios";return"html5"};Ad._show_ad_preloader=false;Ad.FADEIN_BG_DELAY=300;Ad.FADEIN_LOADER_DELAY=300;Ad.FADEOUT_BG_DELAY=300;Ad._currentTheme=Theme.DARK;Ad._currentAlpha=.5;Ad._currentColor="default";Ad._uiStateSt=-1;Ad._closeButtonTimeoutInterval=
0;Ad.created=function(){EventManager.on(EventsInternal.SDK_GAME_STARTED,function(){Ad._show_ad_preloader=true});EventManager.on(EventsInternal.UPDATE_THEME,function(params){Ad._currentTheme=params[0];Ad._currentAlpha=params[1];Ad._currentColor=params[2];if(Ad._divBG)switch(Ad._currentTheme){case Theme.DARK:Ad._divBG.style.backgroundColor="black";break;case Theme.LIGHT:Ad._divBG.style.backgroundColor="white";break}if(Ad._divLoader){var adChildlength=Ad._divLoader.childNodes.length;for(var i=0;i<adChildlength;i++)if(Ad._divLoader.childNodes[i].localName===
"path"&&Ad._divLoader.childNodes[i].id=="IceLoaderSVG"){if(Ad._currentColor=="default"||Ad._currentColor==""||Ad._currentColor==null)switch(Ad._currentTheme){case Theme.DARK:Ad._divLoader.childNodes[i].setAttribute("fill","#ffffff");break;case Theme.LIGHT:Ad._divLoader.childNodes[i].setAttribute("fill","#000000");break}else Ad._divLoader.childNodes[i].setAttribute("fill",Ad._currentColor);break}}});return true}();return Ad}();ad.Ad=Ad})(ad=__.ad||(__.ad={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||
window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var leaderboard;(function(leaderboard){var Logger=IceStone.__.system.Logger;var LeaderboardPlayer=function(){function LeaderboardPlayer(id,name,photo){this.id=id;this.name=name;this.photo=photo}return LeaderboardPlayer}();leaderboard.LeaderboardPlayer=LeaderboardPlayer;var LeaderboardEntry=function(){function LeaderboardEntry(rank,score,player){this.rank=rank;this.score=score;this.player=player}LeaderboardEntry.prototype.clone=function(){return new LeaderboardEntry(this.rank,
this.score,this.player)};return LeaderboardEntry}();leaderboard.LeaderboardEntry=LeaderboardEntry;var LeaderboardManager=function(){function LeaderboardManager(){Logger.verbose("LeaderboardManager.constructor ()");this.leaderboardTableList=[]}LeaderboardManager.prototype.getLeaderboard=function(tableName,count){if(count===void 0)count=-1;var result=[];var exists=this.leaderboardTableList.filter(function(e){return e.tableName==tableName});if(exists.length){var entryStorage=exists[0];return entryStorage.getLeaderboard(count)}return result};
LeaderboardManager.prototype.setLeaderboard=function(tableName,leaderboardEntryList){var exists=this.leaderboardTableList.filter(function(e){return e.tableName==tableName});if(exists.length){var entryStorage=exists[0];entryStorage.leaderboardEntryList=leaderboardEntryList;return}this.leaderboardTableList.push(new LeaderboardEntryStorage(tableName,leaderboardEntryList))};return LeaderboardManager}();leaderboard.LeaderboardManager=LeaderboardManager;var LeaderboardEntryStorage=function(){function LeaderboardEntryStorage(tableName,
leaderboardEntryList){this.leaderboardEntryList=leaderboardEntryList;this.tableName=tableName}LeaderboardEntryStorage.prototype.getLeaderboard=function(count){if(count===void 0)count=-1;var result=this.leaderboardEntryList.concat();if(count>0)result.length=count;return result.map(function(entry){return entry.clone()})};return LeaderboardEntryStorage}()})(leaderboard=__.leaderboard||(__.leaderboard={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]=
{}));
(function(IceStone){var __;(function(__){var ui;(function(ui){var Assets=IceStone.__.system.Assets;var Stage=IceStone.__.display.Stage;var EventsInternal=IceStone.__.events.EventsInternal;var EventManager=IceStone.__.events.EventManager;var IceStoneStoreButtons=function(){function IceStoneStoreButtons(){this.name="IceStoneStoreButtons";this._isInited=false;this._hidden=true;this._numButtons=0;this._style=1;this._disabled=false;this._isMobile=/Mobile|mini|Fennec|Samsung|Android|iP(ad|od|hone)/.test(navigator.appVersion);this._needToAnimate=
false;this._interval=0;this._step=10;this._duration=250;this._durationButton=250;this._currentTime=0;this._currentAnimationScale=1;this._resize=null}IceStoneStoreButtons.instance=function(){if(!IceStoneStoreButtons._instance)IceStoneStoreButtons._instance=new IceStoneStoreButtons;return IceStoneStoreButtons._instance};IceStoneStoreButtons.setConsole=function(console){this._console=console};IceStoneStoreButtons.prototype.configure=function(config){var _this=this;var divRoot=document.createElement("div");
divRoot.style.width=divRoot.style.height="100%";divRoot.style.position="absolute";divRoot.style.zIndex="0";divRoot.style.top="0px";divRoot.style.left="0px";divRoot.style.visibility="hidden";divRoot.id="s3eStoreButtonsParentNode";Stage.addChild(divRoot);var divPanel=Assets.div("ui/s3eStoreButtonsPanel.html");divPanel.style.position="absolute";divPanel.style.height="100%";divPanel.style.width="100%";divRoot.addEventListener("selectstart",function(e){if(!e||typeof e.preventDefault!=="function")return;
e.preventDefault()});divRoot.appendChild(divPanel);this._Frame=document.getElementById("s3eStoreButtonsParentNode");this._mainPanelDiv=document.getElementById("btn_panel");if(!this._mainPanelDiv){IceStoneStoreButtons.log("No main div of panel!");this._isInited=false;return}this._closeBtnRes=Assets.svg("ui/storeButton.svg");this._buttonClose=document.getElementById("drop_btn");this._buttonClose.appendChild(this._closeBtnRes);if(this._mainPanelDiv){if(config&&config.hasOwnProperty("name")&&config.hasOwnProperty("icon")&&
config.hasOwnProperty("stores")&&config["stores"].length>0){var appname=config["name"];var appUrl=config["icon"];var appStores=config["stores"];this._numButtons=appStores.length;if(this._numButtons==1)this._style=1;if(this._numButtons>=2)this._style=2;var innerHeight_1=window.innerHeight;var innerWidth_1=window.innerWidth;if(window.innerHeight<window.innerWidth&&this._isMobile){innerHeight_1=window.innerWidth;innerWidth_1=window.innerHeight}if(innerWidth_1<innerHeight_1)this._style=1;if(this._style==
2){this._stageW=1920;this._stageH=1080;this._mainW=1054;this._mainH=244;this._mainTop=254;this._border_radius=10;this._shadow=6;this._closeBtnW=122*1.4;this._closeBtnH=45*1.4;this._closeBtnT=25/1.4;this._mainImageH=126;this._mainImageT=29;this._mainImageL=19;this._border_game_radius=16;this._button2H=126;this._button2W=420;this._button2T=29;this._button2L=24;this._button1H=126;this._button1W=420;this._button1T=29;this._button1L=19;this._textT=16;this._textFSize=26;this._textPaddingL=0}if(this._style==
1){this._numButtons=1;this._stageW=1080;this._stageH=1920;this._mainW=797;this._mainH=289;this._mainTop=299;this._border_radius=12;this._shadow=6;this._closeBtnW=123*1.4;this._closeBtnH=50*1.4;this._closeBtnT=10/1.4;this._mainImageH=159;this._mainImageT=48;this._mainImageL=37;this._border_game_radius=22;this._button1H=159;this._button1W=532;this._button1T=48;this._button1L=30;this._button2H=126;this._button2W=420;this._button2T=29;this._button2L=39;this._textT=15;this._textFSize=31;this._textPaddingL=
35}this._lastH=innerHeight_1;this._lastW=innerWidth_1;var scale=innerWidth_1/innerHeight_1<=this._stageW/this._stageH?innerWidth_1/this._stageW:innerHeight_1/this._stageH;this._hidden=false;var btn_panel1=document.getElementById("btn_panel");var btn_arrow1=document.getElementById("store_btn_arrow");if(this._hidden){btn_panel1.style.marginTop="";btn_arrow1.setAttribute("transform","")}else{btn_panel1.style.marginTop=-Math.round(scale*this._mainTop)+"px";btn_arrow1.setAttribute("transform","rotate(-90) translate(-52) rotate(-90) translate(-152)")}this._closeBtnRes.style.marginTop=
Math.round(scale*this._closeBtnT)+"px";if(btn_panel1.style.marginTop!="")this._closeBtnRes.style.marginTop=Math.round(scale*(this._closeBtnT*2+10))+"px";this._hidden=!this._hidden;this.setGameName(appname);this.insertAttr("game_img","src",appUrl);this.insertAttr("google_img","src",appStores[0]["image"]);this.insertAttr("google","href",appStores[0]["url"]);if(this._style==2){this.insertAttr("ios_img","src",appStores[1]["image"]);this.insertAttr("ios","href",appStores[1]["url"])}var btn_panel_1=document.getElementById("btn_panel");
btn_panel_1.style.height=Math.round(scale*this._mainH)+"px";btn_panel_1.style.width=Math.round(scale*this._mainW)+"px";btn_panel_1.style.boxShadow=Math.round(scale*this._mainW)+"px";var border_radius_1=Math.round(scale*this._border_radius);var shadow_1=Math.round(scale*this._shadow);btn_panel_1.style.boxShadow="0px "+shadow_1+"px "+shadow_1+"px rgba(0,0,0,0.3)";btn_panel_1.style.borderRadius="0px 0px "+border_radius_1+"px "+border_radius_1+"px";var ios_img_1=document.getElementById("ios_img");var ios_1=
document.getElementById("ios");if(this._style==2){ios_img_1.style.height=Math.round(scale*this._button2H)+"px";ios_img_1.style.width=Math.round(scale*this._button2W)+"px";ios_1.style.marginLeft=Math.round(scale*this._button2L)+"px";ios_1.style.marginTop=Math.round(scale*this._button2T)+"px"}if(this._style==1)ios_1.style.display="none";var google_img_1=document.getElementById("google_img");google_img_1.style.height=Math.round(scale*this._button1H)+"px";google_img_1.style.width=Math.round(scale*this._button1W)+
"px";var google_1=document.getElementById("google");google_1.style.marginLeft=Math.round(scale*this._button1L)+"px";google_1.style.marginTop=Math.round(scale*this._button1T)+"px";var border_game_radius_1=Math.round(scale*this._border_game_radius);var game_img_1=document.getElementById("game_img"),game_width_1=Math.round(scale*this._mainImageH);game_img_1.style.height=game_width_1+"px";game_img_1.style.width=game_width_1+"px";game_img_1.style.borderRadius=border_game_radius_1+"px";var image_1=document.getElementById("game_img");
image_1.style.marginLeft=Math.round(scale*this._mainImageL)+"px";image_1.style.marginTop=Math.round(scale*this._mainImageT)+"px";this._closeBtnRes.style.height=Math.round(scale*this._closeBtnH)+"px";this._closeBtnRes.style.width=Math.round(scale*this._closeBtnW)+"px";this._closeBtnRes.style.marginTop=Math.round(scale*this._closeBtnT)+"px";if(btn_panel_1.style.marginTop!="")this._closeBtnRes.style.marginTop=Math.round(scale*(this._closeBtnT*2+10))+"px";var game_name_1=document.getElementById("game_name");
game_name_1.style.fontSize=Math.round(scale*this._textFSize)+"px";game_name_1.style.marginTop=Math.round(scale*this._textT)+"px";if(this._style==2)game_name_1.style.textAlign="center";if(this._style==1)game_name_1.style.paddingLeft=Math.round(scale*this._textPaddingL)+"px";this._hidden=true;this._Frame.style.visibility="visible";if(!this._disabled)this._buttonClose.onmousedown=this.onButtonClick.bind(this);var resizeFunction_1=function(){var innerHeight=window.innerHeight;var innerWidth=window.innerWidth;
if(window.innerHeight<window.innerWidth&&_this._isMobile){innerHeight=window.innerWidth;innerWidth=window.innerHeight}if(_this._lastH!=innerHeight||_this._lastW!=innerWidth){var scale_1=innerWidth/innerHeight<=_this._stageW/_this._stageH?innerWidth/_this._stageW:innerHeight/_this._stageH;_this._lastH=innerHeight;_this._lastW=innerWidth;if(btn_panel_1.style.marginTop!="")btn_panel_1.style.marginTop=-Math.round(scale_1*_this._mainTop)+"px";btn_panel_1.style.height=Math.round(scale_1*_this._mainH)+"px";
btn_panel_1.style.width=Math.round(scale_1*_this._mainW)+"px";btn_panel_1.style.boxShadow=Math.round(scale_1*_this._mainW)+"px";border_radius_1=Math.round(scale_1*_this._border_radius);shadow_1=Math.round(scale_1*_this._shadow);btn_panel_1.style.boxShadow="0px "+shadow_1+"px "+shadow_1+"px rgba(0,0,0,0.3)";btn_panel_1.style.borderRadius="0px 0px "+border_radius_1+"px "+border_radius_1+"px";if(_this._style==2){ios_img_1.style.height=Math.round(scale_1*_this._button2H)+"px";ios_img_1.style.width=Math.round(scale_1*
_this._button2W)+"px";ios_1.style.marginLeft=Math.round(scale_1*_this._button2L)+"px";ios_1.style.marginTop=Math.round(scale_1*_this._button2T)+"px"}google_img_1.style.height=Math.round(scale_1*_this._button1H)+"px";google_img_1.style.width=Math.round(scale_1*_this._button1W)+"px";google_1.style.marginLeft=Math.round(scale_1*_this._button1L)+"px";google_1.style.marginTop=Math.round(scale_1*_this._button1T)+"px";border_game_radius_1=Math.round(scale_1*_this._border_game_radius);game_width_1=Math.round(scale_1*
_this._mainImageH);game_img_1.style.height=game_width_1+"px";game_img_1.style.width=game_width_1+"px";game_img_1.style.borderRadius=border_game_radius_1+"px";image_1.style.marginLeft=Math.round(scale_1*_this._mainImageL)+"px";image_1.style.marginTop=Math.round(scale_1*_this._mainImageT)+"px";_this._closeBtnRes.style.height=Math.round(scale_1*_this._closeBtnH)+"px";_this._closeBtnRes.style.width=Math.round(scale_1*_this._closeBtnW)+"px";_this._closeBtnRes.style.marginTop=Math.round(scale_1*_this._closeBtnT)+
"px";if(btn_panel_1.style.marginTop!="")_this._closeBtnRes.style.marginTop=Math.round(scale_1*(_this._closeBtnT*2+10))+"px";game_name_1.style.fontSize=Math.round(scale_1*_this._textFSize)+"px";game_name_1.style.marginTop=Math.round(scale_1*_this._textT)+"px";if(_this._style==1)game_name_1.style.paddingLeft=Math.round(scale_1*_this._textPaddingL)+"px"}else setTimeout(resizeFunction_1,100)};this._resize=resizeFunction_1;EventManager.on(EventsInternal.WINDOW_RESIZE,resizeFunction_1)}}else{IceStoneStoreButtons.log("No needed elements!");
this._isInited=false;return}if(self["asc"]&&self["asc"]["panel"]&&typeof self["asc"]["panel"]["ASCPanel"]==="function")if(self["asc"]["panel"]["ASCPanel"]["instance"]){var panel=self["asc"]["panel"]["ASCPanel"]["instance"];panel["on"]("open",function(){_this.hide()})}this._isInited=true};IceStoneStoreButtons.prototype.onButtonClick=function(){this.startAnimation()};IceStoneStoreButtons.prototype.insertAttr=function(id,attr,url){document.getElementById(id).setAttribute(attr,url)};IceStoneStoreButtons.prototype.setGameName=
function(game_name){document.getElementById("game_name").innerHTML=game_name};IceStoneStoreButtons.prototype.show=function(){IceStoneStoreButtons.log("Show store buttons");if(this._hidden){if(this._resize)this._resize();this.startAnimation()}};IceStoneStoreButtons.prototype.hide=function(){IceStoneStoreButtons.log("Hide store buttons");if(!this._hidden)this.startAnimation()};IceStoneStoreButtons.prototype.enable=function(){this._disabled=false;IceStoneStoreButtons.log("enable store buttons");if(!this._isInited)return;
this._buttonClose.onmousedown=this.onButtonClick.bind(this)};IceStoneStoreButtons.prototype.disable=function(){IceStoneStoreButtons.log("disable store buttons");this._disabled=true;if(!this._isInited)return;this.hide();this._buttonClose.onmousedown=null};IceStoneStoreButtons.log=function(message){if(typeof this._console==="function")this._console("[IceStoneStoreButtons] : ".concat(message))};IceStoneStoreButtons.prototype.startAnimation=function(){this._currentTime=0;if(!this._isInited)return;this._buttonClose.onmousedown=
null;var btn_arrow=document.getElementById("store_btn_arrow");if(!btn_arrow)return;var innerHeight=window.innerHeight;var innerWidth=window.innerWidth;if(window.innerHeight<window.innerWidth&&this._isMobile){innerHeight=window.innerWidth;innerWidth=window.innerHeight}var scale=innerWidth/innerHeight<=this._stageW/this._stageH?innerWidth/this._stageW:innerHeight/this._stageH;this._currentAnimationScale=scale;if(!this._hidden)btn_arrow.setAttribute("transform","rotate(-90) translate(-52) rotate(-90) translate(-152)");
else btn_arrow.setAttribute("transform","");clearInterval(this._interval);if(this._hidden)this._interval=setInterval(this.updateButtonAnimation.bind(this),this._step);else this._interval=setInterval(this.updateAnimation.bind(this),this._step)};IceStoneStoreButtons.prototype.updateButtonAnimation=function(){this._currentTime+=this._step;var currentChange=this.getCurrentChange(this._durationButton);if(this._hidden)this._closeBtnRes.style.marginTop=Math.round(this._currentAnimationScale*this._closeBtnT+
this._currentAnimationScale*(this._closeBtnT+10)*(1-currentChange))+"px";else this._closeBtnRes.style.marginTop=Math.round(this._currentAnimationScale*this._closeBtnT+this._currentAnimationScale*(this._closeBtnT+10)*currentChange)+"px";if(this._currentTime>=this._duration)if(this._hidden){this._currentTime=0;clearInterval(this._interval);this._closeBtnRes.style.marginTop=Math.round(this._currentAnimationScale*this._closeBtnT)+"px";this._interval=setInterval(this.updateAnimation.bind(this),this._step)}else{this._currentTime=
this._duration;clearInterval(this._interval);this._buttonClose.onmousedown=this.onButtonClick.bind(this);this._closeBtnRes.style.marginTop=Math.round(this._currentAnimationScale*(this._closeBtnT*2+10))+"px";this._hidden=!this._hidden}};IceStoneStoreButtons.prototype.updateAnimation=function(){this._currentTime+=this._step;var currentChange=this.getCurrentChange(this._duration);var btn_panel=document.getElementById("btn_panel");var btn_arrow=document.getElementById("store_btn_arrow");if(this._hidden)btn_panel.style.marginTop=
-Math.round(this._currentAnimationScale*this._mainTop*(1-currentChange))+"px";else btn_panel.style.marginTop=-Math.round(this._currentAnimationScale*this._mainTop*currentChange)+"px";if(this._currentTime>=this._duration)if(this._hidden){this._currentTime=this._duration;clearInterval(this._interval);this._buttonClose.onmousedown=this.onButtonClick.bind(this);btn_panel.style.marginTop="";this._hidden=!this._hidden}else{this._currentTime=0;clearInterval(this._interval);btn_panel.style.marginTop=-Math.round(this._currentAnimationScale*
this._mainTop)+"px";this._interval=setInterval(this.updateButtonAnimation.bind(this),this._step)}};IceStoneStoreButtons.prototype.getCurrentChange=function(duration){var currentChange=0;currentChange=this.easeInOut(this._currentTime,0,1,duration);return currentChange};IceStoneStoreButtons.prototype.easeInOut=function(t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*(--t*(t-2)-1)+b};return IceStoneStoreButtons}();ui.IceStoneStoreButtons=IceStoneStoreButtons})(ui=__.ui||(__.ui={}))})(__=IceStone.__||
(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var provider;(function(provider){var com;(function(com){var gamedistribution;(function(gamedistribution){var URLLoader=IceStone.__.system.URLLoader;var URLRequest=IceStone.__.system.URLRequest;var URLRequestMethod=IceStone.__.system.URLRequestMethod;var EventsInternal=IceStone.__.events.EventsInternal;var Utils=IceStone.__.system.Utils;var Stage=IceStone.__.display.Stage;var GameDistribution=function(){function GameDistribution(){this.name="gamedistribution";
this._gotolandscapeimg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAJYCAMAAACJuGjuAAAA1VBMVEUAAAD///9ycnK/v78cHBx/f38/Pz/6+vq2traoqKizs7Pv7+/9/f3Ozs74+Pjm5uZVVVU5OTnCwsLj4+P19fWqqqr8/Pyurq6wsLDz8/Ojo6O4uLi8vLy6uroODg7ExMSlpaXs7OzGxsbx8fHQ0NDIyMjS0tLo6Oja2trW1tbU1NTKysrMzMzg4ODY2Njc3Nze3t7q6uqtra2goKD39/esrKwvLy++vr5gYGBPT089PT0rKysJCQklJSWQkJBHR0cVFRVpaWlubm5cXFx4eHiHh4eamprc3vZ2AAAOvUlEQVR42uzBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGB27m5HVRgKw3DTEaIeFROjgZmReAka0UZGBIX7v6RtZ+mA/JYjy/Z7ruFN12o1AAAAAAAAAMCTcOQ4TiRez3acYMTgvxAGF24WeWQwdKHNDRQHDAbteOBmupxZlczSq4h+GJjOyOOKxMeasLbESiTqMpnBXd381ISVbf9YMjgzMNGRGy0+V8PKuUoaByEDw4y44eKwMSw3d41wcBkljLnpRFNYboHv+6cLbpHmkNx8pV5kTVZkkuGFwhDGD0IahtWwaqryJ0qKmWgCwYfAKYflFhSzIpaNXf7FvvkgHEphtWY1vzkdcGy9VMCH4SkTWTMGc3OySx0GfbzhJCzNQqmR1W632WQRJuKr8IEQpbAap2De1c3CxUTU9o4rVmnJkppZKW6CU0vT2z02/CqF1TEFlQVZLhP8Ut0JYSmyR1aKj1OrC8JSpE9apyBlRaZTm0EbhKXIPllNl1Mlw/+c2yAsRepNQTJ9SHFBbIawFNGd1bJ4XJHx+IJVqwnCUkTtFKSsSE1WyjZiUAthKaLHckXGDxbmYS2E9RRWOavqckXGufmFQRXCUkTf5SrneV6K99IqhKWI5qtgV1bKRjIoQViK6LtcEe/u6yvF9bAEYSm21W+5Io+slAWuh88Q1t35KKxtz+WKsiKfHIdWEcIqGkVJ1nMKks+bDDt8AcIqG0nL/etKMyuyFAweEFaN0D74ustV3tV+v79iHD4grAZO4vfN6uPjI8M7/B3CamZfdacgdaVMsGgRhNUmtDPtrMhsineHXwirw5FrTUEyUxIGjCGsTud43pkVmZErA4awNIRynk/B1qzI9psBwtIit13LVW61QlkMYemnpZmV4uHZAWHpCqXGFFzdeXh2QFjaQq6Z1Xq99vAhQISlLzj9Y+8MV9OGwjB8IDrWgciUsUJtJkVTrcaFwbTWRdfO3v8tLeFzOOo5JxMcPD/e5wpefB/O95nE2DAFTauaW5klsc5gfd2olTG+fXJCYv0zP/aRKXjUqmKgM0tincPyKrhcHbWSWRLrfJ4btDJms4G+G0qsMw+tyHJlzGpWMus/iNXCsbyUWC7dN2llJPpf18uL5XBcMt3T+9gUNObz+Qfd3cFV59jpfm4btaoZyixcdfR0L9EpODc6bSdw1cHT7W4atap4dgJXHTxd+T0wBY2OoVc7AKuDp0u3Ia2OXo1GuugArI6ern13F9eqoqcFnlgdPN0uuFyZVzVXMotYHTzdLqKVkWX6aoisDp5uGZyCRlahF0oiq4OnKwcxrQwt8Mjq4OnKVXgKGg83WrOQ1cHTlUlcq4qtE8Tq4OnKJDwFHwxdJ2VWB09XJkGtjOlUaxazOni6smdeBbSq+OwEsjp4unc9z3JlTA3djoZWB0+3DmplLBYahtDq4Ol++aegsai4doJZHTxdO6yVobeyUauDp9uGpqAxmWgYUqtjp0s/xbSq0DCkVgdP1/oSmoIT49EJZnXwdKVPq6NXXzu6Z0itDp5u7Z+CplWFHs3CVgdP9+rVyryq2TgBrY6dLv0W0Moohk5Aq4Ona419y9WBoij0L2HY6uDp1mGtakba37HVwdO9BqbgAV1/51bHTpcOIlrleaYjC1sdPN3HwBTMi7xGlxy41cHT7d9qZeQHdGRxq2OnS1enUzA3+nm/r19WcKuDp9ucaFX80apGr5DkVgdP9+LTKjetdGShq2OnS5OTnf1wXOnIglcHT7d7u7ObVkYX+PGQkVh/MfQtV0a3O9UXQ3B17HQbz3JlWlXoyCJXB0/X9k9BY+wEtzp2unTk18rQQw7g6uDpHv1T0NAv7snVsdOlmU8r4/5ej5KCq/vN3rmotBGEYXTSS5ROYgLagOCFVam9UUgr02kCCm30/R+pu5lAG/afWqGU85Pve4ID5+CMmxucblq6MrJqp4ekZHVwunM7q/Xe6okDWR2bbmpmVTbX9Z2sDk53UetqPp/rY9FodWy6aS2rbnrBkKwOTndhnoLrNauggdWx6Z5Vs2qacdDA6th0Z/Yp2KynR1lkdXC6WzOrsvuggdWx6Za9U7DZLMaroIHVwek+9y9X3WI3nYVodWy6qZlVmc5CtDo23dmn/uUqbvYmaGB1cLpbOyudhXx1bLqldQqWXeoZKVodnO5jLavLy/OgkdWx6e7brKyuuum9M2h1bLqlmVWZfi0arQ5O97yW1fHxQ9DI6th0KyOr0tXx+6CR1bHp2rPQzKqb3pSFVgenu7JOwTJdstjq2HS3tayOjnTJYqtj0931TsGSVbt3QSOrg9OZWZXpksVWx6Z7ZZyCZTffgkZWx6Zb1bK6udFbZ9jq2HQL4xQsXR2cBo2sDk5Xy6pd0NDq2HT71il4sJ5u72x1bLqVlVWZbu9sdWy6u1pWe3v6aR22Ojbdi97lqmTV7nXQyOrgdIdmVt0+BA2tjk23b5yCZbOgodWx6Va1rGazFDSyOjbdD+MULF3NhkEjq2PTLWpZjUb6t5CtDk5nnIKlq5G+Pxmujk03MbPq9jVoaHVsulPrFOw20Df7wdWx6R4qWbULGlodm+5l25WRlcLiq2PTfe9frgab6UEWWx2bbrGdVemqTA+y2OrYdIveKaiwnKhj051ZWZXpCSlbHZxu63KlsDypY9P99udKYflSx6ZrjKzKvgQNrY5Nd1KyMvY8aGh1bLqTdVYKy6G6/023XPzNhpuNS1fGxsOnbAc/LrZzYR2aH0Ktvtr8Tzbewe/D3bWw2rKekJW6IqmD05WyelkZLwuqK5g6ON3y8LGs1BVUHZxuOdnqys5KXRHVwenS5LHLlbqCqoPTpckfs1JXXHVwulT9nMRAXbHVwenSde1ypa7g6uB06do8BdUVXx2cLs37WakrF+rgdGm+fblSV27UwenSfOtypa78qIPTpeZXVurKlTo4XWo2Wamr4EwdnK4ra6CuunlTB6dLcTRQV93cqYPTpaiu1vOnDk6Xorrq5lAdnC5FddXOozo4XYrqKgSX6uB0Kaqr4FMdnC5FdeVUHZwuRXXlVB2cLkV15VQdnC5FdeVUHZwuRXXlVB2cLkV15VQdnC5FdeVUHZxuqK68qoPTZXXlVR2cLqsrr+rgdFldeVUHp8vqyqs6OF1WV17VwemyuvKqDk6X1ZVXdXC6rK68qoPTZXXlVR2cLqsrr+rgdFldeVUHp8vqyqs6OF1WV17VwemyuvKqDk6X1ZVXdXC6rK68qoPTZXXlVR2cLqsrr+rgdFld/WTvjlITCYIADM+g40vIg0++5QwBIczCkoXc/1BLKGpZIRB1OlDdfv8FLKxPuxXBXldXfLqVq15XV3y6lateV1d8upWrXldXfLqVq15XV3y6lateV1d8upWrXldXfLqVq15XV3y6lateV1d8upWrXldXfLqVq15X19t0sjp9E1jqI7D0GVjqI7D0GVjqo8aw9r+WZTnt9HXnZVkOj/F1WEtYh/PrrO97/ngAW+1gHZ5nXdv78LRawXo5zbqh13Uau0aw3hyCt/Y+DV0bWPunWWQ1h/XienVPQ5+GTWDtZt3TYRq3FrCWWXf1NPBnwwaw3mbd2Wkatv9hOQivyGHYCFb7P/k7L+N264tsN43adlhnr9IN1839NGjbYT2BtQHWxzRom2Ed3CsuYDkLG8FawNr0bEyDdgGrwRULrIse95K1GdbuJ2H93v+rjwV4/+4DVnc/nAYLrAisDKzKgQVWBFYGVuXAAisCKwOrcmCBFYGVgVU5sMCKwMrAqhxYYEVgZWBVDiywIrAysCoHFlgRWBlYlQMLrAisDKzKgQVWBFYGVuXAAisCKwOrcmCBFYGVgVU5sMCKwMrAqhxYYEVgZWBVDiywIrAysCoHFlgRWBlYlQMLrAisDKzKgQVWBFYGVuXAAisCK/tBWMfb2gZrf7yiP2D1WsC6q22wjlc9Bli9BhZYEViVAwusCKwMrMqBBVYEVgZW5cACKwIrA6tyYIEVgZWBVTmwwIrAysCqHFhgRWBlYFUOLLAisDKwKgcWWBFYGViVAwusCKwMrMqBBVYEVgZW5cACKwIrA6tyYIEVgZWBVTmwwPrL3r2kNg5EARQtyU4mIZCMeqY1NBiMjYPz8f731JDC7mf8VZzAq3DOEkpXVU9CoEpYW8LKTFjCqoS1JazMhCWsSlhbwspMWDuthPVUWiCsnUV/RMKwXksLhLWz7I9IGNa8tEBYO6v+iIRhDaUFwtp5ee8P5QurjRFLWMFrfyBhWKvSBGH9N/QH8oW1KG0QVnX8EicMa1raIKxo0+/LF1Yzqy+saHjvo3xhbUorhLXnLZaVL6zNS2mFsPa9bPqtfGG18c5dWOfLyhdWS10J69Dq8zhMF9birbREWIeG1z5dWO/P7YxXwjppeN6kCutp1VhWwjpter3bwhqmF7R1BgrrjHz/hG6OsIT1SVhpCUtYlbACYaUlLGFVwgqElZawhFUJKxBWWsISViWsQFhpCUtYlbACYaUlLGFVwgqElZawhFUJKxBWWsISViWsQFhpCUtYlbACYaUlLGFVwgqElZawhFUJKxBWWsISViWsQFhpCUtYlbACYaUlLGFVwgqElZawhFUJKxBWWsISViWsQFhpCUtYlbACYaUlLGFVwgqElZawhFUJKxBWWsISViWsQFhpCUtYlbACYaUlLGFVwgqEldbMUt4U1rTgHv2B1Sgcd9/tEdY4k8Jxg7BuCWtdOOGPsG4Ia144YdmNNLv7vSbdOI+Fk/52fNWicGbLYsuG9b1TFpUJ61sNDsOv+SicNX/oGG9WuGD+2DHWXeGiQVkeCH/EsO4Y4XFZuM69Tet666FwtcWk4woPM9/KjDT9WE84725ptwIAAAAAAAAAAOBfe3BIAAAAACDo/2uzHwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJgA5Lqz+yNFHR0AAAAASUVORK5CYII=";
this._gotoportraitimg=" data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAJYCAMAAACJuGjuAAAAz1BMVEUAAAD///9ycnK/v78cHBx/f38/Pz/Pz8/8/Pyurq7v7++0tLT5+fmnp6exsbFVVVXCwsI5OTn29vbU1NTX19epqan19fXs7Ozx8fEODg64uLi2trakpKS8vLy6urrGxsarq6vKysrIyMjExMTf39/MzMzh4eHn5+fR0dHb29vZ2dnp6enj4+Pd3d34+Pjl5eX7+/uhoaEvLy+fn589PT2+vr5QUFBqampiYmIhISEJCQkoKChbW1sVFRWPj4+amppGRkZ5eXlMTEyFhYU0NDTYO2QjAAAO50lEQVR42uzBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGD27iU3jSAKw2h1241lJshD5qwApPCyJZT9LyqiIyWFA7hAKLlXOd8Sfh13lcsDS5IkSdJ/3vxZ5/souqvtZNbreu+H/bzohuaTda+mZtuixnZLrG6h5VRsa/7e66aWRV/34XN1c4eir9ptevlmPd6Vc/Cu9kVX+97rrtzgr7bvdV+bosvtXNzv7q3oYm+97m29K7rU2k/pr579Zviw9j7/FSy3rId1AKuGdWv+IH2pDVgVLG9ZD8tvQjUsa5iylBJgjVkRWGBdLMCUYIEFFliNBZgSLLDAAquxAFOCBRZYYDUWYEqwwAILrMYCTAkWWGCB1ViAKcECCyywGgswJVhggQVWYwGmBAsssMBqLMCUYIEFFliNBZgSLLDAAquxAFOCBRZYYDUWYEqwwAILrMYCTAkWWGCB1ViAKcECCyywGgswJVhggQVWYwGmBAsssMBqLMCUYIEFFliNBZgSLLDAAquxAFOCBRZYYDUWYEqwwAILLEUILB0DSzkCS8fAUo7A0jGw/lrLzTAMT/++12EYvm1LtsA622Q17UK1WE1KqsA6x2rRBewlFS2w/mj+2gXtNdE/egfrc8uQn6ufLZYlS2B9ahvscnXaNM0tHqzT5i9d6F6ynIZgnfbUBe+p5Aisk4YufENJEVh1yy5BOS7wYKU6CPMchmBVTboUpXgoBatq1aVoVRIEVlXoJ6zfTUuCwEp3EuY4C8FK9daQ58UBrHRXrByXLLCSPTZkeXAAC6wxsKrAihtYYI2BVQVW3MACawysKrDiBhZYY2BVgRU3sMAaA6sKrLiBBdYYWFVgxQ0ssMbAqgLrB3t3l9o2EAVQeJi6Bj0U4wc9BPLgLSQukSPJrutm/2tqGE1vheMhFqOBq5tzliA+5uciJL0BC1ghYI0Clt6ABawQsEYBS2/AAlYIWKOApTdgASsErFHA0huwgBUC1ihg6Q1YwAoBaxSw9AYsYIWANQpYegMWsELAGgUsvQELWCFgjQKW3oB1E9Z+ra49sJbaN9Vf+fwOrKUGLGDFgKU2YAErBqz/AUttwJoN1sN2aitgAavEo9wCC1jAAhawFAQsYMWAJQFLb8ACVgxYErD0BixgxYAlAUtvwAJWDFgSsPQGLGDFgCUBS2/AAlYMWBKw9AYsYMWAJQFLb8ACVgxYErD0BixgxYAlAUtvwAJWDFgSsPQGLGDFgCUBS2/AAlYMWBKw9AYsYMWAJQFLb8ACVgxYErD0BqzZYB2BlQXr4qyWCcsBK3P9tlourB5YObBendVyYZ2BlQPrwVktF9YrsDJg9c5subDcwU/rvLqrNgFrpblnP7HOmS0b1tYXaZWA5S3VtM5s2bDaxoeA5bkTzghLTlnA8pywZoQlF0NgTa05OsPNAKsNsyxgcXKfGZZrN957YE2rse3qGpaa3dA6LNv7YDYsad0Aa0q9dVe5sKRjDyzmDHPCkroDsO6qORuei84JS1qtN8D6pP7SfQVW/GGV/gUsWkLAoiFg0RICFg0Bi5YQsGgIWLSEgEVDwKIlBCwaAhYtIWCVrtvEXq67WH4pC1il83X9Y+gx9PTefghYdwesD/2pRVaEJbKc4YBVurpOLVkKHziwFlO3S8o6OMMBq3CXNKwXZzhgFa7ZJWU9O8MBq3CnAVZ9DevJ9qUQWIVrq11qyfrlLAessr1VuytZsmT9dpYDVtkOVXLJMn12B1bhTgHWTVlvznLAKlpbvZeAZfrsDqyyrQOsm7JOznTAKlpTBVm3Rg6m5+7AKtxjVaU2w5/OdH/Zu/umtIEgDOApUKGmRVRaPRAYQHyhovWlCsWKiN//M/XYzlxpyCYx3HY6u/v83c50Or95smySi8KizMSiwiqrFLCOwqLMuPoBqyze61GFRZuZg7Umi/mIpbAoM6lW4yuL/4ilsCgzrtoglcX9+DWFRZgZwIqd3xcB8ygsutxYVtjFkPeNQoVFmsI6LCeL+bJBYRHmx6cQrSzm93MUFmWewzCMwHKyWH/4S2HR5ikM0cri/ciMwqLMJAydrGhlcV+7KyzCFABW/Pz+ELCPwiLKzzDEK2sSsI/CIspjM0Qri/9vQoVFls/NEJXF/Qa0wqLLfbOJVJaVxftpd4VFmdtmE60s9vcJFRZZnhtNG2R+3woERGGR5BqBBbK4PzGjsMjy3GjglSVgiaWwiHINsJD5XcASS2HR5L7dwCvrP/xv/h2F9b/nxweAhVSWiNFdYVHksd3GK+s6kBGF5T2TNsBCZL0EMqKwvOep1cYri/3bOQqLKjetVkJlydg1KCyCHLVAFjK/SyksheU7Dy2AhVwMxRSWwvKcyffvrYTKkvBcg8KiyFMRYMXN76IKS2H5zbhYXKmsiCxJhaWwvOZnWCwmVFYhkBOF5TOzog1eWYIKS2H5zE6t5mTFVBb/158VFkkmtb9gRWV9ErPDUlheY5o1Jytu5fAcSIrC8pZ5DWAtE1dZEl4mVFgE2enXINj8zvqzlwqLLJN+v+9gxawceH9ETmFRxTQAFlpZIl5SFQrLlAKymNt+H5MFsNifOSoXlunfBWSZdzoYLJAlbHKXBMv0D+lgjTs2SZUlbHIXBMt0vtDBeuk5WPErB0FPNQiDZV3RwXppAyy8sqS8mSMPlnVlQwRr2ur1XGXFrhzkXQiFwDKdPRJYzpVNQmWJuvksCZbp7e3teYflXHW7DtaqLFdZM1E3nwXBAldUsEpHXZvEypJxCIg8WKZ3eQmyKGCZ4sDBQmSJW40KgWW6H+lgTcMBwEqoLHmrURmwrCsLC2QBLO+uBsmVVRU5YPGHZV3ZWFjL+IY1rZUHUVnRLanETYMAWKb77TesSwJYr7VyuexgxcuScKK7QFhmUPkGsihgbS1dxVeWkyXi4G15sKyrSsVVlmdYD2VIYmXJ3GCxh2XKlSUsJ8snLLM4O3OysPk9lLnB4g7LlN9ZV1BZNn5hmduzFVjYyuEuEBy2sEzZ/qW/KssfrGlj38JKqyy5gztnWOBqVZZHWFudfQvLyUJWDtLenpABC1xFK8sTrId9G6yynCypG3fesMBVRJYnWOYWXKVV1q0JZIclrD+u3PzuC9Zrr17fT68sId81EQbLuYpUlgdY87pNoiyA1RDviiMscLVWWTYbw5pe15NgOVmNaSA+/GCBq7XK8gHrfjgc1rNUltg7z5xhgas1WR5glY6GNlkqS/RilCss5ypaWZvCehicnw8zVZaUr+WIggWuEFmbwNoNz22GTha+clBXHGGtu3Lz+yawzGI0GoGs9MpSVwxh3WzDH0UqKzeswtnIwUqWpa5YwrKuEFhLWnlhPfePj49HGStLyOdTZcFyrrDKygNrt3ly7GClySq+Bhp2sJwrVNbd21l9PjkBWJkqq6h7UYawklxV8sHabVxcWFhZK+tTKdCwgwWuUirrbbB22hc2JxFZ+MphJv15BpawwJVHWKVx/erqCmQ5WMkXQ+nPX/GEBa5SZWX9yWbGT/XTK5uEyoKsVJbAM/sEwAJXvmCVFsPTZZysDPN7TddXHGGBq9RkgmUK1a82K7CyzO9N/TnIEZZzlZJUWGanOjo4AFhvqizxjyHzhAWuNm+s0ry2fQBxlbVMhsoS/joOV1jOVXq2UJuPi5NtGwfLyULndwero3dxWMICV7lgOVSz/uHhNiS1stZl6WWQJyxwlRfW3XzetMe/QxBZaSsH3TLwhAWu3gzL3D3OP7dP4fhIC+sLAssmpbJaetOZJyzEFZby8qzZwcrxMyArtbLQ+X2hl0GesLK5Qt4Fc7BcZzlY2VYOXVnfeBYEC1zlkOWnsuZaV0xhgauNZO1FZWVfOegjfWxh5XJVQSoLaL1h5aA/BtnCAlceKguRlVhZR/pEH1tYuVxFj59Znd+zrxxqO4GGKyxwlS/YxTDj/H5WCDRsYYGr3IlfOUBSK+u9/hZkDGtDV/kra6bDFWdYzhV1ZUVkKSvesDZ2lW/lMNsNNJxhIa68bEnxlcOTthV3WPAP/seV9Yu9O1hpGAgCMLxrSKu9eoogqETBa4u1hdJSfP93coKXKprsrimdmfz/M3xMdzfbpIaVf1jNPI5QxiPDxw07wSnASpFVfsvhJ6zXFXcYpgJrHFlJI+uZQ/YpwRpF1vDFrPmRfeDEYP1f1vXQyGo/doEmBytJVvkth5fDjvX6NGGJrHOtsm4PvKZ9wrBE1jlG1uGdj0pMHJbIGvnI4e7IqAJWj6yCkfV02DGpArBGknXddf9QM6i+AtYostq3fT1jTp0ErFJZ86prX1/NeEPMLwGrVBacegPWN1nA0plxWCILWCqzDktkAUtj5mGJLGApzD4skQUsfTmAJbKApS4PsEQWsLTlApbIApayfMASWcDSlRNYIgtYqvICS2QBS1NuYIksYCnKDyyRBSw9OYIlsoClJk+wRBawtOQKlsgClpJ8wRJZwNKRM1giC1gq8gZLZAFLQ+5giSxgKcgfLJEFrMt3Aquq1VWVwBJZwLp4VTRSFXJkASs3YKXJAlZmwEqUBay8gJUqC1hZAStZFrByAla6LGBlBKwMWcBKD1g5soCVHLCyZAErNWDlyQJWYsDKlAWstICVKwtYSQErWxawUgJWvixgJQSsAlnAGg5YJbKANRiwimQBayhglckC1kDAKpQFrP6AVSoLWL0Bq1gWsPoCVrksYPUErOKabaA/AxaZCFjUBSyyEbCoC1hkI2BRF7DIRsCiLmCRjYBFZ6mORlL4IkvqaRONtAlkqWU00jKQqdpoojaQrYwsslhiWWsbTcRdKnOtooFWgazVLKL6Fk0gc62j+taBDLaPytsHMpnyZRYLLLOpPn/nzN1wimXhynSN0msOFftB620UPtxp2Q56aH2j6khrseI/8W7aztTEbyAREREREREREREREREREREREdFne3BIAAAAACDo/2tvGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHYCqq2C/MG5P5QAAAAASUVORK5CYII=";
this._isInited=false;this._isGameEndCalled=false;this._isPaused=false;this._isStarted=false;this._isPregame=false;this._currentLevel=-1;this._interval=0;this._step=100}GameDistribution.instance=function(){if(!GameDistribution._instance)GameDistribution._instance=new GameDistribution;return GameDistribution._instance};GameDistribution.setConsole=function(console){this._console=console};GameDistribution.prototype.setGameEventCallback=function(callback){this._gameEventCallback=callback};GameDistribution.prototype.gameEventCallback=
function(event){if(this._gameEventCallback)this._gameEventCallback(event)};GameDistribution.prototype.configure=function(){var _this=this;if(!GameDistribution.checkGDSDK()){var url="GDConfig.json";var loader_2=new URLLoader;loader_2.on(EventsInternal.COMPLETE,function(){if(loader_2.data&&loader_2.data!=""){var config=window.JSON.parse(loader_2.data);_this._isPregame=true;window["GD_OPTIONS"]={"gameId":config["api_key"],"onEvent":_this._onEvent.bind(_this)};(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];
if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="./patch/gamedistribution/main.js?html5.api.gamedistribution.com/main.min.js";fjs.parentNode.insertBefore(js,fjs)})(document,"script","gamedistribution-jssdk")}Utils.disposeURLLoader(loader_2)});var request=new URLRequest(url);request.method=URLRequestMethod.GET;request.contentType="text";loader_2.load(request)}else{GameDistribution.log("ALREADY INITED!");this._isInited=false}Stage.setDefaultRoot();var innerWidth=window.innerWidth;var bgdiv=document.createElement("div");
bgdiv.style.width=bgdiv.style.height="100%";bgdiv.style.backgroundColor="black";bgdiv.style.display="flex";bgdiv.style.justifyContent="center";bgdiv.style.alignItems="center";bgdiv.style.position="absolute";bgdiv.style.pointerEvents="auto";bgdiv.style.visibility="hidden";Stage.addChildAt(bgdiv,0);var portImg=document.createElement("img");portImg.style.width="50vw";portImg.id="portraitImgDiv";portImg.src=this._gotoportraitimg;portImg.style.position="absolute";portImg.style.visibility="hidden";bgdiv.appendChild(portImg);
var landImg=document.createElement("img");landImg.style.width="50vw";landImg.id="landscapeImgDiv";landImg.src=this._gotolandscapeimg;landImg.style.position="absolute";landImg.style.visibility="hidden";bgdiv.appendChild(landImg);if(window["flash"]!=null&&typeof window["flash"]==="object")if(window["flash"]["display"]&&window["flash"]["display"]["Stage"]&&window["flash"]["display"]["Stage"]["current"]){var stage=window["flash"]["display"]["Stage"]["current"];stage["addEventListener"]("orientationChange",
function(e){bgdiv.style.visibility="hidden";landImg.style.visibility="hidden";portImg.style.visibility="hidden"});stage["addEventListener"]("orientationMismatch",function(e){if(e["afterOrientation"]==="portrait"){bgdiv.style.visibility="visible";landImg.style.visibility="visible";portImg.style.visibility="hidden"}else{bgdiv.style.visibility="visible";landImg.style.visibility="hidden";portImg.style.visibility="visible"}});if(stage["orientationMismatch"])if(stage["orientation"]==="portrait"){bgdiv.style.visibility=
"visible";landImg.style.visibility="visible";portImg.style.visibility="hidden"}else{bgdiv.style.visibility="visible";landImg.style.visibility="hidden";portImg.style.visibility="visible"}}this._interval=setInterval(function(){var divAd=document.getElementById("gdsdk__advertisement");if(divAd){divAd.style.pointerEvents="auto";if(document.getElementById("gameWrapper")){divAd.style.left=-parseFloat(document.getElementById("gameWrapper").style.left)+"px";window.addEventListener("resize",function(){divAd.style.left=
-parseFloat(document.getElementById("gameWrapper").style.left)+"px"})}Stage.addChild(divAd);clearInterval(_this._interval)}},this._step)};GameDistribution.prototype._onEvent=function(event){switch(event.name){case "SDK_READY":this._isPregame=true;window["gdsdk"]["showAd"](window["gdsdk"]["AdType"]["Interstitial"]);break;case "SDK_GAME_START":if(this._isPregame){this._isPregame=false;this._isStarted=true;this._isInited=true;this.gameEventCallback("api_inited")}else this.gameEventCallback("endgame_resume");
this.gameEventCallback("gds_resume");break;case "SDK_GAME_PAUSE":this.gameEventCallback("gds_pause");break;case "AD_ERROR":break}};GameDistribution.prototype.setStartGame=function(){};GameDistribution.prototype.getIsStarted=function(){return this._isStarted};GameDistribution.prototype.postHighScore=function(score){GameDistribution.log("Post high score: "+score)};GameDistribution.prototype.levelEnd=function(){GameDistribution.log("Call level end: "+this._currentLevel);if(!this._isStarted){GameDistribution.log("Is not started!");
return}window["gdsdk"]["showAd"](window["gdsdk"]["AdType"]["Interstitial"])};GameDistribution.prototype.setEndLevel=function(level){GameDistribution.log("Call set end level : "+level);if(!this._isStarted){GameDistribution.log("Is not started!");return}};GameDistribution.prototype.getUserHighScore=function(){if(this._lastHighScore)return this._lastHighScore;else return 0};GameDistribution.checkGDSDK=function(){return typeof window["gdsdk"]!=="undefined"};GameDistribution.log=function(message){if(typeof this._console===
"function")this._console("".concat(GameDistribution.instance().name,": ").concat(message))};return GameDistribution}();gamedistribution.GameDistribution=GameDistribution})(gamedistribution=com.gamedistribution||(com.gamedistribution={}))})(com=provider.com||(provider.com={}))})(provider=__.provider||(__.provider={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var provider;(function(provider){var com;(function(com){var Logger=IceStone.__.system.Logger;var Storage=IceStone.__.system.Storage;var GameDistribution=IceStone.__.provider.com.gamedistribution.GameDistribution;var Events=IceStone.__.events.Events;var EventManager=IceStone.__.events.EventManager;var ProviderGameDistribution=function(){function ProviderGameDistribution(){this.name=provider.Providers.GAMEDISTRIBUTION;this._isActive=false}ProviderGameDistribution.prototype.getLocale=
function(){return null};ProviderGameDistribution.prototype.initializeAsync=function(){var _this=this;return(new Promise(function(resolve,reject){_this._isActive=GameDistribution.instance()!=null;_this._initializeAsyncCallback=resolve;Logger.verbose("ProviderGameDistribution.initializeAsync ()");Storage.setUSER_ID(Storage.DEFAULT_USER_ID());if(_this._isActive){GameDistribution.setConsole(Logger.verbose);GameDistribution.instance().setGameEventCallback(_this._handler.bind(_this));GameDistribution.instance().configure()}else reject()})).catch(function(e){throw e;
})};ProviderGameDistribution.prototype.startGameAsync=function(){return(new Promise(function(resolve,reject){resolve()})).catch(function(e){throw e;})};ProviderGameDistribution.prototype.setLoadingProgress=function(percentage){};ProviderGameDistribution.prototype.start=function(){};ProviderGameDistribution.prototype.startAsync=function(){return(new Promise(function(resolve,reject){resolve()})).catch(function(e){throw e;})};ProviderGameDistribution.prototype.endAsync=function(result){var _this=this;
return(new Promise(function(resolve,reject){_this._endAsyncCallback=resolve;GameDistribution.instance().levelEnd()})).catch(function(e){throw e;})};ProviderGameDistribution.prototype.getUserDataAsync=function(){return(new Promise(function(resolve,reject){resolve()})).catch(function(e){throw e;})};ProviderGameDistribution.prototype.setUserDataAsync=function(data){return(new Promise(function(resolve,reject){resolve()})).catch(function(e){throw e;})};ProviderGameDistribution.prototype._handler=function(event){switch(event){case "api_inited":if(this._isActive)if(this._initializeAsyncCallback&&
typeof this._initializeAsyncCallback==="function")this._initializeAsyncCallback();break;case "gds_resume":if(this._isActive){EventManager.dispatch(Events.RESUME);EventManager.dispatch(Events.UNMUTE)}break;case "gds_pause":if(this._isActive){EventManager.dispatch(Events.PAUSE);EventManager.dispatch(Events.MUTE)}break;case "endgame_resume":if(this._isActive)if(this._endAsyncCallback&&typeof this._endAsyncCallback==="function")this._endAsyncCallback();break}};ProviderGameDistribution.prototype.showLeaderboardsAsync=
function(){return(new Promise(function(resolve,reject){resolve()})).catch(function(e){throw e;})};ProviderGameDistribution.prototype.initCrossPromoConfig=function(){};ProviderGameDistribution.prototype.setHideLeaderboards=function(value){return false};ProviderGameDistribution.prototype.wouldShowLeaderboards=function(){return false};ProviderGameDistribution.prototype.updateLeaderboard=function(date){};return ProviderGameDistribution}();com.ProviderGameDistribution=ProviderGameDistribution})(com=provider.com||
(provider.com={}))})(provider=__.provider||(__.provider={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var provider;(function(provider){var ProviderGameDistribution=IceStone.__.provider.com.ProviderGameDistribution;var Providers=function(){function Providers(){}Providers.GAMEDISTRIBUTION="gamedistribution";return Providers}();provider.Providers=Providers;Providers["GAMEDISTRIBUTION"]=Providers.GAMEDISTRIBUTION;var ProviderManager=function(){function ProviderManager(){}ProviderManager.provider=new ProviderGameDistribution;return ProviderManager}();provider.ProviderManager=
ProviderManager})(provider=__.provider||(__.provider={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var ad;(function(ad){var Storage=IceStone.__.system.Storage;var Logger=IceStone.__.system.Logger;var EventsInternal=IceStone.__.events.EventsInternal;var ProviderManager=IceStone.__.provider.ProviderManager;var EventManager=IceStone.__.events.EventManager;var Events=IceStone.__.events.Events;var IceStoneStoreButtons=IceStone.__.ui.IceStoneStoreButtons;var Constants=function(){function Constants(){}Constants.GOOGLE_ADSENSE="adsense";Constants.FACEBOOK_INSTANT=
"fbinstant";Constants.LIFE_STREET="lifestreet";Constants.LIFE_STREET_HTML5="lifestreet_html5";Constants.APPLIXIR="applixir";Constants.CPMSTAR="cpmstar";Constants.CPMSTAR_IMA="cpmstar_ima";Constants.FACEBOOK_AUDIENCE_NETWORK="facebookaudiencenetwork";Constants.IWIN="iwin";Constants.ARKADIUM="arkadium";Constants.ABSOLUTIST="Absolutist";Constants.UNITYADS="unityads";Constants.ADMOB="admob";Constants.ADCOLONY="adcolony";Constants.IRONSOURCE="supersonic";Constants.OK="ok";Constants.HYPRMX="hyprmx";Constants.EXOCLICK=
"exoclick";Constants.ADSTERRA="adsterra";Constants.STREAMRAIL="streamrail";Constants.AOL="aol";Constants.MINTEGRAL="mintegral";Constants.HARREN_MEDIA="harrenmedia";Constants.HARREN_MEDIA_BANNER="harrenmediabanner";Constants.SMART_ADSERVER="smartadserver";Constants.YANDEX_GAMES="yandexgames";Constants.PUBNX="pubnx";Constants.VELIS_MEDIA="velismedia";Constants.PUSEPOINT="pulsepoint";Constants.MARS_MEDIA="marsmedia";Constants.NETLINK="netlink";Constants.SELECT_MEDIA="selectmedia";Constants.ADSOLUT="Adsolut";
Constants.ANIVIEW="aniview";Constants.CRAZYGAMES="crazygames";return Constants}();ad.Constants=Constants;var AdErrorCode=function(){function AdErrorCode(){}AdErrorCode.AD_ERROR_NONE=0;AdErrorCode.AD_ERROR_SKIP=1;AdErrorCode.AD_ERROR_NOT_FOUND=2;AdErrorCode.AD_ERROR_PLACEMENT_NOT_FOUND=3;AdErrorCode.AD_ERROR_NOT_READY=4;AdErrorCode.AD_ERROR_USER_CANCELED=5;AdErrorCode.AD_ERROR_INIT_FAILED=6;AdErrorCode.AD_ERROR_UNKNOWN=7;return AdErrorCode}();ad.AdErrorCode=AdErrorCode;var PlacementTypeConverter=function(){function PlacementTypeConverter(){}
PlacementTypeConverter.byName=function(name){if(!name||name.length==0)return ad.PlacementType.PLACEMENT_TYPE_UNKNOWN;switch(name){case "banner_top":return ad.PlacementType.PLACEMENT_TYPE_BANNER_TOP;case "banner_bottom":return ad.PlacementType.PLACEMENT_TYPE_BANNER_BOTTOM;case "interstitial":return ad.PlacementType.PLACEMENT_TYPE_INTERSTITIAL;case "rewarded":return ad.PlacementType.PLACEMENT_TYPE_REWARDED_VIDEO;case "video":return ad.PlacementType.PLACEMENT_TYPE_VIDEO;case "more_apps":return ad.PlacementType.PLACEMENT_TYPE_MORE_APPS;
case "task_install":return ad.PlacementType.PLACEMENT_TYPE_TASK_INSTALL;case "logo_url":return ad.PlacementType.PLACEMENT_TYPE_LOGO;case "store_buttons":return ad.PlacementType.PLACEMENT_TYPE_STORE_BUTTON;default:return ad.PlacementType.PLACEMENT_TYPE_UNKNOWN}};PlacementTypeConverter.byType=function(type){switch(type){case ad.PlacementType.PLACEMENT_TYPE_BANNER_TOP:return"banner_top";case ad.PlacementType.PLACEMENT_TYPE_BANNER_BOTTOM:return"banner_bottom";case ad.PlacementType.PLACEMENT_TYPE_INTERSTITIAL:return"interstitial";
case ad.PlacementType.PLACEMENT_TYPE_REWARDED_VIDEO:return"rewarded";case ad.PlacementType.PLACEMENT_TYPE_VIDEO:return"video";case ad.PlacementType.PLACEMENT_TYPE_MORE_APPS:return"more_apps";case ad.PlacementType.PLACEMENT_TYPE_TASK_INSTALL:return"task_install";case ad.PlacementType.PLACEMENT_TYPE_LOGO:return"logo_url";case ad.PlacementType.PLACEMENT_TYPE_STORE_BUTTON:return"store_buttons";default:return"unknown"}};return PlacementTypeConverter}();ad.PlacementTypeConverter=PlacementTypeConverter;
var ADCONFIGURL={};window["IceStone"]["isMuted"];if(!window["IceStone"]["isMuted"])window["IceStone"]["isMuted"]=false;var AdManager=function(){function AdManager(){this._maxCahnnelID=0;this._days=0;this._numSessions=0;this._curAd=null;this._curAdShowed=false;this._isMobile=/Mobile|mini|Fennec|Samsung|Android|iP(ad|od|hone)/.test(navigator.appVersion);this._adFinished=null;this._preselectChannels=[];this._currPreselectIndex=0;this._startPreselectIndex=-1;this._lastUpdate=0;this._cordovaPlatform="";
this._generalTimout=8;this._lastGeneralUpdate=0;this._numCalls=0;this._numLoops=0;this._adBlockEnabled=false;this._adProviderShowTime=0;this._adProvidersShowTime=0;Logger.verbose("AdManager.constructor ()");this.initializeAsync=this.initializeAsync.bind(this);this._providers=[];this._placements=[];this.checkIfAdblock()}AdManager.prototype.initializeAsync=function(){var _this=this;return(new Promise(function(resolve,reject){Logger.verbose("AdManager.initializeAsync ()");if(typeof window.cordova===
"object"&&typeof window.CustomConfigParameters==="object"){var paramkeyArray=["platform","projectbundle"];window.CustomConfigParameters.get(function(configData){Logger.verbose("CustomConfigParameters "+configData["platform"]);Logger.verbose("CustomConfigParameters "+JSON.stringify(configData));if(configData["platform"])_this._cordovaPlatform=configData["platform"];Logger.verbose("CustomConfigParameters 2 "+configData["projectbundle"]);if(configData["projectbundle"])Storage.setAPP_BUNDLE(configData["projectbundle"]);
_this.loadCall(resolve)},function(err){Logger.verbose("CustomConfigParameters err "+err);_this.loadCall(resolve)},paramkeyArray)}else _this.loadCall(resolve)})).catch(function(e){throw e;})};AdManager.prototype.loadCall=function(resolve){var _this=this;this.__loadConfigAsync().then(function(){Logger.verbose("AdManager.initializeAsync __loadConfigAsync loaded");_this.__parseConfig(resolve)}).catch(function(error){Logger.verbose("AdManager.initializeAsync __loadConfigAsync error "+error);_this.__parseConfig(resolve)})};
AdManager.prototype.__loadConfigAsync=function(){var appID=Storage.APP_ID();var url=ADCONFIGURL[ProviderManager.provider.name];if(this._cordovaPlatform=="");else if(this._cordovaPlatform=="huawei"){url=ADCONFIGURL["cordova"];url=url.split("[platform]").join(this._cordovaPlatform);var strArray=appID.split(".");if(strArray.length>1&&strArray[0]=="part")var lastPart=strArray.shift();strArray.push("huawei");appID="com.absolutist."+strArray.join(".");var bundle=Storage.getAPP_BUNDLE();if(bundle!="")appID=
bundle}else{url=ADCONFIGURL["cordova"];url=url.split("[platform]").join(this._cordovaPlatform);var strArray=appID.split(".");if(strArray.length>1&&strArray[0]=="part")var lastPart=strArray.shift();strArray.push("partners");appID="com.absolutist."+strArray.join(".");var bundle=Storage.getAPP_BUNDLE();if(bundle!="")appID=bundle}return(new Promise(function(resolve,reject){reject("advertisement disabled");return})).catch(function(e){throw e;})};AdManager.prototype.__parseConfig=function(resolveFunc){var configObject=
window.JSON.parse(Storage.getAD_CONFIG());if(!AdManager.enableAdvertisement)configObject={};var configType="";if(configObject.hasOwnProperty("type")){configType=configObject["type"];Storage.setAD_CONFIG_TYPE(configType)}if(configObject.hasOwnProperty("blockListGameUrl")){Storage.setGAME_BLOCK(true);Storage.setAPP_BLOCK_URL(configObject["blockListGameUrl"]);Storage.setAPP_BLOCK_FORM(configObject["contactIce"]);EventManager.dispatch(EventsInternal.SDK_GAME_BLOCKED);return}this._providers=[];var dataProviders=
configObject["providers"];if(dataProviders){var dataProvidersLength=dataProviders.length;for(var i=0;i<dataProvidersLength;i++){var providerData=dataProviders[i];if(!providerData.hasOwnProperty("name")||providerData["active"]!=1)continue;var provider_1=new ad.Provider;provider_1.name=providerData["name"];provider_1.state=ad.IAdProviderState.IAD_PROVIDER_STATE_IDLE;provider_1.need=false;provider_1.params=providerData;this._providers.push(provider_1)}}this._placements=[];try{var dataPlacements=configObject["placements"];
if(dataPlacements){var dataPlacementsLength=dataPlacements.length;for(var i=0;i<dataPlacementsLength;i++){var placementData=dataPlacements[i];if(!placementData.hasOwnProperty("name"))continue;var channelsData=placementData["channels"];if(!channelsData)continue;var placement=new ad.Placement;placement.name=placementData["name"];placement.type=PlacementTypeConverter.byName(this.getObjParam(placementData,"type","interstitial"));placement.startSession=this.getObjParam(placementData,"startSession",0);
placement.startGameplayTime=this.getObjParam(placementData,"startGameplayTime",0);placement.startGameplayTimeInSession=this.getObjParam(placementData,"startGameplayTimeInSession",0);placement.showInterval=this.getObjParam(placementData,"showInterval",0);placement.startTime=this.getObjParam(placementData,"startTime","");placement.endTime=this.getObjParam(placementData,"endTime","");placement.showNumsPerDay=this.getObjParam(placementData,"showNumsPerDay",-1);placement.state=ad.IAdPlacementlState.IAD_PLACEMENT_STATE_WAIT_TIME;
placement.tm=0;var channelsArr=[];var channelsArrLength=channelsData.length;for(var j=0;j<channelsArrLength;j++){var channelData=channelsData[j];if(!channelData.hasOwnProperty("name"))continue;var channel=new ad.IAdChannel;channel.id=this._maxCahnnelID;this._maxCahnnelID+=1;channel.name=channelData["name"];channel.configProb=parseInt(this.getObjParam(channelData,"prob",0)+"");channel.loadDelay=this.getObjParam(channelData,"start_show_delay",0);channel.params=channelData;channel.params["gamePlacementChannelID"]=
channel.id;channel.params["gamePlacementName"]=placement.name;channel.params["gamePlacementType"]=placement.type;channel.state=ad.IAdChannelState.IAD_CHANNEL_STATE_IDLE;channelsArr.push(channel)}placement.channels=channelsArr;this._placements.push(placement)}}}catch(e){if(Storage.BROWSER()=="Microsoft Internet Explorer")window.console.log(e)}this.initAd();if(resolveFunc)resolveFunc()};AdManager.prototype.initAd=function(){this._numSessions=Storage.NUM_LAUNCHES();this._days=(new Date).getTime()-Storage.INSTALL_DATE();
this._days=this._days/(1E3*60*60*24);var i=0;this.updateProvidersNeed();var providersLength=this._providers.length;for(i=0;i<providersLength;i++){var provider_2=this._providers[i];if(provider_2.need&&!provider_2.obj);}this.Init()};AdManager.prototype.ProviderInit=function(provider){Logger.verbose("toProviderInit ",provider.name);var i=0;var j=0;var placements=[];var placementsLength=this._placements.length;for(i=0;i<placementsLength;i++){var placementChannels=this._placements[i].channels;var placementChannelsLength=
placementChannels.length;for(j=0;j<placementChannelsLength;j++)if(placementChannels[j].name==provider.name&&placementChannels[j].configProb>0)placements.push(placementChannels[j].params)}provider.state=ad.IAdProviderState.IAD_PROVIDER_STATE_INIT_SUCCESS;provider.obj.SetPlacements(placements);provider.obj.Init(provider.params);return true};AdManager.prototype.updateProvidersNeed=function(){var i=0;var j=0;var placementslength=this._placements.length;for(i=0;i<placementslength;i++){var placement=this._placements[i];
var placementchannelslength=placement.channels.length;for(j=0;j<placementchannelslength;j++)if(placement.channels[j].configProb>0){var provider_3=this.getProvider(placement.channels[j].name);if(provider_3&&!provider_3.need)provider_3.need=true}}};AdManager.prototype.getProvider=function(name){var i=0;var exists=this._providers.filter(function(e){return e.name==name});if(exists.length)return exists[0];return null};AdManager.prototype.getPlacement=function(name){var i=0;var exists=this._placements.filter(function(e){return e.name==
name});if(exists.length)return exists[0];return null};AdManager.prototype.Init=function(){var i=0;for(i=0;i<this._providers.length;i++){var provider_4=this._providers[i];if(provider_4.need&&provider_4.obj)this.ProviderInit(provider_4)}};AdManager.prototype.checkIsPlaysmentReady=function(placementName){var placement=this.getPlacement(placementName);return this.checkTimeForPlacement(placement)};AdManager.prototype.ShowPreGameAd=function(cbfnAdFinished){if(cbfnAdFinished===void 0)cbfnAdFinished=null;
this._adFinished=cbfnAdFinished;IceStoneStoreButtons.instance().disable();EventManager.dispatch(Events.MUTE);window["IceStone"]["isMuted"]=true;this._curAdShowed=false;Storage.setCURRENT_STATE("preroll");this.ShowAd("preroll",this.providerAdFinishedCallback.bind(this));this._curAdShowed=false};AdManager.prototype.ShowInterLevelAd=function(cbfnAdFinished){if(cbfnAdFinished===void 0)cbfnAdFinished=null;this._adFinished=cbfnAdFinished;IceStoneStoreButtons.instance().disable();EventManager.dispatch(Events.MUTE);
window["IceStone"]["isMuted"]=true;this._curAdShowed=false;Storage.setCURRENT_STATE("midroll");if(this._cordovaPlatform=="")this.ShowAd("midroll",this.providerAdFinishedCallback.bind(this));else this.ShowAd("interstitial",this.providerAdFinishedCallback.bind(this));this._curAdShowed=false};AdManager.prototype.ShowEndGameAd=function(cbfnAdFinished){if(cbfnAdFinished===void 0)cbfnAdFinished=null;this._adFinished=cbfnAdFinished;IceStoneStoreButtons.instance().disable();EventManager.dispatch(Events.MUTE);
window["IceStone"]["isMuted"]=true;this.ShowAd("video",this.providerAdFinishedCallback.bind(this))};AdManager.prototype.ShowStoreButtonsOld=function(cbfnAdFinished){if(cbfnAdFinished===void 0)cbfnAdFinished=null;this._adFinished=cbfnAdFinished;this.ShowAd("store_buttons",this.providerSBCallback.bind(this))};AdManager.prototype.ShowAbsIntersitial=function(){this.ShowAd("abs_interstitial",this.providerAbsInterCallback.bind(this))};AdManager.prototype.ShowStoreButtonsPreroll=function(cbfnAdFinished){if(cbfnAdFinished===
void 0)cbfnAdFinished=null;if(this.isPlacementExist("store_buttons"))this.ShowStoreButtonsOld(cbfnAdFinished);else{this._adFinished=cbfnAdFinished;this.ShowAd("store_buttons_preroll",this.providerSBCallback.bind(this))}};AdManager.prototype.ShowStoreButtonsMidroll=function(cbfnAdFinished){if(cbfnAdFinished===void 0)cbfnAdFinished=null;if(this.isPlacementExist("store_buttons"))this.ShowStoreButtonsOld(cbfnAdFinished);else{this._adFinished=cbfnAdFinished;this.ShowAd("store_buttons_midroll",this.providerSBCallback.bind(this))}};
AdManager.prototype.setConsent=function(consent){var i=0;for(i=0;i<this._providers.length;i++){var provider_5=this._providers[i];if(provider_5.need&&provider_5.obj)provider_5.obj.setConsent(consent)}};AdManager.prototype.updateConsent=function(cb,err){var provider=this.getProvider("admob");if(!provider){err("admob not found, can't update consent");return}provider.obj.updateConsent(cb,err)};AdManager.prototype.isPlacementExist=function(plName){var placement=this.getPlacement(plName);if(!placement)return false;
return true};AdManager.prototype.isPlacementInteractive=function(plName){if(plName=="logo_url")return false;var placement=this.getPlacement(plName);if(!placement)return false;this.updateChannelAvailabilities(placement);var channel=this.selectChannelForShowAd(placement);if(!channel)return false;return true};AdManager.prototype.providerLogoCallback=function(adError){};AdManager.prototype.providerAbsInterCallback=function(adError){if(this._adFinished!=null)this._adFinished();Storage.setCURRENT_STATE("game");
EventManager.dispatch(EventsInternal.SHOW_PRELOADER);EventManager.dispatch(Events.UNMUTE);window["IceStone"]["isMuted"]=false;ad.Ad.uiResultHandlerST(ad.AdUIStates.S3E_HTML5_ADS_HIDE_CONTAINERS);Logger.verbose("[AdManager] -> dispatched unmute evenet");this._adFinished=null;IceStoneStoreButtons.instance().enable()};AdManager.prototype.providerSBCallback=function(adError){if(this._adFinished!=null)this._adFinished()};AdManager.prototype.checkIfAdblock=function(){var _this=this;this._adBlockEnabled=
false;var testAd=document.createElement("div");testAd.innerHTML="&nbsp;";testAd.className="adsbox";if(document.body){document.body.appendChild(testAd);setTimeout(function(){if(testAd.offsetHeight===0||testAd==null||testAd.style.display=="none"||testAd.style.display=="hidden"||testAd.style.visibility=="hidden")_this._adBlockEnabled=true;document.body.removeChild(testAd)},200)}};AdManager.prototype.providerAdFinishedCallback=function(adError){Logger.verbose("AdManager.providerAdFinishedCallback () adErrorCode "+
adError);switch(adError){case AdErrorCode.AD_ERROR_NOT_FOUND:case AdErrorCode.AD_ERROR_INIT_FAILED:case AdErrorCode.AD_ERROR_UNKNOWN:if(this._curAd&&this._curAd.GetName()==Constants.STREAMRAIL||this._generalTimout==-1&&this.isCanShowNextAd()||this._generalTimout>=0&&this.isCanShowNextGeneralAd())if(this._preselectChannels.length>1){var loopFinish=false;if(this._currPreselectIndex>=this._preselectChannels.length){this._currPreselectIndex=0;this._startPreselectIndex=-1;loopFinish=true}if(this._currPreselectIndex==
this._startPreselectIndex)this._currPreselectIndex+=1;if(this._currPreselectIndex>=this._preselectChannels.length){this._currPreselectIndex=0;this._startPreselectIndex=-1;loopFinish=true}if(loopFinish)this._numLoops++;if((!loopFinish&&this._generalTimout==-1||this._generalTimout>=0)&&this._numCalls<100&&this._numLoops<3){var channel=this._preselectChannels[this._currPreselectIndex];this._currPreselectIndex+=1;var provider_6=this.getProvider(channel.name);if(!provider_6||!provider_6.obj){Logger.verbose("ReshowAd provider with name ",
channel.name," is not found (AD_ERROR_NOT_FOUND)");this.providerAdFinishedCallback(AdErrorCode.AD_ERROR_NOT_FOUND);return}var providerName=channel.name;Logger.verbose("ReshowAd provider: ",providerName,", channel: ",channel.id);this._curAd=provider_6.obj;this.updateAdStartTime();this.updateAdTime();this._numCalls+=1;this._curAd.ShowAd(channel.params,this.providerAdFinishedCallback.bind(this));EventManager.dispatch(EventsInternal.HIDE_PRELOADER);return}else Logger.verbose("loop is finished and there is no general timout")}else Logger.verbose("No ads to reshow!");
break}this._numCalls=0;this._numLoops=0;if(adError!=AdErrorCode.AD_ERROR_NONE&&adError!=AdErrorCode.AD_ERROR_SKIP&&adError!=AdErrorCode.AD_ERROR_USER_CANCELED&&adError!=AdErrorCode.AD_ERROR_NOT_READY){this.ShowAbsIntersitial();return}if(this._adFinished!=null)this._adFinished();Storage.setCURRENT_STATE("game");EventManager.dispatch(EventsInternal.SHOW_PRELOADER);EventManager.dispatch(Events.UNMUTE);window["IceStone"]["isMuted"]=false;ad.Ad.uiResultHandlerST(ad.AdUIStates.S3E_HTML5_ADS_HIDE_CONTAINERS);
Logger.verbose("[AdManager] -> dispatched unmute evenet");this._adFinished=null;IceStoneStoreButtons.instance().enable()};AdManager.prototype.isCanShowNextGeneralAd=function(){if(!this._lastGeneralUpdate)this.updateAdStartGeneralTime();var timeNow=Math.floor(Date.now()/1E3);var timeDiff=timeNow-this._lastGeneralUpdate;if(timeDiff>this._generalTimout){Logger.verbose("[AdManager] isCanShowNextGeneralAd ->The wait was too long! Finishing Ads. Time passed : "+timeDiff);return false}Logger.verbose("[AdManager] isCanShowNextGeneralAd -> the time since last ad request less then waiting interval, so next ad can be shown. Time passed : "+
timeDiff);return true};AdManager.prototype.isCanShowNextAd=function(){if(!this._lastUpdate)this.updateAdStartTime();var timeNow=Math.floor(Date.now()/1E3);var timeDiff=timeNow-this._lastUpdate;if(timeDiff>2){Logger.verbose("[AdManager] ->The wait was too long! Finishing Ads. Time passed : "+timeDiff);return false}Logger.verbose("[AdManager] -> the time since last ad request less then waiting interval, so next ad can be shown. Time passed : "+timeDiff);return true};AdManager.prototype.updateAdTime=
function(){if(!this._adProviderShowTime)if(!Date.now)Date.now=function(){return(new Date).getTime()};var timeNow=Math.floor(Date.now()/1E3);this._adProviderShowTime=timeNow};AdManager.prototype.getUpdateAdTime=function(){if(!this._adProviderShowTime)if(!Date.now)Date.now=function(){return(new Date).getTime()};var timeNow=Math.floor(Date.now()/1E3);return timeNow-this._adProviderShowTime};AdManager.prototype.updateAdGeneralTime=function(){if(!this._adProvidersShowTime)if(!Date.now)Date.now=function(){return(new Date).getTime()};
var timeNow=Math.floor(Date.now()/1E3);this._adProvidersShowTime=timeNow};AdManager.prototype.getUpdateAdGeneralTime=function(){if(!this._adProvidersShowTime)if(!Date.now)Date.now=function(){return(new Date).getTime()};var timeNow=Math.floor(Date.now()/1E3);return timeNow-this._adProvidersShowTime};AdManager.prototype.updateAdStartTime=function(){if(!this._lastUpdate)if(!Date.now)Date.now=function(){return(new Date).getTime()};var timeNow=Math.floor(Date.now()/1E3);this._lastUpdate=timeNow};AdManager.prototype.updateAdStartGeneralTime=
function(){if(!this._lastGeneralUpdate)if(!Date.now)Date.now=function(){return(new Date).getTime()};var timeNow=Math.floor(Date.now()/1E3);this._lastGeneralUpdate=timeNow};AdManager.prototype.preSelectChannelsForShowAd=function(placement,curChannel){var i=0;var j=0;var placementchannelslength=placement.channels.length;for(i=0;i<placementchannelslength;i++)if(placement.channels[i].curProb>0&&this._preselectChannels.indexOf(placement.channels[i])==-1){var foundPl=false;var curProb=placement.channels[i].curProb;
var preselectchannelslength=this._preselectChannels.length;for(j=0;j<preselectchannelslength;j++)if(this._preselectChannels[j].curProb<curProb){this._preselectChannels.splice(j,0,placement.channels[i]);foundPl=true;break}if(!foundPl)this._preselectChannels.push(placement.channels[i])}this._currPreselectIndex=0;this._startPreselectIndex=this._preselectChannels.indexOf(curChannel)};AdManager.prototype.KillPreGameAd=function(){if(this._curAd)this._curAd.KillAd()};AdManager.prototype.KillInterLevelAd=
function(){if(this._curAd)this._curAd.KillAd()};AdManager.prototype.KillEndGameAd=function(){if(this._curAd)this._curAd.KillAd()};AdManager.prototype.GetNameInterLevelAD=function(){if(this._curAd==null)return"";return this._curAd.GetName()};AdManager.prototype.updateChannelAvailabilities=function(placement){Logger.verbose("updateChannelAvailabilities for placement ",placement.name);var probSum=0;var loaded=false;var i=0;var placementchannelslength=placement.channels.length;if(this._adBlockEnabled)for(i=
0;i<placementchannelslength;i++)if(placement.channels[i].name!="Absolutist")placement.channels[i].configProb=0;for(i=0;i<placementchannelslength;i++){placement.channels[i].curProb=placement.channels[i].configProb;if(placement.channels[i].curProb>0){probSum+=placement.channels[i].curProb;loaded=true}}if(loaded){var koef=100/probSum;probSum=0;var channelWithSignificantProb=0;var significantProb=0;var placementchannelslength_1=placement.channels.length;for(i=0;i<placementchannelslength_1;i++)if(placement.channels[i].curProb>
0){placement.channels[i].curProb=koef*placement.channels[i].curProb;probSum+=placement.channels[i].curProb;if(placement.channels[i].curProb>significantProb){significantProb=placement.channels[i].curProb;channelWithSignificantProb=i}}placement.channels[channelWithSignificantProb].curProb+=100-probSum}placementchannelslength=placement.channels.length;for(i=0;i<placementchannelslength;i++)Logger.verbose("updateChannelAvailabilities channel: ",placement.channels[i].name," prob: ",placement.channels[i].curProb,
" (conf prob:",placement.channels[i].configProb,")")};AdManager.prototype.selectChannelForShowAd=function(placement){var random_value=Math.random()*100;var prob_min=0;var i=0;var placementchannelslength=placement.channels.length;for(i=0;i<placementchannelslength;i++){if(random_value>=prob_min&&random_value<prob_min+placement.channels[i].curProb){Logger.verbose("selectChannelForShowAd random: ",random_value,", channel: ",placement.channels[i].name,", prob: ",placement.channels[i].curProb," (conf prob:",
placement.channels[i].configProb,")");return placement.channels[i]}prob_min+=placement.channels[i].curProb}return null};AdManager.prototype.ShowAd=function(placementName,cbfnAdFinished){if(cbfnAdFinished===void 0)cbfnAdFinished=null;Logger.verbose("ShowAd for placement ",placementName);this.updateLoading();var placement=this.getPlacement(placementName);if(!placement){Logger.verbose("ShowAd placement",placementName,"is not found (AD_ERROR_NOT_FOUND)");if(cbfnAdFinished!=null)cbfnAdFinished(AdErrorCode.AD_ERROR_PLACEMENT_NOT_FOUND);
return false}if(placement.state!=ad.IAdPlacementlState.IAD_PLACEMENT_STATE_SHOW){Logger.verbose("ShowAd placement",placementName,"is not ready to show ad (AD_ERROR_NOT_READY)");if(cbfnAdFinished!=null)cbfnAdFinished(AdErrorCode.AD_ERROR_NOT_READY);return false}if(this._adBlockEnabled)this._curAdShowed=true;this.updateChannelAvailabilities(placement);var channel=this.selectChannelForShowAd(placement);if(!channel){Logger.verbose("ShowAd select channel for placement ",placementName," error (AD_ERROR_NOT_FOUND)");
if(cbfnAdFinished!=null)cbfnAdFinished(AdErrorCode.AD_ERROR_PLACEMENT_NOT_FOUND);return false}var provider=this.getProvider(channel.name);if(!provider||!provider.obj){Logger.verbose("ShowAd provider with name ",channel.name," is not found (AD_ERROR_NOT_FOUND)");if(cbfnAdFinished!=null)cbfnAdFinished(AdErrorCode.AD_ERROR_NOT_FOUND);return false}this._preselectChannels=[];this._preselectChannels.push(channel);this.preSelectChannelsForShowAd(placement,channel);var placementNameLocal=placement.name;var providerName=
channel.name;Logger.verbose("ShowAd placement: ",placementNameLocal,", provider: ",providerName,", channel: ",channel.id);this.updateAdTime();this.updateAdGeneralTime();this.updateAdStartTime();if(this._generalTimout>=0)this.updateAdStartGeneralTime();this._curAd=provider.obj;if(placement.type==ad.PlacementType.PLACEMENT_TYPE_INTERSTITIAL||placement.type==ad.PlacementType.PLACEMENT_TYPE_REWARDED_VIDEO||placement.type==ad.PlacementType.PLACEMENT_TYPE_MORE_APPS)ad.Ad.uiResultHandlerST(ad.AdUIStates.S3E_HTML5_ADS_SHOW_CONTAINERS);
this._curAd.ShowAd(channel.params,cbfnAdFinished);this._curAdShowed=true;EventManager.dispatch(EventsInternal.HIDE_PRELOADER);this.saveLastShowParams(placementNameLocal);placement.state=ad.IAdPlacementlState.IAD_PLACEMENT_STATE_WAIT_TIME;return true};AdManager.prototype.saveLastShowParams=function(placementName){var keyLastShowTime="ad_"+placementName+"_lastShowTime";var keyLastShowDay="ad_"+placementName+"_lastShowDay";var keyShowNumsPerDay="ad_"+placementName+"_showNumsPerDay";var curDay=(new Date).getTime();
curDay=Math.round(curDay/(1E3*60*60*24));var showNumsPerDay=this.readShowNumsPerDay(placementName);showNumsPerDay++;var lastShowTime=Math.round(Storage.SESSION_PLAY_TIME()/1E3);Storage.setCustomParamI(keyLastShowDay,curDay);Storage.setCustomParamI(keyShowNumsPerDay,showNumsPerDay);Storage.setCustomParamI(keyLastShowTime,lastShowTime)};AdManager.prototype.readShowNumsPerDay=function(placementName){var keyShowNumsPerDay="ad_"+placementName+"_showNumsPerDay";var keyLastShowDay="ad_"+placementName+"_lastShowDay";
var curDay=(new Date).getTime();curDay=Math.round(curDay/(1E3*60*60*24));var lastShowDay=Storage.getCustomParamI(keyLastShowDay,0);if(lastShowDay!=curDay)return 0;else{var showNumsPerDay=Storage.getCustomParamI(keyShowNumsPerDay,0);return showNumsPerDay}};AdManager.prototype.updateLoading=function(){var i=0;var placementslength=this._placements.length;for(i=0;i<placementslength;i++){var placement=this._placements[i];if(placement.state==ad.IAdPlacementlState.IAD_PLACEMENT_STATE_WAIT_TIME)if(this.checkTimeForPlacement(placement))placement.state=
ad.IAdPlacementlState.IAD_PLACEMENT_STATE_SHOW}};AdManager.prototype.checkTimeForPlacement=function(placement){if(this._numSessions<placement.startSession){placement.state=ad.IAdPlacementlState.IAD_PLACEMENT_STATE_NOT_SHOW;return false}if(!(this.checkTimeForPlacementGameplayTime(placement)&&this.checkTimeForPlacementGameplayTimeInSession(placement)&&this.checkTimeForPlacementShowInterval(placement)&&this.checkTimeForPlacementStartTime(placement)&&this.checkTimeForPlacementEndTime(placement)&&this.checkTimeForPlacementShowNumsPerDay(placement)))return false;
Logger.verbose("checkTimeForPlacement placement: ",placement.name," success");return true};AdManager.prototype.checkTimeForPlacementGameplayTime=function(placement){var gameplayTime=Math.round(Storage.INSTALL_PLAY_TIME()/1E3);if(gameplayTime>=placement.startGameplayTime){Logger.verbose("checkTimeForPlacementGameplayTime placement: ",placement.name," gameplayTime >= startGameplayTime (",gameplayTime," >= ",placement.startGameplayTime,")");return true}Logger.verbose("checkTimeForPlacementGameplayTime placement: ",
placement.name,"is not ready: gameplayTime >= startGameplayTime (",gameplayTime," < ",placement.startGameplayTime,")");return false};AdManager.prototype.checkTimeForPlacementGameplayTimeInSession=function(placement){var gameplayTime=Math.round(Storage.SESSION_PLAY_TIME()/1E3);if(gameplayTime>=placement.startGameplayTimeInSession){Logger.verbose("checkTimeForPlacementGameplayTimeInSession placement: ",placement.name," gameplayTime >= startGameplayTime (",gameplayTime," >= ",placement.startGameplayTimeInSession,
")");return true}Logger.verbose("checkTimeForPlacementGameplayTimeInSession placement: ",placement.name,"is not ready: gameplayTime >= startGameplayTime (",gameplayTime," < ",placement.startGameplayTimeInSession,")");return false};AdManager.prototype.checkTimeForPlacementShowInterval=function(placement){if(placement.showInterval==0){Logger.verbose("checkTimeForPlacementShowInterval placement: ",placement.name," placement->showInterval == 0");return true}var keyLastShowTime="ad_"+placement.name+"_lastShowTime";
var lastShowTime=Storage.getCustomParamI(keyLastShowTime,0);if(lastShowTime==0){Logger.verbose("checkTimeForPlacementShowInterval placement: ",placement.name," lastShowTime == 0");return true}var gameplayTime=Math.round(Storage.SESSION_PLAY_TIME()/1E3);var tmFromLastShow=gameplayTime-lastShowTime;if(tmFromLastShow<0){Logger.verbose("checkTimeForPlacementShowInterval placement: ",placement.name," tmFromLastShow < 0");return true}if(tmFromLastShow>=placement.showInterval){Logger.verbose("checkTimeForPlacementShowInterval placement: ",
placement.name," tmFromLastShow >= placement->showInterval (",tmFromLastShow," >= ",placement.showInterval,")");return true}Logger.verbose("checkTimeForPlacementShowInterval placement: ",placement.name,"is not ready: tmFromLastShow >= placement->showInterval (",tmFromLastShow," < ",placement.showInterval,")");return false};AdManager.prototype.checkTimeForPlacementStartTime=function(placement){if(placement.startTime.length==0){Logger.verbose("checkTimeForPlacementStartTime placement: ",placement.name,
" placement->startTime.length() == 0");return true}var placementStartTime=(new Date(placement.startTime)).getTime();var curDate=new Date;var curTime=curDate.getTime();if(curTime>=placementStartTime){Logger.verbose("checkTimeForPlacementStartTime placement: ",placement.name," curTime >= placement->startTime (",curDate.toString()," >= ",placement.startTime,")");return true}Logger.verbose("checkTimeForPlacementStartTime placement: ",placement.name," is not ready: curTime < placement->startTime (",curDate.toString(),
" < ",placement.startTime,")");return false};AdManager.prototype.checkTimeForPlacementEndTime=function(placement){if(placement.endTime.length==0){Logger.verbose("checkTimeForPlacementEndTime placement: ",placement.name," placement->startTime.length() == 0");return true}var placementEndTime=(new Date(placement.endTime)).getTime();var curDate=new Date;var curTime=curDate.getTime();if(curTime<=placementEndTime){Logger.verbose("checkTimeForPlacementEndTime placement: ",placement.name," curTime <= placement->startTime (",
curDate.toString()," <= ",placement.endTime,")");return true}Logger.verbose("checkTimeForPlacementEndTime placement: ",placement.name,"is not ready: curTime > placement->startTime (",curDate.toString()," > ",placement.endTime,")");return false};AdManager.prototype.checkTimeForPlacementShowNumsPerDay=function(placement){if(placement.showNumsPerDay==-1){Logger.verbose("checkTimeForPlacementShowNumsPerDay placement: ",placement.name," placement->showNumsPerDay == -1");return true}var showNumsPerDay=
this.readShowNumsPerDay(placement.name);if(showNumsPerDay<placement.showNumsPerDay){Logger.verbose("checkTimeForPlacementShowNumsPerDay placement: ",placement.name," showNumsPerDay < placement->showNumsPerDay (",showNumsPerDay," < ",placement.showNumsPerDay,")");return true}Logger.verbose("checkTimeForPlacementShowNumsPerDay placement: ",placement.name," is not ready: showNumsPerDay >= placement->showNumsPerDay (",showNumsPerDay," >= ",placement.showNumsPerDay,")");return false};AdManager.prototype.getObjParam=
function(obj,name,defValue){var returnValue=defValue;if(obj.hasOwnProperty(name))returnValue=obj[name];return returnValue};AdManager.enableAdvertisement=true;return AdManager}();ad.AdManager=AdManager})(ad=__.ad||(__.ad={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var system;(function(system){var UI=IceStone.__.ui.UI;var UICommands=function(){function UICommands(){}UICommands.OPEN_MORE_GAMES="0";UICommands.OPEN_STORE_BUTTONS="1";UICommands.OPEN_LEADERBOARDS="2";return UICommands}();system.UICommands=UICommands;var System=function(){function System(){}System.openURL=function(){System.currentOpenURL=document.location.href;var varString="";var urlArray=System.currentOpenURL.split("?");if(urlArray.length==2){varString=urlArray[1];
System.decode(varString);System.doAction(System.URLVariables["ui"])}};System.doAction=function(ui){switch(ui){case UICommands.OPEN_MORE_GAMES:if(UI.isElementAvailable()&&UI.isElementInteractive())UI.openElement();break;case UICommands.OPEN_STORE_BUTTONS:break;case UICommands.OPEN_LEADERBOARDS:if(__.staticProvider!=null)__.staticProvider.showLeaderboardsAsync();break;default:break}};System.decode=function(source){var param=null;var equalsIndex=0;var name=null;var value=null;var oldValue=undefined;
var params=source.split("&");System.URLVariables={};for(var i=0;i<params.length;i++){param=params[i];equalsIndex=param.indexOf("=");if(equalsIndex==-1);else{name=decodeURI(param.substr(0,equalsIndex));value=decodeURI(param.substr(equalsIndex+1));oldValue=System.URLVariables[name];if(oldValue!=undefined){if(!(oldValue instanceof Array))System.URLVariables[name]=oldValue=[oldValue];oldValue.push(value)}else System.URLVariables[name]=value}}};System.URLVariables={};return System}();system.System=System})(system=
__.system||(__.system={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var game;(function(game){var EventManager=IceStone.__.events.EventManager;var Events=IceStone.__.events.Events;var EventsInternal=IceStone.__.events.EventsInternal;var Storage=IceStone.__.system.Storage;var ProviderManager=IceStone.__.provider.ProviderManager;var Logger=IceStone.__.system.Logger;var SDKUpdater=IceStone.__.system.SDKUpdater;var System=IceStone.__.system.System;var Stage=IceStone.__.display.Stage;var States=function(){function States(){}States.LOAD=
"load";States.IDLE="idle";States.PLAY="play";States.PAUSE="pause";return States}();game.States=States;States["LOAD"]=States.LOAD;States["IDLE"]=States.IDLE;States["PLAY"]=States.PLAY;States["PAUSE"]=States.PAUSE;function beforeStartGameAsync(){var tempRsolve=null;return(new Promise(function(resolve,reject){tempRsolve=resolve;if(!__.adManager){reject();return}__.adManager.ShowPreGameAd(function(){resolve()})})).catch(function(e){if(tempRsolve)tempRsolve();else throw e;})}game.beforeStartGameAsync=
beforeStartGameAsync;function afterStartGame(){var root=Stage.getRoot();if(root!=void 0){root.style.visibility=="hidden";root.style.visibility=="visible"}if(!__.adManager)return;__.adManager.ShowStoreButtonsPreroll(function(){System.openURL()})}game.afterStartGame=afterStartGame;var state="not_initialized";var setState=function(value){state=value;EventManager.dispatch(EventsInternal.GAME_STATE_CHANGED)};var events=function(){EventManager.on(EventsInternal.SDK_INITED,function(){setState(States.LOAD)});
EventManager.on(EventsInternal.SDK_GAME_STARTED,function(){setState(States.IDLE)});EventManager.on(Events.PAUSE,function(){setState(States.PAUSE)});EventManager.on(Events.RESUME,function(){setState(States.PLAY)})}();var Game=function(){function Game(){}Game.start=function(){if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["game"]["start"]();return}if(!ProviderManager.provider)return;ProviderManager.provider.start();setState(States.PLAY)};Game.startAsync=function(){return(new Promise(function(resolve,
reject){if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["game"]["startAsync"]().then(function(){resolve()}).catch(function(){reject()});return}if(!ProviderManager.provider){reject();return}ProviderManager.provider.startAsync().then(function(){setState(States.PLAY);resolve()}).catch(reject)})).catch(function(e){throw e;})};Object.defineProperty(Game,"pauseIsExpected",{get:function(){if(SDKUpdater.icestoneLast)return SDKUpdater.icestoneLast["game"]["pauseIsExpected"];if(ProviderManager.provider.wouldShowLeaderboards())return true;
if(__.adManager&&__.adManager.checkIsPlaysmentReady("midroll"))return true;return false},enumerable:false,configurable:true});Game.endAsync=function(result,score,level){if(score===void 0)score=0;if(level===void 0)level=-1;return(new Promise(function(resolve,reject){if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["game"]["endAsync"](result,score,level).then(function(){resolve()}).catch(function(){reject()});return}if(!ProviderManager.provider){reject();return}if(score>=0)Storage.setINSTALL_SCORE(score);
if(level>=0)if(!Storage.getINSTALL_LEVEL_AUTO_INCREMENT())Storage.setINSTALL_LEVEL(level);else Logger.error("you can't send levels if your game doesn't have levels!");else Storage.setINSTALL_LEVEL_AUTO_INCREMENT(true);if(Storage.getINSTALL_LEVEL_AUTO_INCREMENT())Storage.setINSTALL_LEVEL(Storage.getINSTALL_LEVEL()+1);ProviderManager.provider.endAsync(result).then(function(){setState(States.IDLE);__.adManager.ShowInterLevelAd(function(){__.adManager.ShowStoreButtonsMidroll();resolve()})}).catch(reject)})).catch(function(e){throw e;
})};Game.abandon=function(score,level){if(score===void 0)score=0;if(level===void 0)level=-1;if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["game"]["abandon"](score,level);return}if(!ProviderManager.provider)return;if(score>=0)Storage.setINSTALL_SCORE(score);if(level>=0)if(!Storage.getINSTALL_LEVEL_AUTO_INCREMENT())Storage.setINSTALL_LEVEL(level);else Logger.error("you can't send levels if your game doesn't have levels!");else Storage.setINSTALL_LEVEL_AUTO_INCREMENT(true);if(Storage.getINSTALL_LEVEL_AUTO_INCREMENT())Storage.setINSTALL_LEVEL(Storage.getINSTALL_LEVEL()+
1);ProviderManager.provider.endAsync("abandon");setState(States.IDLE)};Game.pause=function(){if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["game"]["pause"]();return}setState(States.PAUSE)};Game.resume=function(){if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["game"]["resume"]();return}setState(States.PLAY)};Game.getState=function(){if(SDKUpdater.icestoneLast)return SDKUpdater.icestoneLast["game"]["getState"]();return state};return Game}();game.Game=Game;Game["start"]=Game.start;Game["endAsync"]=
Game.endAsync;Game["pause"]=Game.pause;Game["resume"]=Game.resume;Game["getState"]=Game.getState;Game["abandon"]=Game.abandon;Game["startAsync"]=Game.startAsync})(game=__.game||(__.game={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var user;(function(user){var Storage=IceStone.__.system.Storage;var SDKUpdater=IceStone.__.system.SDKUpdater;var User=function(){function User(){}User.getID=function(){if(SDKUpdater.icestoneLast)return SDKUpdater.icestoneLast["user"]["getID"]();return Storage.getUSER_ID()};User.getName=function(){if(SDKUpdater.icestoneLast)return SDKUpdater.icestoneLast["user"]["getName"]();return Storage.getUSER_NAME()};User.getPhoto=function(){if(SDKUpdater.icestoneLast)return SDKUpdater.icestoneLast["user"]["getPhoto"]();
return Storage.getUSER_PHOTO()};User.getData=function(){if(SDKUpdater.icestoneLast)return SDKUpdater.icestoneLast["user"]["getData"]();return Storage.getUSER_DATA()};User.setData=function(data){if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["user"]["setData"](data);return}Storage.setUSER_DATA(data)};return User}();user.User=User;User["getID"]=User.getID;User["getName"]=User.getName;User["getPhoto"]=User.getPhoto;User["getData"]=User.getData;User["setData"]=User.setData})(user=__.user||(__.user=
{}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var system;(function(system){var Utils=IceStone.__.system.Utils;var AUTO_FLUSH_INTERVAL=3*1E3;var POINTER="IceStone.__.system.StorageCommon._data";var INSTALL_VALUES=defaultInstallValues();var SESSION_VALUES=defaultSessionValues();function defaultInstallValues(){return{PLAY_TIME:0}}function defaultSessionValues(){return{}}var StorageCommon=function(){function StorageCommon(){}StorageCommon.UID=function(){var tmp_uid=StorageCommon.__get("user.uid","");if(tmp_uid==
""){tmp_uid=Utils.uidGenerator(null);tmp_uid+=(new Date).getTime();StorageCommon.__set("user.uid",tmp_uid)}return tmp_uid};StorageCommon.initializeAsync=function(){return new Promise(function(resolve,reject){system.Logger.verbose('StorageCommon.initializeAsync ("IceStone.Common")');StorageCommon._userId="default";StorageCommon._dataBase=new IDBStorageCommon("IceStone.Common");StorageCommon._dataBase.connectAsync().then(function(){StorageCommon.__listenEvents();StorageCommon.__loadData("");StorageCommon.__readStartValues();
resolve()}).catch(reject)})};StorageCommon.getQueryParams=function(qs){var paramsReturn={};if(qs.length<=1)return paramsReturn;else qs=qs.slice(1);var param=null;var equalsIndex=0;var name=null;var value=null;var params=qs.split("&");for(var i=0;i<params.length;i++){param=params[i];equalsIndex=param.indexOf("=");if(equalsIndex==-1);else{name=decodeURI(param.substr(0,equalsIndex));value=decodeURI(param.substr(equalsIndex+1));paramsReturn[name]=value}}return paramsReturn};StorageCommon.__loadData=function(providerData){try{var data=
typeof providerData==="string"&&providerData.length>0?providerData:StorageCommon._dataBase.getItem(StorageCommon._userId);if(typeof data==="string"&&data.length>0)StorageCommon._data=JSON.parse(data)}catch(e){system.Logger.error(e)}StorageCommon._data=StorageCommon._data||{}};StorageCommon.__readStartValues=function(){var numLaunches=StorageCommon.__getI("stats.numLaunches");if(numLaunches>0)numLaunches++;else numLaunches=1;StorageCommon.__set("stats.numLaunches",numLaunches)};StorageCommon.__listenEvents=
function(){window.onblur=function(){StorageCommon.__softFlush()};window.onbeforeunload=function(){StorageCommon.__flush();return undefined}};StorageCommon.__set=function(key,value,doSoftFlush){if(doSoftFlush===void 0)doSoftFlush=true;if(!StorageCommon.__resolve(key,true))return;StorageCommon.__setValueForKey(key,value);if(doSoftFlush)StorageCommon.__softFlush()};StorageCommon.__get=function(key,def){if(!StorageCommon.__resolve(key))return def;return StorageCommon.__getValueFromKey(key)||def};StorageCommon.__getI=
function(key,def){var bigInt=parseInt(StorageCommon.__get(key),10);return isNaN(bigInt)?def||0:bigInt};StorageCommon.__getN=function(key,def){return+(StorageCommon.__get(key)||def)};StorageCommon.__getB=function(key,def){return Boolean(StorageCommon.__get(key)||def)};StorageCommon.__resolve=function(key,create){if(create===void 0)create=false;if(key==void 0||typeof key!=="string")return false;try{var temp=key.split(".");var pointer="";while(temp.length>0){if(pointer!="")pointer+=".";pointer+="".concat(temp.shift());
var absolute=StorageCommon.__getValueFromKey(pointer);if(absolute==void 0)absolute=absolute[temp.shift()]}return true}catch(e){if(create){var temp=key.split(".");var pointer="";while(temp.length>1){if(pointer!="")pointer+=".";pointer+="".concat(temp.shift());var absolute=StorageCommon.__getValueFromKey(pointer);if(absolute==void 0)StorageCommon.__setValueForKey(pointer,{})}return true}}return false};StorageCommon.__getValueFromKey=function(key){var temp=key.split(".");var pointer="";var absolute=
StorageCommon._data;if(absolute==void 0)return absolute;while(temp.length>0){pointer="".concat(temp.shift());absolute=absolute[pointer]}return absolute};StorageCommon.__setValueForKey=function(key,value){var temp=key.split(".");var pointer="";var absolute=StorageCommon._data;while(temp.length>1){pointer="".concat(temp.shift());absolute=absolute[pointer]}absolute[temp.shift()]=value};StorageCommon.__softFlush=function(){if(!StorageCommon._userId)return;if(StorageCommon._softFlushTimeout>0){StorageCommon._softFlushNext=
true;return}StorageCommon._softFlushNext=false;StorageCommon._softFlushTimeout=setTimeout(function(){StorageCommon._softFlushTimeout=0;if(StorageCommon._softFlushNext)StorageCommon.__softFlush()},AUTO_FLUSH_INTERVAL);StorageCommon.__flush()};StorageCommon.__flush=function(){if(!StorageCommon._userId)return;try{var dataStr=JSON.stringify(StorageCommon._data);StorageCommon._dataBase.setItem(StorageCommon._userId,dataStr)}catch(e){system.Logger.error(e)}};StorageCommon.getUserDataString=function(){try{var dataStr=
JSON.stringify(StorageCommon._data);return dataStr}catch(e){system.Logger.error(e);return"{}"}};StorageCommon._data={};StorageCommon._softFlushNext=false;StorageCommon._softFlushTimeout=0;return StorageCommon}();system.StorageCommon=StorageCommon;var IDBStorageCommon=function(){function IDBStorageCommon(appId){this._object={};this._storeName="users";this._baseName="IceStoneSDK";this._indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.shimIndexedDB;
this._updateBug=(navigator.userAgent||"").indexOf("Edge")>=0;this._fallback=typeof this._indexedDB!=="object";this._baseName+="/".concat(__.staticProvider.name,"/").concat(appId)}IDBStorageCommon.prototype.connectAsync=function(){var _this=this;return new Promise(function(resolve,reject){if(_this._fallback)resolve();_this.__connectDB(function(db){_this.__getStorageCommon(db,function(rows){(rows||[]).forEach(function(o){return _this._object[o.key]=o.value});resolve()})},function(){_this._fallback=
true;resolve()})})};IDBStorageCommon.prototype.getItem=function(key){if(key==null)return null;key=key+"";return this._object[key]};IDBStorageCommon.prototype.setItem=function(key,value){var _this=this;if(key==null)throw"indexedDB StorageCommon Error: at least one argument required";key=key+"";value=value+"";if(this._object[key]===value)return;this._object[key]=value;if(this._fallback)return;this.__connectDB(function(db){if(_this._updateBug){db.transaction([_this._storeName],"readwrite").objectStore(_this._storeName).clear(key).onsuccess=
function(){Object.keys(_this._object).forEach(function(key){db.transaction([_this._storeName],"readwrite").objectStore(_this._storeName).put({key:key,value:_this._object[key]})})};return}db.transaction([_this._storeName],"readwrite").objectStore(_this._storeName).put({key:key,value:value})})};IDBStorageCommon.prototype.removeItem=function(key){var _this=this;if(!key)throw"indexedDB StorageCommon Error: at least one argument required";key=key+"";delete this._object[key];this.__connectDB(function(db){db.transaction([_this._storeName],
"readwrite").objectStore(_this._storeName).delete(key)})};IDBStorageCommon.prototype.__connectDB=function(complete,error){var _this=this;try{var skipOne_2;var request_2=indexedDB.open(this._baseName,1);request_2.onsuccess=function(){if(skipOne_2){skipOne_2=false;return}complete(request_2.result)};request_2.onerror=function(ev){if(error)error()};request_2.onupgradeneeded=function(ev){skipOne_2=true;ev.currentTarget.result.createObjectStore(_this._storeName,{keyPath:"key"});_this.__connectDB(complete,
error)}}catch(e){if(error)error()}};IDBStorageCommon.prototype.__getStorageCommon=function(db,handler){var rows=[];var store=db.transaction([this._storeName],"readonly").objectStore(this._storeName);store.openCursor().onsuccess=function(ev){var cursor=ev.target.result;if(cursor){rows.push(cursor.value);cursor.continue()}else handler(rows)}};return IDBStorageCommon}();function getHostName(url){if(typeof url!=="string")return null;if(url.indexOf("file:")===0)return"localhost";var match=url.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);
if(match!=null&&match.length>2&&typeof match[2]==="string"&&match[2].length>0)return match[2];return null}function getDomain(url){if(typeof url!=="string")return null;if(url.indexOf("file:")===0)return"localhost";var hostName=getHostName(url);var domain=hostName;if(hostName!=null){var parts=hostName.split(".").reverse();if(parts!=null&&parts.length>1){domain=parts[1]+"."+parts[0];if(hostName.toLowerCase().indexOf(".co.uk")!=-1&&parts.length>2)domain=parts[2]+"."+domain}}return domain}})(system=__.system||
(__.system={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var ui;(function(ui){var Assets=IceStone.__.system.Assets;var Stage=IceStone.__.display.Stage;var EventManager=IceStone.__.events.EventManager;var EventsInternal=IceStone.__.events.EventsInternal;var Storage=IceStone.__.system.Storage;var SDKUpdater=IceStone.__.system.SDKUpdater;var StorageCommon=IceStone.__.system.StorageCommon;var IceStoneLoader=function(){function IceStoneLoader(){}IceStoneLoader.showPlayBtn=function(id){var play_btn="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABQAAD/4QMpaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MCA2MS4xMzQ3NzcsIDIwMTAvMDIvMTItMTc6MzI6MDAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI0RjM2QzlERUQ0RjExRUE5MUJCODVCMzdBNDFFNjQ5IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI0RjM2QzlDRUQ0RjExRUE5MUJCODVCMzdBNDFFNjQ5IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjREMjQ4NURBRUQxMDExRUE4RDE0QURGN0RERTczNzBEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjREMjQ4NURCRUQxMDExRUE4RDE0QURGN0RERTczNzBEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4AJkFkb2JlAGTAAAAAAQMAFQQDBgoNAAAUQgAAHQwAACo1AAA5lv/bAIQAAgICAgICAgICAgMCAgIDBAMCAgMEBQQEBAQEBQYFBQUFBQUGBgcHCAcHBgkJCgoJCQwMDAwMDAwMDAwMDAwMDAEDAwMFBAUJBgYJDQsJCw0PDg4ODg8PDAwMDAwPDwwMDAwMDA8MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8IAEQgAmgIAAwERAAIRAQMRAf/EAP0AAQADAAMBAQEAAAAAAAAAAAAFBwgCBAYDCQEBAQADAQEBAQAAAAAAAAAAAAAEBgcFAwIBEAAABAQFBAMAAgMBAAAAAAAAAQIDEgQUBUAyEzMGEBExNSBQFSE0YCMWFxEAAQIDAwMOCggFBQAAAAAAAQIDABEEITESEHQFQEFRYXGBkaGxMrLCEyMgUMHRIkJScnMUYGKCkkMkNDXh0lOT06IzY6PjEgACAAUCBQMEAgMAAAAAAAAAARARMXECQCEgUEESMlGBImDwYZGhsXCA4RMBAAECAwcEAwEBAQEAAAAAAQARYfAhMRBBUYGRofFAcbHRIFDB4TBgcP/aAAwDAQACEQMRAAAB451Wfn8Qz9fv6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAPr9TOv5cqMiUsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAS06+8PiNGRKWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJadfeHxGjIlLAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEtOvvD4jRkSlgAAAAAAAAafuF+kfX2HT8/KueVxaj4db4vwbu0fXKDrVPo2u1MAAAAAAAAAAAAAAACWnX3h8RoyJSwAAAAAAAAN/wCm7H4bncnxfP5c/JmW/wB2yVNxK7kikZwN3aPrlB1qn0bXamAAAAAAAAAAAAAAABLTr7w+I0ZEpYAAAAAAAAG/9N2POdUpNGV2pC7rDa9WXTQsJZvknkoXN3do+uUHWqfRtdqfP9+vb9Dq+qm9D6fv75SFz/Bc3jiQ9fbv+nvARoQH3+vuckS4CND+f58gAAAAAAAS06+8PiNGRKWAAAAAAAABv/TdjznVKTRldqQs3rd7Zt/0/FOfZbXfL4m7tH1yg61T6NrtT9ZN6O6tH1ryMHnfH5+PYz+nSNdquWqdn9idTtbU0DUsD5rkHn4sIXnY7boe0XTBGa5Bw/PkAAAAAAACWnX3h8RoyJSwAAAAAAAAN/6bsec6pSaMrtS+/wBemuLxo1o9jv4DzPHovxj7u0fXKDrVPo2u1Pt/fr2vv0ivGMLe7ll1xeNG/PLLcY6/z8bw0jXKUr9WzzV6WNt6FqtZ8jg5wqlIAAAAAAAAEtOvvD4jRkSlgAAAAAAAAb/03Y+h5eMX4x/TzJ8l6++Wabn9IV6qDd2j65Qdap9G12piY95Vqdmweqm9D1c3o2z27F+e2X4zHeXhoa0XS6O/aMI5xkfqJnQ3fpGuYLzXIfORYIAAAAAAAAlp194fEaMiUsAAAAAAAADf+m7H4bncnw3N5Mb5eFW8av8AlofPA3do+uUHWqfRtdqdj9XubGvmmeL5/Lrzl8WY95N2WG1fntl+Mx3l4T0mZvjS9fxLnuWWn2bB73pdfGdCzAAAAAAAAACWnX3h8RoyJSwAAAAAAAAN/wCm7HnKqUija7UwABu7R9coOtU+ja7U9iXvTPj8/OQaNmotjtWLYV70v89svxmO8vAbJvmneciwbP7HfzPUaJUXDrYAAAAAAAAEtOvvD4jRkSlgAAAAAAAAb/03Y85VSkUbXamAAN3aPrlB1qn0bXanse+ab1/n4yDRc2kfX31Jcr/cnes357ZfjMd5eAt7uWTW130aN8vHAeZ498fn4AAAAAAAAAlp194fEaMiUsAAAAAAAADf+m7HnKqUija7UwABu7R9coOtU+ja7U7T7Ng2He9L6Hl49v79fGQOX7vpdf8APbL8ZjvLwH3+vv8AQHTdjpGvVXMtRoYAAAAAAAAAlp194fEaMiUsAAAAAAAAD0EmbG+Xh0fPxAAE7JmdDy8ej5+I9dO6Xu+j1/Kw+f4bncmdkS/PRYXF+D0sufvHSdcwrnGS+Thc4AAAAAAAAAS06+8PiNGRKWAAAAAAAAAAAAAAAAAABpu33z3nR6+KM/ywAAAAAAAAACWnX3h8RoyJSwAAAAAAAAAAAAAAAAAB9vr72/oeq57q9Np7hVkAAAAAAAAACWm33h8xoyJSwAAAAAAAAAAAAAAAAAAAAAAAAAAAAABKzb3/AE6MetgAAAAAAAAAAAAAAAAAAAAAAAAAAAAADvybT9fuYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//aAAgBAQABBQIzIhqIGogRpEaRGkRpEaRGkRpEaRGkRpEaRGkRpEaRGkRpEaRGkRpEaRGkRpEaRGkRpEaRGkRpEaRGkRpEaRGkRpEaRGkRpEaRGkRpEaRGkRpEaRGkRpEaRGkRpEaRGkRpEaRGkRpEaRGkRpEaRGkeQ7l++Rldy/fIyu5fvkZXcuDlOFWt+V/4S0D/AIS0B3gcgZXDhlzlEmRpPpYvTc89j9CjK7lwdt9dfuS/iTCefoEtzi2OqZeZmGuU8ebn2Oli9Nzz2P0KMruXB2313PPY9OE3BxqfF9lSk7uLF6bnnsQlKlql+NXuZCeDXhRHwW7ic4zepIujEpNTRqtN0Qnq2048v8e7hSVNqwKMruXB2313PPY9OIIUu/DlhkfIBYvTc89iLF7lSkoS7yCysmjkljWbbjbqOWcfaelxxefoLwZEorrJHbrj04NI6s7dJ1Nut6lGtWBRldy4O2+u557ENtrdXxawqtTLzzcuzOzKp2bFi9Nzz2IYfdlnpqenJ1XTh1yelrkpKVpeRpOiyz36Ns53I9l9OMyNBZ+dz/8AGCRldy4O2+un7LbLm4ni9hSJaQkpMLWltPKOSpny6WL03PPY9JO3zs+uX4Nc3Cb4CyQkeH26QmROf2xwSf7Lvkj+jaxZZH9G5mZJK7Tx3G44JGV3Lg7b66/cm/EmP/QA9z2bUVwvNyufwsXpueexHG7H+zNS8uxKtXDk9otynefNELJyp+73ETn9sWudVb59KiWnksh+fd+CSP8AHLZ+itGDRldy4O2+u557H5WL03PPYjhrCWrHzC5PSFv6cL92Jz+304jP1to5xIG9KWeRK3W3mc/VXTBoyu5cHbfXc89j8rF6bnnsRw15Lti5hbHp+3iWlJmcc43xk7WoTn9vpwyfpbottDqbhNokJJxxbrmDRldy4O2+u557H5WL03PPYji17TaptKkrS5JSbym2mmUv3+TbuInP7fRpxbLknMFNynOp+BnCIyu5cGm7XRCX5qZmlfJF0ubSH5qZmldLffbnax/3V3E9ye8T6W3HGV/sXcGZqPpaJBVzuJElCb5P/pXTCIyu5fp+DW6BjlFwoLRhUZXcv0zaNRyTnrJJSvMbo3PTuFRkdy/fN5Fkai0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUNJQ0lDSUEF2T/AIB//9oACAECAAEFAhEQiIREIiERCIhEQiIREIiERCIhEQiIREIiERCIhEQiIREIiERCIhEQiIREIiERCIhEQiIREIiERCIhEQiIREIiERCIhEQiIREIiERCIhEQiIREIiERCIhEQiIREIiERCIhEQiLovx98nwvx98nwvx98nwvxg0W9Bp/ObH5zYO2pDsgtPwltu5Z/oU+F+MG1kmZvRP9MIuKDCVEopyVjLpLbdyz/Qp8L8YNrJcs/S3udlCZRC4JbbuWfomUdUPznB+c4FyjiOqUKUNFfwIu40HB4wSfC/GDayXLP0kS/wBond0S23cs4ltwHMtkCm2gR9xOyxGQk3IHA83Avpbm+6nnNNGCT4X4wbWS5ZwRdxJy2mSjhJxcahLbdyzhKjSa3FL6yLppWDLsYYc1EXJvrKNwN3FzBp8L8YNrI5LocFG0ENpQDPsJybj6y23cs/RDSlhNuWYK2kG5FCDC8wtzgmG9RAl29RYec1F4JPhfjBtZJmb0T/TCrkoOvrc+Ett3LOJSX1VJSSScm20A7kQl5w3VheYMuQKE23A5bWxOuQN4NPhfjBtZLln+Utt3LOJBPZqedNCOkhuhebpIuRt3FvulhvTRPuRLwafC/GDayXLP8pbbuWcSCu7U80a0hCDWcpKafRebpIOQrMu4cXAkz74RPhfjBtZLln+Utt3LOJOY0lA20mCIiCplJLC83Qj7GhUSbi5/GET4X4wessKWavmTyyClmrq1MLbH6Lgcm3Fgj7DXc+DDeosTDmovCJ8L8fT25r+JxyBvCp8L8fTEXcIcaQU+9GrCp8L8ffJ8KIQGIDEBiAxAYgMQGIDEBiAxAYgMQGIDEBiAxAYgMQGIDEBiAxAYgMQGIDEBiAxAYgMQGIDEBiAxAYgMQGIDEBiAxAYgMQGIDEBiAxAYgMQGIDEBiAxAYgMQGIDEBiAxAYgMQGIDBf4D/9oACAEDAAEFAlrJIq2hVNipbFS2KlsVLYqWxUtipbFS2KlsVLYqWxUtipbFS2KlsVLYqWxUtipbFS2KlsVLYqWxUtipbFS2KlsVLYqWxUtipbFS2KlsVLYqWxUtipbFS2KlsVLYqWxUtipbFS2KlsVLYqWxUtipbFS2KlsVLYqWxUtipbFS2KlsVLYqWxUthKiUU9t/fS23Pbf30ttz2399Lbc9t4Nu1tqT+S0PyWgq0ID1scR8JTau+59DLbc9t4Njbm57QV+wEXVswlRKKfkycLpKbV33PoZbbntvBsbd33OlqeMlibbgdEptXfcHbuESLygVpdH5LockXkdUNqWDl3C+BJMxTOgy7YKW257bwbG3d9zpbS/3i4b4lNq77glN0z7BU4ykFPMmCMjFxkyUQkHdN0TDWk50tLXdcw7pIP8AnBS23PbeDY27vuAiMxb5TRJSiSTq41CU2rvuBKjSbjqnOttfNLhl3Ci7GJV3VbuzXWRa02rs9g5bbntvBsbbsq26dAwENIQDPsJ+e1OsptXfc6NsrcCLS4YKzkGra22oOZhaXRNNarYlWtVwTDuq5gpbbntvBsbc3PaCv2Aq7qD00478JTau+4JGU11IQSCen2mwq8EJW4G84HMwYd01l/InmtN20NC4vabWDltue28Gxt3fc+UptXfcFsT2ZuT5to6WzeDmbpbno2rqz3TLNaTdzejcwcttz23g2Nu77nylNq77gtiu7NyYNxAQ2pZyMjo9HM3S2PQOGXcPOaaDPueDltue28Gxt3fc+UptXfcFvmtFRH3BtJMEkiC5xBOBzN0SfY21xpuz3YsJLbc9t4Mphwgtal/Mphwgtal9WZtxofrOh2fdcBGZCpd+EszqueBNParmEltue2/p7Sz2Kfe02sLLbc9t/TEXc23WUJucwTi8LK7c9t/fSm1NNmtFE4KJwUTgonBROCicFE4KJwUTgonBROCicFE4KJwUTgonBROCicFE4KJwUTgonBROCicFE4KJwUTgonBROCicFE4KJwUTgonBROCicFE4KJwUTgonBROCicFE4KJwUTgonBROCicFE4KJwUTgonBROCicFE4KJwUTgonBROCicFE4KJwS6DQj/AP/2gAIAQICBj8C/wBFE9zqdTZm2/BjYVubqxKR4m+xNHcqxxsK3N1YVo9vrBqGNhWjQ6HQpHZFHwbHi+UKwrRUHDGwrQxvCpWHeq8DUe70G+UKwrRm6kxuGNhWhNG7j29HwJiyihY8oVj5IobKHbjSONhWjsjcqT3g4PEaglBvlCsSkeP8myN3wY2FaH4JKGyJSg4JwY8i/KVYVuPGwrR268LjY7hIl6cpVhW48bCtHbpCSO51g4y9YN8qVhW48bCtDejhQ2FgqwcZiYseVeTN+OrN47M6FYeT4EoN8+7voCXciSov8r//2gAIAQMCBj8CmypUqVKlSpUqVKlSpUqVKlSpUqVKlSpUqVKlSpUqVKlSpUqVKlSpUqVKlSpUqVKlSpUqVKlSpUmvoBfQC+gFpU5sq/v2Kv79jZs234MbCtyJaXGxKUzx/k32Jo7sfL+442FbkS0uNhWj2dHDJQxsK0fE6FUUj8VM8X+uCSPF/rRrS42FaKhl99IY2FaGN4eR5Gx341gvztB4xefoPLRrS42FaEkTyqybHlDGwrQmj5OPb0cJQWQs/aKFh76NaXGxPJHifFQ7MKf3HGwrR+KN2kb5Cym4ODw9x4wWMHlo1pcbEpTPH+f+G2J8nwY2FaG9ESRKZtidsoOCygx5+xfSLS42FbjxsK0Lkl14XGwsvQWJL00i0uNhW48bCtBfg26QlijuyrBxl6weRPSLS42FbjxsK0JOjhujYWCrBxmLL1FhpVpfJ/s+Tnx7ZP8AZ8nOPxZRffuVJo8n++BYweWlXKXmP87aZcpWKyX7JKi0y+gESXP0n9A//9oACAEBAQY/ArYvi+L4vi+L4vi+L4vi+L4vi+L4vi+L4vi+L4vi+L4vi+L4vi+L4vi+L4vi+L4vi+L4vi+L4vi+L4vi+L4vi+L4vi+L4vi+L4vi+L4vi/6Aj6AD6ADUtM+t+qCnmkLUApEpqE/Yj9RV/eR/jj9RV/eR/jjua19s/Xwr5AmC5TlNe2NZFi/u+aClQkoWEHLozN2+SKPN+sfEQ1LQZu10RDLHyXzPat48XaYJWkeydiPS0WRuPT6ggJqGXqWfr2LSOC3ihDzDiXWl2ocSZgw5XUreGuZGJYH4qRrHb2ODLozN2+SKPN+sfEQ1LQZu10RFHm/WVlVo8qJZq0lSEbDiBOfBkr6dNiUu4kDYC/SA48mjM3b5Io836xyBKElSlWJSLSYmjR60DZdk30pRMu0re0pavIgx/v0h2sa/5IK10ZdbF7jRx8QtyqFLTO1JRzg0grlwQpa9G1SEIE1KLKwABveAlpltTri+Y2gTJ3AI/a6v+wvzQpC0lC0HCtCrCCNY6iGpaDN2uiIo836ystIoCxpLql7mAp8uTSEv+McDacmjM3b5Io836xyaMzhHLBUtQQkXqNgiS9JMz+ocfRnGEaRbHvTTxkQHGlpcbVzVpMwd8Q7pOkbDdSyMdSlP4idc7oyU5UZNVPcO/bu45QUkTBsIiro9ZlZ7P3Daniyv16h6NInA376/4RVVhvZR6A2VGxI4YUtRmpRmo7eohqWgzdroiKPN+srIltpBccWZJQm0nehdTVD87UiRT7CPZ3dmHX3VYWmUlbitoRU1a7DUOKXLYmbsmjM3b5Io836xyNVDKsDrKgptV8iN2MdXUuVB1sZmBuDWyt0RWTTVkwW9YLlMEckKQoTSoSUNow61f2ayme4clJVTmtSJPe+mxUUmkUixY7B7dFqfLlpkESdf797dXdxSil0ag39+/wAifLqMaloM3a6IhDtbTds4hOBJxrTZf6pECWj02bKlnlMflaRqnneUJAJ34UtaghCRNS1WACDo+gV+UB797+oRrDay6MzdvkijzfrHLgo6Zb518IsG6bhANQ+zTT9W1auKzjjvdJLV7rYTykwxVoqKhbrCsSQSnD0clV8ZfSyVWjVmxffs7osV5Iq6UCbhRiZ99No82SkpZTQtc3vcTarigk+ilItMVVZ6rq+6H1BYni1GNS0GbtdEQyx8l8z2rfaYu0wStI9kx+0/9/8A5wfl6Bpo7K1FfJhj83UlaNZkeijgHgaMzdvkijzfrHIe1mmjp5F8j1p3JEJYp2kstI5qE2Qptx8vvJ5zLIxEb9g447jRql7BW4E8gMJpFUrbLZQpWIEk2ZKr4y+lkpawfgrBWNlJsUOCEqSZpUJpO1FU2kSaePbM7i/MYq9IqF/cMn/UryQ6hJk7W9yjcPO4tSDUtBm7XREUeb9Y+HozN2+SKPN+scjLgvqXHFq3lYOrCGqdZbdrFYC4LwgD0pZUfBcyVXxl9LK02ozdoj2K9wczisinrm0zXTL7NyXsuXcfLFJSes2jvffVarjj5ZJ7qgTg+2bVebUg1LQZu10RFHm/WPh6MzdvkijzfrHIwgX063EL3SrH1obcpkF16jXj7MXlBFssgZpWVPuH1UCfDHztWvFWKThS0nmoB5TkqvjL6WX5ZRk1XJwfbFqfNGBxIWmw4TtWiKmsXcwgqlsnWG+YcdcOJx1RUtWyTadSDUtBm7XREUeb9Y+HozN2+SKPN+scimqgyo6qQcV7ChcrzwlaFBaFCaVC0ERjdpGXVn1lISTxxhabS0n2UCQ4optGMn5ipfcwOYT6Le6dnayVXxl9LK282cLjSgtCtgi0RTVQGH5hpLmHYxCcU2jUG149s+Pqp5vCeTUo1KlCNJVSUpEkpDywABvwF1NQ5UKSJJU6orIG/wCGltvSNU22gSQhLqwANoTgLqahyoUkSSp1RWQN/Lhpakhr+gv0kcBu3o/T0n3F/wA8FtdT2LRvbZGDjv44S404ppxFqHEGRG4RH7pV/wB9fngqUZqNpJy01GOa4qbx2EC1XFASkYUpEgNgCKqqBm2VYWPcTYPPqUeKX9JrHpP90x7qecd88kVBSZPVPcNfavPBqYeKEN4koxqCcSjJInsmGKRrSlJgYQEDvm7Za98NU9M8l6mpUc9BxJK132jalqYfQARIePwPoD//2gAIAQEDAT8hBqqG0m3lvLeW8t5by3lvLeW8t5by3lvLeW8t5by3lvLeW8t5by3lvLeW8t5by3lvLeW8t5by3lvLeW8t5by3lvLeW8t5by3lvLeW8t5by3lvLeW8t5bwQVMxnyn7/t58p+/7efKfv+3nynpKfm7cFUq8s9p48q4USXSHU1CLT411rzLHoNRqImom3HuH9GP28+U9Ka/irclJkVtdD5Q38pI9yX2wad8hD3IAajjShzA1Jq38lNmPcP6Mft58p6g0M7okOWQHCpR9jhsL2qB0GcoU7Me4do6DGoNQ7gIMIudbsNdpWiOMvaQYo03Kr1ME0dQiBrXI8zaWUhYg6LS0jYYHoKqrlD8G4dRF3CoXZbe/8BSUQcxH0Xbz5T1BoauaQuC+cdioqg84b32Y9w7R8f4Zn5zaB7rK+0ZJ/Fir3O+i6IgKVqMa2Qx8whqA5ucyu8rXds6RJqIr5Hkhkjq8xHUYgBpSdXMebNu9qq3RT2L1lMGpW/1BESE83VWavou3nynpzQ1Dhh1zuBmw4AAOe+zcTnyHvWTSG46sMj2VqxyGWzHuHaPlI0cqVRoEecz2TWp7A5DbVYGzkENuWlX+EIE83RCiTNTmtWIKIjRMxILNDYqzSs19wpcfmUctuWXaG/KQ+1KUeDScCp/Lp6Pt58p6U1uQ1MVtFBaszA9zutWsLSkKe7oCrziV9KAGqrkR0Fn1mVi53ba7Me4fwHTH+vqXTmMNLaig9wHRGqTvkPOLW3Nwr77MN4tmhSUWwfMq5M5vPejnunVsqfQuLsxSJ0VBMgCNpaipuyToPR9vPlPSmv4K7JS3sYgRaUfyEu0KtaceGkNOLV/DHuHaOi1oblalembuOUF0dB0H23iFBpUpwahbZokgX+OfLjRXeRcQzodtmG8Wyo7Qw/1BMCMcXRWYk0EY92coWqHKU9zzuBRfh1mb6qZrTq+85npO3nynrDQ+PcO0cgiue/MHaHMDRpUFTctQ67cM4GzDeLbvk2tdZe3xR3mXDNYOikIoBodXH+kZq69haa/HJ6Tt58p6w0Pj3DtHWfLq4HYRMIEdaSp70oNJpk5JqTSY1kF1oF3KG6kUeIi/5F9dmG8W27sumu/PNGiSoNSrOgkoip1ez0glZKDb3U6vpO3nynrDQ+PcO0dte9lwHwzp1boaAT4hmImpEmqB65hlMe6B6VEPaJoxv41jnTfMN4ttFidb3U6kQCSlrQ0cqzLZph7QeY+ldvPlPSBB9l6AAMoTfK+VhQW5fmc8Rd2gFATfK+VhQW5bSt+KRyv4EvN46EK0pxOCKstCliqB3GgTZbeg1Wqq6q7TEcqbsr7Mr0hiBh5GgOUwELbxpzPpe3nyn6jWrK7xqh0YyMTdqXpV86em7efKfp91QjVilUyA3sqifudQzXGubK7iQehFCI0A96+m7WfKfv8AB95vyVlk6yydZZOssnWWTrLJ1lk6yydZZOssnWWTrLJ1lk6yydZZOssnWWTrLJ1lk6yydZZOssnWWTrLJ1lk6yydZZOssnWWTrLJ1lk6yydZZOssnWWTrLJ1lk6yydZZOssnWWTrLJ1lk6yydZZOssnWWTrLJ1lk6yydZZOssnWWTrLJ1lk6yydZZOssnWWTrLJ1lk6yydYjGp/4H//aAAgBAgMBPyFafv6AAAAAAAAAAAAAAAAAAAAGv/1UAAbDmDh9S92fUvdn1N9Oz9TN8jv0iU29kmAv+3DtXxKLmVK60/jAeX+RLI93+9pUBUhMOXv/AL429kmAv+3DtXxMBfa/D/I/zZ7lfOezskwF9gLkTSHzy+YLv6v8l7u+pnzUWz/3bqM+xWJlXpP4O6CrPAMRVH9OHaviYC+1G1X42KvL+DZ2SYC+zskUM2a+fn4iN2AKmZHY5Nbn3so3By6/7ErLUvbd221ReT/ksD87otWr+nDtXxMBfY6oaxt8uxw+4KLQiI73Z2SYC+wBqEQqztM+REqUZWDZ31998zR9n+bae3ubz/yab7v8/v6gO1fEarUef8gPnNGiAKs7mPH/ADb2SYC+1ulaa8DvjrN67YbLUe31s7x2Z6+5/Zx13e5s7i+2+aS8Pxu/UB2r4lFzKldafxmDwitE7/U4LcN34dkmAvs1bRr9SmihHaLVtn/k/wBz/jMsQbO8dljXtvg1Kkozc5nOar7H9/krhvyffb9SHaviYC/59kmAvsAHiv1/IYMj8NvxOzvHbRDfk+pRhuy5P+/MwDnvmX9Plv8A1Idq+JgL/n2SYC+wAOC/f9htzPw2UI1ZV1f4NneO3P8Ap8t0AUYbu4jJXV/Uh2r4mAv+fZJgL7CofQvBEqRGqHlDaCkzwE9NneO1yGpL8lZTDvzf5i36oAyh1GJVa++f5hUKXuxKrX3z28HuGpLXd9wejQWy/wBiqo0Z5Bi1290fbfAAnDXd7H74KSe/I9t/f4lW4uRz/wA/fBUUhk0C5AFK/I/+XCqH78AAAAAAAAAAAAAAAAAAAADQ/wDA/wD/2gAIAQMDAT8hDq0I4LB/OW8t5by3lvLeW8t5by3lvLeW8t5by3lvLeW8t5by3lvLeW8t5by3lvLeW8t5by3lvLeW8t5by3lvLeW8t5by3lvLeW8t5by3lvLeW8t5by3lvLebgE+U/f8Abz5T9/28+U/f9vPlPSPXNB1N/KeZI8yQnRe9H6g1cu2vT6rEpk7ezTBXf0Xbz5T0nYPiULXFdafxgN+LlH6F7jtn2hpajHZZOz74dNvZpgrv6Lt58p6TsHxMFd24GE/zYRvH5z/uzs0wV3YJUJo655fMTvHN+o/7r9Q2rWWz/wB7bdSPYV+INVp+78GaFW082iKjr6Lt58p6TsHxMFd2qrwr8J/djryvhs7NMFd2dugCrNUHz8TcT4+YbVVIpKg1ucfc2W1mc9O9IlZYJ7bu22rHs93/AD5gcEO+7vEqr6Lt58p6TsHxMFd2O0KsVfqjh9xnpGcVze12dmmCu7DesRaqO0tX9m5/kAUZVuB2cVqZ+5rKafu+T+7ae3ubz/yk0n3fB/fR9vPlPSdg+IWqkunwwDc7/c01PYgCrpD6y4afO3s0wV3azRnHHSfYQ/Xeb6dKf1hgqHtT42d87Ka/s+H+TjtTL3Mz62cFq5+xmxQJfBy9t3b0fbz5T0nYPiU7XFdafx2Y/SPdr9TgJw0On4dmmCu7Oor6lCNCI1VPAz/zvN4ObT+MrYAo7O+djcMe2/tECpKONHM5/wC1mr+z5f5KyGuT77fPpO3nynpOwfEwV38+zTBXdhm8S/z+QqtFU5b9un7OzvnbSx1y/XbLlKW6qnJ/35lgjP3395lPTLz3/XL0nbz5T0nYPiYK7+fZpgruwTcSd6/2F01VpbfsrILKqt7dx9uzvnbnPTLz3fXOGaMFjceI7LV9J28+U9J2D4mCu/n2aYK7sH/Fnj9wBUjdRX2ITQU9pmBJo2/22zvnapDUzlpA9ZSXfm+xp3+PS9vPlPSDUOuilU9zX5/MugD3RSqe5r87cryODmY9p4lgujQcDL/e8dqUZ5tFrm7U4xr7b4AKThJu9jT79L28+U/UVV35Hsa9/iZW1yOevb03bz5T9PSDjKaGFNH3AD1DdpVwd/TdnPlP3+D7zeZrLZ1ls6y2dZbOstnWWzrLZ1ls6y2dZbOstnWWzrLZ1ls6y2dZbOstnWWzrLZ1ls6y2dZbOstnWWzrLZ1ls6y2dZbOstnWWzrLZ1ls6y2dZbOstnWWzrLZ1ls6y2dZbOstnWWzrLZ1ls6y2dZbOstnWWzrLZ1ls6y2dZbOstnWWzrLZ1ls6y2dZbOstnWWzrLZ1ls6zUKPv/wP/9oADAMBAAIRAxEAABCtW22222222222222222222222222222tEkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk1Ekkkkkkkkkkkkkkkkkkkkkkkkkkkkkk1Ekkkkkkkkkkkkkkkkkkkkkkkkkkkkkk1EkkkkkkkkmEvMlckkkkkkkkkkkkkkkk1EkkkkkkkkmWAAlckkkkkkkkkkkkkkkk1EkkkkkkkkmInhFcxZ6k4klAkkkkkkkk1EkkkkkkkkmIljFcsw1FqEzQkkkkkkkk1EkkkkkkkkmIggFcrE6ofkikkkkkkkkk1EkkkkkkkkmI38lcnb4c9WREkkkkkkkk1EkkkkkkkkmRRklc6JMc2zIkkkkkkkkk1Ekkkkkkkkmckklc7E8cnEUkkkkkkkkk1EkkkkkkkkmckklcihYclkQkkkkkkkkk1Ekkkkkkkkmckklcmlccm7Ekkkkkkkkk1EkkkkkkkklYkkmYmqRMkVkkkkkkkkkk1Ekkkkkkkkkkkkkkkkkkmokkkkkkkkkk1Ekkkkkkkkkkkkkkkkkkw4kkkkkkkkkk9EkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkxW2222222222222222222222222222228kkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkn/2gAIAQEDAT8QoiVqVYhlT0fqCbvMT+TDMwzMMzDMwzMMzDMwzMMzDMwzMMzDMwzMMzDMwzMMzDMwzMMzDMwzMMzDMwzMMzDMwzMMzDMwzMMzDMwzMMzDMwzMMzDMwzMMzDMwzMMzDMwzMMzDMwzMMzDMwzMMzDMwzMMzDMwzMMww+4M1/wB/Ya81/wB/Ya81/wB/Ya81/SQfaYAfKAKpVWm/aOHHD0y0N0HrK8N0sji+TZoinZi6iFERKI/gI7b+i8Nea/pbfuZnvo7vVrymZEEyy8atF3iJBhxVKRq0q8pRQLBVEabwRE1HJzisKgs2EMj4lFVfwBHbf0XhrzX9Lb+27asnPJlyuWTzXN2B4meoFY4CHttEdt2ZxFpUVABVXQIWr8kw41ryUJ5A7yL5B7wGkVDLBQdWI2kCgqkoBqiXiIolEyR2Mqg/KgXhRosSsH84PAAqrQPwpSSU8LQkUFoGw09YFrYSACIlR9FhrzX9Lb+27azSwBnpOewF7InA7kE2iO27eYOSKHHigDnHbWqAjnkoSlM+EPaOg58V1l1ejcGIezCminy0SgHV6tQTYzwPmtAA+4riulUCUcIGoByRGjDnElrRWueaTfbnhlGySQU3S+2Ovuq9G44DNo9FF6qqG9Vq+iw15r+lt/bdkI+WiRhVHgEYq+wCQoZIhBQoGiwcLSpMvdoZG+LYWE1rAnhSFjaI7bs7Bb1xLZNAkTVUEsN+lYjarw3JXiajKajnXIzWa7qEWRpP79EDu1pETPFqImiMF5uJpuXcLFklU6gFkVEulR3Dbm9CgpQgNRNR3jHzXa0bw6Z5tQeD9HhrzX9Lb/dZmWQ7MapWbhp1VTySsUFUE0cI5xgQjIuVXgBqrFGSIVzEVzpCp3WQPwCO27dUDhrzpqlupQQ/DUd1MhbsKODhnJjMF8VIIBjKO4/hBy3AvU0u4tEOCSiEgNK1dU3Zwm5REUSiZIx6PwswoJruqQ8Uj07OA+qroAEV2DqNNTtKJXZa1fR4a81/S2/cbHFW87v1qa6bBq06KcuYOKQXR2VUaqmjc90/ER23Z587TKnh7WQ0NyxQF8bxS0zTVVVc1rFrkNGVFQRKKobwjCJUQTcL0+j3lS2kGgCN9n+CCraqT1qhU3mF49VF6iiG8RqQMkHBQOKoAEw3CZW6wiaFV1FpJwHGHmGmZEUetAVdz6Sw15r+lt/bf+GI7bszZCrqSS03DQvNK83Bos01RoNCNP8Agig5osAqojMrqAu4YkI1GgaZtMAaqA4kdvStd5TFgJud5BrQW9s679JhrzX9Lb+2/wDDEdt2YB3f+Kme8zfAwZUaK4Q1BpVoRFIKKJkibmIa8qiC03Rb0BvYOWqR06l6gBU3lNH4oNZrjQqCqy7lXMIs8hUpHJokuSowO1AjM1M0G7FZazhNN1H0mGvNf0tv7b/wxHbdnroVQVxQV3lDOiZsqFKQYNTkQaiM75+PZp6wdp+TbtASlNyxolpKmTQzDeoD8UF7WoEDB7AwVZNpmTqFdCu/WauahnUbdzQelw15r+kj4+hEB4AAAKBMylwIGq8qVoNK/mbJhsNBMBkAUmZS4EDVeVK0GldpGpjUBWq11S5qk72BgLAoqq3yJKztqs7VRAyVQ8JSnbD/ACqCLjsNIp2YuqhVVWqu2gaCoHK81CreG+Ew+UEUA0AFIrS0a5GZhupqHE9LhrzX/UVPseNmFU4Ae9SlNSEaAQN5TY7rnpsNea/6eUdh7hOvyrVTIM4Fq5yoAA31cZl6DBubnlFaUePpsVea/wC/u1flKRBQc2mk8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjE8YnjEG2laoZ71/8D//2gAIAQIDAT8QM1ZclyXpel6Xpel6Xpel6Xpel6Xpel6Xpel6Xpel6Xpel6Xpel6Xpel6Xpel6Xpel6Xpel6Xpel6Xpel6Xpel6Xpel6Xpel6Xpel6Xpel6AKk+b9/pT5v3+lPm/f6U+b0lXCQ0aKoM+fj5+KzJt/4EANEuGX2clYiRKJtwDhMVd+i0p83pMA4JcvGhmnYidUSoq/ZDtAAJNEzJQqBVpum5sNHfyU2YBwmKu/RaU+b0mAcExV21anKULFa9DXlw2AboVHtkHIdmAcJirtjoFV3EzQB7PmHtDKoe6/iiJ/eJSkN/8AA/ja4iJrUo96DHwQZq0g4uX4BWJoBVfYJjb+RwCI0RyRNROPotKfN6TAOCYq7aym4n2qPlNhUWxYBwmKu2YBxhtQDix6nJv2ROhzqndCHnE0RqPMlEFmA5j7Na7ytd2ys13v4dKOVYAR0Ym68j3Z9w20vZChg3VdSEjuZXWQ60jslVzfRaU+b0mAcExV2wMarQCq8oj0vTmcy5+wN0WOgKtiagTPtV05abMA4TFXbHaolRyaJ75SvE3cj2NDltdDqFOFFRL5UfexDYKjky3KnRg0nGBKexl3Z+0oFa9Yz/robawHyWjpQSmKxUHy6ej0p83pMA4IDpAoZjLXeOM0Q9V8sEp7SA9dYgQA1XIIYV18juLNbtjPZgHCYq7bWCdjI93Q5sArb812yg+u+wPlYh0tSrRzM3fZiHF2Uktetp2U6MoMaK9QddPZ2VS0WvsZ9hT3igq5BHR0WXsy7PR6U+b0mAcEuTi4lORs0DrC/CFs54GXQa+7Vv8AhgHCYq7ZUtNNu4D338DlAgg0CPqd1DUc8qrVrDar70dj5IOdAXVXLp8bMQ4uxDbnYOZWGSVHMlJCnQvo1OUoBsVcF5TR3H2fBzPSaU+b0mAcExV354BwmKu2GnVjyYNnUUrwBnT3yPau3Q2GIcXbUV3n2Pplyihs3V2OlAQe9wz92fc9Jmpk05s/4OXpNKfN6TAOCYq788A4TFXbANqR5r8IHmorTeoo0vo9dgxKbg+eBdyi5yZShoOue97F9dmIcXbmpk05M/6OcopqZZNmp3mkEz7u45tCK1VFfdzfSaU+b0mAcExV354BwmKu2KH0q3bvZubZ7oaSo5iaMrR3FC9yUQBwADtEgyhpp73jbrTfMQ4u1AaIJ7mZCAKUqOFSsr6zXIMupq+laU+b0h4AMgKQdYWSmVUqnOv5ijhkAQFisLJTKqVTnXbkiXPgdOVJ4+LioN39vhWkLuDRGieyTG39iJVqu1SdF5Bn2aXpAQZB8ShDqp0B11930ulPm/UUfZ9A1c8kVWPljyq509NpT5v09JqCqFVoFd67jiygeoe1v136wcwNRqOpmZNChZr6bSnzfv8ARjUz9+AAAAAAAAAAAAAAAAAAAADmOv8A4H//2gAIAQMDAT8Q1WClXjANKOn0mjDoPkmIfqYh+piH6mIfqYh+piH6mIfqYh+piH6mIfqYh+piH6mIfqYh+piH6mIfqYh+piH6mIfqYh+piH6mIfqYh+piH6mIfqYh+piH6mIfqYh+piH6mIfqYh+piH6mIfqYh+piH6mIfqYh+piH6mIfqYh+piH6mIfqYh+piH6mIfqYh+piH6mIfqYh+piH6mIfqYh+piH6mIfqYh+piH6mIfqYh+piH6gBKrRmti1/f4i7NbFr+/xF2a2LX9/iLs1sWvpKmg5SjUC04duLEJnmBkS6cD2dfX2StESFE1NuNcP0cmIuzWxa+kwPgl+oaWaUpmacY/V5VfzCFTb6YiygVNEjUZTKDVpuNR4g1avJTZjXD9HJiLs1sWvpMD4PwEVNyVDgVa8wjxocNmQgFYcCknIo2Y1w2yEAVdAzWZyA409qHtA6vvv4OAK1I3Sg3s7TJz2lEWNa1HvQ0iQAFVRANVaZB+BNSaAVfYM2YZ/kTmgURKImom5N56LEXZrYtfSYHwfgISNA32/sGwkGIOzGuG2TCuMQKAb3IjVK+z90Yoc+vcAgsiaIiPsmUK8OpNN93Fd5WtWmyvF8wcuhWAESoxkdGp7s11G2iDI0w91XRFPaushzRFCVVqt30WIuzWxa+kwPg2iAUJkAVVsEALK053MufsDdVUShqbBVmu43sq5HIy2Y1w2yPjRxGg0TTJqdZUjbqh7GhyDa7FnibiioXaVcRz0IgColEsy8wdGkFGpArGajoupKlmU0a9Qr1Cjkba5FOvaelDlKQ3Aj8qez6PEXZrYtfSYHwSmDlB0GbuDeym0yuKvmBKexg83V5x84DNVoBdgCmR9waBa53WM9mNcPwkrmu+hke+hzSHjYM+0HQoTVex+UGbXqVeoZu+zHuLsroyeoU6pVyZTQqqsIzTkXZUAzVYRmFPdlROQdiMnpyAy7Bz9HiLs1sWvpMD4JcqGlmlKWNjAZlc+Mt57uDJ5Mn3at/wAMa4bZEbMUFm+uhb73cXSDTnoBQ88XVidR6jUe7kG2a0DrvZ7D5IcakqKuXQ7bMe4uwn7qt1kOaYISolRsymaj8rPTlQ5SgA1/h/FyZUNu/s6+49x6TEXZrYtfSYHwf8JMa4bZBHqhyWdZg1W8Bo4LUK8K79uJ8NmPcXbWtnV+xie6MbrUOz0oCD3r1DPuPKZzZXVz/n0hiLs1sWvpMD4P+EmNcNshF1S91fExS1Wo1UUoN6ZNOFaZ0iUh1i3BXrwLuUXMSKA0XXP/AAL67Me4u3ObK6Of9QoREyybNTuTQnZ93c5tDnGxqirxVq+kxF2a2LX0mB8H/CTGuG2REuiLwNPZusz3UgBBEqJmJxGXPIo9UlLIcAB0Iq+nDlx1fg0300Zj3F2r3RAPBGp3hlFMk4UDSVC5vtA51PpWIuzWxa+kCAAUAEA0ArpBiIKCiDhVOX5gSwoAAHABoEGIgoKIOFU5bRanEKOnQwiJJX+o5vd1e2SG0BoiieyZkwz/AGIlKrq7QHouQ5rppekIAoBlwAlKmqadF1dy+lxF2a2LX9RSXn/eOeSKgXmDlVzp6bEXZrYtf0+fIVBVaBVpVdwb3dKHAhvab7lzYDvXkKzmiZNCiz6Yq4mrNbFr+/7R+UoqrQc2mRWeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCeITxCADSpXfvP8Af/A//9k=",
button=document.getElementById(id),contactUrl=Storage.getAPP_BLOCK_FORM(),contactLink=document.getElementById("contact_link"),playLink=document.getElementById("play"),game_link=Storage.getAPP_BLOCK_URL(),play=document.getElementById("play_img"),contact=document.getElementById("contact"),horW=2133,horH=642,baseW=8E3,baseH=4500,scaleH=horH/baseH,scaleW=horW/baseW,panelH=window.innerHeight*scaleH,panelW=window.innerWidth*scaleW,orientation=window.innerHeight/.5625<window.innerWidth?"hor":"vert";contactLink.innerHTML=
contactUrl;contactLink.setAttribute("href",contactUrl);play.setAttribute("src",play_btn);playLink.setAttribute("href",game_link);panelH=panelW*(horH/horW);play.style.width=panelW+"px";play.style.height=panelH+"px";button.style.width=panelW*2+panelW*3/4+"px";contact.style.width=panelW*2+panelW*3/4+"px";button.style.fontSize=window.innerHeight*.051+"px";contact.style.fontSize=window.innerHeight*.045+"px";play.style.marginTop=panelH/1.5+"px";play.style.marginLeft=(panelW*2+panelW*3/4)/2-panelW/2+"px";
button.style.marginTop=window.innerHeight/3+"px";contact.style.marginLeft=(window.innerWidth-contact.offsetWidth)/2+"px";if(orientation=="vert"){button.style.fontSize=window.innerWidth*.029+"px";contact.style.fontSize=window.innerWidth*.025+"px"}else{panelW=window.innerHeight/.5625*scaleW;panelH=panelW*(horH/horW);play.style.width=panelW+"px";play.style.height=panelH+"px";button.style.width=panelW*2+panelW*3/4+"px";button.style.fontSize=window.innerHeight*.051+"px";contact.style.fontSize=window.innerHeight*
.045+"px";play.style.marginTop=panelH/1.5+"px";play.style.marginLeft=(panelW*2+panelW*3/4)/2-panelW/2+"px"}button.style.marginLeft=(window.innerWidth-button.offsetWidth)/2+"px";window.addEventListener("resize",function(event){scaleH=horH/baseH;scaleW=horW/baseW;panelH=window.innerHeight*scaleH;panelW=window.innerWidth*scaleW;panelH=panelW*(horH/horW);play.style.width=panelW+"px";play.style.height=panelH+"px";button.style.width=panelW*2+panelW*3/4+"px";button.style.fontSize=window.innerHeight*.051+
"px";contact.style.fontSize=window.innerHeight*.045+"px";contact.style.width=panelW*2+panelW*3/4+"px";play.style.marginTop=panelH/1.5+"px";play.style.marginLeft=(panelW*2+panelW*3/4)/2-panelW/2+"px";orientation=window.innerHeight/.5625<window.innerWidth?"hor":"vert";button.style.marginTop=window.innerHeight/3+"px";contact.style.marginLeft=(window.innerWidth-contact.offsetWidth)/2+"px";if(orientation=="vert"){button.style.fontSize=window.innerWidth*.029+"px";contact.style.fontSize=window.innerWidth*
.025+"px"}else{panelW=window.innerHeight/.5625*scaleW;panelH=panelW*(horH/horW);play.style.width=panelW+"px";play.style.height=panelH+"px";button.style.width=panelW*2+panelW*3/4+"px";button.style.fontSize=window.innerHeight*.051+"px";contact.style.fontSize=window.innerHeight*.045+"px";play.style.marginTop=panelH/1.5+"px";play.style.marginLeft=(panelW*2+panelW*3/4)/2-panelW/2+"px"}button.style.marginLeft=(window.innerWidth-button.offsetWidth)/2+"px"})};IceStoneLoader.easeOut=function(t,b,c,d){t/=d;
return-c*t*(t-2)+b};IceStoneLoader.setLoadingProgress=function(percentage){};IceStoneLoader.__create=function(){if(window["IceStone"]&&IceStone!=window["IceStone"]){var containerDiv=document.getElementById("sdk_loader_div");if(containerDiv){containerDiv=containerDiv.cloneNode(true);containerDiv.id="sdk_loader_div_new";Stage.addChild(IceStoneLoader._container=containerDiv)}else{var svgLogo=document.getElementById("Layer_1");if(svgLogo&&svgLogo.parentElement&&svgLogo.parentElement.tagName.toLowerCase()==
"svg"&&svgLogo.parentElement.parentElement){containerDiv=svgLogo.parentElement.parentElement;containerDiv=containerDiv.cloneNode(true);containerDiv.id="sdk_loader_div_new";Stage.addChild(IceStoneLoader._container=containerDiv)}}return true}var container=document.createElement("div");container.style.width=container.style.height="100%";container.style.backgroundColor="white";container.id="sdk_loader_div";var logo=Assets.svg("logo/preloader.svg");logo.style.width=logo.style.height="50%";logo.style.top=
"25%";logo.style.left="25%";logo.style.position="absolute";container.appendChild(IceStoneLoader._logo=logo);var absLoader=Assets.svg("ad/loader.svg");var adChildlength=absLoader.childNodes.length;for(var i=0;i<adChildlength;i++)if(absLoader.childNodes[i].localName==="path"&&absLoader.childNodes[i].id=="IceLoaderSVG"){absLoader.childNodes[i].setAttribute("fill","#4DC5F2");break}absLoader.style.position="absolute";absLoader.style.bottom="16.5%";absLoader.style.left="42.5%";absLoader.style.width="15%";
absLoader.style.height="15%";container.appendChild(IceStoneLoader._absLoader=absLoader);var absProgressBar=Assets.svg("logo/progressbar.svg");absProgressBar.style.position="absolute";absProgressBar.style.bottom="17.7%";absProgressBar.style.left="43.8%";absProgressBar.style.width="12.5%";absProgressBar.style.height="12.5%";adChildlength=absProgressBar.childNodes.length;for(var i=0;i<adChildlength;i++){var text=void 0;if(absProgressBar.childNodes[i].id==="bar"){absProgressBar.childNodes[i].setAttribute("stroke",
"#4DC5F2");var circle=absProgressBar.childNodes[i];var r=circle.getAttribute("r");var c=Math.PI*(r*2);var pct=(100-IceStoneLoader._progressOffset)/100*c;circle.setAttribute("stroke-dashoffset",pct)}if(absProgressBar.childNodes[i].id==="progressText")absProgressBar.childNodes[i].setAttribute("fill","#4DC5F2");text=document.getElementById("")}absProgressBar.style.visibility="hidden";container.appendChild(IceStoneLoader._absProgressBar=absProgressBar);Stage.addChild(IceStoneLoader._container=container);
if(Storage.BROWSER()=="Microsoft Internet Explorer"||Storage.BROWSER()=="Microsoft Edge"||Storage.BROWSER()=="Firefox"){if(absLoader&&(Storage.BROWSER()=="Microsoft Edge"||Storage.BROWSER()=="Firefox")){var loaderAnim=absLoader.querySelector("#animateTransformLoader");if(loaderAnim)loaderAnim.parentElement.removeChild(loaderAnim)}setTimeout(function(){IceStoneLoader._deg=360;IceStoneLoader._absLoader.style.transform="rotate(0deg)";IceStoneLoader._absLoader.style.transition="0.6s linear";IceStoneLoader._absLoader.style.transform=
"rotate(".concat(IceStoneLoader._deg,"deg)");IceStoneLoader._absLoader.addEventListener("transitionend",IceStoneLoader.rotateLoader)},500)}return true};IceStoneLoader.__animate=function(){};IceStoneLoader.rotateLoader=function(){IceStoneLoader._absLoader.style.transform="rotate(".concat(IceStoneLoader._deg+=360,"deg)")};IceStoneLoader.rotateProgress=function(){IceStoneLoader._absProgressBar.style.transform="rotate(".concat(IceStoneLoader._degP+=360,"deg)")};IceStoneLoader.fadeINOutAnimation=function(currentChange){if(IceStoneLoader._absLoader){IceStoneLoader._absLoader.style.opacity=
""+currentChange;IceStoneLoader._absLoader.style.filter="alpha(opacity= "+parseFloat(IceStoneLoader._absLoader.style.opacity)*100+")"}};IceStoneLoader.easeInOut=function(t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*(--t*(t-2)-1)+b};IceStoneLoader.startAnimation=function(){IceStoneLoader._currentTime=0;IceStoneLoader._play=true;IceStoneLoader._interval=setInterval(this.updateAnimation.bind(this),this._step)};IceStoneLoader.updateAnimation=function(){if(!IceStoneLoader._play)return;IceStoneLoader._currentTime+=
IceStoneLoader._step;var currentChange=IceStoneLoader.easeInOut(IceStoneLoader._currentTime,0,1,IceStoneLoader._duration);if(currentChange>=1){IceStoneLoader._play=false;clearInterval(IceStoneLoader._interval)}if(IceStoneLoader._hide)currentChange=1-currentChange;IceStoneLoader.fadeINOutAnimation(currentChange)};IceStoneLoader._progressOffset=10;IceStoneLoader._progressMaxValue=90;IceStoneLoader._deg=0;IceStoneLoader._degP=0;IceStoneLoader._gamseStarted=false;IceStoneLoader._pageLoaded=false;IceStoneLoader._isSafari=
/^((?!chrome|android).)*safari/i.test(navigator.userAgent);IceStoneLoader.created=function(){if(Storage.REFERRER_HOST_NAME().indexOf("facebook")!=-1||Storage.HOST_NAME().indexOf("facebook")!=-1||window.location&&window.location.href&&window.location.href.indexOf("facebook")!=-1)return false;if(Storage.REFERRER_HOST_NAME().indexOf("odnoklassniki")!=-1||Storage.HOST_NAME().indexOf("odnoklassniki")!=-1||window.location&&window.location.href&&window.location.href.indexOf("odnoklassniki")!=-1)return false;
if(Storage.REFERRER_HOST_NAME().indexOf("mailru")!=-1||Storage.HOST_NAME().indexOf("mailru")!=-1||window.location&&window.location.href&&window.location.href.indexOf("mailru")!=-1)return false;if(Storage.REFERRER_HOST_NAME().indexOf("wizq")!=-1||Storage.HOST_NAME().indexOf("wizq")!=-1||window.location&&window.location.href&&window.location.href.indexOf("wizq")!=-1)return false;if(Storage.REFERRER_HOST_NAME().indexOf("vkontakte")!=-1||Storage.HOST_NAME().indexOf("vkontakte")!=-1||window.location&&
window.location.href&&window.location.href.indexOf("vkontakte")!=-1)return false;if(Storage.BROWSER()=="Microsoft Internet Explorer")window.addEventListener("load",function(){if(!IceStoneLoader._pageLoaded){IceStoneLoader._pageLoaded=true;if(window["IceStone"]&&IceStone==window["IceStone"]){Stage.setDefaultRoot();if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["setRoot"](Stage.getRoot());Stage.removeFromRoot()}}}});window.requestAnimationFrame(function(){if(window["IceStone"]&&IceStone==window["IceStone"])if(document.body){Stage.setDefaultRoot();
if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["setRoot"](Stage.getRoot());Stage.removeFromRoot()}}else window.addEventListener("load",function(){if(!IceStoneLoader._pageLoaded){IceStoneLoader._pageLoaded=true;if(window["IceStone"]&&IceStone==window["IceStone"]){Stage.setDefaultRoot();if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["setRoot"](Stage.getRoot());Stage.removeFromRoot()}}}});IceStoneLoader.__animate();StorageCommon.initializeAsync().then(function(){}).catch(function(){})});EventManager.on(EventsInternal.SDK_GAME_STARTED,
function(){Stage.removeChild(IceStoneLoader._container);IceStoneLoader._gamseStarted=true;if(IceStoneLoader._absLoader){IceStoneLoader._absLoader["pauseAnimations"]();if(Storage.BROWSER()=="Microsoft Internet Explorer"||Storage.BROWSER()=="Microsoft Edge"){IceStoneLoader._deg=0;IceStoneLoader._absLoader.style.transition="";IceStoneLoader._absLoader.style.transform="rotate(0deg)";IceStoneLoader._absLoader.removeEventListener("transitionend",IceStoneLoader.rotateLoader,false)}}});EventManager.on(EventsInternal.SDK_GAME_BLOCKED,
function(val){var divPanel=Assets.div("logo/block.html");divPanel.style.pointerEvents="auto";Stage.addChild(divPanel);Stage.removeChild(IceStoneLoader._container);IceStoneLoader.showPlayBtn("button")});EventManager.on(EventsInternal.UPDATE_LOADER,function(val){var change=val[0];var rect=val[1];if(IceStoneLoader._container&&IceStoneLoader._container.parentElement){if(IceStoneLoader._container.parentElement.style.visibility=="hidden")IceStoneLoader._container.parentElement.style.visibility="visible";
if(IceStoneLoader._hide==false){IceStoneLoader._hide=true;IceStoneLoader.startAnimation();var userAgent=navigator.userAgent||navigator.vendor||window.opera;if(/iPad|iPhone|iPod/.test(userAgent)&&!window["MSStream"]||IceStoneLoader._isSafari){IceStoneLoader._container.parentElement.style.visibility="hidden";if(typeof window.cordova==="object")setTimeout(function(){IceStoneLoader._container.parentElement.style.visibility="visible"},0)}}var scale=IceStoneLoader._container.parentElement.clientHeight/
IceStoneLoader._container.parentElement.clientWidth<=rect.width/rect.height?IceStoneLoader._container.parentElement.clientWidth/rect.width:IceStoneLoader._container.parentElement.clientHeight/rect.height;scale=1/scale;scale=1-(1-scale)*change;IceStoneLoader._container.style.width=parseInt(""+IceStoneLoader._container.parentElement.clientWidth*scale)+"px";IceStoneLoader._container.style.height=parseInt(""+IceStoneLoader._container.parentElement.clientHeight*scale)+"px";IceStoneLoader._container.style.left=
parseInt(""+(IceStoneLoader._container.parentElement.clientWidth-IceStoneLoader._container.clientWidth)/2,10)+"px";IceStoneLoader._container.style.top=parseInt(""+(IceStoneLoader._container.parentElement.clientHeight-IceStoneLoader._container.clientHeight)/2,10)+"px"}});EventManager.on(EventsInternal.PROGRESS,function(valArr){var progress=valArr[0];var total=valArr[1];if(progress==undefined||total==undefined)return;var percent=progress/total*100|0;var text=document.getElementById("progressText");
if(!text)return;var textVal=IceStoneLoader.easeOut(percent,1,99,100)|0;if(percent>=95)textVal=100;text.textContent=textVal+"";var val=progress/total*IceStoneLoader._progressMaxValue+IceStoneLoader._progressOffset;var circle=document.getElementById("bar");if(!circle)return;if(isNaN(val))val=0;else{var r=circle.getAttribute("r");var c=Math.PI*(r*2);if(val<0)val=0;if(val>100)val=100;var pct=(100-val)/100*c;circle.setAttribute("stroke-dashoffset",pct)}});EventManager.on(EventsInternal.LOADING_STARTED,
function(){IceStoneLoader._absProgressBar.style.visibility="visible";IceStoneLoader._absLoader.style.visibility="hidden"});EventManager.on(EventsInternal.COMPLETE,function(){if(IceStoneLoader._absProgressBar.style.visibility=="hidden")return;IceStoneLoader._absProgressBar.style.visibility="hidden";IceStoneLoader._absLoader.style.visibility="visible"});return IceStoneLoader.__create()}();IceStoneLoader._step=10;IceStoneLoader._duration=1E3;IceStoneLoader._currentTime=0;IceStoneLoader._interval=0;IceStoneLoader._hide=
false;IceStoneLoader._play=true;return IceStoneLoader}();ui.IceStoneLoader=IceStoneLoader})(ui=__.ui||(__.ui={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var ProviderManager=IceStone.__.provider.ProviderManager;var AdManager=IceStone.__.ad.AdManager;var LeaderboardManager=IceStone.__.leaderboard.LeaderboardManager;var Storage=IceStone.__.system.Storage;var EventManager=IceStone.__.events.EventManager;var EventsInternal=IceStone.__.events.EventsInternal;var beforeStartGameAsync=IceStone.__.game.beforeStartGameAsync;var afterStartGame=IceStone.__.game.afterStartGame;var URLLoader=IceStone.__.system.URLLoader;var URLRequest=IceStone.__.system.URLRequest;
var URLRequestMethod=IceStone.__.system.URLRequestMethod;var Stage=IceStone.__.display.Stage;var Logger=IceStone.__.system.Logger;var Assets=IceStone.__.system.Assets;var IceStoneLoader=IceStone.__.ui.IceStoneLoader;var SDKUpdater=IceStone.__.system.SDKUpdater;var AnimateLoader=IceStone.__.ui.AnimateLoader;var Utils=IceStone.__.system.Utils;IceStone.Event=IceStone.__.events.Events;IceStone["Event"]=IceStone.Event;IceStone.GameState=IceStone.__.game.States;IceStone["GameState"]=IceStone.GameState;
IceStone.ServiceProvider=IceStone.__.provider.Providers;IceStone["ServiceProvider"]=IceStone.ServiceProvider;IceStone.DevicePlatform=IceStone.__.system.DevicePlatform;IceStone["DevicePlatform"]=IceStone.DevicePlatform;IceStone.Theme=IceStone.__.ui.Themes;IceStone["Theme"]=IceStone.Theme;IceStone.UIElements=IceStone.__.ui.UIElements;IceStone["UIElements"]=IceStone.UIElements;function setDevelop(value){if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["setDevelop"](value===true,arguments[1]===true,
true);return IceStone}Logger.VERBOSE=value===true;Logger.DEVELOPER=arguments[1]===true;Logger.HASHED=arguments[2]===true;return IceStone}IceStone.setDevelop=setDevelop;IceStone["setDevelop"]=setDevelop;function setRoot(value){if(isDownloadInit)if(!isDownloadInitEnded){Logger.verbose("IceStone.setRoot stoped");IceStone["newRoot"]=value;return}if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["setRoot"](value);return IceStone}Stage.setRoot(value);return IceStone}IceStone.setRoot=setRoot;IceStone["setRoot"]=
setRoot;function isStandalone(){if(SDKUpdater.icestoneLast)return SDKUpdater.icestoneLast["isStandalone"]();var value=typeof window.cordova==="object";return value}IceStone.isStandalone=isStandalone;IceStone["isStandalone"]=isStandalone;function downloadAsync(urls,urlsSizes,appId){return(new Promise(function(resolve,reject){if(urls===void 0){reject();return}if(typeof urls==="string")urls=[urls];if(!Array.isArray(urlsSizes))urlsSizes=[urlsSizes];if(!Array.isArray(urls)||urls.some(function(url){return url===
void 0||typeof url!=="string"||url.length===0})){reject();return}if(urls.length===0){resolve();return}if(appId&&appId!=""){IceStone["isPrerollShowed"]=true;initializeAsync(appId).then(function(){if(resolveInit){Logger.verbose("IceStone.downloadAsync initializeAsync resolveInit");isDownloadInitEnded=true;if(IceStone["newRoot"])IceStone["setRoot"](IceStone["newRoot"]);isDownloadInitEnded=false;resolveInit();return}isDownloadInitEnded=true}).catch(function(){if(rejectInit){Logger.verbose("IceStone.downloadAsync initializeAsync rejectInit");
rejectInit();return}isDownloadInitEnded=true});isDownloadInit=true}(urls=urls.concat()).forEach(__download);function __download(url){if(typeof window.cordova==="object"||Storage.BROWSER()=="Microsoft Internet Explorer"){var script_1=document.createElement("script");script_1.src=url;script_1.onload=function(){var i=urls.indexOf(url);if(i>-1){urls.splice(i,1);if(urls.length===0)resolve();Utils.disposeElementScript(script_1)}};script_1.onerror=reject;document.body.appendChild(script_1)}else{var loader_3=
new URLLoader;loader_3.on(EventsInternal.COMPLETE,function(){EventManager.dispatch(EventsInternal.PROGRESS,100,100);if(IceStone["isPrerollShowed"])IceStone["evalArray"].push(loader_3.data);else window.eval(loader_3.data);Utils.disposeURLLoader(loader_3);var i=urls.indexOf(url);if(i>-1){urls.splice(i,1);if(urls.length===0){EventManager.dispatch(EventsInternal.COMPLETE);resolve()}}});loader_3.on(EventsInternal.ERROR,function(){return setTimeout(__download,1E3,url)});loader_3.on(EventsInternal.ERROR_SECURITY,
reject);loader_3.on(EventsInternal.PROGRESS,function(progress,total){if(total<=0){var i=urls.indexOf(url);if(i>-1){var defTotal=urlsSizes[i];if(defTotal>0)total=defTotal}}if(total>0)EventManager.dispatch(EventsInternal.PROGRESS,progress,total);else EventManager.dispatch(EventsInternal.COMPLETE)});var request=new URLRequest(url);request.method=URLRequestMethod.GET;request.contentType="text/javascript";loader_3.load(request);EventManager.dispatch(EventsInternal.LOADING_STARTED)}}})).catch(function(e){throw e;
})}IceStone.downloadAsync=downloadAsync;IceStone["downloadAsync"]=downloadAsync;function initializeAsyncInternal(appId,resolve,reject){if(adManager){reject();return}Logger.verbose('IceStone.initializeAsync ("'.concat(appId,'")'));leaderboardManager=IceStone.__.leaderboardManager=new LeaderboardManager;Logger.verbose("ProviderManager.constructor ()");ProviderManager.provider.initializeAsync=ProviderManager.provider.initializeAsync.bind(ProviderManager.provider);ProviderManager.provider.startGameAsync=
ProviderManager.provider.startGameAsync.bind(ProviderManager.provider);adManager=IceStone.__.adManager=new AdManager;Storage.initializeAsync(appId).then(ProviderManager.provider.initializeAsync).then(Storage.authorizeAsync).then(adManager.initializeAsync).then(function(){window["IceStone"]["isPrerollShowed"]=true;beforeStartGameAsync().then(function(){window["IceStone"]["isPrerollShowed"]=false;var evalLen=window["IceStone"]["evalArray"].length;var i=0;for(i=0;i<evalLen;i++)window.eval(window["IceStone"]["evalArray"][i]);
window["IceStone"]["evalArray"].length=0;EventManager.dispatch(EventsInternal.SDK_INITED);resolve()}).catch(function(){reject()})}).catch(function(){reject()})}function initializeAsync(appId){return(new Promise(function(resolve,reject){if(isDownloadInit){Logger.verbose("IceStone.setRoot initializeAsync isDownloadInit");if(isDownloadInitEnded){Logger.verbose("IceStone.setRoot initializeAsync isDownloadInitEnded true");resolve();return}Logger.verbose("IceStone.setRoot initializeAsync isDownloadInitEnded false");
resolveInit=resolve;rejectInit=reject;return}if(window["IceStone"]&&IceStone==window["IceStone"]&&!Logger.HASHED){if(SDKUpdater.initializeStarted){reject();return}SDKUpdater.initializeAsync(getSDKVersion()).then(function(){if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["setDevelop"](Logger.VERBOSE,Logger.DEVELOPER,true);SDKUpdater.icestoneLast["setRoot"](Stage.getRoot());if(AnimateLoader.instance().isNeedAnimation())SDKUpdater.icestoneLast["ui"]["animateTo"](AnimateLoader.getRect(),AnimateLoader.getHandler());
Stage.removeFromRoot();EventManager.reatachEvents();SDKUpdater.icestoneLast["initializeAsync"](appId).then(function(){resolve()}).catch(function(){reject()})}else initializeAsyncInternal(appId,resolve,reject)}).catch(function(){SDKUpdater.icestoneLast=null;initializeAsyncInternal(appId,resolve,reject)});return}initializeAsyncInternal(appId,resolve,reject)})).catch(function(e){throw e;})}IceStone.initializeAsync=initializeAsync;IceStone["initializeAsync"]=initializeAsync;function setLoadingProgress(percentage){if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["setLoadingProgress"](percentage);
return}if(!ProviderManager.provider)return;Logger.verbose("IceStone.setLoadingProgress (".concat(percentage,")"));ProviderManager.provider.setLoadingProgress(percentage);IceStoneLoader.setLoadingProgress(percentage)}IceStone.setLoadingProgress=setLoadingProgress;IceStone["setLoadingProgress"]=setLoadingProgress;function startGameAsync(){return(new Promise(function(resolve,reject){if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["startGameAsync"]().then(function(){resolve()}).catch(function(){reject()});
return}Logger.verbose("IceStone.startGameAsync ()");if(!ProviderManager.provider){reject();return}ProviderManager.provider.startGameAsync().then(function(){if(!AnimateLoader.instance().isNeedAnimation()){EventManager.dispatch(EventsInternal.SDK_GAME_STARTED);afterStartGame();resolve()}else{AnimateLoader.instance().startAnimation();EventManager.on(EventsInternal.ANIMATE_ENDED,function(){EventManager.dispatch(EventsInternal.SDK_GAME_STARTED);afterStartGame();resolve()})}}).catch(reject)})).catch(function(e){throw e;
})}IceStone.startGameAsync=startGameAsync;IceStone["startGameAsync"]=startGameAsync;function getLocale(){if(SDKUpdater.icestoneLast)return SDKUpdater.icestoneLast["getLocale"]();if(!ProviderManager.provider)return Storage.LANGUAGE();return ProviderManager.provider.getLocale()||Storage.LANGUAGE()}IceStone.getLocale=getLocale;IceStone["getLocale"]=getLocale;function getServiceProvider(){if(SDKUpdater.icestoneLast)return SDKUpdater.icestoneLast["getServiceProvider"]();if(!ProviderManager.provider)return null;
return ProviderManager.provider.name}IceStone.getServiceProvider=getServiceProvider;IceStone["getServiceProvider"]=getServiceProvider;function getDevicePlatform(){return Storage.DEVICE_PLATFORM()}IceStone.getDevicePlatform=getDevicePlatform;IceStone["getDevicePlatform"]=getDevicePlatform;function getSDKVersion(){return config.version||"1.2"}IceStone.getSDKVersion=getSDKVersion;IceStone["getSDKVersion"]=getSDKVersion;function logEvent(eventName,parameters){}IceStone.logEvent=logEvent;IceStone["logEvent"]=
logEvent;IceStone.on=EventManager.on;IceStone["on"]=IceStone.on;function getLeaderboard(count){if(SDKUpdater.icestoneLast)return SDKUpdater.icestoneLast["getLeaderboard"](count);return leaderboardManager.getLeaderboard("top",count)}IceStone.getLeaderboard=getLeaderboard;IceStone["getLeaderboard"]=getLeaderboard;function disableLeaderboard(){if(SDKUpdater.icestoneLast)return SDKUpdater.icestoneLast["disableLeaderboard"]();if(adManager!=null)return false;return ProviderManager.provider.setHideLeaderboards(1)}
IceStone.disableLeaderboard=disableLeaderboard;IceStone["disableLeaderboard"]=disableLeaderboard;function moreGames(){if(SDKUpdater.icestoneLast){SDKUpdater.icestoneLast["moreGames"]();return}Logger.developer(Logger.MESSAGE_DEPRECATED)}IceStone.moreGames=moreGames;IceStone["moreGames"]=moreGames;IceStone.user=IceStone.__.user.User;IceStone["user"]=IceStone.user;IceStone.game=IceStone.__.game.Game;IceStone["game"]=IceStone.game;IceStone.ui=IceStone.__.ui.UI;IceStone["ui"]=IceStone.ui;var adManager;
var leaderboardManager;var config=Assets.json("config.json");var isDownloadInit=false;var isDownloadInitEnded=false;IceStone["isPrerollShowed"]=false;var resolveInit=null;var rejectInit=null;IceStone["evalArray"];if(!IceStone["evalArray"])IceStone["evalArray"]=[];IceStone["newRoot"];if(!IceStone["newRoot"])IceStone["newRoot"]=null;IceStone["disableOrientationChange"]=true;Logger.greeting()})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var ProviderManager=IceStone.__.provider.ProviderManager;var Providers=IceStone.__.provider.Providers;__.staticProvider=ProviderManager.provider;__.staticProviders=Providers})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));
(function(IceStone){var __;(function(__){var ui;(function(ui){var Storage=IceStone.__.system.Storage;var Assets=IceStone.__.system.Assets;var Stage=IceStone.__.display.Stage;var EventsInternal=IceStone.__.events.EventsInternal;var EventManager=IceStone.__.events.EventManager;var IceStonePanel=function(){function IceStonePanel(){this.name="IceStonePanel";this._isInited=false;this._gamesData=[]}IceStonePanel.setConsole=function(console){this._console=console};IceStonePanel.prototype.configure=function(mode){var _this=
this;if(mode===void 0)mode=0;var divRoot=document.createElement("div");divRoot.style.width=divRoot.style.height="100%";divRoot.style.position="absolute";divRoot.style.zIndex="0";divRoot.style.top="0px";divRoot.style.left="0px";divRoot.style.visibility="hidden";divRoot.style.pointerEvents="auto";divRoot.id="s3eFBIGLeaderbordParentNode";Stage.addChild(divRoot);var divPanel=Assets.div("leaderboard/s3eFBInstantPanel.html");divPanel.style.position="absolute";divPanel.style.height="100%";divPanel.style.width=
"100%";divRoot.addEventListener("selectstart",function(e){if(!e||typeof e.preventDefault!=="function")return;e.preventDefault()});divRoot.appendChild(divPanel);this._Frame=document.getElementById("s3eFBIGLeaderbordParentNode");this._mainPanelDiv=document.getElementById("s3eFBIGLeaderboardInviteFriends");if(!this._mainPanelDiv){IceStonePanel.log("No main div of panel!");this._isInited=false;return}this._leaderboard=document.getElementById("s3eFBIGLeaderboard");this._inviteFriends=document.getElementById("s3eFBIGInviteFriends");
this._leaderboardTab=document.getElementById("s3eFBIGLeaderboardTab");this._inviteFriendsTab=document.getElementById("s3eFBIGInviteFriendsTab");this._crossPromo=document.getElementById("cross-promo");if(this._crossPromo){this._crossPromo.style.display="none";this._crossPromo.style.marginTop="4%";if(this._crossPromo.parentElement){this._crossPromo.parentElement.style.height="78%";var i=0;for(i=0;i<this._crossPromo.parentElement.children.length;i++){var child=this._crossPromo.parentElement.children[i];
if(child.id!="cross-promo"){child.style.height="85%";break}}}}this._buttonClose=document.getElementById("s3eFBIGPlay");this._buttonCloseText=document.getElementById("s3eFBIGLeaderboardButtonText");var inviteMoreFrinedsButton=document.getElementById("s3eFBIGInviteMoreFriends");if(inviteMoreFrinedsButton)if(mode==0)inviteMoreFrinedsButton.onclick=function(){EventManager.dispatch(EventsInternal.INVITE_MORE_FRIENDS)};else if(mode==1)inviteMoreFrinedsButton.style.visibility="hidden";if(Storage.BROWSER()==
"Microsoft Internet Explorer"||Storage.BROWSER()=="Microsoft Edge"||Storage.BROWSER()=="Safari"){this._leaderboard.onmousewheel=function(e){e=window.event||e;var delta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));_this._leaderboard.scrollTop-=delta*40};this._inviteFriends.onmousewheel=function(e){e=window.event||e;var delta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));_this._inviteFriends.scrollTop-=delta*40}}if(Storage.BROWSER()=="Firefox"){this._leaderboard.onwheel=function(e){e=window.event||
e;var delta=Math.max(-1,Math.min(1,e.deltaY||-e.detail));_this._leaderboard.scrollTop+=delta*40};this._inviteFriends.onwheel=function(e){e=window.event||e;var delta=Math.max(-1,Math.min(1,e.deltaY||-e.detail));_this._inviteFriends.scrollTop+=delta*40}}if(this._leaderboardTab&&this._inviteFriendsTab&&this._leaderboard&&this._inviteFriends){if(mode==0){this._leaderboardTab.onclick=function(){_this._leaderboardTab.style.backgroundColor="rgb(64, 128, 250)";_this._leaderboardTab.style.color="rgb(255, 255, 255)";
_this._inviteFriendsTab.style.backgroundColor="rgb(255, 255, 255)";_this._inviteFriendsTab.style.color="#3b5998";_this._leaderboard.style.display="block";_this._inviteFriends.style.display="none"};this._inviteFriendsTab.onclick=function(){_this._inviteFriendsTab.style.backgroundColor="rgb(64, 128, 250)";_this._inviteFriendsTab.style.color="rgb(255, 255, 255)";_this._leaderboardTab.style.backgroundColor="rgb(255, 255, 255)";_this._leaderboardTab.style.color="#3b5998";_this._leaderboard.style.display=
"none";_this._inviteFriends.style.display="block"}}if(mode==1){this._leaderboardTab.style.borderRadius="18px";this._leaderboardTab.style.width="100%";this._inviteFriendsTab.style.display="none"}this._leaderboardTab.style.backgroundColor="rgb(64, 128, 250)";this._leaderboardTab.style.color="rgb(255, 255, 255)";this._inviteFriendsTab.style.backgroundColor="rgb(255, 255, 255)";this._inviteFriendsTab.style.color="#3b5998";this._leaderboard.style.display="block";this._inviteFriends.style.display="none"}else{IceStonePanel.log("No needed elements!");
this._isInited=false;return}this._isInited=true};IceStonePanel.prototype.update=function(){IceStonePanel.log("Update panel");if(!this._isInited){IceStonePanel.log("Is not inited!");return}if(!this._lastUpdate){if(!Date.now)Date.now=function(){return(new Date).getTime()}}else{var timeNow=Math.floor(Date.now()/1E3);if(timeNow-this._lastUpdate<60){IceStonePanel.log("It is not time yet!");return}this._lastUpdate=timeNow}EventManager.dispatch(EventsInternal.UPDATE_LEADERBOARD);EventManager.dispatch(EventsInternal.UPDATE_FRIENDS)};
IceStonePanel.prototype.show=function(){IceStonePanel.log("Show panel");if(this._buttonClose)this._buttonClose.onclick=function(){EventManager.dispatch(EventsInternal.CLOSE_LEADERBOARDS,"play")};if(this._buttonCloseText)this._buttonCloseText.innerText="Play now";this.showCrossPromo();if(!this._isInited){IceStonePanel.log("Is not inited!");return}if(this._mainPanelDiv)this._mainPanelDiv.style.display="block";if(this._Frame){this._Frame.style.visibility="visible";this._Frame.style.zIndex="255"}};IceStonePanel.prototype.showLeaderBoard=
function(){IceStonePanel.log("Show panel");if(this._buttonClose)this._buttonClose.onclick=function(){EventManager.dispatch(EventsInternal.CLOSE_LEADERBOARDS,"hide_leaderboards")};if(this._buttonCloseText)this._buttonCloseText.innerText="Close";this.showCrossPromo();if(!this._isInited){IceStonePanel.log("Is not inited!");return}if(this._mainPanelDiv)this._mainPanelDiv.style.display="block";if(this._Frame){this._Frame.style.visibility="visible";this._Frame.style.zIndex="255"}};IceStonePanel.prototype.hide=
function(){IceStonePanel.log("Hide panel");if(this._crossPromo)this._crossPromo.style.display="none";if(!this._isInited){IceStonePanel.log("Is not inited!");return}if(this._mainPanelDiv)this._mainPanelDiv.style.display="none";if(this._Frame){this._Frame.style.visibility="hidden";this._Frame.style.zIndex="0"}};IceStonePanel.prototype.getIsInited=function(){return this._isInited};IceStonePanel.prototype.updateLeaderboard=function(highScore){if(!this._leaderboard)return;var entries=__.leaderboardManager.getLeaderboard("top");
var html="";if(entries){for(var i=0;i<entries.length;i++){var entry=entries[i];if(!entry||!entry.player||!entry.player.photo||!entry.player.name||entry.score==void 0||entry.rank==void 0)continue;if(entry.player.id==Storage.getUSER_ID()&&highScore!=undefined)entry.score=Math.max(entry.score,highScore)}entries.sort(this.updateLeaderboardsCompare);var rank=1;for(var i=0;i<entries.length;i++){var entry=entries[i];if(!entry||!entry.player||!entry.player.photo||!entry.player.name||entry.score==void 0||
entry.rank==void 0)continue;entry.rank=rank;rank++}for(var i=0;i<entries.length;i++){var entry=entries[i];if(!entry||!entry.player||!entry.player.photo||!entry.player.name||entry.score==void 0||entry.rank==void 0)continue;var userScore=entry.score;html+='<div style="border-top:solid 1px #fff;padding: 2% 3% 2% 3%; vertical-align: top; display: flex; align-items: center; color: rgb(29, 33, 41); font-size: 17px; background-color: rgb(205, 222, 234);"><div style="background-color: rgba(0, 0, 0, 0.3); width: 48px; height: 48px; background-size: 48px 48px; background-position: center center; background-repeat: no-repeat; border-radius: 24px; display: inline-block; vertical-align: middle; margin-right: 12px; background-image: url(&quot;'+
entry.player.photo+'&quot;);"></div><div style="display: inline-block;"><span style="display: block; font-size: 16px;">'+entry.player.name+'</span><span style="display: block; font-size: 18px;">'+userScore+' Points</span></div><div style="display: inline-block; margin-left: auto; margin-right: 100px; font-size: 18px; color: rgb(64, 128, 250); float: right;">'+entry.rank+"</div></div>"}}this._leaderboard.innerHTML=html};IceStonePanel.prototype.updateLeaderboardsCompare=function(a,b){var genreA=a.score;
var genreB=b.score;var comparison=0;if(genreA>genreB)comparison=-1;else if(genreA<genreB)comparison=1;return comparison};IceStonePanel.prototype.updateInviteFriends=function(entries){if(!this._inviteFriends)return;this._inviteFriends.innerHTML="";if(entries){var _loop_2=function(i){var entry=entries[i];if(entry&&entry["getPhoto"]()&&entry["getName"]()&&entry["getID"]()){var tempDiv=document.createElement("div");var tempIDStr_1=""+entry["getID"]();tempDiv.innerHTML='<div style="border-top:solid 1px #fff;padding: 2% 3% 2% 3%; vertical-align: top; display: flex; align-items: center; color: rgb(29, 33, 41); font-size: 17px; background-color: rgb(205, 222, 234);"><div style="background-color: rgba(0, 0, 0, 0.3); width: 48px; height: 48px; background-size: 48px 48px; background-position: center center; background-repeat: no-repeat; border-radius: 24px; display: inline-block; vertical-align: middle; margin-right: 12px; background-image: url(&quot;'+
entry["getPhoto"]()+'&quot;);"></div><div style="display: inline-block;"><span style="display: block; font-size: 16px;">'+entry["getName"]()+'</span></div><div style="display: inline-block; margin-left: auto; margin-right: 100px; font-size: 18px; color: rgb(64, 128, 250); float: right;"><div  style="border: 1px solid rgb(64, 128, 250); border-radius: 18px; padding: 6px 18px;">Play</div></div></div>';tempDiv.getElementsByTagName("div")[4].onclick=function(){EventManager.dispatch(EventsInternal.INVITE_FRIEND,
tempIDStr_1)};this_2._inviteFriends.appendChild(tempDiv.getElementsByTagName("div")[0])}};var this_2=this;for(var i=0;i<entries.length;i++)_loop_2(i)}};IceStonePanel.prototype.setCrossConfigLink=function(){if(this.getMobileOperatingSystem()=="ios")return;var i=0;var j=0;var configObject=window.JSON.parse(Storage.getAD_CONFIG());var dataPlacements=configObject["placements"];if(dataPlacements)for(i=0;i<dataPlacements.length;i++){var placementData=dataPlacements[i];if(!placementData.hasOwnProperty("name")||
!placementData.hasOwnProperty("type"))continue;if(placementData["type"]=="cross_promo"){var placement={};placement["name"]=placementData["name"];var gamesDataArray=placementData["games"];if(gamesDataArray==null||gamesDataArray==undefined)gamesDataArray=[];this._gamesData=[];for(j=0;j<gamesDataArray.length;j++){var gameData=gamesDataArray[j];var channel={};channel["link"]=gameData["link"];channel["image"]=gameData["image"];this._gamesData.push(channel)}}}};IceStonePanel.prototype.showCrossPromo=function(){var _this=
this;if(this._crossPromo&&this._gamesData.length>=4){this._crossPromo.innerHTML="";var imgLoad_1=function(url){return(new Promise(function(resolve,reject){var request=new XMLHttpRequest;request.open("GET",url);request.responseType="blob";request.onload=function(){if(request.status===200)resolve(request.response);else reject(new Error("Image didn't load successfully; error code:"+request.statusText))};request.onerror=function(){reject(new Error("There was a network error."))};request.send()})).catch(function(e){throw e;
})};var loadImage=function(url,id){var myImage=new Image;myImage.crossOrigin="";imgLoad_1(url).then(function(response){var imageURL=window.URL.createObjectURL(response);myImage.src=imageURL;myImage.style.width="71px";myImage.style.padding="5px";myImage.style.borderRadius="50%";myImage.onclick=function(){EventManager.dispatch(EventsInternal.OPEN_URL,id)};_this._crossPromo.appendChild(myImage)},function(Error){IceStonePanel.log(Error)})};this._crossPromo.style.display="block";var tmpGamesData=[];for(var j=
0;j<this._gamesData.length;j++){var gameData=this._gamesData[j];tmpGamesData.push(gameData)}for(var j=0;j<4;j++){var currentRnd=parseInt(Math.random()*tmpGamesData.length+"",10);var tmpGameData=tmpGamesData[currentRnd];loadImage(tmpGameData["image"],tmpGameData["link"]);tmpGamesData.splice(currentRnd,1)}}else if(this._crossPromo){this._crossPromo.style.marginTop="";if(this._crossPromo.parentElement){this._crossPromo.parentElement.style.height="85%";var i=0;for(i=0;i<this._crossPromo.parentElement.children.length;i++){var child=
this._crossPromo.parentElement.children[i];if(child.id!="cross-promo"){child.style.height="100%";break}}}}};IceStonePanel.log=function(message){if(typeof this._console==="function")this._console("[IceStonePanel] : ".concat(message))};IceStonePanel.prototype.getMobileOperatingSystem=function(){var userAgent=navigator.userAgent||navigator.vendor||window.opera;if(/android/i.test(userAgent))return"android";if(/iPad|iPhone|iPod/.test(userAgent)&&!window["MSStream"])return"ios";return"html5"};return IceStonePanel}();
ui.IceStonePanel=IceStonePanel})(ui=__.ui||(__.ui={}))})(__=IceStone.__||(IceStone.__={}))})(window["__IceStone"]["cloneObj"]||window["IceStone"]||(window["IceStone"]={}));if(!window["__IceStoneInited"]){window["__IceStoneInited"]=true;window["__IceStone"]={};window["__IceStone"]["cloneObj"]={}};

/// </IceStone>
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var com;
(function (com) {
    var adobe;
    (function (adobe) {
        var utils;
        (function (utils) {
            var IntUtil = (function () {
                function IntUtil() {
                }
                IntUtil.rol = function (x, n) {
                    return (x << n) | (x >>> (32 - n));
                };
                IntUtil.ror = function (x, n) {
                    var nn = 32 - n;
                    return (x << nn) | (x >>> (32 - nn));
                };
                IntUtil.toHex = function (n, bigEndian) {
                    if (bigEndian === void 0) { bigEndian = false; }
                    var s = "";
                    if (bigEndian) {
                        for (var i = 0; i < 4; i++) {
                            s += IntUtil.hexChars.charAt((n >> ((3 - i) * 8 + 4)) & 0xF)
                                + IntUtil.hexChars.charAt((n >> ((3 - i) * 8)) & 0xF);
                        }
                    }
                    else {
                        for (var x = 0; x < 4; x++) {
                            s += IntUtil.hexChars.charAt((n >> (x * 8 + 4)) & 0xF)
                                + IntUtil.hexChars.charAt((n >> (x * 8)) & 0xF);
                        }
                    }
                    return s;
                };
                IntUtil.hexChars = "0123456789abcdef";
                return IntUtil;
            }());
            utils.IntUtil = IntUtil;
        })(utils = adobe.utils || (adobe.utils = {}));
    })(adobe = com.adobe || (com.adobe = {}));
})(com || (com = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            var core;
            (function (core) {
                var FacebookLimits = (function () {
                    function FacebookLimits() {
                    }
                    FacebookLimits.BATCH_REQUESTS = 20;
                    return FacebookLimits;
                }());
                core.FacebookLimits = FacebookLimits;
            })(core = graph.core || (graph.core = {}));
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            var core;
            (function (core) {
                var FacebookURLDefaults = (function () {
                    function FacebookURLDefaults() {
                    }
                    FacebookURLDefaults.GRAPH_URL = 'https://graph.facebook.com/v10.0';
                    FacebookURLDefaults.API_URL = 'https://api.facebook.com';
                    FacebookURLDefaults.AUTH_URL = 'https://graph.facebook.com/oauth/authorize';
                    FacebookURLDefaults.VIDEO_URL = 'https://graph-video.facebook.com';
                    FacebookURLDefaults.LOGIN_SUCCESS_URL = 'http://www.facebook.com/connect/login_success.html';
                    FacebookURLDefaults.LOGIN_SUCCESS_SECUREURL = 'https://www.facebook.com/connect/login_success.html';
                    FacebookURLDefaults.LOGIN_FAIL_URL = 'http://www.facebook.com/connect/login_success.html?error_reason';
                    FacebookURLDefaults.LOGIN_FAIL_SECUREURL = 'https://www.facebook.com/connect/login_success.html?error_reason';
                    FacebookURLDefaults.LOGIN_URL = 'https://login.facebook.com/login.php';
                    FacebookURLDefaults.AUTHORIZE_CANCEL = 'https://graph.facebook.com/oauth/authorize_cancel';
                    return FacebookURLDefaults;
                }());
                core.FacebookURLDefaults = FacebookURLDefaults;
            })(core = graph.core || (graph.core = {}));
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            var data;
            (function (data) {
                var BatchItem = (function () {
                    function BatchItem(relativeURL, callback, params, requestMethod) {
                        if (callback === void 0) { callback = null; }
                        if (params === void 0) { params = null; }
                        if (requestMethod === void 0) { requestMethod = 'GET'; }
                        this.relativeURL = relativeURL;
                        this.callback = callback;
                        this.params = params;
                        this.requestMethod = requestMethod;
                    }
                    return BatchItem;
                }());
                data.BatchItem = BatchItem;
            })(data = graph.data || (graph.data = {}));
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            var data;
            (function (data) {
                var FacebookAuthResponse = (function () {
                    function FacebookAuthResponse() {
                    }
                    FacebookAuthResponse.prototype.fromJSON = function (result) {
                        if (result != null) {
                            this.expireDate = new Date();
                            this.expireDate.setTime(this.expireDate.time + result.expiresIn * 1000);
                            this.accessToken = result.access_token || result.accessToken;
                            this.signedRequest = result.signedRequest;
                            this.uid = result.userID;
                        }
                    };
                    FacebookAuthResponse.prototype.toString = function () {
                        return '[userId:' + this.uid + ']';
                    };
                    return FacebookAuthResponse;
                }());
                data.FacebookAuthResponse = FacebookAuthResponse;
            })(data = graph.data || (graph.data = {}));
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            var data;
            (function (data) {
                var FacebookSession = (function () {
                    function FacebookSession() {
                    }
                    FacebookSession.prototype.fromJSON = function (result) {
                        if (result != null) {
                            this.sessionKey = result.session_key;
                            this.expireDate = new Date(result.expires);
                            this.accessToken = result.access_token;
                            this.secret = result.secret;
                            this.sig = result.sig;
                            this.uid = result.uid;
                        }
                    };
                    FacebookSession.prototype.toString = function () {
                        return '[userId:' + this.uid + ']';
                    };
                    return FacebookSession;
                }());
                data.FacebookSession = FacebookSession;
            })(data = graph.data || (graph.data = {}));
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var BitmapDataChannel = (function () {
            function BitmapDataChannel() {
            }
            BitmapDataChannel.ALPHA = 8;
            BitmapDataChannel.BLUE = 4;
            BitmapDataChannel.GREEN = 2;
            BitmapDataChannel.RED = 1;
            return BitmapDataChannel;
        }());
        display.BitmapDataChannel = BitmapDataChannel;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var BitmapEncodingColorSpace = (function () {
            function BitmapEncodingColorSpace() {
            }
            BitmapEncodingColorSpace.COLORSPACE_4_2_0 = "4:2:0";
            BitmapEncodingColorSpace.COLORSPACE_4_2_2 = "4:2:2";
            BitmapEncodingColorSpace.COLORSPACE_4_4_4 = "4:4:4";
            BitmapEncodingColorSpace.COLORSPACE_AUTO = "auto";
            return BitmapEncodingColorSpace;
        }());
        display.BitmapEncodingColorSpace = BitmapEncodingColorSpace;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var BlendMode = (function (_super) {
            __extends(BlendMode, _super);
            function BlendMode() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            BlendMode.NORMAL = "normal";
            BlendMode.LAYER = "layer";
            BlendMode.MULTIPLY = "multiply";
            BlendMode.SCREEN = "screen";
            BlendMode.LIGHTEN = "lighten";
            BlendMode.DARKEN = "darken";
            BlendMode.ADD = "add";
            BlendMode.SUBTRACT = "subtract";
            BlendMode.DIFFERENCE = "difference";
            BlendMode.INVERT = "invert";
            BlendMode.OVERLAY = "overlay";
            BlendMode.HARDLIGHT = "hard-light";
            BlendMode.ALPHA = "alpha";
            BlendMode.ERASE = "erase";
            BlendMode.SHADER = "shader";
            return BlendMode;
        }(Object));
        display.BlendMode = BlendMode;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var CapsStyle = (function (_super) {
            __extends(CapsStyle, _super);
            function CapsStyle() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            CapsStyle.ROUND = "round";
            CapsStyle.NONE = "none";
            CapsStyle.SQUARE = "square";
            return CapsStyle;
        }(Object));
        display.CapsStyle = CapsStyle;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var GradientType = (function (_super) {
            __extends(GradientType, _super);
            function GradientType() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            GradientType.LINEAR = "linear";
            GradientType.RADIAL = "radial";
            return GradientType;
        }(Object));
        display.GradientType = GradientType;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var GraphicsPathCommand = (function (_super) {
            __extends(GraphicsPathCommand, _super);
            function GraphicsPathCommand() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            GraphicsPathCommand.NO_OP = 0;
            GraphicsPathCommand.MOVE_TO = 1;
            GraphicsPathCommand.LINE_TO = 2;
            GraphicsPathCommand.CURVE_TO = 3;
            GraphicsPathCommand.WIDE_MOVE_TO = 4;
            GraphicsPathCommand.WIDE_LINE_TO = 5;
            GraphicsPathCommand.CUBIC_CURVE_TO = 6;
            GraphicsPathCommand.ARC = 7;
            GraphicsPathCommand.CLOSE_PATH = 8;
            GraphicsPathCommand.DRAW_TRIANGLES = 9;
            return GraphicsPathCommand;
        }(Object));
        display.GraphicsPathCommand = GraphicsPathCommand;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var GraphicsPathWinding = (function (_super) {
            __extends(GraphicsPathWinding, _super);
            function GraphicsPathWinding() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            GraphicsPathWinding.EVEN_ODD = "evenOdd";
            GraphicsPathWinding.NON_ZERO = "nonZero";
            return GraphicsPathWinding;
        }(Object));
        display.GraphicsPathWinding = GraphicsPathWinding;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var InterpolationMethod = (function (_super) {
            __extends(InterpolationMethod, _super);
            function InterpolationMethod() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            InterpolationMethod.RGB = "rgb";
            InterpolationMethod.LINEAR_RGB = "linearRGB";
            return InterpolationMethod;
        }(Object));
        display.InterpolationMethod = InterpolationMethod;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var JointStyle = (function (_super) {
            __extends(JointStyle, _super);
            function JointStyle() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            JointStyle.ROUND = "round";
            JointStyle.BEVEL = "bevel";
            JointStyle.MITER = "miter";
            return JointStyle;
        }(Object));
        display.JointStyle = JointStyle;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var JPEGEncoderOptions = (function () {
            function JPEGEncoderOptions(quality) {
                if (quality === void 0) { quality = 80; }
                this.quality = 0;
                this.quality = quality;
            }
            return JPEGEncoderOptions;
        }());
        display.JPEGEncoderOptions = JPEGEncoderOptions;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var JPEGXREncoderOptions = (function () {
            function JPEGXREncoderOptions(quantization, colorSpace, trimFlexBits) {
                if (quantization === void 0) { quantization = 20; }
                if (colorSpace === void 0) { colorSpace = "auto"; }
                if (trimFlexBits === void 0) { trimFlexBits = 0; }
                this.quantization = 0;
                this.trimFlexBits = 0;
                this.quantization = quantization;
                this.colorSpace = colorSpace;
                this.trimFlexBits = trimFlexBits;
            }
            return JPEGXREncoderOptions;
        }());
        display.JPEGXREncoderOptions = JPEGXREncoderOptions;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var LineScaleMode = (function (_super) {
            __extends(LineScaleMode, _super);
            function LineScaleMode() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            LineScaleMode.NORMAL = "normal";
            LineScaleMode.VERTICAL = "vertical";
            LineScaleMode.HORIZONTAL = "horizontal";
            LineScaleMode.NONE = "none";
            return LineScaleMode;
        }(Object));
        display.LineScaleMode = LineScaleMode;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var PixelSnapping = (function () {
            function PixelSnapping() {
            }
            PixelSnapping.ALWAYS = "always";
            PixelSnapping.AUTO = "auto";
            PixelSnapping.NEVER = "never";
            return PixelSnapping;
        }());
        display.PixelSnapping = PixelSnapping;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var PNGEncoderOptions = (function () {
            function PNGEncoderOptions(fastCompression) {
                if (fastCompression === void 0) { fastCompression = false; }
                this.fastCompression = false;
                this.fastCompression = fastCompression;
            }
            return PNGEncoderOptions;
        }());
        display.PNGEncoderOptions = PNGEncoderOptions;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var Scene = (function () {
            function Scene() {
            }
            Object.defineProperty(Scene.prototype, "labels", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Scene.prototype, "name", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Scene.prototype, "numFrames", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            return Scene;
        }());
        display.Scene = Scene;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var SpreadMethod = (function (_super) {
            __extends(SpreadMethod, _super);
            function SpreadMethod() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            SpreadMethod.PAD = "pad";
            SpreadMethod.REFLECT = "reflect";
            SpreadMethod.REPEAT = "repeat";
            return SpreadMethod;
        }(Object));
        display.SpreadMethod = SpreadMethod;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var StageAlign = (function (_super) {
            __extends(StageAlign, _super);
            function StageAlign() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            StageAlign.TOP = "T";
            StageAlign.LEFT = "L";
            StageAlign.BOTTOM = "B";
            StageAlign.RIGHT = "R";
            StageAlign.TOP_LEFT = "TL";
            StageAlign.TOP_RIGHT = "TR";
            StageAlign.BOTTOM_LEFT = "BL";
            StageAlign.BOTTOM_RIGHT = "BR";
            return StageAlign;
        }(Object));
        display.StageAlign = StageAlign;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var StageDisplayState = (function (_super) {
            __extends(StageDisplayState, _super);
            function StageDisplayState() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            StageDisplayState.FULL_SCREEN = "fullScreen";
            StageDisplayState.FULL_SCREEN_INTERACTIVE = "fullScreenInteractive";
            StageDisplayState.NORMAL = "normal";
            return StageDisplayState;
        }(Object));
        display.StageDisplayState = StageDisplayState;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var StageOrientation = (function () {
            function StageOrientation() {
            }
            StageOrientation.LANDSCAPE = "landscape";
            StageOrientation.PORTRAIT = "portrait";
            return StageOrientation;
        }());
        display.StageOrientation = StageOrientation;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var StageQuality = (function (_super) {
            __extends(StageQuality, _super);
            function StageQuality() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            StageQuality.LOW = "low";
            StageQuality.MEDIUM = "medium";
            StageQuality.HIGH = "high";
            StageQuality.BEST = "best";
            StageQuality.HIGH_8X8 = "8x8";
            StageQuality.HIGH_8X8_LINEAR = "8x8linear";
            StageQuality.HIGH_16X16 = "16x16";
            StageQuality.HIGH_16X16_LINEAR = "16x16linear";
            return StageQuality;
        }(Object));
        display.StageQuality = StageQuality;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var StageScaleMode = (function (_super) {
            __extends(StageScaleMode, _super);
            function StageScaleMode() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            StageScaleMode.SHOW_ALL = "showAll";
            StageScaleMode.EXACT_FIT = "exactFit";
            StageScaleMode.NO_BORDER = "noBorder";
            StageScaleMode.NO_SCALE = "noScale";
            return StageScaleMode;
        }(Object));
        display.StageScaleMode = StageScaleMode;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var TriangleCulling = (function (_super) {
            __extends(TriangleCulling, _super);
            function TriangleCulling() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            TriangleCulling.NONE = "none";
            TriangleCulling.POSITIVE = "positive";
            TriangleCulling.NEGATIVE = "negative";
            return TriangleCulling;
        }(Object));
        display.TriangleCulling = TriangleCulling;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var Context3DBlendFactor = (function (_super) {
            __extends(Context3DBlendFactor, _super);
            function Context3DBlendFactor() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Context3DBlendFactor.getGLVal = function (gl, str) {
                switch (str) {
                    case Context3DBlendFactor.ONE:
                        return gl.ONE;
                    case Context3DBlendFactor.ZERO:
                        return gl.ZERO;
                    case Context3DBlendFactor.SOURCE_ALPHA:
                        return gl.SRC_ALPHA;
                    case Context3DBlendFactor.SOURCE_COLOR:
                        return gl.SRC_COLOR;
                    case Context3DBlendFactor.ONE_MINUS_SOURCE_ALPHA:
                        return gl.ONE_MINUS_SRC_ALPHA;
                    case Context3DBlendFactor.ONE_MINUS_SOURCE_COLOR:
                        return gl.ONE_MINUS_SRC_COLOR;
                    case Context3DBlendFactor.DESTINATION_ALPHA:
                        return gl.DST_ALPHA;
                    case Context3DBlendFactor.DESTINATION_COLOR:
                        return gl.DST_COLOR;
                    case Context3DBlendFactor.ONE_MINUS_DESTINATION_ALPHA:
                        return gl.ONE_MINUS_DST_ALPHA;
                    case Context3DBlendFactor.ONE_MINUS_DESTINATION_COLOR:
                        return gl.ONE_MINUS_DST_COLOR;
                }
                return 0;
            };
            Context3DBlendFactor.ONE = "one";
            Context3DBlendFactor.ZERO = "zero";
            Context3DBlendFactor.SOURCE_ALPHA = "sourceAlpha";
            Context3DBlendFactor.SOURCE_COLOR = "sourceColor";
            Context3DBlendFactor.ONE_MINUS_SOURCE_ALPHA = "oneMinusSourceAlpha";
            Context3DBlendFactor.ONE_MINUS_SOURCE_COLOR = "oneMinusSourceColor";
            Context3DBlendFactor.DESTINATION_ALPHA = "destinationAlpha";
            Context3DBlendFactor.DESTINATION_COLOR = "destinationColor";
            Context3DBlendFactor.ONE_MINUS_DESTINATION_ALPHA = "oneMinusDestinationAlpha";
            Context3DBlendFactor.ONE_MINUS_DESTINATION_COLOR = "oneMinusDestinationColor";
            return Context3DBlendFactor;
        }(Object));
        display3D.Context3DBlendFactor = Context3DBlendFactor;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var Context3DBufferUsage = (function (_super) {
            __extends(Context3DBufferUsage, _super);
            function Context3DBufferUsage() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Context3DBufferUsage.STATIC_DRAW = "staticDraw";
            Context3DBufferUsage.DYNAMIC_DRAW = "dynamicDraw";
            return Context3DBufferUsage;
        }(Object));
        display3D.Context3DBufferUsage = Context3DBufferUsage;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var Context3DClearMask = (function (_super) {
            __extends(Context3DClearMask, _super);
            function Context3DClearMask() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Context3DClearMask.COLOR = 1 << 0;
            Context3DClearMask.DEPTH = 1 << 1;
            Context3DClearMask.STENCIL = 1 << 2;
            Context3DClearMask.ALL = Context3DClearMask.COLOR | Context3DClearMask.DEPTH | Context3DClearMask.STENCIL;
            return Context3DClearMask;
        }(Object));
        display3D.Context3DClearMask = Context3DClearMask;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var Context3DCompareMode = (function (_super) {
            __extends(Context3DCompareMode, _super);
            function Context3DCompareMode() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Context3DCompareMode.getGLVal = function (gl, str) {
                switch (str) {
                    case Context3DCompareMode.ALWAYS:
                        return gl.ALWAYS;
                    case Context3DCompareMode.NEVER:
                        return gl.NEAREST;
                    case Context3DCompareMode.LESS:
                        return gl.LESS;
                    case Context3DCompareMode.LESS_EQUAL:
                        return gl.LESS | gl.EQUAL;
                    case Context3DCompareMode.EQUAL:
                        return gl.EQUAL;
                    case Context3DCompareMode.GREATER_EQUAL:
                        return gl.GREATER | gl.EQUAL;
                    case Context3DCompareMode.GREATER:
                        return gl.GREATER;
                    case Context3DCompareMode.NOT_EQUAL:
                        return gl.NOTEQUAL;
                }
                return 0;
            };
            Context3DCompareMode.ALWAYS = "always";
            Context3DCompareMode.NEVER = "never";
            Context3DCompareMode.LESS = "less";
            Context3DCompareMode.LESS_EQUAL = "lessEqual";
            Context3DCompareMode.EQUAL = "equal";
            Context3DCompareMode.GREATER_EQUAL = "greaterEqual";
            Context3DCompareMode.GREATER = "greater";
            Context3DCompareMode.NOT_EQUAL = "notEqual";
            return Context3DCompareMode;
        }(Object));
        display3D.Context3DCompareMode = Context3DCompareMode;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var Context3DMipFilter = (function (_super) {
            __extends(Context3DMipFilter, _super);
            function Context3DMipFilter() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Context3DMipFilter.MIPNONE = "mipnone";
            Context3DMipFilter.MIPNEAREST = "mipnearest";
            Context3DMipFilter.MIPLINEAR = "miplinear";
            return Context3DMipFilter;
        }(Object));
        display3D.Context3DMipFilter = Context3DMipFilter;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var Context3DProfile = (function (_super) {
            __extends(Context3DProfile, _super);
            function Context3DProfile() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Context3DProfile.BASELINE = "baseline";
            Context3DProfile.BASELINE_CONSTRAINED = "baselineConstrained";
            Context3DProfile.BASELINE_EXTENDED = "baselineExtended";
            Context3DProfile.STANDARD = "standard";
            Context3DProfile.STANDARD_CONSTRAINED = "standardConstrained";
            Context3DProfile.STANDARD_EXTENDED = "standardExtended";
            return Context3DProfile;
        }(Object));
        display3D.Context3DProfile = Context3DProfile;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var Context3DProgramType = (function (_super) {
            __extends(Context3DProgramType, _super);
            function Context3DProgramType() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Context3DProgramType.VERTEX = "vertex";
            Context3DProgramType.FRAGMENT = "fragment";
            return Context3DProgramType;
        }(Object));
        display3D.Context3DProgramType = Context3DProgramType;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var Context3DRenderMode = (function (_super) {
            __extends(Context3DRenderMode, _super);
            function Context3DRenderMode() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Context3DRenderMode.AUTO = "auto";
            Context3DRenderMode.SOFTWARE = "software";
            return Context3DRenderMode;
        }(Object));
        display3D.Context3DRenderMode = Context3DRenderMode;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var Context3DStencilAction = (function (_super) {
            __extends(Context3DStencilAction, _super);
            function Context3DStencilAction() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Context3DStencilAction.KEEP = "keep";
            Context3DStencilAction.ZERO = "zero";
            Context3DStencilAction.INCREMENT_SATURATE = "incrementSaturate";
            Context3DStencilAction.DECREMENT_SATURATE = "decrementSaturate";
            Context3DStencilAction.INVERT = "invert";
            Context3DStencilAction.INCREMENT_WRAP = "incrementWrap";
            Context3DStencilAction.DECREMENT_WRAP = "decrementWrap";
            Context3DStencilAction.SET = "set";
            return Context3DStencilAction;
        }(Object));
        display3D.Context3DStencilAction = Context3DStencilAction;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var Context3DTextureFilter = (function (_super) {
            __extends(Context3DTextureFilter, _super);
            function Context3DTextureFilter() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Context3DTextureFilter.NEAREST = "nearest";
            Context3DTextureFilter.LINEAR = "linear";
            Context3DTextureFilter.ANISOTROPIC2X = "anisotropic2x";
            Context3DTextureFilter.ANISOTROPIC4X = "anisotropic4x";
            Context3DTextureFilter.ANISOTROPIC8X = "anisotropic8x";
            Context3DTextureFilter.ANISOTROPIC16X = "anisotropic16x";
            return Context3DTextureFilter;
        }(Object));
        display3D.Context3DTextureFilter = Context3DTextureFilter;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var Context3DTextureFormat = (function (_super) {
            __extends(Context3DTextureFormat, _super);
            function Context3DTextureFormat() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Context3DTextureFormat.BGRA = "bgra";
            Context3DTextureFormat.RGBA_HALF_FLOAT = "rgbaHalfFloat";
            Context3DTextureFormat.COMPRESSED = "compressed";
            Context3DTextureFormat.COMPRESSED_ALPHA = "compressedAlpha";
            Context3DTextureFormat.BGR_PACKED = "bgrPacked565";
            Context3DTextureFormat.BGRA_PACKED = "bgraPacked4444";
            return Context3DTextureFormat;
        }(Object));
        display3D.Context3DTextureFormat = Context3DTextureFormat;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var Context3DTriangleFace = (function (_super) {
            __extends(Context3DTriangleFace, _super);
            function Context3DTriangleFace() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Context3DTriangleFace.getGLVal = function (gl, str) {
                switch (str) {
                    case Context3DTriangleFace.NONE:
                        return gl.NONE;
                    case Context3DTriangleFace.BACK:
                        return gl.FRONT;
                    case Context3DTriangleFace.FRONT:
                        return gl.BACK;
                    case Context3DTriangleFace.FRONT_AND_BACK:
                        return gl.FRONT_AND_BACK;
                }
                return 0;
            };
            Context3DTriangleFace.NONE = "none";
            Context3DTriangleFace.BACK = "back";
            Context3DTriangleFace.FRONT = "front";
            Context3DTriangleFace.FRONT_AND_BACK = "frontAndBack";
            return Context3DTriangleFace;
        }(Object));
        display3D.Context3DTriangleFace = Context3DTriangleFace;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var Context3DVertexBufferFormat = (function (_super) {
            __extends(Context3DVertexBufferFormat, _super);
            function Context3DVertexBufferFormat() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Context3DVertexBufferFormat.FLOAT_1 = "float1";
            Context3DVertexBufferFormat.FLOAT_2 = "float2";
            Context3DVertexBufferFormat.FLOAT_3 = "float3";
            Context3DVertexBufferFormat.FLOAT_4 = "float4";
            Context3DVertexBufferFormat.BYTES_4 = "bytes4";
            return Context3DVertexBufferFormat;
        }(Object));
        display3D.Context3DVertexBufferFormat = Context3DVertexBufferFormat;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var Context3DWrapMode = (function (_super) {
            __extends(Context3DWrapMode, _super);
            function Context3DWrapMode() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Context3DWrapMode.REPEAT = "repeat";
            Context3DWrapMode.CLAMP = "clamp";
            Context3DWrapMode.CLAMP_U_REPEAT_V = "clamp_u_repeat_v";
            Context3DWrapMode.REPEAT_U_CLAMP_V = "repeat_u_clamp_v";
            return Context3DWrapMode;
        }(Object));
        display3D.Context3DWrapMode = Context3DWrapMode;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var Event = (function () {
            function Event(type, bubbles, cancelable) {
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                this._bubbles = false;
                this._cancelable = false;
                this._eventPhase = 0;
                this._prevented = false;
                this.mStopsPropagation = false;
                this.mStopsImmediatePropagation = false;
                this._eventPhase = events.EventPhase.AT_TARGET;
                this.ctor(type, bubbles, cancelable);
            }
            Event.prototype.formatToString = function (className) {
                var args = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    args[_i - 1] = arguments[_i];
                }
                var values = ' ';
                var len = args.length;
                for (var i = 0; i < len; ++i) {
                    var a = args[i];
                    values += a + '=' + quotes.bind(this)(this[a]) + '';
                    if (i < len - 1)
                        values += ' ';
                }
                return '[' + className + values + ']';
                function quotes(v) {
                    if (typeof v === 'string')
                        return '"' + v + '"';
                    return v;
                }
            };
            Event.prototype.clone = function () {
                return new Event(this.type, this.bubbles, this.cancelable);
            };
            Event.prototype.toString = function () {
                return this.formatToString("Event", "type", "bubbles", "cancelable", "eventPhase");
            };
            Object.defineProperty(Event.prototype, "type", {
                get: function () { return this._type; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Event.prototype, "bubbles", {
                get: function () { return this._bubbles; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Event.prototype, "cancelable", {
                get: function () { return this._cancelable; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Event.prototype, "target", {
                get: function () { return this._target; },
                set: function (value) { this._target = value; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Event.prototype, "currentTarget", {
                get: function () { return this._currentTarget; },
                set: function (value) { this._currentTarget = value; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Event.prototype, "eventPhase", {
                get: function () {
                    return this._eventPhase;
                },
                set: function (value) {
                    if (value != events.EventPhase.AT_TARGET && value != events.EventPhase.BUBBLING_PHASE) {
                        return;
                    }
                    this._eventPhase = value;
                },
                enumerable: true,
                configurable: true
            });
            Event.prototype.stopPropagation = function () {
                if (this.base && 'stopPropagation' in this.base)
                    this.base.stopPropagation();
                this.mStopsPropagation = true;
            };
            Event.prototype.stopImmediatePropagation = function () {
                this.mStopsPropagation = this.mStopsImmediatePropagation = true;
            };
            Event.prototype.preventDefault = function () {
                if (this.base && 'preventDefault' in this.base)
                    this.base.preventDefault();
                this._prevented = true;
            };
            Event.prototype.isDefaultPrevented = function () {
                return this._prevented;
            };
            Object.defineProperty(Event.prototype, "stopsPropagation", {
                get: function () { return this.mStopsPropagation; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Event.prototype, "stopsImmediatePropagation", {
                get: function () { return this.mStopsImmediatePropagation; },
                enumerable: true,
                configurable: true
            });
            Event.prototype.ctor = function (type, bubbles, cancelable) {
                this._type = type;
                this._bubbles = bubbles;
                this._cancelable = cancelable;
            };
            Event.ACTIVATE = "activate";
            Event.ADDED = "added";
            Event.ADDED_TO_STAGE = "addedToStage";
            Event.BROWSER_ZOOM_CHANGE = "browserZoomChange";
            Event.CANCEL = "cancel";
            Event.CHANGE = "change";
            Event.CLEAR = "clear";
            Event.CLOSE = "close";
            Event.CLOSING = "closing";
            Event.COMPLETE = "complete";
            Event.CONNECT = "connect";
            Event.COPY = "copy";
            Event.CUT = "cut";
            Event.DEACTIVATE = "deactivate";
            Event.DISPLAYING = "displaying";
            Event.ENTER_FRAME = "enterFrame";
            Event.FRAME_CONSTRUCTED = "frameConstructed";
            Event.EXIT_FRAME = "exitFrame";
            Event.EXITING = "exiting";
            Event.FRAME_LABEL = "frameLabel";
            Event.ID3 = "id3";
            Event.INIT = "init";
            Event.LOCATION_CHANGE = "locationChange";
            Event.MOUSE_LEAVE = "mouseLeave";
            Event.NETWORK_CHANGE = "networkChange";
            Event.OPEN = "open";
            Event.PASTE = "paste";
            Event.REMOVED = "removed";
            Event.REMOVED_FROM_STAGE = "removedFromStage";
            Event.RENDER = "render";
            Event.RESIZE = "resize";
            Event.SCROLL = "scroll";
            Event.TEXT_INTERACTION_MODE_CHANGE = "textInteractionModeChange";
            Event.SELECT = "select";
            Event.SELECT_ALL = "selectAll";
            Event.SOUND_COMPLETE = "soundComplete";
            Event.STANDARD_ERROR_CLOSE = "standardErrorClose";
            Event.STANDARD_INPUT_CLOSE = "standardInputClose";
            Event.STANDARD_OUTPUT_CLOSE = "standardOutputClose";
            Event.TAB_CHILDREN_CHANGE = "tabChildrenChange";
            Event.TAB_ENABLED_CHANGE = "tabEnabledChange";
            Event.TAB_INDEX_CHANGE = "tabIndexChange";
            Event.UNLOAD = "unload";
            Event.USER_IDLE = "userIdle";
            Event.USER_PRESENT = "userPresent";
            Event.FULLSCREEN = "fullScreen";
            Event.HTML_BOUNDS_CHANGE = "htmlBoundsChange";
            Event.HTML_DOM_INITIALIZE = "htmlDOMInitialize";
            Event.HTML_RENDER = "htmlRender";
            Event.CONTEXT3D_CREATE = "context3DCreate";
            Event.TEXTURE_READY = "textureReady";
            Event.VIDEO_FRAME = "videoFrame";
            Event.SUSPEND = "suspend";
            Event.CHANNEL_MESSAGE = "channelMessage";
            Event.CHANNEL_STATE = "channelState";
            Event.WORKER_STATE = "workerState";
            return Event;
        }());
        events.Event = Event;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var StageOrientationEvent = (function (_super) {
            __extends(StageOrientationEvent, _super);
            function StageOrientationEvent(type, bubbles, cancelable, beforeOrientation, afterOrientation) {
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                if (beforeOrientation === void 0) { beforeOrientation = null; }
                if (afterOrientation === void 0) { afterOrientation = null; }
                var _this = _super.call(this, type, bubbles, cancelable) || this;
                _this.mBeforeOrientation = beforeOrientation;
                _this.mAfterOrientation = afterOrientation;
                return _this;
            }
            Object.defineProperty(StageOrientationEvent.prototype, "afterOrientation", {
                get: function () {
                    return this.mAfterOrientation;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(StageOrientationEvent.prototype, "beforeOrientation", {
                get: function () {
                    return this.mBeforeOrientation;
                },
                enumerable: true,
                configurable: true
            });
            StageOrientationEvent.prototype.clone = function () {
                return new StageOrientationEvent(this.type, this.bubbles, this.cancelable, this.mBeforeOrientation, this.mAfterOrientation);
            };
            StageOrientationEvent.prototype.toString = function () {
                return this.formatToString("StageOrientationEvent", "type", "bubbles", "cancelable", "eventPhase", "beforeOrientation", "afterOrientation");
            };
            StageOrientationEvent.ORIENTATION_CHANGE = "orientationChange";
            StageOrientationEvent.ORIENTATION_CHANGING = "orientationChanging";
            return StageOrientationEvent;
        }(events.Event));
        events.StageOrientationEvent = StageOrientationEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var filters;
    (function (filters) {
        var BitmapFilter = (function (_super) {
            __extends(BitmapFilter, _super);
            function BitmapFilter() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            BitmapFilter.prototype.clone = function () {
                return null;
            };
            return BitmapFilter;
        }(Object));
        filters.BitmapFilter = BitmapFilter;
    })(filters = flash.filters || (flash.filters = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var filters;
    (function (filters) {
        var BitmapFilterQuality = (function () {
            function BitmapFilterQuality() {
            }
            BitmapFilterQuality.HIGH = 3;
            BitmapFilterQuality.LOW = 1;
            BitmapFilterQuality.MEDIUM = 2;
            return BitmapFilterQuality;
        }());
        filters.BitmapFilterQuality = BitmapFilterQuality;
    })(filters = flash.filters || (flash.filters = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var geom;
    (function (geom) {
        var ColorTransform = (function (_super) {
            __extends(ColorTransform, _super);
            function ColorTransform(redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset) {
                var _newTarget = this.constructor;
                if (redMultiplier === void 0) { redMultiplier = 1.0; }
                if (greenMultiplier === void 0) { greenMultiplier = 1.0; }
                if (blueMultiplier === void 0) { blueMultiplier = 1.0; }
                if (alphaMultiplier === void 0) { alphaMultiplier = 1.0; }
                if (redOffset === void 0) { redOffset = 0; }
                if (greenOffset === void 0) { greenOffset = 0; }
                if (blueOffset === void 0) { blueOffset = 0; }
                if (alphaOffset === void 0) { alphaOffset = 0; }
                var _this = _super.call(this) || this;
                _this.tint = 0xffffffff;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.redMultiplier = redMultiplier;
                _this.greenMultiplier = greenMultiplier;
                _this.blueMultiplier = blueMultiplier;
                _this.alphaMultiplier = alphaMultiplier;
                _this.redOffset = redOffset;
                _this.greenOffset = greenOffset;
                _this.blueOffset = blueOffset;
                _this.alphaOffset = alphaOffset;
                return _this;
            }
            Object.defineProperty(ColorTransform.prototype, "color", {
                get: function () {
                    return this.redOffset << 16 | this.greenOffset << 8 | this.blueOffset;
                },
                set: function (newColor) {
                    this.redMultiplier = this.greenMultiplier = this.blueMultiplier = 0;
                    this.redOffset = newColor >> 16 & 255;
                    this.greenOffset = newColor >> 8 & 255;
                    this.blueOffset = newColor & 255;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(ColorTransform.prototype, "redMultiplier", {
                get: function () {
                    return this._redMultiplier;
                },
                set: function (value) {
                    this._redMultiplier = value;
                    this.tint = ((this._redMultiplier * 0xff) << 0) | ((this._greenMultiplier * 0xff) << 8) | ((this._blueMultiplier * 0xff) << 16) | ((this._alphaMultiplier * 0xff) << 24);
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(ColorTransform.prototype, "greenMultiplier", {
                get: function () {
                    return this._greenMultiplier;
                },
                set: function (value) {
                    this._greenMultiplier = value;
                    this.tint = ((this._redMultiplier * 0xff) << 0) | ((this._greenMultiplier * 0xff) << 8) | ((this._blueMultiplier * 0xff) << 16) | ((this._alphaMultiplier * 0xff) << 24);
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(ColorTransform.prototype, "blueMultiplier", {
                get: function () {
                    return this._blueMultiplier;
                },
                set: function (value) {
                    this._blueMultiplier = value;
                    this.tint = ((this._redMultiplier * 0xff) << 0) | ((this._greenMultiplier * 0xff) << 8) | ((this._blueMultiplier * 0xff) << 16) | ((this._alphaMultiplier * 0xff) << 24);
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(ColorTransform.prototype, "alphaMultiplier", {
                get: function () {
                    return this._alphaMultiplier;
                },
                set: function (value) {
                    this._alphaMultiplier = value;
                    this.tint = ((this._redMultiplier * 0xff) << 0) | ((this._greenMultiplier * 0xff) << 8) | ((this._blueMultiplier * 0xff) << 16) | ((this._alphaMultiplier * 0xff) << 24);
                },
                enumerable: true,
                configurable: true
            });
            ColorTransform.prototype.concat = function (second) {
                this.alphaOffset = this.alphaOffset + this.alphaMultiplier * second.alphaOffset;
                this.alphaMultiplier = this.alphaMultiplier * second.alphaMultiplier;
                this.redOffset = this.redOffset + this.redMultiplier * second.redOffset;
                this.redMultiplier = this.redMultiplier * second.redMultiplier;
                this.greenOffset = this.greenOffset + this.greenMultiplier * second.greenOffset;
                this.greenMultiplier = this.greenMultiplier * second.greenMultiplier;
                this.blueOffset = this.blueOffset + this.blueMultiplier * second.blueOffset;
                this.blueMultiplier = this.blueMultiplier * second.blueMultiplier;
            };
            ColorTransform.prototype.toString = function () {
                return "(redMultiplier=" + this.redMultiplier + ", greenMultiplier=" + this.greenMultiplier + ", blueMultiplier=" + this.blueMultiplier + ", alphaMultiplier=" + this.alphaMultiplier + ", redOffset=" + this.redOffset + ", greenOffset=" + this.greenOffset + ", blueOffset=" + this.blueOffset + ", alphaOffset=" + this.alphaOffset + ")";
            };
            return ColorTransform;
        }(Object));
        geom.ColorTransform = ColorTransform;
    })(geom = flash.geom || (flash.geom = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var geom;
    (function (geom) {
        var Orientation3D = (function (_super) {
            __extends(Orientation3D, _super);
            function Orientation3D() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Orientation3D.EULER_ANGLES = "eulerAngles";
            Orientation3D.AXIS_ANGLE = "axisAngle";
            Orientation3D.QUATERNION = "quaternion";
            return Orientation3D;
        }(Object));
        geom.Orientation3D = Orientation3D;
    })(geom = flash.geom || (flash.geom = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var geom;
    (function (geom) {
        var Point = (function (_super) {
            __extends(Point, _super);
            function Point(x, y) {
                var _newTarget = this.constructor;
                if (x === void 0) { x = 0; }
                if (y === void 0) { y = 0; }
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.x = x;
                _this.y = y;
                return _this;
            }
            Point.interpolate = function (pt1, pt2, f) {
                return new Point(pt2.x + f * (pt1.x - pt2.x), pt2.y + f * (pt1.y - pt2.y));
            };
            Point.distance = function (pt1, pt2) {
                return pt1.subtract(pt2).length;
            };
            Point.polar = function (len, angle) {
                return new Point(len * Math.cos(angle), len * Math.sin(angle));
            };
            Object.defineProperty(Point.prototype, "length", {
                get: function () {
                    return Math.sqrt(this.x * this.x + this.y * this.y);
                },
                enumerable: true,
                configurable: true
            });
            Point.prototype.clone = function () {
                return new Point(this.x, this.y);
            };
            Point.prototype.offset = function (dx, dy) {
                this.x = this.x + dx;
                this.y = this.y + dy;
            };
            Point.prototype.equals = function (toCompare) {
                return toCompare.x === this.x && toCompare.y === this.y;
            };
            Point.prototype.subtract = function (v) {
                return new Point(this.x - v.x, this.y - v.y);
            };
            Point.prototype.add = function (v) {
                return new Point(this.x + v.x, this.y + v.y);
            };
            Point.prototype.normalize = function (thickness) {
                var invD = this.length;
                if (invD > 0) {
                    invD = thickness / invD;
                    this.x = this.x * invD;
                    this.y = this.y * invD;
                }
            };
            Point.prototype.toString = function () {
                return "(x=" + this.x + ", y=" + this.y + ")";
            };
            Point.prototype.copyFrom = function (sourcePoint) {
                this.x = sourcePoint.x;
                this.y = sourcePoint.y;
            };
            Point.prototype.setTo = function (xa, ya) {
                this.x = xa;
                this.y = ya;
            };
            return Point;
        }(Object));
        geom.Point = Point;
    })(geom = flash.geom || (flash.geom = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var geom;
    (function (geom) {
        var Vector3D = (function (_super) {
            __extends(Vector3D, _super);
            function Vector3D(x, y, z, w) {
                var _newTarget = this.constructor;
                if (x === void 0) { x = 0.0; }
                if (y === void 0) { y = 0.0; }
                if (z === void 0) { z = 0.0; }
                if (w === void 0) { w = 0.0; }
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.x = x;
                _this.y = y;
                _this.z = z;
                _this.w = w;
                return _this;
            }
            Vector3D.angleBetween = function (a, b) {
                var dot = a.x * b.x + a.y * b.y + a.z * b.z;
                var al = a.length;
                var bl = b.length;
                dot = dot / (al * bl);
                return Math.acos(dot);
            };
            Vector3D.distance = function (pt1, pt2) {
                return pt1.subtract(pt2).length;
            };
            Vector3D.prototype.clone = function () {
                return new Vector3D(this.x, this.y, this.z, this.w);
            };
            Vector3D.prototype.dotProduct = function (a) {
                return this.x * a.x + this.y * a.y + this.z * a.z;
            };
            Vector3D.prototype.crossProduct = function (a) {
                return new Vector3D(this.y * a.z - this.z * a.y, this.z * a.x - this.x * a.z, this.x * a.y - this.y * a.x, 1);
            };
            Object.defineProperty(Vector3D.prototype, "length", {
                get: function () {
                    var r = this.x * this.x + this.y * this.y + this.z * this.z;
                    if (r <= 0) {
                        return 0;
                    }
                    return Math.sqrt(r);
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Vector3D.prototype, "lengthSquared", {
                get: function () {
                    return this.x * this.x + this.y * this.y + this.z * this.z;
                },
                enumerable: true,
                configurable: true
            });
            Vector3D.prototype.normalize = function () {
                var len = this.length;
                var lenInv = len != 0 ? 1 / len : 0;
                this.x = this.x * lenInv;
                this.y = this.y * lenInv;
                this.z = this.z * lenInv;
                return len;
            };
            Vector3D.prototype.scaleBy = function (s) {
                this.x = this.x * s;
                this.y = this.y * s;
                this.z = this.z * s;
            };
            Vector3D.prototype.incrementBy = function (a) {
                this.x = this.x + a.x;
                this.y = this.y + a.y;
                this.z = this.z + a.z;
            };
            Vector3D.prototype.decrementBy = function (a) {
                this.x = this.x - a.x;
                this.y = this.y - a.y;
                this.z = this.z - a.z;
            };
            Vector3D.prototype.add = function (a) {
                return new Vector3D(this.x + a.x, this.y + a.y, this.z + a.z);
            };
            Vector3D.prototype.subtract = function (a) {
                return new Vector3D(this.x - a.x, this.y - a.y, this.z - a.z);
            };
            Vector3D.prototype.negate = function () {
                this.x = -this.x;
                this.y = -this.y;
                this.z = -this.z;
            };
            Vector3D.prototype.equals = function (toCompare, allFour) {
                if (allFour === void 0) { allFour = false; }
                return this.x === toCompare.x && this.y === toCompare.y && this.z === toCompare.z && (allFour ? this.w === toCompare.w : true);
            };
            Vector3D.prototype.nearEquals = function (toCompare, tolerance, allFour) {
                if (allFour === void 0) { allFour = false; }
                var diff = this.x - toCompare.x;
                diff = diff < 0 ? 0 - diff : diff;
                var goodEnough = diff < tolerance;
                if (goodEnough) {
                    diff = this.y - toCompare.y;
                    diff = diff < 0 ? 0 - diff : diff;
                    goodEnough = diff < tolerance;
                    if (goodEnough) {
                        diff = this.z - toCompare.z;
                        diff = diff < 0 ? 0 - diff : diff;
                        goodEnough = diff < tolerance;
                        if (goodEnough && allFour) {
                            diff = this.w = toCompare.w;
                            diff = diff < 0 ? 0 - diff : diff;
                            goodEnough = diff < tolerance;
                        }
                    }
                }
                return goodEnough;
            };
            Vector3D.prototype.project = function () {
                var tRecip = 1 / this.w;
                this.x = this.x * tRecip;
                this.y = this.y * tRecip;
                this.z = this.z * tRecip;
            };
            Vector3D.prototype.toString = function () {
                var s = "Vector3D(" + this.x + ", " + this.y + ", " + this.z;
                s = s + ")";
                return s;
            };
            Vector3D.prototype.copyFrom = function (sourceVector3D) {
                this.x = sourceVector3D.x;
                this.y = sourceVector3D.y;
                this.z = sourceVector3D.z;
            };
            Vector3D.prototype.setTo = function (xa, ya, za) {
                this.x = xa;
                this.y = ya;
                this.z = za;
            };
            Vector3D.X_AXIS = new Vector3D(1, 0, 0);
            Vector3D.Y_AXIS = new Vector3D(0, 1, 0);
            Vector3D.Z_AXIS = new Vector3D(0, 0, 1);
            return Vector3D;
        }(Object));
        geom.Vector3D = Vector3D;
    })(geom = flash.geom || (flash.geom = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var media;
    (function (media) {
        var AudioDecoder = (function () {
            function AudioDecoder() {
            }
            AudioDecoder.DOLBY_DIGITAL = "DolbyDigital";
            AudioDecoder.DOLBY_DIGITAL_PLUS = "DolbyDigitalPlus";
            AudioDecoder.DTS = "DTS";
            AudioDecoder.DTS_EXPRESS = "DTSExpress";
            AudioDecoder.DTS_HD_HIGH_RESOLUTION_AUDIO = "DTSHDHighResolutionAudio";
            AudioDecoder.DTS_HD_MASTER_AUDIO = "DTSHDMasterAudio";
            return AudioDecoder;
        }());
        media.AudioDecoder = AudioDecoder;
    })(media = flash.media || (flash.media = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var media;
    (function (media) {
        var ID3Info = (function (_super) {
            __extends(ID3Info, _super);
            function ID3Info() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            return ID3Info;
        }(Object));
        media.ID3Info = ID3Info;
    })(media = flash.media || (flash.media = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var media;
    (function (media) {
        var SoundCodec = (function (_super) {
            __extends(SoundCodec, _super);
            function SoundCodec() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            SoundCodec.NELLYMOSER = "NellyMoser";
            SoundCodec.SPEEX = "Speex";
            SoundCodec.PCMA = "pcma";
            SoundCodec.PCMU = "pcmu";
            return SoundCodec;
        }(Object));
        media.SoundCodec = SoundCodec;
    })(media = flash.media || (flash.media = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var media;
    (function (media) {
        var SoundLoaderContext = (function (_super) {
            __extends(SoundLoaderContext, _super);
            function SoundLoaderContext(bufferTime, checkPolicyFile) {
                var _newTarget = this.constructor;
                if (bufferTime === void 0) { bufferTime = 1000; }
                if (checkPolicyFile === void 0) { checkPolicyFile = false; }
                var _this = _super.call(this) || this;
                _this.bufferTime = 1000;
                _this.checkPolicyFile = false;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.checkPolicyFile = checkPolicyFile;
                _this.bufferTime = bufferTime;
                return _this;
            }
            return SoundLoaderContext;
        }(Object));
        media.SoundLoaderContext = SoundLoaderContext;
    })(media = flash.media || (flash.media = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var media;
    (function (media) {
        var SoundTransform = (function (_super) {
            __extends(SoundTransform, _super);
            function SoundTransform(vol, panning) {
                var _newTarget = this.constructor;
                if (vol === void 0) { vol = 1; }
                if (panning === void 0) { panning = 0; }
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.volume = vol;
                return _this;
            }
            SoundTransform.prototype.__init = function (gainNode) {
                this._gainNode = gainNode;
                if (this._gainNode) {
                    this.volume = this.volume;
                }
            };
            Object.defineProperty(SoundTransform.prototype, "volume", {
                get: function () {
                    return this._volume;
                },
                set: function (v) {
                    this._volume = v;
                    if (!this._gainNode)
                        return;
                    this._gainNode.gain.value = v;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(SoundTransform.prototype, "leftToLeft", {
                get: function () {
                    return 0;
                },
                set: function (v) {
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(SoundTransform.prototype, "leftToRight", {
                get: function () {
                    return 0;
                },
                set: function (v) {
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(SoundTransform.prototype, "rightToRight", {
                get: function () {
                    return 0;
                },
                set: function (param1) {
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(SoundTransform.prototype, "rightToLeft", {
                get: function () {
                    return 0;
                },
                set: function (param1) {
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(SoundTransform.prototype, "pan", {
                get: function () {
                    if (this.leftToRight === 0 && this.rightToLeft === 0) {
                        return 1 - this.leftToLeft * this.leftToLeft;
                    }
                    return 0;
                },
                set: function (panning) {
                    this.leftToLeft = Math.sqrt(1 - panning);
                    this.leftToRight = 0;
                    this.rightToRight = Math.sqrt(1 + panning);
                    this.rightToLeft = 0;
                },
                enumerable: true,
                configurable: true
            });
            return SoundTransform;
        }(Object));
        media.SoundTransform = SoundTransform;
    })(media = flash.media || (flash.media = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var net;
    (function (net) {
        var FileFilter = (function () {
            function FileFilter(description, extension, macType) {
                if (macType === void 0) { macType = null; }
                this.description = description;
                this.extension = extension;
                this.macType = macType;
            }
            return FileFilter;
        }());
        net.FileFilter = FileFilter;
    })(net = flash.net || (flash.net = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var net;
    (function (net) {
        var ObjectEncoding = (function () {
            function ObjectEncoding() {
            }
            ObjectEncoding.AMF0 = 0;
            ObjectEncoding.AMF3 = 3;
            ObjectEncoding.DEFAULT = 3;
            ObjectEncoding.dynamicPropertyWriter = null;
            return ObjectEncoding;
        }());
        net.ObjectEncoding = ObjectEncoding;
    })(net = flash.net || (flash.net = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var net;
    (function (net) {
        var URLRequest = (function () {
            function URLRequest(url) {
                if (url === void 0) { url = null; }
                if (url != null) {
                    this.url = url;
                }
                this.requestHeaders = [];
            }
            Object.defineProperty(URLRequest.prototype, "url", {
                get: function () {
                    return this._url;
                },
                set: function (param1) {
                    this._url = param1;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(URLRequest.prototype, "data", {
                get: function () { return this._data; },
                set: function (value) {
                    this._data = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(URLRequest.prototype, "method", {
                get: function () { return this._method; },
                set: function (value) {
                    this._method = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(URLRequest.prototype, "contentType", {
                get: function () { return this._contentType; },
                set: function (value) {
                    this._contentType = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(URLRequest.prototype, "requestHeaders", {
                get: function () { return this._headers; },
                set: function (value) {
                    this._headers = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(URLRequest.prototype, "digest", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            URLRequest.prototype.useRedirectedURL = function (param1, param2, param3, param4) {
                if (param2 === void 0) { param2 = false; }
                if (param3 === void 0) { param3 = null; }
                if (param4 === void 0) { param4 = null; }
            };
            return URLRequest;
        }());
        net.URLRequest = URLRequest;
    })(net = flash.net || (flash.net = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var net;
    (function (net) {
        var URLRequestHeader = (function (_super) {
            __extends(URLRequestHeader, _super);
            function URLRequestHeader(name, value) {
                var _newTarget = this.constructor;
                if (name === void 0) { name = ""; }
                if (value === void 0) { value = ""; }
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.name = name;
                _this.value = value;
                return _this;
            }
            return URLRequestHeader;
        }(Object));
        net.URLRequestHeader = URLRequestHeader;
    })(net = flash.net || (flash.net = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var system;
    (function (system) {
        var ImageDecodingPolicy = (function () {
            function ImageDecodingPolicy() {
            }
            ImageDecodingPolicy.ON_DEMAND = "onDemand";
            ImageDecodingPolicy.ON_LOAD = "onLoad";
            return ImageDecodingPolicy;
        }());
        system.ImageDecodingPolicy = ImageDecodingPolicy;
    })(system = flash.system || (flash.system = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var system;
    (function (system) {
        var Security = (function () {
            function Security() {
            }
            Security.exactSettings = function () {
                return false;
            };
            Object.defineProperty(Security, "pageDomain", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Security, "sandboxType", {
                get: function () {
                    return Security.APPLICATION;
                },
                enumerable: true,
                configurable: true
            });
            Security.allowDomain = function () {
                var domains = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    domains[_i] = arguments[_i];
                }
            };
            Security.allowInsecureDomain = function () {
                var domains = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    domains[_i] = arguments[_i];
                }
            };
            Security.loadPolicyFile = function (url) {
            };
            Security.showSettings = function (panel) {
                if (panel === void 0) { panel = "default"; }
            };
            Security.APPLICATION = "application";
            Security.LOCAL_TRUSTED = "localTrusted";
            Security.LOCAL_WITH_FILE = "localWithFile";
            Security.LOCAL_WITH_NETWORK = "localWithNetwork";
            Security.REMOTE = "remote";
            return Security;
        }());
        system.Security = Security;
    })(system = flash.system || (flash.system = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var system;
    (function (system) {
        var SecurityDomain = (function () {
            function SecurityDomain() {
            }
            Object.defineProperty(SecurityDomain, "currentDomain", {
                get: function () {
                    SecurityDomain.sCurrentDomain = SecurityDomain.sCurrentDomain || new SecurityDomain;
                    return SecurityDomain.sCurrentDomain;
                },
                enumerable: true,
                configurable: true
            });
            return SecurityDomain;
        }());
        system.SecurityDomain = SecurityDomain;
    })(system = flash.system || (flash.system = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var system;
    (function (system) {
        var SecurityPanel = (function () {
            function SecurityPanel() {
            }
            SecurityPanel.CAMERA = "camera";
            SecurityPanel.DEFAULT = "default";
            SecurityPanel.DISPLAY = "display";
            SecurityPanel.LOCAL_STORAGE = "localStorage";
            SecurityPanel.MICROPHONE = "microphone";
            SecurityPanel.PRIVACY = "privacy";
            SecurityPanel.SETTINGS_MANAGER = "settingsManager";
            return SecurityPanel;
        }());
        system.SecurityPanel = SecurityPanel;
    })(system = flash.system || (flash.system = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var AntiAliasType = (function (_super) {
            __extends(AntiAliasType, _super);
            function AntiAliasType() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            AntiAliasType.NORMAL = "normal";
            AntiAliasType.ADVANCED = "advanced";
            return AntiAliasType;
        }(Object));
        text.AntiAliasType = AntiAliasType;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var CSMSettings = (function (_super) {
            __extends(CSMSettings, _super);
            function CSMSettings(fontSize, insideCutoff, outsideCutoff) {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.fontSize = fontSize;
                _this.insideCutoff = insideCutoff;
                _this.outsideCutoff = outsideCutoff;
                return _this;
            }
            return CSMSettings;
        }(Object));
        text.CSMSettings = CSMSettings;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var Font = (function (_super) {
            __extends(Font, _super);
            function Font() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Font.enumerateFonts = function (param1) {
                if (param1 === void 0) { param1 = false; }
                return null;
            };
            Font.registerFont = function (param1) {
            };
            Object.defineProperty(Font.prototype, "fontName", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Font.prototype, "fontStyle", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Font.prototype, "fontType", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Font.prototype.hasGlyphs = function (param1) {
                return null;
            };
            return Font;
        }(Object));
        text.Font = Font;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var FontStyle = (function (_super) {
            __extends(FontStyle, _super);
            function FontStyle() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            FontStyle.REGULAR = "regular";
            FontStyle.BOLD = "bold";
            FontStyle.ITALIC = "italic";
            FontStyle.BOLD_ITALIC = "boldItalic";
            return FontStyle;
        }(Object));
        text.FontStyle = FontStyle;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var FontType = (function (_super) {
            __extends(FontType, _super);
            function FontType() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            FontType.EMBEDDED = "embedded";
            FontType.EMBEDDED_CFF = "embeddedCFF";
            FontType.DEVICE = "device";
            return FontType;
        }(Object));
        text.FontType = FontType;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var GridFitType = (function (_super) {
            __extends(GridFitType, _super);
            function GridFitType() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            GridFitType.NONE = "none";
            GridFitType.PIXEL = "pixel";
            GridFitType.SUBPIXEL = "subpixel";
            return GridFitType;
        }(Object));
        text.GridFitType = GridFitType;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var TextColorType = (function (_super) {
            __extends(TextColorType, _super);
            function TextColorType() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            TextColorType.DARK_COLOR = "dark";
            TextColorType.LIGHT_COLOR = "light";
            return TextColorType;
        }(Object));
        text.TextColorType = TextColorType;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var TextDisplayMode = (function (_super) {
            __extends(TextDisplayMode, _super);
            function TextDisplayMode() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            TextDisplayMode.LCD = "lcd";
            TextDisplayMode.CRT = "crt";
            TextDisplayMode.DEFAULT = "default";
            return TextDisplayMode;
        }(Object));
        text.TextDisplayMode = TextDisplayMode;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var TextExtent = (function (_super) {
            __extends(TextExtent, _super);
            function TextExtent(width, height, textFieldWidth, textFieldHeight, ascent, descent) {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.width = width;
                _this.height = height;
                _this.textFieldWidth = textFieldWidth;
                _this.textFieldHeight = textFieldHeight;
                _this.ascent = ascent;
                _this.descent = descent;
                return _this;
            }
            return TextExtent;
        }(Object));
        text.TextExtent = TextExtent;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var TextFieldAutoSize = (function (_super) {
            __extends(TextFieldAutoSize, _super);
            function TextFieldAutoSize() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            TextFieldAutoSize.NONE = "none";
            TextFieldAutoSize.LEFT = "left";
            TextFieldAutoSize.CENTER = "center";
            TextFieldAutoSize.RIGHT = "right";
            return TextFieldAutoSize;
        }(Object));
        text.TextFieldAutoSize = TextFieldAutoSize;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var TextFieldType = (function (_super) {
            __extends(TextFieldType, _super);
            function TextFieldType() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            TextFieldType.INPUT = "input";
            TextFieldType.DYNAMIC = "dynamic";
            return TextFieldType;
        }(Object));
        text.TextFieldType = TextFieldType;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var TextFormatAlign = (function (_super) {
            __extends(TextFormatAlign, _super);
            function TextFormatAlign() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            TextFormatAlign.LEFT = "left";
            TextFormatAlign.CENTER = "center";
            TextFormatAlign.RIGHT = "right";
            TextFormatAlign.JUSTIFY = "justify";
            TextFormatAlign.START = "start";
            TextFormatAlign.END = "end";
            return TextFormatAlign;
        }(Object));
        text.TextFormatAlign = TextFormatAlign;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var TextFormatDisplay = (function (_super) {
            __extends(TextFormatDisplay, _super);
            function TextFormatDisplay() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            TextFormatDisplay.INLINE = "inline";
            TextFormatDisplay.BLOCK = "block";
            return TextFormatDisplay;
        }(Object));
        text.TextFormatDisplay = TextFormatDisplay;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var TextInteractionMode = (function (_super) {
            __extends(TextInteractionMode, _super);
            function TextInteractionMode() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            TextInteractionMode.NORMAL = "normal";
            TextInteractionMode.SELECTION = "selection";
            return TextInteractionMode;
        }(Object));
        text.TextInteractionMode = TextInteractionMode;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var TextLineMetrics = (function (_super) {
            __extends(TextLineMetrics, _super);
            function TextLineMetrics(x, width, height, ascent, descent, leading) {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.x = x;
                _this.width = width;
                _this.height = height;
                _this.ascent = ascent;
                _this.descent = descent;
                _this.leading = leading;
                return _this;
            }
            return TextLineMetrics;
        }(Object));
        text.TextLineMetrics = TextLineMetrics;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var TextRenderer = (function (_super) {
            __extends(TextRenderer, _super);
            function TextRenderer() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Object.defineProperty(TextRenderer, "antiAliasType", {
                get: function () {
                    return null;
                },
                set: function (param1) {
                },
                enumerable: true,
                configurable: true
            });
            TextRenderer.setAdvancedAntiAliasingTable = function (param1, param2, param3, param4) {
            };
            Object.defineProperty(TextRenderer, "maxLevel", {
                get: function () {
                    return 0;
                },
                set: function (param1) {
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextRenderer, "displayMode", {
                get: function () {
                    return null;
                },
                set: function (param1) {
                },
                enumerable: true,
                configurable: true
            });
            return TextRenderer;
        }(Object));
        text.TextRenderer = TextRenderer;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var TextSnapshot = (function (_super) {
            __extends(TextSnapshot, _super);
            function TextSnapshot() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            TextSnapshot.prototype.findText = function (param1, param2, param3) {
                return 0;
            };
            Object.defineProperty(TextSnapshot.prototype, "charCount", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            TextSnapshot.prototype.getSelected = function (param1, param2) {
                return true;
            };
            TextSnapshot.prototype.getSelectedText = function (param1) {
                if (param1 === void 0) { param1 = false; }
                return null;
            };
            TextSnapshot.prototype.getText = function (param1, param2, param3) {
                if (param3 === void 0) { param3 = false; }
                return null;
            };
            TextSnapshot.prototype.getTextRunInfo = function (param1, param2) {
                return null;
            };
            TextSnapshot.prototype.hitTestTextNearPos = function (param1, param2, param3) {
                if (param3 === void 0) { param3 = 0; }
                return 0;
            };
            TextSnapshot.prototype.setSelectColor = function (param1) {
                if (param1 === void 0) { param1 = 16776960; }
            };
            TextSnapshot.prototype.setSelected = function (param1, param2, param3) {
            };
            return TextSnapshot;
        }(Object));
        text.TextSnapshot = TextSnapshot;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var ui;
    (function (ui) {
        var ContextMenuBuiltInItems = (function () {
            function ContextMenuBuiltInItems() {
                this.forwardAndBack = false;
                this.loop = false;
                this.play = false;
                this.print = false;
                this.quality = false;
                this.rewind = false;
                this.save = false;
                this.zoom = false;
            }
            return ContextMenuBuiltInItems;
        }());
        ui.ContextMenuBuiltInItems = ContextMenuBuiltInItems;
    })(ui = flash.ui || (flash.ui = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var ui;
    (function (ui) {
        var ContextMenuClipboardItems = (function () {
            function ContextMenuClipboardItems() {
                this.clear = false;
                this.copy = false;
                this.cut = false;
                this.paste = false;
                this.selectAll = false;
            }
            return ContextMenuClipboardItems;
        }());
        ui.ContextMenuClipboardItems = ContextMenuClipboardItems;
    })(ui = flash.ui || (flash.ui = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var ui;
    (function (ui) {
        var Keyboard = (function (_super) {
            __extends(Keyboard, _super);
            function Keyboard() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Object.defineProperty(Keyboard, "capsLock", {
                get: function () {
                    return false;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Keyboard, "numLock", {
                get: function () {
                    return false;
                },
                enumerable: true,
                configurable: true
            });
            Keyboard.isAccessible = function () {
                return false;
            };
            Object.defineProperty(Keyboard, "hasVirtualKeyboard", {
                get: function () {
                    return false;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Keyboard, "physicalKeyboardType", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Keyboard.KEYNAME_UPARROW = "Up";
            Keyboard.KEYNAME_DOWNARROW = "Down";
            Keyboard.KEYNAME_LEFTARROW = "Left";
            Keyboard.KEYNAME_RIGHTARROW = "Right";
            Keyboard.KEYNAME_F1 = "F1";
            Keyboard.KEYNAME_F2 = "F2";
            Keyboard.KEYNAME_F3 = "F3";
            Keyboard.KEYNAME_F4 = "F4";
            Keyboard.KEYNAME_F5 = "F5";
            Keyboard.KEYNAME_F6 = "F6";
            Keyboard.KEYNAME_F7 = "F7";
            Keyboard.KEYNAME_F8 = "F8";
            Keyboard.KEYNAME_F9 = "F9";
            Keyboard.KEYNAME_F10 = "F10";
            Keyboard.KEYNAME_F11 = "F11";
            Keyboard.KEYNAME_F12 = "F12";
            Keyboard.KEYNAME_F13 = "F13";
            Keyboard.KEYNAME_F14 = "F14";
            Keyboard.KEYNAME_F15 = "F15";
            Keyboard.KEYNAME_F16 = "F16";
            Keyboard.KEYNAME_F17 = "F17";
            Keyboard.KEYNAME_F18 = "F18";
            Keyboard.KEYNAME_F19 = "F19";
            Keyboard.KEYNAME_F20 = "F20";
            Keyboard.KEYNAME_F21 = "F21";
            Keyboard.KEYNAME_F22 = "F22";
            Keyboard.KEYNAME_F23 = "F23";
            Keyboard.KEYNAME_F24 = "F24";
            Keyboard.KEYNAME_F25 = "F25";
            Keyboard.KEYNAME_F26 = "F26";
            Keyboard.KEYNAME_F27 = "F27";
            Keyboard.KEYNAME_F28 = "F28";
            Keyboard.KEYNAME_F29 = "F29";
            Keyboard.KEYNAME_F30 = "F30";
            Keyboard.KEYNAME_F31 = "F31";
            Keyboard.KEYNAME_F32 = "F32";
            Keyboard.KEYNAME_F33 = "F33";
            Keyboard.KEYNAME_F34 = "F34";
            Keyboard.KEYNAME_F35 = "F35";
            Keyboard.KEYNAME_INSERT = "Insert";
            Keyboard.KEYNAME_DELETE = "Delete";
            Keyboard.KEYNAME_HOME = "Home";
            Keyboard.KEYNAME_BEGIN = "Begin";
            Keyboard.KEYNAME_END = "End";
            Keyboard.KEYNAME_PAGEUP = "PgUp";
            Keyboard.KEYNAME_PAGEDOWN = "PgDn";
            Keyboard.KEYNAME_PRINTSCREEN = "PrntScrn";
            Keyboard.KEYNAME_SCROLLLOCK = "ScrlLck";
            Keyboard.KEYNAME_PAUSE = "Pause";
            Keyboard.KEYNAME_SYSREQ = "SysReq";
            Keyboard.KEYNAME_BREAK = "Break";
            Keyboard.KEYNAME_RESET = "Reset";
            Keyboard.KEYNAME_STOP = "Stop";
            Keyboard.KEYNAME_MENU = "Menu";
            Keyboard.KEYNAME_USER = "User";
            Keyboard.KEYNAME_SYSTEM = "Sys";
            Keyboard.KEYNAME_PRINT = "Print";
            Keyboard.KEYNAME_CLEARLINE = "ClrLn";
            Keyboard.KEYNAME_CLEARDISPLAY = "ClrDsp";
            Keyboard.KEYNAME_INSERTLINE = "InsLn";
            Keyboard.KEYNAME_DELETELINE = "DelLn";
            Keyboard.KEYNAME_INSERTCHAR = "InsChr";
            Keyboard.KEYNAME_DELETECHAR = "DelChr";
            Keyboard.KEYNAME_PREV = "Prev";
            Keyboard.KEYNAME_NEXT = "Next";
            Keyboard.KEYNAME_SELECT = "Select";
            Keyboard.KEYNAME_EXECUTE = "Exec";
            Keyboard.KEYNAME_UNDO = "Undo";
            Keyboard.KEYNAME_REDO = "Redo";
            Keyboard.KEYNAME_FIND = "Find";
            Keyboard.KEYNAME_HELP = "Help";
            Keyboard.KEYNAME_MODESWITCH = "ModeSw";
            Keyboard.STRING_UPARROW = "";
            Keyboard.STRING_DOWNARROW = "";
            Keyboard.STRING_LEFTARROW = "";
            Keyboard.STRING_RIGHTARROW = "";
            Keyboard.STRING_F1 = "";
            Keyboard.STRING_F2 = "";
            Keyboard.STRING_F3 = "";
            Keyboard.STRING_F4 = "";
            Keyboard.STRING_F5 = "";
            Keyboard.STRING_F6 = "";
            Keyboard.STRING_F7 = "";
            Keyboard.STRING_F8 = "";
            Keyboard.STRING_F9 = "";
            Keyboard.STRING_F10 = "";
            Keyboard.STRING_F11 = "";
            Keyboard.STRING_F12 = "";
            Keyboard.STRING_F13 = "";
            Keyboard.STRING_F14 = "";
            Keyboard.STRING_F15 = "";
            Keyboard.STRING_F16 = "";
            Keyboard.STRING_F17 = "";
            Keyboard.STRING_F18 = "";
            Keyboard.STRING_F19 = "";
            Keyboard.STRING_F20 = "";
            Keyboard.STRING_F21 = "";
            Keyboard.STRING_F22 = "";
            Keyboard.STRING_F23 = "";
            Keyboard.STRING_F24 = "";
            Keyboard.STRING_F25 = "";
            Keyboard.STRING_F26 = "";
            Keyboard.STRING_F27 = "";
            Keyboard.STRING_F28 = "";
            Keyboard.STRING_F29 = "";
            Keyboard.STRING_F30 = "";
            Keyboard.STRING_F31 = "";
            Keyboard.STRING_F32 = "";
            Keyboard.STRING_F33 = "";
            Keyboard.STRING_F34 = "";
            Keyboard.STRING_F35 = "";
            Keyboard.STRING_INSERT = "";
            Keyboard.STRING_DELETE = "";
            Keyboard.STRING_HOME = "";
            Keyboard.STRING_BEGIN = "";
            Keyboard.STRING_END = "";
            Keyboard.STRING_PAGEUP = "";
            Keyboard.STRING_PAGEDOWN = "";
            Keyboard.STRING_PRINTSCREEN = "";
            Keyboard.STRING_SCROLLLOCK = "";
            Keyboard.STRING_PAUSE = "";
            Keyboard.STRING_SYSREQ = "";
            Keyboard.STRING_BREAK = "";
            Keyboard.STRING_RESET = "";
            Keyboard.STRING_STOP = "";
            Keyboard.STRING_MENU = "";
            Keyboard.STRING_USER = "";
            Keyboard.STRING_SYSTEM = "";
            Keyboard.STRING_PRINT = "";
            Keyboard.STRING_CLEARLINE = "";
            Keyboard.STRING_CLEARDISPLAY = "";
            Keyboard.STRING_INSERTLINE = "";
            Keyboard.STRING_DELETELINE = "";
            Keyboard.STRING_INSERTCHAR = "";
            Keyboard.STRING_DELETECHAR = "";
            Keyboard.STRING_PREV = "";
            Keyboard.STRING_NEXT = "";
            Keyboard.STRING_SELECT = "";
            Keyboard.STRING_EXECUTE = "";
            Keyboard.STRING_UNDO = "";
            Keyboard.STRING_REDO = "";
            Keyboard.STRING_FIND = "";
            Keyboard.STRING_HELP = "";
            Keyboard.STRING_MODESWITCH = "";
            Keyboard.CharCodeStrings = [Keyboard.KEYNAME_UPARROW, Keyboard.KEYNAME_DOWNARROW, Keyboard.KEYNAME_LEFTARROW, Keyboard.KEYNAME_RIGHTARROW, Keyboard.KEYNAME_F1, Keyboard.KEYNAME_F2, Keyboard.KEYNAME_F3, Keyboard.KEYNAME_F4, Keyboard.KEYNAME_F5, Keyboard.KEYNAME_F6, Keyboard.KEYNAME_F7, Keyboard.KEYNAME_F8, Keyboard.KEYNAME_F9, Keyboard.KEYNAME_F10, Keyboard.KEYNAME_F11, Keyboard.KEYNAME_F12, Keyboard.KEYNAME_F13, Keyboard.KEYNAME_F14, Keyboard.KEYNAME_F15, Keyboard.KEYNAME_F16, Keyboard.KEYNAME_F17, Keyboard.KEYNAME_F18, Keyboard.KEYNAME_F19, Keyboard.KEYNAME_F20, Keyboard.KEYNAME_F21, Keyboard.KEYNAME_F22, Keyboard.KEYNAME_F23, Keyboard.KEYNAME_F24, Keyboard.KEYNAME_F25, Keyboard.KEYNAME_F26, Keyboard.KEYNAME_F27, Keyboard.KEYNAME_F28, Keyboard.KEYNAME_F29, Keyboard.KEYNAME_F30, Keyboard.KEYNAME_F31, Keyboard.KEYNAME_F32, Keyboard.KEYNAME_F33, Keyboard.KEYNAME_F34, Keyboard.KEYNAME_F35, Keyboard.KEYNAME_INSERT, Keyboard.KEYNAME_DELETE, Keyboard.KEYNAME_HOME, Keyboard.KEYNAME_BEGIN, Keyboard.KEYNAME_END, Keyboard.KEYNAME_PAGEUP, Keyboard.KEYNAME_PAGEDOWN, Keyboard.KEYNAME_PRINTSCREEN, Keyboard.KEYNAME_SCROLLLOCK, Keyboard.KEYNAME_PAUSE, Keyboard.KEYNAME_SYSREQ, Keyboard.KEYNAME_BREAK, Keyboard.KEYNAME_RESET, Keyboard.KEYNAME_STOP, Keyboard.KEYNAME_MENU, Keyboard.KEYNAME_USER, Keyboard.KEYNAME_SYSTEM, Keyboard.KEYNAME_PRINT, Keyboard.KEYNAME_CLEARLINE, Keyboard.KEYNAME_CLEARDISPLAY, Keyboard.KEYNAME_INSERTLINE, Keyboard.KEYNAME_DELETELINE, Keyboard.KEYNAME_INSERTCHAR, Keyboard.KEYNAME_DELETECHAR, Keyboard.KEYNAME_PREV, Keyboard.KEYNAME_NEXT, Keyboard.KEYNAME_SELECT, Keyboard.KEYNAME_EXECUTE, Keyboard.KEYNAME_UNDO, Keyboard.KEYNAME_REDO, Keyboard.KEYNAME_FIND, Keyboard.KEYNAME_HELP, Keyboard.KEYNAME_MODESWITCH];
            Keyboard.NUMBER_0 = 48;
            Keyboard.NUMBER_1 = 49;
            Keyboard.NUMBER_2 = 50;
            Keyboard.NUMBER_3 = 51;
            Keyboard.NUMBER_4 = 52;
            Keyboard.NUMBER_5 = 53;
            Keyboard.NUMBER_6 = 54;
            Keyboard.NUMBER_7 = 55;
            Keyboard.NUMBER_8 = 56;
            Keyboard.NUMBER_9 = 57;
            Keyboard.A = 65;
            Keyboard.B = 66;
            Keyboard.C = 67;
            Keyboard.D = 68;
            Keyboard.E = 69;
            Keyboard.F = 70;
            Keyboard.G = 71;
            Keyboard.H = 72;
            Keyboard.I = 73;
            Keyboard.J = 74;
            Keyboard.K = 75;
            Keyboard.L = 76;
            Keyboard.M = 77;
            Keyboard.N = 78;
            Keyboard.O = 79;
            Keyboard.P = 80;
            Keyboard.Q = 81;
            Keyboard.R = 82;
            Keyboard.S = 83;
            Keyboard.T = 84;
            Keyboard.U = 85;
            Keyboard.V = 86;
            Keyboard.W = 87;
            Keyboard.X = 88;
            Keyboard.Y = 89;
            Keyboard.Z = 90;
            Keyboard.SEMICOLON = 186;
            Keyboard.EQUAL = 187;
            Keyboard.COMMA = 188;
            Keyboard.MINUS = 189;
            Keyboard.PERIOD = 190;
            Keyboard.SLASH = 191;
            Keyboard.BACKQUOTE = 192;
            Keyboard.LEFTBRACKET = 219;
            Keyboard.BACKSLASH = 220;
            Keyboard.RIGHTBRACKET = 221;
            Keyboard.QUOTE = 222;
            Keyboard.ALTERNATE = 18;
            Keyboard.BACKSPACE = 8;
            Keyboard.CAPS_LOCK = 20;
            Keyboard.COMMAND = 15;
            Keyboard.CONTROL = 17;
            Keyboard.DELETE = 46;
            Keyboard.DOWN = 40;
            Keyboard.END = 35;
            Keyboard.ENTER = 13;
            Keyboard.ESCAPE = 27;
            Keyboard.F1 = 112;
            Keyboard.F2 = 113;
            Keyboard.F3 = 114;
            Keyboard.F4 = 115;
            Keyboard.F5 = 116;
            Keyboard.F6 = 117;
            Keyboard.F7 = 118;
            Keyboard.F8 = 119;
            Keyboard.F9 = 120;
            Keyboard.F10 = 121;
            Keyboard.F11 = 122;
            Keyboard.F12 = 123;
            Keyboard.F13 = 124;
            Keyboard.F14 = 125;
            Keyboard.F15 = 126;
            Keyboard.HOME = 36;
            Keyboard.INSERT = 45;
            Keyboard.LEFT = 37;
            Keyboard.NUMPAD = 21;
            Keyboard.NUMPAD_0 = 96;
            Keyboard.NUMPAD_1 = 97;
            Keyboard.NUMPAD_2 = 98;
            Keyboard.NUMPAD_3 = 99;
            Keyboard.NUMPAD_4 = 100;
            Keyboard.NUMPAD_5 = 101;
            Keyboard.NUMPAD_6 = 102;
            Keyboard.NUMPAD_7 = 103;
            Keyboard.NUMPAD_8 = 104;
            Keyboard.NUMPAD_9 = 105;
            Keyboard.NUMPAD_ADD = 107;
            Keyboard.NUMPAD_DECIMAL = 110;
            Keyboard.NUMPAD_DIVIDE = 111;
            Keyboard.NUMPAD_ENTER = 108;
            Keyboard.NUMPAD_MULTIPLY = 106;
            Keyboard.NUMPAD_SUBTRACT = 109;
            Keyboard.PAGE_DOWN = 34;
            Keyboard.PAGE_UP = 33;
            Keyboard.RIGHT = 39;
            Keyboard.SHIFT = 16;
            Keyboard.SPACE = 32;
            Keyboard.TAB = 9;
            Keyboard.UP = 38;
            Keyboard.RED = 16777216;
            Keyboard.GREEN = 16777217;
            Keyboard.YELLOW = 16777218;
            Keyboard.BLUE = 16777219;
            Keyboard.CHANNEL_UP = 16777220;
            Keyboard.CHANNEL_DOWN = 16777221;
            Keyboard.RECORD = 16777222;
            Keyboard.PLAY = 16777223;
            Keyboard.PAUSE = 16777224;
            Keyboard.STOP = 16777225;
            Keyboard.FAST_FORWARD = 16777226;
            Keyboard.REWIND = 16777227;
            Keyboard.SKIP_FORWARD = 16777228;
            Keyboard.SKIP_BACKWARD = 16777229;
            Keyboard.NEXT = 16777230;
            Keyboard.PREVIOUS = 16777231;
            Keyboard.LIVE = 16777232;
            Keyboard.LAST = 16777233;
            Keyboard.MENU = 16777234;
            Keyboard.INFO = 16777235;
            Keyboard.GUIDE = 16777236;
            Keyboard.EXIT = 16777237;
            Keyboard.BACK = 16777238;
            Keyboard.AUDIO = 16777239;
            Keyboard.SUBTITLE = 16777240;
            Keyboard.DVR = 16777241;
            Keyboard.VOD = 16777242;
            Keyboard.INPUT = 16777243;
            Keyboard.SETUP = 16777244;
            Keyboard.HELP = 16777245;
            Keyboard.MASTER_SHELL = 16777246;
            Keyboard.SEARCH = 16777247;
            return Keyboard;
        }(Object));
        ui.Keyboard = Keyboard;
    })(ui = flash.ui || (flash.ui = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var ui;
    (function (ui) {
        var KeyboardType = (function (_super) {
            __extends(KeyboardType, _super);
            function KeyboardType() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            KeyboardType.ALPHANUMERIC = "alphanumeric";
            KeyboardType.KEYPAD = "keypad";
            KeyboardType.NONE = "none";
            return KeyboardType;
        }(Object));
        ui.KeyboardType = KeyboardType;
    })(ui = flash.ui || (flash.ui = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var ui;
    (function (ui) {
        var KeyLocation = (function (_super) {
            __extends(KeyLocation, _super);
            function KeyLocation() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            KeyLocation.STANDARD = 0;
            KeyLocation.LEFT = 1;
            KeyLocation.RIGHT = 2;
            KeyLocation.NUM_PAD = 3;
            KeyLocation.D_PAD = 4;
            return KeyLocation;
        }(Object));
        ui.KeyLocation = KeyLocation;
    })(ui = flash.ui || (flash.ui = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var ui;
    (function (ui) {
        var Multitouch = (function (_super) {
            __extends(Multitouch, _super);
            function Multitouch() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Object.defineProperty(Multitouch, "inputMode", {
                get: function () {
                    return null;
                },
                set: function (param1) {
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Multitouch, "supportsTouchEvents", {
                get: function () {
                    return false;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Multitouch, "supportsGestureEvents", {
                get: function () {
                    return false;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Multitouch, "supportedGestures", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Multitouch, "maxTouchPoints", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Multitouch, "mapTouchToMouse", {
                get: function () {
                    return false;
                },
                set: function (param1) {
                },
                enumerable: true,
                configurable: true
            });
            return Multitouch;
        }(Object));
        ui.Multitouch = Multitouch;
    })(ui = flash.ui || (flash.ui = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var ui;
    (function (ui) {
        var MultitouchInputMode = (function (_super) {
            __extends(MultitouchInputMode, _super);
            function MultitouchInputMode() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            MultitouchInputMode.NONE = "none";
            MultitouchInputMode.GESTURE = "gesture";
            MultitouchInputMode.TOUCH_POINT = "touchPoint";
            return MultitouchInputMode;
        }(Object));
        ui.MultitouchInputMode = MultitouchInputMode;
    })(ui = flash.ui || (flash.ui = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        var CompressionAlgorithm = (function () {
            function CompressionAlgorithm() {
            }
            CompressionAlgorithm.DEFLATE = "deflate";
            CompressionAlgorithm.LZMA = "lzma";
            CompressionAlgorithm.ZLIB = "zlib";
            return CompressionAlgorithm;
        }());
        utils.CompressionAlgorithm = CompressionAlgorithm;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        var Dictionary = (function () {
            function Dictionary(weakKeys) {
                if (weakKeys === void 0) { weakKeys = false; }
                this.__map = null;
                this.__arr = null;
                this.__len = 0;
                this.__weak = false;
                if (Dictionary.MAP_AVAILABLE) {
                    this.__map = new Map;
                }
                else {
                    this.__arr = [];
                    this.__len = 0;
                }
                this.__weak = weakKeys;
            }
            Dictionary.prototype.get = function (key) {
                if (this.__map) {
                    return this.__map.get(key);
                }
                var index = this.indexOf(key);
                if (index >= 0)
                    return this.__arr[index].value;
                return undefined;
            };
            Dictionary.prototype.set = function (key, value) {
                if (this.__map) {
                    this.__map.set(key, value);
                    return value;
                }
                var index = this.indexOf(key);
                if (index >= 0) {
                    this.__arr[index].value = value;
                    return value;
                }
                this.__arr.push({ key: key, value: value });
                this.__len++;
                return value;
            };
            Dictionary.prototype.delete = function (key) {
                if (this.__map) {
                    return this.__map.delete(key);
                }
                var index = this.indexOf(key);
                if (index >= 0) {
                    this.__arr.splice(index, 1);
                    this.__len--;
                    return true;
                }
                return false;
            };
            Object.defineProperty(Dictionary.prototype, "keys", {
                get: function () {
                    if (this.__map) {
                        return Array.from(this.__map.keys());
                    }
                    return this.__arr.map(function (o) { return o.key; }.bind(this));
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Dictionary.prototype, "values", {
                get: function () {
                    if (this.__map) {
                        return Array.from(this.__map.values());
                    }
                    return this.__arr.map(function (o) { return o.value; }.bind(this));
                },
                enumerable: true,
                configurable: true
            });
            Dictionary.prototype.indexOf = function (key) {
                for (var i = 0; i < this.__len; ++i) {
                    if (this.__arr[i].key == key) {
                        return i;
                    }
                }
                return -1;
            };
            Dictionary.MAP_AVAILABLE = window.Map && typeof Map.prototype.keys === 'function' && typeof Map.prototype.values === 'function';
            return Dictionary;
        }());
        utils.Dictionary = Dictionary;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        var Endian = (function (_super) {
            __extends(Endian, _super);
            function Endian() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Endian.BIG_ENDIAN = "bigEndian";
            Endian.LITTLE_ENDIAN = "littleEndian";
            return Endian;
        }(Object));
        utils.Endian = Endian;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        function escapeMultiByte(value) {
            return encodeURIComponent(value);
        }
        utils.escapeMultiByte = escapeMultiByte;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        function getDefinitionByName(name) {
            return null;
        }
        utils.getDefinitionByName = getDefinitionByName;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        function getQualifiedClassName(value) {
            if ('constructor' in value) {
                var name = value.constructor.name;
                if (name !== 'Function') {
                    return name;
                }
                else if ('name' in value) {
                    return value.name;
                }
            }
            return null;
        }
        utils.getQualifiedClassName = getQualifiedClassName;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        function getQualifiedSuperclassName(value) {
            return null;
        }
        utils.getQualifiedSuperclassName = getQualifiedSuperclassName;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        function setInterval(closure, delay) {
            var args = [];
            for (var _i = 2; _i < arguments.length; _i++) {
                args[_i - 2] = arguments[_i];
            }
            return window.setInterval.apply(null, arguments);
        }
        utils.setInterval = setInterval;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        function setTimeout(closure, delay) {
            var args = [];
            for (var _i = 2; _i < arguments.length; _i++) {
                args[_i - 2] = arguments[_i];
            }
            return window.setTimeout.apply(null, arguments);
        }
        utils.setTimeout = setTimeout;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var __native;
    (function (__native) {
        var GLCanvasPattern = (function () {
            function GLCanvasPattern(image, repetition) {
                this.repetition = repetition;
                this.image = image;
            }
            return GLCanvasPattern;
        }());
        __native.GLCanvasPattern = GLCanvasPattern;
    })(__native = flash.__native || (flash.__native = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var __native;
    (function (__native) {
        var MemArray = (function () {
            function MemArray() {
                this.array = [];
                this.length = 0;
            }
            MemArray.prototype.push = function (v) {
                this.array[this.length++] = v;
            };
            return MemArray;
        }());
        __native.MemArray = MemArray;
    })(__native = flash.__native || (flash.__native = {}));
})(flash || (flash = {}));
var global;
(function (global) {
    var Namespace = (function () {
        function Namespace(prefixOrUri, uriValue) {
            if (prefixOrUri === void 0) { prefixOrUri = null; }
            if (uriValue === void 0) { uriValue = null; }
            this._uri = "";
            this._prefix = null;
            if (!uriValue && prefixOrUri) {
                var uriVal = uriValue ? uriValue : prefixOrUri;
                if (uriVal instanceof Namespace) {
                    this._prefix = uriVal.prefix;
                    this._uri = uriVal.uri;
                }
                else if (this.isQName(uriVal)) {
                    this._uri = uriVal.uri ? uriVal.uri : this._uri;
                }
                else {
                    this._uri = uriVal.toString();
                    if (this._uri == "")
                        this._prefix = "";
                }
            }
            else if (uriValue) {
                if (this.isQName(uriValue)) {
                    if (uriValue.uri)
                        this._uri = uriValue.uri;
                }
                else {
                    this._uri = uriValue.toString();
                }
                if (!this._uri) {
                    if (!prefixOrUri)
                        this._prefix = "";
                    else
                        throw new TypeError("invalid prefix");
                }
                else
                    this._prefix = prefixOrUri.toString();
            }
        }
        Namespace.prototype.isQName = function (val) {
            if (val == null)
                return false;
            if (val.hasOwnProperty("uri") && val.hasOwnProperty("localName") && val.hasOwnProperty("prefix"))
                return true;
            return false;
        };
        Object.defineProperty(Namespace.prototype, "uri", {
            get: function () {
                return this._uri;
            },
            set: function (value) {
                this._uri = value;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Namespace.prototype, "prefix", {
            get: function () {
                return this._prefix;
            },
            set: function (value) {
                this._prefix = value;
            },
            enumerable: true,
            configurable: true
        });
        Namespace.prototype.toString = function () {
            return this.uri;
        };
        Namespace.prototype.valueOf = function () {
            return this;
        };
        return Namespace;
    }());
    global.Namespace = Namespace;
})(global || (global = {}));
var s3eSocial;
(function (s3eSocial) {
    var FbDialogRequest = (function () {
        function FbDialogRequest(action) {
            this.dialogErrorCode = 0;
            this.dialogRemoved = false;
            this.dialogInviteMode = false;
            this.dialogAction = action;
        }
        FbDialogRequest.prototype.setParam = function (name, value) {
            if (typeof value == 'string')
                this.setParamAsString(name, value);
            else
                this.setParamAsInteger(name, value);
        };
        FbDialogRequest.prototype.setErrorData = function (code, message) {
            this.dialogErrorCode = code;
            this.dialogErrorMessage = message;
        };
        FbDialogRequest.prototype.setDeleteStatus = function (value) {
            this.dialogRemoved = value;
        };
        FbDialogRequest.prototype.setParamAsString = function (name, value) {
            if (!this.dialogParams)
                this.dialogParams = {};
            switch (name) {
                case "exclude_ids":
                case "filters":
                    this.dialogParams[name] = this.changedSymbols(value).split(",");
                    break;
                case "invite":
                    this.dialogInviteMode = value == "1";
                    break;
                case "attachment":
                    this.dialogParams[name] = JSON.parse(value);
                    break;
                default:
                    this.dialogParams[name] = value;
                    break;
            }
        };
        FbDialogRequest.prototype.setParamAsInteger = function (name, value) {
            if (!this.dialogParams)
                this.dialogParams = {};
            this.dialogParams[name] = value;
        };
        FbDialogRequest.prototype.changedSymbols = function (str) {
            var check = new RegExp("[\\'\"\\\\;()\\[\\]+/`*&^%$#@!|:?=]", "i");
            while (str.search(check) != -1)
                str = str.replace(check, '');
            return str;
        };
        return FbDialogRequest;
    }());
    s3eSocial.FbDialogRequest = FbDialogRequest;
})(s3eSocial || (s3eSocial = {}));
var s3eSocial;
(function (s3eSocial) {
    var FbGraphRequest = (function () {
        function FbGraphRequest(path, method) {
            this.requestErrorCode = 0;
            this.requestErrorMessage = "";
            this.requestDeleteStatus = false;
            this.requestForcedLogin = true;
            this.requestPath = path;
            this.requestHttpMethod = method;
        }
        FbGraphRequest.prototype.setParam = function (name, value) {
            if (typeof value == 'string')
                this.setParamAsString(name, value);
            else
                this.setParamAsInteger(name, value);
        };
        FbGraphRequest.prototype.setErrorData = function (code, message) {
            this.requestErrorCode = code;
            this.requestErrorMessage = message;
        };
        FbGraphRequest.prototype.setDeleteStatus = function (value) {
            this.requestDeleteStatus = value;
        };
        FbGraphRequest.prototype.setParamAsString = function (name, value) {
            if (!this.requestParams)
                this.requestParams = {};
            if (!value || value == "")
                return;
            for (var _i = 0, _a = FbGraphRequest.ILLEGAL_CHARACTERS; _i < _a.length; _i++) {
                var char = _a[_i];
                if (value.indexOf(char) >= 0)
                    value = value.split(char).join("");
            }
            var index = value.indexOf("username");
            var indexEnd = 0;
            if (index != -1) {
                var temp = value.substr(0);
                value = value.substr(0, index);
                indexEnd = index + 8;
                if (indexEnd < temp.length)
                    indexEnd++;
                value += temp.substr(indexEnd);
            }
            switch (name) {
                case "forced":
                    this.requestForcedLogin = value == "1";
                    break;
                case "score":
                    this.requestParams[name] = parseInt(value);
                    break;
                default:
                    this.requestParams[name] = value;
            }
        };
        FbGraphRequest.prototype.setParamAsInteger = function (name, value) {
            if (!this.requestParams)
                this.requestParams = {};
            this.requestParams[name] = value;
        };
        FbGraphRequest.ILLEGAL_CHARACTERS = ["[", "]"];
        return FbGraphRequest;
    }());
    s3eSocial.FbGraphRequest = FbGraphRequest;
})(s3eSocial || (s3eSocial = {}));
var global;
(function (global) {
    function skipCachedProductsInformation(obj) {
        var CACHE_TIME = 7 * 24 * 60 * 60;
        if (!obj)
            return;
        if (!obj.products)
            return;
        obj.timestamps = obj.timestamps || [];
        obj.timestamps.length = obj.products.length;
        var time = new Date().time / 1000;
        var len = obj.products.length;
        for (var i = 0; i < len; ++i) {
            var url = obj.products[i];
            if (!url || url == '' || time - obj.timestamps[i] < CACHE_TIME) {
                obj.products.splice(i, 1);
                obj.timestamps.splice(i, 1);
                len--;
                i--;
            }
        }
    }
    global.skipCachedProductsInformation = skipCachedProductsInformation;
})(global || (global = {}));
var global;
(function (global) {
    function toMb(bytes) {
        return (bytes * 0.000000954).toFixed(3);
    }
    global.toMb = toMb;
})(global || (global = {}));
var tools;
(function (tools) {
    var CrashParam = (function () {
        function CrashParam(name, value, replace) {
            if (replace === void 0) { replace = true; }
            this.replace = false;
            this.name = name;
            this.value = value;
            this.replace = replace;
        }
        return CrashParam;
    }());
    tools.CrashParam = CrashParam;
})(tools || (tools = {}));
var tools;
(function (tools) {
    var fps;
    (function (fps_1) {
        var Frame = (function () {
            function Frame(fps) {
                this.fps = 0;
                this.count = 0;
                this.fps = fps;
            }
            return Frame;
        }());
        fps_1.Frame = Frame;
    })(fps = tools.fps || (tools.fps = {}));
})(tools || (tools = {}));
var tools;
(function (tools) {
    function getNextPowerOfTwo(number) {
        if (typeof number == 'number' && number > 0 && (number & (number - 1)) == 0)
            return number;
        else {
            var result = 1;
            number -= 0.000000001;
            while (result < number)
                result <<= 1;
            return result;
        }
    }
    tools.getNextPowerOfTwo = getNextPowerOfTwo;
})(tools || (tools = {}));
var tools;
(function (tools) {
    var init;
    (function (init) {
        var State = (function () {
            function State(id, weight) {
                this.mId = 0;
                this.mMultiple = false;
                this.mId = id;
                this.mWeight = weight;
                this.mPercent = 0;
                this.mStates = new Array;
            }
            Object.defineProperty(State.prototype, "id", {
                get: function () {
                    return this.mId;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(State.prototype, "weight", {
                get: function () {
                    if (this.mMultiple) {
                        var result = 0;
                        for (var _i = 0, _a = this.mStates; _i < _a.length; _i++) {
                            var state = _a[_i];
                            result += state.weight;
                        }
                        return this.mWeight + result;
                    }
                    return this.mWeight;
                },
                set: function (value) {
                    if (this.mMultiple) {
                        var ratio = value / this.weight;
                        for (var _i = 0, _a = this.mStates; _i < _a.length; _i++) {
                            var state = _a[_i];
                            state.weight *= ratio;
                        }
                        this.mWeight *= ratio;
                        return;
                    }
                    this.mWeight = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(State.prototype, "percent", {
                get: function () {
                    if (this.mMultiple) {
                        var result = this.mPercent * (this.mWeight / 100);
                        for (var _i = 0, _a = this.mStates; _i < _a.length; _i++) {
                            var state = _a[_i];
                            result += state.percent;
                        }
                        return result;
                    }
                    return this.mPercent * (this.mWeight / 100);
                },
                set: function (value) {
                    this.mPercent = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(State.prototype, "length", {
                get: function () {
                    return this.mMultiple ? this.mStates.length + 1 : 1;
                },
                enumerable: true,
                configurable: true
            });
            State.prototype.byId = function (id) {
                for (var _i = 0, _a = this.mStates; _i < _a.length; _i++) {
                    var state = _a[_i];
                    if (state.id == id) {
                        return state;
                    }
                }
                return null;
            };
            State.prototype.add = function (state) {
                this.mStates[this.mStates.length] = state;
                this.mMultiple = this.mStates.length > 0;
                return this;
            };
            return State;
        }());
        init.State = State;
    })(init = tools.init || (tools.init = {}));
})(tools || (tools = {}));
var tools;
(function (tools) {
    var QueueItem = (function () {
        function QueueItem(target, condition, execute) {
            this.target = target;
            this.condition = condition;
            this.handler = function () {
                execute();
                target = null;
                this.handler = null;
            }.bind(this);
        }
        return QueueItem;
    }());
    tools.QueueItem = QueueItem;
})(tools || (tools = {}));
var tools;
(function (tools) {
    function time2string(ms) {
        if (ms < 0)
            ms = 0;
        var x = ms / 1000;
        var s = x % 60;
        x /= 60;
        var m = x % 60;
        x /= 60;
        var h = x % 24;
        var tmp = (h ? h + 'h' : '') + (m ? sp.bind(this)(h) + m + 'm' : '') + (s ? sp.bind(this)(m) + s + 's' : '');
        return tmp == '' ? '0s' : tmp;
        function sp(value) {
            return value > 0 ? ' ' : '';
        }
    }
    tools.time2string = time2string;
})(tools || (tools = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        var events;
        (function (events) {
            events.Event = flash.events.Event;
            var ApiCallbackEvent = (function (_super) {
                __extends(ApiCallbackEvent, _super);
                function ApiCallbackEvent($type, $bubbles, $cancelable, $method, $result, $data) {
                    if ($bubbles === void 0) { $bubbles = false; }
                    if ($cancelable === void 0) { $cancelable = false; }
                    if ($method === void 0) { $method = "null"; }
                    if ($result === void 0) { $result = ""; }
                    if ($data === void 0) { $data = ""; }
                    var _this = _super.call(this, $type, $bubbles, $cancelable) || this;
                    _this._method = $method;
                    _this._result = $result;
                    _this._data = $data;
                    return _this;
                }
                Object.defineProperty(ApiCallbackEvent.prototype, "method", {
                    get: function () {
                        return this._method;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(ApiCallbackEvent.prototype, "result", {
                    get: function () {
                        return this._result;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(ApiCallbackEvent.prototype, "data", {
                    get: function () {
                        return this._data;
                    },
                    enumerable: true,
                    configurable: true
                });
                ApiCallbackEvent.prototype.clone = function () {
                    return new ApiCallbackEvent(this.type, this.bubbles, this.cancelable, this.method, this.result, this.data);
                };
                ApiCallbackEvent.CALL_BACK = "call_back_event";
                return ApiCallbackEvent;
            }(events.Event));
            events.ApiCallbackEvent = ApiCallbackEvent;
        })(events = odnoklassniki.events || (odnoklassniki.events = {}));
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        var events;
        (function (events) {
            events.Event = flash.events.Event;
            var ApiServerEvent = (function (_super) {
                __extends(ApiServerEvent, _super);
                function ApiServerEvent(type, data) {
                    if (data === void 0) { data = null; }
                    var _this = _super.call(this, type) || this;
                    _this.data = data;
                    return _this;
                }
                ApiServerEvent.CONNECTED = "odnoklassniki_connected";
                ApiServerEvent.CONNECTION_ERROR = "odnoklassniki_connection_error";
                ApiServerEvent.PROXY_NOT_RESPONDING = "odnoklassniki_proxy_not_reponding";
                ApiServerEvent.NOT_YET_CONNECTED = "odnoklassniki_not_yet_connected";
                return ApiServerEvent;
            }(events.Event));
            events.ApiServerEvent = ApiServerEvent;
        })(events = odnoklassniki.events || (odnoklassniki.events = {}));
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        var sdk;
        (function (sdk) {
            var discussions;
            (function (discussions) {
                discussions.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
                var Discussions = (function () {
                    function Discussions() {
                    }
                    Discussions.getDiscussions = function (callback, entityTypes, offset, count) {
                        if (entityTypes === void 0) { entityTypes = null; }
                        if (offset === void 0) { offset = 0; }
                        if (count === void 0) { count = 10; }
                        discussions.Odnoklassniki.callRestApi("discussions.getDiscussions", callback, discussions.Odnoklassniki.getSendObject({ entityTypes: ((entityTypes) ? entityTypes.join(",") : ""), offset: offset, count: count }));
                    };
                    Discussions.getDiscussionCommentsCount = function (entityType, entityId, callback) {
                        discussions.Odnoklassniki.callRestApi("discussions.getDiscussionCommentsCount", callback, { entityType: entityType, entityId: entityId });
                    };
                    Discussions.addDiscussionComment = function (entityType, entityId, comment, callback) {
                        discussions.Odnoklassniki.callRestApi("discussions.addDiscussionComment", callback, { entityType: entityType, entityId: entityId, comment: comment });
                    };
                    Discussions.deleteDiscussionComment = function (entityType, entityId, conversationId, messageIndex, callback) {
                        discussions.Odnoklassniki.callRestApi("discussions.deleteDiscussionComment", callback, { entityType: entityType, entityId: entityId, conversationId: conversationId, messageIndex: messageIndex });
                    };
                    Discussions.getDiscussionComments = function (entityType, entityId, callback, offset, count) {
                        if (offset === void 0) { offset = 0; }
                        if (count === void 0) { count = 0; }
                        discussions.Odnoklassniki.callRestApi("discussions.getDiscussionComments", callback, discussions.Odnoklassniki.getSendObject({ entityType: entityType, entityId: entityId, offset: offset, count: count }));
                    };
                    Discussions.markDiscussionAsRead = function (entityType, entityId, callback) {
                        discussions.Odnoklassniki.callRestApi("discussions.markDiscussionAsRead", callback, { entityType: entityType, entityId: entityId });
                    };
                    return Discussions;
                }());
                discussions.Discussions = Discussions;
            })(discussions = sdk.discussions || (sdk.discussions = {}));
        })(sdk = odnoklassniki.sdk || (odnoklassniki.sdk = {}));
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        var sdk;
        (function (sdk) {
            var errors;
            (function (errors) {
                errors.Error = global.Error;
                var Errors = (function () {
                    function Errors() {
                    }
                    Errors.showError = function (s) {
                        throw new errors.Error(s);
                    };
                    return Errors;
                }());
                errors.Errors = Errors;
            })(errors = sdk.errors || (sdk.errors = {}));
        })(sdk = odnoklassniki.sdk || (odnoklassniki.sdk = {}));
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        var sdk;
        (function (sdk) {
            var events;
            (function (events) {
                events.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
                var Events = (function () {
                    function Events() {
                    }
                    Events.get = function (callback, types) {
                        if (types === void 0) { types = ""; }
                        events.Odnoklassniki.callRestApi("events.get", callback, { types: types });
                    };
                    Events.getTypeInfo = function (callback, types, locale) {
                        if (types === void 0) { types = ""; }
                        if (locale === void 0) { locale = ""; }
                        events.Odnoklassniki.callRestApi("events.getTypeInfo", callback, { types: types, locale: locale });
                    };
                    return Events;
                }());
                events.Events = Events;
            })(events = sdk.events || (sdk.events = {}));
        })(sdk = odnoklassniki.sdk || (odnoklassniki.sdk = {}));
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        var sdk;
        (function (sdk) {
            var friends;
            (function (friends) {
                friends.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
                var Friends = (function () {
                    function Friends() {
                    }
                    Friends.areFriends = function (uids1, uids2, callback) {
                        friends.Odnoklassniki.callRestApi("friends.areFriends", callback, { uids1: uids1.join(","), uids2: uids2.join(",") });
                    };
                    Friends.get = function (callback, uid) {
                        friends.Odnoklassniki.callRestApi("friends.get", callback, friends.Odnoklassniki.getSendObject({ uid: uid }));
                    };
                    Friends.getAppUsers = function (callback) {
                        friends.Odnoklassniki.callRestApi("friends.getAppUsers", callback);
                    };
                    Friends.getBirthdays = function (callback, uid, future) {
                        if (uid === void 0) { uid = ""; }
                        if (future === void 0) { future = true; }
                        friends.Odnoklassniki.callRestApi("friends.getBirthdays", callback, friends.Odnoklassniki.getSendObject({ uid: uid, future: future }));
                    };
                    Friends.getMutualFriends = function (target_id, callback, source_id) {
                        if (source_id === void 0) { source_id = ""; }
                        friends.Odnoklassniki.callRestApi("friends.getMutualFriends", callback, friends.Odnoklassniki.getSendObject({ target_id: target_id, source_id: source_id }));
                    };
                    Friends.getOnline = function (callback, uid, online) {
                        if (uid === void 0) { uid = ""; }
                        if (online === void 0) { online = ""; }
                        friends.Odnoklassniki.callRestApi("friends.getOnline", callback, friends.Odnoklassniki.getSendObject({ uid: uid, online: online }));
                    };
                    return Friends;
                }());
                friends.Friends = Friends;
            })(friends = sdk.friends || (sdk.friends = {}));
        })(sdk = odnoklassniki.sdk || (odnoklassniki.sdk = {}));
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        var sdk;
        (function (sdk) {
            var messages;
            (function (messages) {
                messages.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
                var Messages = (function () {
                    function Messages() {
                    }
                    Messages.getConversations = function (callback, last_check, return_last_msg) {
                        if (last_check === void 0) { last_check = ""; }
                        if (return_last_msg === void 0) { return_last_msg = false; }
                        messages.Odnoklassniki.callRestApi("messages.getConversations", callback, messages.Odnoklassniki.getSendObject({ last_check: last_check, return_last_msg: return_last_msg }));
                    };
                    Messages.getList = function (friend_uid, first, count, callback, txt_limit) {
                        if (txt_limit === void 0) { txt_limit = ""; }
                        messages.Odnoklassniki.callRestApi("messages.getList", callback, messages.Odnoklassniki.getSendObject({ friend_uid: friend_uid, first: first, count: count, txt_limit: txt_limit }));
                    };
                    Messages.get = function (msg_id, callback) {
                        messages.Odnoklassniki.callRestApi("messages.get", callback, { msg_id: msg_id });
                    };
                    Messages.send = function (friend_uid, text, callback, uid) {
                        if (uid === void 0) { uid = ""; }
                        messages.Odnoklassniki.callRestApi("messages.send", callback, messages.Odnoklassniki.getSendObject({ uid: uid, friend_uid: friend_uid, text: text }));
                    };
                    Messages.markAsRead = function (msg_id, callback) {
                        messages.Odnoklassniki.callRestApi("messages.markAsRead", callback, { msg_id: msg_id });
                    };
                    Messages.markAsSpam = function (msg_ids, callback) {
                        messages.Odnoklassniki.callRestApi("messages.markAsSpam", callback, { msg_ids: msg_ids.join(",") });
                    };
                    Messages.messagesDelete = function (msg_ids, callback) {
                        messages.Odnoklassniki.callRestApi("messages.delete", callback, { msg_ids: msg_ids.join(",") });
                    };
                    return Messages;
                }());
                messages.Messages = Messages;
            })(messages = sdk.messages || (sdk.messages = {}));
        })(sdk = odnoklassniki.sdk || (odnoklassniki.sdk = {}));
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        var sdk;
        (function (sdk) {
            var notifications;
            (function (notifications) {
                notifications.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
                var Notifications = (function () {
                    function Notifications() {
                    }
                    Notifications.sendSimple = function (uid, text, callback) {
                        notifications.Odnoklassniki.callRestApi("notifications.sendSimple", callback, { uid: uid, text: text });
                    };
                    return Notifications;
                }());
                notifications.Notifications = Notifications;
            })(notifications = sdk.notifications || (sdk.notifications = {}));
        })(sdk = odnoklassniki.sdk || (odnoklassniki.sdk = {}));
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        var sdk;
        (function (sdk) {
            var share;
            (function (share) {
                share.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
                var Share = (function () {
                    function Share() {
                    }
                    Share.addLink = function (linkUrl, callback, comment) {
                        if (comment === void 0) { comment = ""; }
                        share.Odnoklassniki.callRestApi("share.addLink", callback, share.Odnoklassniki.getSendObject({ linkUrl: linkUrl, comment: comment }));
                    };
                    return Share;
                }());
                share.Share = Share;
            })(share = sdk.share || (sdk.share = {}));
        })(sdk = odnoklassniki.sdk || (odnoklassniki.sdk = {}));
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        var sdk;
        (function (sdk) {
            var users;
            (function (users) {
                users.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
                var Users = (function () {
                    function Users() {
                    }
                    Users.getCallsLeft = function (methods, callback, uid) {
                        if (uid === void 0) { uid = ""; }
                        users.Odnoklassniki.callRestApi("users.getCallsLeft", callback, users.Odnoklassniki.getSendObject({ uid: uid, methods: methods.join(",") }));
                    };
                    Users.getGuests = function (callback, pagingAnchor, pagingDirection, count, detectTotalCount) {
                        if (pagingAnchor === void 0) { pagingAnchor = ""; }
                        if (pagingDirection === void 0) { pagingDirection = "forward"; }
                        if (count === void 0) { count = 10; }
                        if (detectTotalCount === void 0) { detectTotalCount = false; }
                        users.Odnoklassniki.callRestApi("users.getGuests", callback, users.Odnoklassniki.getSendObject({ pagingAnchor: pagingAnchor, pagingDirection: pagingDirection, count: count, detectTotalCount: detectTotalCount }));
                    };
                    Users.getInfo = function (uids, fields, callback, emptyPictures) {
                        if (emptyPictures === void 0) { emptyPictures = false; }
                        if (!uids)
                            uids = [];
                        users.Odnoklassniki.callRestApi("users.getInfo", callback, users.Odnoklassniki.getSendObject({ uids: uids.join(","), fields: fields.join(","), emptyPictures: emptyPictures }));
                    };
                    Users.getLoggedInUser = function (callback) {
                        users.Odnoklassniki.callRestApi("users.getLoggedInUser", callback);
                    };
                    Users.hasAppPermission = function (ext_perm, callback, uid) {
                        if (uid === void 0) { uid = ""; }
                        users.Odnoklassniki.callRestApi("users.hasAppPermission", callback, users.Odnoklassniki.getSendObject({ uid: uid, ext_perm: ext_perm }));
                    };
                    Users.removeAppPermissions = function (ext_perm, callback, uid) {
                        if (uid === void 0) { uid = ""; }
                        users.Odnoklassniki.callRestApi("users.removeAppPermissions", callback, users.Odnoklassniki.getSendObject({ uid: uid, ext_perm: ext_perm }));
                    };
                    Users.isAppUser = function (callback, uid) {
                        if (uid === void 0) { uid = ""; }
                        users.Odnoklassniki.callRestApi("users.isAppUser", callback, users.Odnoklassniki.getSendObject({ uid: uid }));
                    };
                    Users.setStatus = function (callback, uid, status, location) {
                        if (status === void 0) { status = ""; }
                        if (location === void 0) { location = ""; }
                        users.Odnoklassniki.callRestApi("users.setStatus", callback, users.Odnoklassniki.getSendObject({ uid: uid, status: status, location: location }));
                    };
                    Users.getCurrentUser = function (callback) {
                        users.Odnoklassniki.callRestApi("users.getCurrentUser", callback);
                    };
                    return Users;
                }());
                users.Users = Users;
            })(users = sdk.users || (sdk.users = {}));
        })(sdk = odnoklassniki.sdk || (odnoklassniki.sdk = {}));
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        var sdk;
        (function (sdk) {
            var widget;
            (function (widget) {
                widget.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
                var Widget = (function () {
                    function Widget() {
                    }
                    Widget.getWidgets = function (wids, callback) {
                        widget.Odnoklassniki.callRestApi("widget.getWidgets", callback, { wids: wids.join(",") });
                    };
                    Widget.getWidgetContent = function (wid, callback) {
                        widget.Odnoklassniki.callRestApi("widget.getWidgetContent", callback, { wid: wid }, "XML");
                    };
                    return Widget;
                }());
                widget.Widget = Widget;
            })(widget = sdk.widget || (sdk.widget = {}));
        })(sdk = odnoklassniki.sdk || (odnoklassniki.sdk = {}));
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var api;
(function (api) {
    var ru;
    (function (ru) {
        var events;
        (function (events) {
            events.Event = flash.events.Event;
            var RUCallbackEvent = (function (_super) {
                __extends(RUCallbackEvent, _super);
                function RUCallbackEvent($type, $bubbles, $cancelable, $method, $result, $data) {
                    if ($bubbles === void 0) { $bubbles = false; }
                    if ($cancelable === void 0) { $cancelable = false; }
                    if ($method === void 0) { $method = "null"; }
                    if ($result === void 0) { $result = ""; }
                    if ($data === void 0) { $data = ""; }
                    var _this = _super.call(this, $type, $bubbles, $cancelable) || this;
                    _this._method = $method;
                    _this._result = $result;
                    _this._data = $data;
                    return _this;
                }
                Object.defineProperty(RUCallbackEvent.prototype, "method", {
                    get: function () {
                        return this._method;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(RUCallbackEvent.prototype, "result", {
                    get: function () {
                        return this._result;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(RUCallbackEvent.prototype, "data", {
                    get: function () {
                        return this._data;
                    },
                    enumerable: true,
                    configurable: true
                });
                RUCallbackEvent.prototype.clone = function () {
                    return new RUCallbackEvent(this.type, this.bubbles, this.cancelable, this.method, this.result, this.data);
                };
                RUCallbackEvent.CALL_BACK = "call_back_event";
                return RUCallbackEvent;
            }(events.Event));
            events.RUCallbackEvent = RUCallbackEvent;
        })(events = ru.events || (ru.events = {}));
    })(ru = api.ru || (api.ru = {}));
})(api || (api = {}));
var api;
(function (api) {
    var ru;
    (function (ru) {
        var events;
        (function (events) {
            events.Event = flash.events.Event;
            var RUServerEvent = (function (_super) {
                __extends(RUServerEvent, _super);
                function RUServerEvent(type, data) {
                    if (data === void 0) { data = null; }
                    var _this = _super.call(this, type) || this;
                    _this.data = data;
                    return _this;
                }
                RUServerEvent.CONNECTED = "ru_connected";
                RUServerEvent.CONNECTION_ERROR = "ru_connection_error";
                RUServerEvent.PROXY_NOT_RESPONDING = "ru_proxy_not_reponding";
                RUServerEvent.NOT_YET_CONNECTED = "ru_not_yet_connected";
                RUServerEvent.LIKE_PRESSED = "ru_like_pressed";
                return RUServerEvent;
            }(events.Event));
            events.RUServerEvent = RUServerEvent;
        })(events = ru.events || (ru.events = {}));
    })(ru = api.ru || (api.ru = {}));
})(api || (api = {}));
var api;
(function (api) {
    var vk;
    (function (vk) {
        var events;
        (function (events) {
            events.Event = flash.events.Event;
            var VKCallbackEvent = (function (_super) {
                __extends(VKCallbackEvent, _super);
                function VKCallbackEvent($type, $bubbles, $cancelable, $method, $result, $data) {
                    if ($bubbles === void 0) { $bubbles = false; }
                    if ($cancelable === void 0) { $cancelable = false; }
                    if ($method === void 0) { $method = "null"; }
                    if ($result === void 0) { $result = ""; }
                    if ($data === void 0) { $data = ""; }
                    var _this = _super.call(this, $type, $bubbles, $cancelable) || this;
                    _this._method = $method;
                    _this._result = $result;
                    _this._data = $data;
                    return _this;
                }
                Object.defineProperty(VKCallbackEvent.prototype, "method", {
                    get: function () {
                        return this._method;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(VKCallbackEvent.prototype, "result", {
                    get: function () {
                        return this._result;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(VKCallbackEvent.prototype, "data", {
                    get: function () {
                        return this._data;
                    },
                    enumerable: true,
                    configurable: true
                });
                VKCallbackEvent.prototype.clone = function () {
                    return new VKCallbackEvent(this.type, this.bubbles, this.cancelable, this.method, this.result, this.data);
                };
                VKCallbackEvent.CALL_BACK = "call_back_event";
                return VKCallbackEvent;
            }(events.Event));
            events.VKCallbackEvent = VKCallbackEvent;
        })(events = vk.events || (vk.events = {}));
    })(vk = api.vk || (api.vk = {}));
})(api || (api = {}));
var api;
(function (api) {
    var vk;
    (function (vk) {
        var events;
        (function (events) {
            events.Event = flash.events.Event;
            var VKServerEvent = (function (_super) {
                __extends(VKServerEvent, _super);
                function VKServerEvent(type, data) {
                    if (data === void 0) { data = null; }
                    var _this = _super.call(this, type) || this;
                    _this.data = data;
                    return _this;
                }
                VKServerEvent.CONNECTED = "vk_connected";
                VKServerEvent.CONNECTION_ERROR = "vk_connection_error";
                VKServerEvent.PROXY_NOT_RESPONDING = "vk_proxy_not_reponding";
                VKServerEvent.NOT_YET_CONNECTED = "vk_not_yet_connected";
                return VKServerEvent;
            }(events.Event));
            events.VKServerEvent = VKServerEvent;
        })(events = vk.events || (vk.events = {}));
    })(vk = api.vk || (api.vk = {}));
})(api || (api = {}));
var global;
(function (global) {
    global.getQualifiedClassName = flash.utils.getQualifiedClassName;
    var Error = (function () {
        function Error(message, id) {
            if (message === void 0) { message = ""; }
            if (id === void 0) { id = 0; }
            this._errorID = 0;
            this.message = message;
            this._errorID = id;
            this.name = global.getQualifiedClassName(this);
        }
        Error.prototype.getStackTrace = function () {
            var msg = this.base ? this.base.message : null;
            if (!msg)
                msg = this.message;
            var stk = this.base ? this.base.stack : null;
            if (stk) {
                if (msg && stk.indexOf(msg) == -1)
                    stk = msg + '\n' + stk;
            }
            else {
                stk = msg;
            }
            return stk;
        };
        Object.defineProperty(Error.prototype, "errorID", {
            get: function () {
                return this._errorID;
            },
            enumerable: true,
            configurable: true
        });
        Error.prototype.toString = function () {
            return this.message || 'Error';
        };
        Error.throwError = function (type, index) {
            var rest = [];
            for (var _i = 2; _i < arguments.length; _i++) {
                rest[_i - 2] = arguments[_i];
            }
            type = type || Error;
            var i = 0;
            var f = function (match, pos, string) {
                var arg_num = -1;
                switch (match.charAt(1)) {
                    case "1":
                        break;
                    case "2":
                        arg_num = 1;
                        break;
                    case "3":
                        arg_num = 2;
                        break;
                    case "4":
                        arg_num = 3;
                        break;
                    case "5":
                        arg_num = 4;
                        break;
                    case "6":
                    case 6:
                        arg_num = 5;
                        break;
                    default:
                        arg_num = 0;
                }
                if (arg_num > -1 && rest.length > arg_num) {
                    return rest[arg_num];
                }
                return '';
            };
            throw new type(Error.getErrorMessage(index).replace(new RegExp("%[0-9]", "g"), f), index);
        };
        Error.getErrorMessage = function (value) {
            return '';
        };
        return Error;
    }());
    global.Error = Error;
})(global || (global = {}));
var global;
(function (global) {
    var ArgumentError = (function (_super) {
        __extends(ArgumentError, _super);
        function ArgumentError(message, id) {
            if (message === void 0) { message = ""; }
            if (id === void 0) { id = 0; }
            var _this = _super.call(this, message, id) || this;
            _this.name = "ArgumentError";
            return _this;
        }
        ArgumentError.length = 1;
        return ArgumentError;
    }(global.Error));
    global.ArgumentError = ArgumentError;
})(global || (global = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            var data;
            (function (data) {
                data.Error = global.Error;
                var FQLMultiQuery = (function () {
                    function FQLMultiQuery() {
                        this.queries = {};
                    }
                    FQLMultiQuery.prototype.add = function (query, name, values) {
                        if (values === void 0) { values = null; }
                        if (this.queries.hasOwnProperty(name)) {
                            throw new data.Error("Query name already exists, there cannot be duplicate names");
                        }
                        for (var n in values) {
                            query = query.replace(new RegExp('\\{' + n + '\\}', 'g'), values[n]);
                        }
                        this.queries[name] = query;
                    };
                    FQLMultiQuery.prototype.toString = function () {
                        return JSON.stringify(this.queries);
                    };
                    return FQLMultiQuery;
                }());
                data.FQLMultiQuery = FQLMultiQuery;
            })(data = graph.data || (graph.data = {}));
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            var utils;
            (function (utils) {
                utils.URLVariables = flash.net.URLVariables;
                var FacebookDataUtils = (function () {
                    function FacebookDataUtils() {
                    }
                    FacebookDataUtils.stringToDate = function (value) {
                        if (value == null) {
                            return null;
                        }
                        if (/[^0-9]/g.test(value) == false) {
                            return new Date(parseInt(value) * 1000);
                        }
                        if (/(\d\d)\/(\d\d)(\/\d+)?/ig.test(value)) {
                            var datePeices = value.split('/');
                            if (datePeices.length == 3) {
                                return new Date(datePeices[2], Number(datePeices[0]) - 1, datePeices[1]);
                            }
                            else {
                                return new Date(0, Number(datePeices[0]) - 1, datePeices[1]);
                            }
                        }
                        if (/\d{4}-\d\d-\d\d[\sT]\d\d:\d\d(:\d\d)?[\.\-Z\+]?(\d{0,4})?(\:)?(\-\d\d:)?/ig.test(value)) {
                            return FacebookDataUtils.iso8601ToDate(value);
                        }
                        return new Date(value);
                    };
                    FacebookDataUtils.iso8601ToDate = function (value) {
                        var parts = value.toUpperCase().split('T');
                        var date = parts[0].split('-');
                        var time = (parts.length <= 1) ? [] : parts[1].split(':');
                        var year = date[0] == '' ? 0 : Number(date[0]);
                        var month = date[1] == '' ? 0 : Number(date[1] - 1);
                        var day = date[2] == '' ? 1 : Number(date[2]);
                        var hour = time[0] == '' ? 0 : Number(time[0]);
                        var minute = time[1] == '' ? 0 : Number(time[1]);
                        var second = 0;
                        var millisecond = 0;
                        if (time[2] != null) {
                            var index = time[2].length;
                            if (time[2].indexOf('+') > -1) {
                                index = time[2].indexOf('+');
                            }
                            else if (time[2].indexOf('-') > -1) {
                                index = time[2].indexOf('-');
                            }
                            else if (time[2].indexOf('Z') > -1) {
                                index = time[2].indexOf('Z');
                            }
                            if (!isNaN(index)) {
                                var temp = Number(time[2].slice(0, index));
                                second = temp << 0;
                                millisecond = 1000 * ((temp % 1) / 1);
                            }
                            if (index != time[2].length) {
                                var offset = time[2].slice(index);
                                var userOffset = new Date(year, month, day).getTimezoneOffset() / 60;
                                switch (offset.charAt(0)) {
                                    case '+':
                                    case '-':
                                        hour -= userOffset + Number(offset.slice(0));
                                        break;
                                    case 'Z':
                                        hour -= userOffset;
                                        break;
                                }
                            }
                        }
                        return new Date(year, month, day, hour, minute, second, millisecond);
                    };
                    FacebookDataUtils.dateToUnixTimeStamp = function (date) {
                        return date.time / 1000;
                    };
                    FacebookDataUtils.flattenArray = function (source) {
                        if (source == null) {
                            return [];
                        }
                        return FacebookDataUtils.internalFlattenArray(source);
                    };
                    FacebookDataUtils.getURLVariables = function (url) {
                        var params;
                        if (url.indexOf('#') != -1) {
                            params = url.slice(url.indexOf('#') + 1);
                        }
                        else if (url.indexOf('?') != -1) {
                            params = url.slice(url.indexOf('?') + 1);
                        }
                        var vars = new utils.URLVariables();
                        vars.decode(params);
                        return vars;
                    };
                    FacebookDataUtils.internalFlattenArray = function (source, destination) {
                        if (destination === void 0) { destination = null; }
                        if (destination == null) {
                            destination = [];
                        }
                        var l = source.length;
                        for (var i = 0; i < l; i++) {
                            var item = source[i];
                            if (item instanceof Array) {
                                FacebookDataUtils.internalFlattenArray(item, destination);
                            }
                            else {
                                destination.push(item);
                            }
                        }
                        return destination;
                    };
                    return FacebookDataUtils;
                }());
                utils.FacebookDataUtils = FacebookDataUtils;
            })(utils = graph.utils || (graph.utils = {}));
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            var utils;
            (function (utils) {
                var FQLMultiQueryParser = (function () {
                    function FQLMultiQueryParser() {
                        this.is_IResultParser = null;
                    }
                    FQLMultiQueryParser.prototype.parse = function (data) {
                        var o = {};
                        for (var n in data) {
                            o[data[n].name] = data[n].fql_result_set;
                        }
                        return o;
                    };
                    return FQLMultiQueryParser;
                }());
                utils.FQLMultiQueryParser = FQLMultiQueryParser;
            })(utils = graph.utils || (graph.utils = {}));
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var datas;
(function (datas) {
    datas.Dictionary = flash.utils.Dictionary;
    var PackInfo = (function () {
        function PackInfo() {
            this.images = new datas.Dictionary;
            this.sounds = new datas.Dictionary;
            this.files = new datas.Dictionary;
        }
        return PackInfo;
    }());
    datas.PackInfo = PackInfo;
})(datas || (datas = {}));
var deng;
(function (deng) {
    var fzip;
    (function (fzip) {
        fzip.Event = flash.events.Event;
        var FZipErrorEvent = (function (_super) {
            __extends(FZipErrorEvent, _super);
            function FZipErrorEvent(type, text, bubbles, cancelable) {
                if (text === void 0) { text = ""; }
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                var _this = _super.call(this, type, bubbles, cancelable) || this;
                _this.text = text;
                return _this;
            }
            FZipErrorEvent.prototype.clone = function () {
                return new FZipErrorEvent(this.type, this.text, this.bubbles, this.cancelable);
            };
            FZipErrorEvent.PARSE_ERROR = "parseError";
            return FZipErrorEvent;
        }(fzip.Event));
        fzip.FZipErrorEvent = FZipErrorEvent;
    })(fzip = deng.fzip || (deng.fzip = {}));
})(deng || (deng = {}));
var deng;
(function (deng) {
    var utils;
    (function (utils) {
        utils.ByteArray = flash.utils.ByteArray;
        var ChecksumUtil = (function () {
            function ChecksumUtil() {
            }
            ChecksumUtil.makeCRCTable = function () {
                var table = [];
                var i = 0;
                var j = 0;
                var c = 0;
                for (i = 0; i < 256; i++) {
                    c = i;
                    for (j = 0; j < 8; j++) {
                        if (c & 1) {
                            c = 0xEDB88320 ^ (c >>> 1);
                        }
                        else {
                            c >>>= 1;
                        }
                    }
                    table.push(c);
                }
                return table;
            };
            ChecksumUtil.CRC32 = function (data, start, len) {
                if (start === void 0) { start = 0; }
                if (len === void 0) { len = 0; }
                if (start >= data.length) {
                    start = data.length;
                }
                if (len == 0) {
                    len = data.length - start;
                }
                if (len + start > data.length) {
                    len = data.length - start;
                }
                var i = 0;
                var c = 0xffffffff;
                for (i = start; i < len; i++) {
                    c = uint(ChecksumUtil.crcTable[(c ^ data.get(i)) & 0xff]) ^ (c >>> 8);
                }
                return (c ^ 0xffffffff);
            };
            ChecksumUtil.Adler32 = function (data, start, len) {
                if (start === void 0) { start = 0; }
                if (len === void 0) { len = 0; }
                if (start >= data.length) {
                    start = data.length;
                }
                if (len == 0) {
                    len = data.length - start;
                }
                if (len + start > data.length) {
                    len = data.length - start;
                }
                var i = start;
                var a = 1;
                var b = 0;
                while (i < (start + len)) {
                    a = (a + data.get(i)) % 65521;
                    b = (a + b) % 65521;
                    i++;
                }
                return (b << 16) | a;
            };
            ChecksumUtil.crcTable = ChecksumUtil.makeCRCTable();
            return ChecksumUtil;
        }());
        utils.ChecksumUtil = ChecksumUtil;
    })(utils = deng.utils || (deng.utils = {}));
})(deng || (deng = {}));
var errors;
(function (errors) {
    errors.Error = global.Error;
    var ErrorType = (function () {
        function ErrorType() {
            throw new errors.Error("Abstract class error");
        }
        ErrorType.getErrorHeader = function (errorType, lang) {
            if (lang === void 0) { lang = null; }
            if (!ErrorType.localized[errorType])
                return ErrorType.getErrorHeader(ErrorType.UNCAUGHT, lang);
            lang = ErrorType.parseLang(lang);
            var info = ErrorType.localized[errorType][lang];
            if (info)
                return info.header;
            else
                return ErrorType.localized[errorType]["en"].header;
        };
        ErrorType.getErrorBody = function (errorType, lang) {
            if (lang === void 0) { lang = null; }
            if (!ErrorType.localized[errorType])
                return ErrorType.getErrorBody(ErrorType.UNCAUGHT, lang);
            lang = ErrorType.parseLang(lang);
            var info = ErrorType.localized[errorType][lang];
            if (info)
                return info.body;
            else
                return ErrorType.localized[errorType]["en"].body;
        };
        ErrorType.getErrorButtonLabel = function (errorType, lang) {
            if (lang === void 0) { lang = null; }
            if (!ErrorType.localized[errorType])
                return ErrorType.getErrorButtonLabel(ErrorType.UNCAUGHT, lang);
            lang = ErrorType.parseLang(lang);
            var info = ErrorType.localized[errorType][lang];
            if (info)
                return info.button;
            else
                return ErrorType.localized[errorType]["en"].button;
        };
        ErrorType.parseLang = function (value) {
            if (!value)
                value = "en";
            if (value && value.length > 2)
                value = value.substr(0, 2);
            return value.toLowerCase();
        };
        ErrorType.UNCAUGHT = "uncaught";
        ErrorType.VIEWER = "viewer";
        ErrorType.VIEWER_LOG = "viewer_log";
        ErrorType.MEMORY = "memory";
        ErrorType.MEMORY_FIRST = "memory_first";
        ErrorType.LOGIN = "login";
        ErrorType.BANNED = "banned";
        ErrorType.CLOUD = "cloud";
        ErrorType.LOAD = "load";
        ErrorType.READ = "read";
        ErrorType.BPG = "bpg";
        ErrorType.SHARED_OBJECT = "shared_object";
        ErrorType.SESSION_EXPIRED = "session_expired";
        ErrorType.SCREEN_TIMEOUT = "screen_timeout";
        ErrorType.SCREEN_FREEZE = "screen_freeze";
        ErrorType.FULL_SCREEN = "fullscreen";
        ErrorType.inited = false;
        ErrorType.__block0 = function () {
            if (!ErrorType.inited) {
                ErrorType.inited = true;
                ErrorType.localized = {};
                ErrorType.localized[ErrorType.VIEWER_LOG] = { en: { header: "Info", body: "Sending logs to technical support", button: "Ok" } };
                ErrorType.localized[ErrorType.UNCAUGHT] = { en: { header: "Error", body: "Oops! There is an unknown error. Details will be sent to the support team. Sorry for the inconvenience.", button: "Reload" } };
                ErrorType.localized[ErrorType.MEMORY] = { en: { header: "Error", body: "You have opened too many pages, close some of them or restart your browser!", button: "Reload" } };
                ErrorType.localized[ErrorType.LOGIN] = { en: { header: "Error", body: "Can't connect to the social network", button: "Retry" } };
                ErrorType.localized[ErrorType.BANNED] = { en: { header: "Error", body: "Dear User,\nYour account has been blocked because of cheating, which a crude violation of the game rules.\nIf you object to our decision, please, email us directly to support@absolutist.com", button: "Reload" } };
                ErrorType.localized[ErrorType.CLOUD] = { en: { header: "Error", body: "Unable to connect to server. Check your Internet connection and try again.", button: "Retry" } };
                ErrorType.localized[ErrorType.LOAD] = { en: { header: "Error", body: "Failed to load resources", button: "Retry" } };
                ErrorType.localized[ErrorType.SHARED_OBJECT] = { en: { header: "Warning", body: "The user has permitted local information storage for objects from this domain, but the amount of space allotted is not sufficient to store the object", button: "Ok" } };
                ErrorType.localized[ErrorType.SESSION_EXPIRED] = { en: { header: "Warning", body: "Your session has expired, please restart the game", button: "Restart" } };
                ErrorType.localized[ErrorType.SCREEN_TIMEOUT] = { en: { header: "Warning", body: "Change screen timeout", button: "Retry" } };
                ErrorType.localized[ErrorType.SCREEN_FREEZE] = { en: { header: "Warning", body: "Oh, apparently the game hangs", button: "Retry" } };
                ErrorType.localized[ErrorType.FULL_SCREEN] = { en: { header: "Warning", body: "This browser does not support full-screen mode", button: "Ok" } };
                ErrorType.localized[ErrorType.VIEWER_LOG].ru = { header: "Информация", body: "Отправка логов в техническую поддержку", button: "Хорошо" };
                ErrorType.localized[ErrorType.UNCAUGHT].ru = { header: "Ошибка", body: "Произошла неизвестная ошибка. Подробности будут отправлены в службу технической поддержки. Приносим свои извинения.", button: "Перезапустить" };
                ErrorType.localized[ErrorType.MEMORY].ru = { header: "Ошибка", body: "У вас открыто слишком много вкладок, закройте некоторые из них или перезапустите браузер!", button: "Перезапустить" };
                ErrorType.localized[ErrorType.LOGIN].ru = { header: "Ошибка", body: "Не удается подключиться к социальной сети", button: "Повторить" };
                ErrorType.localized[ErrorType.BANNED].ru = { header: "Ошибка", body: "Уважаемый пользователь!\nДанный аккаунт заблокирован за читерство, что является грубейшим нарушением правил игры.\nЕсли Вы не согласны с нашим решением, пожалуйста, обратитесь в нашу службу поддержки: support@absolutist.com", button: "Перезапустить" };
                ErrorType.localized[ErrorType.CLOUD].ru = { header: "Ошибка", body: "Не удается подключиться к серверу. Проверьте подключение к интернету и повторите попытку.", button: "Повторить" };
                ErrorType.localized[ErrorType.LOAD].ru = { header: "Ошибка", body: "Не удалось загрузить ресурсы", button: "Повторить" };
                ErrorType.localized[ErrorType.SHARED_OBJECT].ru = { header: "Предупреждение", body: "Пользователь разрешил локальное хранение информации для объектов из этого домена, но выделенного объема пространства недостаточно для хранения объекта", button: "Хорошо" };
                ErrorType.localized[ErrorType.SESSION_EXPIRED].ru = { header: "Предупреждение", body: "Ваша сессия истекла, пожалуйста перезапустите игру", button: "Перезапустить" };
                ErrorType.localized[ErrorType.SCREEN_TIMEOUT].ru = { header: "Предупреждение", body: "Слишком долгое время смены экрана", button: "Повторить" };
                ErrorType.localized[ErrorType.SCREEN_FREEZE].ru = { header: "Предупреждение", body: "Ой, судя по всему игра зависла", button: "Повторить" };
                ErrorType.localized[ErrorType.FULL_SCREEN].ru = { header: "Предупреждение", body: "Этот браузер не поддерживает полноэкранный режим", button: "Хорошо" };
                ErrorType.localized[ErrorType.MEMORY_FIRST] = ErrorType.localized[ErrorType.MEMORY];
                ErrorType.localized[ErrorType.VIEWER] = ErrorType.localized[ErrorType.UNCAUGHT];
            }
        }();
        return ErrorType;
    }());
    errors.ErrorType = ErrorType;
})(errors || (errors = {}));
var flash;
(function (flash) {
    var desktop;
    (function (desktop) {
        var Clipboard = (function () {
            function Clipboard() {
                this._data = [];
                this._dataFormat = [];
            }
            Object.defineProperty(Clipboard, "generalClipboard", {
                get: function () {
                    if (!Clipboard._generalClipboard) {
                        Clipboard._generalClipboard = new Clipboard;
                        ['cut', 'copy'].forEach(function (event) {
                            document.addEventListener(event, function (e) {
                                Clipboard._generalClipboard.setData(desktop.ClipboardFormats.TEXT_FORMAT, Clipboard.getSelectionText());
                            }.bind(this));
                        }.bind(this));
                    }
                    return Clipboard._generalClipboard;
                },
                enumerable: true,
                configurable: true
            });
            Clipboard.getSelectionText = function () {
                var text = '';
                if (window.getSelection) {
                    text = window.getSelection().toString();
                }
                return text;
            };
            Object.defineProperty(Clipboard.prototype, "formats", {
                get: function () {
                    return this._dataFormat;
                },
                enumerable: true,
                configurable: true
            });
            Clipboard.prototype.clear = function () {
                this._data.length = 0;
                this._dataFormat.length = 0;
            };
            Clipboard.prototype.clearData = function (format) {
                var index = this._dataFormat.indexOf(format);
                if (index >= 0) {
                    this._data.splice(index, 1);
                    this._dataFormat.splice(index, 1);
                }
            };
            Clipboard.prototype.getData = function (format, transferMode) {
                if (transferMode === void 0) { transferMode = "originalPreferred"; }
                if (this == Clipboard.generalClipboard && format == desktop.ClipboardFormats.TEXT_FORMAT && window.clipboardData) {
                    var system = window.clipboardData.getData('Text');
                    if (system)
                        return system;
                }
                var index = this._dataFormat.indexOf(format);
                if (index >= 0) {
                    return this._data[index];
                }
                return null;
            };
            Clipboard.prototype.hasFormat = function (format) {
                return this._dataFormat.indexOf(format) >= 0;
            };
            Clipboard.prototype.setData = function (format, data, serializable) {
                if (serializable === void 0) { serializable = true; }
                if (this == Clipboard.generalClipboard && format == desktop.ClipboardFormats.TEXT_FORMAT && window.clipboardData) {
                    window.clipboardData.setData('Text', data);
                }
                var index = this._dataFormat.indexOf(format);
                if (index == -1)
                    index = this._dataFormat.length;
                this._data[index] = data;
                this._dataFormat[index] = format;
            };
            Clipboard.prototype.setDataHandler = function (format, handler, serializable) {
                if (serializable === void 0) { serializable = true; }
                return false;
            };
            return Clipboard;
        }());
        desktop.Clipboard = Clipboard;
    })(desktop = flash.desktop || (flash.desktop = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var desktop;
    (function (desktop) {
        desktop.Error = global.Error;
        var ClipboardFormats = (function () {
            function ClipboardFormats() {
                throw new desktop.Error('Abstract class Error');
            }
            ClipboardFormats.BITMAP_FORMAT = "air:bitmap";
            ClipboardFormats.FILE_LIST_FORMAT = "air:file list";
            ClipboardFormats.FILE_PROMISE_LIST_FORMAT = "air:file promise list";
            ClipboardFormats.HTML_FORMAT = "air:html";
            ClipboardFormats.RICH_TEXT_FORMAT = "air:rtf";
            ClipboardFormats.TEXT_FORMAT = "air:text";
            ClipboardFormats.URL_FORMAT = "air:url";
            return ClipboardFormats;
        }());
        desktop.ClipboardFormats = ClipboardFormats;
    })(desktop = flash.desktop || (flash.desktop = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var desktop;
    (function (desktop) {
        desktop.Error = global.Error;
        var ClipboardTransferMode = (function () {
            function ClipboardTransferMode() {
                throw new desktop.Error('Abstract class Error');
            }
            ClipboardTransferMode.CLONE_ONLY = "cloneOnly";
            ClipboardTransferMode.CLONE_PREFERRED = "clonePreferred";
            ClipboardTransferMode.ORIGINAL_ONLY = "originalOnly";
            ClipboardTransferMode.ORIGINAL_PREFERRED = "originalPreferred";
            return ClipboardTransferMode;
        }());
        desktop.ClipboardTransferMode = ClipboardTransferMode;
    })(desktop = flash.desktop || (flash.desktop = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var EventDispatcher = (function () {
            function EventDispatcher(target) {
                if (target === void 0) { target = null; }
                this.is_IEventDispatcher = null;
            }
            EventDispatcher.prototype.addEventListener = function (type, listener, useCapture, priority, useWeakReference) {
                if (useCapture === void 0) { useCapture = false; }
                if (priority === void 0) { priority = 0; }
                if (useWeakReference === void 0) { useWeakReference = false; }
                if (this.mEventListeners == null)
                    this.mEventListeners = {};
                var funcs = this.mEventListeners[type] = this.mEventListeners[type] || [];
                var i = -1;
                var unbound = unbind(listener);
                for (var n = 0; n < funcs.length; ++n) {
                    if (unbind(funcs[n]) === unbound) {
                        i = n;
                        break;
                    }
                }
                if (i == -1) {
                    funcs.push(listener);
                }
            };
            EventDispatcher.prototype.removeEventListener = function (type, listener, useCapture) {
                if (useCapture === void 0) { useCapture = false; }
                if (this.mEventListeners) {
                    var funcs = this.mEventListeners[type];
                    if (funcs) {
                        var i = -1;
                        var unbound = unbind(listener);
                        for (var n = 0; n < funcs.length; ++n) {
                            if (unbind(funcs[n]) === unbound) {
                                i = n;
                                break;
                            }
                        }
                        if (i >= 0) {
                            funcs.splice(i, 1);
                        }
                    }
                }
            };
            EventDispatcher.prototype.removeEventListeners = function (type) {
                if (type === void 0) { type = null; }
                if (type && this.mEventListeners)
                    delete this.mEventListeners[type];
                else
                    this.mEventListeners = null;
            };
            EventDispatcher.prototype.dispatchEvent = function (event) {
                if (!event.target)
                    event.target = this;
                event.currentTarget = this;
                if (this.mEventListeners) {
                    var funcs = this.mEventListeners[event.type];
                    if (funcs) {
                        var len = funcs.length;
                        for (var i = 0; i < len; i++) {
                            var func = funcs[i];
                            func(event);
                            if (event.stopsImmediatePropagation)
                                return true;
                        }
                        return event.stopsPropagation;
                    }
                }
                return false;
            };
            EventDispatcher.prototype.hasEventListener = function (type) {
                var listeners = this.mEventListeners ? this.mEventListeners[type] : null;
                return listeners ? listeners.length != 0 : false;
            };
            EventDispatcher.prototype.willTrigger = function (param1) {
                return false;
            };
            return EventDispatcher;
        }());
        events.EventDispatcher = EventDispatcher;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.EventDispatcher = flash.events.EventDispatcher;
        var FrameLabel = (function (_super) {
            __extends(FrameLabel, _super);
            function FrameLabel(name, frame) {
                var _this = _super.call(this) || this;
                _this._frame = 0;
                _this._name = name;
                _this._frame = frame;
                return _this;
            }
            Object.defineProperty(FrameLabel.prototype, "frame", {
                get: function () {
                    return this._frame;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(FrameLabel.prototype, "name", {
                get: function () {
                    return this._name;
                },
                enumerable: true,
                configurable: true
            });
            return FrameLabel;
        }(display.EventDispatcher));
        display.FrameLabel = FrameLabel;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.ArgumentError = global.ArgumentError;
        display.Error = global.Error;
        display.Event = flash.events.Event;
        display.EventDispatcher = flash.events.EventDispatcher;
        display.EventPhase = flash.events.EventPhase;
        display.MouseEvent = flash.events.MouseEvent;
        display.Matrix = flash.geom.Matrix;
        display.Point = flash.geom.Point;
        display.Rectangle = flash.geom.Rectangle;
        display.Transform = flash.geom.Transform;
        display.Vector3D = flash.geom.Vector3D;
        display.MatrixUtil = flash.utils.MatrixUtil;
        display.VertexData = flash.utils.VertexData;
        var DisplayObject = (function (_super) {
            __extends(DisplayObject, _super);
            function DisplayObject() {
                var _this = _super.call(this) || this;
                _this.is_IBitmapDrawable = null;
                _this.innerID = 0;
                _this._rotation = 0;
                _this.rsin = 0;
                _this.rcos = 1;
                _this._visible = true;
                if (!DisplayObject.sHelperMatrix) {
                    DisplayObject.sHelperMatrix = new display.Matrix();
                    DisplayObject.sHelperMatrixAlt = new display.Matrix();
                    DisplayObject.sHelperPoint = new display.Point();
                    DisplayObject.sHelperRect = new display.Rectangle();
                }
                _this.mVertexData = new display.VertexData(4, true);
                _this.transform = new display.Transform(_this);
                _this.innerID = DisplayObject.ID++;
                _this.name = "instance" + _this.innerID;
                return _this;
            }
            Object.defineProperty(DisplayObject.prototype, "stage", {
                get: function () {
                    return this._stage;
                },
                set: function (v) {
                    if (this._stage != v) {
                        this._stage = v;
                        if (this._stage) {
                            this.dispatchEvent(new display.Event(display.Event.ADDED_TO_STAGE));
                        }
                        else {
                            this.dispatchEvent(new display.Event(display.Event.REMOVED_FROM_STAGE));
                        }
                    }
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "root", {
                get: function () {
                    if (!this.stage)
                        return null;
                    return this.stage.root;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "name", {
                get: function () { return this._name; },
                set: function (v) {
                    this._name = v;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "parent", {
                get: function () { return this._parent; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "mask", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "visible", {
                get: function () { return this._visible; },
                set: function (v) {
                    this._visible = v;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "x", {
                get: function () { return this.transform.matrix.tx; },
                set: function (v) {
                    this.transform.matrix.tx = v;
                    this.updateTransforms();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "y", {
                get: function () { return this.transform.matrix.ty; },
                set: function (v) {
                    this.transform.matrix.ty = v;
                    this.updateTransforms();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "z", {
                get: function () { return 0; },
                set: function (v) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "scaleX", {
                get: function () {
                    var m = this.transform.matrix;
                    if (m.b === 0)
                        return m.a;
                    return Math.sqrt(m.a * m.a + m.b * m.b);
                },
                set: function (v) {
                    var m = this.transform.matrix;
                    if (m.c === 0) {
                        m.a = v;
                    }
                    else {
                        m.a = this.rcos * v;
                        m.b = this.rsin * v;
                    }
                    this.updateTransforms();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "scaleY", {
                get: function () {
                    var m = this.transform.matrix;
                    if (m.c === 0)
                        return m.d;
                    return Math.sqrt(m.c * m.c + m.d * m.d);
                },
                set: function (v) {
                    var m = this.transform.matrix;
                    if (m.c === 0) {
                        m.d = v;
                    }
                    else {
                        m.c = -this.rsin * v;
                        m.d = this.rcos * v;
                    }
                    this.updateTransforms();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "scaleZ", {
                get: function () { return 1; },
                set: function (v) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "mouseX", {
                get: function () {
                    if (this.stage)
                        return this.transform.invMatrix.transformPoint(new display.Point(this.stage.mouseX, this.stage.mouseY)).x;
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "mouseY", {
                get: function () {
                    if (this.stage)
                        return this.transform.invMatrix.transformPoint(new display.Point(this.stage.mouseX, this.stage.mouseY)).y;
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "rotation", {
                get: function () { return this._rotation; },
                set: function (v) {
                    this._rotation = v;
                    var m = this.transform.matrix;
                    var r = v * Math.PI / 180;
                    this.rsin = Math.sin(r);
                    this.rcos = Math.cos(r);
                    var sx = m.b === 0 ? m.a : Math.sqrt(m.a * m.a + m.b * m.b);
                    var sy = m.c === 0 ? m.d : Math.sqrt(m.c * m.c + m.d * m.d);
                    m.a = this.rcos * sx;
                    m.b = this.rsin * sx;
                    m.c = -this.rsin * sy;
                    m.d = this.rcos * sy;
                    this.updateTransforms();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "rotationX", {
                get: function () { return 0; },
                set: function (v) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "rotationY", {
                get: function () { return 0; },
                set: function (v) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "rotationZ", {
                get: function () { return 0; },
                set: function (v) { },
                enumerable: true,
                configurable: true
            });
            DisplayObject.prototype.updateTransforms = function () {
                this.transform.updateTransforms();
                this.dirtyGraphics();
            };
            DisplayObject.prototype.dirtyGraphics = function () {
                if (this.stage)
                    this.stage.dirty = true;
            };
            Object.defineProperty(DisplayObject.prototype, "alpha", {
                get: function () {
                    return this.transform.colorTransform.alphaMultiplier;
                },
                set: function (v) {
                    this.transform.colorTransform.alphaMultiplier = v;
                    this.transform.updateColorTransforms();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "width", {
                get: function () {
                    return this.getRect(this.parent, DisplayObject.sHelperRect).width;
                },
                set: function (v) {
                    var rect = this.getRect(this);
                    if (!rect) {
                        this._needApplyWidth = v;
                        return;
                    }
                    this.scaleX = v / rect.width;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "height", {
                get: function () {
                    return this.getRect(this.parent, DisplayObject.sHelperRect).height;
                },
                set: function (v) {
                    var rect = this.getRect(this);
                    if (!rect) {
                        this._needApplyHeight = v;
                        return;
                    }
                    this.scaleY = v / rect.height;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "cacheAsBitmap", {
                get: function () { return false; },
                set: function (v) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "opaqueBackground", {
                get: function () { return null; },
                set: function (v) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "scrollRect", {
                get: function () { return this.mScrollRect; },
                set: function (v) {
                    this.mScrollRect = v;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "filters", {
                get: function () { return null; },
                set: function (v) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "blendMode", {
                get: function () { return this._blendMode; },
                set: function (v) { this._blendMode = v; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObject.prototype, "scale9Grid", {
                get: function () { return null; },
                set: function (v) { },
                enumerable: true,
                configurable: true
            });
            DisplayObject.prototype.localToGlobal = function (localPoint, resultPoint) {
                if (resultPoint === void 0) { resultPoint = null; }
                this.getTransformationMatrix(this.base, DisplayObject.sHelperMatrixAlt);
                return display.MatrixUtil.transformPoint(DisplayObject.sHelperMatrixAlt, localPoint, resultPoint);
            };
            DisplayObject.prototype.globalToLocal = function (globalPoint, resultPoint) {
                if (resultPoint === void 0) { resultPoint = null; }
                this.getTransformationMatrix(this.base, DisplayObject.sHelperMatrixAlt);
                DisplayObject.sHelperMatrixAlt.invert();
                return display.MatrixUtil.transformPoint(DisplayObject.sHelperMatrixAlt, globalPoint, resultPoint);
            };
            DisplayObject.prototype.getBounds = function (targetSpace, resultRect) {
                if (resultRect === void 0) { resultRect = null; }
                return this.getRect(targetSpace, resultRect);
            };
            DisplayObject.prototype.getRect = function (targetSpace, resultRect) {
                if (resultRect === void 0) { resultRect = null; }
                throw new display.Error('Abstract method error');
            };
            DisplayObject.prototype.__getRect = function () {
                return null;
            };
            DisplayObject.prototype.displayObjectGetRect = function (targetSpace, resultRect) {
                if (resultRect === void 0) { resultRect = null; }
                if (resultRect == null)
                    resultRect = new display.Rectangle();
                if (targetSpace == this) {
                    this.mVertexData.getPosition(3, DisplayObject.sHelperPoint);
                    resultRect.setTo(0.0, 0.0, DisplayObject.sHelperPoint.x, DisplayObject.sHelperPoint.y);
                }
                else if (targetSpace == this.parent && this.rotation == 0.0) {
                    var scaleX = this.scaleX;
                    var scaleY = this.scaleY;
                    this.mVertexData.getPosition(3, DisplayObject.sHelperPoint);
                    resultRect.setTo(this.x, this.y, DisplayObject.sHelperPoint.x * scaleX, DisplayObject.sHelperPoint.y * scaleY);
                    if (scaleX < 0) {
                        resultRect.width *= -1;
                        resultRect.x -= resultRect.width;
                    }
                    if (scaleY < 0) {
                        resultRect.height *= -1;
                        resultRect.y -= resultRect.height;
                    }
                }
                else {
                    this.getTransformationMatrix(targetSpace, DisplayObject.sHelperMatrix);
                    this.mVertexData.getBounds(DisplayObject.sHelperMatrix, 0, 4, resultRect);
                }
                return resultRect;
            };
            Object.defineProperty(DisplayObject.prototype, "loaderInfo", {
                get: function () {
                    return this._loaderInfo;
                },
                enumerable: true,
                configurable: true
            });
            DisplayObject.prototype._setLoaderInfo = function (value) {
                this._loaderInfo = value;
            };
            DisplayObject.prototype.hitTestObject = function (obj) {
                return false;
            };
            DisplayObject.prototype.hitTestPoint = function (x, y, shapeFlag) {
                if (shapeFlag === void 0) { shapeFlag = false; }
                var rect = this.__getRect();
                if (rect)
                    return rect.containsPoint(this.globalToLocal(new display.Point(x, y)));
                return false;
            };
            DisplayObject.prototype.globalToLocal3D = function (param1) { return null; };
            DisplayObject.prototype.local3DToGlobal = function (param1) { return null; };
            Object.defineProperty(DisplayObject.prototype, "metaData", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            DisplayObject.prototype.__update = function (ctx) {
            };
            DisplayObject.prototype.__dispatchEnterFrame = function (recursive) {
                if (recursive === void 0) { recursive = false; }
            };
            DisplayObject.prototype.__doMouse = function (e) {
                return null;
            };
            DisplayObject.prototype.__updateSize = function () {
                if (!isNaN(this._needApplyWidth)) {
                    this.width = this._needApplyWidth;
                    this._needApplyWidth = NaN;
                }
                if (!isNaN(this._needApplyHeight)) {
                    this.height = this._needApplyHeight;
                    this._needApplyHeight = NaN;
                }
            };
            DisplayObject.prototype.dispatchEvent = function (event) {
                var stops = _super.prototype.dispatchEvent.call(this, event);
                if (event.bubbles && this.parent && !stops) {
                    event.eventPhase = display.EventPhase.BUBBLING_PHASE;
                    this.parent.dispatchEvent(event);
                }
                return stops;
            };
            DisplayObject.prototype.getTransformationMatrix = function (targetSpace, resultMatrix) {
                if (resultMatrix === void 0) { resultMatrix = null; }
                var commonParent;
                var currentObject;
                if (resultMatrix)
                    resultMatrix.identity();
                else
                    resultMatrix = new display.Matrix();
                if (targetSpace == this) {
                    return resultMatrix;
                }
                else if (targetSpace == this.parent || (targetSpace == null && this.parent == null)) {
                    resultMatrix.copyFrom(this.transform.matrix);
                    return resultMatrix;
                }
                else if (targetSpace == null || targetSpace == this.base) {
                    currentObject = this;
                    while (currentObject != targetSpace) {
                        resultMatrix.concat(currentObject.transform.matrix);
                        currentObject = currentObject.parent;
                    }
                    return resultMatrix;
                }
                else if (targetSpace.parent == this) {
                    targetSpace.getTransformationMatrix(this, resultMatrix);
                    resultMatrix.invert();
                    return resultMatrix;
                }
                commonParent = this.findCommonParent(this, targetSpace);
                currentObject = this;
                while (currentObject != commonParent) {
                    resultMatrix.concat(currentObject.transform.matrix);
                    currentObject = currentObject.parent;
                }
                if (commonParent == targetSpace)
                    return resultMatrix;
                DisplayObject.sHelperMatrix.identity();
                currentObject = targetSpace;
                while (currentObject != commonParent) {
                    DisplayObject.sHelperMatrix.concat(currentObject.transform.matrix);
                    currentObject = currentObject.parent;
                }
                DisplayObject.sHelperMatrix.invert();
                resultMatrix.concat(DisplayObject.sHelperMatrix);
                return resultMatrix;
            };
            Object.defineProperty(DisplayObject.prototype, "base", {
                get: function () {
                    var currentObject = this;
                    while (currentObject.parent)
                        currentObject = currentObject.parent;
                    return currentObject;
                },
                enumerable: true,
                configurable: true
            });
            DisplayObject.prototype.findCommonParent = function (object1, object2) {
                var currentObject = object1;
                while (currentObject) {
                    DisplayObject.sAncestors[DisplayObject.sAncestors.length] = currentObject;
                    currentObject = currentObject.parent;
                }
                currentObject = object2;
                while (currentObject && DisplayObject.sAncestors.indexOf(currentObject) == -1)
                    currentObject = currentObject.parent;
                DisplayObject.sAncestors.length = 0;
                if (currentObject)
                    return currentObject;
                else
                    throw new display.ArgumentError("Object not connected to target");
            };
            DisplayObject.prototype.__updateVertexData = function () {
                var rect = this.__getRect();
                if (!rect)
                    return;
                this.mVertexData.setPosition(0, 0.0, 0.0);
                this.mVertexData.setPosition(1, rect.width, 0.0);
                this.mVertexData.setPosition(2, 0.0, rect.height);
                this.mVertexData.setPosition(3, rect.width, rect.height);
                this.mVertexData.setUniformColor(0x0);
            };
            DisplayObject.prototype.__beginClipRect = function (ctx, m) {
                if (m === void 0) { m = null; }
                m = m || this.transform.concatenatedMatrix;
                ctx.save();
                ctx.setTransform(1, 0, 0, 1, 0, 0);
                var sx = this.scaleX, sy = this.scaleY;
                ctx.rect(m.tx + this.mScrollRect.x * sx, m.ty + this.mScrollRect.y * sy, this.mScrollRect.width * sx, this.mScrollRect.height * sy);
                ctx.clip();
            };
            DisplayObject.prototype.__endClipRect = function (ctx) {
                ctx.restore();
            };
            DisplayObject.ID = 0;
            DisplayObject.sAncestors = [];
            return DisplayObject;
        }(display.EventDispatcher));
        display.DisplayObject = DisplayObject;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var MorphShape = (function (_super) {
            __extends(MorphShape, _super);
            function MorphShape() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            return MorphShape;
        }(display.DisplayObject));
        display.MorphShape = MorphShape;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.EventDispatcher = flash.events.EventDispatcher;
        var NativeMenu = (function (_super) {
            __extends(NativeMenu, _super);
            function NativeMenu() {
                return _super.call(this) || this;
            }
            return NativeMenu;
        }(display.EventDispatcher));
        display.NativeMenu = NativeMenu;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.EventDispatcher = flash.events.EventDispatcher;
        var NativeMenuItem = (function (_super) {
            __extends(NativeMenuItem, _super);
            function NativeMenuItem(label, isSeparator) {
                if (label === void 0) { label = ""; }
                if (isSeparator === void 0) { isSeparator = false; }
                return _super.call(this) || this;
            }
            return NativeMenuItem;
        }(display.EventDispatcher));
        display.NativeMenuItem = NativeMenuItem;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        display3D.ByteArray = flash.utils.ByteArray;
        var IndexBuffer3D = (function () {
            function IndexBuffer3D() {
                this.numIndices = 0;
            }
            IndexBuffer3D.prototype.uploadFromVector = function (data, startOffset, count) {
                var float32Array = new Uint16Array(data, startOffset, count);
                this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.buff);
                this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, float32Array, this.gl.STATIC_DRAW);
            };
            IndexBuffer3D.prototype.uploadFromByteArray = function (data, byteArrayOffset, startOffset, count) {
            };
            IndexBuffer3D.prototype.dispose = function () {
                this.gl.deleteBuffer(this.buff);
                this.buff = null;
            };
            return IndexBuffer3D;
        }());
        display3D.IndexBuffer3D = IndexBuffer3D;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        display3D.ByteArray = flash.utils.ByteArray;
        var Program3D = (function (_super) {
            __extends(Program3D, _super);
            function Program3D() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                _this.uniformLocations = {};
                _this.attribLocations = {};
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Program3D.prototype.upload = function (vcode, fcode) {
                this.fshader = this.gl.createShader(this.gl.FRAGMENT_SHADER);
                this.vshader = this.gl.createShader(this.gl.VERTEX_SHADER);
                vcode.position = fcode.position = 0;
                this.gl.shaderSource(this.vshader, vcode.readUTFBytes(vcode.length));
                this.gl.compileShader(this.vshader);
                if (!this.gl.getShaderParameter(this.vshader, this.gl.COMPILE_STATUS)) {
                    throw this.vshader + "\n" + vcode + "\n" + (this.gl.getShaderInfoLog(this.vshader));
                }
                this.gl.shaderSource(this.fshader, fcode.readUTFBytes(fcode.length));
                this.gl.compileShader(this.fshader);
                if (!this.gl.getShaderParameter(this.fshader, this.gl.COMPILE_STATUS)) {
                    throw fcode + "\n" + (this.gl.getShaderInfoLog(this.fshader));
                }
                this.gl.attachShader(this.program, this.vshader);
                this.gl.attachShader(this.program, this.fshader);
                this.gl.linkProgram(this.program);
                if (!this.gl.getProgramParameter(this.program, this.gl.LINK_STATUS)) {
                    throw (this.gl.getProgramInfoLog(this.program));
                }
            };
            Program3D.prototype.dispose = function () {
                this.gl.deleteShader(this.fshader);
                this.gl.deleteShader(this.vshader);
                this.gl.deleteProgram(this.program);
            };
            Program3D.prototype.getUniformLocation = function (name) {
                var loc = this.uniformLocations[name];
                if (loc == null) {
                    loc = this.uniformLocations[name] = this.gl.getUniformLocation(this.program, name);
                }
                return loc;
            };
            Program3D.prototype.getAttribLocation = function (name) {
                var loc = this.attribLocations[name];
                if (loc == null) {
                    loc = this.attribLocations[name] = this.gl.getAttribLocation(this.program, name);
                }
                var locnum = Number(loc);
                this.gl.enableVertexAttribArray(locnum);
                return locnum;
            };
            return Program3D;
        }(Object));
        display3D.Program3D = Program3D;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var textures;
        (function (textures) {
            textures.EventDispatcher = flash.events.EventDispatcher;
            var TextureBase = (function (_super) {
                __extends(TextureBase, _super);
                function TextureBase() {
                    return _super.call(this) || this;
                }
                TextureBase.prototype.dispose = function () {
                    if (!this.gl || !this.texture) {
                        return;
                    }
                    this.gl.deleteTexture(this.texture);
                    this.texture = null;
                };
                return TextureBase;
            }(textures.EventDispatcher));
            textures.TextureBase = TextureBase;
        })(textures = display3D.textures || (display3D.textures = {}));
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var textures;
        (function (textures) {
            var VideoTexture = (function (_super) {
                __extends(VideoTexture, _super);
                function VideoTexture() {
                    return _super.call(this) || this;
                }
                VideoTexture.prototype.attachCamera = function (param1) { };
                Object.defineProperty(VideoTexture.prototype, "videoWidth", {
                    get: function () { return 0; },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(VideoTexture.prototype, "videoHeight", {
                    get: function () { return 0; },
                    enumerable: true,
                    configurable: true
                });
                return VideoTexture;
            }(textures.TextureBase));
            textures.VideoTexture = VideoTexture;
        })(textures = display3D.textures || (display3D.textures = {}));
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        display3D.ByteArray = flash.utils.ByteArray;
        var VertexBuffer3D = (function () {
            function VertexBuffer3D() {
                this.data32PerVertex = 0;
            }
            VertexBuffer3D.prototype.uploadFromVector = function (data, startVertex, numVertices) {
                var length = numVertices * this.data32PerVertex;
                var float32Array = new Float32Array(data, startVertex, length);
                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.buff);
                this.gl.bufferData(this.gl.ARRAY_BUFFER, float32Array, this.gl.STATIC_DRAW);
            };
            VertexBuffer3D.prototype.uploadFromByteArray = function (data, byteArrayOffset, startVertex, numVertices) {
            };
            VertexBuffer3D.prototype.dispose = function () {
                this.gl.deleteBuffer(this.buff);
                this.buff = null;
            };
            return VertexBuffer3D;
        }());
        display3D.VertexBuffer3D = VertexBuffer3D;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var errors;
    (function (errors) {
        errors.Error = global.Error;
        var IllegalOperationError = (function (_super) {
            __extends(IllegalOperationError, _super);
            function IllegalOperationError(message, id) {
                if (message === void 0) { message = ""; }
                if (id === void 0) { id = 0; }
                return _super.call(this, message, id) || this;
            }
            return IllegalOperationError;
        }(errors.Error));
        errors.IllegalOperationError = IllegalOperationError;
    })(errors = flash.errors || (flash.errors = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var errors;
    (function (errors) {
        errors.Error = global.Error;
        var IOError = (function (_super) {
            __extends(IOError, _super);
            function IOError(message, id) {
                if (message === void 0) { message = ""; }
                if (id === void 0) { id = 0; }
                return _super.call(this, message, id) || this;
            }
            return IOError;
        }(errors.Error));
        errors.IOError = IOError;
    })(errors = flash.errors || (flash.errors = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        events.Error = global.Error;
        var EventPhase = (function () {
            function EventPhase() {
                throw new events.Error('Abstract class error');
            }
            EventPhase.CAPTURING_PHASE = 1;
            EventPhase.AT_TARGET = 2;
            EventPhase.BUBBLING_PHASE = 3;
            return EventPhase;
        }());
        events.EventPhase = EventPhase;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var FullScreenEvent = (function (_super) {
            __extends(FullScreenEvent, _super);
            function FullScreenEvent(type, bubbles, cancelable, fullScreen, interactive) {
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                if (fullScreen === void 0) { fullScreen = false; }
                if (interactive === void 0) { interactive = false; }
                var _this = _super.call(this, type, bubbles, cancelable) || this;
                _this._fullscreen = false;
                _this._interactive = false;
                _this._fullscreen = fullScreen;
                _this._interactive = interactive;
                return _this;
            }
            Object.defineProperty(FullScreenEvent.prototype, "fullScreen", {
                get: function () {
                    return this._fullscreen;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(FullScreenEvent.prototype, "interactive", {
                get: function () {
                    return this._interactive;
                },
                enumerable: true,
                configurable: true
            });
            FullScreenEvent.prototype.clone = function () {
                return new FullScreenEvent(this.type, this.bubbles, this.cancelable, this._fullscreen, this._interactive);
            };
            FullScreenEvent.prototype.toString = function () {
                return this.formatToString("FullScreenEvent", "type", "bubbles", "cancelable", "eventPhase", "fullScreen", "interactive");
            };
            FullScreenEvent.FULL_SCREEN = "fullScreen";
            FullScreenEvent.FULL_SCREEN_INTERACTIVE_ACCEPTED = "fullScreenInteractiveAccepted";
            return FullScreenEvent;
        }(events.Event));
        events.FullScreenEvent = FullScreenEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var HTTPStatusEvent = (function (_super) {
            __extends(HTTPStatusEvent, _super);
            function HTTPStatusEvent(type, bubbles, cancelable, status, redirected) {
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                if (status === void 0) { status = 0; }
                if (redirected === void 0) { redirected = false; }
                var _this = _super.call(this, type, bubbles, cancelable) || this;
                _this.m_status = 0;
                _this.m_redirected = false;
                _this.m_status = status;
                _this.m_redirected = redirected;
                _this.m_responseHeaders = [];
                return _this;
            }
            HTTPStatusEvent.prototype.clone = function () {
                var result = new HTTPStatusEvent(this.type, this.bubbles, this.cancelable, this.status, this.redirected);
                result.responseURL = this.responseURL;
                result.responseHeaders = this.responseHeaders;
                return result;
            };
            HTTPStatusEvent.prototype.toString = function () {
                return this.formatToString("HTTPStatusEvent", "type", "bubbles", "cancelable", "eventPhase", "status", "redirected", "responseURL");
            };
            Object.defineProperty(HTTPStatusEvent.prototype, "status", {
                get: function () {
                    return this.m_status;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(HTTPStatusEvent.prototype, "responseURL", {
                get: function () {
                    return this.m_responseUrl;
                },
                set: function (value) {
                    this.m_responseUrl = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(HTTPStatusEvent.prototype, "responseHeaders", {
                get: function () {
                    return this.m_responseHeaders;
                },
                set: function (value) {
                    this.m_responseHeaders = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(HTTPStatusEvent.prototype, "redirected", {
                get: function () {
                    return this.m_redirected;
                },
                set: function (value) {
                    this.m_redirected = value;
                },
                enumerable: true,
                configurable: true
            });
            HTTPStatusEvent.HTTP_STATUS = "httpStatus";
            HTTPStatusEvent.HTTP_RESPONSE_STATUS = "httpResponseStatus";
            return HTTPStatusEvent;
        }(events.Event));
        events.HTTPStatusEvent = HTTPStatusEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var KeyboardEvent = (function (_super) {
            __extends(KeyboardEvent, _super);
            function KeyboardEvent(type, bubbles, cancelable, charCodeValue, keyCodeValue, keyLocationValue, ctrlKeyValue, altKeyValue, shiftKeyValue) {
                if (bubbles === void 0) { bubbles = true; }
                if (cancelable === void 0) { cancelable = false; }
                if (charCodeValue === void 0) { charCodeValue = 0; }
                if (keyCodeValue === void 0) { keyCodeValue = 0; }
                if (keyLocationValue === void 0) { keyLocationValue = 0; }
                if (ctrlKeyValue === void 0) { ctrlKeyValue = false; }
                if (altKeyValue === void 0) { altKeyValue = false; }
                if (shiftKeyValue === void 0) { shiftKeyValue = false; }
                var _this = _super.call(this, type, bubbles, cancelable) || this;
                _this.m_keyLocation = 0;
                _this.m_charCode = 0;
                _this.m_keyCode = 0;
                _this.m_ctrlKey = false;
                _this.m_altKey = false;
                _this.m_shiftKey = false;
                _this.charCode = charCodeValue;
                _this.keyCode = keyCodeValue;
                _this.keyLocation = keyLocationValue;
                _this.ctrlKey = ctrlKeyValue;
                _this.altKey = altKeyValue;
                _this.shiftKey = shiftKeyValue;
                return _this;
            }
            KeyboardEvent.prototype.clone = function () {
                return new KeyboardEvent(this.type, this.bubbles, this.cancelable, this.charCode, this.keyCode, this.keyLocation, this.ctrlKey, this.altKey, this.shiftKey);
            };
            KeyboardEvent.prototype.toString = function () {
                return this.formatToString("KeyboardEvent", "type", "bubbles", "cancelable", "eventPhase", "charCode", "keyCode", "keyLocation", "ctrlKey", "altKey", "shiftKey");
            };
            Object.defineProperty(KeyboardEvent.prototype, "charCode", {
                get: function () {
                    return this.m_charCode;
                },
                set: function (value) {
                    this.m_charCode = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(KeyboardEvent.prototype, "keyCode", {
                get: function () {
                    return this.m_keyCode;
                },
                set: function (value) {
                    this.m_keyCode = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(KeyboardEvent.prototype, "keyLocation", {
                get: function () {
                    return this.m_keyLocation;
                },
                set: function (value) {
                    this.m_keyLocation = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(KeyboardEvent.prototype, "ctrlKey", {
                get: function () {
                    return this.m_ctrlKey;
                },
                set: function (value) {
                    this.m_ctrlKey = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(KeyboardEvent.prototype, "altKey", {
                get: function () {
                    return this.m_altKey;
                },
                set: function (value) {
                    this.m_altKey = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(KeyboardEvent.prototype, "shiftKey", {
                get: function () {
                    return this.m_shiftKey;
                },
                set: function (value) {
                    this.m_shiftKey = value;
                },
                enumerable: true,
                configurable: true
            });
            KeyboardEvent.prototype.updateAfterEvent = function () { };
            KeyboardEvent.KEY_DOWN = "keyDown";
            KeyboardEvent.KEY_UP = "keyUp";
            return KeyboardEvent;
        }(events.Event));
        events.KeyboardEvent = KeyboardEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var ProgressEvent = (function (_super) {
            __extends(ProgressEvent, _super);
            function ProgressEvent(type, bubbles, cancelable, bytesLoaded, bytesTotal) {
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                if (bytesLoaded === void 0) { bytesLoaded = 0; }
                if (bytesTotal === void 0) { bytesTotal = 0; }
                var _this = _super.call(this, type, bubbles, cancelable) || this;
                _this.m_bytesLoaded = bytesLoaded;
                _this.m_bytesTotal = bytesTotal;
                return _this;
            }
            ProgressEvent.prototype.clone = function () {
                return new ProgressEvent(this.type, this.bubbles, this.cancelable, this.m_bytesLoaded, this.m_bytesTotal);
            };
            ProgressEvent.prototype.toString = function () {
                return this.formatToString("ProgressEvent", "type", "bubbles", "cancelable", "eventPhase", "bytesLoaded", "bytesTotal");
            };
            Object.defineProperty(ProgressEvent.prototype, "bytesLoaded", {
                get: function () {
                    return this.m_bytesLoaded;
                },
                set: function (value) {
                    this.m_bytesLoaded = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(ProgressEvent.prototype, "bytesTotal", {
                get: function () {
                    return this.m_bytesTotal;
                },
                set: function (value) {
                    this.m_bytesTotal = value;
                },
                enumerable: true,
                configurable: true
            });
            ProgressEvent.PROGRESS = "progress";
            ProgressEvent.SOCKET_DATA = "socketData";
            return ProgressEvent;
        }(events.Event));
        events.ProgressEvent = ProgressEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var StatusEvent = (function (_super) {
            __extends(StatusEvent, _super);
            function StatusEvent(type, bubbles, cancelable, code, level) {
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                if (code === void 0) { code = ""; }
                if (level === void 0) { level = ""; }
                var _this = _super.call(this, type, bubbles, cancelable) || this;
                _this.code = code;
                _this.level = level;
                return _this;
            }
            StatusEvent.prototype.clone = function () {
                return new StatusEvent(this.type, this.bubbles, this.cancelable, this.code, this.level);
            };
            StatusEvent.prototype.toString = function () {
                return this.formatToString("StatusEvent", "type", "bubbles", "cancelable", "eventPhase", "code", "level");
            };
            StatusEvent.STATUS = "status";
            return StatusEvent;
        }(events.Event));
        events.StatusEvent = StatusEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var SyncEvent = (function (_super) {
            __extends(SyncEvent, _super);
            function SyncEvent(type, bubbles, cancelable, changeList) {
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                if (changeList === void 0) { changeList = null; }
                var _this = _super.call(this, type, bubbles, cancelable) || this;
                _this.changeList = changeList;
                return _this;
            }
            SyncEvent.prototype.clone = function () {
                return new SyncEvent(this.type, this.bubbles, this.cancelable, this.changeList);
            };
            SyncEvent.prototype.toString = function () {
                return this.formatToString("SyncEvent", "type", "bubbles", "cancelable", "eventPhase", "changeList");
            };
            SyncEvent.SYNC = "sync";
            return SyncEvent;
        }(events.Event));
        events.SyncEvent = SyncEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var TextEvent = (function (_super) {
            __extends(TextEvent, _super);
            function TextEvent(type, bubbles, cancelable, text) {
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                if (text === void 0) { text = ""; }
                var _this = _super.call(this, type, bubbles, cancelable) || this;
                _this.m_text = text;
                return _this;
            }
            Object.defineProperty(TextEvent.prototype, "text", {
                get: function () {
                    return this.m_text;
                },
                set: function (value) {
                    this.m_text = value;
                },
                enumerable: true,
                configurable: true
            });
            TextEvent.prototype.clone = function () {
                var te = new TextEvent(this.type, this.bubbles, this.cancelable, this.m_text);
                te.copyNativeData(this);
                return te;
            };
            TextEvent.prototype.toString = function () {
                return this.formatToString("TextEvent", "type", "bubbles", "cancelable", "eventPhase", "text");
            };
            TextEvent.prototype.copyNativeData = function (param1) { };
            TextEvent.LINK = "link";
            TextEvent.TEXT_INPUT = "textInput";
            return TextEvent;
        }(events.Event));
        events.TextEvent = TextEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var TimerEvent = (function (_super) {
            __extends(TimerEvent, _super);
            function TimerEvent(type, bubbles, cancelable) {
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                return _super.call(this, type, bubbles, cancelable) || this;
            }
            TimerEvent.prototype.clone = function () {
                return new TimerEvent(this.type, this.bubbles, this.cancelable);
            };
            TimerEvent.prototype.toString = function () {
                return this.formatToString("TimerEvent", "type", "bubbles", "cancelable", "eventPhase");
            };
            TimerEvent.prototype.updateAfterEvent = function () {
            };
            TimerEvent.TIMER = "timer";
            TimerEvent.TIMER_COMPLETE = "timerComplete";
            return TimerEvent;
        }(events.Event));
        events.TimerEvent = TimerEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var TouchEvent = (function (_super) {
            __extends(TouchEvent, _super);
            function TouchEvent(type, bubbles, cancelable, touchPointID, isPrimaryTouchPoint, localX, localY, sizeX, sizeY, pressure, relatedObject, ctrlKey, altKey, shiftKey) {
                if (bubbles === void 0) { bubbles = true; }
                if (cancelable === void 0) { cancelable = false; }
                if (touchPointID === void 0) { touchPointID = 0; }
                if (isPrimaryTouchPoint === void 0) { isPrimaryTouchPoint = false; }
                if (localX === void 0) { localX = NaN; }
                if (localY === void 0) { localY = NaN; }
                if (sizeX === void 0) { sizeX = NaN; }
                if (sizeY === void 0) { sizeY = NaN; }
                if (pressure === void 0) { pressure = NaN; }
                if (relatedObject === void 0) { relatedObject = null; }
                if (ctrlKey === void 0) { ctrlKey = false; }
                if (altKey === void 0) { altKey = false; }
                if (shiftKey === void 0) { shiftKey = false; }
                var _this = _super.call(this, type, bubbles, cancelable) || this;
                _this.m_touchPointID = 0;
                _this.m_isPrimaryTouchPoint = false;
                _this.m_isRelatedObjectInaccessible = false;
                _this.m_ctrlKey = false;
                _this.m_altKey = false;
                _this.m_shiftKey = false;
                _this.m_touchPointID = touchPointID;
                _this.m_isPrimaryTouchPoint = isPrimaryTouchPoint;
                _this.localX = localX;
                _this.localY = localY;
                _this.m_sizeX = sizeX;
                _this.m_sizeY = sizeY;
                _this.m_pressure = pressure;
                _this.m_relatedObject = relatedObject;
                _this.m_ctrlKey = ctrlKey;
                _this.m_altKey = altKey;
                _this.m_shiftKey = shiftKey;
                return _this;
            }
            TouchEvent.prototype.clone = function () {
                return new TouchEvent(this.type, this.bubbles, this.cancelable, this.m_touchPointID, this.m_isPrimaryTouchPoint, this.localX, this.localY, this.m_sizeX, this.m_sizeY, this.m_pressure, this.m_relatedObject, this.m_ctrlKey, this.m_altKey, this.m_shiftKey);
            };
            TouchEvent.prototype.toString = function () {
                return this.formatToString("TouchEvent", "type", "bubbles", "cancelable", "eventPhase", "touchPointID", "isPrimaryTouchPoint", "localX", "localY", "stageX", "stageY", "sizeX", "sizeY", "pressure", "relatedObject", "ctrlKey", "altKey", "shiftKey");
            };
            Object.defineProperty(TouchEvent.prototype, "localX", {
                get: function () { return 0; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TouchEvent.prototype, "localY", {
                get: function () { return 0; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TouchEvent.prototype, "touchPointID", {
                get: function () {
                    return this.m_touchPointID;
                },
                set: function (value) {
                    this.m_touchPointID = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TouchEvent.prototype, "isPrimaryTouchPoint", {
                get: function () {
                    return this.m_isPrimaryTouchPoint;
                },
                set: function (value) {
                    this.m_isPrimaryTouchPoint = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TouchEvent.prototype, "sizeX", {
                get: function () {
                    return this.m_sizeX;
                },
                set: function (value) {
                    this.m_sizeX = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TouchEvent.prototype, "sizeY", {
                get: function () {
                    return this.m_sizeY;
                },
                set: function (value) {
                    this.m_sizeY = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TouchEvent.prototype, "pressure", {
                get: function () {
                    return this.m_pressure;
                },
                set: function (value) {
                    this.m_pressure = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TouchEvent.prototype, "relatedObject", {
                get: function () {
                    return this.m_relatedObject;
                },
                set: function (value) {
                    this.m_relatedObject = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TouchEvent.prototype, "ctrlKey", {
                get: function () {
                    return this.m_ctrlKey;
                },
                set: function (value) {
                    this.m_ctrlKey = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TouchEvent.prototype, "altKey", {
                get: function () {
                    return this.m_altKey;
                },
                set: function (value) {
                    this.m_altKey = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TouchEvent.prototype, "shiftKey", {
                get: function () {
                    return this.m_shiftKey;
                },
                set: function (value) {
                    this.m_shiftKey = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TouchEvent.prototype, "stageX", {
                get: function () {
                    if (isNaN(this.localX) || isNaN(this.localY)) {
                        return Number.NaN;
                    }
                    return this.getStageX();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TouchEvent.prototype, "stageY", {
                get: function () {
                    if (isNaN(this.localX) || isNaN(this.localY)) {
                        return Number.NaN;
                    }
                    return this.getStageY();
                },
                enumerable: true,
                configurable: true
            });
            TouchEvent.prototype.getStageX = function () {
                return 0;
            };
            TouchEvent.prototype.getStageY = function () {
                return 0;
            };
            TouchEvent.prototype.updateAfterEvent = function () {
            };
            Object.defineProperty(TouchEvent.prototype, "isRelatedObjectInaccessible", {
                get: function () {
                    return this.m_isRelatedObjectInaccessible;
                },
                set: function (value) {
                    this.m_isRelatedObjectInaccessible = value;
                },
                enumerable: true,
                configurable: true
            });
            TouchEvent.TOUCH_BEGIN = "touchBegin";
            TouchEvent.TOUCH_END = "touchEnd";
            TouchEvent.TOUCH_MOVE = "touchMove";
            TouchEvent.TOUCH_OVER = "touchOver";
            TouchEvent.TOUCH_OUT = "touchOut";
            TouchEvent.TOUCH_ROLL_OVER = "touchRollOver";
            TouchEvent.TOUCH_ROLL_OUT = "touchRollOut";
            TouchEvent.TOUCH_TAP = "touchTap";
            TouchEvent.PROXIMITY_BEGIN = "proximityBegin";
            TouchEvent.PROXIMITY_END = "proximityEnd";
            TouchEvent.PROXIMITY_MOVE = "proximityMove";
            TouchEvent.PROXIMITY_OUT = "proximityOut";
            TouchEvent.PROXIMITY_OVER = "proximityOver";
            TouchEvent.PROXIMITY_ROLL_OUT = "proximityRollOut";
            TouchEvent.PROXIMITY_ROLL_OVER = "proximityRollOver";
            return TouchEvent;
        }(events.Event));
        events.TouchEvent = TouchEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var UncaughtErrorEvents = (function (_super) {
            __extends(UncaughtErrorEvents, _super);
            function UncaughtErrorEvents() {
                return _super.call(this) || this;
            }
            return UncaughtErrorEvents;
        }(events.EventDispatcher));
        events.UncaughtErrorEvents = UncaughtErrorEvents;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var VideoTextureEvent = (function (_super) {
            __extends(VideoTextureEvent, _super);
            function VideoTextureEvent(type, bubbles, cancelable, status, colorSpace) {
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                if (status === void 0) { status = null; }
                if (colorSpace === void 0) { colorSpace = null; }
                var _this = _super.call(this, type, bubbles, cancelable) || this;
                _this.m_status = status;
                _this.m_colorSpace = colorSpace;
                return _this;
            }
            Object.defineProperty(VideoTextureEvent.prototype, "status", {
                get: function () {
                    return this.m_status;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(VideoTextureEvent.prototype, "colorSpace", {
                get: function () {
                    return this.m_colorSpace;
                },
                enumerable: true,
                configurable: true
            });
            VideoTextureEvent.RENDER_STATE = "renderState";
            return VideoTextureEvent;
        }(events.Event));
        events.VideoTextureEvent = VideoTextureEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var geom;
    (function (geom) {
        var Rectangle = (function (_super) {
            __extends(Rectangle, _super);
            function Rectangle(x, y, width, height) {
                var _newTarget = this.constructor;
                if (x === void 0) { x = 0; }
                if (y === void 0) { y = 0; }
                if (width === void 0) { width = 0; }
                if (height === void 0) { height = 0; }
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.x = x;
                _this.y = y;
                _this.width = width;
                _this.height = height;
                return _this;
            }
            Object.defineProperty(Rectangle.prototype, "left", {
                get: function () {
                    return this.x;
                },
                set: function (value) {
                    this.width = this.width + (this.x - value);
                    this.x = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Rectangle.prototype, "right", {
                get: function () {
                    return this.x + this.width;
                },
                set: function (value) {
                    this.width = value - this.x;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Rectangle.prototype, "top", {
                get: function () {
                    return this.y;
                },
                set: function (value) {
                    this.height = this.height + (this.y - value);
                    this.y = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Rectangle.prototype, "bottom", {
                get: function () {
                    return this.y + this.height;
                },
                set: function (value) {
                    this.height = value - this.y;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Rectangle.prototype, "topLeft", {
                get: function () {
                    return new geom.Point(this.x, this.y);
                },
                set: function (value) {
                    this.width = this.width + (this.x - value.x);
                    this.height = this.height + (this.y - value.y);
                    this.x = value.x;
                    this.y = value.y;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Rectangle.prototype, "bottomRight", {
                get: function () {
                    return new geom.Point(this.right, this.bottom);
                },
                set: function (value) {
                    this.width = value.x - this.x;
                    this.height = value.y - this.y;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Rectangle.prototype, "size", {
                get: function () {
                    return new geom.Point(this.width, this.height);
                },
                set: function (value) {
                    this.width = value.x;
                    this.height = value.y;
                },
                enumerable: true,
                configurable: true
            });
            Rectangle.prototype.clone = function () {
                return new Rectangle(this.x, this.y, this.width, this.height);
            };
            Rectangle.prototype.isEmpty = function () {
                return this.width <= 0 || this.height <= 0;
            };
            Rectangle.prototype.setEmpty = function () {
                this.x = 0;
                this.y = 0;
                this.width = 0;
                this.height = 0;
            };
            Rectangle.prototype.inflate = function (dx, dy) {
                this.x = this.x - dx;
                this.width = this.width + 2 * dx;
                this.y = this.y - dy;
                this.height = this.height + 2 * dy;
            };
            Rectangle.prototype.inflatePoint = function (point) {
                this.x = this.x - point.x;
                this.width = this.width + 2 * point.x;
                this.y = this.y - point.y;
                this.height = this.height + 2 * point.y;
            };
            Rectangle.prototype.offset = function (dx, dy) {
                this.x = this.x + dx;
                this.y = this.y + dy;
            };
            Rectangle.prototype.offsetPoint = function (point) {
                this.x = this.x + point.x;
                this.y = this.y + point.y;
            };
            Rectangle.prototype.contains = function (x, y) {
                return x >= this.x && x < this.x + this.width && y >= this.y && y < this.y + this.height;
            };
            Rectangle.prototype.containsPoint = function (point) {
                return point.x >= this.x && point.x < this.x + this.width && point.y >= this.y && point.y < this.y + this.height;
            };
            Rectangle.prototype.containsRect = function (rect) {
                var r1 = rect.x + rect.width;
                var b1 = rect.y + rect.height;
                var r2 = this.x + this.width;
                var b2 = this.y + this.height;
                return rect.x >= this.x && rect.x < r2 && rect.y >= this.y && rect.y < b2 && r1 > this.x && r1 <= r2 && b1 > this.y && b1 <= b2;
            };
            Rectangle.prototype.intersection = function (toIntersect) {
                var result = new Rectangle();
                if (this.isEmpty() || toIntersect.isEmpty()) {
                    result.setEmpty();
                    return result;
                }
                result.x = Math.max(this.x, toIntersect.x);
                result.y = Math.max(this.y, toIntersect.y);
                result.width = Math.min(this.x + this.width, toIntersect.x + toIntersect.width) - result.x;
                result.height = Math.min(this.y + this.height, toIntersect.y + toIntersect.height) - result.y;
                if (result.width <= 0 || result.height <= 0) {
                    result.setEmpty();
                }
                return result;
            };
            Rectangle.prototype.intersects = function (toIntersect) {
                if (this.isEmpty() || toIntersect.isEmpty()) {
                    return false;
                }
                var resultx = Math.max(this.x, toIntersect.x);
                var resulty = Math.max(this.y, toIntersect.y);
                var resultwidth = Math.min(this.x + this.width, toIntersect.x + toIntersect.width) - resultx;
                var resultheight = Math.min(this.y + this.height, toIntersect.y + toIntersect.height) - resulty;
                if (resultwidth <= 0 || resultheight <= 0) {
                    return false;
                }
                return true;
            };
            Rectangle.prototype.union = function (toUnion) {
                var r = null;
                if (this.isEmpty()) {
                    return toUnion.clone();
                }
                if (toUnion.isEmpty()) {
                    return this.clone();
                }
                r = new Rectangle();
                r.x = Math.min(this.x, toUnion.x);
                r.y = Math.min(this.y, toUnion.y);
                r.width = Math.max(this.x + this.width, toUnion.x + toUnion.width) - r.x;
                r.height = Math.max(this.y + this.height, toUnion.y + toUnion.height) - r.y;
                return r;
            };
            Rectangle.prototype.equals = function (toCompare) {
                return toCompare.x === this.x && toCompare.y === this.y && toCompare.width === this.width && toCompare.height === this.height;
            };
            Rectangle.prototype.toString = function () {
                return "(x=" + this.x + ", y=" + this.y + ", w=" + this.width + ", h=" + this.height + ")";
            };
            Rectangle.prototype.copyFrom = function (sourceRect) {
                this.x = sourceRect.x;
                this.y = sourceRect.y;
                this.width = sourceRect.width;
                this.height = sourceRect.height;
            };
            Rectangle.prototype.setTo = function (xa, ya, widtha, heighta) {
                this.x = xa;
                this.y = ya;
                this.width = widtha;
                this.height = heighta;
            };
            return Rectangle;
        }(Object));
        geom.Rectangle = Rectangle;
    })(geom = flash.geom || (flash.geom = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var net;
    (function (net) {
        net.EventDispatcher = flash.events.EventDispatcher;
        var LocalConnection = (function (_super) {
            __extends(LocalConnection, _super);
            function LocalConnection() {
                var _this = _super.call(this) || this;
                _this.isPerUser = false;
                return _this;
            }
            Object.defineProperty(LocalConnection.prototype, "domain", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LocalConnection, "isSupported", {
                get: function () {
                    return false;
                },
                enumerable: true,
                configurable: true
            });
            LocalConnection.prototype.allowDomain = function () {
                var domains = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    domains[_i] = arguments[_i];
                }
            };
            LocalConnection.prototype.allowInsecureDomain = function () {
                var domains = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    domains[_i] = arguments[_i];
                }
            };
            LocalConnection.prototype.close = function () {
            };
            LocalConnection.prototype.connect = function (connectionName) {
            };
            LocalConnection.prototype.send = function (connectionName, methodName) {
                var args = [];
                for (var _i = 2; _i < arguments.length; _i++) {
                    args[_i - 2] = arguments[_i];
                }
            };
            return LocalConnection;
        }(net.EventDispatcher));
        net.LocalConnection = LocalConnection;
    })(net = flash.net || (flash.net = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var net;
    (function (net) {
        function navigateToURL(request, win) {
            if (win === void 0) { win = null; }
            window.open(request.url, win);
        }
        net.navigateToURL = navigateToURL;
    })(net = flash.net || (flash.net = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var net;
    (function (net) {
        net.Error = global.Error;
        var SharedObjectFlushStatus = (function () {
            function SharedObjectFlushStatus() {
                throw new net.Error('Abstract class error');
            }
            SharedObjectFlushStatus.FLUSHED = "flushed";
            SharedObjectFlushStatus.PENDING = "pending";
            return SharedObjectFlushStatus;
        }());
        net.SharedObjectFlushStatus = SharedObjectFlushStatus;
    })(net = flash.net || (flash.net = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var net;
    (function (net) {
        net.Error = global.Error;
        var URLLoaderDataFormat = (function () {
            function URLLoaderDataFormat() {
                throw new net.Error('Abstract class error');
            }
            URLLoaderDataFormat.TEXT = "text";
            URLLoaderDataFormat.BINARY = "binary";
            URLLoaderDataFormat.VARIABLES = "variables";
            return URLLoaderDataFormat;
        }());
        net.URLLoaderDataFormat = URLLoaderDataFormat;
    })(net = flash.net || (flash.net = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var net;
    (function (net) {
        net.Error = global.Error;
        var URLRequestMethod = (function () {
            function URLRequestMethod() {
                throw new net.Error('Abstract class error');
            }
            URLRequestMethod.POST = "POST";
            URLRequestMethod.GET = "GET";
            URLRequestMethod.PUT = "PUT";
            URLRequestMethod.DELETE = "DELETE";
            URLRequestMethod.HEAD = "HEAD";
            URLRequestMethod.OPTIONS = "OPTIONS";
            return URLRequestMethod;
        }());
        net.URLRequestMethod = URLRequestMethod;
    })(net = flash.net || (flash.net = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var net;
    (function (net) {
        net.Error = global.Error;
        var URLVariables = (function () {
            function URLVariables(source) {
                if (source === void 0) { source = null; }
                if (source != null) {
                    try {
                        this.decode(source);
                    }
                    catch (e) { }
                }
            }
            URLVariables.prototype.decode = function (source) {
                var param = null;
                var equalsIndex = 0;
                var name = null;
                var value = null;
                var oldValue = undefined;
                var params = source.split("&");
                for (var i = 0; i < params.length; i++) {
                    param = params[i];
                    equalsIndex = param.indexOf("=");
                    if (equalsIndex == -1) {
                        net.Error.throwError(net.Error, 2101);
                    }
                    else {
                        name = decodeURI(param.substr(0, equalsIndex));
                        value = decodeURI(param.substr(equalsIndex + 1));
                        oldValue = this[name];
                        if (oldValue != undefined) {
                            if (!(oldValue instanceof Array)) {
                                this[name] = oldValue = [oldValue];
                            }
                            oldValue.push(value);
                        }
                        else {
                            this[name] = value;
                        }
                    }
                }
            };
            URLVariables.prototype.toString = function () {
                var name = null;
                var escapedName = null;
                var value = undefined;
                var i = 0;
                var s = "";
                var first = true;
                for (name in this) {
                    if (name === 'decode')
                        continue;
                    if (name === 'toString')
                        continue;
                    escapedName = encodeURI(name);
                    value = this[name];
                    if (value instanceof Array) {
                        for (i = 0; i < value.length; i++) {
                            if (!first) {
                                s = s + "&";
                            }
                            s = s + escapedName;
                            s = s + "=";
                            s = s + encodeURI(String(value[i]));
                            first = false;
                        }
                    }
                    else {
                        if (!first) {
                            s = s + "&";
                        }
                        s = s + escapedName;
                        s = s + "=";
                        s = s + encodeURI(String(value));
                        first = false;
                    }
                }
                return s;
            };
            return URLVariables;
        }());
        net.URLVariables = URLVariables;
    })(net = flash.net || (flash.net = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var system;
    (function (system) {
        system.ByteArray = flash.utils.ByteArray;
        var ApplicationDomain = (function () {
            function ApplicationDomain(parentDomain) {
                if (parentDomain === void 0) { parentDomain = null; }
            }
            Object.defineProperty(ApplicationDomain, "currentDomain", {
                get: function () {
                    ApplicationDomain.sCurrentDomain = ApplicationDomain.sCurrentDomain || new ApplicationDomain;
                    return ApplicationDomain.sCurrentDomain;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(ApplicationDomain, "MIN_DOMAIN_MEMORY_LENGTH", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            ApplicationDomain.prototype.domainMemory = function () {
                return null;
            };
            Object.defineProperty(ApplicationDomain.prototype, "parentDomain", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            ApplicationDomain.prototype.getDefinition = function (name) {
                return null;
            };
            ApplicationDomain.prototype.getQualifiedDefinitionNames = function () {
                return null;
            };
            ApplicationDomain.prototype.hasDefinition = function (name) {
                return false;
            };
            return ApplicationDomain;
        }());
        system.ApplicationDomain = ApplicationDomain;
    })(system = flash.system || (flash.system = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var system;
    (function (system) {
        system.XML = global.XML;
        var System = (function (_super) {
            __extends(System, _super);
            function System() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Object.defineProperty(System, "ime", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            System.setClipboard = function (text) {
                var textArea = document.createElement("textarea");
                textArea.style.position = 'fixed';
                textArea.style.top = 0;
                textArea.style.left = 0;
                textArea.style.width = '2em';
                textArea.style.height = '2em';
                textArea.style.padding = 0;
                textArea.style.border = 'none';
                textArea.style.outline = 'none';
                textArea.style.boxShadow = 'none';
                textArea.style.background = 'transparent';
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    var successful = document.execCommand('copy');
                    var msg = successful ? 'successful' : 'unsuccessful';
                    trace('Copying text command was ' + msg);
                }
                catch (err) {
                    trace('Oops, unable to copy');
                }
                document.body.removeChild(textArea);
            };
            Object.defineProperty(System, "totalMemory", {
                get: function () {
                    return System.totalMemoryNumber;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(System, "totalMemoryNumber", {
                get: function () {
                    return System.memory.totalJSHeapSize;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(System, "freeMemory", {
                get: function () {
                    return Math.max(System.memory.jsHeapSizeLimit - System.totalMemoryNumber, 0);
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(System, "privateMemory", {
                get: function () {
                    return System.memory.usedJSHeapSize;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(System, "useCodePage", {
                get: function () {
                    return false;
                },
                set: function (param1) {
                },
                enumerable: true,
                configurable: true
            });
            System.pause = function () {
            };
            System.resume = function () {
            };
            System.exit = function (param1) {
            };
            System.gc = function () {
            };
            System.pauseForGCIfCollectionImminent = function (param1) {
                if (param1 === void 0) { param1 = 0.75; }
            };
            System.disposeXML = function (value) {
                if (value && 'dispose' in value) {
                    value.dispose();
                }
            };
            Object.defineProperty(System, "memory", {
                get: function () {
                    if ('memory' in window.performance)
                        return window.performance['memory'];
                    return { jsHeapSizeLimit: 0, totalJSHeapSize: 0, usedJSHeapSize: 0 };
                },
                enumerable: true,
                configurable: true
            });
            return System;
        }(Object));
        system.System = System;
    })(system = flash.system || (flash.system = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        text.DisplayObject = flash.display.DisplayObject;
        var StaticText = (function (_super) {
            __extends(StaticText, _super);
            function StaticText() {
                return _super.call(this) || this;
            }
            Object.defineProperty(StaticText.prototype, "text", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            return StaticText;
        }(text.DisplayObject));
        text.StaticText = StaticText;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        text.Capabilities = flash.system.Capabilities;
        var TextFormat = (function (_super) {
            __extends(TextFormat, _super);
            function TextFormat(font, size, color, bold, italic, underline, url, target, align, leftMargin, rightMargin, indent, leading) {
                var _newTarget = this.constructor;
                if (font === void 0) { font = null; }
                if (size === void 0) { size = null; }
                if (color === void 0) { color = null; }
                if (bold === void 0) { bold = null; }
                if (italic === void 0) { italic = null; }
                if (underline === void 0) { underline = null; }
                if (url === void 0) { url = null; }
                if (target === void 0) { target = null; }
                if (align === void 0) { align = null; }
                if (leftMargin === void 0) { leftMargin = null; }
                if (rightMargin === void 0) { rightMargin = null; }
                if (indent === void 0) { indent = null; }
                if (leading === void 0) { leading = null; }
                var _this = _super.call(this) || this;
                _this.dirty = true;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                if (!TextFormat.DEFAULT_FONT) {
                    if (text.Capabilities.os.toLowerCase().indexOf('mac os') >= 0) {
                        TextFormat.DEFAULT_FONT = 'Times';
                    }
                    else
                        TextFormat.DEFAULT_FONT = 'Times New Roman';
                }
                _this.font = font || TextFormat.DEFAULT_FONT;
                _this.size = size || 12;
                _this.color = color || 0x0;
                _this.bold = bold || false;
                _this.italic = italic || false;
                _this.underline = underline || false;
                _this.url = url || '';
                _this.target = target || '';
                _this.align = align || 'left';
                _this.leftMargin = leftMargin || 0;
                _this.rightMargin = rightMargin || 0;
                _this.indent = indent || 0;
                _this.leading = leading || 0;
                return _this;
            }
            Object.defineProperty(TextFormat.prototype, "align", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "blockIndent", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "bold", {
                get: function () { return this._bold; },
                set: function (param1) { this._bold = param1; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "bullet", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "color", {
                get: function () { return this._color; },
                set: function (param1) { this._color = param1; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "display", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "font", {
                get: function () { return this._font; },
                set: function (param1) { this._font = param1; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "indent", {
                get: function () { return this._indent; },
                set: function (param1) { this._indent = param1; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "italic", {
                get: function () { return this._italic; },
                set: function (param1) { this._italic = param1; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "kerning", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "leading", {
                get: function () { return this._leading; },
                set: function (param1) { this._leading = param1; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "leftMargin", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "letterSpacing", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "rightMargin", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "size", {
                get: function () { return this._size; },
                set: function (param1) { this._size = param1 > 1 ? param1 : 2; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "tabStops", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "target", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "underline", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "url", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "css", {
                get: function () {
                    this._css = '';
                    if (this._bold)
                        this._css += 'bold ';
                    if (this._italic)
                        this._css += 'italic ';
                    this._css += this.size + 'px ' + this.font;
                    return this._css;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextFormat.prototype, "csscolor", {
                get: function () {
                    return 'rgb(' + (int(this.color) >> 16 & 0xff) + ',' + (int(this.color) >> 8 & 0xff) + ',' + (int(this.color) & 0xff) + ')';
                },
                enumerable: true,
                configurable: true
            });
            return TextFormat;
        }(Object));
        text.TextFormat = TextFormat;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        var TextRun = (function (_super) {
            __extends(TextRun, _super);
            function TextRun(beginIndex, endIndex, textFormat) {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                _this.beginIndex = 0;
                _this.endIndex = 0;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.beginIndex = beginIndex;
                _this.endIndex = endIndex;
                _this.textFormat = textFormat;
                return _this;
            }
            return TextRun;
        }(Object));
        text.TextRun = TextRun;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        var Base64 = (function () {
            function Base64() {
            }
            Base64.encode = function (data) {
                var out = new utils.ByteArray();
                out.length = (2 + data.length - ((data.length + 2) % 3)) * 4 / 3;
                var i = 0;
                var r = data.length % 3;
                var len = data.length - r;
                var c = 0;
                var outPos = 0;
                while (i < len) {
                    c = data.get(int(i++)) << 16 | data.get(int(i++)) << 8 | data.get(int(i++));
                    out.set(outPos++, Base64._encodeChars[int(c >>> 18)]);
                    out.set(outPos++, Base64._encodeChars[int(c >>> 12 & 0x3f)]);
                    out.set(outPos++, Base64._encodeChars[int(c >>> 6 & 0x3f)]);
                    out.set(outPos++, Base64._encodeChars[int(c & 0x3f)]);
                }
                if (r == 1) {
                    c = data.get(int(i));
                    out.set(outPos++, Base64._encodeChars[int(c >>> 2)]);
                    out.set(outPos++, Base64._encodeChars[int((c & 0x03) << 4)]);
                    out.set(outPos++, 61);
                    out.set(outPos++, 61);
                }
                else if (r == 2) {
                    c = data.get(int(i++)) << 8 | data.get(int(i));
                    out.set(outPos++, Base64._encodeChars[int(c >>> 10)]);
                    out.set(outPos++, Base64._encodeChars[int(c >>> 4 & 0x3f)]);
                    out.set(outPos++, Base64._encodeChars[int((c & 0x0f) << 2)]);
                    out.set(outPos++, 61);
                }
                return out.readUTFBytes(out.length);
            };
            Base64.decode = function (str) {
                var c1 = 0;
                var c2 = 0;
                var c3 = 0;
                var c4 = 0;
                var i = 0;
                var len = str.length;
                var byteString = new utils.ByteArray();
                byteString.writeUTFBytes(str);
                var outPos = 0;
                while (i < len) {
                    c1 = Base64._decodeChars[int(byteString.get(i++))];
                    if (c1 == -1)
                        break;
                    c2 = Base64._decodeChars[int(byteString.get(i++))];
                    if (c2 == -1)
                        break;
                    byteString.set(int(outPos++), (c1 << 2) | ((c2 & 0x30) >> 4));
                    c3 = byteString.get(int(i++));
                    if (c3 == 61) {
                        byteString.length = outPos;
                        return byteString;
                    }
                    c3 = Base64._decodeChars[int(c3)];
                    if (c3 == -1)
                        break;
                    byteString.set(int(outPos++), ((c2 & 0x0f) << 4) | ((c3 & 0x3c) >> 2));
                    c4 = byteString.get(int(i++));
                    if (c4 == 61) {
                        byteString.length = outPos;
                        return byteString;
                    }
                    c4 = Base64._decodeChars[int(c4)];
                    if (c4 == -1)
                        break;
                    byteString.set(int(outPos++), ((c3 & 0x03) << 6) | c4);
                }
                byteString.length = outPos;
                return byteString;
            };
            Base64.InitEncoreChar = function () {
                var encodeChars = new Array(64);
                var chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
                for (var i = 0; i < 64; i++) {
                    encodeChars[i] = chars.charCodeAt(i);
                }
                return encodeChars;
            };
            Base64.InitDecodeChar = function () {
                var decodeChars = [
                    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
                    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
                    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63,
                    52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1,
                    -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14,
                    15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1,
                    -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
                    41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1,
                    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
                    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
                    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
                    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
                    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
                    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
                    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
                    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1
                ];
                return decodeChars;
            };
            Base64._encodeChars = Base64.InitEncoreChar();
            Base64._decodeChars = Base64.InitDecodeChar();
            return Base64;
        }());
        utils.Base64 = Base64;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        function clearInterval(id) {
            window.clearInterval(id);
        }
        utils.clearInterval = clearInterval;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        function clearTimeout(id) {
            window.clearTimeout(id);
        }
        utils.clearTimeout = clearTimeout;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        utils.Error = global.Error;
        var CSSColor = (function () {
            function CSSColor() {
                throw new utils.Error('Abstract class Error');
            }
            CSSColor.predefined2Hex = function (predefinedColor) {
                if (!CSSColor.sDiv) {
                    CSSColor.sDiv = document.createElement('div');
                    document.body.appendChild(CSSColor.sDiv);
                }
                CSSColor.sDiv.style.backgroundColor = predefinedColor;
                return CSSColor.RGBString2Hex(window.getComputedStyle(CSSColor.sDiv).backgroundColor);
            };
            CSSColor.RGBString2Hex = function (rgb) {
                var regex = /rgb *\( *([0-9]{1,3}) *, *([0-9]{1,3}) *, *([0-9]{1,3}) *\)/;
                var values = regex.exec(rgb) || '';
                if (values.length != 4) {
                    return 0x0;
                }
                var r = Math.round(parseFloat(values[1]));
                var g = Math.round(parseFloat(values[2]));
                var b = Math.round(parseFloat(values[3]));
                return r << 16 | g << 8 | b;
            };
            return CSSColor;
        }());
        utils.CSSColor = CSSColor;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        utils.XML = global.XML;
        function describeType(value) {
            return new utils.XML;
        }
        utils.describeType = describeType;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        function describeTypeJSON(o, flags) {
            return {};
        }
        utils.describeTypeJSON = describeTypeJSON;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        utils.EventDispatcher = flash.events.EventDispatcher;
        var Proxy = (function (_super) {
            __extends(Proxy, _super);
            function Proxy() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.valueMap = {};
                return _this;
            }
            Proxy.prototype.getProperty = function (propName) {
                return this.valueMap[propName];
            };
            Proxy.prototype.setProperty = function (propName, value) {
                this.valueMap[propName] = value;
            };
            Proxy.prototype.hasProperty = function (propName) {
                return this.valueMap.hasOwnProperty(propName);
            };
            Proxy.prototype.deleteProperty = function (propName) {
                delete this.valueMap[propName];
            };
            Proxy.prototype.elementNames = function () {
                var names = [];
                for (var p in this.valueMap)
                    names.push(p);
                return names;
            };
            return Proxy;
        }(utils.EventDispatcher));
        utils.Proxy = Proxy;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        function unescapeMultiByte(value) {
            return decodeURIComponent(value);
        }
        utils.unescapeMultiByte = unescapeMultiByte;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var __native;
    (function (__native) {
        __native.Matrix = flash.geom.Matrix;
        var GLCanvasState = (function () {
            function GLCanvasState() {
                this.matr = new __native.Matrix;
            }
            return GLCanvasState;
        }());
        __native.GLCanvasState = GLCanvasState;
    })(__native = flash.__native || (flash.__native = {}));
})(flash || (flash = {}));
var global;
(function (global) {
    var QName = (function () {
        function QName(qNameOrUri, localNameVal) {
            if (qNameOrUri === void 0) { qNameOrUri = null; }
            if (localNameVal === void 0) { localNameVal = null; }
            this._isAttribute = false;
            if (qNameOrUri instanceof QName) {
                this._uri = qNameOrUri.uri;
                this._localName = qNameOrUri.localName;
                this._prefix = qNameOrUri.prefix;
            }
            else if (qNameOrUri instanceof global.Namespace) {
                this._uri = qNameOrUri.uri;
                this._prefix = qNameOrUri.prefix;
                if (localNameVal)
                    this._localName = localNameVal.toString();
            }
            else if (localNameVal) {
                this._localName = localNameVal;
                this._uri = qNameOrUri;
            }
            else if (qNameOrUri && qNameOrUri.toString()) {
                this._localName = qNameOrUri.toString();
            }
        }
        Object.defineProperty(QName.prototype, "uri", {
            get: function () {
                return this._uri;
            },
            set: function (value) {
                this._uri = value;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(QName.prototype, "localName", {
            get: function () {
                return this._localName;
            },
            set: function (value) {
                this._localName = value;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(QName.prototype, "prefix", {
            get: function () {
                return this._prefix;
            },
            set: function (value) {
                this._prefix = value;
            },
            enumerable: true,
            configurable: true
        });
        QName.prototype.toString = function () {
            var uriVal = this._uri ? this._uri : "*";
            return uriVal + "::" + this._localName;
        };
        QName.prototype.equals = function (name) {
            return this.uri == name.uri && this.localName == name.localName;
        };
        QName.prototype.matches = function (name) {
            if (this.uri == "*" || name.uri == "*")
                return this.localName == "*" || name.localName == "*" || this.localName == name.localName;
            if (this.localName == "*" || name.localName == "*")
                return this.uri == name.uri;
            return this.uri == name.uri && this.localName == name.localName;
        };
        Object.defineProperty(QName.prototype, "isAttribute", {
            get: function () {
                return this._isAttribute;
            },
            set: function (value) {
                this._isAttribute = value;
            },
            enumerable: true,
            configurable: true
        });
        QName.prototype.getNamespace = function (namespaces) {
            if (namespaces === void 0) { namespaces = null; }
            var i = 0;
            var possibleMatch;
            if (!namespaces)
                namespaces = [];
            for (i = 0; i < namespaces.length; i++) {
                if (namespaces[i].uri == this._uri) {
                    possibleMatch = namespaces[i];
                    if (namespaces[i].prefix == this._prefix)
                        return namespaces[i];
                }
            }
            if (possibleMatch)
                return possibleMatch;
            if (!this._prefix)
                return new global.Namespace(this._uri);
            return new global.Namespace(this._prefix, this._uri);
        };
        return QName;
    }());
    global.QName = QName;
})(global || (global = {}));
var s3eUtils;
(function (s3eUtils) {
    s3eUtils.Error = global.Error;
    var AppIcf = (function () {
        function AppIcf() {
            throw new s3eUtils.Error("Abstract class error");
        }
        AppIcf.read = function (group, name, def) {
            if (def === void 0) { def = null; }
            if (!group || !name)
                return def;
            if (!AppIcf.map)
                return def;
            group = group.toLocaleUpperCase();
            name = name.toLocaleUpperCase();
            if (!AppIcf.map[group]) {
                return def;
            }
            var result = AppIcf.map[group][name];
            if (result == '')
                return def;
            return result;
        };
        AppIcf.readFloat = function (group, name, def) {
            if (def === void 0) { def = NaN; }
            var result = AppIcf.read(group, name);
            return result ? parseFloat(result) : def;
        };
        AppIcf.readInt = function (group, name, def) {
            if (def === void 0) { def = 0; }
            var result = AppIcf.read(group, name);
            return result ? parseInt(result) : def;
        };
        AppIcf.write = function (group, name, value) {
            if (!group || !name || !value)
                return;
            if (!AppIcf.map)
                AppIcf.map = {};
            if (!AppIcf.map[group])
                AppIcf.map[group] = {};
            AppIcf.map[group][name] = value;
        };
        AppIcf.writeFloat = function (group, name, value) {
            AppIcf.write(group, name, value.toString());
        };
        AppIcf.writeInt = function (group, name, value) {
            AppIcf.write(group, name, value.toString());
        };
        AppIcf.init = function (data) {
            if (!data)
                return;
            if (!data.length)
                return;
            data = data.split("\r").join("");
            AppIcf.map = {};
            var char = null;
            var startIndex = -1;
            var groupName = null;
            var len = data.length;
            var index = 0;
            update.bind(this)();
            while (index < len) {
                while (char == "#" && index < len) {
                    skip2Symbol.bind(this)("\n");
                    nextChar.bind(this)();
                }
                if (char == "[") {
                    startIndex = index + 1;
                    skip2Symbol.bind(this)("]");
                    groupName = data.substring(startIndex, index);
                    groupName = groupName.toUpperCase();
                    if (!AppIcf.map[groupName])
                        AppIcf.map[groupName] = {};
                    skip2Symbol.bind(this)("\n");
                    nextChar.bind(this)();
                }
                else {
                    startIndex = index;
                    skip2Symbol.bind(this)("=");
                    var paramName = data.substring(startIndex, index);
                    paramName = paramName.toUpperCase();
                    startIndex = index;
                    skip2Symbol.bind(this)("\n");
                    var paramValue = data.substring(startIndex + 1, index);
                    paramValue = paramValue.split('"').join("").split("\n").join("");
                    AppIcf.map[groupName][paramName] = paramValue;
                    nextChar.bind(this)();
                }
            }
            function update() {
                char = data.charAt(index);
            }
            function skip2Symbol(symbol) {
                while (index < len && (char != symbol) || (whatNextChar.bind(this)() == symbol))
                    nextChar.bind(this)();
            }
            function prevChar() {
                index--;
                update.bind(this)();
            }
            function nextChar() {
                index++;
                update.bind(this)();
            }
            function whatNextChar() {
                return index + 1 < len ? data.charAt(index + 1) : null;
            }
        };
        AppIcf.toString = function () {
            var spt = "\n";
            var str = spt;
            for (var group in AppIcf.map) {
                str += "[" + group + "]" + spt;
                for (var param in AppIcf.map[group]) {
                    str += param + '="' + AppIcf.map[group][param] + '"' + spt;
                }
            }
            return str.substr(0, str.length - spt.length);
        };
        return AppIcf;
    }());
    s3eUtils.AppIcf = AppIcf;
})(s3eUtils || (s3eUtils = {}));
var s3eUtils;
(function (s3eUtils) {
    s3eUtils.ByteArray = flash.utils.ByteArray;
    var FilePart = (function () {
        function FilePart(fileContent, fileName, dataField, contentType) {
            if (dataField === void 0) { dataField = 'Filedata'; }
            if (contentType === void 0) { contentType = 'application/octet-stream'; }
            this.fileContent = fileContent;
            this.fileName = fileName;
            this.dataField = dataField;
            this.contentType = contentType;
        }
        FilePart.prototype.dispose = function () {
            this.fileContent = null;
            this.fileName = null;
            this.dataField = null;
            this.contentType = null;
        };
        return FilePart;
    }());
    s3eUtils.FilePart = FilePart;
})(s3eUtils || (s3eUtils = {}));
var s3eUtils;
(function (s3eUtils) {
    s3eUtils.ApiCallbackEvent = api.odnoklassniki.events.ApiCallbackEvent;
    function getApiCallbackEvent(method, result, data) {
        if (data === void 0) { data = null; }
        return new s3eUtils.ApiCallbackEvent(s3eUtils.ApiCallbackEvent.CALL_BACK, false, false, method, result, data);
    }
    s3eUtils.getApiCallbackEvent = getApiCallbackEvent;
})(s3eUtils || (s3eUtils = {}));
var s3eUtils;
(function (s3eUtils) {
    function getReconnectInterval() {
        return s3eUtils.AppIcf.readInt("PlatformFlash", "reconnectInterval", 3000);
    }
    s3eUtils.getReconnectInterval = getReconnectInterval;
})(s3eUtils || (s3eUtils = {}));
var s3eUtils;
(function (s3eUtils) {
    s3eUtils.RUCallbackEvent = api.ru.events.RUCallbackEvent;
    function getRUCallbackEvent(method, result, data) {
        if (data === void 0) { data = null; }
        return new s3eUtils.RUCallbackEvent(s3eUtils.RUCallbackEvent.CALL_BACK, false, false, method, result, data);
    }
    s3eUtils.getRUCallbackEvent = getRUCallbackEvent;
})(s3eUtils || (s3eUtils = {}));
var s3eUtils;
(function (s3eUtils) {
    s3eUtils.VKCallbackEvent = api.vk.events.VKCallbackEvent;
    function getVKCallbackEvent(method, result, data) {
        if (data === void 0) { data = null; }
        return new s3eUtils.VKCallbackEvent(s3eUtils.VKCallbackEvent.CALL_BACK, false, false, method, result, data);
    }
    s3eUtils.getVKCallbackEvent = getVKCallbackEvent;
})(s3eUtils || (s3eUtils = {}));
var s3eUtils;
(function (s3eUtils) {
    s3eUtils.Error = global.Error;
    var HTMLUtils = (function () {
        function HTMLUtils() {
            throw new s3eUtils.Error("Abstract class Error");
        }
        HTMLUtils.replace = function (match, name, num, index, original) {
            var code = name ? HTMLUtils.entities[name] : num;
            return code ? String.fromCharCode(code) : '';
        };
        HTMLUtils.decode = function (value) {
            return value.replace(/&([A-Za-z]+);|&#(\d+);/g, HTMLUtils.replace.bind(this));
        };
        HTMLUtils.entities = {
            'quot': 34, 'amp': 38, 'lt': 60, 'gt': 62, 'nbsp': 160, 'iexcl': 161,
            'cent': 162, 'pound': 163, 'curren': 164, 'yen': 165, 'brvbar': 166, 'sect': 167,
            'uml': 168, 'copy': 169, 'ordf': 170, 'laquo': 171, 'not': 172, 'shy': 173,
            'reg': 174, 'macr': 175, 'deg': 176, 'plusmn': 177, 'sup2': 178, 'sup3': 179,
            'acute': 180, 'micro': 181, 'para': 182, 'middot': 183, 'cedil': 184, 'sup1': 185,
            'ordm': 186, 'raquo': 187, 'frac14': 188, 'frac12': 189, 'frac34': 190, 'iquest': 191,
            'Agrave': 192, 'Aacute': 193, 'Acirc': 194, 'Atilde': 195, 'Auml': 196, 'Aring': 197,
            'AElig': 198, 'Ccedil': 199, 'Egrave': 200, 'Eacute': 201, 'Ecirc': 202, 'Euml': 203,
            'Igrave': 204, 'Iacute': 205, 'Icirc': 206, 'Iuml': 207, 'ETH': 208, 'Ntilde': 209,
            'Ograve': 210, 'Oacute': 211, 'Ocirc': 212, 'Otilde': 213, 'Ouml': 214, 'times': 215,
            'Oslash': 216, 'Ugrave': 217, 'Uacute': 218, 'Ucirc': 219, 'Uuml': 220, 'Yacute': 221,
            'THORN': 222, 'szlig': 223, 'agrave': 224, 'aacute': 225, 'acirc': 226, 'atilde': 227,
            'auml': 228, 'aring': 229, 'aelig': 230, 'ccedil': 231, 'egrave': 232, 'eacute': 233,
            'ecirc': 234, 'euml': 235, 'igrave': 236, 'iacute': 237, 'icirc': 238, 'iuml': 239,
            'eth': 240, 'ntilde': 241, 'ograve': 242, 'oacute': 243, 'ocirc': 244, 'otilde': 245,
            'ouml': 246, 'divide': 247, 'oslash': 248, 'ugrave': 249, 'uacute': 250, 'ucirc': 251,
            'uuml': 252, 'yacute': 253, 'thorn': 254, 'yuml': 255, 'OElig': 338, 'oelig': 339,
            'Scaron': 352, 'scaron': 353, 'Yuml': 376, 'fnof': 402, 'circ': 710, 'tilde': 732,
            'Alpha': 913, 'Beta': 914, 'Gamma': 915, 'Delta': 916, 'Epsilon': 917, 'Zeta': 918,
            'Eta': 919, 'Theta': 920, 'Iota': 921, 'Kappa': 922, 'Lambda': 923, 'Mu': 924,
            'Nu': 925, 'Xi': 926, 'Omicron': 927, 'Pi': 928, 'Rho ': 929, 'Sigma': 931,
            'Tau': 932, 'Upsilon': 933, 'Phi': 934, 'Chi': 935, 'Psi': 936, 'Omega': 937,
            'alpha': 945, 'beta': 946, 'gamma': 947, 'delta': 948, 'epsilon': 949, 'zeta': 950,
            'eta': 951, 'theta': 952, 'iota': 953, 'kappa': 954, 'lambda': 955, 'mu': 956,
            'nu': 957, 'xi': 958, 'omicron': 959, 'pi': 960, 'rho': 961, 'sigmaf': 962,
            'sigma': 963, 'tau': 964, 'upsilon': 965, 'phi': 966, 'chi': 967, 'psi': 968,
            'omega': 969, 'thetasym': 977, 'upsih': 978, 'piv': 982, 'ensp': 8194, 'emsp': 8195,
            'thinsp': 8201, 'zwnj': 8204, 'zwj': 8205, 'lrm': 8206, 'rlm': 8207, 'ndash': 8211,
            'mdash': 8212, 'lsquo': 8216, 'rsquo': 8217, 'sbquo': 8218, 'ldquo': 8220, 'rdquo': 8221,
            'bdquo': 8222, 'dagger': 8224, 'Dagger': 8225, 'bull': 8226, 'hellip': 8230, 'permil': 8240,
            'prime': 8242, 'Prime': 8243, 'lsaquo': 8249, 'rsaquo': 8250, 'oline': 8254, 'frasl': 8260,
            'euro': 8364, 'image': 8465, 'weierp': 8472, 'real': 8476, 'trade': 8482, 'alefsym': 8501,
            'larr': 8592, 'uarr': 8593, 'rarr': 8594, 'darr': 8595, 'harr': 8596, 'crarr': 8629,
            'lArr': 8656, 'uArr': 8657, 'rArr': 8658, 'dArr': 8659, 'hArr': 8660, 'forall': 8704,
            'part': 8706, 'exist': 8707, 'empty': 8709, 'nabla': 8711, 'isin': 8712, 'notin': 8713,
            'ni': 8715, 'prod': 8719, 'sum': 8721, 'minus': 8722, 'lowast': 8727, 'radic': 8730,
            'prop': 8733, 'infin': 8734, 'ang': 8736, 'and': 8743, 'or': 8744, 'cap': 8745,
            'cup': 8746, 'int': 8747, 'there4': 8756, 'sim': 8764, 'cong': 8773, 'asymp': 8776,
            'ne': 8800, 'equiv': 8801, 'le': 8804, 'ge': 8805, 'sub': 8834, 'sup': 8835,
            'nsub': 8836, 'sube': 8838, 'supe': 8839, 'oplus': 8853, 'otimes': 8855, 'perp': 8869,
            'sdot': 8901, 'lceil': 8968, 'rceil': 8969, 'lfloor': 8970, 'rfloor': 8971, 'lang': 9001,
            'rang': 9002, 'loz': 9674, 'spades': 9824, 'clubs': 9827, 'hearts': 9829, 'diams': 9830
        };
        return HTMLUtils;
    }());
    s3eUtils.HTMLUtils = HTMLUtils;
})(s3eUtils || (s3eUtils = {}));
var s3eUtils;
(function (s3eUtils) {
    s3eUtils.Event = flash.events.Event;
    var MultipartURLLoaderEvent = (function (_super) {
        __extends(MultipartURLLoaderEvent, _super);
        function MultipartURLLoaderEvent(type, w, t) {
            if (w === void 0) { w = 0; }
            if (t === void 0) { t = 0; }
            var _this = _super.call(this, type) || this;
            _this.bytesWritten = 0;
            _this.bytesTotal = 0;
            _this.bytesTotal = t;
            _this.bytesWritten = w;
            return _this;
        }
        MultipartURLLoaderEvent.DATA_PREPARE_PROGRESS = 'dataPrepareProgress';
        MultipartURLLoaderEvent.DATA_PREPARE_COMPLETE = 'dataPrepareComplete';
        return MultipartURLLoaderEvent;
    }(s3eUtils.Event));
    s3eUtils.MultipartURLLoaderEvent = MultipartURLLoaderEvent;
})(s3eUtils || (s3eUtils = {}));
var global;
(function (global) {
    function safeCallBool(func) {
        return global.safeCall(func) == 'true';
    }
    global.safeCallBool = safeCallBool;
})(global || (global = {}));
var global;
(function (global) {
    var SecurityError = (function (_super) {
        __extends(SecurityError, _super);
        function SecurityError(message) {
            if (message === void 0) { message = ""; }
            return _super.call(this, message) || this;
        }
        return SecurityError;
    }(global.Error));
    global.SecurityError = SecurityError;
})(global || (global = {}));
var global;
(function (global) {
    var SocialStats = (function () {
        function SocialStats() {
            throw new global.Error('Abstract class error');
        }
        SocialStats.response = function (value) {
            SocialStats.last = value;
        };
        SocialStats.toString = function () {
            return SocialStats.last;
        };
        return SocialStats;
    }());
    global.SocialStats = SocialStats;
})(global || (global = {}));
var tools;
(function (tools) {
    tools.Rectangle = flash.geom.Rectangle;
    var ARectangle = (function (_super) {
        __extends(ARectangle, _super);
        function ARectangle(x, y, width, height, angle) {
            if (x === void 0) { x = 0; }
            if (y === void 0) { y = 0; }
            if (width === void 0) { width = 0; }
            if (height === void 0) { height = 0; }
            if (angle === void 0) { angle = 0; }
            var _this = _super.call(this, x, y, width, height) || this;
            _this.angle = 0;
            _this.angle = angle;
            return _this;
        }
        return ARectangle;
    }(tools.Rectangle));
    tools.ARectangle = ARectangle;
})(tools || (tools = {}));
var tools;
(function (tools) {
    tools.Error = global.Error;
    function cloudErrorCode(response) {
        if (!response) {
            return 0;
        }
        var error;
        if (response && 'error' in response) {
            try {
                if (typeof response.error == 'string')
                    error = JSON.parse(response.error);
                else
                    error = response.error;
            }
            catch (e) { }
        }
        return error && 'errorCode' in error ? error.errorCode : 0;
    }
    tools.cloudErrorCode = cloudErrorCode;
})(tools || (tools = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.Rectangle = flash.geom.Rectangle;
        display.ContextMenu = flash.ui.ContextMenu;
        var InteractiveObject = (function (_super) {
            __extends(InteractiveObject, _super);
            function InteractiveObject() {
                var _this = _super.call(this) || this;
                _this._mouseEnabled = true;
                _this._doubleClickEnabled = false;
                return _this;
            }
            Object.defineProperty(InteractiveObject.prototype, "tabEnabled", {
                get: function () { return true; },
                set: function (value) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(InteractiveObject.prototype, "tabIndex", {
                get: function () { return 0; },
                set: function (value) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(InteractiveObject.prototype, "focusRect", {
                get: function () { return null; },
                set: function (value) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(InteractiveObject.prototype, "mouseEnabled", {
                get: function () { return this._mouseEnabled; },
                set: function (v) { this._mouseEnabled = v; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(InteractiveObject.prototype, "doubleClickEnabled", {
                get: function () { return this._doubleClickEnabled; },
                set: function (v) { this._doubleClickEnabled = v; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(InteractiveObject.prototype, "softKeyboardInputAreaOfInterest", {
                get: function () { return null; },
                set: function (value) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(InteractiveObject.prototype, "needsSoftKeyboard", {
                get: function () { return false; },
                set: function (value) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(InteractiveObject.prototype, "contextMenu", {
                get: function () { return this._contextMenu; },
                set: function (value) { this._contextMenu = value; },
                enumerable: true,
                configurable: true
            });
            InteractiveObject.prototype.requestSoftKeyboard = function () { return false; };
            return InteractiveObject;
        }(display.DisplayObject));
        display.InteractiveObject = InteractiveObject;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.Event = flash.events.Event;
        display.MouseEvent = flash.events.MouseEvent;
        display.Point = flash.geom.Point;
        display.Rectangle = flash.geom.Rectangle;
        display.MatrixUtil = flash.utils.MatrixUtil;
        var DisplayObjectContainer = (function (_super) {
            __extends(DisplayObjectContainer, _super);
            function DisplayObjectContainer() {
                var _this = _super.call(this) || this;
                _this.children = [];
                _this._mouseChildren = true;
                return _this;
            }
            DisplayObjectContainer.prototype.addChild = function (child) {
                return this.addChildAt(child, this.children.length);
            };
            DisplayObjectContainer.prototype.addChildAt = function (child, index) {
                this.dirtyGraphics();
                var i = this.children.indexOf(child);
                if (i != -1) {
                    this.children.splice(i, 1);
                }
                this.children.splice(index, 0, child);
                child._parent = this;
                child.stage = this.stage;
                return child;
            };
            DisplayObjectContainer.prototype.removeChild = function (child) {
                var i = this.children.indexOf(child);
                if (i != -1) {
                    return this.removeChildAt(i);
                }
                return child;
            };
            DisplayObjectContainer.prototype.removeChildAt = function (i) {
                this.dirtyGraphics();
                var child = this.children[i];
                if (child) {
                    child._parent = null;
                    child.stage = null;
                }
                this.children.splice(i, 1);
                return child;
            };
            DisplayObjectContainer.prototype.getChildIndex = function (child) {
                return this.children.indexOf(child);
            };
            DisplayObjectContainer.prototype.setChildIndex = function (child, index) {
                this.removeChild(child);
                this.addChildAt(child, index);
            };
            DisplayObjectContainer.prototype.getChildAt = function (index) {
                return this.children[index];
            };
            DisplayObjectContainer.prototype.getChildByName = function (name) {
                var len = this.children.length;
                for (var i = 0; i < len; i++) {
                    var c = this.children[i];
                    if (c.name === name) {
                        return c;
                    }
                }
                return null;
            };
            Object.defineProperty(DisplayObjectContainer.prototype, "numChildren", {
                get: function () { return this.children.length; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObjectContainer.prototype, "stage", {
                get: function () {
                    return this._stage;
                },
                set: function (v) {
                    if (this._stage != v) {
                        this._stage = v;
                        if (this._stage) {
                            this.dispatchEvent(new display.Event(display.Event.ADDED_TO_STAGE));
                        }
                        else {
                            this.dispatchEvent(new display.Event(display.Event.REMOVED_FROM_STAGE));
                        }
                    }
                    var len = this.children.length;
                    for (var i = 0; i < len; i++) {
                        var c = this.children[i];
                        c.stage = v;
                    }
                },
                enumerable: true,
                configurable: true
            });
            DisplayObjectContainer.prototype.getObjectsUnderPoint = function (p) { return null; };
            DisplayObjectContainer.prototype.areInaccessibleObjectsUnderPoint = function (p) { return false; };
            Object.defineProperty(DisplayObjectContainer.prototype, "tabChildren", {
                get: function () { return false; },
                set: function (v) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(DisplayObjectContainer.prototype, "mouseChildren", {
                get: function () { return this._mouseChildren; },
                set: function (v) { this._mouseChildren = v; },
                enumerable: true,
                configurable: true
            });
            DisplayObjectContainer.prototype.contains = function (child) {
                return this.children.indexOf(child) != -1;
            };
            DisplayObjectContainer.prototype.swapChildrenAt = function (i1, i2) {
                this.dirtyGraphics();
                var temp = this.children[i1];
                this.children[i1] = this.children[i2];
                this.children[i2] = temp;
            };
            DisplayObjectContainer.prototype.swapChildren = function (c1, c2) {
                this.swapChildrenAt(this.getChildIndex(c1), this.getChildIndex(c2));
            };
            DisplayObjectContainer.prototype.removeChildren = function (start, len) {
                if (start === void 0) { start = 0; }
                if (len === void 0) { len = 2147483647; }
                for (var i = Math.min(this.numChildren - 1, start + len - 1); i >= start; i--) {
                    this.removeChildAt(i);
                }
            };
            DisplayObjectContainer.prototype.stopAllMovieClips = function () {
            };
            DisplayObjectContainer.prototype.__update = function (ctx) {
                if (this.visible) {
                    var len = this.children.length;
                    for (var i = 0; i < len; i++) {
                        var c = this.children[i];
                        c.__update(ctx);
                    }
                }
            };
            DisplayObjectContainer.prototype.__dispatchEnterFrame = function (recursive) {
                if (recursive === void 0) { recursive = false; }
                if (!this.visible) {
                    return;
                }
                if (this.hasEventListener(display.Event.ENTER_FRAME)) {
                    this.dispatchEvent(new display.Event(display.Event.ENTER_FRAME));
                }
                if (recursive) {
                    var len = this.children.length;
                    for (var i = 0; i < len; i++) {
                        var c = this.children[i];
                        c.__dispatchEnterFrame(recursive);
                    }
                }
            };
            DisplayObjectContainer.prototype.updateTransforms = function () {
                _super.prototype.updateTransforms.call(this);
                var len = this.children.length;
                for (var i = 0; i < len; i++) {
                    var c = this.children[i];
                    c.updateTransforms();
                }
            };
            DisplayObjectContainer.prototype.__doMouse = function (e) {
                if (this.mouseEnabled && this.mouseChildren && this.visible) {
                    for (var i = this.children.length - 1; i >= 0; i--) {
                        var obj = this.children[i].__doMouse(e);
                        if (obj) {
                            return obj;
                        }
                    }
                }
                return null;
            };
            DisplayObjectContainer.prototype.getRect = function (targetSpace, resultRect) {
                if (resultRect === void 0) { resultRect = null; }
                if (resultRect == null)
                    resultRect = new display.Rectangle();
                var numChildren = this.children.length;
                if (numChildren == 0) {
                    this.getTransformationMatrix(targetSpace, display.DisplayObject.sHelperMatrix);
                    display.MatrixUtil.transformCoords(display.DisplayObject.sHelperMatrix, 0.0, 0.0, display.DisplayObject.sHelperPoint);
                    resultRect.setTo(display.DisplayObject.sHelperPoint.x, display.DisplayObject.sHelperPoint.y, 0, 0);
                }
                else if (numChildren == 1) {
                    this.children[0].getRect(targetSpace, resultRect);
                }
                else {
                    var minX = Number.MAX_VALUE, maxX = -Number.MAX_VALUE;
                    var minY = Number.MAX_VALUE, maxY = -Number.MAX_VALUE;
                    for (var i = 0; i < numChildren; ++i) {
                        this.children[i].getBounds(targetSpace, resultRect);
                        if (minX > resultRect.x)
                            minX = resultRect.x;
                        if (maxX < resultRect.right)
                            maxX = resultRect.right;
                        if (minY > resultRect.y)
                            minY = resultRect.y;
                        if (maxY < resultRect.bottom)
                            maxY = resultRect.bottom;
                    }
                    resultRect.setTo(minX, minY, maxX - minX, maxY - minY);
                }
                return resultRect;
            };
            return DisplayObjectContainer;
        }(display.InteractiveObject));
        display.DisplayObjectContainer = DisplayObjectContainer;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.Error = global.Error;
        display.Event = flash.events.Event;
        display.IOErrorEvent = flash.events.IOErrorEvent;
        display.Rectangle = flash.geom.Rectangle;
        display.URLRequest = flash.net.URLRequest;
        display.LoaderContext = flash.system.LoaderContext;
        display.Base64 = flash.utils.Base64;
        display.ByteArray = flash.utils.ByteArray;
        var Loader = (function (_super) {
            __extends(Loader, _super);
            function Loader() {
                var _this = _super.call(this) || this;
                _this._contentLoaderInfo = new display.LoaderInfo;
                _this._contentLoaderInfo.loader = _this;
                return _this;
            }
            Loader.prototype.load = function (request, context) {
                if (context === void 0) { context = null; }
                this._unload();
                this.image = new Image;
                this.image.onload = this.onImageLoad.bind(this);
                this.image.onerror = this.onImageError.bind(this);
                var _url = request.url;
                if (_url.substr(0, 3).toLowerCase() !== 'www' && _url.substr(0, 4).toLowerCase() !== 'http' && Loader.__base) {
                    _url = Loader.__base + _url;
                }
                this.image.src = _url;
            };
            Loader.prototype.onImageLoad = function (e) {
                this._rect = this._rect || new display.Rectangle;
                this._rect.setTo(0, 0, this.image.width, this.image.height);
                try {
                    var bmd = new display.BitmapData(this.image.width || 1, this.image.height || 1, true, 0);
                    bmd.fromImage(this.image);
                    if (this._contentLoaderInfo.content && this._contentLoaderInfo.content.parent) {
                        this._contentLoaderInfo.content.parent.removeChild(this._contentLoaderInfo.content);
                    }
                    this._contentLoaderInfo.content = new display.Bitmap(bmd);
                    this.addChild(this._contentLoaderInfo.content);
                }
                catch (e) {
                    this._contentLoaderInfo.dispatchEvent(new display.IOErrorEvent(display.IOErrorEvent.IO_ERROR));
                    return;
                }
                this._contentLoaderInfo.dispatchEvent(new display.Event(display.Event.COMPLETE));
                this.__updateSize();
            };
            Loader.prototype.onImageError = function (e) {
                this._contentLoaderInfo.dispatchEvent(new display.IOErrorEvent(display.IOErrorEvent.IO_ERROR));
            };
            Loader.prototype.__getRect = function () {
                return this._rect;
            };
            Loader.prototype.loadBytes = function (bytes, context) {
                if (context === void 0) { context = null; }
                this._unload();
                this.image = new Image;
                this.image.onload = this.onImageLoad.bind(this);
                this.image.onerror = this.onImageError.bind(this);
                this.image.src = 'data:image;base64,' + display.Base64.encode(bytes);
            };
            Loader.prototype.close = function () {
                this._close();
            };
            Loader.prototype.unload = function () {
                this._unload(false, false);
            };
            Loader.prototype.unloadAndStop = function (gc) {
                if (gc === void 0) { gc = true; }
                this._unload(true, gc);
            };
            Loader.prototype._unload = function (stop, gc) {
                if (stop === void 0) { stop = false; }
                if (gc === void 0) { gc = false; }
                if (this.image) {
                    this.image.onload = undefined;
                    this.image.onerror = undefined;
                    if (stop) {
                        this.image.src = '';
                    }
                }
                this.image = null;
                this._rect = null;
            };
            Loader.prototype._close = function () {
            };
            Object.defineProperty(Loader.prototype, "content", {
                get: function () {
                    return this._contentLoaderInfo.content;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Loader.prototype, "contentLoaderInfo", {
                get: function () {
                    return this._contentLoaderInfo;
                },
                enumerable: true,
                configurable: true
            });
            Loader.prototype.__update = function (ctx) {
                if (this.mScrollRect)
                    this.__beginClipRect(ctx);
                _super.prototype.__update.call(this, ctx);
                if (this.mScrollRect)
                    this.__endClipRect(ctx);
            };
            Loader.__base = '';
            return Loader;
        }(display.DisplayObjectContainer));
        display.Loader = Loader;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var tools;
(function (tools) {
    tools.Loader = flash.display.Loader;
    var ExtendedLoader = (function (_super) {
        __extends(ExtendedLoader, _super);
        function ExtendedLoader(id, callbackKey) {
            var _this = _super.call(this) || this;
            _this.mCallBackKey = 0;
            _this.mLoaderId = 0;
            _this.mLoaderId = id;
            _this.mCallBackKey = callbackKey;
            return _this;
        }
        ExtendedLoader.prototype.getCallbackKey = function () {
            return this.mCallBackKey;
        };
        ExtendedLoader.prototype.getRequestId = function () {
            return this.mLoaderId;
        };
        ExtendedLoader.prototype.setParams = function (params) {
            this.mParams = params;
        };
        ExtendedLoader.prototype.getParams = function () {
            return this.mParams;
        };
        return ExtendedLoader;
    }(tools.Loader));
    tools.ExtendedLoader = ExtendedLoader;
})(tools || (tools = {}));
var tools;
(function (tools) {
    tools.System = flash.system.System;
    function gc(immediately) {
        if (immediately === void 0) { immediately = true; }
        if ("pauseForGCIfCollectionImminent" in tools.System) {
            tools.System["pauseForGCIfCollectionImminent"](immediately ? 0 : 1);
            tools.System.gc();
        }
    }
    tools.gc = gc;
})(tools || (tools = {}));
var tools;
(function (tools) {
    function mbsec(bytes, duration) {
        return (tools.mbsecnum(bytes, duration)).toFixed(3) + " MB/S";
    }
    tools.mbsec = mbsec;
})(tools || (tools = {}));
var tools;
(function (tools) {
    function mbsecnum(bytes, duration) {
        if (bytes == 0 || duration == 0)
            return 0.0;
        return (bytes * 8000) / (duration * 1024 * 1024);
    }
    tools.mbsecnum = mbsecnum;
})(tools || (tools = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        var net;
        (function (net) {
            net.ByteArray = flash.utils.ByteArray;
            net.Endian = flash.utils.Endian;
            var PostRequest = (function () {
                function PostRequest() {
                    this.boundary = '-----';
                    this.createPostData();
                }
                PostRequest.prototype.createPostData = function () {
                    this.postData = new net.ByteArray();
                    this.postData.endian = net.Endian.BIG_ENDIAN;
                };
                PostRequest.prototype.writePostData = function (name, value) {
                    var bytes;
                    this.writeBoundary();
                    this.writeLineBreak();
                    bytes = 'Content-Disposition: form-data; name="' + name + '"';
                    var l = bytes.length;
                    for (var i = 0; i < l; i++) {
                        this.postData.writeByte(bytes.charCodeAt(i));
                    }
                    this.writeLineBreak();
                    this.writeLineBreak();
                    this.postData.writeUTFBytes(value);
                    this.writeLineBreak();
                };
                PostRequest.prototype.writeFileData = function (filename, fileData, contentType) {
                    var bytes;
                    var l = 0;
                    var i = 0;
                    this.writeBoundary();
                    this.writeLineBreak();
                    bytes = 'Content-Disposition: form-data; name="' + filename + '"; filename="';
                    l = bytes.length;
                    for (i = 0; i < l; i++) {
                        this.postData.writeByte(bytes.charCodeAt(i));
                    }
                    this.postData.writeUTFBytes(filename + ".JPG");
                    this.writeQuotationMark();
                    this.writeLineBreak();
                    bytes = contentType;
                    l = bytes.length;
                    for (i = 0; i < l; i++) {
                        this.postData.writeByte(bytes.charCodeAt(i));
                    }
                    this.writeLineBreak();
                    this.writeLineBreak();
                    fileData.position = 0;
                    this.postData.writeBytes(fileData, 0, fileData.length);
                    this.writeLineBreak();
                    fileData.clear();
                };
                PostRequest.prototype.getPostData = function () {
                    this.postData.position = 0;
                    return this.postData;
                };
                PostRequest.prototype.close = function () {
                    this.writeBoundary();
                    this.writeDoubleDash();
                };
                PostRequest.prototype.writeLineBreak = function () {
                    this.postData.writeShort(0x0d0a);
                };
                PostRequest.prototype.writeQuotationMark = function () {
                    this.postData.writeByte(0x22);
                };
                PostRequest.prototype.writeDoubleDash = function () {
                    this.postData.writeShort(0x2d2d);
                };
                PostRequest.prototype.writeBoundary = function () {
                    this.writeDoubleDash();
                    var l = this.boundary.length;
                    for (var i = 0; i < l; i++) {
                        this.postData.writeByte(this.boundary.charCodeAt(i));
                    }
                };
                return PostRequest;
            }());
            net.PostRequest = PostRequest;
        })(net = odnoklassniki.net || (odnoklassniki.net = {}));
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        var sdk;
        (function (sdk) {
            var photos;
            (function (photos_1) {
                photos_1.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
                photos_1.Errors = api.odnoklassniki.sdk.errors.Errors;
                var Photos = (function () {
                    function Photos() {
                    }
                    Photos.getUploadUrl = function (callback, uid, aid) {
                        if (uid === void 0) { uid = ""; }
                        if (aid === void 0) { aid = ""; }
                        photos_1.Odnoklassniki.callRestApi("photos.getUploadUrl", callback, photos_1.Odnoklassniki.getSendObject({ uid: uid, aid: aid }));
                    };
                    Photos.upload = function (files, callback, url, uid, aid, photos) {
                        if (url === void 0) { url = ""; }
                        if (uid === void 0) { uid = ""; }
                        if (aid === void 0) { aid = ""; }
                        if (photos === void 0) { photos = null; }
                        var send_obj = { files: files };
                        if (uid)
                            send_obj.uid = uid;
                        if (aid)
                            send_obj.uid = aid;
                        if (photos)
                            send_obj.photos = JSON.stringify(photos);
                        url = (!url) ? "http://apimobile.odnoklassniki.ru/" : url;
                        photos_1.Odnoklassniki.callRestApi("photos.upload", callback, send_obj, 'JSON', "POST", url);
                    };
                    Photos.createAlbum = function (title, type, callback, description) {
                        if (description === void 0) { description = ""; }
                        if (!title || !type) {
                            photos_1.Errors.showError("Required fields: title, type");
                        }
                        photos_1.Odnoklassniki.callRestApi("photos.createAlbum", callback, photos_1.Odnoklassniki.getSendObject({ title: title, type: type, description: description }));
                    };
                    Photos.getAlbums = function (callback, uid, fid, pagingAnchor, pagingDirection, count, detectTotalCount) {
                        if (uid === void 0) { uid = ""; }
                        if (fid === void 0) { fid = ""; }
                        if (pagingAnchor === void 0) { pagingAnchor = ""; }
                        if (pagingDirection === void 0) { pagingDirection = ""; }
                        if (count === void 0) { count = 0; }
                        if (detectTotalCount === void 0) { detectTotalCount = false; }
                        photos_1.Odnoklassniki.callRestApi("photos.getAlbums", callback, photos_1.Odnoklassniki.getSendObject({ uid: uid, fid: fid, pagingAnchor: pagingAnchor, pagingDirection: pagingDirection, count: count, detectTotalCount: detectTotalCount }));
                    };
                    Photos.getPhotoMarks = function (callback, pagingAnchor, pagingDirection, count, detectTotalCount) {
                        if (pagingAnchor === void 0) { pagingAnchor = ""; }
                        if (pagingDirection === void 0) { pagingDirection = ""; }
                        if (count === void 0) { count = 0; }
                        if (detectTotalCount === void 0) { detectTotalCount = false; }
                        photos_1.Odnoklassniki.callRestApi("photos.getPhotoMarks", callback, photos_1.Odnoklassniki.getSendObject({ pagingAnchor: pagingAnchor, pagingDirection: pagingDirection, count: count, detectTotalCount: detectTotalCount }));
                    };
                    Photos.getUserPhotos = function (callback, uid, fid, pagingAnchor, pagingDirection, count, detectTotalCount) {
                        if (uid === void 0) { uid = ""; }
                        if (fid === void 0) { fid = ""; }
                        if (pagingAnchor === void 0) { pagingAnchor = ""; }
                        if (pagingDirection === void 0) { pagingDirection = ""; }
                        if (count === void 0) { count = 0; }
                        if (detectTotalCount === void 0) { detectTotalCount = false; }
                        photos_1.Odnoklassniki.callRestApi("photos.getUserPhotos", callback, { uid: uid, fid: fid, pagingAnchor: pagingAnchor, pagingDirection: pagingDirection, count: count, detectTotalCount: detectTotalCount });
                    };
                    Photos.getUserAlbumPhotos = function (aid, callback, uid, pagingAnchor, pagingDirection, count, detectTotalCount) {
                        if (uid === void 0) { uid = ""; }
                        if (pagingAnchor === void 0) { pagingAnchor = ""; }
                        if (pagingDirection === void 0) { pagingDirection = ""; }
                        if (count === void 0) { count = 0; }
                        if (detectTotalCount === void 0) { detectTotalCount = false; }
                        photos_1.Odnoklassniki.callRestApi("photos.getUserAlbumPhotos", callback, photos_1.Odnoklassniki.getSendObject({ aid: aid, uid: uid, pagingAnchor: pagingAnchor, pagingDirection: pagingDirection, count: count, detectTotalCount: detectTotalCount }));
                    };
                    return Photos;
                }());
                photos_1.Photos = Photos;
            })(photos = sdk.photos || (sdk.photos = {}));
        })(sdk = odnoklassniki.sdk || (odnoklassniki.sdk = {}));
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var com;
(function (com) {
    var adobe;
    (function (adobe) {
        var crypto;
        (function (crypto) {
            crypto.IntUtil = com.adobe.utils.IntUtil;
            crypto.ByteArray = flash.utils.ByteArray;
            var MD5 = (function () {
                function MD5() {
                }
                MD5.hash = function (s) {
                    var ba = new crypto.ByteArray();
                    ba.writeUTFBytes(s);
                    return MD5.hashBinary(ba);
                };
                MD5.hashBytes = function (s) {
                    return MD5.hashBinary(s);
                };
                MD5.hashBinary = function (s) {
                    var a = 1732584193;
                    var b = -271733879;
                    var c = -1732584194;
                    var d = 271733878;
                    var aa = 0;
                    var bb = 0;
                    var cc = 0;
                    var dd = 0;
                    var x = MD5.createBlocks(s);
                    var len = x.length;
                    for (var i = 0; i < len; i += 16) {
                        aa = a;
                        bb = b;
                        cc = c;
                        dd = d;
                        a = MD5.ff(a, b, c, d, x[int(i + 0)], 7, -680876936);
                        d = MD5.ff(d, a, b, c, x[int(i + 1)], 12, -389564586);
                        c = MD5.ff(c, d, a, b, x[int(i + 2)], 17, 606105819);
                        b = MD5.ff(b, c, d, a, x[int(i + 3)], 22, -1044525330);
                        a = MD5.ff(a, b, c, d, x[int(i + 4)], 7, -176418897);
                        d = MD5.ff(d, a, b, c, x[int(i + 5)], 12, 1200080426);
                        c = MD5.ff(c, d, a, b, x[int(i + 6)], 17, -1473231341);
                        b = MD5.ff(b, c, d, a, x[int(i + 7)], 22, -45705983);
                        a = MD5.ff(a, b, c, d, x[int(i + 8)], 7, 1770035416);
                        d = MD5.ff(d, a, b, c, x[int(i + 9)], 12, -1958414417);
                        c = MD5.ff(c, d, a, b, x[int(i + 10)], 17, -42063);
                        b = MD5.ff(b, c, d, a, x[int(i + 11)], 22, -1990404162);
                        a = MD5.ff(a, b, c, d, x[int(i + 12)], 7, 1804603682);
                        d = MD5.ff(d, a, b, c, x[int(i + 13)], 12, -40341101);
                        c = MD5.ff(c, d, a, b, x[int(i + 14)], 17, -1502002290);
                        b = MD5.ff(b, c, d, a, x[int(i + 15)], 22, 1236535329);
                        a = MD5.gg(a, b, c, d, x[int(i + 1)], 5, -165796510);
                        d = MD5.gg(d, a, b, c, x[int(i + 6)], 9, -1069501632);
                        c = MD5.gg(c, d, a, b, x[int(i + 11)], 14, 643717713);
                        b = MD5.gg(b, c, d, a, x[int(i + 0)], 20, -373897302);
                        a = MD5.gg(a, b, c, d, x[int(i + 5)], 5, -701558691);
                        d = MD5.gg(d, a, b, c, x[int(i + 10)], 9, 38016083);
                        c = MD5.gg(c, d, a, b, x[int(i + 15)], 14, -660478335);
                        b = MD5.gg(b, c, d, a, x[int(i + 4)], 20, -405537848);
                        a = MD5.gg(a, b, c, d, x[int(i + 9)], 5, 568446438);
                        d = MD5.gg(d, a, b, c, x[int(i + 14)], 9, -1019803690);
                        c = MD5.gg(c, d, a, b, x[int(i + 3)], 14, -187363961);
                        b = MD5.gg(b, c, d, a, x[int(i + 8)], 20, 1163531501);
                        a = MD5.gg(a, b, c, d, x[int(i + 13)], 5, -1444681467);
                        d = MD5.gg(d, a, b, c, x[int(i + 2)], 9, -51403784);
                        c = MD5.gg(c, d, a, b, x[int(i + 7)], 14, 1735328473);
                        b = MD5.gg(b, c, d, a, x[int(i + 12)], 20, -1926607734);
                        a = MD5.hh(a, b, c, d, x[int(i + 5)], 4, -378558);
                        d = MD5.hh(d, a, b, c, x[int(i + 8)], 11, -2022574463);
                        c = MD5.hh(c, d, a, b, x[int(i + 11)], 16, 1839030562);
                        b = MD5.hh(b, c, d, a, x[int(i + 14)], 23, -35309556);
                        a = MD5.hh(a, b, c, d, x[int(i + 1)], 4, -1530992060);
                        d = MD5.hh(d, a, b, c, x[int(i + 4)], 11, 1272893353);
                        c = MD5.hh(c, d, a, b, x[int(i + 7)], 16, -155497632);
                        b = MD5.hh(b, c, d, a, x[int(i + 10)], 23, -1094730640);
                        a = MD5.hh(a, b, c, d, x[int(i + 13)], 4, 681279174);
                        d = MD5.hh(d, a, b, c, x[int(i + 0)], 11, -358537222);
                        c = MD5.hh(c, d, a, b, x[int(i + 3)], 16, -722521979);
                        b = MD5.hh(b, c, d, a, x[int(i + 6)], 23, 76029189);
                        a = MD5.hh(a, b, c, d, x[int(i + 9)], 4, -640364487);
                        d = MD5.hh(d, a, b, c, x[int(i + 12)], 11, -421815835);
                        c = MD5.hh(c, d, a, b, x[int(i + 15)], 16, 530742520);
                        b = MD5.hh(b, c, d, a, x[int(i + 2)], 23, -995338651);
                        a = MD5.ii(a, b, c, d, x[int(i + 0)], 6, -198630844);
                        d = MD5.ii(d, a, b, c, x[int(i + 7)], 10, 1126891415);
                        c = MD5.ii(c, d, a, b, x[int(i + 14)], 15, -1416354905);
                        b = MD5.ii(b, c, d, a, x[int(i + 5)], 21, -57434055);
                        a = MD5.ii(a, b, c, d, x[int(i + 12)], 6, 1700485571);
                        d = MD5.ii(d, a, b, c, x[int(i + 3)], 10, -1894986606);
                        c = MD5.ii(c, d, a, b, x[int(i + 10)], 15, -1051523);
                        b = MD5.ii(b, c, d, a, x[int(i + 1)], 21, -2054922799);
                        a = MD5.ii(a, b, c, d, x[int(i + 8)], 6, 1873313359);
                        d = MD5.ii(d, a, b, c, x[int(i + 15)], 10, -30611744);
                        c = MD5.ii(c, d, a, b, x[int(i + 6)], 15, -1560198380);
                        b = MD5.ii(b, c, d, a, x[int(i + 13)], 21, 1309151649);
                        a = MD5.ii(a, b, c, d, x[int(i + 4)], 6, -145523070);
                        d = MD5.ii(d, a, b, c, x[int(i + 11)], 10, -1120210379);
                        c = MD5.ii(c, d, a, b, x[int(i + 2)], 15, 718787259);
                        b = MD5.ii(b, c, d, a, x[int(i + 9)], 21, -343485551);
                        a += aa;
                        b += bb;
                        c += cc;
                        d += dd;
                    }
                    MD5.digest = new crypto.ByteArray();
                    MD5.digest.writeInt(a);
                    MD5.digest.writeInt(b);
                    MD5.digest.writeInt(c);
                    MD5.digest.writeInt(d);
                    MD5.digest.position = 0;
                    return crypto.IntUtil.toHex(a) + crypto.IntUtil.toHex(b) + crypto.IntUtil.toHex(c) + crypto.IntUtil.toHex(d);
                };
                MD5.f = function (x, y, z) {
                    return (x & y) | ((~x) & z);
                };
                MD5.g = function (x, y, z) {
                    return (x & z) | (y & (~z));
                };
                MD5.h = function (x, y, z) {
                    return x ^ y ^ z;
                };
                MD5.i = function (x, y, z) {
                    return y ^ (x | (~z));
                };
                MD5.transform = function (func, a, b, c, d, x, s, t) {
                    var tmp = a + int(func(b, c, d)) + x + t;
                    return crypto.IntUtil.rol(tmp, s) + b;
                };
                MD5.ff = function (a, b, c, d, x, s, t) {
                    return MD5.transform(MD5.f.bind(this), a, b, c, d, x, s, t);
                };
                MD5.gg = function (a, b, c, d, x, s, t) {
                    return MD5.transform(MD5.g.bind(this), a, b, c, d, x, s, t);
                };
                MD5.hh = function (a, b, c, d, x, s, t) {
                    return MD5.transform(MD5.h.bind(this), a, b, c, d, x, s, t);
                };
                MD5.ii = function (a, b, c, d, x, s, t) {
                    return MD5.transform(MD5.i.bind(this), a, b, c, d, x, s, t);
                };
                MD5.createBlocks = function (s) {
                    var blocks = new Array();
                    var len = s.length * 8;
                    var mask = 0xFF;
                    for (var i = 0; i < len; i += 8) {
                        blocks[int(i >> 5)] |= (s.get(i / 8) & mask) << (i % 32);
                    }
                    blocks[int(len >> 5)] |= 0x80 << (len % 32);
                    blocks[int((((len + 64) >>> 9) << 4) + 14)] = len;
                    return blocks;
                };
                return MD5;
            }());
            crypto.MD5 = MD5;
        })(crypto = adobe.crypto || (adobe.crypto = {}));
    })(adobe = com.adobe || (com.adobe = {}));
})(com || (com = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            var core;
            (function (core) {
                core.Error = global.Error;
                core.ExternalInterface = flash.external.ExternalInterface;
                var FacebookJSBridge = (function () {
                    function FacebookJSBridge() {
                        this.script_js = "function() {\n\t\t\t\tFBAS = {\n\t\t\t\t\tsetSWFObjectID: function( swfObjectID ) {\n\t\t\t\t\t\tFBAS.swfObjectID = swfObjectID;\n\t\t\t\t\t},\n\t\t\t\t\t\t\n\t\t\t\t\tinit: function( opts ) {\n\t\n\t\t\t\t\t\t//\u0421\u0435\u0439\u0447\u0430\u0441 \u0432\u0441\u0435\u0433\u0434\u0430 \u0437\u0430\u043B\u043E\u0433\u0438\u043D\u0435\u043D\u044B \u0441\u0440\u0430\u0437\u0443\n\t\t\t\t\t\t//var options = JSON.parse( opts );\n\t\t//trace('init facebook ');\n\t\t//console.log (options);\n\t\t\t\t\t\t//FB.init( options );\n\t\n\t\t\t\t\t\tFB.Event.subscribe( 'auth.authResponseChange', function( response ) {\n\t\t\t\t\t\t\tif (window.console && window.console.log)\n\t\t\ttrace(response);\n\t\t\t\t\t\t\tFBAS.updateSwfAuthResponse( response.authResponse );\n\t\t\t\t\t\t} );\n\t\tFB.Event.subscribe('edge.create', function (url, html_element) {\n\t\t\t\t\t\t\tif (window.console && window.console.log) {\n\t\t\t  trace(\"page_like_or_unlike_callback\");\n\t\t\t  trace(url);\n\t\t\t  trace(html_element);\n\t\t\t\t\t\t\t}\n\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t\t\n\t\t\t\t\tsetCanvasAutoResize: function( autoSize, interval ) {\n\t\t\t\t\t\tFB.Canvas.setAutoResize( autoSize, interval );\n\t\t\t\t\t},\n\t\t\t\t\t\t\n\t\t\t\t\tsetCanvasSize: function( width, height ) {\n\t\t\t\t\t\tFB.Canvas.setSize( { width: width, height: height } );\n\t\t\t\t\t},\n\t\t\t\t\t\t\n\t\t\t\t\tlogin: function( opts ) {\n\t\t\t\t\t\tif (window.console && window.console.log)\n\t\t\ttrace('login facebook ');\n\t\t\t\t\t\tFB.login( FBAS.handleUserLogin, JSON.parse(opts) );\n\t\t\t\t\t},\n\t\t\t\t\t\t\n\t\t\t\t\taddEventListener: function( event ) {\n\t\t\t\t\t\tFB.Event.subscribe( event, function( response ) {\n\t\t\t\t\t\t\tFBAS.getSwf().handleJsEvent( event, JSON.stringify( response ) );\n\t\t\t\t\t\t} );\n\t\t\t\t\t},\n\t\t\t\t\t\t\n\t\t\t\t\thandleUserLogin: function( response ) {\n\t\t\t\t\t\tif (window.console && window.console.log)          \n\t\t\t\t\t\t\ttrace('handle user login');\n\t\t\t\t\t\tFBAS.updateSwfAuthResponse( response.authResponse );\n\t\t\t\t\t},\n\t\t\t\t\t\t\n\t\t\t\t\tlogout: function() {\n\t\t\t\t\t\tFB.logout( FBAS.handleUserLogout );\n\t\t\t\t\t},\n\t\t\t\t\t\n\t\t\t\t\thandleUserLogout: function( response ) {\n\t\t\t\t\t\tswf = FBAS.getSwf();\n\t\t\t\t\t\tswf.logout();\n\t\t\t\t\t},\n\t\t\t\t\t\t\n\t\t\t\t\tui: function( params ) {\n\t\t\t\t\t\tobj = JSON.parse( params );\n\t\t\t\t\t\tmethod = obj.method;\n\t\t\t\t\t\tcb = function( response ) { FBAS.getSwf().uiResponse( JSON.stringify( response ), method ); }\n\t\t\t\t\t\tif (window.console && window.console.log) {\n\t\t\t\t\t\t\tconsole.log (\"show facebook ui\");\n\t\t\tconsole.log (obj);\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t// \u043A\u0430\u0441\u0442\u043E\u043C\u043D\u044B\u0435 \u0434\u0438\u0430\u043B\u043E\u0433\u0438\n\t\t\t\t\t\tif (method == \"like\")\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!window['dialog.' + method]) {\n\t\t\t\t\t\t\t\tcb('?error_code=4201');\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twindow['dialog.' + method](cb);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t// facebook \u0434\u0438\u0430\u043B\u043E\u0433\u0438\n\t\t\t\t\t\tFB.ui( obj, cb );\n\t\t\t\t\t},\n\t\n\t\t\t\t\tactivateApp: function () {\n\t\t\t\t\t\tFB.AppEvents.activateApp();\n\t\t\t\t\t},\n\t\n\t\t\t\t\tlogPurchase: function (price, currency) {\n\t\t\t\t\t\tFB.AppEvents.logPurchase(price, currency);\n\t\t\t\t\t},\n\t\n\t\t\t\t\tlogEvent: function (eventName, valueToSum, parameters) {\n\t\t\t\t\t\tFB.AppEvents.logEvent(eventName, valueToSum, parameters);\n\t\t\t\t\t},\n\t\t\t\t\t\n\t\t\t\t\tgetAuthResponse: function() {\n\t\t\t\t\t\tauthResponse = FB.getAuthResponse();\n\t\t\t\t\t\treturn JSON.stringify( authResponse );\n\t\t\t\t\t},\n\t\n\t\t\t\t\tgetLoginStatus: function() {\n\t\t\t\t\t\tFB.getLoginStatus( function( response ) {\n\t\t\t\t\t\t\tif( response.authResponse && response.status === 'connected') {\n\t\t\t\t\t\t\t\tFBAS.updateSwfAuthResponse( response.authResponse );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tFBAS.updateSwfAuthResponse( null );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t},\n\t\t\t\t\t\t\n\t\t\t\t\tgetSwf: function() {\n\t\t\t\t\t\treturn document.getElementById( FBAS.swfObjectID );\n\t\t\t\t\t},\n\t\t\t\t\t\n\t\t\t\t\tupdateSwfAuthResponse: function( response ) {\t\t\t\t\t\t\t\t\n\t\t\t\t\t\tswf = FBAS.getSwf();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif( response == null ) {\n\t\t\t\t\t\t\tswf.authResponseChange( null );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tswf.authResponseChange( JSON.stringify( response ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\n\t\t\t\t\tdeleteRequest: function( requestId ) {\n\t\t\t\t\t\tFB.api( requestId, 'DELETE', function(response) {\n\t\t\t\t\t\t\tswf = FBAS.getSwf();\n\t\t\t\t\t\t\tswf.deleteRequest( response );\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}";
                        try {
                            if (core.ExternalInterface.available) {
                                core.ExternalInterface.call(this.script_js);
                                core.ExternalInterface.call("FBAS.setSWFObjectID", core.ExternalInterface.objectID);
                            }
                        }
                        catch (error) {
                            console.log(error.stack);
                        }
                    }
                    return FacebookJSBridge;
                }());
                core.FacebookJSBridge = FacebookJSBridge;
            })(core = graph.core || (graph.core = {}));
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            var core;
            (function (core) {
                core.Batch = com.facebook.graph.data.Batch;
                core.FQLMultiQuery = com.facebook.graph.data.FQLMultiQuery;
                core.FacebookAuthResponse = com.facebook.graph.data.FacebookAuthResponse;
                core.FacebookSession = com.facebook.graph.data.FacebookSession;
                core.FacebookBatchRequest = com.facebook.graph.net.FacebookBatchRequest;
                core.FacebookRequest = com.facebook.graph.net.FacebookRequest;
                core.FQLMultiQueryParser = com.facebook.graph.utils.FQLMultiQueryParser;
                core.URLRequestMethod = flash.net.URLRequestMethod;
                core.Dictionary = flash.utils.Dictionary;
                var AbstractFacebook = (function () {
                    function AbstractFacebook() {
                        this.oauth2 = false;
                        this.openRequests = new core.Dictionary();
                        this.resultHash = new core.Dictionary(true);
                        this.parserHash = new core.Dictionary();
                    }
                    Object.defineProperty(AbstractFacebook.prototype, "accessToken", {
                        get: function () {
                            if ((this.oauth2 && this.authResponse != null) || this.session != null) {
                                return this.oauth2 ? this.authResponse.accessToken : this.session.accessToken;
                            }
                            else {
                                return null;
                            }
                        },
                        enumerable: true,
                        configurable: true
                    });
                    AbstractFacebook.prototype.api = function (method, callback, params, requestMethod) {
                        if (callback === void 0) { callback = null; }
                        if (params === void 0) { params = null; }
                        if (requestMethod === void 0) { requestMethod = 'GET'; }
                        method = (method.indexOf('/') != 0) ? '/' + method : method;
                        if (this.accessToken) {
                            if (params == null) {
                                params = {};
                            }
                            if (params.access_token == null) {
                                params.access_token = this.accessToken;
                            }
                        }
                        var req = new core.FacebookRequest();
                        if (this.locale) {
                            params.locale = this.locale;
                        }
                        this.openRequests.set(req, callback);
                        req.call(core.FacebookURLDefaults.GRAPH_URL + method, requestMethod, this.handleRequestLoad.bind(this), params);
                    };
                    AbstractFacebook.prototype.uploadVideo = function (method, callback, params) {
                        if (callback === void 0) { callback = null; }
                        if (params === void 0) { params = null; }
                        method = (method.indexOf('/') != 0) ? '/' + method : method;
                        if (this.accessToken) {
                            if (params == null) {
                                params = {};
                            }
                            if (params.access_token == null) {
                                params.access_token = this.accessToken;
                            }
                        }
                        var req = new core.FacebookRequest();
                        if (this.locale) {
                            params.locale = this.locale;
                        }
                        this.openRequests.set(req, callback);
                        req.call(core.FacebookURLDefaults.VIDEO_URL + method, 'POST', this.handleRequestLoad.bind(this), params);
                    };
                    AbstractFacebook.prototype.pagingCall = function (url, callback) {
                        var req = new core.FacebookRequest();
                        this.openRequests.set(req, callback);
                        req.callURL(this.handleRequestLoad.bind(this), url, this.locale);
                        return req;
                    };
                    AbstractFacebook.prototype.getRawResult = function (data) {
                        return this.resultHash.get(data);
                    };
                    AbstractFacebook.prototype.nextPage = function (data, callback) {
                        if (callback === void 0) { callback = null; }
                        var req = null;
                        var rawObj = this.getRawResult(data);
                        if (rawObj && rawObj.paging && rawObj.paging.next) {
                            req = this.pagingCall(rawObj.paging.next, callback);
                        }
                        else if (callback != null) {
                            callback(null, 'no page');
                        }
                        return req;
                    };
                    AbstractFacebook.prototype.previousPage = function (data, callback) {
                        if (callback === void 0) { callback = null; }
                        var req = null;
                        var rawObj = this.getRawResult(data);
                        if (rawObj && rawObj.paging && rawObj.paging.previous) {
                            req = this.pagingCall(rawObj.paging.previous, callback);
                        }
                        else if (callback != null) {
                            callback(null, 'no page');
                        }
                        return req;
                    };
                    AbstractFacebook.prototype.handleRequestLoad = function (target) {
                        var resultCallback = this.openRequests.get(target);
                        if (resultCallback === null) {
                            this.openRequests.delete(target);
                        }
                        if (target.success) {
                            var data = target.data;
                            this.resultHash.set(data, target.data);
                            if (data.hasOwnProperty("error_code")) {
                                resultCallback(null, data);
                            }
                            else {
                                if (this.parserHash.get(target) && 'is_IResultParser' in this.parserHash.get(target)) {
                                    var p = this.parserHash.get(target);
                                    data = p.parse(data);
                                    this.parserHash.set(target, null);
                                    this.parserHash.delete(target);
                                }
                                resultCallback(data, null);
                            }
                        }
                        else {
                            resultCallback(null, target.data);
                        }
                        this.openRequests.delete(target);
                    };
                    AbstractFacebook.prototype.callRestAPI = function (methodName, callback, values, requestMethod) {
                        if (callback === void 0) { callback = null; }
                        if (values === void 0) { values = null; }
                        if (requestMethod === void 0) { requestMethod = 'GET'; }
                        if (values == null) {
                            values = {};
                        }
                        values.format = 'json';
                        if (this.accessToken) {
                            values.access_token = this.accessToken;
                        }
                        if (this.locale) {
                            values.locale = this.locale;
                        }
                        var req = new core.FacebookRequest();
                        this.openRequests.set(req, callback);
                        if (this.parserHash.get(values["queries"]) && 'is_IResultParser' in this.parserHash.get(values["queries"])) {
                            var p = this.parserHash.get(values["queries"]);
                            this.parserHash.set(values["queries"], null);
                            this.parserHash.delete(values["queries"]);
                            this.parserHash.set(req, p);
                        }
                        req.call(core.FacebookURLDefaults.API_URL + '/method/' + methodName, requestMethod, this.handleRequestLoad.bind(this), values);
                    };
                    AbstractFacebook.prototype.fqlQuery = function (query, callback, values) {
                        if (callback === void 0) { callback = null; }
                        if (values === void 0) { values = null; }
                        for (var n in values) {
                            query = query.replace(new RegExp('\\{' + n + '\\}', 'g'), values[n]);
                        }
                        this.callRestAPI('fql.query', callback, { query: query });
                    };
                    AbstractFacebook.prototype.fqlMultiQuery = function (queries, callback, parser) {
                        if (callback === void 0) { callback = null; }
                        if (parser === void 0) { parser = null; }
                        this.parserHash.set(queries.toString(), parser != null ? parser : new core.FQLMultiQueryParser());
                        this.callRestAPI('fql.multiquery', callback, { queries: queries.toString() });
                    };
                    AbstractFacebook.prototype.batchRequest = function (batch, callback) {
                        if (callback === void 0) { callback = null; }
                        if (this.accessToken) {
                            var request = new core.FacebookBatchRequest(batch, callback);
                            this.resultHash.set(request, true);
                            request.call(this.accessToken);
                        }
                    };
                    AbstractFacebook.prototype.deleteObject = function (method, callback) {
                        if (callback === void 0) { callback = null; }
                        var params = { method: 'delete' };
                        this.api(method, callback, params, core.URLRequestMethod.POST);
                    };
                    AbstractFacebook.prototype.getImageUrl = function (id, type) {
                        if (type === void 0) { type = null; }
                        return core.FacebookURLDefaults.GRAPH_URL
                            + '/'
                            + id
                            + '/picture'
                            + (type != null ? '?type=' + type : '');
                    };
                    return AbstractFacebook;
                }());
                core.AbstractFacebook = AbstractFacebook;
            })(core = graph.core || (graph.core = {}));
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            graph.Error = global.Error;
            graph.AbstractFacebook = com.facebook.graph.core.AbstractFacebook;
            graph.FacebookJSBridge = com.facebook.graph.core.FacebookJSBridge;
            graph.FacebookURLDefaults = com.facebook.graph.core.FacebookURLDefaults;
            graph.Batch = com.facebook.graph.data.Batch;
            graph.FQLMultiQuery = com.facebook.graph.data.FQLMultiQuery;
            graph.FacebookAuthResponse = com.facebook.graph.data.FacebookAuthResponse;
            graph.FacebookRequest = com.facebook.graph.net.FacebookRequest;
            graph.ExternalInterface = flash.external.ExternalInterface;
            graph.URLRequest = flash.net.URLRequest;
            graph.URLRequestMethod = flash.net.URLRequestMethod;
            graph.URLVariables = flash.net.URLVariables;
            graph.navigateToURL = flash.net.navigateToURL;
            graph.Dictionary = flash.utils.Dictionary;
            var Facebook = (function (_super) {
                __extends(Facebook, _super);
                function Facebook() {
                    var _this = _super.call(this) || this;
                    if (Facebook._canInit == false)
                        throw new graph.Error('Facebook is an singleton and cannot be instantiated.');
                    _this.jsBridge = new graph.FacebookJSBridge();
                    _this.jsCallbacks = {};
                    _this.openUICalls = new graph.Dictionary();
                    return _this;
                }
                Facebook.init = function (applicationId, callback, options, accessToken) {
                    if (callback === void 0) { callback = null; }
                    if (options === void 0) { options = null; }
                    if (accessToken === void 0) { accessToken = null; }
                    Facebook.getInstance().init(applicationId, callback, options, accessToken);
                };
                Object.defineProperty(Facebook, "locale", {
                    set: function (value) {
                        Facebook.getInstance().locale = value;
                    },
                    enumerable: true,
                    configurable: true
                });
                Facebook.login = function (callback, options) {
                    if (options === void 0) { options = null; }
                    Facebook.getInstance().login(callback, options);
                };
                Facebook.mobileLogin = function (redirectUri, display, extendedPermissions) {
                    if (display === void 0) { display = 'touch'; }
                    if (extendedPermissions === void 0) { extendedPermissions = null; }
                    var data = new graph.URLVariables();
                    data.client_id = Facebook.getInstance().applicationId;
                    data.redirect_uri = redirectUri;
                    data.display = display;
                    if (extendedPermissions != null)
                        data.scope = extendedPermissions.join(",");
                    var req = new graph.URLRequest(graph.FacebookURLDefaults.AUTH_URL);
                    req.method = graph.URLRequestMethod.GET;
                    req.data = data;
                    graph.navigateToURL(req, '_self');
                };
                Facebook.mobileLogout = function (redirectUri) {
                    Facebook.getInstance().authResponse = null;
                    var data = new graph.URLVariables();
                    data.confirm = 1;
                    data.next = redirectUri;
                    var req = new graph.URLRequest("http://m.facebook.com/logout.php");
                    req.method = graph.URLRequestMethod.GET;
                    req.data = data;
                    graph.navigateToURL(req, '_self');
                };
                Facebook.logout = function (callback) {
                    Facebook.getInstance().logout(callback);
                };
                Facebook.ui = function (method, data, callback, display) {
                    if (callback === void 0) { callback = null; }
                    if (display === void 0) { display = null; }
                    Facebook.getInstance().ui(method, data, callback, display);
                };
                Facebook.api = function (method, callback, params, requestMethod) {
                    if (callback === void 0) { callback = null; }
                    if (params === void 0) { params = null; }
                    if (requestMethod === void 0) { requestMethod = 'GET'; }
                    Facebook.getInstance().api(method, callback, params, requestMethod);
                };
                Facebook.getRawResult = function (data) {
                    return Facebook.getInstance().getRawResult(data);
                };
                Facebook.hasNext = function (data) {
                    var result = Facebook.getInstance().getRawResult(data);
                    if (!result.paging)
                        return false;
                    return (result.paging.next != null);
                };
                Facebook.hasPrevious = function (data) {
                    var result = Facebook.getInstance().getRawResult(data);
                    if (!result.paging)
                        return false;
                    return (result.paging.previous != null);
                };
                Facebook.nextPage = function (data, callback) {
                    return Facebook.getInstance().nextPage(data, callback);
                };
                Facebook.previousPage = function (data, callback) {
                    return Facebook.getInstance().previousPage(data, callback);
                };
                Facebook.postData = function (method, callback, params) {
                    if (callback === void 0) { callback = null; }
                    if (params === void 0) { params = null; }
                    Facebook.api(method, callback, params, graph.URLRequestMethod.POST);
                };
                Facebook.uploadVideo = function (method, callback, params) {
                    if (callback === void 0) { callback = null; }
                    if (params === void 0) { params = null; }
                    Facebook.getInstance().uploadVideo(method, callback, params);
                };
                Facebook.fqlQuery = function (query, callback, values) {
                    if (callback === void 0) { callback = null; }
                    if (values === void 0) { values = null; }
                    Facebook.getInstance().fqlQuery(query, callback, values);
                };
                Facebook.fqlMultiQuery = function (queries, callback, parser) {
                    if (callback === void 0) { callback = null; }
                    if (parser === void 0) { parser = null; }
                    Facebook.getInstance().fqlMultiQuery(queries, callback, parser);
                };
                Facebook.batchRequest = function (batch, callback) {
                    if (callback === void 0) { callback = null; }
                    Facebook.getInstance().batchRequest(batch, callback);
                };
                Facebook.callRestAPI = function (methodName, callback, values, requestMethod) {
                    if (values === void 0) { values = null; }
                    if (requestMethod === void 0) { requestMethod = 'GET'; }
                    Facebook.getInstance().callRestAPI(methodName, callback, values, requestMethod);
                };
                Facebook.getImageUrl = function (id, type) {
                    if (type === void 0) { type = null; }
                    return Facebook.getInstance().getImageUrl(id, type);
                };
                Facebook.deleteObject = function (method, callback) {
                    if (callback === void 0) { callback = null; }
                    Facebook.getInstance().deleteObject(method, callback);
                };
                Facebook.addJSEventListener = function (event, listener) {
                    Facebook.getInstance().addJSEventListener(event, listener);
                };
                Facebook.removeJSEventListener = function (event, listener) {
                    Facebook.getInstance().removeJSEventListener(event, listener);
                };
                Facebook.hasJSEventListener = function (event, listener) {
                    return Facebook.getInstance().hasJSEventListener(event, listener);
                };
                Facebook.setCanvasAutoResize = function (autoSize, interval) {
                    if (autoSize === void 0) { autoSize = true; }
                    if (interval === void 0) { interval = 100; }
                    Facebook.getInstance().setCanvasAutoResize(autoSize, interval);
                };
                Facebook.setCanvasSize = function (width, height) {
                    Facebook.getInstance().setCanvasSize(width, height);
                };
                Facebook.callJS = function (methodName, params) {
                    Facebook.getInstance().callJS(methodName, params);
                };
                Facebook.getAuthResponse = function () {
                    return Facebook.getInstance().getAuthResponse();
                };
                Facebook.getLoginStatus = function () {
                    Facebook.getInstance().getLoginStatus();
                };
                Facebook.activateApp = function () {
                    Facebook.getInstance().activateApp();
                };
                Facebook.logPurchase = function (price, currency) {
                    Facebook.getInstance().logPurchase(price, currency);
                };
                Facebook.logEvent = function (eventName, valueToSum, parameters) {
                    Facebook.getInstance().logEvent(eventName, valueToSum, parameters);
                };
                Facebook.deleteRequest = function (requestPath, callback) {
                    Facebook.getInstance().deleteRequest(requestPath, callback);
                };
                Facebook.prototype.init = function (applicationId, callback, options, accessToken) {
                    if (callback === void 0) { callback = null; }
                    if (options === void 0) { options = null; }
                    if (accessToken === void 0) { accessToken = null; }
                    graph.ExternalInterface.addCallback('handleJsEvent', this.handleJSEvent.bind(this));
                    graph.ExternalInterface.addCallback('authResponseChange', this.handleAuthResponseChange.bind(this));
                    graph.ExternalInterface.addCallback('logout', this.handleLogout.bind(this));
                    graph.ExternalInterface.addCallback('uiResponse', this.handleUI.bind(this));
                    graph.ExternalInterface.addCallback("deleteRequest", this.handleDeleteRequest.bind(this));
                    this._initCallback = callback;
                    this.applicationId = applicationId;
                    this.oauth2 = true;
                    if (options == null) {
                        options = {};
                    }
                    options.appId = applicationId;
                    options.status = true,
                        options.xfbml = true,
                        options.version = "v2.0";
                    graph.ExternalInterface.call('FBAS.init', JSON.stringify(options));
                    if (accessToken != null) {
                        this.authResponse = new graph.FacebookAuthResponse();
                        this.authResponse.accessToken = accessToken;
                    }
                    if (options.status !== false) {
                        Facebook.getLoginStatus();
                    }
                    else if (this._initCallback != null) {
                        this._initCallback(this.authResponse, null);
                        this._initCallback = null;
                    }
                };
                Facebook.prototype.getLoginStatus = function () {
                    graph.ExternalInterface.call('FBAS.getLoginStatus');
                };
                Facebook.prototype.callJS = function (methodName, params) {
                    graph.ExternalInterface.call(methodName, params);
                };
                Facebook.prototype.setCanvasSize = function (width, height) {
                    graph.ExternalInterface.call('FBAS.setCanvasSize', width, height);
                };
                Facebook.prototype.setCanvasAutoResize = function (autoSize, interval) {
                    if (autoSize === void 0) { autoSize = true; }
                    if (interval === void 0) { interval = 100; }
                    graph.ExternalInterface.call('FBAS.setCanvasAutoResize', autoSize, interval);
                };
                Facebook.prototype.login = function (callback, options) {
                    if (options === void 0) { options = null; }
                    this._loginCallback = callback;
                    graph.ExternalInterface.call('FBAS.login', JSON.stringify(options));
                };
                Facebook.prototype.logout = function (callback) {
                    this._logoutCallback = callback;
                    graph.ExternalInterface.call('FBAS.logout');
                };
                Facebook.prototype.getAuthResponse = function () {
                    var result = graph.ExternalInterface.call('FBAS.getAuthResponse');
                    var authResponseObj;
                    try {
                        authResponseObj = JSON.parse(result);
                    }
                    catch (e) {
                        return null;
                    }
                    var a = new graph.FacebookAuthResponse();
                    a.fromJSON(authResponseObj);
                    this.authResponse = a;
                    return this.authResponse;
                };
                Facebook.prototype.ui = function (method, data, callback, display) {
                    if (callback === void 0) { callback = null; }
                    if (display === void 0) { display = null; }
                    data.method = method;
                    if (callback != null)
                        this.openUICalls.set(method, callback);
                    if (display)
                        data.display = display;
                    graph.ExternalInterface.call('FBAS.ui', JSON.stringify(data));
                };
                Facebook.prototype.activateApp = function () {
                    if (!graph.ExternalInterface.available)
                        return;
                    graph.ExternalInterface.call("FBAS.activateApp");
                };
                Facebook.prototype.logPurchase = function (price, currency) {
                    if (!graph.ExternalInterface.available)
                        return;
                    graph.ExternalInterface.call("FBAS.logPurchase", price, currency);
                };
                Facebook.prototype.logEvent = function (eventName, valueToSum, parameters) {
                    if (!graph.ExternalInterface.available)
                        return;
                    graph.ExternalInterface.call("FBAS.logEvent", eventName, valueToSum, parameters);
                };
                Facebook.prototype.deleteRequest = function (requestPath, callback) {
                    this._deleteCallback = callback;
                    graph.ExternalInterface.call("FBAS.deleteRequest", requestPath);
                };
                Facebook.prototype.addJSEventListener = function (event, listener) {
                    if (this.jsCallbacks[event] == null) {
                        this.jsCallbacks[event] = new graph.Dictionary();
                        graph.ExternalInterface.call('FBAS.addEventListener', event);
                    }
                    this.jsCallbacks[event].set(listener, null);
                };
                Facebook.prototype.removeJSEventListener = function (event, listener) {
                    if (this.jsCallbacks[event] == null)
                        return;
                    this.jsCallbacks[event].delete(listener);
                };
                Facebook.prototype.hasJSEventListener = function (event, listener) {
                    if (this.jsCallbacks[event] == null || this.jsCallbacks[event].get(listener) !== null)
                        return false;
                    return true;
                };
                Facebook.prototype.handleUI = function (result, method) {
                    var decodedResult = result ? JSON.parse(result) : null;
                    var uiCallback = this.openUICalls.get(method);
                    if (typeof uiCallback === 'function') {
                        uiCallback(decodedResult);
                    }
                    this.openUICalls.delete(method);
                };
                Facebook.prototype.handleDeleteRequest = function (response) {
                    var callback = this._deleteCallback;
                    if (callback != null) {
                        this._deleteCallback = null;
                        callback(response);
                    }
                };
                Facebook.prototype.handleLogout = function () {
                    this.authResponse = null;
                    if (this._logoutCallback != null) {
                        this._logoutCallback(true);
                        this._logoutCallback = null;
                    }
                };
                Facebook.prototype.handleJSEvent = function (event, result) {
                    if (result === void 0) { result = null; }
                    if (this.jsCallbacks[event] != null) {
                        var decodedResult;
                        try {
                            decodedResult = JSON.parse(result);
                        }
                        catch (e) { }
                        for (var _i = 0, _a = this.jsCallbacks[event].keys; _i < _a.length; _i++) {
                            var func = _a[_i];
                            func(decodedResult);
                            this.jsCallbacks[event].delete(func);
                        }
                    }
                };
                Facebook.prototype.handleAuthResponseChange = function (result) {
                    var resultObj;
                    var success = true;
                    if (result != null) {
                        try {
                            resultObj = JSON.parse(result);
                        }
                        catch (e) {
                            success = false;
                        }
                    }
                    else {
                        success = false;
                    }
                    if (success) {
                        if (this.authResponse == null) {
                            this.authResponse = new graph.FacebookAuthResponse();
                            this.authResponse.fromJSON(resultObj);
                        }
                        else {
                            this.authResponse.fromJSON(resultObj);
                        }
                    }
                    if (this._initCallback != null) {
                        this._initCallback(this.authResponse, null);
                        this._initCallback = null;
                    }
                    if (this._loginCallback != null) {
                        this._loginCallback(this.authResponse, null);
                        this._loginCallback = null;
                    }
                };
                Facebook.getInstance = function () {
                    if (Facebook._instance == null) {
                        Facebook._canInit = true;
                        Facebook._instance = Facebook.simulate ? new graph.FacebookSimulate : new Facebook;
                        Facebook._canInit = false;
                    }
                    return Facebook._instance;
                };
                Facebook.simulate = false;
                Facebook._canInit = false;
                return Facebook;
            }(graph.AbstractFacebook));
            graph.Facebook = Facebook;
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            graph.setTimeout = flash.utils.setTimeout;
            var FacebookSimulate = (function (_super) {
                __extends(FacebookSimulate, _super);
                function FacebookSimulate() {
                    var _this = _super.call(this) || this;
                    _this.pcount = 1;
                    _this.me_score = 123;
                    _this.requests = [];
                    return _this;
                }
                FacebookSimulate.prototype.init = function (applicationId, callback, options, accessToken) {
                    if (callback === void 0) { callback = null; }
                    if (options === void 0) { options = null; }
                    if (accessToken === void 0) { accessToken = null; }
                    callback({}, null);
                };
                FacebookSimulate.prototype.login = function (callback, options) {
                    if (options === void 0) { options = null; }
                    callback({}, null);
                };
                FacebookSimulate.prototype.ui = function (method, data, callback, display) {
                    if (callback === void 0) { callback = null; }
                    if (display === void 0) { display = null; }
                    if (method == 'feed') {
                        callbackTimed.bind(this)('http://domain.com?post_id=0');
                    }
                    else if (method == 'apprequests') {
                        callbackTimed.bind(this)('http://domain.com?to[0]=000&to[1]=111');
                    }
                    function callbackTimed(data) {
                        graph.setTimeout(callback, 1, data);
                    }
                };
                FacebookSimulate.prototype.deleteRequest = function (requestPath, callback) {
                    var len = this.requests.length;
                    for (var i = 0; i < len; ++i) {
                        var r = this.requests[i];
                        if (r.id == requestPath) {
                            this.requests.splice(i, 1);
                            graph.setTimeout(callback, 1, {});
                            return;
                        }
                    }
                };
                FacebookSimulate.prototype.api = function (method, callback, params, requestMethod) {
                    if (callback === void 0) { callback = null; }
                    if (params === void 0) { params = null; }
                    if (requestMethod === void 0) { requestMethod = 'GET'; }
                    if (method == 'me') {
                        callbackTimed.bind(this)({
                            "id": "722977651119917",
                            "name": "Petr Kulikov",
                            "first_name": "Petr",
                            "last_name": "Kulikov",
                            "locale": "ru_RU",
                            "picture": {
                                "data": {
                                    "height": 120,
                                    "is_silhouette": false,
                                    "url": "https://scontent.xx.fbcdn.net/hprofile-ash2/v/t1.0-1/p120x120/1231620_512977845453233_504373767_n.jpg?oh=3cb9d5f74681d931f75cd2a4395f66b4&oe=5694AECF",
                                    "width": 120
                                }
                            },
                            "scores": {
                                "data": [
                                    {
                                        "user": {
                                            "name": "Petr Kulikov",
                                            "id": "722977651119917"
                                        },
                                        "score": 0,
                                        "application": {
                                            "category": "Games",
                                            "link": "https://apps.facebook.com/time_gap_mystery/",
                                            "name": "Time Gap: Hidden Object Mystery",
                                            "namespace": "time_gap_mystery",
                                            "id": "1679748755572563"
                                        }
                                    }
                                ]
                            },
                            "installed": true,
                            "email": "peter-kulikov@mail.ru",
                        });
                    }
                    else if (method == 'me/friends') {
                        callbackTimed.bind(this)({
                            "data": [
                                {
                                    "id": "10152847199458069",
                                    "name": "Tatyana Garat",
                                    "first_name": "Tatyana",
                                    "last_name": "Garat",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xpt1/v/t1.0-1/p120x120/11855828_10153538412383069_8380829401913484908_n.jpg?oh=43711a1b5f3c50ecb4e137a561332927&oe=56CE513E",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": [
                                            {
                                                "user": {
                                                    "name": "Tatyana Garat",
                                                    "id": "10152847199458069"
                                                },
                                                "score": 9000000,
                                                "application": {
                                                    "category": "Games",
                                                    "link": "https://apps.facebook.com/time_gap_mystery/",
                                                    "name": "Time Gap: Hidden Object Mystery",
                                                    "namespace": "time_gap_mystery",
                                                    "id": "1679748755572563"
                                                }
                                            }
                                        ]
                                    }
                                },
                                {
                                    "id": "10203986524961469",
                                    "name": "Arsen Dzodzaev",
                                    "first_name": "Arsen",
                                    "last_name": "Dzodzaev",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xta1/v/t1.0-1/p120x120/10665707_10203622576742991_8780567164175212541_n.jpg?oh=3d74b81373efbc2d596e5520e2954682&oe=56954F63",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": [
                                            {
                                                "user": {
                                                    "name": "Arsen Dzodzaev",
                                                    "id": "10203986524961469"
                                                },
                                                "score": 19000000,
                                                "application": {
                                                    "category": "Games",
                                                    "link": "https://apps.facebook.com/time_gap_mystery/",
                                                    "name": "Time Gap: Hidden Object Mystery",
                                                    "namespace": "time_gap_mystery",
                                                    "id": "1679748755572563"
                                                }
                                            }
                                        ]
                                    }
                                },
                                {
                                    "id": "10206041572459669",
                                    "name": "Yuliya Moshkaryova",
                                    "first_name": "Yuliya",
                                    "last_name": "Moshkaryova",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xta1/v/t1.0-1/p120x120/11947599_10207211943958225_5597369189710529093_n.jpg?oh=066b6f7c3a5c2e0a3dd936acd89db4a2&oe=56A10F78",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": [
                                            {
                                                "user": {
                                                    "name": "Yuliya Moshkaryova",
                                                    "id": "10206041572459669"
                                                },
                                                "score": 510001,
                                                "application": {
                                                    "category": "Games",
                                                    "link": "https://apps.facebook.com/time_gap_mystery/",
                                                    "name": "Time Gap: Hidden Object Mystery",
                                                    "namespace": "time_gap_mystery",
                                                    "id": "1679748755572563"
                                                }
                                            }
                                        ]
                                    }
                                },
                                {
                                    "id": "10205161585103078",
                                    "name": "Alice Selezneva",
                                    "first_name": "Alice",
                                    "last_name": "Selezneva",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xaf1/v/t1.0-1/c50.50.621.621/s120x120/315060_2606721011145_1944972948_n.jpg?oh=b0c785bae7328d6484efb691b2804986&oe=56D302CD",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "10203319037041376",
                                    "name": "Alexandra Skripka",
                                    "first_name": "Alexandra",
                                    "last_name": "Skripka",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xtp1/v/t1.0-1/p120x120/12032040_10205089789429079_8282664248714898992_n.jpg?oh=6fbe26fbba2613c05cb106381e636bec&oe=56D18F72",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "4760683592479",
                                    "name": "Alexander Slavinsky",
                                    "first_name": "Alexander",
                                    "last_name": "Slavinsky",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xpa1/v/t1.0-1/c0.7.120.120/p120x120/62871_1188200642638_3626507_n.jpg?oh=2ae0494df18a0c1697a47ad4090bdd5e&oe=569F76FD&__gda__=1452938168_e875805e8cf0e0bb555ad4e109e511d3",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "10202132040902433",
                                    "name": "Konstantin Miroshnichenko",
                                    "first_name": "Konstantin",
                                    "last_name": "Miroshnichenko",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-ash2/v/t1.0-1/c126.58.223.223/s120x120/557797_3434826609334_6759808_n.jpg?oh=586330d500b10fc2e033d29688fd4e53&oe=5694ED0E",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "947517655263153",
                                    "name": "Dmitriy Reshetov",
                                    "first_name": "Dmitriy",
                                    "last_name": "Reshetov",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-ash2/v/t1.0-1/p120x120/10392343_958856794129239_1604051886592206917_n.jpg?oh=8e2801b6071606ede03acabdd51a3150&oe=56A300AE&__gda__=1453428077_9d51876ac93dd050f1a8e1f162122086",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "962896443726645",
                                    "name": "Alexander Zaslavsky",
                                    "first_name": "Alexander",
                                    "last_name": "Zaslavsky",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xfa1/v/t1.0-1/c12.12.155.155/s120x120/1897811_816409395042018_689869477_n.jpg?oh=f6441bdc8bae654b568ecd4e2d46fcb9&oe=568D0A19",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "852420838110583",
                                    "name": "Даша Орлянская",
                                    "first_name": "Даша",
                                    "last_name": "Орлянская",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-ash2/v/t1.0-1/c2.0.120.120/p120x120/10734199_870248852994448_3868039119020760796_n.jpg?oh=b61ecfdc3650d7cfd7781722bb33daa2&oe=569A8435&__gda__=1452665134_b66038ec6a5914b388e55e17608351ea",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "824991587521695",
                                    "name": "Сергей Стёпин",
                                    "first_name": "Сергей",
                                    "last_name": "Стёпин",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-prn2/v/t1.0-1/p120x120/1688061_701811483173040_2006815885_n.jpg?oh=bbe84ba32b6f1742fd6806ac19f3da91&oe=56910D7F&__gda__=1456630653_f1a19d1ccdfdbbae30dbb43a4bceae61",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "833892539965159",
                                    "name": "Артем Верескун",
                                    "first_name": "Артем",
                                    "last_name": "Верескун",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xap1/v/t1.0-1/c4.0.120.120/p120x120/999855_726746037346477_1982575387_n.jpg?oh=31445cf846734487887b4b6999c4dc36&oe=56CD0B58",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "859393927415387",
                                    "name": "Igor Chavychalov",
                                    "first_name": "Igor",
                                    "last_name": "Chavychalov",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xpf1/v/t1.0-1/p120x120/10998865_922273317794114_3602770311052759589_n.jpg?oh=ea380819541d54289ed38d20a5988de0&oe=5686A539",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "872090042822786",
                                    "name": "Konstantin Impeh",
                                    "first_name": "Konstantin",
                                    "last_name": "Impeh",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xtp1/v/t1.0-1/c47.0.120.120/p120x120/7791_732929163405542_226175359_n.jpg?oh=c29cd3b601f2d1b90da9019efc9491ca&oe=569A7D69",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "782088655162690",
                                    "name": "Margarita Evtuhova",
                                    "first_name": "Margarita",
                                    "last_name": "Evtuhova",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-prn2/v/t1.0-1/c37.37.462.462/s120x120/533460_353216718049888_1876206463_n.jpg?oh=76fef653da139984d245e90e8ea563b3&oe=569A19A3",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "787700891268922",
                                    "name": "Oksana Glazunova",
                                    "first_name": "Oksana",
                                    "last_name": "Glazunova",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xfp1/v/t1.0-1/p120x120/11217658_884520391586971_1432137185187752793_n.jpg?oh=1feb65bf78208aa33e98ad5537dd80a8&oe=56998B51&__gda__=1452811322_acd20c7b76816dbed10675d2544854b6",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "810017719040561",
                                    "name": "Sergei Dudar",
                                    "first_name": "Sergei",
                                    "last_name": "Dudar",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xaf1/v/t1.0-1/p120x120/12006076_950445538331111_5456064836953837469_n.jpg?oh=4758877808b4bcfff03b5a9971748fc0&oe=5697D2A5",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "887230971322096",
                                    "name": "Михаил Новиков",
                                    "first_name": "Михаил",
                                    "last_name": "Новиков",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xpf1/v/t1.0-1/p120x120/11836832_1018636854848173_5625748662533048005_n.jpg?oh=f17e3b8c6980b52436dddd1b89ee160e&oe=569888D9&__gda__=1451681461_47fa0386d7771dffb807ea3b8671079b",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "872381276142194",
                                    "name": "Юрий Ткаченко",
                                    "first_name": "Юрий",
                                    "last_name": "Ткаченко",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-ash2/v/t1.0-1/c26.26.330.330/s120x120/579385_379033305476996_1379874865_n.jpg?oh=4753c6640a7877f8a9f5788c5239d0ee&oe=5689DB33",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "726109664104302",
                                    "name": "Анастасия Коваль",
                                    "first_name": "Анастасия",
                                    "last_name": "Коваль",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xfa1/v/t1.0-1/c28.43.346.346/s120x120/165270_154434311271843_7695801_n.jpg?oh=3e91c309252979bb05e9a766221602d2&oe=56971520",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "816441468406262",
                                    "name": "Анатолий Козаченко",
                                    "first_name": "Анатолий",
                                    "last_name": "Козаченко",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-ash2/v/t1.0-1/c170.50.621.621/s120x120/535669_501997146517364_1478294666_n.jpg?oh=a281302aa64dfd8f06ceca23327b9397&oe=568D245A",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "825796730806098",
                                    "name": "Ирина Дронова",
                                    "first_name": "Ирина",
                                    "last_name": "Дронова",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-frc3/v/t1.0-1/p120x120/10394643_720103634708742_494655517868972349_n.jpg?oh=c4fffaf4bd58a3ff299e3a46392a388c&oe=56992DC8",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "741122212619877",
                                    "name": "Ольга Максина",
                                    "first_name": "Ольга",
                                    "last_name": "Максина",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xta1/v/t1.0-1/c20.0.120.120/p120x120/11251626_844913988907365_4841381286626507938_n.jpg?oh=efa383641ebc71f48051c093cec89c44&oe=568854B5",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "747328792003558",
                                    "name": "Vasyl Bashynskyy",
                                    "first_name": "Vasyl",
                                    "last_name": "Bashynskyy",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xfp1/v/t1.0-1/p120x120/10985915_883232958413140_4862811886931556245_n.jpg?oh=080345ac1c851d1cf8601a2299b63c04&oe=56A14E29",
                                            "width": 120
                                        }
                                    },
                                    "scores": {
                                        "data": []
                                    }
                                },
                                {
                                    "id": "742950812448987",
                                    "name": "Егор Лоскутов",
                                    "first_name": "Егор",
                                    "last_name": "Лоскутов",
                                    "installed": true,
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xpa1/v/t1.0-1/c18.18.221.221/s120x120/1185825_501248029952601_1982218865_n.jpg?oh=ef26c7214c9a0db26051f189b9dac669&oe=56D31455",
                                            "width": 120
                                        }
                                    }
                                }
                            ],
                            "paging": {
                                "next": "https://graph.facebook.com/v2.2/722977651119917/friends?fields=id,name,first_name,last_name,picture.height%28120%29.width%28120%29,scores,installed&format=json&access_token=CAALZAKUW2IPwBAOxZAFLlzbvCu8gEEFLfvg7503SnNcTyRyYGgytcPMjlWr463A2frRxT5Talv8ExTiHI5aKvinSIqRjfZC3kc9FjAZBkDFqVXbiIARaZAduNZCn1ZBstp8FhLULTFFRGGVSxwUZBZCYmfFpKTPL6s2Oyaa8CFLKP8U4OikeYvhwVbTxkwxvMwha5IOBsmITZCiAZDZD&limit=25&offset=25&__after_id=enc_AdD17UU5VjdoADZBfeuEZBgf9T4y0QcRvIbIStu0gVIh1ZAOZCaSjpfr0B35GJRVxMOhTnY4LKI43JwwnYKWaFoTQZAxo"
                            },
                            "summary": {
                                "total_count": 82
                            }
                        });
                    }
                    else if (method == 'me/invitable_friends') {
                        callbackTimed.bind(this)({
                            "data": [
                                {
                                    "id": "AVnadvJEESfHng1WNSpNqdEHJST3IWS8OacuDJ8kx1wd9BLO3cBY7ZUwyIx7XW29FNe-8hVaH3soP6_j7Cwy1zdfs0Zvr3Nja8_xRPDzdgG_8Q",
                                    "name": "Ostrinin Vadym",
                                    "first_name": "Vadym",
                                    "last_name": "Ostrinin",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xfa1/v/t1.0-1/p120x120/10915272_1534712683477670_1444218597847643454_n.jpg?oh=77f168fb36b3d4780e455772ef44221e&oe=56D0AF51",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVl4fEfyPuAUrisuL4vp6lxKCbsb_ClRbfUbxrDDY2jvjc0mtJHj3bHkOSeTf6AwIN-m3ozDfqKmWXsaSpIW40DHHW257YlV6EDpymvoiu628g",
                                    "name": "Anastasiya Otkidach",
                                    "first_name": "Anastasiya",
                                    "last_name": "Otkidach",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xtp1/v/t1.0-1/p120x120/12039181_923928344329600_3700276344486025912_n.jpg?oh=049eca3b16229c1585c764b3f0ca79a8&oe=56871BA7",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVlvxjDWfqVWpeHix82i2WdNgH2tud1EBuBOvGlkPwxzLOPd-TmXnDDo2g-gk93j_WFOt9l7WGePc1HF-QCIIZIJ5hecpng4GQKyQ7GAEqqGww",
                                    "name": "Ivan Syomin",
                                    "first_name": "Ivan",
                                    "last_name": "Syomin",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xfp1/v/t1.0-1/c153.33.414.414/s120x120/71846_102867789778808_4972134_n.jpg?oh=df548f5605976a8af03516a9fd8aa7e1&oe=5689B899",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVn5S-Bbp6ADvzmWROHyYKy-ACAavpQMKaCFQUzMSn9muo6q-QTIt_BZglkbgIBL4F3-1ckxCtfNTmHIApHnLsFGzG_xUbAqzv3EuTbHoX_LtQ",
                                    "name": "Alexandr Ovsyannikov",
                                    "first_name": "Alexandr",
                                    "last_name": "Ovsyannikov",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xaf1/v/t1.0-1/p120x120/1517673_625034940866869_659449896_n.jpg?oh=55de0db85e28884969e0254fba551690&oe=569F7F9E&__gda__=1456230291_4ac2e108bff593707a471e4a9915e6bc",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVmy45w0OMlVyMVPLx6dIMEeDV-eJCKJSpCViaAhadgyhPd8gBmjWEh9jb2WhN2CHkUlSxA3oN58QOMVWHD6YcW-oqfCTfKEBHoUnoe175bPvA",
                                    "name": "Victor Kavia",
                                    "first_name": "Victor",
                                    "last_name": "Kavia",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xfa1/v/t1.0-1/p120x120/10455696_729305487190517_4397049696838703714_n.jpg?oh=cca77f6cef48e33f567fcd39714d1793&oe=56D267A9",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVlcZniT0GSOl5nW3P32HqShp9B0UmYZrvB7ToL8MmRkZH6AFclpc727bGoBQDFyhMVAD2XNRzYdRjJGxyHAg_1EHcfKDjgYwFaRRes-gJ6pNw",
                                    "name": "Алексей Куликов",
                                    "first_name": "Алексей",
                                    "last_name": "Куликов",
                                    "picture": {
                                        "data": {
                                            "height": 86,
                                            "is_silhouette": false,
                                            "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xpa1/v/t1.0-1/c7.7.86.86/149969_156224364421550_232290_n.jpg?oh=c3f7a4f135e1e559756e90099492d0bc&oe=569EB3A8&__gda__=1451857058_115905bad77e1080a8e66284c63a0ef4",
                                            "width": 86
                                        }
                                    }
                                },
                                {
                                    "id": "AVnEVj41zyMoYG8f7nNCAgz6Tl0wHJq3VawB72NGspxGZkkSyeV7-XKNMJ0J_py0pIXO6IySiVj2yPujxRZMwapRvjnsTicEnoXu7JeRj5iNjA",
                                    "name": "Анна Солодовниченко",
                                    "first_name": "Анна",
                                    "last_name": "Солодовниченко",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xtf1/v/t1.0-1/p120x120/11750713_968860689850827_3196646843643770805_n.jpg?oh=9026a1d2b011d9911ebd875a12ca62a8&oe=568C7AA8",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVkGInUWvx6pSufaFrfNYwAuiRB30xjI0zyzDvvUkMD56lvhp9wU8L68g0jGGeCN24LiQ7_ndk9lzvfLvVP1ZZDv-NPCj76vMArsxvoO9dlDtg",
                                    "name": "Alexander Plassov",
                                    "first_name": "Alexander",
                                    "last_name": "Plassov",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xfa1/v/t1.0-1/p120x120/10985937_886985624686347_1589523223726527977_n.jpg?oh=fd6340d3f4c5e5d101f861db45c812e1&oe=56A37B24&__gda__=1452125357_d51f455783ccb94bc171d4cd7d772edf",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVmHCPEbws4YSGKSpGv8fLw1QgfjeXXjEF8N0ZFFRUWgMMLC6GPtQIdKdeKWzC4no2g84tAFywTBKKAUYvpgUmjqK7PLhvNjSQ1Tk7IOB52Jkg",
                                    "name": "Pavlo Grozian",
                                    "first_name": "Pavlo",
                                    "last_name": "Grozian",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xpf1/v/t1.0-1/p120x120/10945639_1000694849945566_5306271193263304947_n.jpg?oh=494d4b364399218b3cc46e6cc2a493b9&oe=56D168BB",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVmaVWhi1Dv_65L5c6LembIv9V2fYojOfkgOKRodvog75QRpmRgqZ91J1ee2Z1KJkZ7JJDH80Sesthho8ggaRBGNvpRz_xrqIYTw5SNiozDydQ",
                                    "name": "Сергей Колосюк",
                                    "first_name": "Сергей",
                                    "last_name": "Колосюк",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xfa1/v/t1.0-1/c0.20.120.120/p120x120/41096_106796929377035_6593927_n.jpg?oh=07bb47206abb8cb2ae15301864436f05&oe=56CEDA11",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVnR35KttvXtjcO1_rWkL762qgEX0yzmK2kVqvjaaGfiqMbnpwNQ9ZL3I6KqZUSnBXor1XWC0wiX0HkLxLp09YiYo6cXGsibq4MP0JjTS6SDaQ",
                                    "name": "Alexander Henning",
                                    "first_name": "Alexander",
                                    "last_name": "Henning",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xaf1/v/t1.0-1/c36.36.454.454/s120x120/198753_10151085130978201_1298191701_n.jpg?oh=82891511e596558856a9a80910bc104d&oe=5693BF9E",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVk5ZfdjhasLxOdAM1a12lybtdEBWTnzZW1bJbCDiwnncCXAvTcbxNrAcnnoFYzjzH2ISVSY0dFZZ28Z0p_d3IxPC0562Iz6r5aB5ALAqmmvpA",
                                    "name": "Alexey Babichev",
                                    "first_name": "Alexey",
                                    "last_name": "Babichev",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xfa1/v/t1.0-1/c66.66.828.828/s120x120/376576_527463570604357_1871074976_n.jpg?oh=cf265f56e8178fe79c730f96dd4a17d0&oe=56A1BEB9",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVlClLf9G21MNsjWnKa3YQZmcXfj30b9S_M7JDzB_T3DVyVzQ2Yadq8_CL-85vWlmlNSAEdwWi6nNp7S7DliduzgapDpveL0NK1RRacJEKnDlg",
                                    "name": "Сергей Куликов",
                                    "first_name": "Сергей",
                                    "last_name": "Куликов",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xaf1/v/t1.0-1/p120x120/10290700_636686573074079_6963421839191117045_n.jpg?oh=f48df2fcd2cc2570486cf78ab25a3172&oe=56A2C2A1",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVkZng1PebwbQeXhia3PnT1ZX7oVkWorl1f4Hz1NYwVhBHsFAUfRIHh5rsOrNGHtw8-7EgMa9qIPmTZ4LUGoEbF7ZyiNVcEQgRXUC36etUn-xg",
                                    "name": "Anna Mitiru",
                                    "first_name": "Anna",
                                    "last_name": "Mitiru",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xfa1/v/t1.0-1/c33.33.416.416/s120x120/426286_3241118474035_780957829_n.jpg?oh=85434a908b3259fc6c39e326a89cbff7&oe=56992772",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVnCN3y30qKOXUYebl4sZaR4qipKAj9vILoaB8XTk6TW2hFFHbdUtqP7p8fB5htU6Tgl3P1g_cBMeDjayKDd1MiRQk71TaogEZrL5PVdSIq1iQ",
                                    "name": "Артем Трегубов",
                                    "first_name": "Артем",
                                    "last_name": "Трегубов",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": true,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xfp1/v/t1.0-1/c35.0.120.120/p120x120/10354686_10150004552801856_220367501106153455_n.jpg?oh=2bb9e46b317b96203f0f244861172dc8&oe=56A1A78E",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVmSdXRKO-0LsntVf8HPlb1S7pT1dRQeE5vNsnW_EFtPMwh_6quSdXEnfl1_0Eqn1-o2nB4eE_1Syoy2xD1CsZtgW_tEQlSrsyJfNczi5y3iUw",
                                    "name": "Анастасия Шишкина",
                                    "first_name": "Анастасия",
                                    "last_name": "Шишкина",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-prn2/v/t1.0-1/c49.49.609.609/s120x120/180148_101793369901471_1748741_n.jpg?oh=1d476dcfb302ac112ddf6d8bea3b90e8&oe=5689C834",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVkM3_e-fjVeLLyqMJ7dT1x0FbYNkyuav7D25UIBjipUCJ5MhZMPwSmiHuHUg-_idhfOb2FCpulRv2I8Fs890gacwqiF59G7drJrCdlSFz5Gag",
                                    "name": "Владимир Куликов",
                                    "first_name": "Владимир",
                                    "last_name": "Куликов",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-ash2/v/t1.0-1/c33.33.414.414/s120x120/576833_136864783174836_580288732_n.jpg?oh=8e3a4b5d81afc8ed165c6c49efe90f65&oe=568799B0",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVnjUfFHiN-gTQQQgSKbxZiuFhNSDVsK9GBkzhQBPfbRzJRYTkTYf7xvEqVdyk-U7DZEiKI6NDeusBJCsOH3mLRC4SHVKRJa3VXIueElsEoBPQ",
                                    "name": "Catherine Kuzmenko",
                                    "first_name": "Catherine",
                                    "last_name": "Kuzmenko",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xpa1/v/t1.0-1/c0.25.290.290/s120x120/148708_138704096181867_3041820_n.jpg?oh=db2d9305ff047c877ff7c33baa4baab6&oe=568C43CA",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVmOop16fv3ydStxgFHaZHWJeuwupdVkVrWM9jfmegPX7gjj2ixi5GEmK9cv1pRgBJjPtjbP4RmTQaBmQQ6POTu3Xp3cXaXukxA8yIjoO5j2jg",
                                    "name": "Nik  Exalov",
                                    "first_name": "Nik",
                                    "last_name": "Exalov",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": true,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xfp1/v/t1.0-1/c35.0.120.120/p120x120/10354686_10150004552801856_220367501106153455_n.jpg?oh=2bb9e46b317b96203f0f244861172dc8&oe=56A1A78E",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVl8WLbon8CRZfd630vw4Erjbqpn1cTd1oIgIebF5CxkVlANkLBV5_oEMR1FVx59FcXDZ0Etrc2ldpLTf0qHaRb0GnYQby9W5aFNYv4pfyxyuw",
                                    "name": "Nicole Betyeva",
                                    "first_name": "Nicole",
                                    "last_name": "Betyeva",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xap1/v/t1.0-1/p120x120/1174517_1386516084958781_298019191_n.jpg?oh=fb39824d99ced3bd1a1b589002d93fd4&oe=569C2BC4",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVlxCUBT85XBmXIX-1as0IauuxwGVpyYDS2MzNZnLoap2WluPJetm4ew_JaTk-jDZTTrGUjLe0uaRg5kpVtHZEyFo7Tvm6_KY_qQlcUwnn7IIA",
                                    "name": "Катя Грозян",
                                    "first_name": "Катя",
                                    "last_name": "Грозян",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xap1/v/t1.0-1/c204.44.551.551/s120x120/970946_531489790237593_1037258390_n.jpg?oh=f57c16a6f4d03f435565f8bea0fce7a4&oe=569E2AB2",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVlRqkRU5lTUPUSzuo40HW7TsaewheMKk_uGzrVkpaZl5kyf4Gx60IKGLnqSsXEsyCYwEyL2srcKGa7Jf5mqvJYEj8CT2cW9x0JEAS66vlb-jw",
                                    "name": "Yulia  Suslova",
                                    "first_name": "Yulia",
                                    "last_name": "Suslova",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": true,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xpa1/v/t1.0-1/c35.0.120.120/p120x120/1379841_10150004552801901_469209496895221757_n.jpg?oh=089c972025c72b82c1bea4ba31b48887&oe=56998442",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVnxtnZOcVGo9_WzV_v1GV2rjeRQHuPyVuhELnmTgaIaf_lhDOpccXK2XHr0-bdnIj0IjP3JS_arwvDqpswN1Zt2pk5nc3F0PNKPXbIDeSwN7A",
                                    "name": "Михаил Сомов",
                                    "first_name": "Михаил",
                                    "last_name": "Сомов",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-frc3/v/t1.0-1/p120x120/10703756_862721337094063_5689384257612292210_n.jpg?oh=8047e4d862be94e8bc47132ee6ec5be4&oe=56CE9DC4",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVnaVpGwMuQzMPbTjfKG_Y0shX_GoIbo5EyeBPtLPkQdGVUR4GDD40A-azP_fKHdlfv_VsGaqFWcz1yALOJoPrQytNiXY2FWpvW864A-UHcZ9A",
                                    "name": "Lerika Mallayeva",
                                    "first_name": "Lerika",
                                    "last_name": "Mallayeva",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xpt1/v/t1.0-1/p120x120/10387692_10206800269901139_8060856685997721922_n.jpg?oh=7e06d03e6212812950de22ad0e2977b7&oe=569DFE11",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVlFy1AIyaw2gf9VSdk2EwWCMdLXcvHWPmycmpIKHomXRRySqwhyw8Eayspw-rLVG4tgyfccPdWWKWW7JpjqMgM6fDb46VlQMCADBaq5xYE9_Q",
                                    "name": "Artem Lysenko",
                                    "first_name": "Artem",
                                    "last_name": "Lysenko",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xpa1/v/t1.0-1/c26.0.120.120/p120x120/1239600_10200479154966874_1127220031_n.jpg?oh=4c1d5a3ec392cebfa62377bdf23c1e81&oe=56D2F3A1&__gda__=1452872169_ca058afd8ca6fd053c636209450b3f5f",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVmCU22EOAmVq3qrtY-_ZOdicdqx-LMJe9uBV4A1Hu6Z8a4Yu5vVtNv4OKnU26Xi-3SNZu5c52dU2Tyle_uJVI2GV9hSAWXjf-iA_ROZYfi1-Q",
                                    "name": "Daniel Ungooglable Danilenko",
                                    "first_name": "Daniel",
                                    "last_name": "Danilenko",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-prn2/v/t1.0-1/c20.0.120.120/p120x120/1654095_10203467495193972_1887903688_n.jpg?oh=c1849811e177675ce3e05e848d9445ee&oe=56CC9689",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVng163UvQ3sysJn1nZr_P-jZhYKR-gHXm37pcsb40dWn_auhsAynxJcXhazzAcYvHeXol3LKwG49yBXs1TbqqkreAgzmqLqugmBg6qSXJSnWw",
                                    "name": "Sergey Kurbatskiy",
                                    "first_name": "Sergey",
                                    "last_name": "Kurbatskiy",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xfp1/v/t1.0-1/p120x120/10885140_880005675365396_3825159748914536975_n.jpg?oh=4093c4cb4a70e8d071d2d6db81014ae5&oe=568AFD2F&__gda__=1456352068_7ccfd9db5905d67f3b512fec8e8cf525",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVl9NyTZL8i9Mo-LlCfMS0pVrTLNe0XRS29DrA_fqeCEDXcCVSXduzjRqjDNY2OsU73S9VTQ1StBVuCQdC3516mNaNwutcED6OcIR_tWoR0G2g",
                                    "name": "Natalia Shagova",
                                    "first_name": "Natalia",
                                    "last_name": "Shagova",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xpa1/v/t1.0-1/p120x120/1236678_917483834948405_5716366435414145247_n.jpg?oh=3034df002f3d23fa68dd2b354b5cede5&oe=569EA265&__gda__=1453492314_5bc06ed895d3cd7408b7963c78ab5abd",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVk9mdevdA6jydsfikbIwj69t51cqu_-4es2X2zIYvcCHyupJ7Q5Xyo6ndmtWhG_b72TTH1O96E8dHsJjMrSnaanmpzOKP4kmYCs8YAKL-KC4g",
                                    "name": "Anastasiya Kaidannik",
                                    "first_name": "Anastasiya",
                                    "last_name": "Kaidannik",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xtf1/v/t1.0-1/p120x120/1488310_10204116801894949_2498306254681602581_n.jpg?oh=60a3e5d12ddff65e8cbe915487576935&oe=5693BE06&__gda__=1456242896_163022a2405b5a180f21df657f646732",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVnZ0jm4uNaz3kK4bynmAvv_GYCO_3VaEnrWYuN0AqmMTI-M8CzBjxkX5Zu2DFAxKaZzUwPjX2BcwnTRImOel8BDCE2-g6RHVsGuomG8IUBv7A",
                                    "name": "Kseniya Akimova",
                                    "first_name": "Kseniya",
                                    "last_name": "Akimova",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xtf1/v/t1.0-1/p120x120/11822798_10155862698140511_7274794770273283809_n.jpg?oh=b67da87ec4553c30509ffc29597fe7a1&oe=56D13976",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVn7sEXFQW5v5rCe5FHK3ZmauKSbgIWtWkgQkSYE9CGcsEBl4dOoZM7wdgcS1dPV8kSiyIOsQUThWUVIKY7KYVm8oj9wzOFXkExYpTxfPVSd_Q",
                                    "name": "Andrey  Pohamovich",
                                    "first_name": "Andrey",
                                    "last_name": "Pohamovich",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xfp1/v/t1.0-1/c47.0.120.120/p120x120/1238102_524672234298313_508399814_n.jpg?oh=cdea896d8e5f76133f75ff3dbbeb5667&oe=56A0BD9C",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVlWCBGUtBVvW5eDBPjz35c7pS9cAZ1am9YLbAqxt_QL32W7yxUusKLxLfPafP5-T-xJr2Y3CFfclb8H_dKXn1x9CGfEsgIYKKLG2otCTNke4Q",
                                    "name": "Evgeniy Pavlenko",
                                    "first_name": "Evgeniy",
                                    "last_name": "Pavlenko",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xfa1/v/t1.0-1/c0.46.120.120/p120x120/1546344_657561900982795_434288503_n.jpg?oh=b120307fece37bf55b010ba59e942e2a&oe=56D28CC2",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVmiCebC_B2Ghn3DdFdJ__GLDdjgi_6LKuWIf5Qu2kguElmFuYo2g-I87rXfueQHY2tD3YrpjqQHW3SAFmvvj0tci34HsfdHqOyGkuMis-C3-w",
                                    "name": "Regina Vishnevskaya",
                                    "first_name": "Regina",
                                    "last_name": "Vishnevskaya",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xpt1/v/t1.0-1/p120x120/12036377_10153675659437235_3872147970523431379_n.jpg?oh=5e5677b332696a29313d2ed1e64f3875&oe=5698CF6F",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVlJ1V9u6HxMWd6QI9TeqZ0roqbv2ieeX6uhNh1RzLly1OeWiHy7K9NOTctkJfi7rBMGC_sy6lKRgG20eP7pelfVXp8vA8Pf1fKsBdyUrZypzQ",
                                    "name": "Mary  Andruseva",
                                    "first_name": "Mary",
                                    "last_name": "Andruseva",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xpt1/v/t1.0-1/p120x120/12003979_1647983085443774_7265919788066355515_n.jpg?oh=8fed1be5fb63b4602394e908b3c844f4&oe=56962570",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVltOEOG-nDZ-Yo4T3b9YhBT8LoQK_jCEa_glrn2vMK7NBiZT0jDreU-xeNjM8x3ojva8vBGMvac0BX9fy5Y6VPICvtmCjEgkd7JS3HpkaP12Q",
                                    "name": "Alisa Tolchynska",
                                    "first_name": "Alisa",
                                    "last_name": "Tolchynska",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-prn2/v/t1.0-1/p120x120/1901267_729163073783257_1050584649_n.jpg?oh=a5bd0ff934914dfbadf05443afc8eb91&oe=56A431C3",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVl_tKMRw65iaLY9RAF772POu37avCsI7GHd-600LpEeqWGQNvRlnJJJr0Ff2TA2z9XpVZdBgGE4gR3s2-Hr8q368ONjYXBbNgkBY40rkseNKA",
                                    "name": "Kateryna Moskaleva",
                                    "first_name": "Kateryna",
                                    "last_name": "Moskaleva",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xft1/v/t1.0-1/p120x120/12003998_10208045830170559_7762202115805289826_n.jpg?oh=1aab33a4587d99561297c5ab96b677ff&oe=56A3DF63&__gda__=1451953486_2cb1fe7c95d24f99bce4083456d0c7fb",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVlAfetu9GLzaMr6am4S3xOF2Dcez2SedP0rCr9UilXZpqLLt-pz4JmkNuEvK6O2m7tWwgs0JlvqAjn7VlsrQoOErhP-Aa7r8GEBkav6N6sEfA",
                                    "name": "Yulia Sobolevskaya",
                                    "first_name": "Yulia",
                                    "last_name": "Sobolevskaya",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xpf1/v/t1.0-1/c0.0.120.120/p120x120/1601395_10152691974645762_7556746696522463987_n.jpg?oh=0699527ceac509f214c61b9a86c5bb19&oe=56D0B97E",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVl8vuqDPHK1gBHLwylJJpD5IDeOmcTg6tBXhIM_4IrM8DH-XC6L9ncVP_LUOQSod4Jcvoh0mo1uivtUSitXGoNi_aGfJrYO7NF199i1twT3lA",
                                    "name": "Vitaliy Khit",
                                    "first_name": "Vitaliy",
                                    "last_name": "Khit",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xpf1/v/t1.0-1/p120x120/11695840_10204716918338699_562137664447300570_n.jpg?oh=f3eaf73eef0e9b68b4dbe107edf688fd&oe=5696AE17",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVkZznekCOoHJv-bIzkm23zv8A1_HOJv5ghPIAB8T7rJ8Qfk4xfV0e2S8xZcEDyKn0KcSC-mnREqyyV0VHC70jTNIXPS7lJfY0tmUk_rhV8tPA",
                                    "name": "Yuliya  Keskin",
                                    "first_name": "Yuliya",
                                    "last_name": "Keskin",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xft1/v/t1.0-1/p120x120/11924758_753753168070252_7998372666858392314_n.jpg?oh=27e610abb613020ac20a72c7ac1d87f3&oe=5693F838&__gda__=1452790897_b644c1285c0a7b9a6ed084961a2ef047",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVkscxIO0-4chktJ7ZKH0WZzXL8BvhuToNlwpcfUaAe9KoQ8tikeLSoBYGME1IRqYvhc8g6HBQOnAvtRACC_YYYBnXsDusZGu7_S0OAZDbcqJg",
                                    "name": "Федор Ходак",
                                    "first_name": "Федор",
                                    "last_name": "Ходак",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xpf1/v/t1.0-1/p120x120/11425224_839427426106259_1129526908480727665_n.jpg?oh=7e7bad97b32db6a7ab31de04ab2ff815&oe=56949E16",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVnJrwApIHDCsOgJDDEPykcHHbenc73MWrwFC-fGAdyJaunntNlNk8D5Fxu18zXRyIlA3tisJJ21tCv06f-9o6GSpGCRq-3xRP32X4VYYIWjSw",
                                    "name": "Dmitry  Kolokhin",
                                    "first_name": "Dmitry",
                                    "last_name": "Kolokhin",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xaf1/v/t1.0-1/c44.44.552.552/s120x120/582611_319064848195442_657485323_n.jpg?oh=18d3ce067c5f5bb63c23601c4c9162a4&oe=56CCD189",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVk9HSZaHaxod8T54mux14_ZLJyzlqYgEtSA6Y6VkWlxqxuHzuaGI2P13wSovLdRHNCWh3FKlhoIAKN_ZeUasuGmQJG5F2cTp9STFZCFI5AdLQ",
                                    "name": "Konchunas Julian",
                                    "first_name": "Julian",
                                    "last_name": "Konchunas",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xap1/v/t1.0-1/p120x120/10952233_847771451930875_7150772543966402211_n.jpg?oh=7bcc04ce6ad25e7ea776d2d46c9c0845&oe=56CE4319",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVlMpFSpSmRxMx9zYZl_hzYn1opITInEUGs55mPZdWl3pyRg8iw6DZVl-1tATF1UW6_onWTgrz5haqvmCjA0ZB33lfnoAZ4_V6y5xLwwRsGzhQ",
                                    "name": "Andrey Tonkonog",
                                    "first_name": "Andrey",
                                    "last_name": "Tonkonog",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": true,
                                            "url": "https://scontent.xx.fbcdn.net/hprofile-xfp1/v/t1.0-1/c35.0.120.120/p120x120/10354686_10150004552801856_220367501106153455_n.jpg?oh=2bb9e46b317b96203f0f244861172dc8&oe=56A1A78E",
                                            "width": 120
                                        }
                                    }
                                },
                                {
                                    "id": "AVlpaESWmsaCyG-26TiOGCLvye7iaJ7KSbXntKnHzk4gEM_2R3uArvA1PvBd1OjqAoXs6-AbfC8KLfM8_V5tGKkuZGLPSwxuy65XAIoe2XWmRw",
                                    "name": "Catherine Kapustina",
                                    "first_name": "Catherine",
                                    "last_name": "Kapustina",
                                    "picture": {
                                        "data": {
                                            "height": 120,
                                            "is_silhouette": false,
                                            "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xpf1/v/t1.0-1/p120x120/11057740_10152712512624229_4202492544064793077_n.jpg?oh=da47675b2aee47bf61e9d11d269f0a06&oe=569ED0DD&__gda__=1456575141_9ae6a9392ba5252e1cf91e1a3579cf04",
                                            "width": 120
                                        }
                                    }
                                }
                            ],
                            "paging": {
                                "cursors": {
                                    "before": "QVZAtT0pJbWdrSFRoZAWZA1eWlWVEo2WTFFQ3cxNG5CVHFSNEdLZAW05anlVMW9uMjdLSHJvSE14REZA6eGhPUUk3RWppXzFKTTh5aDUtQ0NmdVBZARlZA4TnJMdTJKbHRjTGQ4TEFzSGlyZAWEzNWtrblEZD",
                                    "after": "QVZArSUk5SGFQbUxGa2U4WURJOHlIdzE0TUNmM0FTMzFsZAi1HYTR5WmpHd3NwT2h3TnJfWHY2N0tsTDkwR3hpM20tcEswdWE1dE5mbGtjWk1ndVZAPNURzMy1HWUdPX0hKR2N1RjF2OVVsdVBkSWcZD"
                                }
                            }
                        });
                    }
                    else if (method == 'me/permissions') {
                        var mep1 = {
                            "data": []
                        };
                        var mep2 = {
                            "data": [
                                {
                                    "permission": "user_managed_groups",
                                    "status": "granted"
                                },
                                {
                                    "permission": "user_friends",
                                    "status": "granted"
                                },
                                {
                                    "permission": "email",
                                    "status": "granted"
                                },
                                {
                                    "permission": "public_profile",
                                    "status": "granted"
                                },
                                {
                                    "permission": "user_groups",
                                    "status": "granted"
                                },
                            ]
                        };
                        var mep = null;
                        if (this.pcount == 1)
                            mep = mep1;
                        if (this.pcount >= 2)
                            mep = mep2;
                        this.pcount++;
                        callbackTimed.bind(this)(mep);
                    }
                    else if (method.indexOf('/permissions') >= 0) {
                        callbackTimed.bind(this)({
                            "data": [
                                {
                                    "permission": "user_friends",
                                    "status": "live"
                                },
                                {
                                    "permission": "email",
                                    "status": "live"
                                },
                                {
                                    "permission": "user_groups",
                                    "status": "live"
                                },
                                {
                                    "permission": "ads_management",
                                    "status": "live"
                                },
                                {
                                    "permission": "ads_read",
                                    "status": "live"
                                },
                                {
                                    "permission": "public_profile",
                                    "status": "live"
                                }
                            ]
                        });
                    }
                    else if (method == 'me/apprequests') {
                        var len = 1 + int(Math.random() * 5);
                        while (this.requests.length < len) {
                            if (Math.random() < .33) {
                                this.requests[this.requests.length] = {
                                    "application": {
                                        "category": "Games",
                                        "link": "https://apps.facebook.com/time_gap_mystery/",
                                        "name": "Time Gap: Hidden Object Mystery",
                                        "namespace": "time_gap_mystery",
                                        "id": "1679748755572563"
                                    },
                                    "created_time": "2015-09-17T12:18:04+0000",
                                    "data": "gift,bonus_bomb,10152847199458069",
                                    "message": "Tatyana Garat: Tiens un cadeau de ma part ! Vas-tu m’offrir quelquechose en retour ?",
                                    "to": {
                                        "name": "Petr Kulikov",
                                        "id": "722977651119917"
                                    },
                                    "id": this.requests.length.toString()
                                };
                            }
                            else if (Math.random() < .66) {
                                this.requests[this.requests.length] = {
                                    "application": {
                                        "category": "Games",
                                        "link": "https://apps.facebook.com/time_gap_mystery/",
                                        "name": "Time Gap: Hidden Object Mystery",
                                        "namespace": "time_gap_mystery",
                                        "id": "1679748755572563"
                                    },
                                    "created_time": "2015-09-17T12:18:04+0000",
                                    "data": "wish,bonus_clear,726109664104302",
                                    "message": "I need your help! Please send me Clean Booster!",
                                    "to": {
                                        "name": "Petr Kulikov",
                                        "id": "722977651119917"
                                    },
                                    "id": this.requests.length.toString()
                                };
                            }
                            else {
                                this.requests[this.requests.length] = {
                                    "application": {
                                        "category": "Games",
                                        "link": "https://apps.facebook.com/time_gap_mystery/",
                                        "name": "Time Gap: Hidden Object Mystery",
                                        "namespace": "time_gap_mystery",
                                        "id": "1679748755572563"
                                    },
                                    "created_time": "2015-09-17T12:18:04+0000",
                                    "data": "wish,bonus_bomb,10152847199458069",
                                    "message": "I need your help! Please send me a bomb!",
                                    "to": {
                                        "name": "Petr Kulikov",
                                        "id": "722977651119917"
                                    },
                                    "id": this.requests.length.toString()
                                };
                            }
                        }
                        callbackTimed.bind(this)({
                            "data": this.requests,
                            "paging": {
                                "cursors": {
                                    "before": "MTcwMzcxMjM5NjUxNDIwMzoxMDAwMDIyMzA2NjIxMTYZD",
                                    "after": "MTcwMzcxMjM5NjUxNDIwMzoxMDAwMDIyMzA2NjIxMTYZD"
                                }
                            }
                        });
                    }
                    else if (method == 'me/scores') {
                        this.me_score = parseInt(params['score']);
                        callbackTimed.bind(this)({
                            "success": true
                        });
                    }
                    else if (method == 'me/groups') {
                        callbackTimed.bind(this)({
                            "data": [
                                {
                                    "name": "Time Gap: Hidden Object Mystery Group",
                                    "privacy": "OPEN",
                                    "id": "830132280408032",
                                    "administrator": false,
                                    "bookmark_order": 4,
                                    "unread": 2
                                },
                                {
                                    "name": "Zap-service",
                                    "privacy": "OPEN",
                                    "id": "685784421515521",
                                    "administrator": false,
                                    "bookmark_order": 1,
                                    "unread": 0
                                },
                                {
                                    "name": "Facebook Developer Community",
                                    "privacy": "CLOSED",
                                    "id": "146797922030397",
                                    "administrator": false,
                                    "bookmark_order": 3,
                                    "unread": 25
                                },
                                {
                                    "name": "Stage3D",
                                    "privacy": "OPEN",
                                    "id": "351426078255107",
                                    "administrator": false,
                                    "bookmark_order": 2,
                                    "unread": 25
                                }
                            ],
                            "paging": {
                                "cursors": {
                                    "before": "ODMwMTMyMjgwNDA4MDMy",
                                    "after": "MzUxNDI2MDc4MjU1MTA3"
                                }
                            }
                        });
                    }
                    else if (method == 'me/og.likes') {
                        callbackTimed.bind(this)({
                            "data": [
                                {
                                    "start_time": "2015-08-18T08:33:27+0000",
                                    "type": "og.likes",
                                    "application": {
                                        "category": "Games",
                                        "link": "https://apps.facebook.com/time_gap_mystery/",
                                        "name": "Time Gap: Hidden Object Mystery",
                                        "namespace": "time_gap_mystery",
                                        "id": "1679748755572563"
                                    },
                                    "comments": {
                                        "data": [],
                                        "can_comment": true,
                                        "comment_order": "chronological",
                                        "count": 0
                                    },
                                    "from": {
                                        "name": "Petr Kulikov",
                                        "id": "722977651119917"
                                    },
                                    "likes": {
                                        "data": [],
                                        "can_like": true,
                                        "count": 0,
                                        "user_likes": false
                                    },
                                    "no_feed_story": false,
                                    "publish_time": "2015-08-18T08:33:27+0000",
                                    "data": {
                                        "object": {
                                            "id": "743457655733928",
                                            "title": "Time Gap : Objets Cachés",
                                            "type": "game",
                                            "url": "http://apps.facebook.com/time_gap_mystery/"
                                        }
                                    },
                                    "id": "880675818683432"
                                }
                            ],
                            "paging": {
                                "cursors": {
                                    "before": "ODgwNjc1ODE4NjgzNDMy",
                                    "after": "ODgwNjc1ODE4NjgzNDMy"
                                }
                            }
                        });
                    }
                    else if (method == 'me/achievements' && requestMethod == 'GET') {
                        callbackTimed.bind(this)({
                            "data": [
                                {
                                    "application": {
                                        "id": "1679748755572563"
                                    },
                                    "data": {
                                        "achievement": {
                                            "url": "xxx"
                                        }
                                    }
                                }
                            ]
                        });
                    }
                    else if (method == 'me/achievements' && requestMethod == 'POST') {
                        callbackTimed.bind(this)({});
                    }
                    else if (method == 'me/games.celebrate') {
                        callbackTimed.bind(this)({});
                    }
                    else if (method.indexOf('/apprequests') >= 0 && requestMethod == 'POST') {
                        callbackTimed.bind(this)({ to: ['824991587521695', '852420838110583'] });
                    }
                    function callbackTimed(data) {
                        graph.setTimeout(callback, 1, data);
                    }
                };
                return FacebookSimulate;
            }(graph.Facebook));
            graph.FacebookSimulate = FacebookSimulate;
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            var utils;
            (function (utils) {
                utils.ByteArray = flash.utils.ByteArray;
                utils.Endian = flash.utils.Endian;
                var PostRequest = (function () {
                    function PostRequest() {
                        this.boundary = '-----';
                        this.createPostData();
                    }
                    PostRequest.prototype.createPostData = function () {
                        this.postData = new utils.ByteArray();
                        this.postData.endian = utils.Endian.BIG_ENDIAN;
                    };
                    PostRequest.prototype.writePostData = function (name, value) {
                        var bytes;
                        this.writeBoundary();
                        this.writeLineBreak();
                        bytes = 'Content-Disposition: form-data; name="' + name + '"';
                        var l = bytes.length;
                        for (var i = 0; i < l; i++) {
                            this.postData.writeByte(bytes.charCodeAt(i));
                        }
                        this.writeLineBreak();
                        this.writeLineBreak();
                        this.postData.writeUTFBytes(value);
                        this.writeLineBreak();
                    };
                    PostRequest.prototype.writeFileData = function (filename, fileData, contentType) {
                        var bytes;
                        var l = 0;
                        var i = 0;
                        this.writeBoundary();
                        this.writeLineBreak();
                        bytes = 'Content-Disposition: form-data; name="' + filename + '"; filename="' + filename + '";';
                        l = bytes.length;
                        for (i = 0; i < l; i++) {
                            this.postData.writeByte(bytes.charCodeAt(i));
                        }
                        this.postData.writeUTFBytes(filename);
                        this.writeQuotationMark();
                        this.writeLineBreak();
                        bytes = contentType || "application/octet-stream";
                        l = bytes.length;
                        for (i = 0; i < l; i++) {
                            this.postData.writeByte(bytes.charCodeAt(i));
                        }
                        this.writeLineBreak();
                        this.writeLineBreak();
                        fileData.position = 0;
                        this.postData.writeBytes(fileData, 0, fileData.length);
                        this.writeLineBreak();
                    };
                    PostRequest.prototype.getPostData = function () {
                        this.postData.position = 0;
                        return this.postData;
                    };
                    PostRequest.prototype.close = function () {
                        this.writeBoundary();
                        this.writeDoubleDash();
                    };
                    PostRequest.prototype.writeLineBreak = function () {
                        this.postData.writeShort(0x0d0a);
                    };
                    PostRequest.prototype.writeQuotationMark = function () {
                        this.postData.writeByte(0x22);
                    };
                    PostRequest.prototype.writeDoubleDash = function () {
                        this.postData.writeShort(0x2d2d);
                    };
                    PostRequest.prototype.writeBoundary = function () {
                        this.writeDoubleDash();
                        var l = this.boundary.length;
                        for (var i = 0; i < l; i++) {
                            this.postData.writeByte(this.boundary.charCodeAt(i));
                        }
                    };
                    return PostRequest;
                }());
                utils.PostRequest = PostRequest;
            })(utils = graph.utils || (graph.utils = {}));
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var deng;
(function (deng) {
    var fzip;
    (function (fzip) {
        fzip.Event = flash.events.Event;
        var FZipEvent = (function (_super) {
            __extends(FZipEvent, _super);
            function FZipEvent(type, file, bubbles, cancelable) {
                if (file === void 0) { file = null; }
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                var _this = _super.call(this, type, bubbles, cancelable) || this;
                _this.file = file;
                return _this;
            }
            FZipEvent.prototype.clone = function () {
                return new FZipEvent(this.type, this.file, this.bubbles, this.cancelable);
            };
            FZipEvent.prototype.toString = function () {
                return "[FZipEvent type=\"" + this.type + "\" filename=\"" + this.file.filename + "\" bubbles=" + this.bubbles + " cancelable=" + this.cancelable + " eventPhase=" + this.eventPhase + "]";
            };
            FZipEvent.FILE_LOADED = "fileLoaded";
            return FZipEvent;
        }(fzip.Event));
        fzip.FZipEvent = FZipEvent;
    })(fzip = deng.fzip || (deng.fzip = {}));
})(deng || (deng = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.GLCanvasRenderingContext2D = flash.__native.GLCanvasRenderingContext2D;
        display.ColorTransform = flash.geom.ColorTransform;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.Matrix = flash.geom.Matrix;
        display.Rectangle = flash.geom.Rectangle;
        var Sprite = (function (_super) {
            __extends(Sprite, _super);
            function Sprite() {
                var _this = _super.call(this) || this;
                _this.graphics = new display.Graphics(_this);
                return _this;
            }
            Object.defineProperty(Sprite.prototype, "buttonMode", {
                get: function () { return false; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Sprite.prototype.startDrag = function (param1, param2) {
                if (param1 === void 0) { param1 = false; }
                if (param2 === void 0) { param2 = null; }
            };
            Sprite.prototype.stopDrag = function () { };
            Sprite.prototype.startTouchDrag = function (param1, param2, param3) {
                if (param2 === void 0) { param2 = false; }
                if (param3 === void 0) { param3 = null; }
            };
            Sprite.prototype.stopTouchDrag = function (param1) { };
            Object.defineProperty(Sprite.prototype, "dropTarget", {
                get: function () { return null; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Sprite.prototype, "hitArea", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Sprite.prototype, "useHandCursor", {
                get: function () { return false; },
                set: function (param1) {
                },
                enumerable: true,
                configurable: true
            });
            Sprite.prototype.__getRect = function () {
                return this.graphics.bound;
            };
            Sprite.prototype.__update = function (ctx) {
                if (this.visible) {
                    this.__dispatchEnterFrame();
                    var m = this.transform.concatenatedMatrix;
                    if (this.mScrollRect)
                        this.__beginClipRect(ctx, m);
                    this.graphics.draw(ctx, m, this.blendMode, this.transform.concatenatedColorTransform);
                    _super.prototype.__update.call(this, ctx);
                    if (this.mScrollRect)
                        this.__endClipRect(ctx);
                }
            };
            Sprite.prototype.__doMouse = function (e) {
                if (this.mouseEnabled && this.visible) {
                    var obj = _super.prototype.__doMouse.call(this, e);
                    if (obj) {
                        return obj;
                    }
                    if (this.hitTestPoint(this.stage.mouseX, this.stage.mouseY)) {
                        return this;
                    }
                }
                return null;
            };
            Sprite.prototype.getRect = function (targetSpace, resultRect) {
                if (resultRect === void 0) { resultRect = null; }
                resultRect = _super.prototype.getRect.call(this, targetSpace, resultRect);
                if (this.graphics.bound) {
                    this.__updateVertexData();
                    resultRect = resultRect.union(this.displayObjectGetRect(targetSpace));
                }
                return resultRect;
            };
            return Sprite;
        }(display.DisplayObjectContainer));
        display.Sprite = Sprite;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        var MovieClip = (function (_super) {
            __extends(MovieClip, _super);
            function MovieClip() {
                var _this = _super.call(this) || this;
                _this.enabled = false;
                _this.trackAsMenu = false;
                return _this;
            }
            Object.defineProperty(MovieClip.prototype, "currentFrame", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MovieClip.prototype, "currentFrameLabel", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MovieClip.prototype, "currentLabel", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MovieClip.prototype, "currentLabels", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MovieClip.prototype, "currentScene", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MovieClip.prototype, "framesLoaded", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MovieClip.prototype, "isPlaying", {
                get: function () {
                    return false;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MovieClip.prototype, "scenes", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MovieClip.prototype, "totalFrames", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            MovieClip.prototype.gotoAndPlay = function (frame, scene) {
                if (scene === void 0) { scene = null; }
            };
            MovieClip.prototype.gotoAndStop = function (frame, scene) {
                if (scene === void 0) { scene = null; }
            };
            MovieClip.prototype.nextFrame = function () {
            };
            MovieClip.prototype.nextScene = function () {
            };
            MovieClip.prototype.play = function () {
            };
            MovieClip.prototype.prevFrame = function () {
            };
            MovieClip.prototype.prevScene = function () {
            };
            MovieClip.prototype.stop = function () {
            };
            return MovieClip;
        }(display.Sprite));
        display.MovieClip = MovieClip;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        events.InteractiveObject = flash.display.InteractiveObject;
        var ContextMenuEvent = (function (_super) {
            __extends(ContextMenuEvent, _super);
            function ContextMenuEvent(type, bubbles, cancelable, mouseTarget, contextMenuOwner) {
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                if (mouseTarget === void 0) { mouseTarget = null; }
                if (contextMenuOwner === void 0) { contextMenuOwner = null; }
                var _this = _super.call(this, type, bubbles, cancelable) || this;
                _this.isMouseTargetInaccessible = false;
                _this.mouseTarget = mouseTarget;
                _this.contextMenuOwner = contextMenuOwner;
                return _this;
            }
            ContextMenuEvent.prototype.clone = function () {
                return new ContextMenuEvent(this.type, this.bubbles, this.cancelable, this.mouseTarget, this.contextMenuOwner);
            };
            ContextMenuEvent.prototype.toString = function () {
                return this.formatToString("ContextMenuEvent", "type", "bubbles", "cancelable", "eventPhase", "mouseTarget", "contextMenuOwner");
            };
            ContextMenuEvent.MENU_ITEM_SELECT = "menuItemSelect";
            ContextMenuEvent.MENU_SELECT = "menuSelect";
            return ContextMenuEvent;
        }(events.Event));
        events.ContextMenuEvent = ContextMenuEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var DataEvent = (function (_super) {
            __extends(DataEvent, _super);
            function DataEvent(type, bubbles, cancelable, data) {
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                if (data === void 0) { data = ""; }
                var _this = _super.call(this, type, bubbles, cancelable) || this;
                _this.data = data;
                return _this;
            }
            DataEvent.prototype.clone = function () {
                return new DataEvent(this.type, this.bubbles, this.cancelable, this.data);
            };
            DataEvent.prototype.toString = function () {
                return this.formatToString("DataEvent", "type", "bubbles", "cancelable", "eventPhase", "data");
            };
            DataEvent.DATA = "data";
            DataEvent.UPLOAD_COMPLETE_DATA = "uploadCompleteData";
            return DataEvent;
        }(events.TextEvent));
        events.DataEvent = DataEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var ErrorEvent = (function (_super) {
            __extends(ErrorEvent, _super);
            function ErrorEvent(type, bubbles, cancelable, text, id) {
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                if (text === void 0) { text = ""; }
                if (id === void 0) { id = 0; }
                var _this = _super.call(this, type, bubbles, cancelable, text) || this;
                _this.m_errorID = 0;
                _this.m_errorID = id;
                return _this;
            }
            Object.defineProperty(ErrorEvent.prototype, "errorID", {
                get: function () {
                    return this.m_errorID;
                },
                enumerable: true,
                configurable: true
            });
            ErrorEvent.prototype.clone = function () {
                return new ErrorEvent(this.type, this.bubbles, this.cancelable, this.text, this.m_errorID);
            };
            ErrorEvent.prototype.toString = function () {
                return this.formatToString("ErrorEvent", "type", "bubbles", "cancelable", "eventPhase", "text", "errorID");
            };
            ErrorEvent.ERROR = "error";
            return ErrorEvent;
        }(events.TextEvent));
        events.ErrorEvent = ErrorEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        events.InteractiveObject = flash.display.InteractiveObject;
        var FocusEvent = (function (_super) {
            __extends(FocusEvent, _super);
            function FocusEvent(type, bubbles, cancelable, relatedObject, shiftKey, keyCode, direction) {
                if (bubbles === void 0) { bubbles = true; }
                if (cancelable === void 0) { cancelable = false; }
                if (relatedObject === void 0) { relatedObject = null; }
                if (shiftKey === void 0) { shiftKey = false; }
                if (keyCode === void 0) { keyCode = 0; }
                if (direction === void 0) { direction = "none"; }
                var _this = _super.call(this, type, bubbles, cancelable) || this;
                _this.isRelatedObjectInaccessible = false;
                _this.keyCode = 0;
                _this.shiftKey = false;
                _this.relatedObject = relatedObject;
                _this.shiftKey = shiftKey;
                _this.keyCode = keyCode;
                _this.direction = direction;
                return _this;
            }
            FocusEvent.prototype.clone = function () {
                return new FocusEvent(this.type, this.bubbles, this.cancelable, this.relatedObject, this.shiftKey, this.keyCode, this.direction);
            };
            FocusEvent.prototype.toString = function () {
                return this.formatToString("FocusEvent", "type", "bubbles", "cancelable", "eventPhase", "relatedObject", "shiftKey", "keyCode", "direction");
            };
            FocusEvent.FOCUS_IN = "focusIn";
            FocusEvent.FOCUS_OUT = "focusOut";
            FocusEvent.KEY_FOCUS_CHANGE = "keyFocusChange";
            FocusEvent.MOUSE_FOCUS_CHANGE = "mouseFocusChange";
            return FocusEvent;
        }(events.Event));
        events.FocusEvent = FocusEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var IOErrorEvent = (function (_super) {
            __extends(IOErrorEvent, _super);
            function IOErrorEvent(type, bubbles, cancelable, text, id) {
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                if (text === void 0) { text = ""; }
                if (id === void 0) { id = 0; }
                return _super.call(this, type, bubbles, cancelable, text, id) || this;
            }
            IOErrorEvent.prototype.clone = function () {
                return new IOErrorEvent(this.type, this.bubbles, this.cancelable, this.text, this.errorID);
            };
            IOErrorEvent.prototype.toString = function () {
                return this.formatToString("IOErrorEvent", "type", "bubbles", "cancelable", "eventPhase", "text");
            };
            IOErrorEvent.IO_ERROR = "ioError";
            IOErrorEvent.NETWORK_ERROR = "networkError";
            IOErrorEvent.DISK_ERROR = "diskError";
            IOErrorEvent.VERIFY_ERROR = "verifyError";
            return IOErrorEvent;
        }(events.ErrorEvent));
        events.IOErrorEvent = IOErrorEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        events.ByteArray = flash.utils.ByteArray;
        var SampleDataEvent = (function (_super) {
            __extends(SampleDataEvent, _super);
            function SampleDataEvent(type, bubbles, cancelable, position, data) {
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                if (position === void 0) { position = 0; }
                if (data === void 0) { data = null; }
                var _this = _super.call(this, type, bubbles, cancelable) || this;
                _this.position = position;
                _this.data = data;
                return _this;
            }
            SampleDataEvent.prototype.clone = function () {
                return new SampleDataEvent(this.type, this.bubbles, this.cancelable, this.position, this.data);
            };
            SampleDataEvent.prototype.toString = function () {
                return this.formatToString("SampleDataEvent", "type", "bubbles", "cancelable", "eventPhase", "position", "data");
            };
            SampleDataEvent.SAMPLE_DATA = "sampleData";
            return SampleDataEvent;
        }(events.Event));
        events.SampleDataEvent = SampleDataEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        var SecurityErrorEvent = (function (_super) {
            __extends(SecurityErrorEvent, _super);
            function SecurityErrorEvent(type, bubbles, cancelable, text, id) {
                if (bubbles === void 0) { bubbles = false; }
                if (cancelable === void 0) { cancelable = false; }
                if (text === void 0) { text = ""; }
                if (id === void 0) { id = 0; }
                return _super.call(this, type, bubbles, cancelable, text, id) || this;
            }
            SecurityErrorEvent.prototype.clone = function () {
                return new SecurityErrorEvent(this.type, this.bubbles, this.cancelable, this.text, this.errorID);
            };
            SecurityErrorEvent.prototype.toString = function () {
                return this.formatToString("SecurityErrorEvent", "type", "bubbles", "cancelable", "eventPhase", "text");
            };
            SecurityErrorEvent.SECURITY_ERROR = "securityError";
            return SecurityErrorEvent;
        }(events.ErrorEvent));
        events.SecurityErrorEvent = SecurityErrorEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var geom;
    (function (geom) {
        var Matrix = (function (_super) {
            __extends(Matrix, _super);
            function Matrix(a, b, c, d, tx, ty) {
                var _newTarget = this.constructor;
                if (a === void 0) { a = 1; }
                if (b === void 0) { b = 0; }
                if (c === void 0) { c = 0; }
                if (d === void 0) { d = 1; }
                if (tx === void 0) { tx = 0; }
                if (ty === void 0) { ty = 0; }
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.a = a;
                _this.b = b;
                _this.c = c;
                _this.d = d;
                _this.tx = tx;
                _this.ty = ty;
                return _this;
            }
            Matrix.prototype.clone = function () {
                return new Matrix(this.a, this.b, this.c, this.d, this.tx, this.ty);
            };
            Matrix.prototype.concat = function (m) {
                this.t0 = this.a;
                this.a = this.a * m.a + this.b * m.c;
                this.b = this.t0 * m.b + this.b * m.d;
                this.t0 = this.c;
                this.c = this.c * m.a + this.d * m.c;
                this.d = this.t0 * m.b + this.d * m.d;
                this.t0 = this.tx;
                this.tx = this.tx * m.a + this.ty * m.c + m.tx;
                this.ty = this.t0 * m.b + this.ty * m.d + m.ty;
            };
            Matrix.prototype.invert = function () {
                if (this.b === 0 && this.c === 0) {
                    this.a = 1 / this.a;
                    this.d = 1 / this.d;
                    this.tx *= -this.a;
                    this.ty *= -this.d;
                }
                else {
                    var det = this.a * this.d - this.b * this.c;
                    if (det === 0) {
                        this.a = this.d = 1;
                        this.b = this.c = 0;
                        this.tx = this.ty = 0;
                    }
                    else {
                        det = 1 / det;
                        this.t0 = this.a;
                        this.t1 = this.b;
                        this.t2 = this.c;
                        this.t3 = this.d;
                        this.a = this.t3 * det;
                        this.b = -this.t1 * det;
                        this.c = -this.t2 * det;
                        this.d = this.t0 * det;
                        this.t0 = -(this.b * this.tx + this.d * this.ty);
                        this.tx = -(this.a * this.tx + this.c * this.ty);
                        this.ty = this.t0;
                    }
                }
            };
            Matrix.prototype.identity = function () {
                this.a = this.d = 1;
                this.b = this.c = 0;
                this.tx = this.ty = 0;
            };
            Matrix.prototype.createBox = function (scaleX, scaleY, rotation, tx, ty) {
                if (rotation === void 0) { rotation = 0; }
                if (tx === void 0) { tx = 0; }
                if (ty === void 0) { ty = 0; }
                var u = Math.cos(rotation);
                var v = Math.sin(rotation);
                this.a = u * scaleX;
                this.b = v * scaleY;
                this.c = -v * scaleX;
                this.d = u * scaleY;
                tx = tx;
                ty = ty;
            };
            Matrix.prototype.createGradientBox = function (width, height, rotation, tx, ty) {
                if (rotation === void 0) { rotation = 0; }
                if (tx === void 0) { tx = 0; }
                if (ty === void 0) { ty = 0; }
                this.createBox(width / 1638.4, height / 1638.4, rotation, tx + width / 2, ty + height / 2);
            };
            Matrix.prototype.rotate = function (angle) {
                var u = Math.cos(angle);
                var v = Math.sin(angle);
                this.t0 = this.a;
                this.t1 = this.c;
                this.t2 = this.tx;
                this.a = u * this.a - v * this.b;
                this.b = v * this.t0 + u * this.b;
                this.c = u * this.c - v * this.d;
                this.d = v * this.t1 + u * this.d;
                this.tx = u * this.tx - v * this.ty;
                this.ty = v * this.t2 + u * this.ty;
            };
            Matrix.prototype.translate = function (dx, dy) {
                this.tx += dx;
                this.ty += dy;
            };
            Matrix.prototype.scale = function (sx, sy) {
                this.a *= sx;
                this.b *= sy;
                this.c *= sx;
                this.d *= sy;
                this.tx *= sx;
                this.ty *= sy;
            };
            Matrix.prototype.deltaTransformPoint = function (point) {
                return new geom.Point(this.a * point.x + this.c * point.y, this.d * point.y + this.b * point.x);
            };
            Matrix.prototype.transformPoint = function (point) {
                return new geom.Point(this.a * point.x + this.c * point.y + this.tx, this.d * point.y + this.b * point.x + this.ty);
            };
            Matrix.prototype.toString = function () {
                return "(a=" + this.a + ", b=" + this.b + ", c=" + this.c + ", d=" + this.d + ", tx=" + this.tx + ", ty=" + this.ty + ")";
            };
            Matrix.prototype.copyFrom = function (sourceMatrix) {
                this.a = sourceMatrix.a;
                this.b = sourceMatrix.b;
                this.c = sourceMatrix.c;
                this.d = sourceMatrix.d;
                this.tx = sourceMatrix.tx;
                this.ty = sourceMatrix.ty;
            };
            Matrix.prototype.setTo = function (aa, ba, ca, da, txa, tya) {
                this.a = aa;
                this.b = ba;
                this.c = ca;
                this.d = da;
                this.tx = txa;
                this.ty = tya;
            };
            Matrix.prototype.copyRowTo = function (row, vector3D) {
                switch (row) {
                    case 0:
                        break;
                    case 1:
                        vector3D.x = this.b;
                        vector3D.y = this.d;
                        vector3D.z = this.ty;
                        break;
                    case 2:
                    case 3:
                        vector3D.x = 0;
                        vector3D.y = 0;
                        vector3D.z = 1;
                        break;
                    default:
                        vector3D.x = this.a;
                        vector3D.y = this.c;
                        vector3D.z = this.tx;
                }
            };
            Matrix.prototype.copyColumnTo = function (column, vector3D) {
                switch (column) {
                    case 0:
                        break;
                    case 1:
                        vector3D.x = this.c;
                        vector3D.y = this.d;
                        vector3D.z = 0;
                        break;
                    case 2:
                    case 3:
                        vector3D.x = this.tx;
                        vector3D.y = this.ty;
                        vector3D.z = 1;
                        break;
                    default:
                        vector3D.x = this.a;
                        vector3D.y = this.b;
                        vector3D.z = 0;
                }
            };
            Matrix.prototype.copyRowFrom = function (row, vector3D) {
                switch (row) {
                    case 0:
                        break;
                    case 1:
                    case 2:
                        this.b = vector3D.x;
                        this.d = vector3D.y;
                        this.ty = vector3D.z;
                        break;
                    default:
                        this.a = vector3D.x;
                        this.c = vector3D.y;
                        this.tx = vector3D.z;
                }
            };
            Matrix.prototype.copyColumnFrom = function (column, vector3D) {
                switch (column) {
                    case 0:
                        break;
                    case 1:
                    case 2:
                        this.b = vector3D.x;
                        this.d = vector3D.y;
                        this.ty = vector3D.z;
                        break;
                    default:
                        this.a = vector3D.x;
                        this.c = vector3D.y;
                        this.tx = vector3D.z;
                }
            };
            return Matrix;
        }(Object));
        geom.Matrix = Matrix;
    })(geom = flash.geom || (flash.geom = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var geom;
    (function (geom) {
        var PerspectiveProjection = (function (_super) {
            __extends(PerspectiveProjection, _super);
            function PerspectiveProjection() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.ctor();
                return _this;
            }
            PerspectiveProjection.prototype.ctor = function () { };
            Object.defineProperty(PerspectiveProjection.prototype, "fieldOfView", {
                get: function () { return 0; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PerspectiveProjection.prototype, "projectionCenter", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PerspectiveProjection.prototype, "focalLength", {
                get: function () { return 0; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            PerspectiveProjection.prototype.toMatrix3D = function () { return null; };
            return PerspectiveProjection;
        }(Object));
        geom.PerspectiveProjection = PerspectiveProjection;
    })(geom = flash.geom || (flash.geom = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var geom;
    (function (geom) {
        var Utils3D = (function (_super) {
            __extends(Utils3D, _super);
            function Utils3D() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            Utils3D.projectVector = function (param1, param2) { return null; };
            Utils3D.projectVectors = function (param1, param2, param3, param4) { };
            Utils3D.pointTowards = function (param1, param2, param3, param4, param5) {
                if (param4 === void 0) { param4 = null; }
                if (param5 === void 0) { param5 = null; }
                return null;
            };
            return Utils3D;
        }(Object));
        geom.Utils3D = Utils3D;
    })(geom = flash.geom || (flash.geom = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var system;
    (function (system) {
        system.Error = global.Error;
        system.Sound = flash.media.Sound;
        var Capabilities = (function () {
            function Capabilities() {
                throw new system.Error('Abstract class error');
            }
            Object.defineProperty(Capabilities, "isEmbeddedInAcrobat", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "hasEmbeddedVideo", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "hasAudio", {
                get: function () {
                    return system.Sound.ctx != null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "avHardwareDisable", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "hasAccessibility", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "hasAudioEncoder", {
                get: function () { return Capabilities.hasMP3; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "hasMP3", {
                get: function () { return Capabilities.hasAudio; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "hasPrinting", {
                get: function () {
                    return 'print' in window;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "hasScreenBroadcast", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "hasScreenPlayback", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "hasStreamingAudio", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "hasStreamingVideo", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "hasVideoEncoder", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "isDebugger", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "localFileReadDisable", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "language", {
                get: function () {
                    return 'languages' in navigator && navigator['languages'].length > 0 ? navigator['languages'][0] : (navigator['language'] || navigator['userLanguage'] || 'en');
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "languages", {
                get: function () {
                    var list = 'languages' in navigator ? navigator['languages'] : [];
                    if (!list.length && Capabilities.language)
                        list.push(Capabilities.language);
                    return list;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "manufacturer", {
                get: function () {
                    return 'Absolutist Universal';
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "os", {
                get: function () {
                    var v = Capabilities.js.os;
                    if (Capabilities.js.osVersion != '-')
                        v += ' ' + Capabilities.js.osVersion;
                    return v;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "browser", {
                get: function () {
                    return Capabilities.js.browser;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "cpuArchitecture", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "playerType", {
                get: function () {
                    return "PlugIn";
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "serverString", {
                get: function () { return null; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "version", {
                get: function () {
                    var v = Capabilities.js.browserVersion;
                    var tmp = v.split('.');
                    if (tmp.length > 2) {
                        tmp.length = 2;
                    }
                    if (tmp.length > 1 && tmp[1].length > 1) {
                        tmp[1] = tmp[1].substr(0, 1);
                    }
                    return tmp.join('.');
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "isMobile", {
                get: function () {
                    return Capabilities.js.mobile;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "isCookieEnabled", {
                get: function () {
                    return Capabilities.js.cookies;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "screenColor", {
                get: function () { return null; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "pixelAspectRatio", {
                get: function () {
                    return window.devicePixelRatio > 0 ? window.devicePixelRatio : 1;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "screenDPI", {
                get: function () {
                    if ('deviceXDPI' in window.screen)
                        return window.screen.deviceXDPI;
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "screenResolutionX", {
                get: function () {
                    var sw = window.screen.width, sh = window.screen.height;
                    var iw = window.innerWidth, ih = window.innerHeight;
                    var sp = sw / sh, ip = iw / ih;
                    return ((sp > 1 && ip > 1) || (sp < 1 && ip < 1) ? sw : sh) * Capabilities.pixelAspectRatio;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "screenResolutionY", {
                get: function () {
                    var sw = window.screen.width, sh = window.screen.height;
                    var iw = window.innerWidth, ih = window.innerHeight;
                    var sp = sw / sh, ip = iw / ih;
                    return ((sp > 1 && ip > 1) || (sp < 1 && ip < 1) ? sh : sw) * Capabilities.pixelAspectRatio;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "touchscreenType", {
                get: function () {
                    return ('ontouchstart' in window || ('msMaxTouchPoints' in navigator && navigator['msMaxTouchPoints'] > 0)) ?
                        'finger' : 'none';
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "hasIME", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "hasTLS", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "maxLevelIDC", {
                get: function () { return null; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "supports32BitProcesses", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Capabilities, "supports64BitProcesses", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Capabilities.hasMultiChannelAudio = function (param1) { return false; };
            Object.defineProperty(Capabilities, "js", {
                get: function () {
                    if (!Capabilities.__js) {
                        var unknown = '-';
                        var nVer = navigator.appVersion;
                        var nAgt = navigator.userAgent;
                        var browser = navigator.appName;
                        var version = '' + parseFloat(navigator.appVersion);
                        var majorVersion = parseInt(navigator.appVersion, 10);
                        var nameOffset, verOffset, ix;
                        if ((verOffset = nAgt.indexOf('Opera')) != -1) {
                            browser = 'Opera';
                            version = nAgt.substring(verOffset + 6);
                            if ((verOffset = nAgt.indexOf('Version')) != -1) {
                                version = nAgt.substring(verOffset + 8);
                            }
                        }
                        else if ((verOffset = nAgt.indexOf(' OPR')) != -1) {
                            browser = 'Opera';
                            version = nAgt.substring(verOffset + 5);
                        }
                        else if ((verOffset = nAgt.indexOf('MSIE')) != -1) {
                            browser = 'Microsoft Internet Explorer';
                            version = nAgt.substring(verOffset + 5);
                        }
                        else if ((verOffset = nAgt.indexOf('Edge')) != -1) {
                            browser = 'Microsoft Edge';
                            version = nAgt.substring(verOffset + 5);
                        }
                        else if ((verOffset = nAgt.indexOf('Chrome')) != -1) {
                            browser = 'Chrome';
                            version = nAgt.substring(verOffset + 7);
                        }
                        else if ((verOffset = nAgt.indexOf('Safari')) != -1) {
                            browser = 'Safari';
                            version = nAgt.substring(verOffset + 7);
                            if ((verOffset = nAgt.indexOf('Version')) != -1) {
                                version = nAgt.substring(verOffset + 8);
                            }
                        }
                        else if ((verOffset = nAgt.indexOf('Firefox')) != -1) {
                            browser = 'Firefox';
                            version = nAgt.substring(verOffset + 8);
                        }
                        else if (nAgt.indexOf('Trident/') != -1) {
                            browser = 'Microsoft Internet Explorer';
                            version = nAgt.substring(nAgt.indexOf('rv:') + 3);
                        }
                        else if ((nameOffset = nAgt.lastIndexOf(' ') + 1) < (verOffset = nAgt.lastIndexOf('/'))) {
                            browser = nAgt.substring(nameOffset, verOffset);
                            version = nAgt.substring(verOffset + 1);
                            if (browser.toLowerCase() == browser.toUpperCase()) {
                                browser = navigator.appName;
                            }
                        }
                        if ((ix = version.indexOf(';')) != -1)
                            version = version.substring(0, ix);
                        if ((ix = version.indexOf(' ')) != -1)
                            version = version.substring(0, ix);
                        if ((ix = version.indexOf(')')) != -1)
                            version = version.substring(0, ix);
                        majorVersion = parseInt('' + version, 10);
                        if (isNaN(majorVersion)) {
                            version = '' + parseFloat(navigator.appVersion);
                            majorVersion = parseInt(navigator.appVersion, 10);
                        }
                        var mobile = /Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(nVer);
                        var cookieEnabled = (navigator.cookieEnabled) ? true : false;
                        if (typeof navigator.cookieEnabled == 'undefined' && !cookieEnabled) {
                            document.cookie = 'testcookie';
                            cookieEnabled = (document.cookie.indexOf('testcookie') != -1) ? true : false;
                        }
                        var os = unknown;
                        var clientStrings = [
                            { s: 'Windows 10', r: /(Windows 10.0|Windows NT 10.0)/ },
                            { s: 'Windows 8.1', r: /(Windows 8.1|Windows NT 6.3)/ },
                            { s: 'Windows 8', r: /(Windows 8|Windows NT 6.2)/ },
                            { s: 'Windows 7', r: /(Windows 7|Windows NT 6.1)/ },
                            { s: 'Windows Vista', r: /Windows NT 6.0/ },
                            { s: 'Windows Server 2003', r: /Windows NT 5.2/ },
                            { s: 'Windows XP', r: /(Windows NT 5.1|Windows XP)/ },
                            { s: 'Windows 2000', r: /(Windows NT 5.0|Windows 2000)/ },
                            { s: 'Windows ME', r: /(Win 9x 4.90|Windows ME)/ },
                            { s: 'Windows 98', r: /(Windows 98|Win98)/ },
                            { s: 'Windows 95', r: /(Windows 95|Win95|Windows_95)/ },
                            { s: 'Windows NT 4.0', r: /(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/ },
                            { s: 'Windows CE', r: /Windows CE/ },
                            { s: 'Windows 3.11', r: /Win16/ },
                            { s: 'Android', r: /Android/ },
                            { s: 'Open BSD', r: /OpenBSD/ },
                            { s: 'Sun OS', r: /SunOS/ },
                            { s: 'Linux', r: /(Linux|X11)/ },
                            { s: 'iOS', r: /(iPhone|iPad|iPod)/ },
                            { s: 'Mac OS X', r: /Mac OS X/ },
                            { s: 'Mac OS', r: /(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/ },
                            { s: 'QNX', r: /QNX/ },
                            { s: 'UNIX', r: /UNIX/ },
                            { s: 'BeOS', r: /BeOS/ },
                            { s: 'OS/2', r: /OS\/2/ },
                            { s: 'Search Bot', r: /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/ }
                        ];
                        for (var id in clientStrings) {
                            var cs = clientStrings[id];
                            if (cs.r.test(nAgt)) {
                                os = cs.s;
                                break;
                            }
                        }
                        var osVersion = unknown;
                        if (/Windows/.test(os)) {
                            osVersion = /Windows (.*)/.exec(os)[1];
                            os = 'Windows';
                        }
                        switch (os) {
                            case 'Mac OS X':
                                osVersion = /Mac OS X (10[\.\_\d]+)/.exec(nAgt)[1];
                                break;
                            case 'Android':
                                osVersion = /Android ([\.\_\d]+)/.exec(nAgt)[1];
                                break;
                            case 'iOS':
                                var tmp = /OS (\d+)_(\d+)_?(\d+)?/.exec(nVer) || [];
                                while (tmp.length < 4)
                                    tmp.push(0);
                                osVersion = tmp[1] + '.' + tmp[2] + '.' + int(tmp[3]);
                                break;
                        }
                        var flashVersion = 'no check', d, fv = [];
                        if (typeof navigator.plugins !== 'undefined' && typeof navigator.plugins["Shockwave Flash"] === "object") {
                            d = navigator.plugins["Shockwave Flash"].description;
                            if (d && !(typeof navigator.mimeTypes !== 'undefined' && navigator.mimeTypes["application/x-shockwave-flash"] && !navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)) {
                                d = d.replace(/^.*\s+(\S+\s+\S+$)/, "$1");
                                fv[0] = parseInt(d.replace(/^(.*)\..*$/, "$1"), 10);
                                fv[1] = parseInt(d.replace(/^.*\.(.*)\s.*$/, "$1"), 10);
                                fv[2] = /[a-zA-Z]/.test(d) ? parseInt(d.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0;
                            }
                        }
                        else if (typeof window.ActiveXObject !== 'undefined') {
                            try {
                                var a = new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
                                if (a) {
                                    d = a.GetVariable("$version");
                                    if (d) {
                                        d = d.split(" ")[1].split(",");
                                        fv = [parseInt(d[0], 10), parseInt(d[1], 10), parseInt(d[2], 10)];
                                    }
                                }
                            }
                            catch (e) { }
                        }
                        if (fv.length) {
                            flashVersion = fv[0] + '.' + fv[1] + ' r' + fv[2];
                        }
                        Capabilities.__js = {
                            browser: browser,
                            browserVersion: version,
                            mobile: mobile,
                            os: os,
                            osVersion: osVersion,
                            cookies: cookieEnabled,
                            flashVersion: flashVersion
                        };
                    }
                    return Capabilities.__js;
                },
                enumerable: true,
                configurable: true
            });
            return Capabilities;
        }());
        system.Capabilities = Capabilities;
    })(system = flash.system || (flash.system = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        text.EventDispatcher = flash.events.EventDispatcher;
        var StyleSheet = (function (_super) {
            __extends(StyleSheet, _super);
            function StyleSheet() {
                var _this = _super.call(this) || this;
                _this._css = {};
                _this._styles = {};
                return _this;
            }
            StyleSheet.prototype.getStyle = function (styleName) {
                return this._copy(this._css[styleName.toLowerCase()]);
            };
            StyleSheet.prototype.setStyle = function (styleName, styleObject) {
                var lowerStr = styleName.toLowerCase();
                this._css[lowerStr] = this._copy(styleObject);
                this.doTransform(lowerStr);
                this._update();
            };
            StyleSheet.prototype.clear = function () {
                this._css = {};
                this._styles = {};
                this._update();
            };
            Object.defineProperty(StyleSheet.prototype, "styleNames", {
                get: function () {
                    var n = null;
                    var a = [];
                    for (n in this._css) {
                        a.push(n);
                    }
                    return a;
                },
                enumerable: true,
                configurable: true
            });
            StyleSheet.prototype.transform = function (formatObject) {
                if (formatObject == null) {
                    return null;
                }
                var f = new text.TextFormat();
                var v = formatObject.textAlign;
                if (v) {
                    f.align = v;
                }
                v = formatObject.fontSize;
                if (v) {
                    v = parseInt(v, 10);
                    if (v > 0) {
                        f.size = v;
                    }
                }
                v = formatObject.textDecoration;
                if (v == "none") {
                    f.underline = false;
                }
                else if (v == "underline") {
                    f.underline = true;
                }
                v = formatObject.marginLeft;
                if (v) {
                    f.leftMargin = parseInt(v, 10);
                }
                v = formatObject.marginRight;
                if (v) {
                    f.rightMargin = parseInt(v, 10);
                }
                v = formatObject.leading;
                if (v) {
                    f.leading = parseInt(v, 10);
                }
                v = formatObject.kerning;
                if (v == "true") {
                    f.kerning = 1;
                }
                else if (v == "false") {
                    f.kerning = 0;
                }
                else {
                    f.kerning = parseInt(v, 10);
                }
                v = formatObject.letterSpacing;
                if (v) {
                    f.letterSpacing = parseFloat(v);
                }
                v = formatObject.fontFamily;
                if (v) {
                    f.font = this._parseCSSFontFamily(v);
                }
                v = formatObject.display;
                if (v) {
                    f.display = v;
                }
                v = formatObject.fontWeight;
                if (v == "bold") {
                    f.bold = true;
                }
                else if (v == "normal") {
                    f.bold = false;
                }
                v = formatObject.fontStyle;
                if (v == "italic") {
                    f.italic = true;
                }
                else if (v == "normal") {
                    f.italic = false;
                }
                v = formatObject.textIndent;
                if (v) {
                    f.indent = parseInt(v, 10);
                }
                v = formatObject.color;
                if (v) {
                    v = this._parseColor(v);
                    if (v != null) {
                        f.color = v;
                    }
                }
                return f;
            };
            StyleSheet.prototype.parseCSS = function (CSSText) {
                var n = null;
                var r = this._parseCSSInternal(CSSText);
                if (typeof r == "null") {
                    return;
                }
                for (n in r) {
                    this._css[n] = this._copy(r[n]);
                    this.doTransform(n);
                }
                this._update();
            };
            Object.defineProperty(StyleSheet.prototype, "_styles", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            StyleSheet.prototype.doTransform = function (n) {
                var f = this.transform(this._css[n]);
                this._css[n] = f;
            };
            StyleSheet.prototype._copy = function (o) {
                var n = null;
                if (typeof o != "object") {
                    return null;
                }
                var r = {};
                for (n in o) {
                    r[n] = o[n];
                }
                return r;
            };
            StyleSheet.prototype._update = function () { };
            StyleSheet.prototype._parseCSSInternal = function (param1) { return null; };
            StyleSheet.prototype._parseCSSFontFamily = function (param1) { return null; };
            StyleSheet.prototype._parseColor = function (param1) { return 0; };
            return StyleSheet;
        }(text.EventDispatcher));
        text.StyleSheet = StyleSheet;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var ui;
    (function (ui) {
        ui.NativeMenuItem = flash.display.NativeMenuItem;
        ui.ContextMenuEvent = flash.events.ContextMenuEvent;
        var ContextMenuItem = (function (_super) {
            __extends(ContextMenuItem, _super);
            function ContextMenuItem(caption, separatorBefore, enabled, visible) {
                if (separatorBefore === void 0) { separatorBefore = false; }
                if (enabled === void 0) { enabled = true; }
                if (visible === void 0) { visible = true; }
                var _this = _super.call(this) || this;
                _this.separatorBefore = false;
                _this.visible = false;
                _this.enabled = false;
                _this.caption = caption;
                _this.separatorBefore = separatorBefore;
                _this.enabled = enabled;
                _this.visible = visible;
                return _this;
            }
            ContextMenuItem.prototype.clone = function () {
                return new ContextMenuItem(this.caption, this.separatorBefore, this.enabled, this.visible);
            };
            ContextMenuItem.prototype.click = function () {
                this.dispatchEvent(new ui.ContextMenuEvent(ui.ContextMenuEvent.MENU_ITEM_SELECT));
            };
            return ContextMenuItem;
        }(ui.NativeMenuItem));
        ui.ContextMenuItem = ContextMenuItem;
    })(ui = flash.ui || (flash.ui = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var ui;
    (function (ui) {
        ui.Error = global.Error;
        ui.Capabilities = flash.system.Capabilities;
        var MouseCursor = (function (_super) {
            __extends(MouseCursor, _super);
            function MouseCursor() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                throw new ui.Error('Abstract class error');
                return _this;
            }
            MouseCursor.isValid = function (name) {
                return name == MouseCursor.AUTO ||
                    name == MouseCursor.ARROW ||
                    name == MouseCursor.BUTTON ||
                    name == MouseCursor.HAND ||
                    name == MouseCursor.IBEAM;
            };
            MouseCursor.toCSS = function (name) {
                switch (name) {
                    case MouseCursor.ARROW: return 'default';
                    case MouseCursor.BUTTON: return 'pointer';
                    case MouseCursor.HAND:
                        return ui.Capabilities.browser == 'Firefox' ? 'grab' : 'pointer';
                    case MouseCursor.IBEAM: return 'text';
                }
                return name;
            };
            MouseCursor.AUTO = "auto";
            MouseCursor.ARROW = "arrow";
            MouseCursor.BUTTON = "button";
            MouseCursor.HAND = "hand";
            MouseCursor.IBEAM = "ibeam";
            return MouseCursor;
        }(Object));
        ui.MouseCursor = MouseCursor;
    })(ui = flash.ui || (flash.ui = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var ui;
    (function (ui) {
        ui.BitmapData = flash.display.BitmapData;
        ui.Point = flash.geom.Point;
        var MouseCursorData = (function () {
            function MouseCursorData() {
                this.data = new Array;
                this.frameRate = 0;
            }
            return MouseCursorData;
        }());
        ui.MouseCursorData = MouseCursorData;
    })(ui = flash.ui || (flash.ui = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        utils.Error = global.Error;
        utils.IOError = flash.errors.IOError;
        var ByteArray = (function () {
            function ByteArray() {
                this.is_IDataOutput = null;
                this.is_IDataInput = null;
                this.dataView = null;
                this.isLittleEndian = false;
                this._objectEncoding = 0;
                this._endian = null;
                this._position = 0;
                this._length = 0;
                this._objectEncoding = ByteArray.defaultObjectEncoding;
                this._endian = utils.Endian.BIG_ENDIAN;
                this.dataView = new DataView(new ArrayBuffer(0));
            }
            Object.defineProperty(ByteArray, "defaultObjectEncoding", {
                get: function () { return ByteArray._defaultObjectEncoding; },
                set: function (value) { ByteArray._defaultObjectEncoding = value; },
                enumerable: true,
                configurable: true
            });
            ByteArray.prototype.get = function (index) {
                try {
                    return this.dataView.getUint8(index);
                }
                catch (e) {
                    return undefined;
                }
            };
            ByteArray.prototype.set = function (index, v) {
                if (index + 1 > this.length) {
                    this.length = index + 1;
                }
                if (v < 0) {
                    this.dataView.setInt8(index, v);
                }
                else {
                    this.dataView.setUint8(index, v);
                }
            };
            ByteArray.prototype.fromByteArray = function (array) {
                this._length = array.length;
                this._position = 0;
                this.dataView = new DataView(array.buffer);
                return this;
            };
            ByteArray.prototype.fromArrayBuffer = function (buff) {
                this._length = buff.byteLength;
                this._position = 0;
                this.dataView = new DataView(ByteArray._slice(buff, 0, this._length));
                return this;
            };
            ByteArray.prototype.readBytes = function (b, offset, length) {
                if (offset === void 0) { offset = 0; }
                if (length === void 0) { length = 0; }
                var pos = b.position;
                b.position = offset;
                b.writeBytes(this, this.position, length);
                b.position = pos;
            };
            ByteArray.prototype.writeBytes = function (bytes, offset, length) {
                if (offset === void 0) { offset = 0; }
                if (length === void 0) { length = 0; }
                if (length === 0) {
                    length = bytes.length - offset;
                }
                this.beforWrite(length);
                var db = new Uint8Array(this.dataView.buffer);
                var sb = new Uint8Array(bytes.dataView.buffer, offset, length);
                db.set(sb, this._position);
                this._position += length;
                bytes._position += length;
            };
            ByteArray.prototype.writeBoolean = function (v) {
                this.beforWrite(1);
                this.dataView.setInt8(this._position++, v ? 1 : 0);
            };
            ByteArray.prototype.writeByte = function (v) {
                this.beforWrite(1);
                this.dataView.setInt8(this._position++, v);
            };
            ByteArray.prototype.writeShort = function (v) {
                this.beforWrite(2);
                this.dataView.setInt16(this._position, v, this.isLittleEndian);
                this._position += 2;
            };
            ByteArray.prototype.writeInt = function (v) {
                this.beforWrite(4);
                this.dataView.setInt32(this._position, v, this.isLittleEndian);
                this._position += 4;
            };
            ByteArray.prototype.writeUnsignedInt = function (v) {
                this.beforWrite(4);
                this.dataView.setUint32(this._position, v, this.isLittleEndian);
                this._position += 4;
            };
            ByteArray.prototype.writeFloat = function (v) {
                this.beforWrite(4);
                this.dataView.setFloat32(this._position, v, this.isLittleEndian);
                this._position += 4;
            };
            ByteArray.prototype.writeDouble = function (v) {
                this.beforWrite(8);
                this.dataView.setFloat64(this._position, v, this.isLittleEndian);
                this._position += 8;
            };
            ByteArray.prototype.writeMultiByte = function (str, charSet) {
                var u8;
                var Encoder = window.TextEncoder;
                if (charSet !== 'utf-8' || !Encoder) {
                    Encoder = window.__TextEncoder;
                }
                u8 = new Encoder(charSet, { NONSTANDARD_allowLegacyEncoding: true }).encode(str);
                var length = u8.length;
                this.beforWrite(length);
                var db = new Uint8Array(this.dataView.buffer);
                db.set(u8, this._position);
                this._position += length;
            };
            ByteArray.prototype.writeUTF = function (v) {
                this._position += 2;
                var start = this._position;
                this.writeUTFBytes(v);
                var end = this._position;
                this._position = start - 2;
                this.writeShort(start - end);
                this._position = end;
            };
            ByteArray.prototype.writeUTFBytes = function (v) {
                this.writeMultiByte(v, "utf-8");
            };
            ByteArray.prototype.readBoolean = function () {
                return this.dataView.getInt8(this._position++) != 0;
            };
            ByteArray.prototype.readByte = function () {
                return this.dataView.getInt8(this._position++);
            };
            ByteArray.prototype.readUnsignedByte = function () {
                return this.dataView.getUint8(this._position++);
            };
            ByteArray.prototype.readShort = function () {
                var v = this.dataView.getInt16(this._position, this.isLittleEndian);
                this._position += 2;
                return v;
            };
            ByteArray.prototype.readUnsignedShort = function () {
                var v = this.dataView.getUint16(this._position, this.isLittleEndian);
                this._position += 2;
                return v;
            };
            ByteArray.prototype.readInt = function () {
                var v = this.dataView.getInt32(this._position, this.isLittleEndian);
                this._position += 4;
                return v;
            };
            ByteArray.prototype.readUnsignedInt = function () {
                var v = this.dataView.getUint32(this._position, this.isLittleEndian);
                this._position += 4;
                return v;
            };
            ByteArray.prototype.readFloat = function () {
                var v = this.dataView.getFloat32(this._position, this.isLittleEndian);
                this._position += 4;
                return v;
            };
            ByteArray.prototype.readDouble = function () {
                var v = this.dataView.getFloat64(this._position, this.isLittleEndian);
                this._position += 8;
                return v;
            };
            ByteArray.prototype.readMultiByte = function (length, charSet) {
                var str = '';
                var u8 = new Uint8Array(this.dataView.buffer).subarray(this._position, this._position + length);
                var Decoder = window.TextDecoder;
                if (charSet !== 'utf-8' || !Decoder) {
                    Decoder = window.__TextDecoder;
                }
                str = new Decoder(charSet, { NONSTANDARD_allowLegacyEncoding: true }).decode(u8);
                this._position += length;
                return str;
            };
            ByteArray.prototype.readUTF = function () {
                return this.readUTFBytes(this.readUnsignedShort());
            };
            ByteArray.prototype.readUTFBytes = function (length) {
                if (this.position + 3 <= this.length && this.get(this.position) == 0xef && this.get(this.position + 1) == 0xbb && this.get(this.position + 2) == 0xbf) {
                    this.position += 3;
                    length -= 3;
                    if (length < 0) {
                        length = 0;
                    }
                }
                return this.readMultiByte(length, "utf-8");
            };
            Object.defineProperty(ByteArray.prototype, "length", {
                get: function () { return this._length; },
                set: function (v) { this.__setLength(v); },
                enumerable: true,
                configurable: true
            });
            ByteArray.prototype.writeObject = function (object) { };
            ByteArray.prototype.readObject = function () { return null; };
            ByteArray.prototype.deflate = function () {
                this._compress('deflate');
            };
            ByteArray.prototype.compress = function (algorithm) {
                if (algorithm === void 0) { algorithm = "zlib"; }
                this._compress(algorithm);
            };
            ByteArray.prototype.inflate = function () {
                this._uncompress('deflate');
            };
            ByteArray.prototype.uncompress = function (algorithm) {
                if (algorithm === void 0) { algorithm = "zlib"; }
                this._uncompress(algorithm);
            };
            ByteArray.prototype.toString = function () {
                return this._toString();
            };
            ByteArray.prototype.toJSON = function (k) {
            };
            Object.defineProperty(ByteArray.prototype, "bytesAvailable", {
                get: function () {
                    return this.length - this.position;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(ByteArray.prototype, "position", {
                get: function () { return this._position; },
                set: function (p) { this._position = p; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(ByteArray.prototype, "objectEncoding", {
                get: function () { return this._objectEncoding; },
                set: function (value) { this._objectEncoding = value; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(ByteArray.prototype, "endian", {
                get: function () { return this._endian; },
                set: function (v) {
                    this._endian = v;
                    this.isLittleEndian = v === utils.Endian.LITTLE_ENDIAN;
                },
                enumerable: true,
                configurable: true
            });
            ByteArray.prototype.clear = function () {
                this.position = 0;
                this.length = 0;
            };
            ByteArray.prototype.atomicCompareAndSwapIntAt = function (param1, param2, param3) { return 0; };
            ByteArray.prototype.atomicCompareAndSwapLength = function (param1, param2) { return 0; };
            Object.defineProperty(ByteArray.prototype, "shareable", {
                get: function () { return false; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(ByteArray.prototype, "buffer", {
                get: function () {
                    return ByteArray._slice(this.dataView.buffer, 0, this._length);
                },
                enumerable: true,
                configurable: true
            });
            ByteArray.prototype.__setLength = function (v) {
                this._length = v;
                var byteLength = this.dataView.buffer.byteLength;
                if (v == 0) {
                    this.dataView = new DataView(new ArrayBuffer(0));
                }
                else if (byteLength < v) {
                    if (byteLength == 0) {
                        v = Math.max(ByteArray.ARRAY_BUFFER_LENGTH, v);
                    }
                    else {
                        while (byteLength < v) {
                            byteLength *= 2;
                        }
                        v = byteLength;
                    }
                    var u8 = new Uint8Array(v);
                    u8.set(new Uint8Array(this.dataView.buffer));
                    this.dataView = new DataView(u8.buffer);
                }
            };
            ByteArray.prototype._toString = function () {
                this.position = 0;
                return this.readUTFBytes(this.length);
            };
            ByteArray.prototype.beforWrite = function (len) {
                if (this._position + len > this.length) {
                    this.__setLength(this._position + len);
                }
            };
            ByteArray.prototype._compress = function (algorithm) {
                var u8Array = new Uint8Array(this.dataView.buffer, 0, this.length);
                switch (this.__checkTools(algorithm)) {
                    case 'zlib':
                        u8Array = window.pako.gzip(u8Array);
                        break;
                    case 'deflate':
                        u8Array = window.pako.deflateRaw(u8Array);
                        break;
                    case 'lzma':
                        u8Array = new Uint8Array(window.LZMA.compress(u8Array));
                        break;
                }
                this.fromArrayBuffer(u8Array.buffer);
            };
            ByteArray.prototype._uncompress = function (algorithm) {
                try {
                    var u8Array = new Uint8Array(this.dataView.buffer, 0, this.length);
                    switch (this.__checkTools(algorithm)) {
                        case 'zlib':
                            u8Array = window.pako.ungzip(u8Array);
                            break;
                        case 'deflate':
                            u8Array = window.pako.inflateRaw(u8Array);
                            break;
                        case 'lzma':
                            u8Array = new Uint8Array(window.LZMA.decompress(u8Array));
                            break;
                    }
                    this.fromArrayBuffer(u8Array.buffer);
                }
                catch (e) {
                    e = window.asc.e2e(e);
                    if (this.length) {
                        throw new utils.IOError('There was an error decompressing the data.', 2058);
                    }
                }
            };
            ByteArray.prototype.__checkTools = function (algorithm) {
                switch (algorithm) {
                    case 'zlib':
                    case 'deflate':
                        if (!window.pako) {
                            throw new utils.Error('pako lib is not defined');
                        }
                        break;
                    case 'lzma':
                        if (!window.LZMA) {
                            throw new utils.Error('lzma lib is not defined');
                        }
                        break;
                    default:
                        throw new utils.Error('invalid algorithm');
                }
                return algorithm;
            };
            ByteArray._slice = function (buff, begin, end) {
                var newbuffer;
                try {
                    newbuffer = buff.slice(begin, end);
                }
                catch (err) {
                    if (end === 0) {
                        end = buff.byteLength;
                    }
                    newbuffer = new ArrayBuffer(end - begin);
                    var rb = new Uint8Array(newbuffer);
                    var sb = new Uint8Array(buff, begin, end - begin);
                    rb.set(sb);
                }
                return newbuffer;
            };
            ByteArray.ARRAY_BUFFER_LENGTH = 1024 * 4;
            ByteArray._defaultObjectEncoding = 3;
            return ByteArray;
        }());
        utils.ByteArray = ByteArray;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        utils.Stage = flash.display.Stage;
        function getTimer() {
            return Date.now() - utils.Stage.startTime;
        }
        utils.getTimer = getTimer;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var __native;
    (function (__native) {
        __native.BitmapData = flash.display.BitmapData;
        __native.Texture = flash.display3D.textures.Texture;
        var BitmapTexture = (function () {
            function BitmapTexture() {
                this.width = 0;
                this.height = 0;
            }
            return BitmapTexture;
        }());
        __native.BitmapTexture = BitmapTexture;
    })(__native = flash.__native || (flash.__native = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var __native;
    (function (__native) {
        var GLDrawable = (function () {
            function GLDrawable(posData, uvData, iData, usage) {
                this.numTriangles = -1;
                this.usage = usage;
                this.pos = new __native.GLVertexBufferSet(posData, 2, usage);
                this.uv = new __native.GLVertexBufferSet(uvData, 2, usage);
                this.index = new __native.GLIndexBufferSet(iData, usage);
            }
            Object.defineProperty(GLDrawable.prototype, "color", {
                get: function () {
                    if (this._color == null || this._color.data.length != this.pos.data.length / 2) {
                        this._color = new __native.GLVertexBufferSet(new Uint32Array(this.pos.data.length / 2), 4, this.usage);
                    }
                    return this._color;
                },
                set: function (v) {
                    this._color = v;
                },
                enumerable: true,
                configurable: true
            });
            return GLDrawable;
        }());
        __native.GLDrawable = GLDrawable;
    })(__native = flash.__native || (flash.__native = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.GLCanvasRenderingContext2D = flash.__native.GLCanvasRenderingContext2D;
        display.ColorTransform = flash.geom.ColorTransform;
        var GraphicsPath = (function (_super) {
            __extends(GraphicsPath, _super);
            function GraphicsPath(commands, data, winding) {
                var _newTarget = this.constructor;
                if (commands === void 0) { commands = null; }
                if (data === void 0) { data = null; }
                if (winding === void 0) { winding = "evenOdd"; }
                var _this = _super.call(this) || this;
                _this.is_IGraphicsData = null;
                _this.is_IGraphicsPath = null;
                _this.gpuPath2DDirty = true;
                _this.commands = new Array;
                _this.data = new Array;
                _this.tris = [];
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.commands = commands;
                _this.data = data;
                if (_this.commands == null) {
                    _this.commands = new Array;
                }
                if (_this.data == null) {
                    _this.data = new Array;
                }
                _this._winding = winding;
                return _this;
            }
            GraphicsPath.prototype.clear = function () {
                this.commands.length = 0;
                this.data.length = 0;
                this.tris.length = 0;
            };
            Object.defineProperty(GraphicsPath.prototype, "winding", {
                get: function () {
                    return this._winding;
                },
                set: function (value) {
                    this._winding = value;
                },
                enumerable: true,
                configurable: true
            });
            GraphicsPath.prototype.moveTo = function (x, y) {
                this.commands.push(display.GraphicsPathCommand.MOVE_TO);
                this.data.push(x, y);
            };
            GraphicsPath.prototype.lineTo = function (x, y) {
                this.commands.push(display.GraphicsPathCommand.LINE_TO);
                this.data.push(x, y);
            };
            GraphicsPath.prototype.curveTo = function (controlX, controlY, anchorX, anchorY) {
                this.commands.push(display.GraphicsPathCommand.CURVE_TO);
                this.data.push(controlX, controlY, anchorX, anchorY);
            };
            GraphicsPath.prototype.cubicCurveTo = function (controlX1, controlY1, controlX2, controlY2, anchorX, anchorY) {
                this.commands.push(display.GraphicsPathCommand.CUBIC_CURVE_TO);
                this.data.push(controlX1, controlY1, controlX2, controlY2, anchorX, anchorY);
            };
            GraphicsPath.prototype.wideLineTo = function (x, y) {
                this.commands.push(display.GraphicsPathCommand.WIDE_LINE_TO);
                this.data.push(0.0, 0.0, x, y);
            };
            GraphicsPath.prototype.wideMoveTo = function (x, y) {
                this.commands.push(display.GraphicsPathCommand.WIDE_MOVE_TO);
                this.data.push(0.0, 0.0, x, y);
            };
            GraphicsPath.prototype.arc = function (x, y, r, a0, a1) {
                this.commands.push(display.GraphicsPathCommand.ARC);
                this.data.push(x, y, r, a0, a1);
            };
            GraphicsPath.prototype.draw = function (ctx, colorTransform) {
                if (this.commands.length) {
                    ctx.beginPath();
                    var p = 0;
                    var trip = 0;
                    var len = this.commands.length;
                    for (var i = 0; i < len; i++) {
                        var cmd = this.commands[i];
                        switch (cmd) {
                            case display.GraphicsPathCommand.MOVE_TO:
                                ctx.moveTo(this.data[p++], this.data[p++]);
                                break;
                            case display.GraphicsPathCommand.LINE_TO:
                                ctx.lineTo(this.data[p++], this.data[p++]);
                                break;
                            case display.GraphicsPathCommand.CURVE_TO:
                                ctx.quadraticCurveTo(this.data[p++], this.data[p++], this.data[p++], this.data[p++]);
                                break;
                            case display.GraphicsPathCommand.CUBIC_CURVE_TO:
                                ctx.bezierCurveTo(this.data[p++], this.data[p++], this.data[p++], this.data[p++], this.data[p++], this.data[p++]);
                                break;
                            case display.GraphicsPathCommand.WIDE_MOVE_TO:
                                p += 2;
                                ctx.moveTo(this.data[p++], this.data[p++]);
                                break;
                            case display.GraphicsPathCommand.WIDE_LINE_TO:
                                p += 2;
                                ctx.lineTo(this.data[p++], this.data[p++]);
                                break;
                            case display.GraphicsPathCommand.ARC:
                                ctx.arc(this.data[p++], this.data[p++], this.data[p++], this.data[p++], this.data[p++]);
                                break;
                            case display.GraphicsPathCommand.DRAW_TRIANGLES:
                                this.doDrawTriangles(this.tris[trip++], ctx);
                                break;
                            case display.GraphicsPathCommand.CLOSE_PATH:
                                ctx.closePath();
                                break;
                        }
                    }
                }
            };
            GraphicsPath.prototype.gldraw = function (ctx, colorTransform) {
                ctx.drawPath(this, colorTransform);
            };
            GraphicsPath.prototype.closePath = function () {
                this.commands.push(display.GraphicsPathCommand.CLOSE_PATH);
            };
            GraphicsPath.prototype.drawTriangles = function (vertices, indices, uvtData) {
                this.tris.push([vertices, indices, uvtData]);
                this.commands.push(display.GraphicsPathCommand.DRAW_TRIANGLES);
            };
            GraphicsPath.prototype.doDrawTriangles = function (tri, ctx) {
                var vertices = tri[0];
                var indices = tri[1];
                var len = indices.length;
                for (var i = 0; i < len;) {
                    var i0 = indices[i++];
                    var i1 = indices[i++];
                    var i2 = indices[i++];
                    var x0 = vertices[2 * i0];
                    var y0 = vertices[2 * i0 + 1];
                    var x1 = vertices[2 * i1];
                    var y1 = vertices[2 * i1 + 1];
                    var x2 = vertices[2 * i2];
                    var y2 = vertices[2 * i2 + 1];
                    ctx.moveTo(x0, y0);
                    ctx.lineTo(x1, y1);
                    ctx.lineTo(x2, y2);
                    ctx.lineTo(x0, y0);
                }
            };
            return GraphicsPath;
        }(Object));
        display.GraphicsPath = GraphicsPath;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var __native;
    (function (__native) {
        __native.GraphicsPath = flash.display.GraphicsPath;
        var GLGraphicsPath = (function (_super) {
            __extends(GLGraphicsPath, _super);
            function GLGraphicsPath() {
                var _this = _super.call(this) || this;
                _this.polys = new __native.MemArray;
                return _this;
            }
            GLGraphicsPath.prototype.clear = function () {
                var len = this.polys.array.length;
                for (var i = 0; i < len; i++) {
                    this.polys.array[i].length = 0;
                }
                this.polys.length = 0;
                this.tris.length = 0;
            };
            GLGraphicsPath.prototype.moveTo = function (x, y) {
                this.makePoly();
                this.poly.push(x);
                this.poly.push(y);
            };
            GLGraphicsPath.prototype.lineTo = function (x, y) {
                if (this.poly == null) {
                    this.makePoly();
                }
                this.poly.push(x);
                this.poly.push(y);
            };
            GLGraphicsPath.prototype.curveTo = function (controlX, controlY, anchorX, anchorY) {
                if (this.poly == null) {
                    this.makePoly();
                }
                this.poly.push(controlX);
                this.poly.push(controlY);
                this.poly.push(anchorX);
                this.poly.push(anchorY);
            };
            GLGraphicsPath.prototype.cubicCurveTo = function (controlX1, controlY1, controlX2, controlY2, anchorX, anchorY) {
                if (this.poly == null) {
                    this.makePoly();
                }
                this.poly.push(controlX1);
                this.poly.push(controlY1);
                this.poly.push(controlX2);
                this.poly.push(controlY2);
                this.poly.push(anchorX);
                this.poly.push(anchorY);
            };
            GLGraphicsPath.prototype.wideLineTo = function (x, y) {
                this.lineTo(x, y);
            };
            GLGraphicsPath.prototype.wideMoveTo = function (x, y) {
                this.moveTo(x, y);
            };
            GLGraphicsPath.prototype.arc = function (x, y, r, a0, a1) {
                var da = Math.PI / 4;
                var x0 = r;
                var y0 = 0;
                var sin = Math.sin(da);
                var cos = Math.cos(da);
                this.moveTo(x0 + x, y0 + y);
                for (var a = a0; a < a1; a += da) {
                    var x_ = x0;
                    x0 = x0 * cos - y0 * sin;
                    y0 = x_ * sin + y0 * cos;
                    this.lineTo(x0 + x, y0 + y);
                }
            };
            GLGraphicsPath.prototype.rect = function (x, y, w, h) {
                this.moveTo(x, y);
                this.lineTo(x + w, y);
                this.lineTo(x + w, y + h);
                this.lineTo(x, y + h);
            };
            GLGraphicsPath.prototype.makePoly = function () {
                this.poly = this.polys.array[this.polys.length];
                if (this.poly == null) {
                    this.poly = this.polys.array[this.polys.length] = new __native.MemArray;
                }
                this.polys.length++;
            };
            return GLGraphicsPath;
        }(__native.GraphicsPath));
        __native.GLGraphicsPath = GLGraphicsPath;
    })(__native = flash.__native || (flash.__native = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var __native;
    (function (__native) {
        __native.Context3D = flash.display3D.Context3D;
        __native.IndexBuffer3D = flash.display3D.IndexBuffer3D;
        var GLIndexBufferSet = (function () {
            function GLIndexBufferSet(data, usage) {
                this.dirty = true;
                this.usage = usage;
                this.data = data;
            }
            GLIndexBufferSet.prototype.getBuff = function (ctx) {
                if (this.buff == null) {
                    this.buff = ctx.createIndexBuffer(this.data.length);
                    this.buff.gl.bindBuffer(this.buff.gl.ELEMENT_ARRAY_BUFFER, this.buff.buff);
                    this.buff.gl.bufferData(this.buff.gl.ELEMENT_ARRAY_BUFFER, this.data, this.usage);
                    this.dirty = false;
                }
                if (this.dirty) {
                    this.buff.gl.bindBuffer(this.buff.gl.ELEMENT_ARRAY_BUFFER, this.buff.buff);
                    this.buff.gl.bufferSubData(this.buff.gl.ELEMENT_ARRAY_BUFFER, 0, this.data);
                    this.dirty = false;
                }
                return this.buff;
            };
            return GLIndexBufferSet;
        }());
        __native.GLIndexBufferSet = GLIndexBufferSet;
    })(__native = flash.__native || (flash.__native = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var __native;
    (function (__native) {
        __native.Context3D = flash.display3D.Context3D;
        __native.VertexBuffer3D = flash.display3D.VertexBuffer3D;
        var GLVertexBufferSet = (function () {
            function GLVertexBufferSet(data, data32PerVertex, usage) {
                this.data32PerVertex = 0;
                this.dirty = true;
                this.usage = usage;
                this.data32PerVertex = data32PerVertex;
                this.data = data;
            }
            GLVertexBufferSet.prototype.getBuff = function (ctx) {
                if (this.buff == null) {
                    this.buff = ctx.createVertexBuffer(this.data.length / this.data32PerVertex, this.data32PerVertex);
                    this.buff.gl.bindBuffer(this.buff.gl.ARRAY_BUFFER, this.buff.buff);
                    this.buff.gl.bufferData(this.buff.gl.ARRAY_BUFFER, this.data, this.usage);
                    this.dirty = false;
                }
                if (this.dirty) {
                    this.buff.gl.bindBuffer(this.buff.gl.ARRAY_BUFFER, this.buff.buff);
                    this.buff.gl.bufferSubData(this.buff.gl.ARRAY_BUFFER, 0, this.data);
                    this.dirty = false;
                }
                return this.buff;
            };
            return GLVertexBufferSet;
        }());
        __native.GLVertexBufferSet = GLVertexBufferSet;
    })(__native = flash.__native || (flash.__native = {}));
})(flash || (flash = {}));
var global;
(function (global) {
    global.ByteArray = flash.utils.ByteArray;
})(global || (global = {}));
var s3eUtils;
(function (s3eUtils) {
    s3eUtils.TextField = flash.text.TextField;
    s3eUtils.TextFormat = flash.text.TextFormat;
    function autoScale(textField, defaultSize, height) {
        if (defaultSize === void 0) { defaultSize = 14; }
        if (height === void 0) { height = 0; }
        var format = textField.defaultTextFormat;
        format.size = defaultSize;
        textField.setTextFormat(format);
        var size = defaultSize;
        var maxHeight = height > 0 ? height : textField.height - 10;
        var maxWidth = textField.width - 10;
        while (textField.textWidth > maxWidth || textField.textHeight > maxHeight) {
            if (size <= 8)
                break;
            format = textField.defaultTextFormat;
            format.size = size--;
            textField.setTextFormat(format);
        }
    }
    s3eUtils.autoScale = autoScale;
})(s3eUtils || (s3eUtils = {}));
var tools;
(function (tools) {
    var fps;
    (function (fps_2) {
        fps_2.Error = global.Error;
        var FrameRateStats = (function () {
            function FrameRateStats() {
                throw new fps_2.Error("Abstract class error");
            }
            FrameRateStats.time = function (value) {
                FrameRateStats.init();
                var frameTime = (1000 / FrameRateStats.FRAME_RATE) + 1;
                if (value > 1000)
                    value = 1000;
                if (value < 1)
                    value = 1;
                var fps = int(Math.max(Math.min(60 * (frameTime / value), FrameRateStats.FRAME_RATE), 1));
                FrameRateStats.map[fps - 1].count++;
            };
            Object.defineProperty(FrameRateStats, "average", {
                get: function () {
                    FrameRateStats.init();
                    var copy = FrameRateStats.map.concat().sort(FrameRateStats.compare.bind(this));
                    var main = copy[0];
                    var fps = main.fps;
                    for (var i = 1; i < FrameRateStats.FRAME_RATE; ++i) {
                        var fr = copy[i];
                        if (fr.count <= FrameRateStats.FRAME_RATE) {
                            continue;
                        }
                        if (!fr.count) {
                            break;
                        }
                        var p = fr.count / main.count;
                        var linear = (fps + fr.fps) / 2;
                        fps -= (fps - linear) * p;
                    }
                    return fps;
                },
                enumerable: true,
                configurable: true
            });
            FrameRateStats.compare = function (a, b) {
                if (!a.count && !b.count) {
                    if (a.fps > b.fps)
                        return -1;
                    else if (a.fps < b.fps)
                        return 1;
                    else
                        return 0;
                }
                if (!a.count)
                    return 1;
                if (!b.count)
                    return -1;
                if (a.count > b.count)
                    return -1;
                else if (a.count < b.count)
                    return 1;
                else if (a.fps > b.fps)
                    return -1;
                else if (a.fps < b.fps)
                    return 1;
                else
                    return 0;
            };
            FrameRateStats.FRAME_RATE = 60;
            FrameRateStats.map = [];
            FrameRateStats.init = function () {
                while (FrameRateStats.map.length < FrameRateStats.FRAME_RATE) {
                    FrameRateStats.map[FrameRateStats.map.length] = new fps_2.Frame(FrameRateStats.map.length + 1);
                }
            };
            return FrameRateStats;
        }());
        fps_2.FrameRateStats = FrameRateStats;
    })(fps = tools.fps || (tools.fps = {}));
})(tools || (tools = {}));
var tools;
(function (tools) {
    var init;
    (function (init) {
        init.Error = global.Error;
        var PreloadManager = (function () {
            function PreloadManager() {
                throw new init.Error("Abstract class error");
            }
            PreloadManager.start = function (handler) {
                PreloadManager.sActive = true;
                PreloadManager.sHandler = handler;
                var state;
                var weight = 0;
                for (var _i = 0, _a = PreloadManager.sStates; _i < _a.length; _i++) {
                    state = _a[_i];
                    weight += state.weight;
                }
                for (var _b = 0, _c = PreloadManager.sStates; _b < _c.length; _b++) {
                    state = _c[_b];
                    state.weight = (state.weight / weight) * 100;
                }
            };
            PreloadManager.stop = function () {
                PreloadManager.sActive = false;
                PreloadManager.sHandler = null;
            };
            PreloadManager.add = function (state) {
                PreloadManager.sStates[PreloadManager.sStates.length] = state;
            };
            Object.defineProperty(PreloadManager, "percent", {
                get: function () {
                    var p = 0;
                    for (var _i = 0, _a = PreloadManager.sStates; _i < _a.length; _i++) {
                        var state = _a[_i];
                        p += state.percent;
                    }
                    return p;
                },
                enumerable: true,
                configurable: true
            });
            PreloadManager.update = function (state, value) {
                if (!PreloadManager.sActive) {
                    return;
                }
                var ins = PreloadManager.byId(state);
                if (ins) {
                    ins.percent = value;
                    PreloadManager.report();
                }
            };
            PreloadManager.byId = function (id) {
                for (var _i = 0, _a = PreloadManager.sStates; _i < _a.length; _i++) {
                    var state = _a[_i];
                    if (state.id == id) {
                        return state;
                    }
                    state = state.byId(id);
                    if (state && state.id == id) {
                        return state;
                    }
                }
                return null;
            };
            PreloadManager.report = function () {
                if (!PreloadManager.sActive || PreloadManager.sHandler == null) {
                    return;
                }
                PreloadManager.sHandler(PreloadManager.percent);
            };
            PreloadManager.ST_ASSETS_ZIP = 0;
            PreloadManager.ST_ASSETS_ASM = 1;
            PreloadManager.ST_CLOUD_TIME = 2;
            PreloadManager.ST_CLOUD_LOAD = 3;
            PreloadManager.ST_VIEWER_CPP = 4;
            PreloadManager.ST_LOAD_PACKS = 5;
            PreloadManager.ST_CREATE_IMAGES = 6;
            PreloadManager.ST_CREATE_SOUNDS = 7;
            PreloadManager.sStates = [];
            PreloadManager.sActive = false;
            return PreloadManager;
        }());
        init.PreloadManager = PreloadManager;
    })(init = tools.init || (tools.init = {}));
})(tools || (tools = {}));
var global;
(function (global) {
    var XMLList = (function () {
        function XMLList() {
            this._xmlArray = [];
            this.addIndex(0);
        }
        XMLList.prototype.addIndex = function (idx) {
            var prop = "" + idx;
            var __get = function () {
                return this._xmlArray[idx];
            };
            var __set = function (newValue) {
                if (idx >= this._xmlArray.length)
                    this.appendChild(newValue);
                else
                    this.replaceChildAt(idx, newValue);
            };
            var descriptor = {
                "get": __get,
                "set": __set,
                enumerable: true,
                configurable: true
            };
            Object.defineProperty(this, prop, descriptor);
        };
        XMLList.prototype.appendChild = function (child) {
            this._xmlArray[this._xmlArray.length] = child;
            this.addIndex(this._xmlArray.length);
            do {
                if (!this._targetObject)
                    break;
                if (!this._targetProperty) {
                    this._targetObject.appendChild(child);
                    break;
                }
                var objToAppend = this._targetObject.child(this._targetProperty);
                if (!objToAppend.length()) {
                    this._targetObject.appendChild(child);
                    break;
                }
                this._targetObject.insertChildAfter(objToAppend[objToAppend.length() - 1], child);
            } while (false);
        };
        XMLList.prototype.$ = function (filter) {
            var list = new XMLList;
            for (var i = 0; i < this._xmlArray.length; i++) {
                var child = this._xmlArray[i];
                if (filter(child))
                    list.appendChild(child);
            }
            return global.XML.__index(list);
        };
        XMLList.prototype.attribute = function (attributeName) {
            var retVal = new XMLList();
            var len = this._xmlArray.length;
            for (var i = 0; i < len; i++) {
                var list = this._xmlArray[i].attribute(attributeName);
                if (list.length())
                    retVal.concat(list);
            }
            return global.XML.__index(retVal);
        };
        XMLList.prototype.attributes = function (toIndex) {
            if (toIndex === void 0) { toIndex = true; }
            var retVal = new XMLList();
            var len = this._xmlArray.length;
            for (var i = 0; i < len; i++) {
                var list = this._xmlArray[i].attributes();
                if (list.length())
                    retVal.concat(list);
            }
            return toIndex ? global.XML.__index(retVal) : retVal;
        };
        XMLList.prototype.child = function (propertyName) {
            var retVal = new XMLList();
            var propNum = parseInt(propertyName, 10);
            if (propNum.toString() == propertyName) {
                if (propNum >= 0 && propNum < this._xmlArray.length) {
                    retVal.appendChild(this._xmlArray[propNum]);
                    retVal.targetObject = this._xmlArray[propNum];
                }
                return retVal;
            }
            var len = this._xmlArray.length;
            for (var i = 0; i < len; i++) {
                var list = this._xmlArray[i].child(propertyName);
                if (list.length())
                    retVal.concat(list);
            }
            return global.XML.__index(retVal);
        };
        XMLList.prototype.children = function () {
            var retVal = new XMLList();
            var len = this._xmlArray.length;
            for (var i = 0; i < len; i++) {
                var list = this._xmlArray[i].children();
                if (list.length())
                    retVal.concat(list);
            }
            return global.XML.__index(retVal);
        };
        XMLList.prototype.comments = function () {
            var retVal = new XMLList();
            var len = this._xmlArray.length;
            for (var i = 0; i < len; i++) {
                var list = this._xmlArray[i].comments();
                if (list.length())
                    retVal.concat(list);
            }
            return retVal;
        };
        XMLList.prototype.concat = function (list) {
            if (list instanceof global.XML) {
                var newList = new XMLList();
                newList.appendChild(list);
                list = newList;
            }
            if (!(list instanceof XMLList))
                throw new TypeError("invalid type");
            var item;
            var len = list.length();
            var i = 0;
            while (i < len)
                this.appendChild(list[i++]);
            return global.XML.__index(this);
        };
        XMLList.prototype.contains = function (value) {
            var len = this._xmlArray.length;
            for (var i = 0; i < len; i++) {
                if (this._xmlArray[i].contains(value))
                    return true;
            }
            return false;
        };
        XMLList.prototype.copy = function () {
            var retVal = new XMLList();
            var len = this._xmlArray.length;
            for (var i = 0; i < len; i++)
                retVal.appendChild(this._xmlArray[i].copy());
            return global.XML.__index(retVal);
        };
        XMLList.prototype.descendants = function (name) {
            if (name === void 0) { name = "*"; }
            var retVal = new XMLList();
            var len = this._xmlArray.length;
            for (var i = 0; i < len; i++) {
                var list = this._xmlArray[i].descendants(name);
                if (list.length())
                    retVal.concat(list);
            }
            return global.XML.__index(retVal);
        };
        XMLList.prototype.elements = function (name, toIndex) {
            if (name === void 0) { name = "*"; }
            if (toIndex === void 0) { toIndex = true; }
            var retVal = new XMLList();
            var len = this._xmlArray.length;
            for (var i = 0; i < len; i++) {
                var list = this._xmlArray[i].elements(name);
                if (list.length())
                    retVal.concat(list);
            }
            return toIndex ? global.XML.__index(retVal) : retVal;
        };
        XMLList.prototype.elementNames = function () {
            var retVal = [];
            var i = 0;
            var len = this._xmlArray.length;
            while (i < len)
                retVal.push(i++);
            return retVal;
        };
        XMLList.prototype.equals = function (list) {
            return false;
        };
        XMLList.prototype.filter = function (callback) {
            var list = new XMLList();
            for (var i = 0; i < this._xmlArray.length; i++) {
                if (callback(this._xmlArray[i]))
                    list.appendChild(this._xmlArray[i]);
            }
            list.targetObject = this._targetObject;
            list.targetProperty = this._targetProperty;
            return global.XML.__index(list);
        };
        XMLList.prototype.hasComplexContent = function () {
            if (this._xmlArray.length == 0)
                return false;
            var len = this._xmlArray.length;
            for (var i = 1; i < len; i++) {
                if (this._xmlArray[i].hasComplexContent())
                    return true;
            }
            return false;
        };
        XMLList.prototype.hasOwnProperty = function (propertyName) {
            if (parseInt(propertyName, 10).toString() == propertyName) {
                return parseInt(propertyName, 10) < this._xmlArray.length;
            }
            var len = this._xmlArray.length;
            for (var i = 1; i < len; i++) {
                if (this._xmlArray[i].hasOwnProperty(propertyName))
                    return true;
            }
            return false;
        };
        XMLList.prototype.hasSimpleContent = function () {
            if (this._xmlArray.length == 0)
                return true;
            var len = this._xmlArray.length;
            for (var i = 1; i < len; i++) {
                if (this._xmlArray[i].hasComplexContent())
                    return false;
            }
            return true;
        };
        XMLList.prototype.length = function () {
            return this._xmlArray.length;
        };
        XMLList.prototype.name = function () {
            if (this._xmlArray.length == 1)
                return this._xmlArray[0].name();
            return null;
        };
        XMLList.prototype.normalize = function () {
            return this;
        };
        XMLList.prototype.parent = function () {
            if (this._xmlArray.length == 0)
                return undefined;
            var retVal = this._xmlArray[0].parent();
            var len = this._xmlArray.length;
            for (var i = 1; i < len; i++) {
                if (this._xmlArray[i].parent() != retVal)
                    return undefined;
            }
            return retVal;
        };
        XMLList.prototype.plus = function (rightHand) {
            if (rightHand instanceof global.XML || rightHand instanceof XMLList) {
                var list = new XMLList();
                list.concat(this);
                list.concat(rightHand);
                if (rightHand instanceof global.XML)
                    list.targetObject = rightHand;
                else {
                    list.targetObject = rightHand.targetObject;
                    list.targetProperty = rightHand.targetProperty;
                }
                return list;
            }
            if (typeof rightHand == 'string')
                return this.toString() + rightHand;
            if (typeof rightHand == 'number' && isNaN(rightHand))
                return NaN;
            if (isNaN(Number(this.toString())) || isNaN(Number(rightHand.toString())))
                return this.toString() + rightHand.toString();
            return Number(this.toString()) + rightHand;
        };
        XMLList.prototype.processingInstructions = function (name) {
            if (name === void 0) { name = "*"; }
            var retVal = new XMLList();
            if (!name)
                return retVal;
            var len = this._xmlArray.length;
            for (var i = 0; i < len; i++) {
                if (this._xmlArray[i].nodeKind() != "processing-instruction")
                    continue;
                if (name == "*") {
                    retVal.appendChild(this._xmlArray[i]);
                }
                else if (name == this._xmlArray[i].localName)
                    retVal.appendChild(this._xmlArray[i]);
            }
            return global.XML.__index(retVal);
        };
        XMLList.prototype.removeChild = function (child) {
            var i = 0;
            var len = 0;
            if (child instanceof XMLList) {
                len = child.length();
                for (i = 0; i < len; i++) {
                    this.removeChild(child[i]);
                }
            }
            else if (child instanceof global.XML) {
                len = this._xmlArray.length - 1;
                for (i = len; i >= 0; i--) {
                    if (this._xmlArray[i] == child) {
                        this._xmlArray.splice(i, 1);
                    }
                }
            }
        };
        XMLList.prototype.removeChildAt = function (idx) {
            if (idx >= 0 && idx < this._xmlArray.length)
                this._xmlArray.splice(idx, 1);
        };
        XMLList.prototype.replaceChildAt = function (idx, child) {
            var i = 0;
            var childToReplace = this._xmlArray[idx];
            if (childToReplace && this._targetObject) {
                this._targetObject.replaceChildAt(childToReplace.childIndex(), child);
            }
            if (child instanceof global.XML) {
                this._xmlArray[idx] = child;
            }
            else if (child instanceof XMLList) {
                var len = child.length();
                for (i = 0; i < len; i++) {
                    if (i == 0)
                        this._xmlArray[idx] = child[i];
                    else
                        this._xmlArray.splice(idx + i, 0, child[i]);
                }
            }
            while (idx++ < this._xmlArray.length) {
                if (!this.hasOwnProperty(idx))
                    this.addIndex(idx);
            }
        };
        Object.defineProperty(XMLList.prototype, "targetObject", {
            get: function () {
                return this._targetObject;
            },
            set: function (value) {
                this._targetObject = value;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(XMLList.prototype, "targetProperty", {
            get: function () {
                return this._targetProperty;
            },
            set: function (value) {
                this._targetProperty = value;
            },
            enumerable: true,
            configurable: true
        });
        XMLList.prototype.setAttribute = function (attr, value) {
            var len = this._xmlArray.length;
            for (var i = 0; i < len; i++)
                this._xmlArray[i].setAttribute(attr, value);
        };
        XMLList.prototype.setChild = function (elementName, elements) {
            if (this._xmlArray.length == 1)
                this._xmlArray[0].setChild(elementName, elements);
        };
        XMLList.prototype.text = function () {
            var retVal = new XMLList();
            var len = this._xmlArray.length;
            for (var i = 0; i < len; i++) {
                var list = this._xmlArray[i].text();
                if (list.length())
                    retVal.concat(list);
            }
            return retVal;
        };
        XMLList.prototype.toLocaleString = function () {
            var retVal = [];
            var len = this._xmlArray.length;
            for (var i = 0; i < len; i++) {
                var str = this._xmlArray[i].toLocaleString();
                if (str)
                    retVal.push(str);
            }
            return retVal.join("");
        };
        XMLList.prototype.toString = function () {
            var retVal = [];
            var len = this._xmlArray.length;
            for (var i = 0; i < len; i++) {
                var str = this._xmlArray[i].toString();
                if (str)
                    retVal.push(str);
            }
            return retVal.join("\n");
        };
        XMLList.prototype.toXMLString = function () {
            var retVal = [];
            var len = this._xmlArray.length;
            for (var i = 0; i < len; i++) {
                var str = this._xmlArray[i].toXMLString();
                if (str)
                    retVal.push(str);
            }
            return retVal.join("\n");
        };
        XMLList.prototype.valueOf = function () {
            return this;
        };
        return XMLList;
    }());
    global.XMLList = XMLList;
})(global || (global = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        var sdk;
        (function (sdk) {
            var stream;
            (function (stream) {
                stream.EventStats = global.EventStats;
                stream.ApiCallbackEvent = api.odnoklassniki.events.ApiCallbackEvent;
                stream.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
                var Stream = (function () {
                    function Stream() {
                    }
                    Stream.publish = function (confirmation_message, publish_message, callback, uid, attachment, action_links) {
                        if (uid === void 0) { uid = ""; }
                        if (attachment === void 0) { attachment = null; }
                        if (action_links === void 0) { action_links = null; }
                        Stream._callback = callback;
                        if (!stream.Odnoklassniki.hasEventListener(stream.ApiCallbackEvent.CALL_BACK)) {
                            stream.Odnoklassniki.addEventListener(stream.ApiCallbackEvent.CALL_BACK, Stream.onCallBack.bind(this));
                        }
                        Stream._request = { method: "stream.publish", message: publish_message };
                        if (uid)
                            Stream._request.uid = uid;
                        if (attachment)
                            Stream._request.attachment = JSON.stringify(attachment);
                        if (action_links)
                            Stream._request.action_links = JSON.stringify(action_links);
                        Stream._request = stream.Odnoklassniki.getSignature(Stream._request, true);
                        stream.Odnoklassniki.showConfirmation("stream.publish", confirmation_message, Stream._request.sig);
                    };
                    Stream.onCallBack = function (event) {
                        stream.EventStats.handle(Stream, event);
                        if (event.method == "showConfirmation") {
                            switch (event.result) {
                                case "ok":
                                    Stream._request["resig"] = event.data;
                                    stream.Odnoklassniki.callRestApi("stream.publish", Stream.onStreamPublish.bind(this), Stream._request);
                                    break;
                                case "cancel":
                                    Stream._callback({ "cancel": "notification has been canceled" });
                                    break;
                            }
                        }
                    };
                    Stream.onStreamPublish = function (d) {
                        Stream._callback(d);
                    };
                    return Stream;
                }());
                stream.Stream = Stream;
            })(stream = sdk.stream || (sdk.stream = {}));
        })(sdk = odnoklassniki.sdk || (odnoklassniki.sdk = {}));
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            var data;
            (function (data) {
                data.Error = global.Error;
                data.FacebookLimits = com.facebook.graph.core.FacebookLimits;
                var Batch = (function () {
                    function Batch() {
                        this._requests = [];
                    }
                    Object.defineProperty(Batch.prototype, "requests", {
                        get: function () {
                            return this._requests;
                        },
                        enumerable: true,
                        configurable: true
                    });
                    Batch.prototype.add = function (relativeURL, callback, params, requestMethod) {
                        if (callback === void 0) { callback = null; }
                        if (params === void 0) { params = null; }
                        if (requestMethod === void 0) { requestMethod = 'GET'; }
                        if (this._requests.length == data.FacebookLimits.BATCH_REQUESTS) {
                            throw new data.Error('Facebook limits you to ' + data.FacebookLimits.BATCH_REQUESTS + ' requests in a single batch.');
                        }
                        this._requests.push(new data.BatchItem(relativeURL, callback, params, requestMethod));
                    };
                    return Batch;
                }());
                data.Batch = Batch;
            })(data = graph.data || (graph.data = {}));
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var datas;
(function (datas) {
    datas.EventStats = global.EventStats;
    datas.GLog = global.GLog;
    datas.ErrorEvent = flash.events.ErrorEvent;
    datas.Event = flash.events.Event;
    datas.EventDispatcher = flash.events.EventDispatcher;
    datas.ProgressEvent = flash.events.ProgressEvent;
    var DataAbstract = (function (_super) {
        __extends(DataAbstract, _super);
        function DataAbstract(pack, fid, id, url, dynamic, md5) {
            if (dynamic === void 0) { dynamic = false; }
            if (md5 === void 0) { md5 = null; }
            var _this = _super.call(this) || this;
            _this.pack = 0;
            _this.fid = 0;
            _this.id = 0;
            _this.dynamic = false;
            _this.mStatus = 0;
            _this.pack = pack;
            _this.fid = fid;
            _this.id = id;
            _this.url = url;
            _this.dynamic = dynamic;
            _this.md5 = md5;
            _this.mPercentLoaded = 0;
            _this.mStatus = DataAbstract.STATUS_INIT;
            if (!dynamic) {
                datas.AssetsData.loadPack(pack);
            }
            return _this;
        }
        Object.defineProperty(DataAbstract.prototype, "status", {
            get: function () {
                return this.mStatus;
            },
            set: function (value) {
                this.mStatus = value;
            },
            enumerable: true,
            configurable: true
        });
        DataAbstract.prototype.startLoad = function () { };
        DataAbstract.prototype.readyToDestroy = function () { };
        DataAbstract.prototype.startDestroy = function () { };
        Object.defineProperty(DataAbstract.prototype, "percentLoaded", {
            get: function () {
                return this.mPercentLoaded;
            },
            enumerable: true,
            configurable: true
        });
        DataAbstract.prototype.onProgress = function (event) {
            if (event) {
                this.mPercentLoaded = event.bytesLoaded / event.bytesTotal;
            }
        };
        DataAbstract.prototype.onComplete = function (event) {
            if (event === void 0) { event = null; }
            datas.EventStats.handle(this, event);
            this.mPercentLoaded = 1;
            this.status = DataAbstract.STATUS_COMPLETE;
        };
        DataAbstract.prototype.onError = function (event) {
            datas.EventStats.handle(this, event);
            var text = event ? event.text : 'unknown';
            datas.GLog.print(toString() + " Error with text=" + text);
            this.status = DataAbstract.STATUS_ERROR;
        };
        DataAbstract.STATUS_INIT = -1;
        DataAbstract.STATUS_COMPLETE = 0;
        DataAbstract.STATUS_LOADING = 1;
        DataAbstract.STATUS_ERROR = 2;
        DataAbstract.STATUS_READY_TO_DESTROY = 3;
        DataAbstract.sEventComplete = new datas.Event(datas.Event.COMPLETE);
        return DataAbstract;
    }(datas.EventDispatcher));
    datas.DataAbstract = DataAbstract;
})(datas || (datas = {}));
var datas;
(function (datas) {
    datas.ByteArray = flash.utils.ByteArray;
    var DataBytes = (function (_super) {
        __extends(DataBytes, _super);
        function DataBytes(pack, fid, dynamic, md5) {
            return _super.call(this, pack, fid, -1, null, dynamic, md5) || this;
        }
        DataBytes.prototype.startLoad = function () {
            datas.AssetsData.getAsset(this.pack, this.fid, this.onLoadComplete.bind(this));
        };
        DataBytes.prototype.startDestroy = function () {
            this.bytes = null;
        };
        DataBytes.prototype.onLoadComplete = function (result) {
            this.bytes = result;
            this.status = datas.DataAbstract.STATUS_COMPLETE;
        };
        return DataBytes;
    }(datas.DataAbstract));
    datas.DataBytes = DataBytes;
})(datas || (datas = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.SoundTransform = flash.media.SoundTransform;
        var SimpleButton = (function (_super) {
            __extends(SimpleButton, _super);
            function SimpleButton(upState, overState, downState, hitTestState) {
                if (upState === void 0) { upState = null; }
                if (overState === void 0) { overState = null; }
                if (downState === void 0) { downState = null; }
                if (hitTestState === void 0) { hitTestState = null; }
                var _this = _super.call(this) || this;
                _this.enabled = false;
                _this.trackAsMenu = false;
                _this.useHandCursor = false;
                _this.upState = upState;
                _this.overState = overState;
                _this.downState = downState;
                _this.hitTestState = hitTestState;
                return _this;
            }
            return SimpleButton;
        }(display.InteractiveObject));
        display.SimpleButton = SimpleButton;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var textures;
        (function (textures) {
            textures.BitmapData = flash.display.BitmapData;
            textures.ByteArray = flash.utils.ByteArray;
            var CubeTexture = (function (_super) {
                __extends(CubeTexture, _super);
                function CubeTexture() {
                    return _super.call(this) || this;
                }
                CubeTexture.prototype.uploadFromBitmapData = function (param1, param2, param3) {
                    if (param3 === void 0) { param3 = 0; }
                };
                CubeTexture.prototype.uploadFromByteArray = function (param1, param2, param3, param4) {
                    if (param4 === void 0) { param4 = 0; }
                };
                CubeTexture.prototype.uploadCompressedTextureFromByteArray = function (param1, param2, param3) {
                    if (param3 === void 0) { param3 = false; }
                };
                return CubeTexture;
            }(textures.TextureBase));
            textures.CubeTexture = CubeTexture;
        })(textures = display3D.textures || (display3D.textures = {}));
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var textures;
        (function (textures) {
            textures.BitmapData = flash.display.BitmapData;
            textures.ByteArray = flash.utils.ByteArray;
            var RectangleTexture = (function (_super) {
                __extends(RectangleTexture, _super);
                function RectangleTexture() {
                    return _super.call(this) || this;
                }
                RectangleTexture.prototype.uploadFromBitmapData = function (param1) { };
                RectangleTexture.prototype.uploadFromByteArray = function (param1, param2) { };
                return RectangleTexture;
            }(textures.TextureBase));
            textures.RectangleTexture = RectangleTexture;
        })(textures = display3D.textures || (display3D.textures = {}));
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        var textures;
        (function (textures) {
            textures.BitmapData = flash.display.BitmapData;
            textures.ByteArray = flash.utils.ByteArray;
            var Texture = (function (_super) {
                __extends(Texture, _super);
                function Texture() {
                    var _this = _super.call(this) || this;
                    _this.repeat = true;
                    return _this;
                }
                Texture.prototype.uploadFromBitmapData = function (bitmapData, maplevel) {
                    if (maplevel === void 0) { maplevel = 0; }
                    this.uploadFromImg(bitmapData.image, maplevel);
                };
                Texture.prototype.uploadFromImg = function (img, maplevel) {
                    if (maplevel === void 0) { maplevel = 0; }
                    this.gl.bindTexture(this.gl.TEXTURE_2D, this.texture);
                    this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, img);
                    if (this.repeat) {
                        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.REPEAT);
                        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.REPEAT);
                    }
                    else {
                        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);
                        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);
                    }
                    if (maplevel > 0) {
                        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);
                        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR_MIPMAP_NEAREST);
                        this.gl.generateMipmap(this.gl.TEXTURE_2D);
                    }
                    else {
                        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.NEAREST);
                        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.NEAREST);
                    }
                    this.gl.bindTexture(this.gl.TEXTURE_2D, null);
                };
                Texture.prototype.uploadFromByteArray = function (param1, param2, param3) {
                    if (param3 === void 0) { param3 = 0; }
                };
                Texture.prototype.uploadCompressedTextureFromByteArray = function (param1, param2, param3) {
                    if (param3 === void 0) { param3 = false; }
                };
                return Texture;
            }(textures.TextureBase));
            textures.Texture = Texture;
        })(textures = display3D.textures || (display3D.textures = {}));
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        events.Error = global.Error;
        var UncaughtErrorEvent = (function (_super) {
            __extends(UncaughtErrorEvent, _super);
            function UncaughtErrorEvent(type, bubbles, cancelable, error_in) {
                if (bubbles === void 0) { bubbles = true; }
                if (cancelable === void 0) { cancelable = true; }
                if (error_in === void 0) { error_in = null; }
                var _this = this;
                var as3error;
                if (error_in != null && error_in != undefined) {
                    if (error_in instanceof events.Error || error_in instanceof events.ErrorEvent) {
                        as3error = error_in;
                    }
                    else if (typeof error_in == 'string') {
                        as3error = new events.Error(error_in);
                    }
                    else if (typeof error_in == 'object') {
                        as3error = new events.Error(error_in.message);
                        as3error.base = error_in;
                    }
                }
                as3error = as3error || new events.Error;
                _this = _super.call(this, type, bubbles, cancelable, as3error.message || as3error.text) || this;
                _this._error = as3error;
                return _this;
            }
            Object.defineProperty(UncaughtErrorEvent.prototype, "error", {
                get: function () {
                    return this._error;
                },
                enumerable: true,
                configurable: true
            });
            UncaughtErrorEvent.UNCAUGHT_ERROR = "uncaughtError";
            return UncaughtErrorEvent;
        }(events.ErrorEvent));
        events.UncaughtErrorEvent = UncaughtErrorEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var external;
    (function (external) {
        external.Error = global.Error;
        external.XML = global.XML;
        external.XMLList = global.XMLList;
        var ExternalInterface = (function () {
            function ExternalInterface() {
                throw new external.Error('Abstract class error');
            }
            Object.defineProperty(ExternalInterface, "available", {
                get: function () {
                    return true;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(ExternalInterface, "objectID", {
                get: function () {
                    return ExternalInterface.__OBJECT_ID;
                },
                set: function (value) {
                    ExternalInterface.__OBJECT_ID = value;
                },
                enumerable: true,
                configurable: true
            });
            ExternalInterface.addCallback = function (functionName, closure) {
                ExternalInterface.__init();
                ExternalInterface.__self[functionName] = closure;
            };
            ExternalInterface.call = function (functionName) {
                var args = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    args[_i - 1] = arguments[_i];
                }
                var CDATA = '<![CDATA[';
                ExternalInterface.__init();
                var CDATAIndex = -1;
                if (functionName instanceof external.XML) {
                    var text = functionName.text();
                    if (text.length()) {
                        functionName = text[0].getValue();
                    }
                    else {
                        functionName = functionName.toXMLString();
                    }
                    CDATAIndex = functionName.indexOf(CDATA);
                    if (CDATAIndex >= 0) {
                        functionName = functionName.substring(CDATAIndex + CDATA.length, functionName.indexOf(']]>'));
                    }
                }
                var functionIndex = functionName.indexOf('function');
                if (functionIndex >= 0) {
                    functionName = functionName.substring(functionName.indexOf('{', functionIndex) + 1, functionName.lastIndexOf('}'));
                }
                if (CDATAIndex == -1 && functionName.indexOf('=') == -1 && functionName.indexOf('{') == -1) {
                    if (functionName.indexOf('return') == -1) {
                        functionName = 'return ' + functionName;
                        if (functionName.indexOf('(') == -1) {
                            functionName += '(' + ExternalInterface.newParameters(args.length).join(',') + ')';
                        }
                    }
                }
                return ExternalInterface.newFunction(functionName, ExternalInterface.newParameters(args.length)).apply(null, args);
            };
            ExternalInterface.__init = function () {
                if (ExternalInterface.__inited)
                    return;
                ExternalInterface.__self = document.createElement('object');
                ExternalInterface.__self.id = ExternalInterface.__OBJECT_ID;
                document.getElementsByTagName('head')[0].appendChild(ExternalInterface.__self);
                ExternalInterface.__inited = true;
            };
            ExternalInterface.newFunction = function (code, args) {
                switch (args.length) {
                    case 0: return new Function(code);
                    case 1: return new Function(args.shift(), code);
                    case 2: return new Function(args.shift(), args.shift(), code);
                    case 3: return new Function(args.shift(), args.shift(), args.shift(), code);
                    case 4: return new Function(args.shift(), args.shift(), args.shift(), args.shift(), code);
                    case 5: return new Function(args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), code);
                    case 6: return new Function(args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), code);
                    case 7: return new Function(args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), code);
                    case 8: return new Function(args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), code);
                    case 9: return new Function(args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), code);
                    case 10: return new Function(args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), args.shift(), code);
                }
                throw new external.Error('Too much arguments');
            };
            ExternalInterface.newParameters = function (length) {
                var list = [];
                while (list.length < length)
                    list.push('__arg' + list.length);
                return list;
            };
            ExternalInterface.__inited = false;
            return ExternalInterface;
        }());
        external.ExternalInterface = ExternalInterface;
    })(external = flash.external || (flash.external = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var geom;
    (function (geom) {
        geom.Error = global.Error;
        var Matrix3D = (function () {
            function Matrix3D(v) {
                if (v === void 0) { v = null; }
                if (v != null && v.length === 16)
                    this.rawData = v;
                else
                    this.rawData = [1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0];
            }
            Object.defineProperty(Matrix3D.prototype, "determinant", {
                get: function () {
                    return (this.rawData[0] * this.rawData[5] - this.rawData[4] * this.rawData[1]) * (this.rawData[10] * this.rawData[15] - this.rawData[14] * this.rawData[11]) - (this.rawData[0] * this.rawData[9] - this.rawData[8] * this.rawData[1]) * (this.rawData[6] * this.rawData[15] - this.rawData[14] * this.rawData[7]) + (this.rawData[0] * this.rawData[13] - this.rawData[12] * this.rawData[1]) * (this.rawData[6] * this.rawData[11] - this.rawData[10] * this.rawData[7]) + (this.rawData[4] * this.rawData[9] - this.rawData[8] * this.rawData[5]) * (this.rawData[2] * this.rawData[15] - this.rawData[14] * this.rawData[3]) - (this.rawData[4] * this.rawData[13] - this.rawData[12] * this.rawData[5]) * (this.rawData[2] * this.rawData[11] - this.rawData[10] * this.rawData[3]) + (this.rawData[8] * this.rawData[13] - this.rawData[12] * this.rawData[9]) * (this.rawData[2] * this.rawData[7] - this.rawData[6] * this.rawData[3]);
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Matrix3D.prototype, "position", {
                get: function () { return new flash.geom.Vector3D(this.rawData[12], this.rawData[13], this.rawData[14]); },
                set: function (val) {
                    this.rawData[12] = val.x;
                    this.rawData[13] = val.y;
                    this.rawData[14] = val.z;
                },
                enumerable: true,
                configurable: true
            });
            Matrix3D.prototype.append = function (lhs) {
                var m111 = this.rawData[0];
                var m121 = this.rawData[4];
                var m131 = this.rawData[8];
                var m141 = this.rawData[12];
                var m112 = this.rawData[1];
                var m122 = this.rawData[5];
                var m132 = this.rawData[9];
                var m142 = this.rawData[13];
                var m113 = this.rawData[2];
                var m123 = this.rawData[6];
                var m133 = this.rawData[10];
                var m143 = this.rawData[14];
                var m114 = this.rawData[3];
                var m124 = this.rawData[7];
                var m134 = this.rawData[11];
                var m144 = this.rawData[15];
                var m211 = lhs.rawData[0];
                var m221 = lhs.rawData[4];
                var m231 = lhs.rawData[8];
                var m241 = lhs.rawData[12];
                var m212 = lhs.rawData[1];
                var m222 = lhs.rawData[5];
                var m232 = lhs.rawData[9];
                var m242 = lhs.rawData[13];
                var m213 = lhs.rawData[2];
                var m223 = lhs.rawData[6];
                var m233 = lhs.rawData[10];
                var m243 = lhs.rawData[14];
                var m214 = lhs.rawData[3];
                var m224 = lhs.rawData[7];
                var m234 = lhs.rawData[11];
                var m244 = lhs.rawData[15];
                this.rawData[0] = m111 * m211 + m112 * m221 + m113 * m231 + m114 * m241;
                this.rawData[1] = m111 * m212 + m112 * m222 + m113 * m232 + m114 * m242;
                this.rawData[2] = m111 * m213 + m112 * m223 + m113 * m233 + m114 * m243;
                this.rawData[3] = m111 * m214 + m112 * m224 + m113 * m234 + m114 * m244;
                this.rawData[4] = m121 * m211 + m122 * m221 + m123 * m231 + m124 * m241;
                this.rawData[5] = m121 * m212 + m122 * m222 + m123 * m232 + m124 * m242;
                this.rawData[6] = m121 * m213 + m122 * m223 + m123 * m233 + m124 * m243;
                this.rawData[7] = m121 * m214 + m122 * m224 + m123 * m234 + m124 * m244;
                this.rawData[8] = m131 * m211 + m132 * m221 + m133 * m231 + m134 * m241;
                this.rawData[9] = m131 * m212 + m132 * m222 + m133 * m232 + m134 * m242;
                this.rawData[10] = m131 * m213 + m132 * m223 + m133 * m233 + m134 * m243;
                this.rawData[11] = m131 * m214 + m132 * m224 + m133 * m234 + m134 * m244;
                this.rawData[12] = m141 * m211 + m142 * m221 + m143 * m231 + m144 * m241;
                this.rawData[13] = m141 * m212 + m142 * m222 + m143 * m232 + m144 * m242;
                this.rawData[14] = m141 * m213 + m142 * m223 + m143 * m233 + m144 * m243;
                this.rawData[15] = m141 * m214 + m142 * m224 + m143 * m234 + m144 * m244;
            };
            Matrix3D.prototype.appendRotation = function (degrees, axis, pivotPoint) {
                if (pivotPoint === void 0) { pivotPoint = null; }
                var m = Matrix3D.getAxisRotation(axis.x, axis.y, axis.z, degrees);
                if (pivotPoint != null) {
                    var p = pivotPoint;
                    m.appendTranslation(p.x, p.y, p.z);
                }
                ;
                this.append(m);
            };
            Matrix3D.prototype.appendScale = function (xScale, yScale, zScale) {
                this.rawData[0] *= xScale;
                this.rawData[1] *= xScale;
                this.rawData[2] *= xScale;
                this.rawData[3] *= xScale;
                this.rawData[4] *= yScale;
                this.rawData[5] *= yScale;
                this.rawData[6] *= yScale;
                this.rawData[7] *= yScale;
                this.rawData[8] *= zScale;
                this.rawData[9] *= zScale;
                this.rawData[10] *= zScale;
                this.rawData[11] *= zScale;
            };
            Matrix3D.prototype.appendTranslation = function (x, y, z) {
                this.rawData[12] += x;
                this.rawData[13] += y;
                this.rawData[14] += z;
            };
            Matrix3D.prototype.clone = function () {
                return new Matrix3D(this.rawData.concat());
            };
            Matrix3D.prototype.copyColumnFrom = function (column, vector3D) {
                switch (column) {
                    case 0:
                        {
                            this.rawData[0] = vector3D.x;
                            this.rawData[1] = vector3D.y;
                            this.rawData[2] = vector3D.z;
                            this.rawData[3] = vector3D.w;
                        }
                        break;
                    case 1:
                        {
                            this.rawData[4] = vector3D.x;
                            this.rawData[5] = vector3D.y;
                            this.rawData[6] = vector3D.z;
                            this.rawData[7] = vector3D.w;
                        }
                        break;
                    case 2:
                        {
                            this.rawData[8] = vector3D.x;
                            this.rawData[9] = vector3D.y;
                            this.rawData[10] = vector3D.z;
                            this.rawData[11] = vector3D.w;
                        }
                        break;
                    case 3:
                        {
                            this.rawData[12] = vector3D.x;
                            this.rawData[13] = vector3D.y;
                            this.rawData[14] = vector3D.z;
                            this.rawData[15] = vector3D.w;
                        }
                        break;
                    default:
                        throw new geom.Error("Error, Column " + column + " out of bounds [0, ..., 3]");
                }
            };
            Matrix3D.prototype.copyColumnTo = function (column, vector3D) {
                var c4 = column * 4;
                vector3D.x = this.rawData[c4];
                vector3D.y = this.rawData[1 + c4];
                vector3D.z = this.rawData[2 + c4];
                vector3D.w = this.rawData[3 + c4];
            };
            Matrix3D.prototype.copyFrom = function (other) {
                this.rawData = other.rawData.concat();
            };
            Matrix3D.prototype.copyRawDataFrom = function (vector, index, transpose) {
                if (index === void 0) { index = 0; }
                if (transpose === void 0) { transpose = false; }
                if (transpose)
                    this.transpose();
                var l = vector.length - index;
                {
                    var _g = 0;
                    while (_g < int(l)) {
                        var c = _g++;
                        this.rawData[c] = vector[c + index];
                    }
                }
                ;
                if (transpose)
                    this.transpose();
            };
            Matrix3D.prototype.copyRawDataTo = function (vector, index, transpose) {
                if (index === void 0) { index = 0; }
                if (transpose === void 0) { transpose = false; }
                if (transpose)
                    this.transpose();
                var l = this.rawData.length;
                {
                    var _g = 0;
                    while (_g < l) {
                        var c = _g++;
                        vector[c + index] = this.rawData[c];
                    }
                }
                ;
                if (transpose)
                    this.transpose();
            };
            Matrix3D.prototype.copyRowFrom = function (row, vector3D) {
                switch (row) {
                    case 0:
                        {
                            this.rawData[0] = vector3D.x;
                            this.rawData[4] = vector3D.y;
                            this.rawData[8] = vector3D.z;
                            this.rawData[12] = vector3D.w;
                        }
                        break;
                    case 1:
                        {
                            this.rawData[1] = vector3D.x;
                            this.rawData[5] = vector3D.y;
                            this.rawData[9] = vector3D.z;
                            this.rawData[13] = vector3D.w;
                        }
                        break;
                    case 2:
                        {
                            this.rawData[2] = vector3D.x;
                            this.rawData[6] = vector3D.y;
                            this.rawData[10] = vector3D.z;
                            this.rawData[14] = vector3D.w;
                        }
                        break;
                    case 3:
                        {
                            this.rawData[3] = vector3D.x;
                            this.rawData[7] = vector3D.y;
                            this.rawData[11] = vector3D.z;
                            this.rawData[15] = vector3D.w;
                        }
                        break;
                    default:
                        throw new geom.Error("Error, Row " + ("" + row) + " out of bounds [0, ..., 3]");
                }
            };
            Matrix3D.prototype.copyRowTo = function (row, vector3D) {
                vector3D.x = this.rawData[row];
                vector3D.y = this.rawData[4 + row];
                vector3D.z = this.rawData[8 + row];
                vector3D.w = this.rawData[12 + row];
            };
            Matrix3D.prototype.copyToMatrix3D = function (other) {
                other.rawData = this.rawData.concat();
            };
            Matrix3D.prototype.decompose = function (orientationStyle) {
                if (orientationStyle === void 0) { orientationStyle = null; }
                if (orientationStyle == null)
                    orientationStyle = flash.geom.Orientation3D.EULER_ANGLES;
                var vec = new Array();
                var m = this.clone();
                var mr = m.rawData.concat();
                var pos = new flash.geom.Vector3D(mr[12], mr[13], mr[14]);
                var scale = new flash.geom.Vector3D();
                scale.x = Math.sqrt(mr[0] * mr[0] + mr[1] * mr[1] + mr[2] * mr[2]);
                scale.y = Math.sqrt(mr[4] * mr[4] + mr[5] * mr[5] + mr[6] * mr[6]);
                scale.z = Math.sqrt(mr[8] * mr[8] + mr[9] * mr[9] + mr[10] * mr[10]);
                if (mr[0] * (mr[5] * mr[10] - mr[6] * mr[9]) - mr[1] * (mr[4] * mr[10] - mr[6] * mr[8]) + mr[2] * (mr[4] * mr[9] - mr[5] * mr[8]) < 0)
                    scale.z = -scale.z;
                mr[0] /= scale.x;
                mr[1] /= scale.x;
                mr[2] /= scale.x;
                mr[4] /= scale.y;
                mr[5] /= scale.y;
                mr[6] /= scale.y;
                mr[8] /= scale.z;
                mr[9] /= scale.z;
                mr[10] /= scale.z;
                var rot = new flash.geom.Vector3D();
                switch (orientationStyle) {
                    case flash.geom.Orientation3D.AXIS_ANGLE:
                        {
                            rot.w = Math.acos((mr[0] + mr[5] + mr[10] - 1) / 2);
                            var len = Math.sqrt((mr[6] - mr[9]) * (mr[6] - mr[9]) + (mr[8] - mr[2]) * (mr[8] - mr[2]) + (mr[1] - mr[4]) * (mr[1] - mr[4]));
                            if (len != 0) {
                                rot.x = (mr[6] - mr[9]) / len;
                                rot.y = (mr[8] - mr[2]) / len;
                                rot.z = (mr[1] - mr[4]) / len;
                            }
                            else
                                rot.x = rot.y = rot.z = 0;
                        }
                        break;
                    case flash.geom.Orientation3D.QUATERNION:
                        {
                            var tr = (mr[0] + mr[5] + mr[10]);
                            if (tr > 0) {
                                rot.w = Math.sqrt(1 + tr) / 2;
                                rot.x = (mr[6] - mr[9]) / (4 * rot.w);
                                rot.y = (mr[8] - mr[2]) / (4 * rot.w);
                                rot.z = (mr[1] - mr[4]) / (4 * rot.w);
                            }
                            else if (mr[0] > mr[5] && mr[0] > mr[10]) {
                                rot.x = Math.sqrt(1 + mr[0] - mr[5] - mr[10]) / 2;
                                rot.w = (mr[6] - mr[9]) / (4 * rot.x);
                                rot.y = (mr[1] + mr[4]) / (4 * rot.x);
                                rot.z = (mr[8] + mr[2]) / (4 * rot.x);
                            }
                            else if (mr[5] > mr[10]) {
                                rot.y = Math.sqrt(1 + mr[5] - mr[0] - mr[10]) / 2;
                                rot.x = (mr[1] + mr[4]) / (4 * rot.y);
                                rot.w = (mr[8] - mr[2]) / (4 * rot.y);
                                rot.z = (mr[6] + mr[9]) / (4 * rot.y);
                            }
                            else {
                                rot.z = Math.sqrt(1 + mr[10] - mr[0] - mr[5]) / 2;
                                rot.x = (mr[8] + mr[2]) / (4 * rot.z);
                                rot.y = (mr[6] + mr[9]) / (4 * rot.z);
                                rot.w = (mr[1] - mr[4]) / (4 * rot.z);
                            }
                        }
                        break;
                    case flash.geom.Orientation3D.EULER_ANGLES:
                        {
                            rot.y = Math.asin(-mr[2]);
                            if (mr[2] != 1 && mr[2] != -1) {
                                rot.x = Math.atan2(mr[6], mr[10]);
                                rot.z = Math.atan2(mr[1], mr[0]);
                            }
                            else {
                                rot.z = 0;
                                rot.x = Math.atan2(mr[4], mr[5]);
                            }
                        }
                        break;
                }
                ;
                vec.push(pos);
                vec.push(rot);
                vec.push(scale);
                return vec;
            };
            Matrix3D.prototype.deltaTransformVector = function (v) {
                var x = v.x;
                var y = v.y;
                var z = v.z;
                return new flash.geom.Vector3D(x * this.rawData[0] + y * this.rawData[4] + z * this.rawData[8] + this.rawData[3], x * this.rawData[1] + y * this.rawData[5] + z * this.rawData[9] + this.rawData[7], x * this.rawData[2] + y * this.rawData[6] + z * this.rawData[10] + this.rawData[11], 0);
            };
            Matrix3D.prototype.identity = function () {
                this.rawData[0] = 1;
                this.rawData[1] = 0;
                this.rawData[2] = 0;
                this.rawData[3] = 0;
                this.rawData[4] = 0;
                this.rawData[5] = 1;
                this.rawData[6] = 0;
                this.rawData[7] = 0;
                this.rawData[8] = 0;
                this.rawData[9] = 0;
                this.rawData[10] = 1;
                this.rawData[11] = 0;
                this.rawData[12] = 0;
                this.rawData[13] = 0;
                this.rawData[14] = 0;
                this.rawData[15] = 1;
            };
            Matrix3D.prototype.interpolateTo = function (toMat, percent) {
                var _g = 0;
                while (_g < 16) {
                    var i = _g++;
                    this.rawData[i] = this.rawData[i] + (toMat.rawData[i] - this.rawData[i]) * percent;
                }
            };
            Matrix3D.prototype.invert = function () {
                var d = this.determinant;
                var invertable = Math.abs(d) > 0.00000000001;
                if (invertable) {
                    d = 1 / d;
                    var m11 = this.rawData[0];
                    var m21 = this.rawData[4];
                    var m31 = this.rawData[8];
                    var m41 = this.rawData[12];
                    var m12 = this.rawData[1];
                    var m22 = this.rawData[5];
                    var m32 = this.rawData[9];
                    var m42 = this.rawData[13];
                    var m13 = this.rawData[2];
                    var m23 = this.rawData[6];
                    var m33 = this.rawData[10];
                    var m43 = this.rawData[14];
                    var m14 = this.rawData[3];
                    var m24 = this.rawData[7];
                    var m34 = this.rawData[11];
                    var m44 = this.rawData[15];
                    this.rawData[0] = d * (m22 * (m33 * m44 - m43 * m34) - m32 * (m23 * m44 - m43 * m24) + m42 * (m23 * m34 - m33 * m24));
                    this.rawData[1] = -d * (m12 * (m33 * m44 - m43 * m34) - m32 * (m13 * m44 - m43 * m14) + m42 * (m13 * m34 - m33 * m14));
                    this.rawData[2] = d * (m12 * (m23 * m44 - m43 * m24) - m22 * (m13 * m44 - m43 * m14) + m42 * (m13 * m24 - m23 * m14));
                    this.rawData[3] = -d * (m12 * (m23 * m34 - m33 * m24) - m22 * (m13 * m34 - m33 * m14) + m32 * (m13 * m24 - m23 * m14));
                    this.rawData[4] = -d * (m21 * (m33 * m44 - m43 * m34) - m31 * (m23 * m44 - m43 * m24) + m41 * (m23 * m34 - m33 * m24));
                    this.rawData[5] = d * (m11 * (m33 * m44 - m43 * m34) - m31 * (m13 * m44 - m43 * m14) + m41 * (m13 * m34 - m33 * m14));
                    this.rawData[6] = -d * (m11 * (m23 * m44 - m43 * m24) - m21 * (m13 * m44 - m43 * m14) + m41 * (m13 * m24 - m23 * m14));
                    this.rawData[7] = d * (m11 * (m23 * m34 - m33 * m24) - m21 * (m13 * m34 - m33 * m14) + m31 * (m13 * m24 - m23 * m14));
                    this.rawData[8] = d * (m21 * (m32 * m44 - m42 * m34) - m31 * (m22 * m44 - m42 * m24) + m41 * (m22 * m34 - m32 * m24));
                    this.rawData[9] = -d * (m11 * (m32 * m44 - m42 * m34) - m31 * (m12 * m44 - m42 * m14) + m41 * (m12 * m34 - m32 * m14));
                    this.rawData[10] = d * (m11 * (m22 * m44 - m42 * m24) - m21 * (m12 * m44 - m42 * m14) + m41 * (m12 * m24 - m22 * m14));
                    this.rawData[11] = -d * (m11 * (m22 * m34 - m32 * m24) - m21 * (m12 * m34 - m32 * m14) + m31 * (m12 * m24 - m22 * m14));
                    this.rawData[12] = -d * (m21 * (m32 * m43 - m42 * m33) - m31 * (m22 * m43 - m42 * m23) + m41 * (m22 * m33 - m32 * m23));
                    this.rawData[13] = d * (m11 * (m32 * m43 - m42 * m33) - m31 * (m12 * m43 - m42 * m13) + m41 * (m12 * m33 - m32 * m13));
                    this.rawData[14] = -d * (m11 * (m22 * m43 - m42 * m23) - m21 * (m12 * m43 - m42 * m13) + m41 * (m12 * m23 - m22 * m13));
                    this.rawData[15] = d * (m11 * (m22 * m33 - m32 * m23) - m21 * (m12 * m33 - m32 * m13) + m31 * (m12 * m23 - m22 * m13));
                }
                ;
                return invertable;
            };
            Matrix3D.prototype.pointAt = function (pos, at, up) {
                if (at === void 0) { at = null; }
                if (up === void 0) { up = null; }
                if (at == null)
                    at = new flash.geom.Vector3D(0, 0, -1);
                if (up == null)
                    up = new flash.geom.Vector3D(0, -1, 0);
                var dir = at.subtract(pos);
                var vup = up.clone();
                var right;
                dir.normalize();
                vup.normalize();
                var dir2 = dir.clone();
                dir2.scaleBy(vup.dotProduct(dir));
                vup = vup.subtract(dir2);
                if (vup.length > 0)
                    vup.normalize();
                else if (dir.x != 0)
                    vup = new flash.geom.Vector3D(-dir.y, dir.x, 0);
                else
                    vup = new flash.geom.Vector3D(1, 0, 0);
                right = vup.crossProduct(dir);
                right.normalize();
                this.rawData[0] = right.x;
                this.rawData[4] = right.y;
                this.rawData[8] = right.z;
                this.rawData[12] = 0.0;
                this.rawData[1] = vup.x;
                this.rawData[5] = vup.y;
                this.rawData[9] = vup.z;
                this.rawData[13] = 0.0;
                this.rawData[2] = dir.x;
                this.rawData[6] = dir.y;
                this.rawData[10] = dir.z;
                this.rawData[14] = 0.0;
                this.rawData[3] = pos.x;
                this.rawData[7] = pos.y;
                this.rawData[11] = pos.z;
                this.rawData[15] = 1.0;
            };
            Matrix3D.prototype.prepend = function (rhs) {
                var m111 = rhs.rawData[0];
                var m121 = rhs.rawData[4];
                var m131 = rhs.rawData[8];
                var m141 = rhs.rawData[12];
                var m112 = rhs.rawData[1];
                var m122 = rhs.rawData[5];
                var m132 = rhs.rawData[9];
                var m142 = rhs.rawData[13];
                var m113 = rhs.rawData[2];
                var m123 = rhs.rawData[6];
                var m133 = rhs.rawData[10];
                var m143 = rhs.rawData[14];
                var m114 = rhs.rawData[3];
                var m124 = rhs.rawData[7];
                var m134 = rhs.rawData[11];
                var m144 = rhs.rawData[15];
                var m211 = this.rawData[0];
                var m221 = this.rawData[4];
                var m231 = this.rawData[8];
                var m241 = this.rawData[12];
                var m212 = this.rawData[1];
                var m222 = this.rawData[5];
                var m232 = this.rawData[9];
                var m242 = this.rawData[13];
                var m213 = this.rawData[2];
                var m223 = this.rawData[6];
                var m233 = this.rawData[10];
                var m243 = this.rawData[14];
                var m214 = this.rawData[3];
                var m224 = this.rawData[7];
                var m234 = this.rawData[11];
                var m244 = this.rawData[15];
                this.rawData[0] = m111 * m211 + m112 * m221 + m113 * m231 + m114 * m241;
                this.rawData[1] = m111 * m212 + m112 * m222 + m113 * m232 + m114 * m242;
                this.rawData[2] = m111 * m213 + m112 * m223 + m113 * m233 + m114 * m243;
                this.rawData[3] = m111 * m214 + m112 * m224 + m113 * m234 + m114 * m244;
                this.rawData[4] = m121 * m211 + m122 * m221 + m123 * m231 + m124 * m241;
                this.rawData[5] = m121 * m212 + m122 * m222 + m123 * m232 + m124 * m242;
                this.rawData[6] = m121 * m213 + m122 * m223 + m123 * m233 + m124 * m243;
                this.rawData[7] = m121 * m214 + m122 * m224 + m123 * m234 + m124 * m244;
                this.rawData[8] = m131 * m211 + m132 * m221 + m133 * m231 + m134 * m241;
                this.rawData[9] = m131 * m212 + m132 * m222 + m133 * m232 + m134 * m242;
                this.rawData[10] = m131 * m213 + m132 * m223 + m133 * m233 + m134 * m243;
                this.rawData[11] = m131 * m214 + m132 * m224 + m133 * m234 + m134 * m244;
                this.rawData[12] = m141 * m211 + m142 * m221 + m143 * m231 + m144 * m241;
                this.rawData[13] = m141 * m212 + m142 * m222 + m143 * m232 + m144 * m242;
                this.rawData[14] = m141 * m213 + m142 * m223 + m143 * m233 + m144 * m243;
                this.rawData[15] = m141 * m214 + m142 * m224 + m143 * m234 + m144 * m244;
            };
            Matrix3D.prototype.prependRotation = function (degrees, axis, pivotPoint) {
                if (pivotPoint === void 0) { pivotPoint = null; }
                var m = Matrix3D.getAxisRotation(axis.x, axis.y, axis.z, degrees);
                if (pivotPoint != null) {
                    var p = pivotPoint;
                    m.appendTranslation(p.x, p.y, p.z);
                }
                ;
                this.prepend(m);
            };
            Matrix3D.prototype.prependScale = function (xScale, yScale, zScale) {
                this.rawData[0] *= xScale;
                this.rawData[1] *= yScale;
                this.rawData[2] *= zScale;
                this.rawData[4] *= xScale;
                this.rawData[5] *= yScale;
                this.rawData[6] *= zScale;
                this.rawData[8] *= xScale;
                this.rawData[9] *= yScale;
                this.rawData[10] *= zScale;
                this.rawData[12] *= xScale;
                this.rawData[13] *= yScale;
                this.rawData[14] *= zScale;
            };
            Matrix3D.prototype.prependTranslation = function (x, y, z) {
                var m = Matrix3D.TEMP;
                m.identity();
                m.position = (new flash.geom.Vector3D(x, y, z));
                this.prepend(m);
            };
            Matrix3D.prototype.recompose = function (components, orientationStyle) {
                if (orientationStyle === void 0) { orientationStyle = null; }
                if (components.length < 3 || components[2].x == 0 || components[2].y == 0 || components[2].z == 0)
                    return false;
                if (orientationStyle == null)
                    orientationStyle = flash.geom.Orientation3D.EULER_ANGLES;
                this.identity();
                var scale = [];
                scale[0] = scale[1] = scale[2] = components[2].x;
                scale[4] = scale[5] = scale[6] = components[2].y;
                scale[8] = scale[9] = scale[10] = components[2].z;
                switch (orientationStyle) {
                    case flash.geom.Orientation3D.EULER_ANGLES:
                        {
                            var cx = Math.cos(components[1].x);
                            var cy = Math.cos(components[1].y);
                            var cz = Math.cos(components[1].z);
                            var sx = Math.sin(components[1].x);
                            var sy = Math.sin(components[1].y);
                            var sz = Math.sin(components[1].z);
                            this.rawData[0] = cy * cz * scale[0];
                            this.rawData[1] = cy * sz * scale[1];
                            this.rawData[2] = -sy * scale[2];
                            this.rawData[3] = 0;
                            this.rawData[4] = (sx * sy * cz - cx * sz) * scale[4];
                            this.rawData[5] = (sx * sy * sz + cx * cz) * scale[5];
                            this.rawData[6] = sx * cy * scale[6];
                            this.rawData[7] = 0;
                            this.rawData[8] = (cx * sy * cz + sx * sz) * scale[8];
                            this.rawData[9] = (cx * sy * sz - sx * cz) * scale[9];
                            this.rawData[10] = cx * cy * scale[10];
                            this.rawData[11] = 0;
                            this.rawData[12] = components[0].x;
                            this.rawData[13] = components[0].y;
                            this.rawData[14] = components[0].z;
                            this.rawData[15] = 1;
                        }
                        break;
                    default:
                        {
                            var x = components[1].x;
                            var y = components[1].y;
                            var z = components[1].z;
                            var w = components[1].w;
                            if (orientationStyle == flash.geom.Orientation3D.AXIS_ANGLE) {
                                x *= Math.sin(w / 2);
                                y *= Math.sin(w / 2);
                                z *= Math.sin(w / 2);
                                w = Math.cos(w / 2);
                            }
                            ;
                            this.rawData[0] = (1 - 2 * y * y - 2 * z * z) * scale[0];
                            this.rawData[1] = (2 * x * y + 2 * w * z) * scale[1];
                            this.rawData[2] = (2 * x * z - 2 * w * y) * scale[2];
                            this.rawData[3] = 0;
                            this.rawData[4] = (2 * x * y - 2 * w * z) * scale[4];
                            this.rawData[5] = (1 - 2 * x * x - 2 * z * z) * scale[5];
                            this.rawData[6] = (2 * y * z + 2 * w * x) * scale[6];
                            this.rawData[7] = 0;
                            this.rawData[8] = (2 * x * z + 2 * w * y) * scale[8];
                            this.rawData[9] = (2 * y * z - 2 * w * x) * scale[9];
                            this.rawData[10] = (1 - 2 * x * x - 2 * y * y) * scale[10];
                            this.rawData[11] = 0;
                            this.rawData[12] = components[0].x;
                            this.rawData[13] = components[0].y;
                            this.rawData[14] = components[0].z;
                            this.rawData[15] = 1;
                        }
                        break;
                }
                ;
                if (components[2].x === 0)
                    this.rawData[0] = 1e-15;
                if (components[2].y === 0)
                    this.rawData[5] = 1e-15;
                if (components[2].z === 0)
                    this.rawData[10] = 1e-15;
                return !(components[2].x === 0 || components[2].y === 0 || components[2].y === 0);
            };
            Matrix3D.prototype.transformVector = function (v) {
                var x = v.x;
                var y = v.y;
                var z = v.z;
                return new flash.geom.Vector3D(x * this.rawData[0] + y * this.rawData[4] + z * this.rawData[8] + this.rawData[12], x * this.rawData[1] + y * this.rawData[5] + z * this.rawData[9] + this.rawData[13], x * this.rawData[2] + y * this.rawData[6] + z * this.rawData[10] + this.rawData[14], x * this.rawData[3] + y * this.rawData[7] + z * this.rawData[11] + this.rawData[15]);
            };
            Matrix3D.prototype.transformVectors = function (vin, vout) {
                var i = 0;
                while (i + 3 <= vin.length) {
                    var x = vin[i];
                    var y = vin[i + 1];
                    var z = vin[i + 2];
                    vout[i] = x * this.rawData[0] + y * this.rawData[4] + z * this.rawData[8] + this.rawData[12];
                    vout[i + 1] = x * this.rawData[1] + y * this.rawData[5] + z * this.rawData[9] + this.rawData[13];
                    vout[i + 2] = x * this.rawData[2] + y * this.rawData[6] + z * this.rawData[10] + this.rawData[14];
                    i += 3;
                }
            };
            Matrix3D.prototype.transpose = function () {
                var oRawData = this.rawData.concat();
                this.rawData[1] = oRawData[4];
                this.rawData[2] = oRawData[8];
                this.rawData[3] = oRawData[12];
                this.rawData[4] = oRawData[1];
                this.rawData[6] = oRawData[9];
                this.rawData[7] = oRawData[13];
                this.rawData[8] = oRawData[2];
                this.rawData[9] = oRawData[6];
                this.rawData[11] = oRawData[14];
                this.rawData[12] = oRawData[3];
                this.rawData[13] = oRawData[7];
                this.rawData[14] = oRawData[11];
            };
            Matrix3D.interpolate = function (thisMat, toMat, percent) {
                var m = new Matrix3D();
                {
                    var _g = 0;
                    while (_g < 16) {
                        var i = _g++;
                        m.rawData[i] = thisMat.rawData[i] + (toMat.rawData[i] - thisMat.rawData[i]) * percent;
                    }
                }
                ;
                return m;
            };
            Matrix3D.getAxisRotation = function (x, y, z, degrees, target) {
                if (target === void 0) { target = null; }
                var m = target || new Matrix3D();
                var rad = -degrees * (Math.PI / 180);
                var c = Math.cos(rad);
                var s = Math.sin(rad);
                var t = 1.0 - c;
                m.rawData[0] = c + x * x * t;
                m.rawData[5] = c + y * y * t;
                m.rawData[10] = c + z * z * t;
                var tmp1 = x * y * t;
                var tmp2 = z * s;
                m.rawData[4] = tmp1 + tmp2;
                m.rawData[1] = tmp1 - tmp2;
                tmp1 = x * z * t;
                tmp2 = y * s;
                m.rawData[8] = tmp1 - tmp2;
                m.rawData[2] = tmp1 + tmp2;
                tmp1 = y * z * t;
                tmp2 = x * s;
                m.rawData[9] = tmp1 + tmp2;
                m.rawData[6] = tmp1 - tmp2;
                return m;
            };
            Matrix3D.TEMP = new Matrix3D;
            return Matrix3D;
        }());
        geom.Matrix3D = Matrix3D;
    })(geom = flash.geom || (flash.geom = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var media;
    (function (media) {
        media.ByteArray = flash.utils.ByteArray;
        var SoundMixer = (function (_super) {
            __extends(SoundMixer, _super);
            function SoundMixer() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            SoundMixer.stopAll = function () {
                while (media.Sound.channels.length) {
                    try {
                        media.Sound.channels[0].stop();
                    }
                    catch (err) { }
                }
            };
            SoundMixer.computeSpectrum = function (outputArray, FFTMode, stretchFactor) {
                if (FFTMode === void 0) { FFTMode = false; }
                if (stretchFactor === void 0) { stretchFactor = 0; }
            };
            Object.defineProperty(SoundMixer, "bufferTime", {
                get: function () {
                    return 0;
                },
                set: function (param1) {
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(SoundMixer, "soundTransform", {
                get: function () {
                    return null;
                },
                set: function (param1) {
                },
                enumerable: true,
                configurable: true
            });
            SoundMixer.areSoundsInaccessible = function () {
                return false;
            };
            Object.defineProperty(SoundMixer, "audioPlaybackMode", {
                get: function () {
                    return null;
                },
                set: function (mode) {
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(SoundMixer, "useSpeakerphoneForVoice", {
                get: function () {
                    return false;
                },
                set: function (b) {
                },
                enumerable: true,
                configurable: true
            });
            return SoundMixer;
        }(Object));
        media.SoundMixer = SoundMixer;
    })(media = flash.media || (flash.media = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var net;
    (function (net) {
        net.Error = global.Error;
        net.ByteArray = flash.utils.ByteArray;
        var SharedObject = (function () {
            function SharedObject() {
                this.data = {};
                this.objectEncoding = 0;
            }
            Object.defineProperty(SharedObject.prototype, "fps", {
                set: function (value) {
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(SharedObject.prototype, "size", {
                get: function () {
                    if (this.data) {
                        SharedObject._ba = SharedObject._ba || new net.ByteArray;
                        SharedObject._ba.position = 0;
                        SharedObject._ba.writeUTFBytes(JSON.stringify(this.data));
                        return SharedObject._ba.length;
                    }
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            SharedObject.prototype.clear = function () {
                this.data = undefined;
                window.localStorage.removeItem(this._name);
            };
            SharedObject.prototype.close = function () {
            };
            SharedObject.prototype.connect = function (myConnection, params) {
                if (params === void 0) { params = null; }
            };
            SharedObject.prototype.flush = function (minDiskSpace) {
                if (minDiskSpace === void 0) { minDiskSpace = 0; }
                var value = '{}';
                try {
                    value = JSON.stringify(this.data);
                }
                catch (e) { }
                try {
                    window.localStorage.setItem(this._name, value);
                    return net.SharedObjectFlushStatus.FLUSHED;
                }
                catch (e) { }
                return net.SharedObjectFlushStatus.PENDING;
            };
            SharedObject.getLocal = function (name, localPath, secure) {
                if (localPath === void 0) { localPath = null; }
                if (secure === void 0) { secure = false; }
                var so = new SharedObject();
                so._name = name;
                try {
                    so.data = JSON.parse(window.localStorage[name]);
                }
                catch (e) { }
                return so;
            };
            SharedObject.getRemote = function (name, remotePath, persistence, secure) {
                if (remotePath === void 0) { remotePath = null; }
                if (persistence === void 0) { persistence = false; }
                if (secure === void 0) { secure = false; }
                return null;
            };
            SharedObject.prototype.send = function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
            };
            SharedObject.prototype.setDirty = function (propertyName) {
            };
            SharedObject.prototype.setProperty = function (propertyName, value) {
                if (value === void 0) { value = null; }
            };
            SharedObject.defaultObjectEncoding = 0;
            SharedObject.preventBackup = false;
            return SharedObject;
        }());
        net.SharedObject = SharedObject;
    })(net = flash.net || (flash.net = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var system;
    (function (system) {
        system.DisplayObjectContainer = flash.display.DisplayObjectContainer;
        var LoaderContext = (function () {
            function LoaderContext(checkPolicyFile, applicationDomain, securityDomain) {
                if (checkPolicyFile === void 0) { checkPolicyFile = false; }
                if (applicationDomain === void 0) { applicationDomain = null; }
                if (securityDomain === void 0) { securityDomain = null; }
                this.allowCodeImport = false;
                this.allowLoadBytesCodeExecution = false;
                this.applicationDomain = null;
                this.checkPolicyFile = false;
                this.securityDomain = null;
                this.checkPolicyFile = checkPolicyFile;
                this.applicationDomain = applicationDomain;
                this.securityDomain = securityDomain;
            }
            return LoaderContext;
        }());
        system.LoaderContext = LoaderContext;
    })(system = flash.system || (flash.system = {}));
})(flash || (flash = {}));
var s3eUtils;
(function (s3eUtils) {
    s3eUtils.SecurityError = global.SecurityError;
    s3eUtils.Loader = flash.display.Loader;
    s3eUtils.ExternalInterface = flash.external.ExternalInterface;
    var SHttpSecure = (function (_super) {
        __extends(SHttpSecure, _super);
        function SHttpSecure() {
            var _newTarget = this.constructor;
            var _this = _super.call(this) || this;
            _this.embeddedUrlRetrieved = false;
            Object.setPrototypeOf(_this, _newTarget.prototype);
            ;
            return _this;
        }
        SHttpSecure.getInstance = function () {
            if (SHttpSecure.iInstance == null) {
                SHttpSecure.iInstance = new SHttpSecure();
            }
            return SHttpSecure.iInstance;
        };
        Object.defineProperty(SHttpSecure.prototype, "pageLocation", {
            get: function () {
                if (this.pageLocationValue != null) {
                    return this.pageLocationValue;
                }
                this.pageLocationValue = this.makeExternalCall("top.location.href.toString");
                return SHttpSecure.isNullOrEmpty(this.pageLocationValue) ? null : this.pageLocationValue;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SHttpSecure.prototype, "embeddedUrl", {
            get: function () {
                var resultURL = null;
                if (!this.embeddedUrlRetrieved) {
                    resultURL = this.loaderUrl;
                    if (resultURL == null) {
                        resultURL = this.pageLocation;
                    }
                    if (resultURL == null) {
                        resultURL = this.referrerUrl;
                    }
                    this.embeddedUrlRetrieved = true;
                    this.embeddedUrlValue = resultURL;
                }
                return this.embeddedUrlValue;
            },
            enumerable: true,
            configurable: true
        });
        SHttpSecure.prototype.useCorrectProtocolForUrl = function (aUrl) {
            return aUrl.replace(new RegExp("^((https?:)?\\/\\/)?"), this.embeddedUrlProtocol + "://");
        };
        Object.defineProperty(SHttpSecure.prototype, "referrerUrl", {
            get: function () {
                if (this.referrerUrlValue != null) {
                    return this.referrerUrlValue;
                }
                this.referrerUrlValue = this.makeExternalCall("document.referrer.toString");
                return SHttpSecure.isNullOrEmpty(this.referrerUrlValue) ? null : this.referrerUrlValue;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SHttpSecure.prototype, "isSecure", {
            get: function () {
                return this.embeddedUrlProtocol == SHttpSecure.HTTP_SECURE;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SHttpSecure.prototype, "loaderUrl", {
            get: function () {
                if (this.loaderUrlValue == null) {
                    this.loaderUrlValue = new s3eUtils.Loader().contentLoaderInfo.loaderURL;
                }
                return SHttpSecure.isNullOrEmpty(this.loaderUrlValue) ? null : this.loaderUrlValue;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SHttpSecure.prototype, "embeddedUrlProtocol", {
            get: function () {
                var tempURL = null;
                var aURLArray = null;
                if (this.embeddedUrlProtocolValue == null) {
                    tempURL = this.embeddedUrl;
                    this.embeddedUrlProtocolValue = SHttpSecure.DEFAULT_PROTOCOL;
                    if (tempURL != null) {
                        aURLArray = tempURL.split("/");
                        if (aURLArray[0] == SHttpSecure.HTTP_SECURE + ":") {
                            this.embeddedUrlProtocolValue = SHttpSecure.HTTP_SECURE;
                        }
                    }
                }
                return this.embeddedUrlProtocolValue;
            },
            enumerable: true,
            configurable: true
        });
        SHttpSecure.prototype.makeExternalCall = function (param1) {
            var rest = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                rest[_i - 1] = arguments[_i];
            }
            var functionName = param1;
            var args = rest;
            try {
                if (s3eUtils.ExternalInterface.available) {
                    args.unshift(functionName);
                    return s3eUtils.ExternalInterface.call.apply(null, args);
                }
            }
            catch (error) {
            }
            return null;
        };
        SHttpSecure.isNullOrEmpty = function (aStringToCheck) {
            if ((aStringToCheck) && (Boolean(SHttpSecure.trim(aStringToCheck)))) {
                return false;
            }
            return true;
        };
        SHttpSecure.trim = function (aStringToCheck) {
            return SHttpSecure.ltrim(SHttpSecure.rtrim(aStringToCheck));
        };
        SHttpSecure.ltrim = function (aStringToCheck) {
            var aLenght = aStringToCheck.length;
            var i = 0;
            while (i < aLenght) {
                if (aStringToCheck.charCodeAt(i) > 32) {
                    return aStringToCheck.substring(i);
                }
                i++;
            }
            return "";
        };
        SHttpSecure.rtrim = function (aStringToCheck) {
            var i = aStringToCheck.length;
            while (i--) {
                if (aStringToCheck.charCodeAt(i) > 32) {
                    return aStringToCheck.substring(0, i + 1);
                }
            }
            return "";
        };
        SHttpSecure.DEFAULT_PROTOCOL = SHttpSecure.HTTP;
        SHttpSecure.HTTP = "http";
        SHttpSecure.HTTP_SECURE = "https";
        return SHttpSecure;
    }(Object));
    s3eUtils.SHttpSecure = SHttpSecure;
})(s3eUtils || (s3eUtils = {}));
var global;
(function (global) {
    global.ExternalInterface = flash.external.ExternalInterface;
    function safeCall(func) {
        var available = global.ExternalInterface.available;
        if (!available)
            return null;
        try {
            return global.ExternalInterface.call(func);
        }
        catch (error) { }
        return null;
    }
    global.safeCall = safeCall;
})(global || (global = {}));
var tools;
(function (tools) {
    tools.Error = global.Error;
    tools.GLog = global.GLog;
    tools.ByteArray = flash.utils.ByteArray;
    var CacheService = (function () {
        function CacheService() {
            throw new tools.Error("Abstract class Error");
        }
        CacheService.get = function (key) {
            var bytes = CacheService.sCache[key];
            if (!bytes)
                bytes = CacheService.sEmptyBytes;
            tools.GLog.print("[CacheService] get " + key + ", len = " + bytes.length);
            bytes.position = 0;
            return bytes;
        };
        CacheService.set = function (params, data) {
            try {
                var obj = JSON.parse(params);
            }
            catch (error) {
                tools.GLog.print("[CacheService] error in parse json: " + params);
            }
            var key = obj.key;
            tools.GLog.print("[CacheService] set " + key);
            if (!key || !data)
                return;
            CacheService.sCache[key] = data;
        };
        CacheService.sCache = {};
        CacheService.sEmptyObject = {};
        CacheService.sEmptyBytes = new tools.ByteArray;
        return CacheService;
    }());
    tools.CacheService = CacheService;
})(tools || (tools = {}));
var tools;
(function (tools) {
    tools.Loader = flash.display.Loader;
    tools.IOErrorEvent = flash.events.IOErrorEvent;
    tools.URLLoaderDataFormat = flash.net.URLLoaderDataFormat;
    var CustomLoader = (function (_super) {
        __extends(CustomLoader, _super);
        function CustomLoader() {
            var _this = _super.call(this) || this;
            _this.listeners = [];
            return _this;
        }
        CustomLoader.prototype.contentAddEventListener = function (type, listener, useCapture, priority, useWeakReference) {
            if (useCapture === void 0) { useCapture = false; }
            if (priority === void 0) { priority = 0; }
            if (useWeakReference === void 0) { useWeakReference = false; }
            this.contentLoaderInfo.addEventListener(type, listener, useCapture, priority, useWeakReference);
            this.listeners.push({ type: type, listener: listener });
        };
        CustomLoader.prototype.contentRemoveEventListeners = function () {
            for (var i = 0; i < this.listeners.length; i++) {
                if (this.contentLoaderInfo.hasEventListener(this.listeners[i].type)) {
                    this.contentLoaderInfo.removeEventListener(this.listeners[i].type, this.listeners[i].listener);
                }
            }
            this.listeners.length = 0;
        };
        CustomLoader.prototype.unloadAndStop = function (gc) {
            if (gc === void 0) { gc = true; }
            _super.prototype.unloadAndStop.call(this, gc);
            this.client = null;
            if (this.rawLoader) {
                this.rawLoader.close();
            }
        };
        CustomLoader.prototype.loadRAW = function (request) {
            if (!this.rawLoader) {
                this.rawLoader = new tools.URLLoader;
                this.rawLoader.dataFormat = tools.URLLoaderDataFormat.BINARY;
                this.rawLoader.addEventListener(tools.Event.COMPLETE, this.redirectEvent.bind(this));
                this.rawLoader.addEventListener(tools.IOErrorEvent.IO_ERROR, this.redirectEvent.bind(this));
            }
            this.rawLoader.load(request);
        };
        CustomLoader.prototype.redirectEvent = function (event) {
            this.raw = this.rawLoader.data;
            event.target = this.contentLoaderInfo;
            this.contentLoaderInfo.dispatchEvent(event);
        };
        return CustomLoader;
    }(tools.Loader));
    tools.CustomLoader = CustomLoader;
})(tools || (tools = {}));
var tools;
(function (tools) {
    tools.Error = global.Error;
    tools.Keyboard = flash.ui.Keyboard;
    tools.Dictionary = flash.utils.Dictionary;
    var KeyboardMap = (function () {
        function KeyboardMap() {
            throw new tools.Error("Abstract class error");
        }
        KeyboardMap.S3E_KEY_INVALID = 0;
        KeyboardMap.__block0 = function () {
            if (!KeyboardMap.map) {
                KeyboardMap.map = new tools.Dictionary;
                KeyboardMap.map.set(tools.Keyboard.ESCAPE, 1);
                KeyboardMap.map.set(tools.Keyboard.TAB, 2);
                KeyboardMap.map.set(tools.Keyboard.BACKSPACE, 3);
                KeyboardMap.map.set(tools.Keyboard.ENTER, 4);
                KeyboardMap.map.set(tools.Keyboard.SHIFT, 5);
                KeyboardMap.map.set(tools.Keyboard.CONTROL, 6);
                KeyboardMap.map.set(tools.Keyboard.SPACE, 8);
                KeyboardMap.map.set(tools.Keyboard.LEFT, 9);
                KeyboardMap.map.set(tools.Keyboard.UP, 10);
                KeyboardMap.map.set(tools.Keyboard.RIGHT, 11);
                KeyboardMap.map.set(tools.Keyboard.DOWN, 12);
                KeyboardMap.map.set(tools.Keyboard.NUMBER_0, 13);
                KeyboardMap.map.set(tools.Keyboard.NUMBER_1, 14);
                KeyboardMap.map.set(tools.Keyboard.NUMBER_2, 15);
                KeyboardMap.map.set(tools.Keyboard.NUMBER_3, 16);
                KeyboardMap.map.set(tools.Keyboard.NUMBER_4, 17);
                KeyboardMap.map.set(tools.Keyboard.NUMBER_5, 18);
                KeyboardMap.map.set(tools.Keyboard.NUMBER_6, 19);
                KeyboardMap.map.set(tools.Keyboard.NUMBER_7, 20);
                KeyboardMap.map.set(tools.Keyboard.NUMBER_8, 21);
                KeyboardMap.map.set(tools.Keyboard.NUMBER_9, 22);
                KeyboardMap.map.set(tools.Keyboard.A, 23);
                KeyboardMap.map.set(tools.Keyboard.B, 24);
                KeyboardMap.map.set(tools.Keyboard.C, 25);
                KeyboardMap.map.set(tools.Keyboard.D, 26);
                KeyboardMap.map.set(tools.Keyboard.E, 27);
                KeyboardMap.map.set(tools.Keyboard.F, 28);
                KeyboardMap.map.set(tools.Keyboard.G, 29);
                KeyboardMap.map.set(tools.Keyboard.H, 30);
                KeyboardMap.map.set(tools.Keyboard.I, 31);
                KeyboardMap.map.set(tools.Keyboard.J, 32);
                KeyboardMap.map.set(tools.Keyboard.K, 33);
                KeyboardMap.map.set(tools.Keyboard.L, 34);
                KeyboardMap.map.set(tools.Keyboard.M, 35);
                KeyboardMap.map.set(tools.Keyboard.N, 36);
                KeyboardMap.map.set(tools.Keyboard.O, 37);
                KeyboardMap.map.set(tools.Keyboard.P, 38);
                KeyboardMap.map.set(tools.Keyboard.Q, 39);
                KeyboardMap.map.set(tools.Keyboard.R, 40);
                KeyboardMap.map.set(tools.Keyboard.S, 41);
                KeyboardMap.map.set(tools.Keyboard.T, 42);
                KeyboardMap.map.set(tools.Keyboard.U, 43);
                KeyboardMap.map.set(tools.Keyboard.V, 44);
                KeyboardMap.map.set(tools.Keyboard.W, 45);
                KeyboardMap.map.set(tools.Keyboard.X, 46);
                KeyboardMap.map.set(tools.Keyboard.Y, 47);
                KeyboardMap.map.set(tools.Keyboard.Z, 48);
                KeyboardMap.map.set(tools.Keyboard.F1, 49);
                KeyboardMap.map.set(tools.Keyboard.F2, 50);
                KeyboardMap.map.set(tools.Keyboard.F3, 51);
                KeyboardMap.map.set(tools.Keyboard.F4, 52);
                KeyboardMap.map.set(tools.Keyboard.F5, 53);
                KeyboardMap.map.set(tools.Keyboard.F6, 54);
                KeyboardMap.map.set(tools.Keyboard.F7, 55);
                KeyboardMap.map.set(tools.Keyboard.F8, 56);
                KeyboardMap.map.set(tools.Keyboard.F9, 57);
                KeyboardMap.map.set(tools.Keyboard.F10, 58);
                KeyboardMap.map.set(tools.Keyboard.NUMPAD_0, 59);
                KeyboardMap.map.set(tools.Keyboard.NUMPAD_1, 60);
                KeyboardMap.map.set(tools.Keyboard.NUMPAD_2, 61);
                KeyboardMap.map.set(tools.Keyboard.NUMPAD_3, 62);
                KeyboardMap.map.set(tools.Keyboard.NUMPAD_4, 63);
                KeyboardMap.map.set(tools.Keyboard.NUMPAD_5, 64);
                KeyboardMap.map.set(tools.Keyboard.NUMPAD_6, 65);
                KeyboardMap.map.set(tools.Keyboard.NUMPAD_7, 66);
                KeyboardMap.map.set(tools.Keyboard.NUMPAD_8, 67);
                KeyboardMap.map.set(tools.Keyboard.NUMPAD_9, 68);
                KeyboardMap.map.set(tools.Keyboard.NUMPAD_ADD, 69);
                KeyboardMap.map.set(tools.Keyboard.NUMPAD_SUBTRACT, 70);
                KeyboardMap.map.set(tools.Keyboard.NUMPAD_ENTER, 71);
                KeyboardMap.map.set(tools.Keyboard.NUMPAD_MULTIPLY, 77);
                KeyboardMap.map.set(tools.Keyboard.COMMAND, 84);
                KeyboardMap.map.set(tools.Keyboard.HOME, 88);
                KeyboardMap.map.set(tools.Keyboard.F11, 97);
                KeyboardMap.map.set(tools.Keyboard.F12, 98);
                KeyboardMap.map.set(tools.Keyboard.ALTERNATE, 99);
                KeyboardMap.map.set(tools.Keyboard.CONTROL, 100);
                KeyboardMap.map.set(tools.Keyboard.ALTERNATE, 101);
                KeyboardMap.map.set(tools.Keyboard.SHIFT, 102);
                KeyboardMap.map.set(tools.Keyboard.BACKQUOTE, 103);
                KeyboardMap.map.set(tools.Keyboard.COMMA, 104);
                KeyboardMap.map.set(tools.Keyboard.PERIOD, 105);
                KeyboardMap.map.set(tools.Keyboard.SLASH, 106);
                KeyboardMap.map.set(tools.Keyboard.BACKSLASH, 107);
                KeyboardMap.map.set(tools.Keyboard.SEMICOLON, 108);
                KeyboardMap.map.set(tools.Keyboard.QUOTE, 109);
                KeyboardMap.map.set(tools.Keyboard.LEFTBRACKET, 110);
                KeyboardMap.map.set(tools.Keyboard.RIGHTBRACKET, 111);
                KeyboardMap.map.set(tools.Keyboard.EQUAL, 112);
                KeyboardMap.map.set(tools.Keyboard.MINUS, 113);
                KeyboardMap.map.set(tools.Keyboard.CAPS_LOCK, 114);
                KeyboardMap.map.set(tools.Keyboard.NUMPAD_DECIMAL, 115);
                KeyboardMap.map.set(tools.Keyboard.NUMPAD_DIVIDE, 116);
                KeyboardMap.map.set(tools.Keyboard.NUMPAD, 117);
                KeyboardMap.map.set(tools.Keyboard.INSERT, 118);
                KeyboardMap.map.set(tools.Keyboard.HOME, 119);
                KeyboardMap.map.set(tools.Keyboard.PAGE_UP, 120);
                KeyboardMap.map.set(tools.Keyboard.PAGE_DOWN, 121);
                KeyboardMap.map.set(tools.Keyboard.END, 122);
                KeyboardMap.map.set(tools.Keyboard.DELETE, 123);
                KeyboardMap.map.set(tools.Keyboard.PAUSE, 124);
                KeyboardMap.map.set(tools.Keyboard.BACK, 126);
                KeyboardMap.map.set(tools.Keyboard.MENU, 127);
                KeyboardMap.map.set(tools.Keyboard.SEARCH, 128);
                KeyboardMap.map.set(tools.Keyboard.UP, 204);
                KeyboardMap.map.set(tools.Keyboard.DOWN, 205);
                KeyboardMap.map.set(tools.Keyboard.LEFT, 206);
                KeyboardMap.map.set(tools.Keyboard.RIGHT, 207);
                KeyboardMap.map.set(tools.Keyboard.BACKSLASH, 213);
            }
        }();
        return KeyboardMap;
    }());
    tools.KeyboardMap = KeyboardMap;
})(tools || (tools = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            var controls;
            (function (controls) {
                controls.Sprite = flash.display.Sprite;
                controls.Event = flash.events.Event;
                controls.TextField = flash.text.TextField;
                controls.TextFormat = flash.text.TextFormat;
                var Distractor = (function (_super) {
                    __extends(Distractor, _super);
                    function Distractor() {
                        var _this = _super.call(this) || this;
                        _this.fadeDuration = 800;
                        _this.dotWidth = 40;
                        _this.dotHeight = 20;
                        _this.totalElapsed = 0;
                        _this.configUI();
                        return _this;
                    }
                    Object.defineProperty(Distractor.prototype, "text", {
                        get: function () { return this.tf.text; },
                        set: function (value) {
                            this.tf.text = value;
                            this.tf.width = this.tf.textWidth + 10;
                            this.dots.x = this.tf.width;
                        },
                        enumerable: true,
                        configurable: true
                    });
                    Distractor.prototype.handleAddedToStage = function (event) {
                        this.addEventListener(controls.Event.ENTER_FRAME, this.onTick.bind(this), false, 0, true);
                    };
                    Distractor.prototype.handleRemovedFromStage = function (event) {
                        this.removeEventListener(controls.Event.ENTER_FRAME, this.onTick.bind(this));
                    };
                    Distractor.prototype.clamp = function (n, min, max) {
                        if (min === void 0) { min = 0; }
                        if (max === void 0) { max = 1; }
                        if (n < min) {
                            return min;
                        }
                        if (n > max) {
                            return max;
                        }
                        return n;
                    };
                    Distractor.prototype.invCos = function (x) {
                        return 1 - (0.5 * (Math.cos(x * Math.PI) + 1));
                    };
                    Distractor.prototype.onTick = function (event) {
                        this.totalElapsed += 20;
                        var cycle;
                        this.dots.graphics.clear();
                        var fullHeight = this.dotHeight << 0;
                        var restHeight = fullHeight * 0.3 << 0;
                        var shapeWidth = Math.round((this.dotWidth / 3) * 0.6);
                        var shapeGap = Math.round((this.dotWidth / 3) * 0.4);
                        var dH = fullHeight - restHeight;
                        for (var i = 0; i < 3; i++) {
                            cycle = (this.totalElapsed + (3 - i)
                                * this.fadeDuration * 0.13)
                                % this.fadeDuration;
                            cycle = this.invCos(1 - this.clamp(cycle / (0.6 * this.fadeDuration)));
                            this.dots.graphics.lineStyle(1, 0x576EA4, cycle * 0.7 + 0.3, true);
                            this.dots.graphics.beginFill(0xB1BAD3, cycle * 0.7 + 0.3);
                            this.dots.graphics.drawRoundRect(0.5 + i * (shapeGap + shapeWidth), 0.5 + 0.5 * (dH - cycle * dH), shapeWidth, restHeight + cycle * dH, 2);
                            this.dots.graphics.endFill();
                        }
                    };
                    Distractor.prototype.configUI = function () {
                        var format = new controls.TextFormat('_sans', 11);
                        this.tf = new controls.TextField();
                        this.tf.selectable = false;
                        this.tf.defaultTextFormat = format;
                        this.addChild(this.tf);
                        this.dots = new controls.Sprite();
                        this.addChild(this.dots);
                        this.dots.x = this.tf.width;
                        this.addEventListener(controls.Event.ADDED_TO_STAGE, this.handleAddedToStage.bind(this), false, 0, true);
                        this.addEventListener(controls.Event.REMOVED_FROM_STAGE, this.handleRemovedFromStage.bind(this), false, 0, true);
                    };
                    return Distractor;
                }(controls.Sprite));
                controls.Distractor = Distractor;
            })(controls = graph.controls || (graph.controls = {}));
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var global;
(function (global) {
    global.ExternalInterface = flash.external.ExternalInterface;
    global.setTimeout = flash.utils.setTimeout;
    function ExternalInterfaceAsync(func) {
        var params = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            params[_i - 1] = arguments[_i];
        }
        if (!global.ExternalInterface.available) {
            return;
        }
        global.setTimeout(execute.bind(this), 1);
        function execute() {
            params.unshift(func);
            global.ExternalInterface.call.apply(null, params);
        }
    }
    global.ExternalInterfaceAsync = ExternalInterfaceAsync;
})(global || (global = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.Rectangle = flash.geom.Rectangle;
        display.VertexData = flash.utils.VertexData;
        var Shape = (function (_super) {
            __extends(Shape, _super);
            function Shape() {
                var _this = _super.call(this) || this;
                _this.graphics = new display.Graphics(_this);
                _this.mVertexData = new display.VertexData(4, true);
                return _this;
            }
            Shape.prototype.__update = function (ctx) {
                if (this.visible) {
                    var m = this.transform.concatenatedMatrix;
                    if (this.mScrollRect)
                        this.__beginClipRect(ctx, m);
                    this.graphics.draw(ctx, m, this.blendMode, this.transform.concatenatedColorTransform);
                    if (this.mScrollRect)
                        this.__endClipRect(ctx);
                }
            };
            Shape.prototype.hitTestPoint = function (x, y, shapeFlag) {
                if (shapeFlag === void 0) { shapeFlag = false; }
                return false;
            };
            Shape.prototype.getRect = function (targetSpace, resultRect) {
                if (resultRect === void 0) { resultRect = null; }
                this.__updateVertexData();
                return this.displayObjectGetRect(targetSpace, resultRect);
            };
            Shape.prototype.__getRect = function () {
                return this.graphics.bound;
            };
            return Shape;
        }(display.DisplayObject));
        display.Shape = Shape;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var events;
    (function (events) {
        events.DisplayObject = flash.display.DisplayObject;
        events.InteractiveObject = flash.display.InteractiveObject;
        events.Point = flash.geom.Point;
        var MouseEvent = (function (_super) {
            __extends(MouseEvent, _super);
            function MouseEvent(type, bubbles, cancelable, localX, localY, relatedObject, ctrlKey, altKey, shiftKey, buttonDown, delta) {
                if (bubbles === void 0) { bubbles = true; }
                if (cancelable === void 0) { cancelable = false; }
                if (localX === void 0) { localX = undefined; }
                if (localY === void 0) { localY = undefined; }
                if (relatedObject === void 0) { relatedObject = null; }
                if (ctrlKey === void 0) { ctrlKey = false; }
                if (altKey === void 0) { altKey = false; }
                if (shiftKey === void 0) { shiftKey = false; }
                if (buttonDown === void 0) { buttonDown = false; }
                if (delta === void 0) { delta = 0; }
                var _this = _super.call(this, type, bubbles, cancelable) || this;
                _this.m_ctrlKey = false;
                _this.m_altKey = false;
                _this.m_shiftKey = false;
                _this.m_buttonDown = false;
                _this.m_delta = 0;
                _this.m_isRelatedObjectInaccessible = false;
                _this._localX = 0;
                _this._localY = 0;
                _this._localX = localX;
                _this._localY = localY;
                _this.m_relatedObject = relatedObject;
                _this.m_ctrlKey = ctrlKey;
                _this.m_altKey = altKey;
                _this.m_shiftKey = shiftKey;
                _this.m_buttonDown = buttonDown;
                _this.m_delta = delta;
                return _this;
            }
            MouseEvent.prototype.clone = function () {
                return new MouseEvent(this.type, this.bubbles, this.cancelable, this.localX, this.localY, this.m_relatedObject, this.m_ctrlKey, this.m_altKey, this.m_shiftKey, this.m_buttonDown, this.m_delta);
            };
            MouseEvent.prototype.toString = function () {
                return this.formatToString("MouseEvent", "type", "bubbles", "cancelable", "eventPhase", "localX", "localY", "stageX", "stageY", "relatedObject", "ctrlKey", "altKey", "shiftKey", "buttonDown", "delta");
            };
            Object.defineProperty(MouseEvent.prototype, "localX", {
                get: function () { return this._localX; },
                set: function (v) { this._localX = v; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MouseEvent.prototype, "localY", {
                get: function () { return this._localY; },
                set: function (v) { this._localY = v; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MouseEvent.prototype, "relatedObject", {
                get: function () {
                    return this.m_relatedObject;
                },
                set: function (value) {
                    this.m_relatedObject = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MouseEvent.prototype, "ctrlKey", {
                get: function () {
                    return this.m_ctrlKey;
                },
                set: function (value) {
                    this.m_ctrlKey = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MouseEvent.prototype, "altKey", {
                get: function () {
                    return this.m_altKey;
                },
                set: function (value) {
                    this.m_altKey = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MouseEvent.prototype, "shiftKey", {
                get: function () {
                    return this.m_shiftKey;
                },
                set: function (value) {
                    this.m_shiftKey = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MouseEvent.prototype, "buttonDown", {
                get: function () {
                    return this.m_buttonDown;
                },
                set: function (value) {
                    this.m_buttonDown = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MouseEvent.prototype, "delta", {
                get: function () {
                    return this.m_delta;
                },
                set: function (value) {
                    this.m_delta = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MouseEvent.prototype, "stageX", {
                get: function () {
                    if (isNaN(this.localX) || isNaN(this.localY)) {
                        return Number.NaN;
                    }
                    return this.getStageX();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MouseEvent.prototype, "stageY", {
                get: function () {
                    if (isNaN(this.localX) || isNaN(this.localY)) {
                        return Number.NaN;
                    }
                    return this.getStageY();
                },
                enumerable: true,
                configurable: true
            });
            MouseEvent.prototype.getStageX = function () {
                if (!(this.target instanceof events.DisplayObject)) {
                    return 0;
                }
                MouseEvent.sHelperPoint.setTo(this.localX, this.localY);
                return this.target.localToGlobal(MouseEvent.sHelperPoint).x;
            };
            MouseEvent.prototype.getStageY = function () {
                if (!(this.target instanceof events.DisplayObject)) {
                    return 0;
                }
                MouseEvent.sHelperPoint.setTo(this.localX, this.localY);
                return this.target.localToGlobal(MouseEvent.sHelperPoint).y;
            };
            MouseEvent.prototype.updateAfterEvent = function () {
            };
            Object.defineProperty(MouseEvent.prototype, "isRelatedObjectInaccessible", {
                get: function () {
                    return this.m_isRelatedObjectInaccessible;
                },
                set: function (value) {
                    this.m_isRelatedObjectInaccessible = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MouseEvent.prototype, "movementX", {
                get: function () {
                    return 0;
                },
                set: function (param1) {
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(MouseEvent.prototype, "movementY", {
                get: function () {
                    return 0;
                },
                set: function (param1) {
                },
                enumerable: true,
                configurable: true
            });
            MouseEvent.sHelperPoint = new events.Point;
            MouseEvent.CLICK = "click";
            MouseEvent.DOUBLE_CLICK = "doubleClick";
            MouseEvent.MOUSE_DOWN = "mouseDown";
            MouseEvent.MOUSE_MOVE = "mouseMove";
            MouseEvent.MOUSE_OUT = "mouseOut";
            MouseEvent.MOUSE_OVER = "mouseOver";
            MouseEvent.MOUSE_UP = "mouseUp";
            MouseEvent.RELEASE_OUTSIDE = "releaseOutside";
            MouseEvent.MOUSE_WHEEL = "mouseWheel";
            MouseEvent.ROLL_OUT = "rollOut";
            MouseEvent.ROLL_OVER = "rollOver";
            MouseEvent.MIDDLE_CLICK = "middleClick";
            MouseEvent.MIDDLE_MOUSE_DOWN = "middleMouseDown";
            MouseEvent.MIDDLE_MOUSE_UP = "middleMouseUp";
            MouseEvent.RIGHT_CLICK = "rightClick";
            MouseEvent.RIGHT_MOUSE_DOWN = "rightMouseDown";
            MouseEvent.RIGHT_MOUSE_UP = "rightMouseUp";
            MouseEvent.CONTEXT_MENU = "contextMenu";
            return MouseEvent;
        }(events.Event));
        events.MouseEvent = MouseEvent;
    })(events = flash.events || (flash.events = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var media;
    (function (media) {
        media.EventDispatcher = flash.events.EventDispatcher;
        media.BitmapData = flash.display.BitmapData;
        media.Rectangle = flash.geom.Rectangle;
        media.ByteArray = flash.utils.ByteArray;
        var Camera = (function (_super) {
            __extends(Camera, _super);
            function Camera() {
                return _super.call(this) || this;
            }
            Camera._scanHardware = function () {
            };
            Object.defineProperty(Camera, "names", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Camera, "isSupported", {
                get: function () {
                    return false;
                },
                enumerable: true,
                configurable: true
            });
            Camera.getCamera = function (param1) {
                if (param1 === void 0) { param1 = null; }
                return null;
            };
            Object.defineProperty(Camera.prototype, "activityLevel", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Camera.prototype, "bandwidth", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Camera.prototype, "currentFPS", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Camera.prototype, "fps", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Camera.prototype, "height", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Camera.prototype, "index", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Camera.prototype, "keyFrameInterval", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Camera.prototype, "loopback", {
                get: function () {
                    return false;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Camera.prototype, "motionLevel", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Camera.prototype, "motionTimeout", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Camera.prototype, "muted", {
                get: function () {
                    return false;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Camera.prototype, "name", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Camera.prototype, "position", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Camera.prototype, "quality", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Camera.prototype, "width", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Camera.prototype.setCursor = function (param1) {
            };
            Camera.prototype.setKeyFrameInterval = function (param1) {
            };
            Camera.prototype.setLoopback = function (param1) {
                if (param1 === void 0) { param1 = false; }
            };
            Camera.prototype.setMode = function (param1, param2, param3, param4) {
                if (param4 === void 0) { param4 = true; }
            };
            Camera.prototype.setMotionLevel = function (param1, param2) {
                if (param2 === void 0) { param2 = 2000; }
            };
            Camera.prototype.setQuality = function (param1, param2) {
            };
            Camera.prototype.drawToBitmapData = function (param1) {
            };
            Camera.prototype.copyToByteArray = function (param1, param2) {
            };
            Camera.prototype.copyToVector = function (param1, param2) {
            };
            return Camera;
        }(media.EventDispatcher));
        media.Camera = Camera;
    })(media = flash.media || (flash.media = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        utils.Matrix = flash.geom.Matrix;
        utils.Point = flash.geom.Point;
        utils.Rectangle = flash.geom.Rectangle;
        var VertexData = (function () {
            function VertexData(numVertices, premultipliedAlpha) {
                if (premultipliedAlpha === void 0) { premultipliedAlpha = false; }
                this.mPremultipliedAlpha = false;
                this.mNumVertices = 0;
                this.mRawData = new Array();
                this.mPremultipliedAlpha = premultipliedAlpha;
                this.numVertices = numVertices;
            }
            VertexData.prototype.clone = function (vertexID, numVertices) {
                if (vertexID === void 0) { vertexID = 0; }
                if (numVertices === void 0) { numVertices = -1; }
                if (numVertices < 0 || vertexID + numVertices > this.mNumVertices)
                    numVertices = this.mNumVertices - vertexID;
                var clone = new VertexData(0, this.mPremultipliedAlpha);
                clone.mNumVertices = numVertices;
                clone.mRawData = this.mRawData.slice(vertexID * VertexData.ELEMENTS_PER_VERTEX, numVertices * VertexData.ELEMENTS_PER_VERTEX);
                return clone;
            };
            VertexData.prototype.copyTo = function (targetData, targetVertexID, vertexID, numVertices) {
                if (targetVertexID === void 0) { targetVertexID = 0; }
                if (vertexID === void 0) { vertexID = 0; }
                if (numVertices === void 0) { numVertices = -1; }
                this.copyTransformedTo(targetData, targetVertexID, null, vertexID, numVertices);
            };
            VertexData.prototype.copyTransformedTo = function (targetData, targetVertexID, matrix, vertexID, numVertices) {
                if (targetVertexID === void 0) { targetVertexID = 0; }
                if (matrix === void 0) { matrix = null; }
                if (vertexID === void 0) { vertexID = 0; }
                if (numVertices === void 0) { numVertices = -1; }
                if (numVertices < 0 || vertexID + numVertices > this.mNumVertices)
                    numVertices = this.mNumVertices - vertexID;
                var x, y;
                var targetRawData = targetData.mRawData;
                var targetIndex = targetVertexID * VertexData.ELEMENTS_PER_VERTEX;
                var sourceIndex = vertexID * VertexData.ELEMENTS_PER_VERTEX;
                var sourceEnd = (vertexID + numVertices) * VertexData.ELEMENTS_PER_VERTEX;
                if (matrix) {
                    while (sourceIndex < sourceEnd) {
                        x = this.mRawData[int(sourceIndex++)];
                        y = this.mRawData[int(sourceIndex++)];
                        targetRawData[int(targetIndex++)] = matrix.a * x + matrix.c * y + matrix.tx;
                        targetRawData[int(targetIndex++)] = matrix.d * y + matrix.b * x + matrix.ty;
                        targetRawData[int(targetIndex++)] = this.mRawData[int(sourceIndex++)];
                        targetRawData[int(targetIndex++)] = this.mRawData[int(sourceIndex++)];
                        targetRawData[int(targetIndex++)] = this.mRawData[int(sourceIndex++)];
                        targetRawData[int(targetIndex++)] = this.mRawData[int(sourceIndex++)];
                        targetRawData[int(targetIndex++)] = this.mRawData[int(sourceIndex++)];
                        targetRawData[int(targetIndex++)] = this.mRawData[int(sourceIndex++)];
                    }
                }
                else {
                    while (sourceIndex < sourceEnd)
                        targetRawData[int(targetIndex++)] = this.mRawData[int(sourceIndex++)];
                }
            };
            VertexData.prototype.append = function (data) {
                var targetIndex = this.mRawData.length;
                var rawData = data.mRawData;
                var rawDataLength = rawData.length;
                for (var i = 0; i < rawDataLength; ++i)
                    this.mRawData[int(targetIndex++)] = rawData[i];
                this.mNumVertices += data.numVertices;
            };
            VertexData.prototype.setPosition = function (vertexID, x, y) {
                var offset = vertexID * VertexData.ELEMENTS_PER_VERTEX + VertexData.POSITION_OFFSET;
                this.mRawData[offset] = x;
                this.mRawData[int(offset + 1)] = y;
            };
            VertexData.prototype.getPosition = function (vertexID, position) {
                var offset = vertexID * VertexData.ELEMENTS_PER_VERTEX + VertexData.POSITION_OFFSET;
                position.x = this.mRawData[offset];
                position.y = this.mRawData[int(offset + 1)];
            };
            VertexData.prototype.setColorAndAlpha = function (vertexID, color, alpha) {
                if (alpha < 0.001)
                    alpha = 0.001;
                else if (alpha > 1.0)
                    alpha = 1.0;
                var offset = vertexID * VertexData.ELEMENTS_PER_VERTEX + VertexData.COLOR_OFFSET;
                var multiplier = this.mPremultipliedAlpha ? alpha : 1.0;
                this.mRawData[offset] = ((color >> 16) & 0xff) / 255.0 * multiplier;
                this.mRawData[int(offset + 1)] = ((color >> 8) & 0xff) / 255.0 * multiplier;
                this.mRawData[int(offset + 2)] = (color & 0xff) / 255.0 * multiplier;
                this.mRawData[int(offset + 3)] = alpha;
            };
            VertexData.prototype.setColor = function (vertexID, color) {
                var offset = vertexID * VertexData.ELEMENTS_PER_VERTEX + VertexData.COLOR_OFFSET;
                var multiplier = this.mPremultipliedAlpha ? this.mRawData[int(offset + 3)] : 1.0;
                this.mRawData[offset] = ((color >> 16) & 0xff) / 255.0 * multiplier;
                this.mRawData[int(offset + 1)] = ((color >> 8) & 0xff) / 255.0 * multiplier;
                this.mRawData[int(offset + 2)] = (color & 0xff) / 255.0 * multiplier;
            };
            VertexData.prototype.getColor = function (vertexID) {
                var offset = vertexID * VertexData.ELEMENTS_PER_VERTEX + VertexData.COLOR_OFFSET;
                var divisor = this.mPremultipliedAlpha ? this.mRawData[int(offset + 3)] : 1.0;
                if (divisor == 0)
                    return 0;
                else {
                    var red = this.mRawData[offset] / divisor;
                    var green = this.mRawData[int(offset + 1)] / divisor;
                    var blue = this.mRawData[int(offset + 2)] / divisor;
                    return (int(red * 255) << 16) | (int(green * 255) << 8) | int(blue * 255);
                }
            };
            VertexData.prototype.setAlpha = function (vertexID, alpha) {
                if (this.mPremultipliedAlpha)
                    this.setColorAndAlpha(vertexID, this.getColor(vertexID), alpha);
                else
                    this.mRawData[int(vertexID * VertexData.ELEMENTS_PER_VERTEX + VertexData.COLOR_OFFSET + 3)] = alpha;
            };
            VertexData.prototype.getAlpha = function (vertexID) {
                var offset = vertexID * VertexData.ELEMENTS_PER_VERTEX + VertexData.COLOR_OFFSET + 3;
                return this.mRawData[offset];
            };
            VertexData.prototype.setTexCoords = function (vertexID, u, v) {
                var offset = vertexID * VertexData.ELEMENTS_PER_VERTEX + VertexData.TEXCOORD_OFFSET;
                this.mRawData[offset] = u;
                this.mRawData[int(offset + 1)] = v;
            };
            VertexData.prototype.getTexCoords = function (vertexID, texCoords) {
                var offset = vertexID * VertexData.ELEMENTS_PER_VERTEX + VertexData.TEXCOORD_OFFSET;
                texCoords.x = this.mRawData[offset];
                texCoords.y = this.mRawData[int(offset + 1)];
            };
            VertexData.prototype.translateVertex = function (vertexID, deltaX, deltaY) {
                var offset = vertexID * VertexData.ELEMENTS_PER_VERTEX + VertexData.POSITION_OFFSET;
                this.mRawData[offset] += deltaX;
                this.mRawData[int(offset + 1)] += deltaY;
            };
            VertexData.prototype.transformVertex = function (vertexID, matrix, numVertices) {
                if (numVertices === void 0) { numVertices = 1; }
                var x, y;
                var offset = vertexID * VertexData.ELEMENTS_PER_VERTEX + VertexData.POSITION_OFFSET;
                for (var i = 0; i < numVertices; ++i) {
                    x = this.mRawData[offset];
                    y = this.mRawData[int(offset + 1)];
                    this.mRawData[offset] = matrix.a * x + matrix.c * y + matrix.tx;
                    this.mRawData[int(offset + 1)] = matrix.d * y + matrix.b * x + matrix.ty;
                    offset += VertexData.ELEMENTS_PER_VERTEX;
                }
            };
            VertexData.prototype.setUniformColor = function (color) {
                for (var i = 0; i < this.mNumVertices; ++i)
                    this.setColor(i, color);
            };
            VertexData.prototype.setUniformAlpha = function (alpha) {
                for (var i = 0; i < this.mNumVertices; ++i)
                    this.setAlpha(i, alpha);
            };
            VertexData.prototype.scaleAlpha = function (vertexID, factor, numVertices) {
                if (numVertices === void 0) { numVertices = 1; }
                if (factor == 1.0)
                    return;
                if (numVertices < 0 || vertexID + numVertices > this.mNumVertices)
                    numVertices = this.mNumVertices - vertexID;
                var i = 0;
                if (this.mPremultipliedAlpha) {
                    for (i = 0; i < numVertices; ++i)
                        this.setAlpha(vertexID + i, this.getAlpha(vertexID + i) * factor);
                }
                else {
                    var offset = vertexID * VertexData.ELEMENTS_PER_VERTEX + VertexData.COLOR_OFFSET + 3;
                    for (i = 0; i < numVertices; ++i)
                        this.mRawData[int(offset + i * VertexData.ELEMENTS_PER_VERTEX)] *= factor;
                }
            };
            VertexData.prototype.getBounds = function (transformationMatrix, vertexID, numVertices, resultRect) {
                if (transformationMatrix === void 0) { transformationMatrix = null; }
                if (vertexID === void 0) { vertexID = 0; }
                if (numVertices === void 0) { numVertices = -1; }
                if (resultRect === void 0) { resultRect = null; }
                if (resultRect == null)
                    resultRect = new utils.Rectangle();
                if (numVertices < 0 || vertexID + numVertices > this.mNumVertices)
                    numVertices = this.mNumVertices - vertexID;
                if (numVertices == 0) {
                    if (transformationMatrix == null)
                        resultRect.setEmpty();
                    else {
                        utils.MatrixUtil.transformCoords(transformationMatrix, 0, 0, VertexData.sHelperPoint);
                        resultRect.setTo(VertexData.sHelperPoint.x, VertexData.sHelperPoint.y, 0, 0);
                    }
                }
                else {
                    var minX = Number.MAX_VALUE, maxX = -Number.MAX_VALUE;
                    var minY = Number.MAX_VALUE, maxY = -Number.MAX_VALUE;
                    var offset = vertexID * VertexData.ELEMENTS_PER_VERTEX + VertexData.POSITION_OFFSET;
                    var x, y, i = 0;
                    if (transformationMatrix == null) {
                        for (i = 0; i < numVertices; ++i) {
                            x = this.mRawData[offset];
                            y = this.mRawData[int(offset + 1)];
                            offset += VertexData.ELEMENTS_PER_VERTEX;
                            if (minX > x)
                                minX = x;
                            if (maxX < x)
                                maxX = x;
                            if (minY > y)
                                minY = y;
                            if (maxY < y)
                                maxY = y;
                        }
                    }
                    else {
                        for (i = 0; i < numVertices; ++i) {
                            x = this.mRawData[offset];
                            y = this.mRawData[int(offset + 1)];
                            offset += VertexData.ELEMENTS_PER_VERTEX;
                            utils.MatrixUtil.transformCoords(transformationMatrix, x, y, VertexData.sHelperPoint);
                            if (minX > VertexData.sHelperPoint.x)
                                minX = VertexData.sHelperPoint.x;
                            if (maxX < VertexData.sHelperPoint.x)
                                maxX = VertexData.sHelperPoint.x;
                            if (minY > VertexData.sHelperPoint.y)
                                minY = VertexData.sHelperPoint.y;
                            if (maxY < VertexData.sHelperPoint.y)
                                maxY = VertexData.sHelperPoint.y;
                        }
                    }
                    resultRect.setTo(minX, minY, maxX - minX, maxY - minY);
                }
                return resultRect;
            };
            VertexData.prototype.toString = function () {
                var result = "[VertexData \n";
                var position = new utils.Point();
                var texCoords = new utils.Point();
                for (var i = 0; i < this.numVertices; ++i) {
                    this.getPosition(i, position);
                    this.getTexCoords(i, texCoords);
                    result += "  [Vertex " + i + ": " +
                        "x=" + position.x.toFixed(1) + ", " +
                        "y=" + position.y.toFixed(1) + ", " +
                        "rgb=" + this.getColor(i).toString(16) + ", " +
                        "a=" + this.getAlpha(i).toFixed(2) + ", " +
                        "u=" + texCoords.x.toFixed(4) + ", " +
                        "v=" + texCoords.y.toFixed(4) + "]" +
                        (i == this.numVertices - 1 ? "\n" : ",\n");
                }
                return result + "]";
            };
            Object.defineProperty(VertexData.prototype, "tinted", {
                get: function () {
                    var offset = VertexData.COLOR_OFFSET;
                    for (var i = 0; i < this.mNumVertices; ++i) {
                        for (var j = 0; j < 4; ++j)
                            if (this.mRawData[int(offset + j)] != 1.0)
                                return true;
                        offset += VertexData.ELEMENTS_PER_VERTEX;
                    }
                    return false;
                },
                enumerable: true,
                configurable: true
            });
            VertexData.prototype.setPremultipliedAlpha = function (value, updateData) {
                if (updateData === void 0) { updateData = true; }
                if (value == this.mPremultipliedAlpha)
                    return;
                if (updateData) {
                    var dataLength = this.mNumVertices * VertexData.ELEMENTS_PER_VERTEX;
                    for (var i = VertexData.COLOR_OFFSET; i < dataLength; i += VertexData.ELEMENTS_PER_VERTEX) {
                        var alpha = this.mRawData[int(i + 3)];
                        var divisor = this.mPremultipliedAlpha ? alpha : 1.0;
                        var multiplier = value ? alpha : 1.0;
                        if (divisor != 0) {
                            this.mRawData[i] = this.mRawData[i] / divisor * multiplier;
                            this.mRawData[int(i + 1)] = this.mRawData[int(i + 1)] / divisor * multiplier;
                            this.mRawData[int(i + 2)] = this.mRawData[int(i + 2)] / divisor * multiplier;
                        }
                    }
                }
                this.mPremultipliedAlpha = value;
            };
            Object.defineProperty(VertexData.prototype, "premultipliedAlpha", {
                get: function () { return this.mPremultipliedAlpha; },
                set: function (value) {
                    this.setPremultipliedAlpha(value);
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(VertexData.prototype, "numVertices", {
                get: function () { return this.mNumVertices; },
                set: function (value) {
                    this.mRawData.length = value * VertexData.ELEMENTS_PER_VERTEX;
                    var startIndex = this.mNumVertices * VertexData.ELEMENTS_PER_VERTEX + VertexData.COLOR_OFFSET + 3;
                    var endIndex = this.mRawData.length;
                    for (var i = startIndex; i < endIndex; i += VertexData.ELEMENTS_PER_VERTEX)
                        this.mRawData[i] = 1.0;
                    this.mNumVertices = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(VertexData.prototype, "rawData", {
                get: function () { return this.mRawData; },
                enumerable: true,
                configurable: true
            });
            VertexData.ELEMENTS_PER_VERTEX = 8;
            VertexData.POSITION_OFFSET = 0;
            VertexData.COLOR_OFFSET = 2;
            VertexData.TEXCOORD_OFFSET = 6;
            VertexData.sHelperPoint = new utils.Point();
            VertexData.sHelperRect = new utils.Rectangle();
            return VertexData;
        }());
        utils.VertexData = VertexData;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var __native;
    (function (__native) {
        __native.Matrix = flash.geom.Matrix;
        var GLPath2D = (function () {
            function GLPath2D() {
                this.matr = new __native.Matrix;
            }
            Object.defineProperty(GLPath2D.prototype, "drawable", {
                get: function () {
                    if (this.path.gpuPath2DDirty) {
                        this.path.gpuPath2DDirty = false;
                        var polys = this.path.polys;
                        var nump = 0;
                        var numi = 0;
                        var len = this.path.polys.length;
                        for (var i = 0; i < len; i++) {
                            var plen = this.path.polys.array[i].length;
                            nump += plen;
                            if (plen >= 6) {
                                numi += (plen / 2 - 2) * 3;
                            }
                        }
                        var tlen = this.path.tris.length;
                        var diffuv = false;
                        for (i = 0; i < tlen; i++) {
                            var tri = this.path.tris[i];
                            nump += tri[0].length;
                            numi += tri[1].length;
                            if (tri[2]) {
                                diffuv = true;
                            }
                        }
                        if (this.pos == null || this.pos.length != nump) {
                            this.pos = new Float32Array(nump);
                        }
                        if (this.index == null || this.index.length != numi) {
                            this.index = new Uint16Array(numi);
                        }
                        if (diffuv && (this.uv == null || this.uv.length != nump)) {
                            this.uv = new Float32Array(nump);
                        }
                        var offset = 0;
                        var pi = 0;
                        var ii = 0;
                        for (i = 0; i < len; i++) {
                            var poly = polys.array[i];
                            plen = poly.length;
                            var plendiv2 = plen / 2;
                            for (var j = 0; j < plendiv2; j++) {
                                var x = poly.array[2 * j];
                                var y = poly.array[2 * j + 1];
                                this.pos[pi++] = x;
                                this.pos[pi++] = y;
                                if (j >= 2) {
                                    this.index[ii++] = offset;
                                    this.index[ii++] = offset + j - 1;
                                    this.index[ii++] = offset + j;
                                }
                            }
                            offset += j;
                        }
                        for (i = 0; i < tlen; i++) {
                            tri = this.path.tris[i];
                            var vsdata = tri[0];
                            var idata = tri[1];
                            var uvdata = tri[2];
                            var len2 = vsdata.length;
                            for (j = 0; j < len2; j++) {
                                this.pos[pi] = vsdata[j];
                                if (uvdata)
                                    this.uv[pi] = uvdata[j];
                                pi++;
                            }
                            len2 = idata.length;
                            for (j = 0; j < len2; j++) {
                                this.index[ii++] = offset + idata[j];
                            }
                            offset += vsdata.length / 2;
                        }
                        if (this._drawable == null) {
                            this._drawable = new __native.GLDrawable(this.pos, this.pos, this.index, WebGLRenderingContext.STATIC_DRAW);
                        }
                        else {
                            this._drawable.pos.data = this.pos;
                            this._drawable.uv.data = diffuv ? this.uv : this.pos;
                            this._drawable.index.data = this.index;
                            this._drawable.pos.dirty = true;
                            this._drawable.uv.dirty = true;
                            this._drawable.index.dirty = true;
                        }
                    }
                    return this._drawable;
                },
                enumerable: true,
                configurable: true
            });
            return GLPath2D;
        }());
        __native.GLPath2D = GLPath2D;
    })(__native = flash.__native || (flash.__native = {}));
})(flash || (flash = {}));
var global;
(function (global) {
    global.ByteArray = flash.utils.ByteArray;
    var GLog = (function () {
        function GLog() {
            throw new global.Error('Abstract class error');
        }
        Object.defineProperty(GLog, "buf", {
            get: function () {
                return GLog.sBuf;
            },
            set: function (value) {
                GLog.sBuf = value;
            },
            enumerable: true,
            configurable: true
        });
        GLog.print = function (value, newLine) {
            if (newLine === void 0) { newLine = true; }
            if (!global.CONFIG.LOG) {
                return;
            }
            var d = new Date;
            value = d.date + "/" +
                (d.month + 1) + "/" +
                d.fullYear + " " +
                d.hours + ":" +
                d.minutes + ":" +
                d.seconds + "." +
                d.milliseconds + ": " +
                value;
            trace(value);
            if (GLog.sBuf) {
                try {
                    GLog.sBuf.writeUTFBytes(newLine ? '\n' + value : value);
                }
                catch (error) {
                    GLog.sBuf.clear();
                    try {
                        GLog.sBuf.writeUTFBytes(error.message);
                    }
                    catch (error) { }
                }
            }
        };
        GLog.verify = function () {
            if (!GLog.sBuf) {
                return;
            }
            var max = GLog.LIMIT_MAX_SIZE;
            if (global.CONFIG.QA_VERSION)
                max *= 3;
            var len = GLog.sBuf.length;
            if (len < max) {
                return;
            }
            if (len < max + GLog.LIMIT_CUT_SIZE) {
                return;
            }
            try {
                GLog.sBuf.position = GLog.LIMIT_FIXED_SIZE + (len - max);
                var tmp = GLog.sBuf.readUTFBytes(GLog.sBuf.bytesAvailable);
                GLog.sBuf.position = GLog.LIMIT_FIXED_SIZE;
                GLog.sBuf.writeUTFBytes(tmp);
                GLog.sBuf.length = max;
            }
            catch (error) {
                GLog.sBuf.clear();
                try {
                    GLog.sBuf.writeUTFBytes(error.message);
                }
                catch (error) { }
            }
        };
        GLog.LIMIT_MAX_SIZE = 3 * 1024 * 1024;
        GLog.LIMIT_FIXED_SIZE = 1 * 1024 * 1024;
        GLog.LIMIT_CUT_SIZE = 512 * 1024;
        return GLog;
    }());
    global.GLog = GLog;
})(global || (global = {}));
var global;
(function (global) {
    global.Parse = s3eUtils.Parse;
    var PartnerConsole = (function () {
        function PartnerConsole() {
        }
        PartnerConsole.init = function (bundleID, stage) {
            IceStone.__.ad.AdManager.enableAdvertisement = false;
            if (stage) {
                IceStone.setRoot(stage["mBody"]);
            }
            IceStone.setDevelop(global.CONFIG.LOG)
                .initializeAsync(bundleID).then(function () {
                PartnerConsole._isInited = true;
                PartnerConsole.registerSignEvents();
                IceStone.on(IceStone.Event.QUIT, function () {
                    PartnerConsole.sendGameEvent('msn_quit_game');
                });
                IceStone.on(IceStone.Event.STORE_READY, function () {
                    PartnerConsole.sendGameEvent('store_ready');
                });
                if (PartnerConsole._crossConfigLink) {
                    PartnerConsole.setCrossConfigLink(PartnerConsole._crossConfigLink);
                }
                if (IceStone.getServiceProvider() != IceStone.ServiceProvider.FACEBOOK_INSTANT) {
                    IceStone.__.events.EventManager.on(IceStone.__.events.EventsInternal.UPDATE_LEADERBOARD, function () {
                        PartnerConsole.updateLeaderboard();
                    });
                }
                if (PartnerConsole._isLoaded) {
                    PartnerConsole.loadComplete();
                }
            }).catch(function (error) {
                PartnerConsole.log(error || 'unknown error');
            });
        };
        PartnerConsole.isMode = function () {
            PartnerConsole.log('Is mode');
            if (!PartnerConsole.mode) {
                return 0;
            }
            return 1;
        };
        PartnerConsole.loadPercent = function (value) {
            if (PartnerConsole._isInited) {
                IceStone.setLoadingProgress(value * 100);
            }
        };
        PartnerConsole.loadComplete = function () {
            if (PartnerConsole._isInited) {
                IceStone.startGameAsync().then(function () {
                    PartnerConsole._isStarted = true;
                    if (PartnerConsole.deferredOptionsGetting) {
                        PartnerConsole.getOptions();
                    }
                });
            }
            else {
                PartnerConsole._isLoaded = true;
            }
        };
        PartnerConsole.postHighScore = function (highscore) {
            PartnerConsole.log('Post high score');
            PartnerConsole.highscoreResult = 0 + highscore;
            if (IceStone.getServiceProvider() != IceStone.ServiceProvider.FACEBOOK_INSTANT) {
                if (!PartnerConsole._mMarket) {
                    PartnerConsole.log('_mMarket is not set: ');
                    return;
                }
                if (!PartnerConsole._mCloud) {
                    PartnerConsole.log('_mCloud is not set: ');
                    return;
                }
                if (!PartnerConsole._leaderBoardTableName) {
                    PartnerConsole.log('_leaderBoardTableName is not set: ');
                    return;
                }
                PartnerConsole.log('postHighScore with market: ' + PartnerConsole._mMarket + "  userID : " + PartnerConsole._mCloud.objectId + " table name : " + PartnerConsole._leaderBoardTableName);
                PartnerConsole._mCloud.Call("submit", { game: { market: PartnerConsole._mMarket }, user: { objectId: PartnerConsole._mCloud.objectId }, table: { id: PartnerConsole._leaderBoardTableName, score: PartnerConsole.highscoreResult } }, function (data) {
                    PartnerConsole.log('score submited ');
                }, function (error) {
                    PartnerConsole.log('score submited error ');
                });
            }
        };
        PartnerConsole.setEndLevel = function (lvl) {
            PartnerConsole.log('set current level');
            PartnerConsole.lvlResult = 0 + lvl;
        };
        PartnerConsole.setHideLeaderboards = function (valueHide) {
            PartnerConsole.log('set hide leaderboards');
            PartnerConsole.hideLeaderboards = valueHide;
        };
        PartnerConsole.gameEnd = function () {
            PartnerConsole.log('end game');
        };
        PartnerConsole.setLeaderboardTableName = function (tableName) {
            PartnerConsole.log('Set Leaderboard table name');
            PartnerConsole._leaderBoardTableName = tableName;
        };
        PartnerConsole.setCloud = function (cloud, market) {
            PartnerConsole.log('setCloud');
            PartnerConsole._mCloud = cloud;
            PartnerConsole._mMarket = market;
        };
        PartnerConsole.setCrossConfigLink = function (crossConfigLink) {
            PartnerConsole.log('Set crossConfig link');
            if (!PartnerConsole._isInited) {
                PartnerConsole._crossConfigLink = crossConfigLink;
            }
            else {
                PartnerConsole._crossConfigLink = '';
                if (IceStone.__.provider.ProviderManager.provider.name != IceStone.ServiceProvider.FACEBOOK_INSTANT) {
                    return;
                }
                var httpStatus = 0;
                var loader = new global.ExtendedURLLoader(15, 8000, 0);
                loader.dataFormat = global.URLLoaderDataFormat.BINARY;
                loader.addEventListener(global.Event.COMPLETE, onComplete.bind(this));
                loader.addEventListener(global.IOErrorEvent.IO_ERROR, onError.bind(this));
                loader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
                loader.addEventListener(global.HTTPStatusEvent.HTTP_STATUS, onStatus.bind(this));
                loader.load(new global.URLRequest(crossConfigLink));
                function onComplete(event) {
                    PartnerConsole.log("[httpGet] onComplete url=" + crossConfigLink);
                    var loader = event.target;
                    if (loader) {
                        var ba = loader.data;
                        try {
                            var inBytes = as(ba, global.ByteArray);
                            inBytes.position = 0;
                            inBytes.position = 0;
                            PartnerConsole.XORByte(inBytes, inBytes.bytesAvailable.toString());
                            inBytes.position = 0;
                            inBytes.position = 0;
                            inBytes.uncompress();
                            inBytes.position = 0;
                            var jsonString = inBytes.readUTFBytes(inBytes.bytesAvailable);
                            PartnerConsole.log("[httpGet] onComplete jsonString=" + jsonString);
                            jsonString = jsonString.split("\n").join("");
                            IceStone.__.system.Storage.setAD_CONFIG(jsonString);
                            IceStone.__.provider.ProviderManager.provider.initCrossPromoConfig();
                        }
                        catch (error) {
                            error = window.asc.e2e(error);
                        }
                        loader.removeEventListener(global.Event.COMPLETE, onComplete.bind(this));
                        loader.removeEventListener(global.IOErrorEvent.IO_ERROR, onError.bind(this));
                        loader.removeEventListener(global.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
                        loader.removeEventListener(global.HTTPStatusEvent.HTTP_STATUS, onStatus.bind(this));
                    }
                    else {
                        PartnerConsole.log("[httpGet] ERROR::onComplete url=" + url);
                    }
                }
                function onError(event) {
                    var loader = event.currentTarget;
                    global.EventStats.handle(global.ASViewer, event);
                    PartnerConsole.log("[httpGet] ERROR::onError -> loader = " + loader);
                }
                function onStatus(event) {
                    httpStatus = event.status;
                }
            }
        };
        PartnerConsole.XORByte = function (binaryData, key) {
            binaryData = strict(binaryData, global.ByteArray);
            key = as(key, 'String');
            var keyIndex = 0;
            for (var i = 0; i < binaryData.length; i++) {
                binaryData.set(i, binaryData.get(i) ^ key.charCodeAt(keyIndex));
                keyIndex++;
                if (keyIndex >= key.length) {
                    keyIndex = 0;
                }
            }
        };
        PartnerConsole.sendOptions = function (data) {
            PartnerConsole.log('Send options');
            if (PartnerConsole._isStarted) {
                IceStone.user.setData(data);
            }
        };
        PartnerConsole.setOptionsAreReceivedCallback = function (callback) {
            PartnerConsole.log('Set OptionsAreReceived callback');
            if (PartnerConsole.wasOptionsGetting == 1)
                return;
            if (typeof callback === 'function') {
                PartnerConsole.optionsAreReceivedCbFn = callback;
                if (PartnerConsole.signedIn) {
                    PartnerConsole.getOptions();
                }
                else {
                    PartnerConsole.deferredOptionsGetting = 1;
                }
            }
            else {
                PartnerConsole.log('Callback is not function!');
            }
        };
        PartnerConsole.setGameEventCallback = function (callback) {
            PartnerConsole.log('Set GameEvent callback');
            if (typeof callback === 'function') {
                PartnerConsole.gameEventCbFn = callback;
                PartnerConsole.registerGameEvents();
            }
            else {
                PartnerConsole.log('Callback is not function!');
            }
        };
        PartnerConsole.registerGameEvents = function () {
            PartnerConsole.log('Register game events');
        };
        PartnerConsole.sendGameEvent = function (event) {
            if (PartnerConsole.gameEventCbFn) {
                PartnerConsole.gameEventCbFn(event);
            }
            else {
                PartnerConsole.log('No gameEventCbFn!');
            }
        };
        PartnerConsole.getOptions = function () {
            PartnerConsole.log('Get options');
            if (PartnerConsole.wasOptionsGetting == 1)
                return;
            if (PartnerConsole.deferredOptionsGetting) {
                PartnerConsole.deferredOptionsGetting = 0;
            }
            if (typeof PartnerConsole.optionsAreReceivedCbFn !== 'function') {
                PartnerConsole.log('No callback function!');
                return;
            }
            var resultFunction = function (resultData) {
                if (resultData && typeof resultData === 'string' && resultData.length > 0) {
                    PartnerConsole.log('Options are received!');
                    PartnerConsole.wasOptionsGetting = 1;
                    PartnerConsole.optionsAreReceivedCbFn(resultData);
                }
                else {
                    PartnerConsole.log('Empty options are received!');
                }
            };
            if (PartnerConsole._isStarted) {
                var optionsData = IceStone.user.getData();
                if (optionsData) {
                    resultFunction(optionsData);
                }
            }
            else {
                PartnerConsole.deferredOptionsGetting = 1;
            }
        };
        PartnerConsole.registerSignEvents = function () {
            PartnerConsole.log('Register sign events');
            PartnerConsole.signedIn = 1;
        };
        PartnerConsole.handleGameEvent = function (event) {
            PartnerConsole.log('Handle game events: ' + event);
            if (!PartnerConsole._isStarted) {
                PartnerConsole.log('Api not started: ' + event);
                if (event === 'start')
                    PartnerConsole.sendGameEvent('hide_menu');
                if (event === 'game_over')
                    PartnerConsole.sendGameEvent('show_menu');
                if (event === 'show_leaderboards')
                    PartnerConsole.sendGameEvent('hide_leaderboards');
                return;
            }
            if (IceStone.getServiceProvider() != IceStone.ServiceProvider.FACEBOOK_INSTANT && !PartnerConsole._leaderBoardTableName) {
                IceStone.__.provider.ProviderManager.provider.setHideLeaderboards(1);
            }
            else {
                IceStone.__.provider.ProviderManager.provider.setHideLeaderboards(PartnerConsole.hideLeaderboards);
            }
            if (event === 'start') {
                if (IceStone.getSDKVersion() == "1.0") {
                    IceStone.game.startAsync(0)
                        .then(function () {
                        PartnerConsole.sendGameEvent('hide_menu');
                    });
                }
                else {
                    IceStone.game.start();
                    PartnerConsole.sendGameEvent('hide_menu');
                }
            }
            if (event === 'game_over') {
                IceStone.game.endAsync("win", PartnerConsole.highscoreResult, PartnerConsole.lvlResult)
                    .then(function () {
                    if (IceStone.getServiceProvider() == IceStone.ServiceProvider.FACEBOOK_INSTANT && PartnerConsole.hideLeaderboards == 0) {
                        PartnerConsole.sendGameEvent('play');
                    }
                    else {
                        PartnerConsole.sendGameEvent('show_menu');
                    }
                });
            }
            if (event === 'show_leaderboards') {
                IceStone.__.provider.ProviderManager.provider.showLeaderboardsAsync()
                    .then(function () {
                    PartnerConsole.sendGameEvent('hide_leaderboards');
                });
            }
        };
        PartnerConsole.updateLeaderboard = function () {
            if (!PartnerConsole._mMarket) {
                PartnerConsole.log('_mMarket is not set: ');
                IceStone.__.provider.ProviderManager.provider.updateLeaderboard(null);
                return;
            }
            if (!PartnerConsole._mCloud) {
                PartnerConsole.log('_mCloud is not set: ');
                IceStone.__.provider.ProviderManager.provider.updateLeaderboard(null);
                return;
            }
            if (!PartnerConsole._leaderBoardTableName) {
                PartnerConsole.log('_leaderBoardTableName is not set: ');
                IceStone.__.provider.ProviderManager.provider.updateLeaderboard(null);
                return;
            }
            PartnerConsole.log('updateLeaderboard with market: ' + PartnerConsole._mMarket + "  userID : " + PartnerConsole._mCloud.objectId + " table name : " + PartnerConsole._leaderBoardTableName);
            PartnerConsole._mCloud.Call("leader", { game: { market: PartnerConsole._mMarket }, user: { objectId: PartnerConsole._mCloud.objectId }, table: { id: PartnerConsole._leaderBoardTableName, limit: 20, friends: false } }, function (data) {
                IceStone.__.provider.ProviderManager.provider.updateLeaderboard(data);
            }, function (error) {
                PartnerConsole.log('_leaderBoardTableName update error: ' + error);
                IceStone.__.provider.ProviderManager.provider.updateLeaderboard(null);
            });
        };
        PartnerConsole.getSignedIn = function () {
            return PartnerConsole.signedIn;
        };
        PartnerConsole.log = function (message) {
            var text_string = PartnerConsole.TAG + message;
            global.GLog.print(text_string);
        };
        PartnerConsole.TAG = '[Partner Console] ';
        PartnerConsole.mode = 0;
        PartnerConsole.signedIn = 0;
        PartnerConsole.IWIN = 1;
        PartnerConsole.FBIG = 2;
        PartnerConsole.MSN = 3;
        PartnerConsole.optionsAreReceivedCbFn = 0;
        PartnerConsole.gameEventCbFn = 0;
        PartnerConsole.wasOptionsGetting = 0;
        PartnerConsole.deferredOptionsGetting = 0;
        PartnerConsole.hideLeaderboards = 0;
        PartnerConsole.highscoreResult = 0;
        PartnerConsole.lvlResult = 0;
        PartnerConsole._isStarted = false;
        PartnerConsole._isInited = false;
        PartnerConsole._isLoaded = false;
        PartnerConsole._crossConfigLink = '';
        PartnerConsole._leaderBoardTableName = '';
        PartnerConsole._mCloud = null;
        PartnerConsole._mMarket = '';
        return PartnerConsole;
    }());
    global.PartnerConsole = PartnerConsole;
})(global || (global = {}));
var global;
(function (global) {
    global.Facebook = com.facebook.graph.Facebook;
    var s3eFacebookStatistics = (function () {
        function s3eFacebookStatistics() {
            this.is_Is3eExtensionStatistics = null;
        }
        s3eFacebookStatistics.prototype.logEvent = function (eventName, parameters, valueToSum) {
            if (parameters === void 0) { parameters = null; }
            if (valueToSum === void 0) { valueToSum = 0; }
            parameters = parameters || s3eFacebookStatistics.EMPTY_PARAMETERS;
            global.GLog.print("[Statistics] logEvent(" + eventName + ")");
            global.Facebook.logEvent(eventName, valueToSum, parameters);
            return true;
        };
        s3eFacebookStatistics.EMPTY_PARAMETERS = {};
        return s3eFacebookStatistics;
    }());
    global.s3eFacebookStatistics = s3eFacebookStatistics;
})(global || (global = {}));
var s3eUtils;
(function (s3eUtils) {
    s3eUtils.Sprite = flash.display.Sprite;
    var Popup = (function (_super) {
        __extends(Popup, _super);
        function Popup() {
            var _this = _super.call(this) || this;
            _this.is_IPopup = null;
            _this.mIsShowed = false;
            _this.mQueue = [];
            _this.visible = false;
            return _this;
        }
        Popup.prototype.load = function (reference) {
            try {
                this.mRef = window.eval(reference);
                if (typeof this.mRef.commandExec != 'function') {
                    this.mRef = null;
                }
            }
            catch (e) {
            }
        };
        Object.defineProperty(Popup.prototype, "isShowed", {
            get: function () {
                return this.mIsShowed;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Popup.prototype, "isLoaded", {
            get: function () {
                return this.mRef != null;
            },
            enumerable: true,
            configurable: true
        });
        Popup.prototype.show = function (title, body, buttonLabel, buttonCallback, withClose, applyButtonCallback) {
            if (buttonLabel === void 0) { buttonLabel = null; }
            if (buttonCallback === void 0) { buttonCallback = null; }
            if (withClose === void 0) { withClose = false; }
            if (applyButtonCallback === void 0) { applyButtonCallback = true; }
            if (applyButtonCallback && this.mButtonCallback != null) {
                this.mQueue[this.mQueue.length] = function () {
                    this.show(title, body, buttonLabel, buttonCallback, withClose, applyButtonCallback);
                }.bind(this);
                return;
            }
            this.mButtonCallback = buttonCallback;
            if (!this.mRef) {
                alert(body);
                this.sendResult(false);
                return;
            }
            if (!this.mIsShowed) {
                this.mIsShowed = true;
                this.visible = this.mIsShowed;
                s3eUtils.Blocker.show(this);
            }
            this.mRef.commandExec('cmdShow', { titleId: title || '', messageId: body || '', buttonId: buttonLabel || '' }, function () {
                this.hide();
                this.sendResult(true);
            }.bind(this));
        };
        Popup.prototype.hide = function () {
            if (this.mIsShowed) {
                this.mIsShowed = false;
                this.visible = this.mIsShowed;
                s3eUtils.Blocker.hide(this);
            }
            if (!this.mRef) {
                return;
            }
            this.mRef.commandExec('cmdHide');
        };
        Popup.prototype.sendResult = function (value) {
            if (this.mButtonCallback == null) {
                return;
            }
            var cb = this.mButtonCallback;
            this.mButtonCallback = null;
            if (cb.length > 0)
                cb(value);
            else
                cb();
            this.checkQueue();
        };
        Popup.prototype.checkQueue = function () {
            if (this.mButtonCallback != null) {
                return;
            }
            if (!this.mQueue.length) {
                return;
            }
            var func = this.mQueue.shift();
            if (func != null) {
                func();
            }
        };
        return Popup;
    }(s3eUtils.Sprite));
    s3eUtils.Popup = Popup;
})(s3eUtils || (s3eUtils = {}));
var s3eUtils;
(function (s3eUtils) {
    s3eUtils.Error = global.Error;
    s3eUtils.GLog = global.GLog;
    s3eUtils.ExternalInterface = flash.external.ExternalInterface;
    s3eUtils.URLVariables = flash.net.URLVariables;
    var URLVariablesGlobal = (function (_super) {
        __extends(URLVariablesGlobal, _super);
        function URLVariablesGlobal() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        URLVariablesGlobal.init = function () {
            if (URLVariablesGlobal.inited) {
                return;
            }
            URLVariablesGlobal.inited = true;
            try {
                URLVariablesGlobal.location = window.documentLocationHrefString;
                if (URLVariablesGlobal.location == '')
                    URLVariablesGlobal.location = null;
                URLVariablesGlobal.location = URLVariablesGlobal.location || document.location.href.toString();
                var index = URLVariablesGlobal.location.indexOf('&hash=');
                if (index >= 0) {
                    URLVariablesGlobal.location = URLVariablesGlobal.location.substr(index + '&hash='.length);
                    URLVariablesGlobal.location = URLVariablesGlobal.location.replace(new RegExp("%3D", 'g'), '=');
                    URLVariablesGlobal.location = URLVariablesGlobal.location.replace(new RegExp("%26", 'g'), '&');
                }
                index = URLVariablesGlobal.location.indexOf('custom_args=');
                if (index >= 0) {
                    URLVariablesGlobal.location = URLVariablesGlobal.location.substr(index + 'custom_args='.length);
                    URLVariablesGlobal.location = URLVariablesGlobal.location.replace(new RegExp("%3D", 'g'), '=');
                    URLVariablesGlobal.location = URLVariablesGlobal.location.replace(new RegExp("%26", 'g'), '&');
                }
                if (URLVariablesGlobal.location.indexOf('?') != -1) {
                    URLVariablesGlobal.vars.decode(URLVariablesGlobal.location.slice(URLVariablesGlobal.location.indexOf('?') + 1));
                }
                else {
                    URLVariablesGlobal.vars.decode(URLVariablesGlobal.location);
                }
                s3eUtils.GLog.print("[URLVariables] location = " + URLVariablesGlobal.location);
            }
            catch (error) {
                s3eUtils.GLog.print(error.message);
            }
        };
        URLVariablesGlobal.get = function (name) {
            URLVariablesGlobal.init();
            return name in URLVariablesGlobal.vars ? URLVariablesGlobal.vars[name] : null;
        };
        URLVariablesGlobal.location = 'localhost';
        URLVariablesGlobal.vars = new s3eUtils.URLVariables;
        URLVariablesGlobal.inited = false;
        return URLVariablesGlobal;
    }(s3eUtils.URLVariables));
    s3eUtils.URLVariablesGlobal = URLVariablesGlobal;
})(s3eUtils || (s3eUtils = {}));
var tools;
(function (tools) {
    tools.Error = global.Error;
    tools.ByteArray = flash.utils.ByteArray;
    tools.Dictionary = flash.utils.Dictionary;
    tools.ASViewer = global.ASViewer;
    var CommonBuffers = (function () {
        function CommonBuffers() {
            throw new tools.Error("Abstract class error");
        }
        CommonBuffers.init = function () {
            CommonBuffers.STRING_BUFF = new tools.ByteArray;
            CommonBuffers.sMap = new tools.Dictionary;
            CommonBuffers.getBuffer(CommonBuffers.STRING_TYPE, 256 * 1024);
            CommonBuffers.sInited = true;
        };
        CommonBuffers.getBuffer = function (type, size) {
            if (!CommonBuffers.sMap.get(type)) {
                CommonBuffers.sMap.set(type, { dataPtr: Module._malloc(size), dataSize: size });
            }
            if (size > CommonBuffers.sMap.get(type).dataSize) {
                Module._free(CommonBuffers.sMap.get(type).dataPtr);
                CommonBuffers.sMap.get(type).dataPtr = Module._malloc(size);
                CommonBuffers.sMap.get(type).dataSize = size;
            }
            return CommonBuffers.sMap.get(type).dataPtr;
        };
        CommonBuffers.writeStr = function (value) {
            if (!CommonBuffers.sInited)
                CommonBuffers.init();
            CommonBuffers.STRING_BUFF.clear();
            CommonBuffers.STRING_BUFF.writeUTFBytes(value || '');
            CommonBuffers.STRING_BUFF.writeByte(0);
            var dataSize = CommonBuffers.STRING_BUFF.length;
            var dataPtr = CommonBuffers.getBuffer(CommonBuffers.STRING_TYPE, dataSize);
            tools.ASViewer.writeBytes(dataPtr, dataSize, CommonBuffers.STRING_BUFF);
            return dataPtr;
        };
        CommonBuffers.STRING_TYPE = 0;
        CommonBuffers.sInited = false;
        return CommonBuffers;
    }());
    tools.CommonBuffers = CommonBuffers;
})(tools || (tools = {}));
var tools;
(function (tools) {
    tools.Error = global.Error;
    tools.getTimer = flash.utils.getTimer;
    var Tests = (function () {
        function Tests() {
            throw new tools.Error("Abstract class error");
        }
        Tests.start = function (type, param, value) {
            if (param === void 0) { param = null; }
            if (value === void 0) { value = null; }
            Tests.list[type] = { type: type, startedAt: tools.getTimer(), status: Tests.STATUS_STARTED, startParam: param, startValue: value };
        };
        Tests.finish = function (type, param, value) {
            if (param === void 0) { param = null; }
            if (value === void 0) { value = null; }
            var test = Tests.list[type];
            if (!test) {
                return;
            }
            if (test.status != Tests.STATUS_STARTED) {
                return;
            }
            test.status = Tests.STATUS_FINISHED;
            test.duration = tools.getTimer() - test.startedAt;
            test.finishParam = param;
            test.finishValue = value;
            if (!Tests.max[type]) {
                Tests.max[type] = test;
            }
            if (test.duration > Tests.max[type].duration) {
                Tests.max[type] = test;
            }
        };
        Tests.isStarted = function (type) {
            var test = Tests.list[type];
            if (!test)
                return false;
            return test.status == Tests.STATUS_STARTED;
        };
        Tests.isFinished = function (type) {
            var test = Tests.list[type];
            if (!test)
                return false;
            return test.status == Tests.STATUS_FINISHED;
        };
        Tests.getList = function () {
            var output = new Array;
            for (var _i = 0, _a = Tests.list; _i < _a.length; _i++) {
                var test = _a[_i];
                if (test.status != Tests.STATUS_FINISHED) {
                    continue;
                }
                var obj = { type: test.type };
                var result = '';
                result += "duration (ms)=" + test.duration;
                result += Tests.addMax(test, 'duration');
                if (test.startParam) {
                    result += ", " + test.startParam + "=" + test.startValue;
                    result += Tests.addMax(test, 'startValue');
                }
                if (test.finishParam) {
                    result += ", " + test.finishParam + "=" + test.finishValue;
                    result += Tests.addMax(test, 'finishValue');
                }
                switch (test.type) {
                    case Tests.NETWORK:
                        result += " (" + tools.mbsec(Tests.getParamInt(test, "bytes"), test.duration) + ")";
                        break;
                }
                obj.text = result;
                output[output.length] = obj;
            }
            return output;
        };
        Tests.getResultNum = function (type) {
            for (var _i = 0, _a = Tests.list; _i < _a.length; _i++) {
                var test = _a[_i];
                if (test.status != Tests.STATUS_FINISHED) {
                    continue;
                }
                switch (test.type) {
                    case Tests.NETWORK:
                        return tools.mbsecnum(Tests.getParamInt(test, "bytes"), test.duration);
                }
            }
            return 0.0;
        };
        Tests.getParam = function (test, name) {
            if (test.startParam == name)
                return test.startValue;
            if (test.finishParam == name)
                return test.finishValue;
            return null;
        };
        Tests.getParamInt = function (test, name) {
            return Tests.getParam(test, name);
        };
        Tests.addMax = function (test, param) {
            var maxTest = Tests.max[test.type];
            if (maxTest && maxTest[param] && test.duration != maxTest.duration) {
                return ' / ' + maxTest[param];
            }
            return '';
        };
        Tests.NETWORK = "Network";
        Tests.DECODE = "Decode";
        Tests.STATUS_STARTED = 0;
        Tests.STATUS_FINISHED = 1;
        Tests.list = {};
        Tests.max = {};
        return Tests;
    }());
    tools.Tests = Tests;
})(tools || (tools = {}));
var global;
(function (global) {
    var XML = (function () {
        function XML(xml) {
            if (xml === void 0) { xml = null; }
            this._attributes = [];
            this._namespaces = [];
            this._nodeKind = "element";
            this._children = [];
            if (xml) {
                var parser = new DOMParser();
                var errorNS;
                try {
                    errorNS = parser.parseFromString('<', 'application/xml').getElementsByTagName("parsererror")[0].namespaceURI;
                }
                catch (e) {
                }
                var doc = parser.parseFromString(xml, "application/xml");
                if (doc.getElementsByTagNameNS(errorNS, 'parsererror').length > 0) {
                    throw new global.Error('XML parse error');
                }
                var node = doc.childNodes[0];
                this._version = doc.xmlVersion;
                this._encoding = doc.xmlEncoding;
                this._name = new global.QName();
                this._name.prefix = node.prefix;
                this._name.uri = node.namespaceURI;
                this._name.localName = node.localName;
                XML.iterateElement(node, this);
                this.normalize();
            }
            var __get = function () {
                return this;
            };
            var __set = function (newValue) {
            };
            var d = {
                "get": __get,
                "set": __set,
                enumerable: true,
                configurable: true
            };
            Object.defineProperty(this, "0", d);
        }
        XML.setDefaultNamespace = function (ns) {
            if (!ns)
                XML.defaultNamespace = null;
            else
                ns = new global.Namespace(ns);
        };
        Object.defineProperty(XML, "prettyIndent", {
            get: function () {
                return XML._prettyIndent;
            },
            set: function (value) {
                XML._prettyIndent = value;
                XML._indentStr = "";
                for (var i = 0; i < value; i++) {
                    XML._indentStr = XML._indentStr + XML.INDENT_CHAR;
                }
            },
            enumerable: true,
            configurable: true
        });
        XML.escapeAttributeValue = function (value) {
            var outArr = [];
            var arr = value.split("");
            var len = arr.length;
            for (var i = 0; i < len; i++) {
                switch (arr[i]) {
                    case "<":
                        outArr[i] = "&lt;";
                        break;
                    case "&":
                        outArr[i] = "&amp;";
                        break;
                    case "\u000A":
                        outArr[i] = "&#xA;";
                        break;
                    case "\u000D":
                        outArr[i] = "&#xD;";
                        break;
                    case "\u0009":
                        outArr[i] = "&#x9;";
                        break;
                    default:
                        outArr[i] = arr[i];
                        break;
                }
            }
            return outArr.join("");
        };
        XML.escapeElementValue = function (value) {
            var i = 0;
            var outArr = [];
            var arr = value.split("");
            for (i = 0; i < arr.length; i++) {
                switch (arr[i]) {
                    case "<":
                        outArr[i] = "&lt;";
                        break;
                    case ">":
                        outArr[i] = "&gt;";
                        break;
                    case "&":
                        outArr[i] = "&amp;";
                        break;
                    default:
                        outArr[i] = arr[i];
                        break;
                }
            }
            return outArr.join("");
        };
        XML.insertAttribute = function (att, parent) {
            var xml = new XML();
            xml.setParent(parent);
            xml.setNodeKind("attribute");
            xml.setName(att.name);
            xml.setValue(att.value);
            parent.addChild(xml);
            return xml;
        };
        XML.iterateElement = function (node, xml) {
            var i = 0;
            for (i = 0; i < node.attributes.length; i++) {
                XML.insertAttribute(node.attributes[i], xml);
            }
            for (i = 0; i < node.childNodes.length; i++) {
                var child = XML.fromNode(node.childNodes[i]);
                xml.addChild(child);
            }
        };
        XML.fromNode = function (node) {
            var xml;
            var i = 0;
            var data = node.nodeValue;
            var qname = new global.QName(node.namespaceURI, node.nodeName);
            qname.prefix = node.prefix;
            switch (node.nodeType) {
                case 1:
                    xml = new XML();
                    xml.setNodeKind("element");
                    xml.setName(qname);
                    XML.iterateElement(node, xml);
                    break;
                case 3:
                    xml = new XML();
                    xml.setNodeKind("text");
                    xml.setName(qname);
                    xml.setValue(data);
                    break;
                case 4:
                    xml = new XML();
                    xml.setName(qname);
                    xml.setNodeKind("text");
                    data = "<![CDATA[" + data + "]]>";
                    xml.setValue(data);
                    break;
                case 7:
                    xml = new XML();
                    xml.setNodeKind("processing-instruction");
                    xml.setName(qname);
                    xml.setValue(data);
                    break;
                case 8:
                    xml = new XML();
                    xml.setNodeKind("comment");
                    xml.setValue(data);
                    break;
                default:
                    throw new TypeError("Unknown XML node type!");
            }
            return xml;
        };
        XML.namespaceInArray = function (ns, arr, considerPrefix) {
            if (considerPrefix === void 0) { considerPrefix = true; }
            if (!arr)
                return false;
            var i = 0;
            for (i = 0; i < arr.length; i++) {
                if (ns.uri == arr[i].uri) {
                    if (!considerPrefix)
                        return true;
                    if (ns.prefix == arr[i].prefix)
                        return true;
                }
            }
            return false;
        };
        XML.trimXMLWhitespace = function (value) {
            return value.replace(/^\s+|\s+$/gm, '');
        };
        XML.defaultSettings = function () {
            return {
                ignoreComments: true,
                ignoreProcessingInstructions: true,
                ignoreWhitespace: true,
                prettyIndent: 2,
                prettyPrinting: true
            };
        };
        XML.setSettings = function (value) {
            if (!value)
                return;
            XML.ignoreComments = value.ignoreComments === undefined ? XML.ignoreComments : value.ignoreComments;
            XML.ignoreProcessingInstructions = value.ignoreProcessingInstructions === undefined ? XML.ignoreProcessingInstructions : value.ignoreProcessingInstructions;
            XML.ignoreWhitespace = value.ignoreWhitespace === undefined ? XML.ignoreWhitespace : value.ignoreWhitespace;
            XML.prettyIndent = value.prettyIndent === undefined ? XML.prettyIndent : value.prettyIndent;
            XML.prettyPrinting = value.prettyPrinting === undefined ? XML.prettyPrinting : value.prettyPrinting;
        };
        XML.settings = function () {
            var result = {};
            result.ignoreComments = XML.ignoreComments;
            result.ignoreProcessingInstructions = XML.ignoreProcessingInstructions;
            result.ignoreWhitespace = XML.ignoreWhitespace;
            result.prettyIndent = XML.prettyIndent;
            result.prettyPrinting = XML.prettyPrinting;
            return result;
        };
        XML.prototype.dispose = function () {
            this._children = [];
            this._attributes = [];
            this._namespaces = [];
        };
        XML.prototype.addChild = function (child) {
            if (!child)
                return;
            if (XML.ignoreWhitespace && child.nodeKind() == 'text' && !child.getValue().replace(/[\n\r\t]/g, '').length)
                return;
            child.setParent(this);
            if (child.nodeKind() == "attribute") {
                if (!this._attributes)
                    this._attributes = [];
                this._attributes.push(child);
            }
            else
                this._children.push(child);
            this.normalize();
            XML.__index(this);
        };
        XML.prototype.addNamespace = function (ns) {
            if (this._nodeKind == "text" || this._nodeKind == "comment" || this._nodeKind == "processing-instruction" || this._nodeKind == "attribute")
                return this;
            if (ns.prefix === null)
                return this;
            if (ns.prefix == "" && this.name().uri == "")
                return this;
            var match = null;
            var i = 0;
            for (i = 0; i < this._namespaces.length; i++) {
                if (this._namespaces[i].prefix == ns.prefix) {
                    match = this._namespaces[i];
                    break;
                }
            }
            if (match)
                this._namespaces[i] = ns;
            else
                this._namespaces.push(ns);
            if (ns.prefix == this.name().prefix)
                this.name().prefix = null;
            for (i = 0; i < this._attributes.length; i++) {
                if (this._attributes[i].name().prefix == ns.prefix)
                    this._attributes[i].name().prefix = null;
            }
            return this;
        };
        XML.prototype.appendChild = function (child) {
            child.setParent(this);
            this._children.push(child);
            this.normalize();
            XML.__index(this);
            return child;
        };
        XML.prototype.$ = function (filter) {
            if (filter(this))
                return this;
            return new XML();
        };
        XML.prototype.attribute = function (attributeName) {
            var i = 0;
            if (attributeName == "*")
                return this.attributes();
            attributeName = this.toAttributeName(attributeName);
            var list = new global.XMLList();
            for (i = 0; i < this._attributes.length; i++) {
                if (this._attributes[i].name().matches(attributeName))
                    list.appendChild(this._attributes[i]);
            }
            list.targetObject = this;
            list.targetProperty = attributeName;
            return XML.__index(list);
        };
        XML.prototype.attributes = function (toIndex) {
            if (toIndex === void 0) { toIndex = true; }
            var i = 0;
            var list = new global.XMLList();
            for (i = 0; i < this._attributes.length; i++)
                list.appendChild(this._attributes[i]);
            list.targetObject = this;
            return toIndex ? XML.__index(list) : list;
        };
        XML.prototype.child = function (propertyName) {
            var i = 0;
            var list = new global.XMLList();
            if (parseInt(propertyName, 10).toString() == propertyName) {
                if (propertyName != "0")
                    return null;
                list.appendChild(this);
                list.targetObject = this;
                return list;
            }
            propertyName = this.toXMLName(propertyName);
            if (propertyName.isAttribute) {
                for (i = 0; i < this._attributes.length; i++) {
                    if (propertyName.matches(this._attributes[i].name()))
                        list.appendChild(this._attributes[i]);
                }
            }
            else {
                for (i = 0; i < this._children.length; i++) {
                    if (propertyName.matches(this._children[i].name()))
                        list.appendChild(this._children[i]);
                }
            }
            list.targetObject = this;
            list.targetProperty = propertyName;
            return XML.__index(list);
        };
        XML.prototype.childIndex = function () {
            if (!this._parent)
                return -1;
            return this._parent.getIndexOf(this);
        };
        XML.prototype.children = function () {
            var i = 0;
            var list = new global.XMLList();
            for (i = 0; i < this._children.length; i++)
                list.appendChild(this._children[i]);
            list.targetObject = this;
            return XML.__index(list);
        };
        XML.prototype.comments = function () {
            var i = 0;
            var list = new global.XMLList();
            for (i = 0; i < this._children.length; i++) {
                if (this._children[i].nodeKind() == "comment")
                    list.appendChild(this._children[i]);
            }
            list.targetObject = this;
            return list;
        };
        XML.prototype.concat = function (list) {
            if (list instanceof XML) {
                var newList = new global.XMLList();
                newList.appendChild(list);
                list = newList;
            }
            if (!(list instanceof global.XMLList))
                throw new TypeError("invalid type");
            var retVal = new global.XMLList();
            retVal.appendChild(this);
            var item;
            for (var i in list) {
                var item = list[i];
                retVal.appendChild(item);
            }
            return XML.__index(retVal);
        };
        XML.prototype.contains = function (value) {
            return this.equals(value);
        };
        XML.prototype.copy = function () {
            var i = 0;
            var xml = new XML();
            xml.setNodeKind(this._nodeKind);
            xml.setName(this.name());
            xml.setValue(this._value);
            for (i = 0; i < this._namespaces.length; i++) {
                xml.addNamespace(new global.Namespace(this._namespaces[i]));
            }
            for (i = 0; i < this._attributes.length; i++)
                xml.addChild(this._attributes[i].copy());
            for (i = 0; i < this._children.length; i++)
                xml.addChild(this._children[i].copy());
            return xml;
        };
        XML.prototype.deleteChildAt = function (idx) {
            if (idx < 0)
                return;
            if (idx >= this._children.length)
                return;
            var child = this._children[idx];
            child.setParent(null);
            this._children.splice(idx, 1);
        };
        XML.prototype.descendants = function (name) {
            if (name === void 0) { name = "*"; }
            var i = 0;
            if (!name)
                name = "*";
            name = this.toXMLName(name);
            var list = new global.XMLList();
            if (name.isAttribute) {
                for (i = 0; i < this._attributes.length; i++) {
                    if (name.matches(this._attributes[i].name()))
                        list.appendChild(this._attributes[i]);
                }
            }
            for (i = 0; i < this._children.length; i++) {
                if (this._children[i].nodeKind() == "element") {
                    if (name.matches(this._children[i].name()))
                        list.appendChild(this._children[i]);
                    list.concat(this._children[i].descendants(name));
                }
            }
            return XML.__index(list);
        };
        XML.prototype.elements = function (name, toIndex) {
            if (name === void 0) { name = "*"; }
            if (toIndex === void 0) { toIndex = true; }
            if (!name)
                name = "*";
            name = this.toXMLName(name);
            var i = 0;
            var list = new global.XMLList();
            for (i = 0; i < this._children.length; i++) {
                if (this._children[i].nodeKind() == "element" && name.matches(this._children[i].name()))
                    list.appendChild(this._children[i]);
            }
            list.targetObject = this;
            list.targetProperty = name;
            return toIndex ? XML.__index(list) : list;
        };
        XML.prototype.equals = function (xml) {
            var i = 0;
            if (!(xml instanceof XML))
                return false;
            if (xml.nodeKind() != this._nodeKind)
                return false;
            if (!this.name().equals(xml.name()))
                return false;
            var selfAttrs = this.getAttributeArray();
            var xmlAttrs = xml.getAttributeArray();
            if (selfAttrs.length != xmlAttrs.length)
                return false;
            if (this.getValue() != xml.getValue())
                return false;
            for (i = 0; i < selfAttrs.length; i++) {
                if (!xml.hasAttribute(selfAttrs[i]))
                    return false;
            }
            var selfChldrn = this.getChildrenArray();
            var xmlChildren = xml.getChildrenArray();
            if (selfChldrn.length != xmlChildren.length)
                return false;
            for (i = 0; i < selfChldrn.length; i++) {
                if (!selfChldrn[i].equals(xmlChildren[i]))
                    return false;
            }
            return true;
        };
        XML.prototype.hasAttribute = function (nameOrXML, value) {
            if (value === void 0) { value = null; }
            if (!this._attributes)
                return false;
            var name;
            if (nameOrXML instanceof XML) {
                name = nameOrXML.name();
                value = nameOrXML.getValue();
            }
            else {
                name = new global.QName(nameOrXML);
            }
            var i = 0;
            for (i = 0; i < this._attributes.length; i++) {
                if (name.matches(this._attributes[i].name())) {
                    if (!value)
                        return true;
                    return value == this._attributes[i].getValue();
                }
            }
            return false;
        };
        XML.prototype.getAncestorNamespaces = function (namespaces) {
            namespaces = namespaces.slice();
            var nsIdx = 0;
            var pIdx = 0;
            if (this._parent) {
                var parentNS = this._parent.inScopeNamespaces();
                var len = parentNS.length;
                for (pIdx = 0; pIdx < len; pIdx++) {
                    var curNS = parentNS[pIdx];
                    var doInsert = true;
                    for (nsIdx = 0; nsIdx < namespaces.length; nsIdx++) {
                        if (curNS.uri == namespaces[nsIdx].uri && curNS.prefix == namespaces[nsIdx].prefix) {
                            doInsert = false;
                            break;
                        }
                    }
                    if (doInsert)
                        namespaces.push(curNS);
                }
                namespaces = this._parent.getAncestorNamespaces(namespaces);
            }
            return namespaces;
        };
        XML.prototype.getAttributeArray = function () {
            return this._attributes ? this._attributes.slice() : [];
        };
        XML.prototype.getChildrenArray = function () {
            return this._children ? this._children.slice() : [];
        };
        XML.prototype.getIndexOf = function (elem) {
            return this._children.indexOf(elem);
        };
        XML.prototype.getURI = function (prefix) {
            var i = 0;
            var namespaces = this.getAncestorNamespaces(this._namespaces);
            for (i = 0; i < namespaces.length; i++) {
                if (namespaces[i].prefix == prefix)
                    return namespaces[i].uri;
            }
            return "";
        };
        XML.prototype.getValue = function () {
            return this._value;
        };
        XML.prototype.hasComplexContent = function () {
            if (this._nodeKind == "attribute" || this._nodeKind == "comment" || this._nodeKind == "processing-instruction" || this._nodeKind == "text")
                return false;
            var i = 0;
            for (i = 0; i < this._children.length; i++) {
                if (this._children[i].nodeKind() == "element")
                    return true;
            }
            return false;
        };
        XML.prototype.hasOwnProperty = function (p) {
            if (parseInt(p, 10).toString() == p)
                return p == "0";
            var name = this.toXMLName(p);
            var i = 0;
            for (i = 0; i < this._attributes.length; i++) {
                if (this._attributes[i].name().matches(name))
                    return true;
            }
            for (i = 0; i < this._children.length; i++) {
                if (this._children[i].nodeKind() != "element")
                    continue;
                if (this._children[i].name().matches(name))
                    return true;
            }
            return false;
        };
        XML.prototype.hasSimpleContent = function () {
            if (this._nodeKind == "comment" || this._nodeKind == "processing-instruction")
                return false;
            var i = 0;
            for (i = 0; i < this._children.length; i++) {
                if (this._children[i].nodeKind() == "element")
                    return false;
            }
            return true;
        };
        XML.prototype.inScopeNamespaces = function () {
            return this._namespaces.slice();
        };
        XML.prototype.insertChildAt = function (child, idx) {
            if (this._nodeKind == "text" || this._nodeKind == "comment" || this._nodeKind == "processing-instruction" || this._nodeKind == "attribute")
                return;
            if (!child)
                return;
            var parent = child.parent();
            if (parent)
                parent.removeChild(child);
            child.setParent(this);
            this._children.splice(idx, 0, child);
        };
        XML.prototype.insertChildAfter = function (child1, child2) {
            if (this._nodeKind == "text" || this._nodeKind == "comment" || this._nodeKind == "processing-instruction" || this._nodeKind == "attribute")
                return null;
            if (!child1) {
                this.insertChildAt(child2, 0);
                return child2;
            }
            var idx = this._children.indexOf(child1);
            if (idx >= 0) {
                this.insertChildAt(child2, idx + 1);
            }
            return child2;
        };
        XML.prototype.insertChildBefore = function (child1, child2) {
            if (this._nodeKind == "text" || this._nodeKind == "comment" || this._nodeKind == "processing-instruction" || this._nodeKind == "attribute")
                return null;
            if (!child1) {
                this.insertChildAt(child2, this._children.length);
                return child2;
            }
            var idx = this._children.indexOf(child1);
            if (idx >= 0) {
                this.insertChildAt(child2, idx);
            }
            return child2;
        };
        XML.prototype.length = function () {
            return 1;
        };
        XML.prototype.localName = function () {
            return this.name().localName;
        };
        XML.prototype.name = function () {
            if (!this._name)
                this._name = new global.QName();
            return this._name;
        };
        XML.prototype.namespace = function (prefix) {
            if (prefix === void 0) { prefix = null; }
            var i = 0;
            if (prefix) {
                for (i = 0; i < this._namespaces.length; i++) {
                    if (this._namespaces[i].prefix == prefix)
                        return this._namespaces[i];
                }
                if (this._parent)
                    return this._parent.namespace(prefix);
                return null;
            }
            if (this._nodeKind == "text" || this._nodeKind == "comment" || this._nodeKind == "processing-instruction")
                return null;
            return this.name().getNamespace(this.namespaceDeclarations());
        };
        XML.prototype.namespaceDeclarations = function () {
            var i = 0;
            var retVal = [];
            if (this._nodeKind == "text" || this._nodeKind == "comment" || this._nodeKind == "processing-instruction" || this._nodeKind == "attribute")
                return retVal;
            var declaredNS = this._namespaces.slice();
            var parent = this._parent;
            while (parent) {
                var parentNS = parent.inScopeNamespaces();
                var idx = 0;
                var pIdx = 0;
                for (pIdx = 0; i < parentNS.length; pIdx++) {
                    var uri = parentNS[pIdx].uri;
                    var prefix = parentNS[pIdx].prefix;
                    for (idx = 0; i < declaredNS.length; idx++) {
                        if (declaredNS[idx].uri == uri && declaredNS[idx].prefix == prefix) {
                            declaredNS.push(parentNS[pIdx]);
                            break;
                        }
                    }
                }
                parent = parent.parent();
            }
            return declaredNS;
        };
        XML.prototype.nodeKind = function () {
            return this._nodeKind;
        };
        XML.prototype.normalize = function () {
            var len = this._children.length - 1;
            var lastChild;
            for (var i = len; i >= 0; i--) {
                var child = this._children[i];
                if (child.nodeKind() == "element") {
                    child.normalize();
                }
                else if (child.nodeKind() == "text") {
                    if (lastChild && lastChild.nodeKind() == "text") {
                        child.setValue(child.text().toString() + lastChild.text().toString());
                        this.deleteChildAt(i + 1);
                    }
                    if (!child.text())
                        this.deleteChildAt(i);
                }
                lastChild = child;
            }
            return this;
        };
        XML.prototype.parent = function () {
            return this._parent;
        };
        XML.prototype.plus = function (rightHand) {
            var list = new global.XMLList();
            list.appendChild(this);
            return list.plus(rightHand);
        };
        XML.prototype.prependChild = function (child) {
            child.setParent(this);
            this._children.unshift(child);
            return child;
        };
        XML.prototype.processingInstructions = function (name) {
            if (name === void 0) { name = "*"; }
            var i = 0;
            var list = new global.XMLList();
            for (i = 0; i < this._children.length; i++) {
                if (this._children[i].nodeKind() == "processing-instruction")
                    list.appendChild(this._children[i]);
            }
            list.targetObject = this;
            return list;
        };
        XML.prototype.removeChild = function (child) {
            var i = 0;
            var removed;
            if (!child)
                return false;
            if (!this._attributes)
                return false;
            if (!(child instanceof XML))
                return this.removeChildByName(child);
            if (child.nodeKind() == "attribute") {
                for (i = 0; i < this._attributes.length; i++) {
                    if (child.equals(this._attributes[i])) {
                        removed = this._attributes[i];
                        removed.setParent(null);
                        this._attributes.splice(i, 1);
                        return true;
                    }
                }
            }
            var idx = this._children.indexOf(child);
            if (idx < 0)
                return false;
            removed = this._children.splice(idx, 1);
            child.setParent(null);
            XML.__index(this);
            return removed != null;
        };
        XML.prototype.removeChildByName = function (name) {
            var i = 0;
            name = this.toXMLName(name);
            var child = null;
            var removedItem = false;
            if (name.isAttribute) {
                if (!this._attributes)
                    return false;
                for (i = this._attributes.length - 1; i >= 0; i--) {
                    if (this._attributes[i].name().matches(name)) {
                        child = this._attributes[i];
                        child.setParent(null);
                        this._attributes.splice(i, 1);
                        removedItem = true;
                    }
                }
                return removedItem;
            }
            if (!this._children)
                return false;
            for (i = this._children.length - 1; i >= 0; i--) {
                if (this._children[i].name().matches(name)) {
                    child = this._children[i];
                    child.setParent(null);
                    this._children.splice(i, 1);
                    removedItem = true;
                }
            }
            return removedItem;
        };
        XML.prototype.removeChildAt = function (index) {
            throw new global.Error("Cannot call delete on XML");
        };
        XML.prototype.removeNamespace = function (ns) {
            var i = 0;
            if (this._nodeKind == "text" || this._nodeKind == "comment" || this._nodeKind == "processing-instruction" || this._nodeKind == "attribute")
                return this;
            if (!(ns instanceof global.Namespace))
                ns = new global.Namespace(ns);
            if (ns == this.name().getNamespace(this._namespaces))
                return this;
            for (i = 0; i < this._attributes.length; i++) {
                if (ns == this._attributes[i].name().getNamespace(this._namespaces))
                    return this;
            }
            for (i = this._namespaces.length - 1; i >= 0; i--) {
                if (this._namespaces[i].uri == ns.uri && this._namespaces[i].prefix == ns.prefix)
                    this._namespaces.splice(i, 1);
                else if (ns.prefix == null && this._namespaces[i].uri == ns.uri)
                    this._namespaces.splice(i, 1);
            }
            for (i = 0; i < this._children.length; i++) {
                if (this._children[i].nodeKind() == "element")
                    this._children[i].removeNamespace(ns);
            }
            return this;
        };
        XML.prototype.replace = function (propertyName, value) {
            if (this._nodeKind == "text" || this._nodeKind == "comment" || this._nodeKind == "processing-instruction" || this._nodeKind == "attribute")
                return this;
            if (value === null || value === undefined)
                return this;
            if ((value instanceof XML) || (value instanceof global.XMLList))
                value = value.copy();
            else
                value = value.toString();
            return null;
        };
        XML.prototype.replaceChildAt = function (idx, v) {
            if (this._nodeKind == "text" || this._nodeKind == "comment" || this._nodeKind == "processing-instruction" || this._nodeKind == "attribute")
                return;
            if (idx > this._children.length)
                idx = this._children.length;
            if (v instanceof XML && v.nodeKind() != "attribute") {
                if (v.nodeKind() == "element" && (v == this || this.isAncestor(v)))
                    throw new TypeError("cannot assign parent xml as child");
                v.setParent(this);
                if (this._children[idx])
                    this.removeChild(this._children[idx]);
                this.insertChildAt(v, idx);
            }
            else if (v instanceof global.XMLList) {
                if (this._children[idx])
                    this._children[idx].setParent(null);
                var len = v.length();
                v[0].setParent(this);
                this._children[idx] = v[0];
                var listIdx = 1;
                var chld = v[0];
                while (listIdx < len) {
                    chld = v[listIdx];
                    this.insertChildAt(chld, idx + listIdx);
                    listIdx++;
                }
            }
            else {
            }
        };
        XML.prototype.isAncestor = function (xml) {
            var p = this.parent();
            while (p) {
                if (p == xml)
                    return true;
                p = p.parent();
            }
            return false;
        };
        XML.prototype.setAttribute = function (attr, value) {
            var i = 0;
            if (!this._attributes)
                this._attributes = [];
            if (attr instanceof XML) {
                if (attr.nodeKind() == "attribute") {
                    for (i = 0; i < this._attributes.length; i++) {
                        if (this._attributes[i].name().equals(attr.name())) {
                            this._attributes[i].setValue(value);
                            return;
                        }
                    }
                    if (value)
                        attr.setValue(value);
                    this.addChild(attr);
                }
                return;
            }
            if (attr.indexOf("xmlns") == 0) {
                var ns = new global.Namespace(value.toString());
                if (attr.indexOf("xmlns:") == 0)
                    ns.prefix = attr.split(":")[1];
                this.addNamespace(ns);
            }
            else {
                var qname = this.toAttributeName(attr);
                var attrXML = new XML();
                attrXML.setNodeKind("attribute");
                attrXML.setName(this.toAttributeName(attr));
                attrXML.setValue(value);
                for (i = 0; i < this._attributes.length; i++) {
                    if (this._attributes[i].name().equals(attrXML.name())) {
                        this._attributes[i].setValue(value);
                        return;
                    }
                }
                this.addChild(attrXML);
            }
        };
        XML.prototype.setChild = function (elementName, elements) {
            var i = 0;
            var len = 0;
            var chld;
            if (elements instanceof XML) {
                var list = new global.XMLList();
                list[0] = elements;
                elements = list;
            }
            if (elements instanceof global.XMLList) {
                var chldrn = this.child(elementName);
                var childIdx = this.children().length() - 1;
                if (chldrn.length())
                    childIdx = chldrn[0].childIndex() - 1;
                len = chldrn.length() - 1;
                for (i = len; i >= 0; i--) {
                    this.removeChild(chldrn[i]);
                }
                var curChild = this._children[childIdx];
                len = elements.length();
                for (i = 0; i < len; i++) {
                    chld = elements[i];
                    if (!curChild) {
                        if (childIdx < 0)
                            curChild = this.prependChild(chld);
                        else
                            curChild = this.appendChild(chld);
                    }
                    else {
                        curChild = this.insertChildAfter(curChild, chld);
                    }
                }
            }
        };
        XML.prototype.setChildren = function (value) {
            var i = 0;
            var len = 0;
            var chld;
            if (value instanceof XML) {
                var list = new global.XMLList();
                list[0] = value;
                value = list;
            }
            if (value instanceof global.XMLList) {
                var chldrn = this.children();
                var childIdx = chldrn.length() - 1;
                if (chldrn.length())
                    childIdx = chldrn[0].childIndex();
                len = chldrn.length() - 1;
                for (i = len; i >= 0; i--) {
                    this.removeChild(chldrn[i]);
                }
                var curChild = this._children[childIdx];
                len = value.length();
                for (i = 0; i < len; i++) {
                    chld = value[i];
                    if (!curChild) {
                        curChild = this.appendChild(chld);
                    }
                    else {
                        curChild = this.insertChildAfter(curChild, chld);
                    }
                }
            }
            return this;
        };
        XML.prototype.setLocalName = function (name) {
            if (!this._name)
                this._name = new global.QName();
            this._name.localName = name;
        };
        XML.prototype.setName = function (name) {
            if (name instanceof global.QName)
                this._name = name;
            else
                this._name = new global.QName(name);
        };
        XML.prototype.setNamespace = function (ns) {
            if (this._nodeKind == "text" || this._nodeKind == "comment" || this._nodeKind == "processing-instruction")
                return;
            var ns2 = new global.Namespace(ns);
            this._name = new global.QName(ns2, this.name());
            if (this._nodeKind == "attribute") {
                this._name.isAttribute = true;
                if (this._parent == null)
                    return;
                this._parent.addNamespace(ns2);
            }
            if (this._nodeKind == "element")
                this.addNamespace(ns2);
        };
        XML.prototype.setNodeKind = function (value) {
            this._nodeKind = value;
        };
        XML.prototype.setParent = function (parent) {
            if (parent == this._parent)
                return;
            var oldParent = this._parent;
            this._parent = parent;
            if (oldParent)
                oldParent.removeChild(this);
        };
        XML.prototype.setValue = function (value) {
            this._value = value;
        };
        XML.prototype.text = function () {
            var list = new global.XMLList();
            var i = 0;
            for (i = 0; i < this._children.length; i++) {
                if (this._children[i].nodeKind() == "text")
                    list.appendChild(this._children[i]);
            }
            list.targetObject = this;
            return list;
        };
        XML.prototype.toString = function () {
            var i = 0;
            if (this._nodeKind == "text" || this._nodeKind == "attribute")
                return this._value;
            if (this._nodeKind == "comment")
                return "";
            if (this._nodeKind == "processing-instruction")
                return "";
            if (this.hasSimpleContent()) {
                var s = "";
                for (i = 0; i < this._children.length; i++) {
                    if (this._children[i].nodeKind() == "comment" || this._children[i].nodeKind() == "processing-instruction")
                        continue;
                    s = s + this._children[i].toString();
                }
                return s;
            }
            return this.toXMLString();
        };
        XML.prototype.toAttributeName = function (name) {
            var qname;
            if (!(name instanceof global.QName)) {
                name = name.toString();
                if (name.indexOf("@") > -1)
                    name = name.substring(name.indexOf("@"));
            }
            qname = this.toXMLName(name);
            qname.isAttribute = true;
            return qname;
        };
        XML.prototype.toXMLName = function (name) {
            var qname;
            if (name.toString().indexOf("@") > -1)
                return this.toAttributeName(name);
            if (parseInt(name, 10).toString() == name)
                throw new TypeError("invalid element name");
            if (!(name instanceof global.QName)) {
                name = name.toString();
                if (name.indexOf(":") >= 0) {
                    qname = new global.QName();
                    qname.prefix = name.substring(0, name.indexOf(":"));
                    qname.localName = name.substring(name.lastIndexOf(":") + 1);
                    qname.uri = this.getURI(qname.prefix);
                }
                else {
                    qname = new global.QName(name);
                    if (!qname.uri && XML.defaultNamespace) {
                        qname = new global.QName(XML.defaultNamespace);
                    }
                    qname.localName = name;
                }
            }
            else {
                qname = new global.QName(name);
            }
            return qname;
        };
        XML.prototype.toXMLString = function (indentLevel, ancestors) {
            if (indentLevel === void 0) { indentLevel = 0; }
            if (ancestors === void 0) { ancestors = null; }
            var i = 0;
            var ns;
            var strArr = [];
            indentLevel = isNaN(indentLevel) ? 0 : indentLevel;
            var indentArr = [];
            for (i = 0; i < indentLevel; i++)
                indentArr.push(XML._indentStr);
            var indent = indentArr.join("");
            if (this.nodeKind() == "text") {
                if (XML.prettyPrinting) {
                    var v = XML.trimXMLWhitespace(this._value);
                    return indent + XML.escapeElementValue(v);
                }
                return XML.escapeElementValue(this._value);
            }
            if (this.nodeKind() == "attribute")
                return indent + XML.escapeAttributeValue(this._value);
            if (this.nodeKind() == "comment")
                return indent + "<!--" + this._value + "-->";
            if (this.nodeKind() == "processing-instruction")
                return indent + "<?" + this.name().localName + " " + this._value + "?>";
            if (!ancestors)
                ancestors = [];
            var declarations = [];
            for (i = 0; i < this._namespaces.length; i++) {
                if (!XML.namespaceInArray(this._namespaces[i], ancestors))
                    declarations.push(new global.Namespace(this._namespaces[i]));
            }
            for (i = 0; i < this._attributes.length; i++) {
                ns = new global.Namespace(this._attributes[i].name().getNamespace(ancestors.concat(declarations)));
                if (ns.prefix === null) {
                    ns.prefix = "";
                    declarations.push(ns);
                }
            }
            ns = new global.Namespace(this.name().getNamespace(ancestors.concat(declarations)));
            if (ns.prefix === null) {
                ns.prefix = "";
                declarations.push(ns);
            }
            if (XML.prettyPrinting) {
                strArr.push(new Array(indentLevel).join(' '));
            }
            strArr.push("<");
            if (ns.prefix)
                strArr.push(ns.prefix + ":");
            strArr.push(this.name().localName);
            for (i = 0; i < declarations.length; i++) {
                var decVal = XML.escapeAttributeValue(declarations[i].uri);
                if (decVal) {
                    strArr.push(" xmlns");
                    if (declarations[i].prefix) {
                        strArr.push(":");
                        strArr.push(declarations[i].prefix);
                    }
                    strArr.push('="');
                    strArr.push(decVal);
                    strArr.push('"');
                }
            }
            for (i = 0; i < this._attributes.length; i++) {
                strArr.push(" ");
                var aName = this._attributes[i].name();
                var ans = aName.getNamespace(ancestors.concat(declarations));
                if (ans.prefix) {
                    strArr.push(ans.prefix);
                    strArr.push(":");
                }
                strArr.push(aName.localName);
                strArr.push('="');
                strArr.push(XML.escapeAttributeValue(this._attributes[i].getValue()));
                strArr.push('"');
            }
            if (this._children.length == 0) {
                strArr.push("/>");
                return strArr.join("");
            }
            strArr.push(">");
            var indentChildren = this._children.length > 1 || (this._children.length == 1 && this._children[0].nodeKind() != "text");
            var nextIndentLevel = 0;
            if (XML.prettyPrinting && indentChildren)
                nextIndentLevel = indentLevel + XML.prettyIndent;
            else
                nextIndentLevel = 0;
            for (i = 0; i < this._children.length; i++) {
                if (XML.prettyPrinting && indentChildren)
                    strArr.push("\n");
                strArr.push(this._children[i].toXMLString(nextIndentLevel, ancestors.concat(declarations)));
            }
            if (XML.prettyPrinting && indentChildren) {
                strArr.push("\n");
                strArr.push(new Array(indentLevel + 1).join(' '));
            }
            strArr.push("</");
            if (ns.prefix) {
                strArr.push(ns.prefix);
                strArr.push(":");
            }
            strArr.push(this.name().localName);
            strArr.push(">");
            return strArr.join("");
        };
        XML.prototype.valueOf = function () {
            return this;
        };
        XML.__index = function (target) {
            var list, child, localName, len = 0;
            list = target.elements('*', false);
            len = list.length();
            for (var i = 0; i < len; i++) {
                child = list[i];
                if (!child)
                    continue;
                XML.__index(child);
                localName = child.name().localName;
                XML.__mapElements(target, localName);
            }
            list = target.attributes(false);
            len = list.length();
            for (var i = 0; i < len; i++) {
                child = list[i];
                if (!child)
                    continue;
                localName = child.name().localName;
                XML.__mapAttribute(target, localName);
            }
            return target;
        };
        XML.__mapElements = function (target, propertyName) {
            if (Object.getOwnPropertyDescriptor(target, propertyName)) {
                return;
            }
            var __get = function () {
                return target.elements(propertyName);
            };
            var d = {
                "get": __get
            };
            Object.defineProperty(target, propertyName, d);
        };
        XML.__mapAttribute = function (target, attributeName) {
            var n = '$' + attributeName;
            if (Object.getOwnPropertyDescriptor(target, n)) {
                return;
            }
            var __get = function () {
                var result;
                var list = target.attribute(attributeName);
                var len = list.length();
                for (var i = 0; i < len; i++) {
                    var child = list[i];
                    if (!child)
                        continue;
                    result = result || '';
                    result += child.getValue();
                }
                return result;
            };
            var d = {
                "get": __get
            };
            Object.defineProperty(target, n, d);
        };
        XML.ignoreComments = true;
        XML.ignoreProcessingInstructions = true;
        XML.ignoreWhitespace = true;
        XML._prettyIndent = 2;
        XML._indentStr = "  ";
        XML.INDENT_CHAR = " ";
        XML.prettyPrinting = true;
        return XML;
    }());
    global.XML = XML;
})(global || (global = {}));
var global;
(function (global) {
    global.Dictionary = flash.utils.Dictionary;
    global.getQualifiedClassName = flash.utils.getQualifiedClassName;
    var EventStats = (function () {
        function EventStats() {
            throw new global.Error('Abstract class error');
        }
        EventStats.handle = function (cl, event) {
            var target = event && 'target' in event ? event.target : 'null';
            var type = event && 'type' in event ? event.type : 'null';
            if (!EventStats.map.get(cl)) {
                EventStats.map.set(cl, EventStats.cut(global.getQualifiedClassName(cl)));
            }
            EventStats.last = EventStats.map.get(cl) + ', target=' + target + ', type=' + type;
        };
        EventStats.toString = function () {
            return EventStats.last;
        };
        EventStats.cut = function (value) {
            value = value || '';
            var index = value.lastIndexOf(':');
            return index == -1 ? value : value.substr(index + 1);
        };
        EventStats.map = new global.Dictionary;
        return EventStats;
    }());
    global.EventStats = EventStats;
})(global || (global = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.MouseEvent = flash.events.MouseEvent;
        display.Matrix = flash.geom.Matrix;
        display.Rectangle = flash.geom.Rectangle;
        var Bitmap = (function (_super) {
            __extends(Bitmap, _super);
            function Bitmap(bitmapData, pixelSnapping, smoothing) {
                if (bitmapData === void 0) { bitmapData = null; }
                if (pixelSnapping === void 0) { pixelSnapping = "auto"; }
                if (smoothing === void 0) { smoothing = false; }
                var _this = _super.call(this) || this;
                _this._smoothing = false;
                _this._smoothing = smoothing;
                _this.ctorbmp(bitmapData, pixelSnapping, smoothing);
                return _this;
            }
            Bitmap.prototype.ctorbmp = function (bitmapData, pixelSnapping, smoothing) {
                this._bitmapData = bitmapData;
                this.__updateVertexData();
            };
            Object.defineProperty(Bitmap.prototype, "pixelSnapping", {
                get: function () { return null; },
                set: function (param1) {
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Bitmap.prototype, "smoothing", {
                get: function () {
                    return this._smoothing;
                },
                set: function (param1) {
                    this._smoothing = param1;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Bitmap.prototype, "bitmapData", {
                get: function () { return this._bitmapData; },
                set: function (value) {
                    if (this._bitmapData)
                        this._bitmapData.dirtyGraphics = null;
                    this._bitmapData = value;
                    this._bitmapData.dirtyGraphics = this.dirtyGraphics.bind(this);
                    this.__updateVertexData();
                    this.dirtyGraphics();
                },
                enumerable: true,
                configurable: true
            });
            Bitmap.prototype.getRect = function (targetSpace, resultRect) {
                if (resultRect === void 0) { resultRect = null; }
                return this.displayObjectGetRect(targetSpace, resultRect);
            };
            Bitmap.prototype.__getRect = function () {
                if (this.bitmapData)
                    return this.bitmapData.rect;
                return null;
            };
            Bitmap.prototype.__update = function (ctx) {
                if (this._bitmapData && this._bitmapData.image && this.visible) {
                    var m = this.transform.concatenatedMatrix;
                    if (this.mScrollRect)
                        this.__beginClipRect(ctx, m);
                    this.stage.renderer.renderImage(ctx, this._bitmapData, m, this.blendMode, this.transform.concatenatedColorTransform, this._smoothing);
                    if (this.mScrollRect)
                        this.__endClipRect(ctx);
                }
            };
            Bitmap.prototype.__doMouse = function (e) {
                if (this.visible) {
                    var obj = _super.prototype.__doMouse.call(this, e);
                    if (obj) {
                        return obj;
                    }
                    if (this.hitTestPoint(this.stage.mouseX, this.stage.mouseY)) {
                        return this;
                    }
                }
                return null;
            };
            return Bitmap;
        }(display.DisplayObject));
        display.Bitmap = Bitmap;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.GLCanvasRenderingContext2D = flash.__native.GLCanvasRenderingContext2D;
        display.ColorTransform = flash.geom.ColorTransform;
        var GraphicsSolidFill = (function (_super) {
            __extends(GraphicsSolidFill, _super);
            function GraphicsSolidFill(parent, color, alpha) {
                var _newTarget = this.constructor;
                if (color === void 0) { color = 0; }
                if (alpha === void 0) { alpha = 1.0; }
                var _this = _super.call(this) || this;
                _this.is_IGraphicsData = null;
                _this.is_IGraphicsFill = null;
                _this.color = 0;
                _this.alpha = 1.0;
                _this._glcolor = [];
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.parent = parent;
                _this.color = color;
                _this.alpha = alpha;
                _this.cssColor = "rgba(" + (color >> 16 & 0xff) + "," + (color >> 8 & 0xff) + "," + (color & 0xff) + "," + _this.alpha + ")";
                return _this;
            }
            GraphicsSolidFill.prototype.draw = function (ctx, colorTransform) {
                ctx.fillStyle = this.parent.stage.renderer.getCssColor(this.color, this.alpha, colorTransform, null);
            };
            GraphicsSolidFill.prototype.gldraw = function (ctx, colorTransform) {
                ctx.fillStyle = this.parent.stage.renderer.getCssColor(this.color, this.alpha, colorTransform, this._glcolor);
                ctx.fillStyleIsImage = false;
            };
            return GraphicsSolidFill;
        }(Object));
        display.GraphicsSolidFill = GraphicsSolidFill;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.GLCanvasRenderingContext2D = flash.__native.GLCanvasRenderingContext2D;
        display.ColorTransform = flash.geom.ColorTransform;
        var GraphicsTrianglePath = (function (_super) {
            __extends(GraphicsTrianglePath, _super);
            function GraphicsTrianglePath(vertices, indices, uvtData, culling) {
                var _newTarget = this.constructor;
                if (vertices === void 0) { vertices = null; }
                if (indices === void 0) { indices = null; }
                if (uvtData === void 0) { uvtData = null; }
                if (culling === void 0) { culling = "none"; }
                var _this = _super.call(this) || this;
                _this.is_IGraphicsData = null;
                _this.is_IGraphicsPath = null;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.vertices = vertices;
                _this.indices = indices;
                _this.uvtData = uvtData;
                _this._culling = culling;
                return _this;
            }
            Object.defineProperty(GraphicsTrianglePath.prototype, "culling", {
                get: function () {
                    return this._culling;
                },
                set: function (value) {
                    this._culling = value;
                },
                enumerable: true,
                configurable: true
            });
            GraphicsTrianglePath.prototype.draw = function (ctx, colorTransform) {
                trace("tripath");
            };
            GraphicsTrianglePath.prototype.gldraw = function (ctx, colorTransform) {
            };
            return GraphicsTrianglePath;
        }(Object));
        display.GraphicsTrianglePath = GraphicsTrianglePath;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var media;
    (function (media) {
        media.Error = global.Error;
        media.Event = flash.events.Event;
        media.EventDispatcher = flash.events.EventDispatcher;
        var SoundChannel = (function (_super) {
            __extends(SoundChannel, _super);
            function SoundChannel() {
                var _this = _super.call(this) || this;
                _this.offset = 0;
                _this.startedAt = 0;
                _this.transform = new media.SoundTransform;
                return _this;
            }
            SoundChannel.prototype.__init = function (source, transform, offset) {
                this.source = source;
                this.source.onended = this.onEnded.bind(this);
                var gainNode = media.Sound.ctx.createGain();
                source.connect(gainNode);
                gainNode.connect(media.Sound.ctx.destination);
                this.transform = transform || this.transform;
                this.transform.__init(gainNode);
                this.offset = offset;
                this.startedAt = media.Sound.ctx.currentTime;
            };
            Object.defineProperty(SoundChannel.prototype, "position", {
                get: function () {
                    if (this.startedAt)
                        return int(((media.Sound.ctx.currentTime - this.startedAt) + this.offset) * 1000);
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(SoundChannel.prototype, "soundTransform", {
                get: function () {
                    return this.transform;
                },
                set: function (v) {
                    if (!v) {
                        throw new media.Error('Parameter soundChannel must be non-null.', 2007);
                    }
                    this.transform.leftToLeft = v.leftToLeft;
                    this.transform.leftToRight = v.leftToRight;
                    this.transform.pan = v.pan;
                    this.transform.rightToLeft = v.rightToLeft;
                    this.transform.rightToRight = v.rightToRight;
                    this.transform.volume = v.volume;
                },
                enumerable: true,
                configurable: true
            });
            SoundChannel.prototype.stop = function () {
                if (this.source) {
                    this.source.onended = null;
                    this.source.disconnect();
                    this.source.stop(0);
                    this.source = null;
                    this.startedAt = 0;
                    this.transform.__init(null);
                }
                media.Sound.channels.splice(media.Sound.channels.indexOf(this), 1);
            };
            Object.defineProperty(SoundChannel.prototype, "leftPeak", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(SoundChannel.prototype, "rightPeak", {
                get: function () {
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            SoundChannel.prototype.onEnded = function () {
                this.dispatchEvent(new media.Event(media.Event.SOUND_COMPLETE));
            };
            return SoundChannel;
        }(media.EventDispatcher));
        media.SoundChannel = SoundChannel;
    })(media = flash.media || (flash.media = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        utils.Error = global.Error;
        utils.Matrix = flash.geom.Matrix;
        utils.Matrix3D = flash.geom.Matrix3D;
        utils.Point = flash.geom.Point;
        utils.Vector3D = flash.geom.Vector3D;
        var MatrixUtil = (function () {
            function MatrixUtil() {
                throw new utils.Error('Abstract class error');
            }
            MatrixUtil.convertTo3D = function (matrix, resultMatrix) {
                if (resultMatrix === void 0) { resultMatrix = null; }
                if (resultMatrix == null)
                    resultMatrix = new utils.Matrix3D();
                MatrixUtil.sRawData[0] = matrix.a;
                MatrixUtil.sRawData[1] = matrix.b;
                MatrixUtil.sRawData[4] = matrix.c;
                MatrixUtil.sRawData[5] = matrix.d;
                MatrixUtil.sRawData[12] = matrix.tx;
                MatrixUtil.sRawData[13] = matrix.ty;
                resultMatrix.copyRawDataFrom(MatrixUtil.sRawData);
                return resultMatrix;
            };
            MatrixUtil.transformPoint = function (matrix, point, resultPoint) {
                if (resultPoint === void 0) { resultPoint = null; }
                return MatrixUtil.transformCoords(matrix, point.x, point.y, resultPoint);
            };
            MatrixUtil.transformPoint3D = function (matrix, point, resultPoint) {
                if (resultPoint === void 0) { resultPoint = null; }
                return MatrixUtil.transformCoords3D(matrix, point.x, point.y, point.z, resultPoint);
            };
            MatrixUtil.transformCoords = function (matrix, x, y, resultPoint) {
                if (resultPoint === void 0) { resultPoint = null; }
                if (resultPoint == null)
                    resultPoint = new utils.Point();
                resultPoint.x = matrix.a * x + matrix.c * y + matrix.tx;
                resultPoint.y = matrix.d * y + matrix.b * x + matrix.ty;
                return resultPoint;
            };
            MatrixUtil.transformCoords3D = function (matrix, x, y, z, resultPoint) {
                if (resultPoint === void 0) { resultPoint = null; }
                if (resultPoint == null)
                    resultPoint = new utils.Vector3D();
                var data = matrix.rawData;
                resultPoint.x = x * data[0] + y * data[4] + z * data[8] + data[12];
                resultPoint.y = x * data[1] + y * data[5] + z * data[9] + data[13];
                resultPoint.z = x * data[2] + y * data[6] + z * data[10] + data[14];
                resultPoint.w = x * data[3] + y * data[7] + z * data[11] + data[15];
                return resultPoint;
            };
            MatrixUtil.skew = function (matrix, skewX, skewY) {
                var sinX = Math.sin(skewX);
                var cosX = Math.cos(skewX);
                var sinY = Math.sin(skewY);
                var cosY = Math.cos(skewY);
                matrix.setTo(matrix.a * cosY - matrix.b * sinX, matrix.a * sinY + matrix.b * cosX, matrix.c * cosY - matrix.d * sinX, matrix.c * sinY + matrix.d * cosX, matrix.tx * cosY - matrix.ty * sinX, matrix.tx * sinY + matrix.ty * cosX);
            };
            MatrixUtil.prependMatrix = function (base, prep) {
                base.setTo(base.a * prep.a + base.c * prep.b, base.b * prep.a + base.d * prep.b, base.a * prep.c + base.c * prep.d, base.b * prep.c + base.d * prep.d, base.tx + base.a * prep.tx + base.c * prep.ty, base.ty + base.b * prep.tx + base.d * prep.ty);
            };
            MatrixUtil.prependTranslation = function (matrix, tx, ty) {
                matrix.tx += matrix.a * tx + matrix.c * ty;
                matrix.ty += matrix.b * tx + matrix.d * ty;
            };
            MatrixUtil.prependScale = function (matrix, sx, sy) {
                matrix.setTo(matrix.a * sx, matrix.b * sx, matrix.c * sy, matrix.d * sy, matrix.tx, matrix.ty);
            };
            MatrixUtil.prependRotation = function (matrix, angle) {
                var sin = Math.sin(angle);
                var cos = Math.cos(angle);
                matrix.setTo(matrix.a * cos + matrix.c * sin, matrix.b * cos + matrix.d * sin, matrix.c * cos - matrix.a * sin, matrix.d * cos - matrix.b * sin, matrix.tx, matrix.ty);
            };
            MatrixUtil.prependSkew = function (matrix, skewX, skewY) {
                var sinX = Math.sin(skewX);
                var cosX = Math.cos(skewX);
                var sinY = Math.sin(skewY);
                var cosY = Math.cos(skewY);
                matrix.setTo(matrix.a * cosY + matrix.c * sinY, matrix.b * cosY + matrix.d * sinY, matrix.c * cosX - matrix.a * sinX, matrix.d * cosX - matrix.b * sinX, matrix.tx, matrix.ty);
            };
            MatrixUtil.sRawData = new Array(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
            return MatrixUtil;
        }());
        utils.MatrixUtil = MatrixUtil;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var utils;
    (function (utils) {
        utils.Error = global.Error;
        utils.EventDispatcher = flash.events.EventDispatcher;
        utils.TimerEvent = flash.events.TimerEvent;
        var Timer = (function (_super) {
            __extends(Timer, _super);
            function Timer(delay, repeatCount) {
                if (repeatCount === void 0) { repeatCount = 0; }
                var _this = _super.call(this) || this;
                _this.m_repeatCount = 0;
                _this.m_iteration = 0;
                _this.intervalID = 0;
                if (delay < 0 || !isFinite(delay)) {
                    utils.Error.throwError(RangeError, 2066);
                }
                _this.m_delay = delay;
                _this.m_repeatCount = repeatCount;
                return _this;
            }
            Object.defineProperty(Timer.prototype, "delay", {
                get: function () {
                    return this.m_delay;
                },
                set: function (value) {
                    if (value < 0 || !isFinite(value)) {
                        utils.Error.throwError(RangeError, 2066);
                    }
                    this.m_delay = value;
                    if (this.running) {
                        this.stop();
                        this.start();
                    }
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Timer.prototype, "repeatCount", {
                get: function () {
                    return this.m_repeatCount;
                },
                set: function (value) {
                    this.m_repeatCount = value;
                    if (this.running && this.m_repeatCount != 0 && this.m_iteration >= this.m_repeatCount) {
                        this.stop();
                    }
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Timer.prototype, "currentCount", {
                get: function () {
                    return this.m_iteration;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Timer.prototype, "running", {
                get: function () {
                    return this.intervalID > 0;
                },
                enumerable: true,
                configurable: true
            });
            Timer.prototype.tick = function () {
                this.m_iteration++;
                this._timerDispatch();
                if (this.m_repeatCount != 0 && this.m_iteration >= this.m_repeatCount) {
                    this.stop();
                    this.dispatchEvent(new utils.TimerEvent(utils.TimerEvent.TIMER_COMPLETE, false, false));
                }
            };
            Timer.prototype.start = function () {
                if (!this.running) {
                    this._start(this.m_delay, this.tick.bind(this));
                }
            };
            Timer.prototype.reset = function () {
                if (this.running) {
                    this.stop();
                }
                this.m_iteration = 0;
            };
            Timer.prototype._start = function (m_delay, m_tick) {
                this.intervalID = utils.setInterval(m_tick, m_delay);
            };
            Timer.prototype._timerDispatch = function () {
                this.dispatchEvent(new utils.TimerEvent(utils.TimerEvent.TIMER));
            };
            Timer.prototype.stop = function () {
                utils.clearInterval(this.intervalID);
                this.intervalID = 0;
            };
            return Timer;
        }(utils.EventDispatcher));
        utils.Timer = Timer;
    })(utils = flash.utils || (flash.utils = {}));
})(flash || (flash = {}));
var s3eUtils;
(function (s3eUtils) {
    s3eUtils.Bitmap = flash.display.Bitmap;
    s3eUtils.BitmapData = flash.display.BitmapData;
    s3eUtils.DisplayObject = flash.display.DisplayObject;
    s3eUtils.Stage = flash.display.Stage;
    s3eUtils.Event = flash.events.Event;
    var Blocker = (function () {
        function Blocker() {
        }
        Blocker.init = function (nativeStage) {
            if (!nativeStage)
                return;
            Blocker.mMap = new Array;
            Blocker.mStage = nativeStage;
            Blocker.mBg = new s3eUtils.Bitmap(new s3eUtils.BitmapData(1, 1, true, 0xff000000));
            Blocker.mBg.alpha = 0.5;
            Blocker.mBg.visible = false;
            Blocker.mStage.addChild(Blocker.mBg);
            Blocker.mStage.addEventListener(s3eUtils.Event.RESIZE, Blocker.resize.bind(this));
            Blocker.resize();
        };
        Blocker.show = function (caller) {
            if (!Blocker.mBg)
                return;
            var index = Blocker.mStage.getChildIndex(caller);
            if (index != -1) {
                if (index < 1)
                    index = 1;
                Blocker.mStage.setChildIndex(Blocker.mBg, index - 1);
                if (Blocker.mMap.indexOf(caller) == -1)
                    Blocker.mMap.push(caller);
                Blocker.check();
            }
        };
        Blocker.hide = function (caller) {
            if (!Blocker.mBg)
                return;
            var index = Blocker.mMap.indexOf(caller);
            if (index != -1)
                Blocker.mMap.splice(index, 1);
            Blocker.check();
        };
        Blocker.check = function () {
            if (!Blocker.mBg)
                return;
            var vis = false;
            for (var _i = 0, _a = Blocker.mMap; _i < _a.length; _i++) {
                var caller = _a[_i];
                vis = true;
                Blocker.mStage.setChildIndex(Blocker.mBg, Blocker.mStage.getChildIndex(caller) - 1);
            }
            Blocker.mBg.visible = vis;
        };
        Blocker.resize = function (event) {
            if (event === void 0) { event = null; }
            if (Blocker.mBg) {
                Blocker.mBg.width = Blocker.mStage.stageWidth;
                Blocker.mBg.height = Blocker.mStage.stageHeight;
            }
        };
        return Blocker;
    }());
    s3eUtils.Blocker = Blocker;
})(s3eUtils || (s3eUtils = {}));
var tools;
(function (tools) {
    tools.EventStats = global.EventStats;
    tools.Stage = flash.display.Stage;
    tools.StageDisplayState = flash.display.StageDisplayState;
    tools.MouseEvent = flash.events.MouseEvent;
    var MouseWheel = (function () {
        function MouseWheel() {
        }
        MouseWheel.setup = function (mainStage, callback) {
            MouseWheel.mStage = mainStage;
            MouseWheel.mStage.addEventListener(tools.MouseEvent.MOUSE_WHEEL, function (event) {
                tools.EventStats.handle(MouseWheel, event);
                if (!MouseWheel.mAllowBrowserScroll) {
                    event.preventDefault();
                }
                callback(event.delta);
            }.bind(this));
        };
        MouseWheel.mAllowBrowserScroll = false;
        return MouseWheel;
    }());
    tools.MouseWheel = MouseWheel;
})(tools || (tools = {}));
var tools;
(function (tools) {
    tools.Error = global.Error;
    tools.EventStats = global.EventStats;
    tools.Stage3D = flash.display.Stage3D;
    tools.Context3DRenderMode = flash.display3D.Context3DRenderMode;
    tools.ErrorEvent = flash.events.ErrorEvent;
    var ProfileSupport = (function () {
        function ProfileSupport() {
            throw new tools.Error("Abstract class error");
        }
        ProfileSupport.check = function (nativeStage, profile, callback) {
            ProfileSupport.supportsCallback = callback;
            ProfileSupport.checkingProfile = profile;
            if (nativeStage.stage3Ds.length > 0) {
                var stage3D = nativeStage.stage3Ds[0];
                stage3D.addEventListener(tools.Event.CONTEXT3D_CREATE, ProfileSupport.contextCreatedListener.bind(this), false, 10, true);
                stage3D.addEventListener(tools.ErrorEvent.ERROR, ProfileSupport.contextErroredListener.bind(this), false, 10, true);
                try {
                    if (stage3D.requestContext3D.length > 1)
                        stage3D["requestContext3D"]('transparent', profile);
                    else
                        stage3D["requestContext3D"]('transparent');
                }
                catch (e) {
                    stage3D.removeEventListener(tools.Event.CONTEXT3D_CREATE, ProfileSupport.contextCreatedListener.bind(this));
                    stage3D.removeEventListener(tools.ErrorEvent.ERROR, ProfileSupport.contextErroredListener.bind(this));
                    if (ProfileSupport.supportsCallback != null)
                        ProfileSupport.supportsCallback(ProfileSupport.checkingProfile, false);
                }
            }
            else {
                if (ProfileSupport.supportsCallback != null)
                    ProfileSupport.supportsCallback(ProfileSupport.checkingProfile, false);
            }
        };
        ProfileSupport.contextErroredListener = function (event) {
            tools.EventStats.handle(ProfileSupport, event);
            var targetStage3D = event.target;
            if (targetStage3D) {
                targetStage3D.removeEventListener(tools.Event.CONTEXT3D_CREATE, ProfileSupport.contextCreatedListener.bind(this));
                targetStage3D.removeEventListener(tools.ErrorEvent.ERROR, ProfileSupport.contextErroredListener.bind(this));
            }
            if (ProfileSupport.supportsCallback != null)
                ProfileSupport.supportsCallback(ProfileSupport.checkingProfile, false);
        };
        ProfileSupport.contextCreatedListener = function (event) {
            tools.EventStats.handle(ProfileSupport, event);
            var targetStage3D = event.target;
            if (targetStage3D) {
                targetStage3D.removeEventListener(tools.Event.CONTEXT3D_CREATE, ProfileSupport.contextCreatedListener.bind(this));
                targetStage3D.removeEventListener(tools.ErrorEvent.ERROR, ProfileSupport.contextErroredListener.bind(this));
                if (targetStage3D.context3D) {
                    var disposeContext3D = targetStage3D.context3D.dispose.bind(targetStage3D.context3D);
                    if (disposeContext3D.length == 1)
                        disposeContext3D(false);
                    else
                        disposeContext3D();
                    if (ProfileSupport.supportsCallback != null)
                        ProfileSupport.supportsCallback(ProfileSupport.checkingProfile, true);
                }
            }
        };
        return ProfileSupport;
    }());
    tools.ProfileSupport = ProfileSupport;
})(tools || (tools = {}));
var api;
(function (api) {
    var wizq;
    (function (wizq) {
        wizq.Error = global.Error;
        wizq.CONFIG = global.CONFIG;
        wizq.ExternalInterfaceAsync = global.ExternalInterfaceAsync;
        wizq.GLog = global.GLog;
        wizq.EventDispatcher = flash.events.EventDispatcher;
        wizq.ExternalInterface = flash.external.ExternalInterface;
        var WQJSBridge = (function () {
            function WQJSBridge() {
                throw new wizq.Error("Abstract class error");
            }
            WQJSBridge.addEventListener = function (type, listener) {
                if (!WQJSBridge.dispatcher)
                    WQJSBridge.dispatcher = new wizq.EventDispatcher;
                WQJSBridge.dispatcher.addEventListener(type, listener);
            };
            WQJSBridge.removeEventListener = function (type, listener) {
                if (!WQJSBridge.dispatcher)
                    WQJSBridge.dispatcher = new wizq.EventDispatcher;
                WQJSBridge.dispatcher.removeEventListener(type, listener);
            };
            WQJSBridge.hasEventListener = function (type) {
                if (!WQJSBridge.dispatcher)
                    WQJSBridge.dispatcher = new wizq.EventDispatcher;
                WQJSBridge.dispatcher.hasEventListener(type);
            };
            WQJSBridge.initialize = function (appId) {
                try {
                    if (wizq.ExternalInterface.available) {
                        WQJSBridge.script_js =
                            "function() {\n\t\t\t\t\t\t\tWQ = {\n\t\t\t\t\t\t\t logEnabled: true,\n\t\t\t\t\t\t\t logSupported: function () {return WQ.logEnabled && window.console && window.console.log;},\n\t\n\t\t\t\t\t\t\t setSWFObjectID: function(swfObjectID) {\n\t\t\t\t\t\t\t\t\tWQ.swfObjectID = swfObjectID;\n\t\t\t\t\t\t\t },\n\t\t\t\t\t\t\t jstoas3 : function (value) {\n\t\t\t\t\t\t\t\t\t return value.replace(/%/g, '%25')\n\t\t\t\t\t\t\t\t\t .replace(/\\\\/g, '%5c')\n\t\t\t\t\t\t\t\t\t .replace(/\"/g, '%22')\n\t\t\t\t\t\t\t\t\t .replace(/&/g, '%26');\n\t\t\t\t\t\t\t },\n\t\t\t\t\t\t\t pasreToFlash : function (results)\n\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\t\tif (results == undefined) return results;\n\t\t\t\t\t\t\t\t\treturn  WQ.jstoas3(JSON.stringify(results));\n\t\t\t\t\t\t\t },\n\t\t\t\t\t\t\t getSwf: function () {\n\t\t\t\t\t\t\t\t\treturn document.getElementById(WQ.swfObjectID);\n\t\t\t\t\t\t\t },\n\t\t\t\t\t\t\t clientCall: function ()\n\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tvar args = [];\n\t\t\t\t\t\t\t\tArray.prototype.push.apply( args, arguments );\n\t\t\t\t\t\t\t\tvar requestKey = args.shift(); \t\t\t\n\t\t\t\t\t\t\t\tvar method = args.shift();\n\t\t\t\t\t\t\t\tif(method == 'requestPayment'){\n\t\t\t\t\t\t\t\t\tvar handlePaymentURL = wizqConfig.handlePaymentURL;\n\t\t\t\t\t\t\t\t\targs.push(handlePaymentURL);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\targs.push(function (returnCode, returnMessage, data) {\n\t\t\t\t\t\t\t\t\ttrace(\"onCallback from wqapi\")\n\t\t\t\t\t\t\t\t\tWQ.getSwf().clientCallback(requestKey, returnCode, returnMessage, WQ.pasreToFlash(data));\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\twqapi[method].apply(wqapi,args);\n\t\t\t\t\t\t\t },\n\t\t\t\t\t\t\t makePost: function (requestKey,title,body,iconURL,URL)\n\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\tvar mediaList = new Array();\n\t\t\t\t\t\t\t\tmediaList.push(WizQAPI.Media.createPNGMedia(iconURL));\n\t\t\t\t\t\t\t\twqapi.postFeed(title,body,mediaList,WizQAPI.Feed.Priority.HIGH,URL,function(returnCode,returnMessage)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tWQ.getSwf().clientCallback(requestKey, returnCode, returnMessage,null);\t\t\t\t\t\n\t\t\t\t\t\t\t\t});\t\n\t\t\t\t\t\t\t }\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t }";
                        wizq.ExternalInterface.call(WQJSBridge.script_js);
                        wizq.ExternalInterface.call("WQ.setSWFObjectID", wizq.ExternalInterface.objectID);
                    }
                }
                catch (error) {
                    return;
                }
                WQJSBridge.apiHandlers = new Object;
                WQJSBridge.supported = true;
                wizq.ExternalInterface.addCallback("clientCallback", clientCallback.bind(this));
                function clientCallback(requestKey, returnCode, returnMessage, response) {
                    if (response === void 0) { response = null; }
                    if (returnMessage && returnMessage instanceof Array) {
                        returnMessage = returnMessage.join(" ;");
                    }
                    if (wizq.CONFIG.QA_VERSION) {
                        if (response)
                            wizq.GLog.print("[WIZQ] clientCallback params: " + JSON.stringify(WQJSBridge.convertWQResponse(response)));
                        if (returnMessage && returnMessage.toLocaleLowerCase() != 'ok')
                            wizq.GLog.print("[WIZQ] clientCallback error: " + returnMessage);
                    }
                    WQJSBridge.callApiHandler(requestKey, WQJSBridge.convertWQResponse(response), returnMessage);
                }
                WQJSBridge.wizqPlatform = wizq.ExternalInterface.call('function () { return wqPlatform; }');
                WQJSBridge.wizqGameID = wizq.ExternalInterface.call('function () { return wqAppId; }');
            };
            WQJSBridge.getCurrentUser = function (callback) {
                if (!WQJSBridge.supported)
                    return;
                wizq.ExternalInterfaceAsync("WQ.clientCall", WQJSBridge.addApiHandler(callback), "getSelfID");
            };
            WQJSBridge.getAllFriends = function (callback) {
                if (!WQJSBridge.supported)
                    return;
                wizq.ExternalInterfaceAsync("WQ.clientCall", WQJSBridge.addApiHandler(callback), "getFriendsID", false);
            };
            WQJSBridge.getAppFriends = function (callback) {
                if (!WQJSBridge.supported)
                    return;
                wizq.ExternalInterfaceAsync("WQ.clientCall", WQJSBridge.addApiHandler(callback), "getFriendsID", true);
            };
            WQJSBridge.getInfo = function (uids, callback) {
                var fields = ["hasApp", "nickname", "id", "thumbnailUrl", "profileUrl", "age", "dateOfBirth", "gender"];
                if (!WQJSBridge.supported)
                    return;
                if (!uids)
                    uids = [];
                if (uids.length > 100)
                    uids.length = 100;
                wizq.ExternalInterfaceAsync("WQ.clientCall", WQJSBridge.addApiHandler(callback), "getUsersProfile", uids, fields);
            };
            WQJSBridge.showInvite = function (callback) {
                if (!WQJSBridge.supported)
                    return;
                wizq.ExternalInterfaceAsync("WQ.clientCall", WQJSBridge.addApiHandler(callback), "inviteFriends");
            };
            WQJSBridge.makePost = function (title, body, iconURL, URL, callback) {
                if (!WQJSBridge.supported)
                    return;
                if (title.length > 21) {
                    title = title.substr(0, 17);
                    title += "..";
                }
                URL = '';
                switch (WQJSBridge.wizqPlatform) {
                    case 'mobage':
                        if (wizq.CONFIG.QA_VERSION) {
                            URL = 'http://sb.yahoo-mbga.jp/game/' + WQJSBridge.wizqGameID + '/play';
                        }
                        else {
                            URL = 'http://yahoo-mbga.jp/game/' + WQJSBridge.wizqGameID + '/play';
                        }
                        break;
                    default:
                        URL = "http://sb.yahoo-mbga.jp/game/12024523/play";
                        break;
                }
                wizq.ExternalInterfaceAsync("WQ.makePost", WQJSBridge.addApiHandler(callback), title, body, iconURL, URL);
            };
            WQJSBridge.saveData = function (tag, body, callback) {
                if (!WQJSBridge.supported)
                    return;
                wizq.ExternalInterfaceAsync("WQ.clientCall", WQJSBridge.addApiHandler(callback), "saveData", tag, body);
            };
            WQJSBridge.loadData = function (tag, callback) {
                if (!WQJSBridge.supported)
                    return;
                wizq.ExternalInterfaceAsync("WQ.clientCall", WQJSBridge.addApiHandler(callback), "loadData", tag);
            };
            WQJSBridge.submitScore = function (leaderboard, score, forceUpdate, callback) {
                if (!WQJSBridge.supported)
                    return;
                wizq.ExternalInterfaceAsync("WQ.clientCall", WQJSBridge.addApiHandler(callback), "submitScore", leaderboard, score, forceUpdate);
            };
            WQJSBridge.getUserRank = function (leaderboard, userID, callback) {
                if (!WQJSBridge.supported)
                    return;
                wizq.ExternalInterfaceAsync("WQ.clientCall", WQJSBridge.addApiHandler(callback), "getUserRank", leaderboard, userID);
            };
            WQJSBridge.getUserScore = function (leaderboard, userID, callback) {
                if (!WQJSBridge.supported)
                    return;
                wizq.ExternalInterfaceAsync("WQ.clientCall", WQJSBridge.addApiHandler(callback), "getUserTopScore", leaderboard, userID);
            };
            WQJSBridge.getScores = function (leaderboard, startingRank, count, callback) {
                if (!WQJSBridge.supported)
                    return;
                wizq.ExternalInterfaceAsync("WQ.clientCall", WQJSBridge.addApiHandler(callback), "getScores", leaderboard, startingRank, count);
            };
            WQJSBridge.showPayment = function (skuID, skuQuantity, skuUnitPrice, skuName, skuImageURL, callback) {
                if (!WQJSBridge.supported)
                    return;
                wizq.ExternalInterfaceAsync("WQ.clientCall", WQJSBridge.addApiHandler(callback), "requestPayment", skuID, skuQuantity, skuUnitPrice, skuName, skuImageURL);
            };
            WQJSBridge.addApiHandler = function (handler) {
                if (handler == null)
                    return -1;
                WQJSBridge.apiKey++;
                WQJSBridge.apiHandlers[WQJSBridge.apiKey] = handler;
                return WQJSBridge.apiKey;
            };
            WQJSBridge.callApiHandler = function (apiKey, data, wqMessage) {
                var handler = WQJSBridge.apiHandlers[apiKey];
                wqMessage = wqMessage || '';
                wqMessage = wqMessage.toLowerCase();
                var error = wqMessage != 'ok' ? wqMessage : null;
                if (handler == null)
                    return;
                handler(data, error);
                delete WQJSBridge.apiHandlers[apiKey];
            };
            WQJSBridge.convertWQResponse = function (data) {
                if (typeof data == 'string' && data.length) {
                    try {
                        data = JSON.parse(WQJSBridge.jstoas3(data));
                    }
                    catch (e) { }
                }
                return data;
            };
            WQJSBridge.jstoas3 = function (value) {
                if (!value)
                    return null;
                return value.replace(/%22/g, "\"")
                    .replace(/%5c/g, "\\")
                    .replace(/%26/g, "&")
                    .replace(/%25/g, "%");
            };
            WQJSBridge.supported = false;
            WQJSBridge.apiKey = 0;
            return WQJSBridge;
        }());
        wizq.WQJSBridge = WQJSBridge;
    })(wizq = api.wizq || (api.wizq = {}));
})(api || (api = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.GLCanvasRenderingContext2D = flash.__native.GLCanvasRenderingContext2D;
        display.ColorTransform = flash.geom.ColorTransform;
        display.Matrix = flash.geom.Matrix;
        var GraphicsBitmapFill = (function (_super) {
            __extends(GraphicsBitmapFill, _super);
            function GraphicsBitmapFill(bitmapData, matrix, repeat, smooth) {
                var _newTarget = this.constructor;
                if (bitmapData === void 0) { bitmapData = null; }
                if (matrix === void 0) { matrix = null; }
                if (repeat === void 0) { repeat = true; }
                if (smooth === void 0) { smooth = false; }
                var _this = _super.call(this) || this;
                _this.is_IGraphicsData = null;
                _this.is_IGraphicsFill = null;
                _this.repeat = false;
                _this.smooth = false;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.bitmapData = bitmapData;
                _this.matrix = matrix;
                _this.repeat = repeat;
                _this.smooth = smooth;
                return _this;
            }
            GraphicsBitmapFill.prototype.draw = function (ctx, colorTransform) {
                if (this.pattern == null && this.bitmapData) {
                    this.pattern = ctx.createPattern(this.bitmapData.image, this.repeat ? "repeat" : "no-repeat");
                }
                ctx.fillStyle = this.pattern;
            };
            GraphicsBitmapFill.prototype.gldraw = function (ctx, colorTransform) {
                if (this.pattern == null && this.bitmapData) {
                    this.pattern = ctx.createPattern(this.bitmapData.image, this.repeat ? "repeat" : "no-repeat");
                }
                ctx.fillStyleIsImage = true;
                ctx.fillStyle = this.pattern;
            };
            return GraphicsBitmapFill;
        }(Object));
        display.GraphicsBitmapFill = GraphicsBitmapFill;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.GLCanvasRenderingContext2D = flash.__native.GLCanvasRenderingContext2D;
        display.ColorTransform = flash.geom.ColorTransform;
        display.Matrix = flash.geom.Matrix;
        var GraphicsEndFill = (function (_super) {
            __extends(GraphicsEndFill, _super);
            function GraphicsEndFill() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                _this.is_IGraphicsData = null;
                _this.is_IGraphicsFill = null;
                _this._worldMatrix = new display.Matrix;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                return _this;
            }
            GraphicsEndFill.prototype.draw = function (ctx, colorTransform) {
                if (this.fill) {
                    if (this.fill instanceof display.GraphicsBitmapFill) {
                        var bfill = this.fill;
                        if (bfill.matrix) {
                            var m = bfill.matrix;
                        }
                        ctx.globalAlpha = colorTransform.alphaMultiplier;
                    }
                    else {
                        ctx.globalAlpha = 1;
                    }
                    if (m) {
                        ctx.save();
                        ctx.transform(m.a, m.b, m.c, m.d, m.tx, m.ty);
                    }
                    ctx.fill();
                    if (m) {
                        ctx.restore();
                    }
                }
            };
            GraphicsEndFill.prototype.gldraw = function (ctx, colorTransform) {
                if (this.fill) {
                    var m = this.fill["matrix"];
                    if (m) {
                        this._worldMatrix.copyFrom(m);
                    }
                    else {
                        this._worldMatrix.identity();
                    }
                    var temp = ctx.matr;
                    ctx.transform2(this._worldMatrix);
                    ctx.fill();
                    ctx.matr = temp;
                }
            };
            return GraphicsEndFill;
        }(Object));
        display.GraphicsEndFill = GraphicsEndFill;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.GLCanvasRenderingContext2D = flash.__native.GLCanvasRenderingContext2D;
        display.ColorTransform = flash.geom.ColorTransform;
        display.Matrix = flash.geom.Matrix;
        var GraphicsGradientFill = (function (_super) {
            __extends(GraphicsGradientFill, _super);
            function GraphicsGradientFill(type, colors, alphas, ratios, matrix, spreadMethod, interpolationMethod, focalPointRatio) {
                var _newTarget = this.constructor;
                if (type === void 0) { type = "linear"; }
                if (colors === void 0) { colors = null; }
                if (alphas === void 0) { alphas = null; }
                if (ratios === void 0) { ratios = null; }
                if (matrix === void 0) { matrix = null; }
                if (spreadMethod === void 0) { spreadMethod = "pad"; }
                if (interpolationMethod === void 0) { interpolationMethod = "rgb"; }
                if (focalPointRatio === void 0) { focalPointRatio = 0.0; }
                var _this = _super.call(this) || this;
                _this.is_IGraphicsData = null;
                _this.is_IGraphicsFill = null;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this._type = type;
                _this.colors = colors;
                _this.alphas = alphas;
                _this.ratios = ratios;
                _this.matrix = matrix;
                _this._spreadMethod = spreadMethod;
                _this._interpolationMethod = interpolationMethod;
                _this.focalPointRatio = focalPointRatio;
                return _this;
            }
            Object.defineProperty(GraphicsGradientFill.prototype, "type", {
                get: function () {
                    return this._type;
                },
                set: function (value) {
                    this._type = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(GraphicsGradientFill.prototype, "spreadMethod", {
                get: function () {
                    return this._spreadMethod;
                },
                set: function (value) {
                    this._spreadMethod = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(GraphicsGradientFill.prototype, "interpolationMethod", {
                get: function () {
                    return this._interpolationMethod;
                },
                set: function (value) {
                    this._interpolationMethod = value;
                },
                enumerable: true,
                configurable: true
            });
            GraphicsGradientFill.prototype.draw = function (ctx, colorTransform) {
                if (this.gradient == null) {
                    if (this.type === display.GradientType.LINEAR) {
                        this.gradient = ctx.createLinearGradient(0, 0, 1, 1);
                    }
                    else {
                        this.gradient = ctx.createRadialGradient(0, 0, 1, 0, 0, 1);
                    }
                }
                ctx.fillStyle = this.gradient;
            };
            GraphicsGradientFill.prototype.gldraw = function (ctx, colorTransform) {
                if (this.gradient == null) {
                    if (this.type == display.GradientType.LINEAR) {
                        this.gradient = ctx.createLinearGradient(0, 0, 1, 1);
                    }
                    else {
                        this.gradient = ctx.createRadialGradient(0, 0, 1, 0, 0, 1);
                    }
                }
                ctx.fillStyle = this.gradient;
                ctx.fillStyleIsImage = false;
            };
            return GraphicsGradientFill;
        }(Object));
        display.GraphicsGradientFill = GraphicsGradientFill;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.Context3D = flash.display3D.Context3D;
        display.ErrorEvent = flash.events.ErrorEvent;
        display.Event = flash.events.Event;
        display.EventDispatcher = flash.events.EventDispatcher;
        display.Capabilities = flash.system.Capabilities;
        var Stage3D = (function (_super) {
            __extends(Stage3D, _super);
            function Stage3D(stage) {
                var _this = _super.call(this) || this;
                _this._visible = true;
                _this.id = 0;
                _this.stage = stage;
                _this.id = Stage3D.ID++;
                return _this;
            }
            Object.defineProperty(Stage3D.prototype, "context3D", {
                get: function () {
                    return this._context3D;
                },
                enumerable: true,
                configurable: true
            });
            Stage3D.prototype.requestContext3D = function (context3DRenderMode, profile) {
                if (context3DRenderMode === void 0) { context3DRenderMode = "auto"; }
                if (profile === void 0) { profile = "baseline"; }
                this._canvas = document.createElement('canvas');
                this._canvas.style.width = this._canvas.style.height = '100%';
                this._canvas.style.zIndex = this.id;
                this._canvas.style.position = 'absolute';
                this.stage.body.appendChild(this._canvas);
                var params = {
                    alpha: context3DRenderMode == "transparent",
                    antialias: false
                };
                if (params.alpha == false && display.Capabilities.browser == 'Safari') {
                    (params.alpha = true) && (this._canvas.style.background = 'black');
                }
                var gl;
                var glExperimental = false;
                try {
                    gl = this._canvas.getContext("webgl", params);
                }
                catch (x) {
                    gl = null;
                }
                if (gl === null) {
                    try {
                        gl = this._canvas.getContext("experimental-webgl", params);
                        glExperimental = true;
                    }
                    catch (x) {
                        gl = null;
                    }
                }
                if (!gl) {
                    this.dispatchEvent(new display.ErrorEvent(display.ErrorEvent.ERROR));
                    return;
                }
                this._context3D = new display.Context3D;
                this._context3D.stage = this.stage;
                this._context3D.canvas = this._canvas;
                this._context3D.gl = gl;
                this._context3D.experimental = glExperimental;
                this.dispatchEvent(new display.Event(display.Event.CONTEXT3D_CREATE));
            };
            Stage3D.prototype.requestContext3DMatchingProfiles = function (param1) {
                this.requestContext3D();
            };
            Object.defineProperty(Stage3D.prototype, "x", {
                get: function () { return 0; },
                set: function (param1) {
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage3D.prototype, "y", {
                get: function () { return 0; },
                set: function (param1) {
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage3D.prototype, "visible", {
                get: function () { return this._visible; },
                set: function (value) {
                    this._visible = value;
                    this._canvas.style.visibility = this._visible ? 'visible' : 'hidden';
                },
                enumerable: true,
                configurable: true
            });
            Stage3D.ID = 0;
            return Stage3D;
        }(display.EventDispatcher));
        display.Stage3D = Stage3D;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var net;
    (function (net) {
        net.Event = flash.events.Event;
        net.EventDispatcher = flash.events.EventDispatcher;
        net.clearTimeout = flash.utils.clearTimeout;
        net.setTimeout = flash.utils.setTimeout;
        var FileReferenceList = (function (_super) {
            __extends(FileReferenceList, _super);
            function FileReferenceList() {
                return _super.call(this) || this;
            }
            Object.defineProperty(FileReferenceList.prototype, "fileList", {
                get: function () {
                    return this._files;
                },
                enumerable: true,
                configurable: true
            });
            FileReferenceList.prototype.browse = function (typeFilter) {
                if (typeFilter === void 0) { typeFilter = null; }
                var accept;
                for (var _i = 0, typeFilter_1 = typeFilter; _i < typeFilter_1.length; _i++) {
                    var f = typeFilter_1[_i];
                    accept = accept || [];
                    var ext = f.extension;
                    if (!ext)
                        continue;
                    ext = ext.substr(ext.lastIndexOf('.'));
                    if (!ext.length)
                        continue;
                    accept.push(ext);
                }
                this._input = document.createElement('input');
                this._input.setAttribute('type', 'file');
                this._input.setAttribute('multiple', 'true');
                if (accept) {
                    this._input.setAttribute('accept', accept.join(','));
                }
                var timeout = 0;
                this._input.addEventListener('change', function (e) {
                    net.clearTimeout(timeout);
                    this._input = null;
                    this._files = [];
                    var files = e.target.files;
                    for (var i = 0, f; f = files[i]; i++) {
                        this._files.push(new net.FileReference()._fromFile(f));
                        this.dispatchEvent(new net.Event(net.Event.SELECT));
                        return;
                    }
                    this.dispatchEvent(new net.Event(net.Event.CANCEL));
                }.bind(this));
                var onfocus = document.body.onfocus;
                document.body.onfocus = function (e) {
                    document.body.onfocus = onfocus;
                    if (onfocus != undefined)
                        onfocus(e);
                    timeout = net.setTimeout(function () {
                        this._input = null;
                        this.dispatchEvent(new net.Event(net.Event.CANCEL));
                    }.bind(this), 1000);
                }.bind(this);
                this._input.click();
                return true;
            };
            return FileReferenceList;
        }(net.EventDispatcher));
        net.FileReferenceList = FileReferenceList;
    })(net = flash.net || (flash.net = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var __native;
    (function (__native) {
        __native.BitmapData = flash.display.BitmapData;
        __native.Graphics = flash.display.Graphics;
        __native.GraphicsPath = flash.display.GraphicsPath;
        __native.ColorTransform = flash.geom.ColorTransform;
        __native.Matrix = flash.geom.Matrix;
        __native.TextFormat = flash.text.TextFormat;
        var IRenderer = (function () {
            function IRenderer() {
            }
            IRenderer.prototype.createPath = function () {
                return null;
            };
            IRenderer.prototype.getCssColor = function (color, alpha, ct, toarr) {
                return null;
            };
            IRenderer.prototype.renderGraphics = function (ctx, g, m, blendMode, colorTransform) {
            };
            IRenderer.prototype.renderImage = function (ctx, img, m, blendMode, colorTransform, smoothing) {
            };
            IRenderer.prototype.renderText = function (ctx, txt, textFormat, m, blendMode, colorTransform, x, y) {
            };
            IRenderer.prototype.finish = function (ctx) {
            };
            IRenderer.prototype.start = function (ctx) {
            };
            return IRenderer;
        }());
        __native.IRenderer = IRenderer;
    })(__native = flash.__native || (flash.__native = {}));
})(flash || (flash = {}));
var global;
(function (global) {
    global.DisplayObject = flash.display.DisplayObject;
    global.ByteArray = flash.utils.ByteArray;
    global.Parse = s3eUtils.Parse;
})(global || (global = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.EventDispatcher = flash.events.EventDispatcher;
        display.UncaughtErrorEvents = flash.events.UncaughtErrorEvents;
        display.URLVariables = flash.net.URLVariables;
        display.ApplicationDomain = flash.system.ApplicationDomain;
        display.ByteArray = flash.utils.ByteArray;
        var LoaderInfo = (function (_super) {
            __extends(LoaderInfo, _super);
            function LoaderInfo() {
                return _super.call(this) || this;
            }
            LoaderInfo.getLoaderInfoByDefinition = function (param1) { return null; };
            Object.defineProperty(LoaderInfo.prototype, "loaderURL", {
                get: function () { return this.url; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "url", {
                get: function () { return window.location.href; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "isURLInaccessible", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "bytesLoaded", {
                get: function () { return 0; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "bytesTotal", {
                get: function () { return 0; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "swfVersion", {
                get: function () { return 0; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "actionScriptVersion", {
                get: function () { return 3; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "frameRate", {
                get: function () { return 60; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "parameters", {
                get: function () {
                    var rtn = {};
                    if (!this._variables) {
                        this._variables = new display.URLVariables(window.location.search.substr(1));
                    }
                    for (var k in this._variables) {
                        rtn[k] = this._variables[k];
                    }
                    return rtn;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "width", {
                get: function () { return 0; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "height", {
                get: function () { return 0; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "contentType", {
                get: function () { return null; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "sharedEvents", {
                get: function () { return null; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "parentSandboxBridge", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "childSandboxBridge", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "sameDomain", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "childAllowsParent", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "parentAllowsChild", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "loader", {
                get: function () { return this._loader; },
                set: function (value) { this._loader = value; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "content", {
                get: function () { return this._content; },
                set: function (bmp) { this._content = bmp; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "bytes", {
                get: function () { return null; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "applicationDomain", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "uncaughtErrorEvents", {
                get: function () {
                    LoaderInfo._uncaughtErrorEvents = LoaderInfo._uncaughtErrorEvents || new display.UncaughtErrorEvents;
                    return LoaderInfo._uncaughtErrorEvents;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LoaderInfo.prototype, "variables", {
                get: function () { return this._variables; },
                set: function (value) { this._variables = value; },
                enumerable: true,
                configurable: true
            });
            return LoaderInfo;
        }(display.EventDispatcher));
        display.LoaderInfo = LoaderInfo;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var geom;
    (function (geom) {
        geom.DisplayObject = flash.display.DisplayObject;
        var Transform = (function () {
            function Transform(displayObject) {
                this.colorDirty = true;
                this.dirty = true;
                this.invDirty = true;
                this._matrix = new geom.Matrix;
                this._colorTransform = new geom.ColorTransform;
                this._concatenatedColorTransform = new geom.ColorTransform;
                this._invMatrix = new geom.Matrix;
                this._concatenatedMatrix = new geom.Matrix;
                this.ctor(displayObject);
            }
            Object.defineProperty(Transform.prototype, "matrix", {
                get: function () {
                    return this._matrix;
                },
                set: function (v) {
                    this._matrix = v;
                    this.updateTransforms();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Transform.prototype, "colorTransform", {
                get: function () {
                    return this._colorTransform;
                },
                set: function (v) {
                    this._colorTransform = v;
                    this.updateColorTransforms();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Transform.prototype, "concatenatedMatrix", {
                get: function () {
                    if (this.dirty) {
                        this._concatenatedMatrix.copyFrom(this.matrix);
                        var scrollRect = this.displayObject.scrollRect;
                        if (scrollRect) {
                            this._concatenatedMatrix.translate(-scrollRect.x * this.displayObject.scaleX, -scrollRect.y * this.displayObject.scaleY);
                        }
                        if (this.displayObject.parent) {
                            this._concatenatedMatrix.concat(this.displayObject.parent.transform.concatenatedMatrix);
                        }
                        this.dirty = false;
                    }
                    return this._concatenatedMatrix;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Transform.prototype, "concatenatedColorTransform", {
                get: function () {
                    if (this.colorDirty) {
                        this._concatenatedColorTransform.alphaOffset = this._colorTransform.alphaOffset;
                        this._concatenatedColorTransform.alphaMultiplier = this._colorTransform.alphaMultiplier;
                        this._concatenatedColorTransform.redOffset = this._colorTransform.redOffset;
                        this._concatenatedColorTransform.redMultiplier = this._colorTransform.redMultiplier;
                        this._concatenatedColorTransform.greenOffset = this._colorTransform.greenOffset;
                        this._concatenatedColorTransform.greenMultiplier = this._colorTransform.greenMultiplier;
                        this._concatenatedColorTransform.blueOffset = this._colorTransform.blueOffset;
                        this._concatenatedColorTransform.blueMultiplier = this._colorTransform.blueMultiplier;
                        if (this.displayObject.parent) {
                            this._concatenatedColorTransform.concat(this.displayObject.parent.transform.concatenatedColorTransform);
                        }
                        this.colorDirty = false;
                    }
                    return this._concatenatedColorTransform;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Transform.prototype, "pixelBounds", {
                get: function () { return null; },
                enumerable: true,
                configurable: true
            });
            Transform.prototype.ctor = function (displayObject) {
                this.displayObject = displayObject;
            };
            Object.defineProperty(Transform.prototype, "matrix3D", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Transform.prototype.getRelativeMatrix3D = function (param1) { return null; };
            Object.defineProperty(Transform.prototype, "perspectiveProjection", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Transform.prototype, "invMatrix", {
                get: function () {
                    if (this.invDirty) {
                        this._invMatrix.copyFrom(this.concatenatedMatrix);
                        this._invMatrix.invert();
                        this.invDirty = false;
                    }
                    return this._invMatrix;
                },
                enumerable: true,
                configurable: true
            });
            Transform.prototype.updateTransforms = function () {
                this.dirty = true;
                this.invDirty = true;
            };
            Transform.prototype.updateColorTransforms = function () {
                this.colorDirty = true;
            };
            return Transform;
        }());
        geom.Transform = Transform;
    })(geom = flash.geom || (flash.geom = {}));
})(flash || (flash = {}));
var tools;
(function (tools) {
    tools.CONFIG = global.CONFIG;
    tools.BitmapData = flash.display.BitmapData;
    tools.Matrix = flash.geom.Matrix;
    tools.Mouse = flash.ui.Mouse;
    tools.MouseCursorData = flash.ui.MouseCursorData;
    var CursorData = (function () {
        function CursorData(id, pack, fid, rect, frameRate) {
            this.frameRate = 0;
            this.registered = false;
            this.id = id;
            this.packs = [pack];
            this.fids = [fid];
            this.rects = [rect];
            this.frameRate = frameRate;
        }
        CursorData.prototype.addFrame = function (pack, fid, rect) {
            this.packs[this.packs.length] = pack;
            this.fids[this.fids.length] = fid;
            this.rects[this.rects.length] = rect;
        };
        CursorData.prototype.register = function (fid, source) {
            if (!this.cursorData) {
                this.cursorData = new tools.MouseCursorData;
                this.cursorData.data = [];
                this.cursorData.frameRate = this.frameRate;
            }
            var len = this.fids.length;
            for (var i = 0; i < len; ++i) {
                if (this.fids[i] != fid) {
                    continue;
                }
                var r = this.rects[i];
                var w = r.width;
                var h = r.height;
                var bd;
                if (source instanceof tools.BitmapData) {
                    CursorData.sHelperMatrix.identity();
                    CursorData.sHelperMatrix.translate(-r.x, -r.y);
                    if (r.angle == 90) {
                        CursorData.sHelperMatrix.rotate(-r.angle * Math.PI / 180);
                        CursorData.sHelperMatrix.translate(0, h);
                    }
                    if (w > CursorData.MAX_CURSOR_SIZE || h > CursorData.MAX_CURSOR_SIZE) {
                        var scale = Math.min(CursorData.MAX_CURSOR_SIZE / w, CursorData.MAX_CURSOR_SIZE / h);
                        w = w * scale;
                        h = h * scale;
                        CursorData.sHelperMatrix.scale(scale, scale);
                    }
                    bd = new tools.BitmapData(w, h, true, 0x0);
                    bd.draw(source, CursorData.sHelperMatrix, null, null, null, true);
                }
                else {
                    bd = new tools.BitmapData(w, h, true, 0x0);
                    for (var x = 0; x < w; ++x) {
                        for (var y = 0; y < h; ++y) {
                            var pos = (y * w + x) * 4;
                            var color = source.get(pos + 3) << 24 | source.get(pos) << 16 | source.get(pos + 1) << 8 | source.get(pos + 2);
                            bd.setPixel32(x, y, color);
                        }
                    }
                }
                this.cursorData.data.push(bd);
            }
            if (this.registered)
                tools.Mouse.unregisterCursor(this.id);
            tools.Mouse.registerCursor(this.id, this.cursorData);
            this.registered = true;
            function clear(target, q) {
                if (q === void 0) { q = 1; }
                if (!target)
                    return;
                var w = target.width;
                var h = target.height;
                for (var i = 0; i < w; ++i) {
                    for (var j = 0; j < h; ++j) {
                        var argb = target.getPixel32(i, j);
                        var a = (argb >> 24) & 0xFF;
                        if (a <= q)
                            target.setPixel32(i, j, 0x0);
                    }
                }
            }
        };
        CursorData.MAX_CURSOR_SIZE = 32;
        CursorData.sHelperMatrix = new tools.Matrix;
        return CursorData;
    }());
    tools.CursorData = CursorData;
})(tools || (tools = {}));
var global;
(function (global) {
    global.URLVariablesGlobal = s3eUtils.URLVariablesGlobal;
    global.Capabilities = flash.system.Capabilities;
    var CONFIG = (function () {
        function CONFIG() {
            throw new global.Error("Abstract class error");
        }
        CONFIG.init = function () {
            CONFIG.sInited = true;
            CONFIG.sRev = global.safeCall("getRev");
            CONFIG.sStorage = global.safeCall("getStorage");
            CONFIG.sReferer = global.safeCall("getRef");
            CONFIG.sLogType = global.URLVariablesGlobal.get("log");
            if (CONFIG.sLogType != '1' && CONFIG.sLogType != 'true')
                CONFIG.sLogType = null;
            CONFIG.sLogLevel = global.URLVariablesGlobal.get("level");
            switch (CONFIG.sLogLevel) {
                case 'Verbose':
                case 'Info':
                case 'Warnings':
                case 'Errors':
                    break;
                default:
                    CONFIG.sLogLevel = null;
            }
            CONFIG.sDebugType = global.URLVariablesGlobal.get("debug");
            CONFIG.sIsQAVersion = CONFIG.sDebugType == "beta" || CONFIG.sDebugType == "alpha" || CONFIG.sDebugType == "gamma" || CONFIG.sDebugType == "delta";
            if (!CONFIG.sIsQAVersion)
                CONFIG.sDebugType = null;
            CONFIG.sBrowser = global.Capabilities.browser;
            global.GLog.print('[CONFIG] qa=' + CONFIG.sDebugType + ', log=' + CONFIG.sLogType + ', rev=' + CONFIG.sRev + ', storage=' + CONFIG.sStorage + ', ref=' + CONFIG.sReferer + ', browser=' + CONFIG.sBrowser);
        };
        Object.defineProperty(CONFIG, "QA_VERSION", {
            get: function () {
                if (!CONFIG.sInited) {
                    CONFIG.init();
                }
                return CONFIG.sIsQAVersion;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(CONFIG, "DEBUG", {
            get: function () {
                return CONFIG.sIsViewerDebug;
            },
            set: function (value) {
                global.GLog.print('[CONFIG] debug=' + value);
                CONFIG.sIsViewerDebug = value;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(CONFIG, "LOG", {
            get: function () {
                if (!CONFIG.sInited) {
                    CONFIG.init();
                }
                return CONFIG.sLogType != null;
            },
            set: function (value) {
                global.GLog.print('[CONFIG] log=' + value);
                CONFIG.sLogType = value.toString();
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(CONFIG, "LOG_LEVEL", {
            get: function () {
                if (!CONFIG.sInited) {
                    CONFIG.init();
                }
                return CONFIG.sLogLevel;
            },
            enumerable: true,
            configurable: true
        });
        CONFIG.getRev = function () {
            if (!CONFIG.sInited) {
                CONFIG.init();
            }
            if (CONFIG.sRev) {
                return CONFIG.sRev;
            }
            return "";
        };
        CONFIG.getStorage = function () {
            if (!CONFIG.sInited) {
                CONFIG.init();
            }
            if (CONFIG.sStorage) {
                return CONFIG.sStorage;
            }
            return "";
        };
        CONFIG.getReferer = function () {
            if (!CONFIG.sInited) {
                CONFIG.init();
            }
            if (CONFIG.sReferer && CONFIG.sReferer.length > 0 && CONFIG.sReferer != "false") {
                return "referer_" + CONFIG.sReferer;
            }
            return "referer_organic";
        };
        CONFIG.getBrowser = function () {
            if (!CONFIG.sInited) {
                CONFIG.init();
            }
            return CONFIG.sBrowser;
        };
        CONFIG.BROWSER_CHROME = 'chrome';
        CONFIG.BROWSER_EDGE = 'edge';
        CONFIG.BROWSER_SAFARI = 'safari';
        CONFIG.BROWSER_FIREFOX = 'firefox';
        CONFIG.BROWSER_OPERA = 'opera';
        CONFIG.BROWSER_IE = 'ie';
        CONFIG.sIsQAVersion = false;
        CONFIG.sIsViewerDebug = false;
        CONFIG.sIsPackage = false;
        CONFIG.sInited = false;
        return CONFIG;
    }());
    global.CONFIG = CONFIG;
})(global || (global = {}));
var deng;
(function (deng) {
    var fzip;
    (function (fzip) {
        fzip.Error = global.Error;
        fzip.ChecksumUtil = deng.utils.ChecksumUtil;
        fzip.ByteArray = flash.utils.ByteArray;
        fzip.Dictionary = flash.utils.Dictionary;
        fzip.Endian = flash.utils.Endian;
        var FZipFile = (function () {
            function FZipFile(filenameEncoding) {
                if (filenameEncoding === void 0) { filenameEncoding = "utf-8"; }
                this._versionHost = 0;
                this._versionNumber = "2.0";
                this._compressionMethod = 8;
                this._encrypted = false;
                this._implodeDictSize = -1;
                this._implodeShannonFanoTrees = -1;
                this._deflateSpeedOption = -1;
                this._hasDataDescriptor = false;
                this._hasCompressedPatchedData = false;
                this._adler32 = 0;
                this._hasAdler32 = false;
                this._sizeFilename = 0;
                this._sizeExtra = 0;
                this._filename = "";
                this._comment = "";
                this._crc32 = 0;
                this._sizeCompressed = 0;
                this._sizeUncompressed = 0;
                this.isCompressed = false;
                this.parseFunc = this.parseFileHead.bind(this);
                this._filenameEncoding = filenameEncoding;
                this._extraFields = new fzip.Dictionary();
                this._content = new fzip.ByteArray();
                this._content.endian = fzip.Endian.BIG_ENDIAN;
            }
            Object.defineProperty(FZipFile.prototype, "date", {
                get: function () {
                    return this._date;
                },
                set: function (value) {
                    this._date = (value != null) ? value : new Date();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(FZipFile.prototype, "filename", {
                get: function () {
                    return this._filename;
                },
                set: function (value) {
                    this._filename = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(FZipFile.prototype, "hasDataDescriptor", {
                get: function () {
                    return this._hasDataDescriptor;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(FZipFile.prototype, "content", {
                get: function () {
                    if (this.isCompressed) {
                        this.uncompress();
                    }
                    return this._content;
                },
                set: function (data) {
                    this.setContent(data);
                },
                enumerable: true,
                configurable: true
            });
            FZipFile.prototype.setContent = function (data, doCompress) {
                if (doCompress === void 0) { doCompress = true; }
                if (data != null && data.length > 0) {
                    data.position = 0;
                    data.readBytes(this._content, 0, data.length);
                    this._crc32 = fzip.ChecksumUtil.CRC32(this._content);
                    this._hasAdler32 = false;
                }
                else {
                    this._content.length = 0;
                    this._content.position = 0;
                    this.isCompressed = false;
                }
                if (doCompress) {
                    this.compress();
                }
                else {
                    this._sizeUncompressed = this._sizeCompressed = this._content.length;
                }
            };
            Object.defineProperty(FZipFile.prototype, "versionNumber", {
                get: function () {
                    return this._versionNumber;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(FZipFile.prototype, "sizeCompressed", {
                get: function () {
                    return this._sizeCompressed;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(FZipFile.prototype, "sizeUncompressed", {
                get: function () {
                    return this._sizeUncompressed;
                },
                enumerable: true,
                configurable: true
            });
            FZipFile.prototype.getContentAsString = function (recompress, charset) {
                if (recompress === void 0) { recompress = true; }
                if (charset === void 0) { charset = "utf-8"; }
                if (this.isCompressed) {
                    this.uncompress();
                }
                this._content.position = 0;
                var str;
                if (charset == "utf-8") {
                    str = this._content.readUTFBytes(this._content.bytesAvailable);
                }
                else {
                    str = this._content.readMultiByte(this._content.bytesAvailable, charset);
                }
                this._content.position = 0;
                if (recompress) {
                    this.compress();
                }
                return str;
            };
            FZipFile.prototype.setContentAsString = function (value, charset, doCompress) {
                if (charset === void 0) { charset = "utf-8"; }
                if (doCompress === void 0) { doCompress = true; }
                this._content.length = 0;
                this._content.position = 0;
                this.isCompressed = false;
                if (value != null && value.length > 0) {
                    if (charset == "utf-8") {
                        this._content.writeUTFBytes(value);
                    }
                    else {
                        this._content.writeMultiByte(value, charset);
                    }
                    this._crc32 = fzip.ChecksumUtil.CRC32(this._content);
                    this._hasAdler32 = false;
                }
                if (doCompress) {
                    this.compress();
                }
                else {
                    this._sizeUncompressed = this._sizeCompressed = this._content.length;
                }
            };
            FZipFile.prototype.serialize = function (stream, includeAdler32, centralDir, centralDirOffset) {
                if (centralDir === void 0) { centralDir = false; }
                if (centralDirOffset === void 0) { centralDirOffset = 0; }
                if (stream == null) {
                    return 0;
                }
                if (centralDir) {
                    stream.writeUnsignedInt(fzip.FZip.SIG_CENTRAL_FILE_HEADER);
                    stream.writeShort((this._versionHost << 8) | 0x14);
                }
                else {
                    stream.writeUnsignedInt(fzip.FZip.SIG_LOCAL_FILE_HEADER);
                }
                stream.writeShort((this._versionHost << 8) | 0x14);
                stream.writeShort((this._filenameEncoding == "utf-8") ? 0x0800 : 0);
                stream.writeShort(this.isCompressed ? FZipFile.COMPRESSION_DEFLATED : FZipFile.COMPRESSION_NONE);
                var d = (this._date != null) ? this._date : new Date();
                var msdosTime = uint(d.getSeconds()) | (uint(d.getMinutes()) << 5) | (uint(d.getHours()) << 11);
                var msdosDate = uint(d.getDate()) | (uint(d.getMonth() + 1) << 5) | (uint(d.getFullYear() - 1980) << 9);
                stream.writeShort(msdosTime);
                stream.writeShort(msdosDate);
                stream.writeUnsignedInt(this._crc32);
                stream.writeUnsignedInt(this._sizeCompressed);
                stream.writeUnsignedInt(this._sizeUncompressed);
                var ba = new fzip.ByteArray();
                ba.endian = fzip.Endian.LITTLE_ENDIAN;
                if (this._filenameEncoding == "utf-8") {
                    ba.writeUTFBytes(this._filename);
                }
                else {
                    ba.writeMultiByte(this._filename, this._filenameEncoding);
                }
                var filenameSize = ba.position;
                for (var _i = 0, _a = this._extraFields.keys; _i < _a.length; _i++) {
                    var headerId = _a[_i];
                    var extraBytes = this._extraFields.get(headerId);
                    if (extraBytes != null) {
                        ba.writeShort(uint(headerId));
                        ba.writeShort(uint(extraBytes.length));
                        ba.writeBytes(extraBytes);
                    }
                }
                if (includeAdler32) {
                    if (!this._hasAdler32) {
                        var compressed = this.isCompressed;
                        if (compressed) {
                            this.uncompress();
                        }
                        this._adler32 = fzip.ChecksumUtil.Adler32(this._content, 0, this._content.length);
                        this._hasAdler32 = true;
                        if (compressed) {
                            this.compress();
                        }
                    }
                    ba.writeShort(0xdada);
                    ba.writeShort(4);
                    ba.writeUnsignedInt(this._adler32);
                }
                var extrafieldsSize = ba.position - filenameSize;
                if (centralDir && this._comment.length > 0) {
                    if (this._filenameEncoding == "utf-8") {
                        ba.writeUTFBytes(this._comment);
                    }
                    else {
                        ba.writeMultiByte(this._comment, this._filenameEncoding);
                    }
                }
                var commentSize = ba.position - filenameSize - extrafieldsSize;
                stream.writeShort(filenameSize);
                stream.writeShort(extrafieldsSize);
                if (centralDir) {
                    stream.writeShort(commentSize);
                    stream.writeShort(0);
                    stream.writeShort(0);
                    stream.writeUnsignedInt(0);
                    stream.writeUnsignedInt(centralDirOffset);
                }
                if (filenameSize + extrafieldsSize + commentSize > 0) {
                    stream.writeBytes(ba, 0, 0);
                }
                var fileSize = 0;
                if (!centralDir && this._content.length > 0) {
                    if (this.isCompressed) {
                        if (FZipFile.HAS_UNCOMPRESS || FZipFile.HAS_INFLATE) {
                            fileSize = this._content.length;
                            stream.writeBytes(this._content, 0, fileSize);
                        }
                        else {
                            fileSize = this._content.length - 6;
                            stream.writeBytes(this._content, 2, fileSize);
                        }
                    }
                    else {
                        fileSize = this._content.length;
                        stream.writeBytes(this._content, 0, fileSize);
                    }
                }
                var size = 30 + filenameSize + extrafieldsSize + commentSize + fileSize;
                if (centralDir) {
                    size += 16;
                }
                return size;
            };
            FZipFile.prototype.parse = function (stream) {
                while (stream.bytesAvailable && this.parseFunc(stream)) { }
                return (unbind(this.parseFunc) === this.parseFileIdle);
            };
            FZipFile.prototype.parseFileIdle = function (stream) {
                return false;
            };
            FZipFile.prototype.parseFileHead = function (stream) {
                if (stream.bytesAvailable >= 30) {
                    this.parseHead(stream);
                    if (this._sizeFilename + this._sizeExtra > 0) {
                        this.parseFunc = this.parseFileHeadExt.bind(this);
                    }
                    else {
                        this.parseFunc = this.parseFileContent.bind(this);
                    }
                    return true;
                }
                return false;
            };
            FZipFile.prototype.parseFileHeadExt = function (stream) {
                if (stream.bytesAvailable >= this._sizeFilename + this._sizeExtra) {
                    this.parseHeadExt(stream);
                    this.parseFunc = this.parseFileContent.bind(this);
                    return true;
                }
                return false;
            };
            FZipFile.prototype.parseFileContent = function (stream) {
                var continueParsing = true;
                if (this._hasDataDescriptor) {
                    this.parseFunc = this.parseFileIdle.bind(this);
                    continueParsing = false;
                }
                else if (this._sizeCompressed == 0) {
                    this.parseFunc = this.parseFileIdle.bind(this);
                }
                else if (stream.bytesAvailable >= this._sizeCompressed) {
                    this.parseContent(stream);
                    this.parseFunc = this.parseFileIdle.bind(this);
                }
                else {
                    continueParsing = false;
                }
                return continueParsing;
            };
            FZipFile.prototype.parseHead = function (data) {
                var vSrc = data.readUnsignedShort();
                this._versionHost = vSrc >> 8;
                this._versionNumber = Math.floor((vSrc & 0xff) / 10) + "." + ((vSrc & 0xff) % 10);
                var flag = data.readUnsignedShort();
                this._compressionMethod = data.readUnsignedShort();
                this._encrypted = (flag & 0x01) !== 0;
                this._hasDataDescriptor = (flag & 0x08) !== 0;
                this._hasCompressedPatchedData = (flag & 0x20) !== 0;
                if ((flag & 800) !== 0) {
                    this._filenameEncoding = "utf-8";
                }
                if (this._compressionMethod === FZipFile.COMPRESSION_IMPLODED) {
                    this._implodeDictSize = (flag & 0x02) !== 0 ? 8192 : 4096;
                    this._implodeShannonFanoTrees = (flag & 0x04) !== 0 ? 3 : 2;
                }
                else if (this._compressionMethod === FZipFile.COMPRESSION_DEFLATED) {
                    this._deflateSpeedOption = (flag & 0x06) >> 1;
                }
                var msdosTime = data.readUnsignedShort();
                var msdosDate = data.readUnsignedShort();
                var sec = (msdosTime & 0x001f);
                var min = (msdosTime & 0x07e0) >> 5;
                var hour = (msdosTime & 0xf800) >> 11;
                var day = (msdosDate & 0x001f);
                var month = (msdosDate & 0x01e0) >> 5;
                var year = ((msdosDate & 0xfe00) >> 9) + 1980;
                this._date = new Date(year, month - 1, day, hour, min, sec, 0);
                this._crc32 = data.readUnsignedInt();
                this._sizeCompressed = data.readUnsignedInt();
                this._sizeUncompressed = data.readUnsignedInt();
                this._sizeFilename = data.readUnsignedShort();
                this._sizeExtra = data.readUnsignedShort();
            };
            FZipFile.prototype.parseHeadExt = function (data) {
                if (this._filenameEncoding == "utf-8") {
                    this._filename = data.readUTFBytes(this._sizeFilename);
                }
                else {
                    this._filename = data.readMultiByte(this._sizeFilename, this._filenameEncoding);
                }
                var bytesLeft = this._sizeExtra;
                while (bytesLeft > 4) {
                    var headerId = data.readUnsignedShort();
                    var dataSize = data.readUnsignedShort();
                    if (dataSize > bytesLeft) {
                        throw new fzip.Error("Parse error in file " + this._filename + ": Extra field data size too big.");
                    }
                    if (headerId === 0xdada && dataSize === 4) {
                        this._adler32 = data.readUnsignedInt();
                        this._hasAdler32 = true;
                    }
                    else if (dataSize > 0) {
                        var extraBytes = new fzip.ByteArray();
                        data.readBytes(extraBytes, 0, dataSize);
                        this._extraFields.set(headerId, extraBytes);
                    }
                    bytesLeft -= dataSize + 4;
                }
                if (bytesLeft > 0) {
                    data.readBytes(new fzip.ByteArray(), 0, bytesLeft);
                }
            };
            FZipFile.prototype.parseContent = function (data) {
                if (this._compressionMethod === FZipFile.COMPRESSION_DEFLATED && !this._encrypted) {
                    if (FZipFile.HAS_UNCOMPRESS || FZipFile.HAS_INFLATE) {
                        data.readBytes(this._content, 0, this._sizeCompressed);
                    }
                    else if (this._hasAdler32) {
                        this._content.writeByte(0x78);
                        var flg = (~this._deflateSpeedOption << 6) & 0xc0;
                        flg += 31 - (((0x78 << 8) | flg) % 31);
                        this._content.writeByte(flg);
                        data.readBytes(this._content, 2, this._sizeCompressed);
                        this._content.position = this._content.length;
                        this._content.writeUnsignedInt(this._adler32);
                    }
                    else {
                        throw new fzip.Error("Adler32 checksum not found.");
                    }
                    this.isCompressed = true;
                }
                else if (this._compressionMethod == FZipFile.COMPRESSION_NONE) {
                    data.readBytes(this._content, 0, this._sizeCompressed);
                    this.isCompressed = false;
                }
                else {
                    throw new fzip.Error("Compression method " + this._compressionMethod + " is not supported.");
                }
                this._content.position = 0;
            };
            FZipFile.prototype.compress = function () {
                if (!this.isCompressed) {
                    if (this._content.length > 0) {
                        this._content.position = 0;
                        this._sizeUncompressed = this._content.length;
                        if (FZipFile.HAS_INFLATE) {
                            this._content.deflate();
                            this._sizeCompressed = this._content.length;
                        }
                        else if (FZipFile.HAS_UNCOMPRESS) {
                            this._content.compress.apply(this._content, ["deflate"]);
                            this._sizeCompressed = this._content.length;
                        }
                        else {
                            this._content.compress();
                            this._sizeCompressed = this._content.length - 6;
                        }
                        this._content.position = 0;
                        this.isCompressed = true;
                    }
                    else {
                        this._sizeCompressed = 0;
                        this._sizeUncompressed = 0;
                    }
                }
            };
            FZipFile.prototype.uncompress = function () {
                if (this.isCompressed && this._content.length > 0) {
                    this._content.position = 0;
                    if (FZipFile.HAS_INFLATE) {
                        this._content.inflate();
                    }
                    else if (FZipFile.HAS_UNCOMPRESS) {
                        this._content.uncompress.apply(this._content, ["deflate"]);
                    }
                    else {
                        this._content.uncompress();
                    }
                    this._content.position = 0;
                    this.isCompressed = false;
                }
            };
            FZipFile.prototype.toString = function () {
                return "[FZipFile]"
                    + "\n  name:" + this._filename
                    + "\n  date:" + this._date
                    + "\n  sizeCompressed:" + this._sizeCompressed
                    + "\n  sizeUncompressed:" + this._sizeUncompressed
                    + "\n  versionHost:" + this._versionHost
                    + "\n  versionNumber:" + this._versionNumber
                    + "\n  compressionMethod:" + this._compressionMethod
                    + "\n  encrypted:" + this._encrypted
                    + "\n  hasDataDescriptor:" + this._hasDataDescriptor
                    + "\n  hasCompressedPatchedData:" + this._hasCompressedPatchedData
                    + "\n  filenameEncoding:" + this._filenameEncoding
                    + "\n  crc32:" + this._crc32.toString(16)
                    + "\n  adler32:" + this._adler32.toString(16);
            };
            FZipFile.COMPRESSION_NONE = 0;
            FZipFile.COMPRESSION_SHRUNK = 1;
            FZipFile.COMPRESSION_REDUCED_1 = 2;
            FZipFile.COMPRESSION_REDUCED_2 = 3;
            FZipFile.COMPRESSION_REDUCED_3 = 4;
            FZipFile.COMPRESSION_REDUCED_4 = 5;
            FZipFile.COMPRESSION_IMPLODED = 6;
            FZipFile.COMPRESSION_TOKENIZED = 7;
            FZipFile.COMPRESSION_DEFLATED = 8;
            FZipFile.COMPRESSION_DEFLATED_EXT = 9;
            FZipFile.COMPRESSION_IMPLODED_PKWARE = 10;
            FZipFile.HAS_UNCOMPRESS = true;
            FZipFile.HAS_INFLATE = true;
            return FZipFile;
        }());
        fzip.FZipFile = FZipFile;
    })(fzip = deng.fzip || (deng.fzip = {}));
})(deng || (deng = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.GLCanvasRenderingContext2D = flash.__native.GLCanvasRenderingContext2D;
        display.ColorTransform = flash.geom.ColorTransform;
        var GraphicsStroke = (function (_super) {
            __extends(GraphicsStroke, _super);
            function GraphicsStroke(parent, thickness, pixelHinting, scaleMode, caps, joints, miterLimit, fill) {
                var _newTarget = this.constructor;
                if (thickness === void 0) { thickness = NaN; }
                if (pixelHinting === void 0) { pixelHinting = false; }
                if (scaleMode === void 0) { scaleMode = "normal"; }
                if (caps === void 0) { caps = "none"; }
                if (joints === void 0) { joints = "round"; }
                if (miterLimit === void 0) { miterLimit = 3.0; }
                if (fill === void 0) { fill = null; }
                var _this = _super.call(this) || this;
                _this.is_IGraphicsData = null;
                _this.is_IGraphicsStroke = null;
                _this.pixelHinting = false;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                _this.parent = parent;
                _this.thickness = thickness;
                _this.pixelHinting = pixelHinting;
                _this._caps = caps;
                _this._joints = joints;
                _this.miterLimit = miterLimit;
                _this._scaleMode = scaleMode;
                _this.fill = fill;
                return _this;
            }
            Object.defineProperty(GraphicsStroke.prototype, "caps", {
                get: function () {
                    return this._caps;
                },
                set: function (value) {
                    this._caps = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(GraphicsStroke.prototype, "joints", {
                get: function () {
                    return this._joints;
                },
                set: function (value) {
                    this._joints = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(GraphicsStroke.prototype, "scaleMode", {
                get: function () {
                    return this._scaleMode;
                },
                set: function (value) {
                    this._scaleMode = value;
                },
                enumerable: true,
                configurable: true
            });
            GraphicsStroke.prototype.draw = function (ctx, colorTransform) {
                if (isNaN(this.thickness)) {
                    ctx.lineJoin = this._joints;
                    ctx.stroke();
                }
                else {
                    ctx.lineWidth = this.thickness;
                    if (this.fill instanceof display.GraphicsSolidFill) {
                        var sf = this.fill;
                        ctx.strokeStyle = this.parent.stage.renderer.getCssColor(sf.color, sf.alpha, colorTransform, null);
                    }
                }
            };
            GraphicsStroke.prototype.gldraw = function (ctx, colorTransform) {
                if (isNaN(this.thickness)) {
                    ctx.stroke();
                }
                else {
                    ctx.lineWidth = this.thickness;
                    if (this.fill instanceof display.GraphicsSolidFill) {
                        var sf = this.fill;
                        this.parent.stage.renderer.getCssColor(sf.color, sf.alpha, colorTransform, sf._glcolor);
                        ctx.strokeStyle = sf._glcolor.toString();
                    }
                }
            };
            return GraphicsStroke;
        }(Object));
        display.GraphicsStroke = GraphicsStroke;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var tools;
(function (tools) {
    tools.Error = global.Error;
    tools.BitmapData = flash.display.BitmapData;
    tools.Mouse = flash.ui.Mouse;
    tools.MouseCursor = flash.ui.MouseCursor;
    tools.Dictionary = flash.utils.Dictionary;
    tools.ByteArray = flash.utils.ByteArray;
    var CursorManager = (function () {
        function CursorManager() {
            throw new tools.Error("Abstract class error");
        }
        Object.defineProperty(CursorManager, "supported", {
            get: function () {
                return tools.Mouse.supportsCursor && tools.Mouse.supportsNativeCursor;
            },
            enumerable: true,
            configurable: true
        });
        CursorManager.declare = function (id, pack, fid, rect, frameRate) {
            if (frameRate === void 0) { frameRate = 1; }
            var cursor = CursorManager.sMap.get(id);
            if (!cursor) {
                cursor = new tools.CursorData(id, pack, fid, rect, frameRate);
                CursorManager.sList[CursorManager.sList.length] = cursor;
                CursorManager.sMap.set(id, cursor);
            }
            else
                cursor.addFrame(pack, fid, rect);
        };
        CursorManager.fromAtlas = function (fid, source) {
            for (var _i = 0, _a = CursorManager.sList; _i < _a.length; _i++) {
                var cursor = _a[_i];
                if (cursor.fids.indexOf(fid) != -1)
                    cursor.register(fid, source);
            }
        };
        CursorManager.fromByteArray = function (fid, source) {
            for (var _i = 0, _a = CursorManager.sList; _i < _a.length; _i++) {
                var cursor = _a[_i];
                if (cursor.fids.indexOf(fid) != -1)
                    cursor.register(fid, source);
            }
        };
        CursorManager.showDefault = function () {
            if (tools.Mouse.cursor == tools.MouseCursor.ARROW)
                return;
            if (tools.Mouse.cursor == tools.MouseCursor.AUTO)
                return;
            if (tools.Mouse.cursor == tools.MouseCursor.BUTTON)
                return;
            if (tools.Mouse.cursor == tools.MouseCursor.HAND)
                return;
            if (tools.Mouse.cursor == tools.MouseCursor.IBEAM)
                return;
            tools.Mouse.cursor = tools.MouseCursor.AUTO;
        };
        CursorManager.showCustom = function (id) {
            var cursor = CursorManager.sMap.get(id);
            if (!CursorManager.supported || !cursor) {
                return;
            }
            if (!cursor.registered) {
                return;
            }
            if (tools.Mouse.cursor == cursor.id) {
                return;
            }
            tools.Mouse.cursor = cursor.id;
        };
        CursorManager.sList = new Array;
        CursorManager.sMap = new tools.Dictionary;
        return CursorManager;
    }());
    tools.CursorManager = CursorManager;
})(tools || (tools = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        var core;
        (function (core) {
            core.Error = global.Error;
            core.ApiCallbackEvent = api.odnoklassniki.events.ApiCallbackEvent;
            core.ApiServerEvent = api.odnoklassniki.events.ApiServerEvent;
            core.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
            core.MD5 = com.adobe.crypto.MD5;
            core.StatusEvent = flash.events.StatusEvent;
            core.TimerEvent = flash.events.TimerEvent;
            core.LocalConnection = flash.net.LocalConnection;
            core.Timer = flash.utils.Timer;
            var OdnoklassnikiSession = (function () {
                function OdnoklassnikiSession(con) {
                    this._is_connected = false;
                    this._self_connected = false;
                    this._connection = new core.LocalConnection;
                    this._reconnect_timer = new core.Timer(200);
                    this._reconnect_timer.addEventListener(core.TimerEvent.TIMER, this.tryToConnect.bind(this));
                    this._connection.allowDomain("*");
                    this._connection.addEventListener(core.StatusEvent.STATUS, this.handleOutStatus.bind(this));
                    this._connection.client = this;
                    this._connection_name = con;
                    this.tryToConnect();
                }
                Object.defineProperty(OdnoklassnikiSession.prototype, "is_connected", {
                    get: function () {
                        return this._is_connected;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(OdnoklassnikiSession.prototype, "connectionName", {
                    get: function () {
                        return this._connection_name;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(OdnoklassnikiSession.prototype, "connection", {
                    get: function () {
                        return this._connection;
                    },
                    enumerable: true,
                    configurable: true
                });
                OdnoklassnikiSession.prototype.tryToConnect = function (event) {
                    if (event === void 0) { event = null; }
                    try {
                        if (!this._self_connected) {
                            this._connection.connect("_api_" + this._connection_name);
                            this._self_connected = true;
                        }
                    }
                    catch (e) {
                        var cc2 = new core.LocalConnection();
                        cc2.addEventListener(core.StatusEvent.STATUS, this.handleOutStatusConcurrent.bind(this), false, 0, true);
                        cc2.send("_api_" + this._connection_name, "closeConnection");
                        this._reconnect_timer.start();
                        return;
                    }
                    if (!this._is_connected) {
                        if (event) {
                            this._reconnect_timer.reset();
                            trace("Telling proxy to make reconnect...");
                            var cc = new core.LocalConnection();
                            cc.addEventListener(core.StatusEvent.STATUS, this.handleOutStatusReconnect.bind(this), false, 0, true);
                            cc.send("_proxy_" + this._connection_name, "makeReconnect");
                        }
                        else {
                            this._reconnect_timer.start();
                        }
                    }
                };
                OdnoklassnikiSession.prototype.handleOutStatus = function (event) {
                    if (event.level != core.StatusEvent.STATUS) {
                        core.Odnoklassniki.dispatchEvent(new core.ApiServerEvent(core.ApiServerEvent.CONNECTION_ERROR));
                    }
                };
                OdnoklassnikiSession.prototype.handleOutStatusReconnect = function (event) {
                    if (event.level != core.StatusEvent.STATUS) {
                        core.Odnoklassniki.dispatchEvent(new core.ApiServerEvent(core.ApiServerEvent.PROXY_NOT_RESPONDING));
                    }
                };
                OdnoklassnikiSession.prototype.handleOutStatusConcurrent = function (event) {
                    if (event.level != core.StatusEvent.STATUS) {
                        core.Odnoklassniki.dispatchEvent(new core.ApiServerEvent(core.ApiServerEvent.CONNECTION_ERROR));
                    }
                };
                OdnoklassnikiSession.prototype.establishConnection = function () {
                    this._reconnect_timer.reset();
                    if (!this._is_connected) {
                        this._is_connected = true;
                        core.Odnoklassniki.dispatchEvent(new core.ApiServerEvent(core.ApiServerEvent.CONNECTED));
                    }
                };
                OdnoklassnikiSession.prototype.apiCallBack = function (methodName, result, params) {
                    core.Odnoklassniki.dispatchEvent(new core.ApiCallbackEvent(core.ApiCallbackEvent.CALL_BACK, false, false, methodName, result, params));
                };
                OdnoklassnikiSession.prototype.closeConnection = function () {
                    this._connection.close();
                };
                OdnoklassnikiSession.prototype.getSignature = function (data, exception, format) {
                    if (exception === void 0) { exception = false; }
                    if (format === void 0) { format = "JSON"; }
                    data["format"] = format;
                    data["application_key"] = this.applicationKey;
                    if (data['uid'] == undefined || exception)
                        data["session_key"] = this.sessionKey;
                    var sig = '';
                    var keys = [], key;
                    for (key in data) {
                        keys.push(key);
                    }
                    keys.sort();
                    var i = 0, l = keys.length;
                    for (i; i < l; i++) {
                        sig += keys[i] + "=" + data[keys[i]];
                    }
                    sig += (data['uid'] != undefined && !exception) ? this.secretKey : this.sessionSecretKey;
                    data["sig"] = core.MD5.hash(sig).toLowerCase();
                    return data;
                };
                return OdnoklassnikiSession;
            }());
            core.OdnoklassnikiSession = OdnoklassnikiSession;
        })(core = odnoklassniki.core || (odnoklassniki.core = {}));
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var s3eUtils;
(function (s3eUtils) {
    s3eUtils.CONFIG = global.CONFIG;
    s3eUtils.GLog = global.GLog;
    s3eUtils.DisplayObject = flash.display.DisplayObject;
    s3eUtils.TimerEvent = flash.events.TimerEvent;
    s3eUtils.ExternalInterface = flash.external.ExternalInterface;
    s3eUtils.Timer = flash.utils.Timer;
    s3eUtils.setTimeout = flash.utils.setTimeout;
    var Online = (function () {
        function Online() {
        }
        Online.init = function (cl) {
            var viewUrl = s3eUtils.AppIcf.read(Online.ICF_FLASH, "loadingURL");
            var monitorInterval = s3eUtils.AppIcf.readInt(Online.ICF_FLASH, "checkOnlineInterval");
            if (s3eUtils.ExternalInterface.available && monitorInterval >= Online.MIN_INTERVAL && cl != null) {
                Online.artist = new cl;
                Online.monitorInterval = monitorInterval;
                Online.timer = new s3eUtils.Timer(monitorInterval);
                Online.timer.addEventListener(s3eUtils.TimerEvent.TIMER, Online.artist.check.bind(Online.artist));
            }
            else {
                if (!s3eUtils.ExternalInterface.available)
                    s3eUtils.GLog.print("Can't start online checker: !ExternalInterface.available");
                if (monitorInterval < Online.MIN_INTERVAL)
                    s3eUtils.GLog.print("Can't start online checker: monitorInterval < " + Online.MIN_INTERVAL);
                if (cl == null)
                    s3eUtils.GLog.print("Can't start online checker: cl == null");
            }
            if (viewUrl) {
                Online.viewUrl = viewUrl;
                Online.viewLoader = new s3eUtils.SnappedSWF;
                Online.viewLoader.load(viewUrl + s3eUtils.CONFIG.getRev(), 1);
            }
            else {
                s3eUtils.GLog.print("Can't load online display object: viewUrl == null");
            }
            return Online.viewLoader;
        };
        Online.start = function (checkActive, callback) {
            if (!Online.artist) {
                return;
            }
            if (callback != null) {
                Online.checkActive = checkActive;
                Online.callback = callback;
                Online.monitorActive = true;
                Online.artist.check();
            }
        };
        Online.stop = function () {
            if (!Online.artist) {
                return;
            }
            Online.monitorActive = false;
            if (Online.timer)
                Online.timer.stop();
        };
        Online.show = function () {
            if (Online.viewLoader) {
                var name;
                if (Online.viewLoader.progress > 0 && Online.viewLoader.progress < 100) {
                    name = 'download';
                }
                Online.viewLoader.show(name);
            }
        };
        Object.defineProperty(Online, "downloadPercent", {
            get: function () {
                return Online.viewLoader ? Online.viewLoader.progress : 0;
            },
            set: function (value) {
                if (Online.viewLoader) {
                    Online.viewLoader.progress = value;
                }
            },
            enumerable: true,
            configurable: true
        });
        Online.hide = function () {
            if (Online.viewLoader) {
                Online.viewLoader.hide();
            }
        };
        Online.isShowed = function () {
            if (Online.viewLoader) {
                return Online.viewLoader.isShowed;
            }
            return false;
        };
        Online.prototype.check = function (event) {
            if (event === void 0) { event = null; }
            if (Online.waitingResult) {
                Online.connected = false;
                Online.callback(Online.connected);
            }
            Online.waitingResult = true;
        };
        Online.prototype.next = function (result) {
            var params = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                params[_i - 1] = arguments[_i];
            }
            Online.connected = result;
            Online.callback(Online.connected);
            Online.waitingResult = false;
            if (Online.checkActive != null && !Online.checkActive()) {
                if (Online.timer)
                    Online.timer.stop();
                this.standby();
                return;
            }
            Online.timer.delay = Online.connected ? Online.monitorInterval : Online.MIN_INTERVAL;
            if (Online.monitorActive)
                Online.timer.start();
        };
        Online.prototype.standby = function () {
            s3eUtils.setTimeout(tryResume.bind(this), Online.MIN_INTERVAL);
            function tryResume() {
                if (!Online.checkActive()) {
                    this.standby();
                    return;
                }
                Online.timer.delay = Online.connected ? Online.monitorInterval : Online.MIN_INTERVAL;
                if (Online.monitorActive)
                    Online.timer.start();
            }
        };
        Online.ICF_FLASH = "platformflash";
        Online.MIN_INTERVAL = 5000;
        Online.connected = true;
        Online.monitorInterval = 0;
        Online.monitorActive = false;
        Online.waitingResult = false;
        return Online;
    }());
    s3eUtils.Online = Online;
})(s3eUtils || (s3eUtils = {}));
var flash;
(function (flash) {
    var net;
    (function (net) {
        net.Event = flash.events.Event;
        net.EventDispatcher = flash.events.EventDispatcher;
        net.HTTPStatusEvent = flash.events.HTTPStatusEvent;
        net.IOErrorEvent = flash.events.IOErrorEvent;
        net.ProgressEvent = flash.events.ProgressEvent;
        net.SecurityErrorEvent = flash.events.SecurityErrorEvent;
        net.ByteArray = flash.utils.ByteArray;
        var URLLoader = (function (_super) {
            __extends(URLLoader, _super);
            function URLLoader(request) {
                if (request === void 0) { request = null; }
                var _this = _super.call(this) || this;
                _this.dataFormat = "text";
                _this.bytesLoaded = 0;
                _this.bytesTotal = 0;
                _this.stream = new net.URLStream();
                _this.stream.addEventListener(net.Event.OPEN, _this.redirectEvent.bind(_this));
                _this.stream.addEventListener(net.IOErrorEvent.IO_ERROR, _this.redirectEventWithData.bind(_this));
                _this.stream.addEventListener(net.SecurityErrorEvent.SECURITY_ERROR, _this.redirectEventWithData.bind(_this));
                _this.stream.addEventListener(net.HTTPStatusEvent.HTTP_STATUS, _this.redirectEvent.bind(_this));
                _this.stream.addEventListener(net.ProgressEvent.PROGRESS, _this.onProgress.bind(_this));
                _this.stream.addEventListener(net.Event.COMPLETE, _this.redirectEventWithData.bind(_this));
                if (request != null) {
                    _this.load(request);
                }
                return _this;
            }
            URLLoader.prototype.load = function (request) {
                this.stream.load(request);
            };
            URLLoader.prototype.close = function () {
                this.stream.close();
            };
            URLLoader.prototype.redirectEvent = function (event) {
                event.target = this;
                this.dispatchEvent(event);
            };
            URLLoader.prototype.redirectEventWithData = function (event) {
                event.target = this;
                var bytes = this.stream['_data'];
                switch (this.dataFormat) {
                    case net.URLLoaderDataFormat.TEXT:
                        this.data = bytes.toString();
                        break;
                    case net.URLLoaderDataFormat.VARIABLES:
                        if (bytes.length > 0) {
                            this.data = new net.URLVariables(bytes.toString());
                        }
                        break;
                    default:
                        this.data = bytes;
                }
                this.dispatchEvent(event);
            };
            URLLoader.prototype.onProgress = function (event) {
                event.target = this;
                this.bytesLoaded = event.bytesLoaded;
                this.bytesTotal = event.bytesTotal;
                this.dispatchEvent(event);
            };
            return URLLoader;
        }(net.EventDispatcher));
        net.URLLoader = URLLoader;
    })(net = flash.net || (flash.net = {}));
})(flash || (flash = {}));
var tools;
(function (tools) {
    tools.Error = global.Error;
    tools.GLog = global.GLog;
    tools.Event = flash.events.Event;
    tools.IOErrorEvent = flash.events.IOErrorEvent;
    tools.URLLoader = flash.net.URLLoader;
    tools.URLRequest = flash.net.URLRequest;
    tools.clearTimeout = flash.utils.clearTimeout;
    tools.setTimeout = flash.utils.setTimeout;
    tools.Parse = s3eUtils.Parse;
    var ExtendedURLLoader = (function (_super) {
        __extends(ExtendedURLLoader, _super);
        function ExtendedURLLoader(id, timeout, callbackKey) {
            var _this = _super.call(this) || this;
            _this.mLoaderId = 0;
            _this.mTimeout = 0;
            _this.mCallBackKey = 0;
            _this.mTimeoutInterval = 0;
            _this.closed = false;
            _this.mLoaderId = id;
            _this.mTimeout = Math.max(timeout, 5) * 1000;
            _this.mCallBackKey = callbackKey;
            return _this;
        }
        ExtendedURLLoader.prototype.getCallbackKey = function () {
            return this.mCallBackKey;
        };
        ExtendedURLLoader.prototype.getRequestId = function () {
            return this.mLoaderId;
        };
        ExtendedURLLoader.prototype.setParams = function (params) {
            this.mParams = params;
        };
        ExtendedURLLoader.prototype.getParams = function () {
            return this.mParams;
        };
        ExtendedURLLoader.prototype.load = function (request) {
            this.mTimeoutInterval = tools.setTimeout(this.dispatchError.bind(this), this.mTimeout);
            var isCloudURL = tools.Parse.isCloudURL(request.url);
            if (isCloudURL) {
                request.contentType = 'application/json';
            }
            try {
                this.closed = false;
                _super.prototype.load.call(this, request);
            }
            catch (error) {
                this.dispatchError();
            }
        };
        ExtendedURLLoader.prototype.removeEventListener = function (type, listener, useCapture) {
            if (useCapture === void 0) { useCapture = false; }
            _super.prototype.removeEventListener.call(this, type, listener, useCapture);
            if (type == tools.Event.COMPLETE)
                this.close();
        };
        ExtendedURLLoader.prototype.dispatchError = function () {
            if (this.closed) {
                return;
            }
            tools.GLog.print("[ExtendedURLLoader] timeout error");
            this.dispatchEvent(new tools.IOErrorEvent(tools.IOErrorEvent.IO_ERROR));
            try {
                this.close();
            }
            catch (error) {
            }
        };
        ExtendedURLLoader.prototype.dispatchEvent = function (event) {
            if (this.closed)
                return false;
            return _super.prototype.dispatchEvent.call(this, event);
        };
        ExtendedURLLoader.prototype.close = function () {
            tools.clearTimeout(this.mTimeoutInterval);
            this.closed = true;
            _super.prototype.close.call(this);
        };
        return ExtendedURLLoader;
    }(tools.URLLoader));
    tools.ExtendedURLLoader = ExtendedURLLoader;
})(tools || (tools = {}));
var api;
(function (api) {
    var ru;
    (function (ru) {
        ru.Error = global.Error;
        ru.CONFIG = global.CONFIG;
        ru.ExternalInterfaceAsync = global.ExternalInterfaceAsync;
        ru.GLog = global.GLog;
        ru.RUCallbackEvent = api.ru.events.RUCallbackEvent;
        ru.RUServerEvent = api.ru.events.RUServerEvent;
        ru.EventDispatcher = flash.events.EventDispatcher;
        ru.ExternalInterface = flash.external.ExternalInterface;
        var RUJSBridge = (function () {
            function RUJSBridge() {
                throw new ru.Error("Abstract class error");
            }
            RUJSBridge.addEventListener = function (type, listener) {
                if (!RUJSBridge.dispatcher)
                    RUJSBridge.dispatcher = new ru.EventDispatcher;
                RUJSBridge.dispatcher.addEventListener(type, listener);
            };
            RUJSBridge.removeEventListener = function (type, listener) {
                if (!RUJSBridge.dispatcher)
                    RUJSBridge.dispatcher = new ru.EventDispatcher;
                RUJSBridge.dispatcher.removeEventListener(type, listener);
            };
            RUJSBridge.hasEventListener = function (type) {
                if (!RUJSBridge.dispatcher)
                    RUJSBridge.dispatcher = new ru.EventDispatcher;
                RUJSBridge.dispatcher.hasEventListener(type);
            };
            RUJSBridge.initialize = function (appId) {
                try {
                    if (ru.ExternalInterface.available) {
                        RUJSBridge.script_js =
                            "function() {\n\t\t\t\t\t\t\tRUAS = {\n\t\t\t\t\t\t\t\tlogEnabled: true,\n\t\t\t\t\t\t\t\tappID: \"\",\n\t\t\t\t\t\t\t\tlogSupported: function () {return RUAS.logEnabled && window.console && window.console.log;},\n\t\t\t\t\t\t\t\tinviteCallbackId:0,\n\t\t\t\t\t\t\t\trequestCallbackId:0,\n\t\t\t\t\t\t\t\tpostCallbackId:0,\n\t\t\t\t\t\t\t\tlikeCallbackId:0,\n\t\t\t\t\t\t\t\tsetSWFObjectID: function(swfObjectID) {\t\t\t       \n\t\t\t\t\t\t\t\t\tRUAS.swfObjectID = swfObjectID;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tgetSwf: function () {\n\t\t\t\t\t\t\t\t\treturn document.getElementById(RUAS.swfObjectID);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tinit: function (appID,logEnabled)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t// Log enable\n\t\t\t\t\t\t\t\t\tRUAS.logEnabled = logEnabled;\n\t\t\t\t\t\t\t\t\tRUAS.appID = appID;\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (RUAS.logSupported()) trace('[RUAS] init call');\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tmailru.loader.require('api',RUAS.initSuccess);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tinitSuccess: function ()\n\t\t\t\t\t\t\t\t{\t\t          \n\t\t\t\t\t\t\t\t\tmailru.app.init(RUAS.appID);\t\n\t\t\t\t\n\t\t\t\t\t\t\t\t\tmailru.events.listen(mailru.app.events.like, function(event) {\n\t\t\t\t\t\t\t\t\t\t\t//alert(event.data); // \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C liked, unliked\n\t\t\t\t\t\t\t\t\t\t\tRUAS.getSwf().likePressed(event);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\n\t\t\t\t\t\t\t\t\tmailru.events.listen(mailru.app.events.friendsInvitation, function(event) {\n\t\t\t\t\t\t\t\t\t\t\t// \u044D\u0442\u0430 \u0444\u0443\u043D\u043A\u0446\u0438\u044F \u0431\u0443\u0434\u0435\u0442 \u0432\u044B\u0437\u044B\u0432\u0430\u0442\u044C\u0441\u044F \u043F\u0440\u0438 \u0437\u0430\u043A\u0440\u044B\u0442\u0438\u0438 \u0434\u0438\u0430\u043B\u043E\u0433\u0430\t\t\t             \n\t\t\t\t\t\t\t\t\t\t\tif(event.status == 'opened') {\n\t\t\t\t\t\t\t\t\t\t\t\t return;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tRUAS.getSwf().apiCallback(RUAS.inviteCallbackId, {response:event,id:event.data});\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\n\t\t\t\t\t\t\t\t\tmailru.events.listen(mailru.app.events.friendsRequest, function(event) {\n\t\t\t\t\t\t\t\t\t\t\t// \u044D\u0442\u0430 \u0444\u0443\u043D\u043A\u0446\u0438\u044F \u0431\u0443\u0434\u0435\u0442 \u0432\u044B\u0437\u044B\u0432\u0430\u0442\u044C\u0441\u044F \u043F\u0440\u0438 \u0437\u0430\u043A\u0440\u044B\u0442\u0438\u0438 \u0434\u0438\u0430\u043B\u043E\u0433\u0430\t\t\t             \n\t\t\t\t\t\t\t\t\t\t\tif(event.status == 'opened') {\n\t\t\t\t\t\t\t\t\t\t\t\t return;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tRUAS.getSwf().apiCallback(RUAS.requestCallbackId, {response:event,id:event.data});\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tmailru.events.listen(mailru.common.events.streamPublish, function(event) {\n\t\t\t\t\t\t\t\t\t\t\t// \u044D\u0442\u0430 \u0444\u0443\u043D\u043A\u0446\u0438\u044F \u0431\u0443\u0434\u0435\u0442 \u0432\u044B\u0437\u044B\u0432\u0430\u0442\u044C\u0441\u044F \u043F\u0440\u0438 \u0437\u0430\u043A\u0440\u044B\u0442\u0438\u0438 \u0434\u0438\u0430\u043B\u043E\u0433\u0430\t\t\t             \n\t\t\t\t\t\t\t\t\t\t\tif(event.status == 'opened') {\n\t\t\t\t\t\t\t\t\t\t\t\t return;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tRUAS.getSwf().apiCallback(RUAS.postCallbackId, {response:event.status});\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tmailru.events.listen(mailru.common.events.guestbookPublish, function(event) {\n\t\t\t\t\t\t\t\t\t\t\t// \u044D\u0442\u0430 \u0444\u0443\u043D\u043A\u0446\u0438\u044F \u0431\u0443\u0434\u0435\u0442 \u0432\u044B\u0437\u044B\u0432\u0430\u0442\u044C\u0441\u044F \u043F\u0440\u0438 \u0437\u0430\u043A\u0440\u044B\u0442\u0438\u0438 \u0434\u0438\u0430\u043B\u043E\u0433\u0430\t\t\t             \n\t\t\t\t\t\t\t\t\t\t\tif(event.status == 'opened') {\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tRUAS.getSwf().apiCallback(RUAS.postCallbackId, {response:event.status});\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\n\t\t\t\t\t\t\t\t\tmailru.events.listen(mailru.app.events.paymentDialogStatus, function(event) {\n\t\t\t\t\t\t\t\t\t\t\tif(event.status == 'opened') {\n\t\t\t\t\t\t\t\t\t\t\t\t return;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tRUAS.getSwf().purchaseCallback(\"showPayment\", \"fail\",\"onOrderCancel\");\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tmailru.events.listen(mailru.app.events.incomingPayment, function(event) {\n\t\t\t\t\t\t\t\t\t\t\tif(event.status == 'fail') {\n\t\t\t\t\t\t\t\t\t\t\t\t RUAS.getSwf().purchaseCallback(\"showPayment\", \"fail\",\"onOrderFail\");\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tif (RUAS.logSupported()) trace('[RUAS] init call',event.data);\t\t\n\t\t\t\t\t\t\t\t\t\t\t\tRUAS.getSwf().purchaseCallback(\"showPayment\", \"ok\",event.data,event);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\n\t\t\t\t\t\t\t\t\tRUAS.getSwf().initSuccess();\t\t\t\t\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tapiCall: function (requestKey, method, params)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (!params) params = {};\n\t\t\t\t\t\t\t\t\t//params['method'] = method;\n\t\t\t\t\t\t\t\t\tswitch (method) {\n\t\t\t\t\t\t\t\t\t\tcase 'getUser':\n\t\t\t\t\t\t\t\t\t\t\tmailru.common.users.getInfo(function (response) {\n\t\t\t\t\t\t\t\t\t\t\t\tRUAS.getSwf().apiCallback(requestKey, response);\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase 'getAllFriends':\n\t\t\t\t\t\t\t\t\t\t\tmailru.common.friends.getExtended(function (response) {\n\t\t\t\t\t\t\t\t\t\t\t\tRUAS.getSwf().apiCallback(requestKey, response);\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase 'getAppUsers':\n\t\t\t\t\t\t\t\t\t\t\tmailru.common.friends.getAppUsers(function (response) {\n\t\t\t\t\t\t\t\t\t\t\t\tRUAS.getSwf().apiCallback(requestKey, response);\n\t\t\t\t\t\t\t\t\t\t\t},true);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tmethodCall: function (requestKey,method, params)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tswitch (method) {\n\t\t\t\t\t\t\t\t\t\tcase 'showPost':\n\t\t\t\t\t\t\t\t\t\t\tRUAS.postCallbackId = requestKey;\n\t\t\t\t\t\t\t\t\t\t\tmailru.common.guestbook.post(params);\n\t\t\t\t\t\t\t\t\t\t\t//mailru.common.stream.post(params);\n\t\t\t\t\t\t\t\t\t\tbreak;\t\n\t\t\t\t\t\t\t\t\t\tcase 'showInviteFriends':\n\t\t\t\t\t\t\t\t\t\t\tRUAS.inviteCallbackId = requestKey;\n\t\t\t\t\t\t\t\t\t\t\tmailru.app.friends.invite();\n\t\t\t\t\t\t\t\t\t\t\t//RU.callMethod(\"showRequestBox\",params.uid,params.message);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase 'showRequestFriends':\n\t\t\t\t\t\t\t\t\t\t\tRUAS.requestCallbackId = requestKey;\n\t\t\t\t\t\t\t\t\t\t\tmailru.app.friends.request(params);\n\t\t\t\t\t\t\t\t\t\t\t//RU.callMethod(\"showRequestBox\",params.uid,params.message);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tcase 'showDialog':\n\t\t\t\t\t\t\t\t\t\t\tif (RUAS.logSupported()) trace('showDialog');\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tmailru.app.payments.showDialog(params);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tcase 'like':\n\t\t\t\t\t\t\t\t\t\t\tRUAS.likeCallbackId = requestKey;\n\t\t\t\t\t\t\t\t\t\t\tvar cb = function (response) {\n\t\t\t\t\t\t\t\t\t\t\t\tRUAS.getSwf().apiCallback(RUAS.likeCallbackId, response);\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\tif (!window['dialog.' + method]) {\n\t\t\t\t\t\t\t\t\t\t\t\tcb('?error_code=4201');\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\twindow['dialog.' + method](cb);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, \n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}";
                        ru.ExternalInterface.call(RUJSBridge.script_js);
                        ru.ExternalInterface.call("RUAS.setSWFObjectID", ru.ExternalInterface.objectID);
                    }
                    else {
                        return;
                    }
                }
                catch (error) {
                    ru.GLog.print("error: " + error.message);
                    return;
                }
                RUJSBridge.appId = appId;
                RUJSBridge.apiHandlers = new Object;
                RUJSBridge.supported = true;
                ru.ExternalInterface.addCallback("apiCallback", apiCallback.bind(this));
                ru.ExternalInterface.addCallback("initSuccess", initSuccess.bind(this));
                ru.ExternalInterface.addCallback("likePressed", likePressed.bind(this));
                ru.ExternalInterface.addCallback("purchaseCallback", purchaseCallback.bind(this));
                ru.ExternalInterface.call("RUAS.init", appId, ru.CONFIG.QA_VERSION);
                function purchaseCallback(method, result, data, params) {
                    if (params === void 0) { params = null; }
                    if (params) {
                        trace("Purchace ", JSON.stringify(params));
                    }
                    if (!RUJSBridge.dispatcher)
                        return;
                    RUJSBridge.dispatcher.dispatchEvent(new ru.RUCallbackEvent(ru.RUCallbackEvent.CALL_BACK, false, false, method, result, data));
                }
                function apiCallback(requestKey, params) {
                    RUJSBridge.callApiHandler(requestKey, params);
                }
                function initSuccess() {
                    if (!RUJSBridge.dispatcher)
                        return;
                    RUJSBridge.dispatcher.dispatchEvent(new ru.RUServerEvent(ru.RUServerEvent.CONNECTED));
                }
                function likePressed(event) {
                    if (!RUJSBridge.dispatcher)
                        return;
                    RUJSBridge.dispatcher.dispatchEvent(new ru.RUServerEvent(ru.RUServerEvent.LIKE_PRESSED, event));
                }
            };
            RUJSBridge.getCurrentUser = function (callback) {
                if (!RUJSBridge.supported)
                    return;
                ru.ExternalInterfaceAsync("RUAS.apiCall", RUJSBridge.addApiHandler(callback), "getUser", RUJSBridge.safe(null));
            };
            RUJSBridge.getAllFriends = function (callback) {
                if (!RUJSBridge.supported)
                    return;
                ru.ExternalInterfaceAsync("RUAS.apiCall", RUJSBridge.addApiHandler(callback), "getAllFriends", RUJSBridge.safe({ test_mode: RUJSBridge.DEBUG }));
            };
            RUJSBridge.getAppFriends = function (callback) {
                if (!RUJSBridge.supported)
                    return;
                ru.ExternalInterfaceAsync("RUAS.apiCall", RUJSBridge.addApiHandler(callback), "getAppUsers", RUJSBridge.safe({ test_mode: RUJSBridge.DEBUG }));
            };
            RUJSBridge.getInfo = function (uids, fields, callback) {
                if (!RUJSBridge.supported)
                    return;
                if (!uids)
                    uids = [];
                if (uids.length > 100)
                    uids.length = 100;
                ru.ExternalInterfaceAsync("RUAS.apiCall", RUJSBridge.addApiHandler(callback), "users.get", RUJSBridge.safe({ user_ids: uids, fields: fields, test_mode: RUJSBridge.DEBUG }));
            };
            RUJSBridge.showInvite = function (message, uids, callback) {
                if (!RUJSBridge.supported)
                    return;
                ru.ExternalInterfaceAsync("RUAS.methodCall", RUJSBridge.addApiHandler(callback), "showInviteFriends", { message: message });
            };
            RUJSBridge.showRequest = function (message, uids, imgUrl, callback) {
                if (!RUJSBridge.supported)
                    return;
                var friendsArray = [];
                if (uids) {
                    friendsArray = uids.split(",");
                }
                var params = {};
                params.text = message;
                if (imgUrl && imgUrl.length > 0) {
                    params.image_url = imgUrl;
                }
                if (friendsArray.length > 0) {
                    params.friends = friendsArray;
                }
                ru.ExternalInterfaceAsync("RUAS.methodCall", RUJSBridge.addApiHandler(callback), "showRequestFriends", params);
            };
            RUJSBridge.showPost = function (title, message, uids, imgUrl, actionLinks, callback) {
                if (!RUJSBridge.supported)
                    return;
                var friendsArray = [];
                if (uids) {
                    friendsArray = uids.split(",");
                }
                var params = {};
                params.text = message;
                if (imgUrl && imgUrl.length > 0) {
                    params.img_url = imgUrl;
                }
                if (title && title.length > 0) {
                    params.title = title;
                }
                if (actionLinks != null && actionLinks.length > 0) {
                    var linksArray = new Array;
                    for (var i = 0; i < actionLinks.length; i++) {
                        linksArray.push({ text: "app link", href: actionLinks[i] });
                    }
                    params.action_links = linksArray;
                }
                ru.ExternalInterfaceAsync("RUAS.methodCall", RUJSBridge.addApiHandler(callback), "showPost", params);
            };
            RUJSBridge.like = function (callback) {
                if (!RUJSBridge.supported)
                    return;
                ru.ExternalInterfaceAsync("RUAS.methodCall", RUJSBridge.addApiHandler(callback), "like", {});
            };
            RUJSBridge.showPayment = function (itemId, itemName, itemPrice) {
                if (!RUJSBridge.supported)
                    return;
                ru.ExternalInterfaceAsync("RUAS.methodCall", 0, "showDialog", { service_id: itemId, service_name: itemName, mailiki_price: itemPrice });
            };
            RUJSBridge.addApiHandler = function (handler) {
                if (handler == null)
                    return -1;
                RUJSBridge.apiKey++;
                RUJSBridge.apiHandlers[RUJSBridge.apiKey] = handler;
                return RUJSBridge.apiKey;
            };
            RUJSBridge.callApiHandler = function (apiKey, data) {
                var handler = RUJSBridge.apiHandlers[apiKey];
                if (handler == null)
                    return;
                handler(data);
                delete RUJSBridge.apiHandlers[apiKey];
            };
            RUJSBridge.safe = function (value) {
                if (value === void 0) { value = null; }
                var obj = {};
                for (var s in value)
                    if (value[s])
                        obj[s] = value[s];
                return obj;
            };
            RUJSBridge.log = function (message) {
                ru.GLog.print(RUJSBridge.TAG + message);
            };
            RUJSBridge.TAG = "[RUJS] ";
            RUJSBridge.DEBUG = 0;
            RUJSBridge.supported = false;
            RUJSBridge.apiKey = 0;
            return RUJSBridge;
        }());
        ru.RUJSBridge = RUJSBridge;
    })(ru = api.ru || (api.ru = {}));
})(api || (api = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            var net;
            (function (net) {
                net.EventStats = global.EventStats;
                net.PostRequest = com.facebook.graph.utils.PostRequest;
                net.Bitmap = flash.display.Bitmap;
                net.BitmapData = flash.display.BitmapData;
                net.Event = flash.events.Event;
                net.IOErrorEvent = flash.events.IOErrorEvent;
                net.SecurityErrorEvent = flash.events.SecurityErrorEvent;
                net.FileReference = flash.net.FileReference;
                net.URLLoader = flash.net.URLLoader;
                net.URLRequest = flash.net.URLRequest;
                net.URLVariables = flash.net.URLVariables;
                net.ByteArray = flash.utils.ByteArray;
                net.PNGEncoderOptions = flash.display.PNGEncoderOptions;
                var AbstractFacebookRequest = (function () {
                    function AbstractFacebookRequest() {
                        this._success = false;
                    }
                    Object.defineProperty(AbstractFacebookRequest.prototype, "rawResult", {
                        get: function () {
                            return this._rawResult;
                        },
                        enumerable: true,
                        configurable: true
                    });
                    Object.defineProperty(AbstractFacebookRequest.prototype, "success", {
                        get: function () {
                            return this._success;
                        },
                        enumerable: true,
                        configurable: true
                    });
                    Object.defineProperty(AbstractFacebookRequest.prototype, "data", {
                        get: function () {
                            return this._data;
                        },
                        enumerable: true,
                        configurable: true
                    });
                    AbstractFacebookRequest.prototype.callURL = function (callback, url, locale) {
                        if (url === void 0) { url = ""; }
                        if (locale === void 0) { locale = null; }
                        this._callback = callback;
                        this.urlRequest = new net.URLRequest(url.length ? url : this._url);
                        if (locale) {
                            var data = new net.URLVariables();
                            data.locale = locale;
                            this.urlRequest.data = data;
                        }
                        this.loadURLLoader();
                    };
                    Object.defineProperty(AbstractFacebookRequest.prototype, "successCallback", {
                        set: function (value) {
                            this._callback = value;
                        },
                        enumerable: true,
                        configurable: true
                    });
                    AbstractFacebookRequest.prototype.isValueFile = function (value) {
                        return (value instanceof net.FileReference || value instanceof net.Bitmap || value instanceof net.BitmapData || value instanceof net.ByteArray);
                    };
                    AbstractFacebookRequest.prototype.objectToURLVariables = function (values) {
                        var urlVars = new net.URLVariables();
                        if (values == null) {
                            return urlVars;
                        }
                        for (var n in values) {
                            urlVars[n] = values[n];
                        }
                        return urlVars;
                    };
                    AbstractFacebookRequest.prototype.close = function () {
                        if (this.urlLoader != null) {
                            this.urlLoader.removeEventListener(net.Event.COMPLETE, this.handleURLLoaderComplete.bind(this));
                            this.urlLoader.removeEventListener(net.IOErrorEvent.IO_ERROR, this.handleURLLoaderIOError.bind(this));
                            this.urlLoader.removeEventListener(net.SecurityErrorEvent.SECURITY_ERROR, this.handleURLLoaderSecurityError.bind(this));
                            try {
                                this.urlLoader.close();
                            }
                            catch (e) { }
                            this.urlLoader = null;
                        }
                    };
                    AbstractFacebookRequest.prototype.loadURLLoader = function () {
                        this.urlLoader = new net.URLLoader();
                        this.urlLoader.addEventListener(net.Event.COMPLETE, this.handleURLLoaderComplete.bind(this), false, 0, false);
                        this.urlLoader.addEventListener(net.IOErrorEvent.IO_ERROR, this.handleURLLoaderIOError.bind(this), false, 0, true);
                        this.urlLoader.addEventListener(net.SecurityErrorEvent.SECURITY_ERROR, this.handleURLLoaderSecurityError.bind(this), false, 0, true);
                        trace("urlRequest = " + this.urlRequest.url);
                        this.urlLoader.load(this.urlRequest);
                    };
                    AbstractFacebookRequest.prototype.handleURLLoaderComplete = function (event) {
                        net.EventStats.handle(AbstractFacebookRequest, event);
                        this.handleDataLoad(this.urlLoader.data);
                    };
                    AbstractFacebookRequest.prototype.handleDataLoad = function (result, dispatchCompleteEvent) {
                        if (dispatchCompleteEvent === void 0) { dispatchCompleteEvent = true; }
                        this._rawResult = result;
                        this._success = true;
                        try {
                            this._data = JSON.parse(this._rawResult);
                        }
                        catch (e) {
                            this._data = this._rawResult;
                            this._success = false;
                        }
                        this.handleDataReady();
                        if (dispatchCompleteEvent) {
                            this.dispatchComplete();
                        }
                    };
                    AbstractFacebookRequest.prototype.handleDataReady = function () {
                    };
                    AbstractFacebookRequest.prototype.dispatchComplete = function () {
                        if (this._callback != null) {
                            this._callback(this);
                        }
                        this.close();
                    };
                    AbstractFacebookRequest.prototype.handleURLLoaderIOError = function (event) {
                        net.EventStats.handle(AbstractFacebookRequest, event);
                        this._success = false;
                        this._rawResult = event.target.data;
                        if (this._rawResult != '') {
                            try {
                                this._data = JSON.parse(this._rawResult);
                            }
                            catch (e) {
                                this._data = { type: 'Exception', message: this._rawResult };
                            }
                        }
                        else {
                            this._data = event;
                        }
                        this.dispatchComplete();
                    };
                    AbstractFacebookRequest.prototype.handleURLLoaderSecurityError = function (event) {
                        net.EventStats.handle(AbstractFacebookRequest, event);
                        this._success = false;
                        this._rawResult = event.target.data;
                        try {
                            this._data = JSON.parse(event.target.data);
                        }
                        catch (e) {
                            this._data = event;
                        }
                        this.dispatchComplete();
                    };
                    AbstractFacebookRequest.prototype.extractFileData = function (values) {
                        if (values == null) {
                            return null;
                        }
                        var fileData;
                        if (this.isValueFile(values)) {
                            fileData = values;
                        }
                        else if (values != null) {
                            for (var n in values) {
                                if (this.isValueFile(values[n])) {
                                    fileData = values[n];
                                    delete values[n];
                                    break;
                                }
                            }
                        }
                        return fileData;
                    };
                    AbstractFacebookRequest.prototype.createUploadFileRequest = function (fileData, values) {
                        if (values === void 0) { values = null; }
                        var post = new net.PostRequest();
                        if (values) {
                            for (var n in values) {
                                post.writePostData(n, values[n]);
                            }
                        }
                        if (fileData instanceof net.Bitmap) {
                            fileData = fileData.bitmapData;
                        }
                        if (fileData instanceof net.ByteArray) {
                            post.writeFileData(values.fileName, fileData, values.contentType);
                        }
                        else if (fileData instanceof net.BitmapData) {
                            var ba = fileData.encode(fileData.rect, new net.PNGEncoderOptions());
                            post.writeFileData(values.fileName, ba, 'image/png');
                        }
                        post.close();
                        this.urlRequest.contentType =
                            'multipart/form-data; boundary='
                                + post.boundary;
                        return post;
                    };
                    AbstractFacebookRequest.prototype.toString = function () {
                        return this.urlRequest.url +
                            (this.urlRequest.data == null
                                ? ''
                                : '?' + unescape(this.urlRequest.data.toString()));
                    };
                    return AbstractFacebookRequest;
                }());
                net.AbstractFacebookRequest = AbstractFacebookRequest;
            })(net = graph.net || (graph.net = {}));
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            var net;
            (function (net) {
                net.EventStats = global.EventStats;
                net.DataEvent = flash.events.DataEvent;
                net.ErrorEvent = flash.events.ErrorEvent;
                net.IOErrorEvent = flash.events.IOErrorEvent;
                net.SecurityErrorEvent = flash.events.SecurityErrorEvent;
                net.FileReference = flash.net.FileReference;
                net.URLRequest = flash.net.URLRequest;
                net.URLRequestMethod = flash.net.URLRequestMethod;
                var FacebookRequest = (function (_super) {
                    __extends(FacebookRequest, _super);
                    function FacebookRequest() {
                        return _super.call(this) || this;
                    }
                    FacebookRequest.prototype.call = function (url, requestMethod, callback, values) {
                        if (requestMethod === void 0) { requestMethod = 'GET'; }
                        if (callback === void 0) { callback = null; }
                        if (values === void 0) { values = null; }
                        this._url = url;
                        this._requestMethod = requestMethod;
                        this._callback = callback;
                        var requestUrl = url;
                        this.urlRequest = new net.URLRequest(requestUrl);
                        this.urlRequest.method = this._requestMethod;
                        if (values == null) {
                            this.loadURLLoader();
                            return;
                        }
                        var fileData = this.extractFileData(values);
                        if (fileData == null) {
                            this.urlRequest.data = this.objectToURLVariables(values);
                            this.loadURLLoader();
                            return;
                        }
                        if (fileData instanceof net.FileReference) {
                            this.urlRequest.data = this.objectToURLVariables(values);
                            this.urlRequest.method = net.URLRequestMethod.POST;
                            this.fileReference = fileData;
                            this.fileReference.addEventListener(net.DataEvent.UPLOAD_COMPLETE_DATA, this.handleFileReferenceData.bind(this), false, 0, true);
                            this.fileReference.addEventListener(net.IOErrorEvent.IO_ERROR, this.handelFileReferenceError.bind(this), false, 0, false);
                            this.fileReference.addEventListener(net.SecurityErrorEvent.SECURITY_ERROR, this.handelFileReferenceError.bind(this), false, 0, false);
                            this.fileReference.upload(this.urlRequest);
                            return;
                        }
                        this.urlRequest.data = this.createUploadFileRequest(fileData, values).getPostData();
                        this.urlRequest.method = net.URLRequestMethod.POST;
                        this.loadURLLoader();
                    };
                    FacebookRequest.prototype.close = function () {
                        _super.prototype.close.call(this);
                        if (this.fileReference != null) {
                            this.fileReference.removeEventListener(net.DataEvent.UPLOAD_COMPLETE_DATA, this.handleFileReferenceData.bind(this));
                            this.fileReference.removeEventListener(net.IOErrorEvent.IO_ERROR, this.handelFileReferenceError.bind(this));
                            this.fileReference.removeEventListener(net.SecurityErrorEvent.SECURITY_ERROR, this.handelFileReferenceError.bind(this));
                            try {
                                this.fileReference.cancel();
                            }
                            catch (e) { }
                            this.fileReference = null;
                        }
                    };
                    FacebookRequest.prototype.handleFileReferenceData = function (event) {
                        net.EventStats.handle(FacebookRequest, event);
                        this.handleDataLoad(event.data);
                    };
                    FacebookRequest.prototype.handelFileReferenceError = function (event) {
                        net.EventStats.handle(FacebookRequest, event);
                        this._success = false;
                        this._data = event;
                        this.dispatchComplete();
                    };
                    return FacebookRequest;
                }(net.AbstractFacebookRequest));
                net.FacebookRequest = FacebookRequest;
            })(net = graph.net || (graph.net = {}));
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var flash;
(function (flash) {
    var net;
    (function (net) {
        net.ArgumentError = global.ArgumentError;
        net.Error = global.Error;
        net.XML = global.XML;
        net.Event = flash.events.Event;
        net.EventDispatcher = flash.events.EventDispatcher;
        net.IOErrorEvent = flash.events.IOErrorEvent;
        net.ByteArray = flash.utils.ByteArray;
        net.setTimeout = flash.utils.setTimeout;
        var FileReference = (function (_super) {
            __extends(FileReference, _super);
            function FileReference() {
                return _super.call(this) || this;
            }
            Object.defineProperty(FileReference.prototype, "creationDate", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(FileReference.prototype, "creator", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(FileReference.prototype, "data", {
                get: function () {
                    return this._data;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(FileReference.prototype, "extension", {
                get: function () {
                    return this._extension;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(FileReference.prototype, "modificationDate", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(FileReference.prototype, "name", {
                get: function () {
                    return this._name;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(FileReference.prototype, "size", {
                get: function () {
                    return !isNaN(this._size) ? this._size : 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(FileReference.prototype, "type", {
                get: function () {
                    return this._type;
                },
                enumerable: true,
                configurable: true
            });
            FileReference.prototype.browse = function (typeFilter) {
                if (typeFilter === void 0) { typeFilter = null; }
                var accept;
                for (var _i = 0, typeFilter_2 = typeFilter; _i < typeFilter_2.length; _i++) {
                    var f = typeFilter_2[_i];
                    accept = accept || [];
                    var ext = f.extension;
                    if (!ext)
                        continue;
                    ext = ext.substr(ext.lastIndexOf('.'));
                    if (!ext.length)
                        continue;
                    accept.push(ext);
                }
                this._input = document.createElement('input');
                this._input.setAttribute('type', 'file');
                if (accept) {
                    this._input.setAttribute('accept', accept.join(','));
                }
                var timeout = 0;
                this._input.addEventListener('change', function (e) {
                    net.clearTimeout(timeout);
                    this._input = null;
                    var files = e.target.files;
                    for (var i = 0, f; f = files[i]; i++) {
                        this._fromFile(f);
                        this.dispatchEvent(new net.Event(net.Event.SELECT));
                        return;
                    }
                    this.dispatchEvent(new net.Event(net.Event.CANCEL));
                }.bind(this));
                var onfocus = document.body.onfocus;
                document.body.onfocus = function (e) {
                    document.body.onfocus = onfocus;
                    if (onfocus != undefined)
                        onfocus(e);
                    timeout = net.setTimeout(function () {
                        this._input = null;
                        this.dispatchEvent(new net.Event(net.Event.CANCEL));
                    }.bind(this), 1000);
                }.bind(this);
                this._input.click();
                return true;
            };
            FileReference.prototype.cancel = function () {
            };
            FileReference.prototype.download = function (request, defaultFileName) {
                if (defaultFileName === void 0) { defaultFileName = null; }
            };
            FileReference.prototype.load = function () {
                try {
                    var reader = new FileReader();
                    reader.onload = function () {
                        try {
                            this._data = new net.ByteArray;
                            this._data.fromArrayBuffer(reader.result);
                            this.dispatchEvent(new net.Event(net.Event.COMPLETE));
                        }
                        catch (e) {
                            this.dispatchEvent(new net.IOErrorEvent(net.IOErrorEvent.IO_ERROR));
                        }
                    }.bind(this);
                    reader.readAsArrayBuffer(this._file);
                    this.dispatchEvent(new net.Event(net.Event.OPEN));
                }
                catch (e) {
                    this.dispatchEvent(new net.IOErrorEvent(net.IOErrorEvent.IO_ERROR));
                }
            };
            FileReference.prototype.save = function (data, defaultFileName) {
                if (defaultFileName === void 0) { defaultFileName = null; }
                this._name = this._name || defaultFileName || 'saved_file';
                var ba;
                if (data instanceof net.ByteArray) {
                    ba = data;
                }
                else if (data instanceof net.XML) {
                    ba = new net.ByteArray;
                    ba.writeUTFBytes(data.toXMLString());
                }
                else if (typeof data == 'string') {
                    ba = new net.ByteArray;
                    ba.writeUTFBytes(data);
                }
                else {
                    throw new net.ArgumentError('invalid data');
                }
                this.dispatchEvent(new net.Event(net.Event.OPEN));
                try {
                    var blob = new Blob([ba.buffer], { type: "octet/stream" });
                    var a = document.createElement('a');
                    document.body.appendChild(a);
                    a.href = window.URL.createObjectURL(blob);
                    a.setAttribute('download', this._name);
                    a.click();
                    document.body.removeChild(a);
                    this.dispatchEvent(new net.Event(net.Event.COMPLETE));
                }
                catch (e) {
                    this.dispatchEvent(new net.IOErrorEvent(net.IOErrorEvent.IO_ERROR));
                }
            };
            FileReference.prototype.upload = function (request, uploadDataFieldName, testUpload) {
                if (uploadDataFieldName === void 0) { uploadDataFieldName = "Filedata"; }
                if (testUpload === void 0) { testUpload = false; }
            };
            FileReference.prototype.uploadUnencoded = function (request) {
            };
            FileReference.prototype._fromFile = function (f) {
                if (!f)
                    return this;
                this._file = f;
                this._name = f.name;
                this._size = f.size;
                this._type = this._name.substr(this._name.lastIndexOf('.'));
                return this;
            };
            return FileReference;
        }(net.EventDispatcher));
        net.FileReference = FileReference;
    })(net = flash.net || (flash.net = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var ui;
    (function (ui) {
        ui.ArgumentError = global.ArgumentError;
        ui.Error = global.Error;
        ui.BitmapData = flash.display.BitmapData;
        ui.PNGEncoderOptions = flash.display.PNGEncoderOptions;
        ui.Capabilities = flash.system.Capabilities;
        ui.Base64 = flash.utils.Base64;
        ui.ByteArray = flash.utils.ByteArray;
        var Mouse = (function (_super) {
            __extends(Mouse, _super);
            function Mouse() {
                var _newTarget = this.constructor;
                var _this = _super.call(this) || this;
                Object.setPrototypeOf(_this, _newTarget.prototype);
                throw new ui.Error('Abstract class error');
                return _this;
            }
            Mouse.hide = function () {
                document.body.style.cursor = 'none';
                Mouse.sCursorShowed = false;
            };
            Mouse.show = function () {
                var cursor = Mouse.sCursor, style = cursor, custom = Mouse.sCursorData[cursor];
                if (ui.Capabilities.browser.indexOf('Microsoft') >= 0) {
                    custom = null;
                }
                if (ui.ContextMenu.isOpened === true) {
                    style = ui.MouseCursor.AUTO;
                }
                else if (custom) {
                    style = 'url(data:image/png;base64,' + custom.base64 + '),auto';
                }
                else if (!ui.MouseCursor.isValid(cursor)) {
                    style = ui.MouseCursor.AUTO;
                }
                if (ui.MouseCursor.isValid(cursor)) {
                    style = ui.MouseCursor.toCSS(style);
                }
                document.body.style.cursor = style;
                Mouse.sCursorShowed = true;
            };
            Object.defineProperty(Mouse, "supportsCursor", {
                get: function () {
                    return true;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Mouse, "supportsNativeCursor", {
                get: function () {
                    return Mouse.supportsCursor;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Mouse, "cursor", {
                get: function () {
                    return Mouse.sCursor;
                },
                set: function (name) {
                    if (!ui.MouseCursor.isValid(name) && !Mouse.sCursorData[name]) {
                        throw new ui.ArgumentError('Parameter cursor must be one of the accepted values.', 2008);
                    }
                    Mouse.sCursor = name;
                    if (Mouse.sCursorShowed)
                        Mouse.show();
                },
                enumerable: true,
                configurable: true
            });
            Mouse.registerCursor = function (name, cursor) {
                if (!Mouse.supportsCursor) {
                    return;
                }
                if (!cursor || !cursor.data.length) {
                    throw new ui.ArgumentError('One of the parameters is invalid.', 2004);
                }
                var bd = cursor.data[0];
                var png = bd.encode(bd.rect, new ui.PNGEncoderOptions);
                cursor.base64 = ui.Base64.encode(png);
                Mouse.sCursorData[name] = cursor;
            };
            Mouse.unregisterCursor = function (name) {
                delete Mouse.sCursorData[name];
            };
            Mouse.sCursor = 'auto';
            Mouse.sCursorShowed = true;
            Mouse.sCursorData = {};
            return Mouse;
        }(Object));
        ui.Mouse = Mouse;
    })(ui = flash.ui || (flash.ui = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var __native;
    (function (__native) {
        __native.BitmapData = flash.display.BitmapData;
        __native.Graphics = flash.display.Graphics;
        __native.GraphicsEndFill = flash.display.GraphicsEndFill;
        __native.GraphicsPath = flash.display.GraphicsPath;
        __native.GraphicsStroke = flash.display.GraphicsStroke;
        __native.ColorTransform = flash.geom.ColorTransform;
        __native.Matrix = flash.geom.Matrix;
        __native.TextFormat = flash.text.TextFormat;
        var BaseRenderer = (function (_super) {
            __extends(BaseRenderer, _super);
            function BaseRenderer() {
                var _this = _super.call(this) || this;
                _this.endFillInstance = new __native.GraphicsEndFill;
                return _this;
            }
            BaseRenderer.prototype.getCssColor = function (color, alpha, ct, toarr) {
                return "rgba(" + int((color >> 16 & 0xff) * ct.redMultiplier + ct.redOffset) + "," + int((color >> 8 & 0xff) * ct.greenMultiplier + ct.greenOffset) + "," + int((color & 0xff) * ct.greenMultiplier + ct.greenOffset) + "," + (alpha * ct.alphaMultiplier + ct.alphaOffset) + ")";
            };
            BaseRenderer.prototype.createPath = function () {
                return new __native.GraphicsPath;
            };
            BaseRenderer.prototype.renderGraphics = function (ctx, g, m, blendMode, colorTransform) {
                ctx.setTransform(m.a, m.b, m.c, m.d, m.tx, m.ty);
                ctx.globalCompositeOperation = blendMode;
                var shifted = false;
                var len = g.graphicsData.length;
                for (var i = 0; i < len; i++) {
                    var igd = g.graphicsData[i];
                    shift.bind(this)(igd);
                    igd.draw(ctx, colorTransform);
                }
                if (g.lastFill) {
                    this.endFillInstance.fill = g.lastFill;
                    this.endFillInstance.draw(ctx, colorTransform);
                }
                if (g.lastStroke) {
                    shift.bind(this)(g.lastStroke);
                    ctx.stroke();
                }
                ctx.fillStyle = null;
                ctx.strokeStyle = null;
                if (shifted)
                    ctx.translate(0.5, 0.5);
                function shift(igd) {
                    if (!(igd instanceof __native.GraphicsStroke))
                        return;
                    if (igd.thickness % 2 != 0) {
                        if (!shifted) {
                            ctx.translate(-0.5, -0.5);
                            shifted = true;
                        }
                    }
                    else {
                        if (shifted) {
                            ctx.translate(0.5, 0.5);
                            shifted = false;
                        }
                    }
                }
            };
            BaseRenderer.prototype.renderImage = function (ctx, img, m, blendMode, colorTransform, smoothing) {
                this.setSmoothing(ctx, smoothing);
                ctx.globalAlpha = colorTransform.alphaMultiplier;
                ctx.globalCompositeOperation = blendMode;
                ctx.setTransform(m.a, m.b, m.c, m.d, m.tx, m.ty);
                ctx.drawImage(img.image, 0, 0);
                this.restoreSmoothing(ctx);
            };
            BaseRenderer.prototype.setSmoothing = function (ctx, enable) {
                this.lastSmoothing = ctx['imageSmoothingEnabled'];
                ctx['mozImageSmoothingEnabled'] = enable;
                ctx['msImageSmoothingEnabled'] = enable;
                ctx['imageSmoothingEnabled'] = enable;
            };
            BaseRenderer.prototype.restoreSmoothing = function (ctx) {
                this.setSmoothing(ctx, this.lastSmoothing);
            };
            BaseRenderer.prototype.renderText = function (ctx, txt, textFormat, m, blendMode, colorTransform, x, y) {
                ctx.globalAlpha = colorTransform.alphaMultiplier;
                ctx.globalCompositeOperation = blendMode;
                ctx.setTransform(m.a, m.b, m.c, m.d, m.tx, m.ty);
                ctx.font = textFormat.css;
                ctx.fillStyle = textFormat.csscolor;
                ctx.textBaseline = "top";
                ctx.fillText(txt, x, y);
            };
            return BaseRenderer;
        }(__native.IRenderer));
        __native.BaseRenderer = BaseRenderer;
    })(__native = flash.__native || (flash.__native = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var __native;
    (function (__native) {
        __native.BitmapData = flash.display.BitmapData;
        __native.Graphics = flash.display.Graphics;
        __native.GraphicsPath = flash.display.GraphicsPath;
        __native.ColorTransform = flash.geom.ColorTransform;
        __native.Matrix = flash.geom.Matrix;
        __native.TextFormat = flash.text.TextFormat;
        var WebGLRenderer = (function (_super) {
            __extends(WebGLRenderer, _super);
            function WebGLRenderer() {
                return _super.call(this) || this;
            }
            WebGLRenderer.prototype.createPath = function () {
                return new __native.GLGraphicsPath;
            };
            WebGLRenderer.prototype.getCssColor = function (color, alpha, ct, toarr) {
                var r = ((color >> 16 & 0xff) * ct.redMultiplier + ct.redOffset);
                var g = ((color >> 8 & 0xff) * ct.greenMultiplier + ct.greenOffset);
                var b = ((color & 0xff) * ct.greenMultiplier + ct.greenOffset);
                var a = (alpha * ct.alphaMultiplier + ct.alphaOffset) * 0xff;
                var c = ((r << 0) | (g << 8) | (b << 16) | (a << 24)) >>> 0;
                return c;
            };
            WebGLRenderer.prototype.renderImage = function (ctx, img, m, blendMode, colorTransform, smoothing) {
                var glctx = ctx;
                glctx.drawImageInternal(img.image, glctx.bitmapDrawable, m, null, true, colorTransform.tint, true, true, smoothing);
            };
            WebGLRenderer.prototype.renderGraphics = function (ctx, g, m, blendMode, colorTransform) {
                var glctx = ctx;
                glctx.setTransform2(m);
                ctx.globalCompositeOperation = blendMode;
                glctx.colorTransform = colorTransform;
                var len = g.graphicsData.length;
                for (var i = 0; i < len; i++) {
                    var igd = g.graphicsData[i];
                    igd.gldraw(glctx, colorTransform);
                }
                if (g.lastFill) {
                    this.endFillInstance.fill = g.lastFill;
                    this.endFillInstance._worldMatrix = g._worldMatrix;
                    this.endFillInstance.gldraw(glctx, colorTransform);
                }
                if (g.lastStroke) {
                    ctx.stroke();
                }
                ctx.fillStyle = null;
                ctx.strokeStyle = null;
            };
            WebGLRenderer.prototype.renderText = function (ctx, txt, textFormat, m, blendMode, colorTransform, x, y) {
                var glctx = ctx;
                glctx.colorTransform = colorTransform;
                ctx.globalCompositeOperation = blendMode;
                glctx.setTransform2(m);
                ctx.font = textFormat.css;
                ctx.fillStyle = textFormat.csscolor;
                ctx.textBaseline = "top";
                ctx.fillText(txt, x, y);
            };
            WebGLRenderer.prototype.finish = function (ctx) {
                var glctx = ctx;
                glctx.drawImageInternal(null, null, null, null, true, null, true, true);
            };
            return WebGLRenderer;
        }(__native.BaseRenderer));
        __native.WebGLRenderer = WebGLRenderer;
    })(__native = flash.__native || (flash.__native = {}));
})(flash || (flash = {}));
var s3eUtils;
(function (s3eUtils) {
    s3eUtils.ErrorEvent = flash.events.ErrorEvent;
    s3eUtils.Event = flash.events.Event;
    s3eUtils.IOErrorEvent = flash.events.IOErrorEvent;
    s3eUtils.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    s3eUtils.TimerEvent = flash.events.TimerEvent;
    s3eUtils.URLLoader = flash.net.URLLoader;
    s3eUtils.URLRequest = flash.net.URLRequest;
    s3eUtils.setTimeout = flash.utils.setTimeout;
    var OnlineURL = (function (_super) {
        __extends(OnlineURL, _super);
        function OnlineURL() {
            var _this = _super.call(this) || this;
            _this.DEFAULT_URL = 'https://ssl.absolutist.com/ping';
            _this.supported = false;
            var url = s3eUtils.AppIcf.read(s3eUtils.Online.ICF_FLASH, "checkOnlineHost") || _this.DEFAULT_URL;
            if (url.indexOf('http') == -1)
                return _this;
            _this.request = new s3eUtils.URLRequest(url);
            _this.loader = new s3eUtils.URLLoader;
            _this.loader.addEventListener(s3eUtils.Event.COMPLETE, _this.connectHandler.bind(_this));
            _this.loader.addEventListener(s3eUtils.IOErrorEvent.IO_ERROR, _this.errorHandler.bind(_this));
            _this.loader.addEventListener(s3eUtils.SecurityErrorEvent.SECURITY_ERROR, _this.errorHandler.bind(_this));
            return _this;
        }
        OnlineURL.prototype.check = function (event) {
            if (event === void 0) { event = null; }
            _super.prototype.check.call(this, event);
            if (!this.loader) {
                s3eUtils.setTimeout(this.next.bind(this), 1, true);
                return;
            }
            this.loader.load(this.request);
        };
        OnlineURL.prototype.connectHandler = function (event) {
            this.supported = true;
            this.next(true);
        };
        OnlineURL.prototype.errorHandler = function (event) {
            this.next(!this.supported);
        };
        return OnlineURL;
    }(s3eUtils.Online));
    s3eUtils.OnlineURL = OnlineURL;
})(s3eUtils || (s3eUtils = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        odnoklassniki.Error = global.Error;
        odnoklassniki.OdnoklassnikiSession = api.odnoklassniki.core.OdnoklassnikiSession;
        odnoklassniki.ApiServerEvent = api.odnoklassniki.events.ApiServerEvent;
        odnoklassniki.OdnoklassnikiRequest = api.odnoklassniki.net.OdnoklassnikiRequest;
        odnoklassniki.DisplayObject = flash.display.DisplayObject;
        odnoklassniki.LoaderInfo = flash.display.LoaderInfo;
        odnoklassniki.EventDispatcher = flash.events.EventDispatcher;
        odnoklassniki.Dictionary = flash.utils.Dictionary;
        var Odnoklassniki = (function (_super) {
            __extends(Odnoklassniki, _super);
            function Odnoklassniki() {
                var _this = _super.call(this) || this;
                if (Odnoklassniki._can_initiate == false) {
                    throw new odnoklassniki.Error('Odnoklassniki is an singleton! Call Odnoklassniki.getInstace() instead.');
                }
                else {
                    _this.openRequests = new odnoklassniki.Dictionary();
                }
                return _this;
            }
            Odnoklassniki.initialize = function (base, secretKey) {
                var flash_vars = Odnoklassniki.getFlashVars(base);
                Odnoklassniki.getInstance().session = new odnoklassniki.OdnoklassnikiSession(flash_vars.apiconnection);
                Odnoklassniki.getInstance().session.sessionKey = flash_vars.session_key;
                Odnoklassniki.getInstance().session.sessionSecretKey = flash_vars.session_secret_key;
                Odnoklassniki.getInstance().session.uid = flash_vars.logged_user_id;
                Odnoklassniki.getInstance().session.applicationKey = flash_vars.application_key;
                Odnoklassniki.getInstance().session.secretKey = secretKey;
                Odnoklassniki.API_SERVER = flash_vars.api_server;
            };
            Odnoklassniki.getInstance = function () {
                if (Odnoklassniki._instance == null) {
                    Odnoklassniki._can_initiate = true;
                    Odnoklassniki._instance = new Odnoklassniki();
                    Odnoklassniki._can_initiate = false;
                }
                return Odnoklassniki._instance;
            };
            Odnoklassniki.dispatchEvent = function (event) {
                Odnoklassniki.getInstance().dispatchEvent(event);
            };
            Odnoklassniki.addEventListener = function (type, fn, useCapture, priority, useWeakReference) {
                if (useCapture === void 0) { useCapture = false; }
                if (priority === void 0) { priority = 0; }
                if (useWeakReference === void 0) { useWeakReference = false; }
                Odnoklassniki.getInstance().addEventListener(type, fn, useCapture, priority, useWeakReference);
            };
            Odnoklassniki.hasEventListener = function (type) {
                return Odnoklassniki.getInstance().hasEventListener(type);
            };
            Odnoklassniki.call = function (method, params) {
                if (params === void 0) { params = null; }
                Odnoklassniki.getInstance().send(method, params);
            };
            Odnoklassniki.prototype.send = function (method, params) {
                if (Odnoklassniki.getInstance().session.is_connected) {
                    Odnoklassniki.getInstance().session.connection.send.apply(Odnoklassniki.getInstance().session.connection, ["_proxy_" + Odnoklassniki.getInstance().session.connectionName, method].concat(params));
                }
                else {
                    Odnoklassniki.dispatchEvent(new odnoklassniki.ApiServerEvent(odnoklassniki.ApiServerEvent.NOT_YET_CONNECTED));
                }
            };
            Odnoklassniki.callRestApi = function (method, callback, params, format, requestMethod, url) {
                if (params === void 0) { params = null; }
                if (format === void 0) { format = 'JSON'; }
                if (requestMethod === void 0) { requestMethod = "GET"; }
                if (url === void 0) { url = null; }
                Odnoklassniki.getInstance().doCallRestApi(method, callback, params, format, requestMethod, url);
            };
            Odnoklassniki.prototype.doCallRestApi = function (method, callback, params, format, requestMethod, url) {
                if (params === void 0) { params = null; }
                if (format === void 0) { format = 'JSON'; }
                if (requestMethod === void 0) { requestMethod = "GET"; }
                if (url === void 0) { url = null; }
                var req = new odnoklassniki.OdnoklassnikiRequest(Odnoklassniki.API_SERVER, requestMethod);
                req.call(method, params, this.handleRequestLoad.bind(this), format, url);
                this.openRequests.set(req, callback);
            };
            Odnoklassniki.prototype.handleRequestLoad = function (rq) {
                var resultCallback = this.openRequests.get(rq);
                if (resultCallback === null) {
                    this.openRequests.delete(rq);
                }
                resultCallback(rq.success ? rq.data : null);
                this.openRequests.delete(rq);
            };
            Odnoklassniki.getSignature = function (data, exception, format) {
                if (exception === void 0) { exception = false; }
                if (format === void 0) { format = "JSON"; }
                return Odnoklassniki.getInstance().session.getSignature(data, exception, format);
            };
            Object.defineProperty(Odnoklassniki, "session", {
                get: function () {
                    return Odnoklassniki.getInstance().session;
                },
                enumerable: true,
                configurable: true
            });
            Odnoklassniki.showPermissions = function () {
                var permissions = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    permissions[_i] = arguments[_i];
                }
                Odnoklassniki.getInstance().send("showPermissions", [JSON.stringify(permissions)]);
            };
            Odnoklassniki.showInvite = function (text, params) {
                if (text === void 0) { text = null; }
                if (params === void 0) { params = null; }
                Odnoklassniki.getInstance().send("showInvite", [text, params]);
            };
            Odnoklassniki.showNotification = function (text, params) {
                if (params === void 0) { params = null; }
                Odnoklassniki.getInstance().send("showNotification", [text, params]);
            };
            Odnoklassniki.showPayment = function (name, description, code, price, options, attributes, currency, callback) {
                if (price === void 0) { price = -1; }
                if (options === void 0) { options = null; }
                if (attributes === void 0) { attributes = null; }
                if (currency === void 0) { currency = null; }
                if (callback === void 0) { callback = 'false'; }
                Odnoklassniki.getInstance().send("showPayment", [name, description, code, price, options, attributes, currency, callback]);
            };
            Odnoklassniki.showConfirmation = function (method, userText, signature) {
                Odnoklassniki.getInstance().send("showConfirmation", [method, userText, signature]);
            };
            Odnoklassniki.setWindowSize = function (width, height) {
                Odnoklassniki.getInstance().send("setWindowSize", [width.toString(), height.toString()]);
            };
            Odnoklassniki.getFlashVars = function (base) {
                return Object(base.loaderInfo.parameters);
            };
            Odnoklassniki.getSendObject = function (d) {
                var send_obj = {};
                for (var s in d) {
                    if (d[s])
                        send_obj[s] = d[s];
                }
                return send_obj;
            };
            Odnoklassniki._can_initiate = false;
            return Odnoklassniki;
        }(odnoklassniki.EventDispatcher));
        odnoklassniki.Odnoklassniki = Odnoklassniki;
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        odnoklassniki.Error = global.Error;
        odnoklassniki.XML = global.XML;
        odnoklassniki.CONFIG = global.CONFIG;
        odnoklassniki.ExternalInterfaceAsync = global.ExternalInterfaceAsync;
        odnoklassniki.GLog = global.GLog;
        odnoklassniki.ApiCallbackEvent = api.odnoklassniki.events.ApiCallbackEvent;
        odnoklassniki.ApiServerEvent = api.odnoklassniki.events.ApiServerEvent;
        odnoklassniki.EventDispatcher = flash.events.EventDispatcher;
        odnoklassniki.ExternalInterface = flash.external.ExternalInterface;
        var OdnoklassnikiJSBridge = (function () {
            function OdnoklassnikiJSBridge() {
                throw new odnoklassniki.Error("Abstract class error");
            }
            OdnoklassnikiJSBridge.addEventListener = function (type, listener) {
                if (!OdnoklassnikiJSBridge.dispatcher)
                    OdnoklassnikiJSBridge.dispatcher = new odnoklassniki.EventDispatcher;
                OdnoklassnikiJSBridge.dispatcher.addEventListener(type, listener);
            };
            OdnoklassnikiJSBridge.removeEventListener = function (type, listener) {
                if (!OdnoklassnikiJSBridge.dispatcher)
                    OdnoklassnikiJSBridge.dispatcher = new odnoklassniki.EventDispatcher;
                OdnoklassnikiJSBridge.dispatcher.removeEventListener(type, listener);
            };
            OdnoklassnikiJSBridge.hasEventListener = function (type) {
                if (!OdnoklassnikiJSBridge.dispatcher)
                    OdnoklassnikiJSBridge.dispatcher = new odnoklassniki.EventDispatcher;
                OdnoklassnikiJSBridge.dispatcher.hasEventListener(type);
            };
            OdnoklassnikiJSBridge.initialize = function (appId) {
                try {
                    if (odnoklassniki.ExternalInterface.available) {
                        OdnoklassnikiJSBridge.script_js =
                            "function() {\n\t\t\t\t\t\t\tOKAS = {\n\t\t\t\t\t\t\t logEnabled: true,\n\t\t\t\t\t\t\t logSupported: function () {return OKAS.logEnabled && window.console && window.console.log;},\n\t\n\t\t\t\t\t\t\t setSWFObjectID: function(swfObjectID) {\n\t\t\t\t\t\t\t\tOKAS.swfObjectID = swfObjectID;\n\t\t\t\t\t\t\t },\n\t\t\t\t\n\t\t\t\t\t\t\t getSwf: function () {\n\t\t\t\t\t\t\t\treturn document.getElementById(OKAS.swfObjectID);\n\t\t\t\t\t\t\t },\n\t\t\t\t\n\t\t\t\t\t\t\t init: function (logEnabled)\n\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\t// Log enable\n\t\t\t\t\t\t\t\tOKAS.logEnabled = logEnabled;\n\t\t\t\t\n\t\t\t\t\t\t\t\t// Already inited in the page side\n\t\t\t\t\t\t\t\tOKAS.initSuccess();\n\t\t\t\t\n\t\t\t\t\t\t\t\t// Like\n\t\t\t\t\t\t\t\tvar onShare = function (e) {\n\t\t\t\t\t\t\t\t\tif (e && e.data) {\n\t\t\t\t\t\t\t\t\t\tvar args = e.data.split(\"$\");\n\t\t\t\t\t\t\t\t\t\tif (args[0] == \"ok_shared\") {\n\t\t\t\t\t\t\t\t\t\t\tOKAS.getSwf().API_callback('like', '?result_code=0', null);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (window.addEventListener) window.addEventListener('message', onShare, false);\n\t\t\t\t\t\t\t\telse window.attachEvent('onmessage', onShare);\n\t\t\t\t\t\t\t },\n\t\t\t\t\n\t\t\t\t\t\t\t initSuccess: function ()\n\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\tif (OKAS.logSupported()) trace('[OKAS] init complete');\n\t\t\t\t\t\t\t\tOKAS.getSwf().initSuccess();\n\t\t\t\t\t\t\t },\n\t\t \n\t\t\t\t\t\t\t initError: function (error)\n\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\tif (OKAS.logSupported()) trace('[OKAS] init error');\n\t\t\t\t\t\t\t\tOKAS.getSwf().initError(error);\n\t\t\t\t\t\t\t },\n\t\t \n\t\t\t\t\t\t\t clientCall: function (requestKey, method, params)\n\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\tif (!params) params = {};\n\t\t\t\t\t\t\t\tparams['method'] = method;\n\t\t\t\t\t\t\t\tFAPI.Client.call(params, function (status, params, error) {\n\t\t\t\t\t\t\t\t OKAS.getSwf().clientCallback(requestKey, params, status, error);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t },\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t UICall: function (method, params)\n\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\tswitch (method) {\n\t\t\t\t\t\t\t\t\tcase 'showInvite':\n\t\t\t\t\t\t\t\t\tcase 'showNotification':\n\t\t\t\t\t\t\t\t\t\tFAPI.UI[method](params['message'], params['params'], params['uids']);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'showPayment':\n\t\t\t\t\t\t\t\t\t\tFAPI.UI[method](params['name'], params['description'], params['code'], params['price'], params['options'], params['attributes'], params['currency'], params['callback']);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'postMediatopic':\n\t\t\t\t\t\t\t\t\t\tFAPI.UI[method](params['params'], params['status']);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'like':\n\t\t\t\t\t\t\t\t\t\tvar cb = function (response) {\n\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById('flash-app').API_callback(method, response, null);\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\tif (!window['dialog.' + method]) {\n\t\t\t\t\t\t\t\t\t\t\tcb('?error_code=4201');\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\twindow['dialog.' + method](cb);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tFAPI.UI[method](params);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t }, \n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t }";
                        odnoklassniki.ExternalInterface.call(OdnoklassnikiJSBridge.script_js);
                        odnoklassniki.ExternalInterface.call("OKAS.setSWFObjectID", odnoklassniki.ExternalInterface.objectID);
                    }
                }
                catch (error) {
                    return;
                }
                OdnoklassnikiJSBridge.apiHandlers = new Object;
                OdnoklassnikiJSBridge.supported = true;
                odnoklassniki.ExternalInterface.addCallback("API_callback", apiCallback.bind(this));
                odnoklassniki.ExternalInterface.addCallback("clientCallback", clientCallback.bind(this));
                odnoklassniki.ExternalInterface.addCallback("initSuccess", initSuccess.bind(this));
                odnoklassniki.ExternalInterface.addCallback("initError", initError.bind(this));
                odnoklassniki.ExternalInterface.call("OKAS.init", odnoklassniki.CONFIG.QA_VERSION);
                function clientCallback(requestKey, params, status, error) {
                    if (odnoklassniki.CONFIG.QA_VERSION) {
                        if (params)
                            odnoklassniki.GLog.print("[Odnoklassniki] clientCallback params: " + (typeof params == 'string' ? params : JSON.stringify(params)));
                        if (error)
                            odnoklassniki.GLog.print("[Odnoklassniki] clientCallback error: " + (typeof error == 'string' ? error : JSON.stringify(error)));
                    }
                    OdnoklassnikiJSBridge.callApiHandler(requestKey, params);
                }
                function apiCallback(method, result, data) {
                    if (!OdnoklassnikiJSBridge.dispatcher)
                        return;
                    OdnoklassnikiJSBridge.dispatcher.dispatchEvent(new odnoklassniki.ApiCallbackEvent(odnoklassniki.ApiCallbackEvent.CALL_BACK, false, false, method, result, data));
                }
                function initSuccess() {
                    if (!OdnoklassnikiJSBridge.dispatcher)
                        return;
                    OdnoklassnikiJSBridge.dispatcher.dispatchEvent(new odnoklassniki.ApiServerEvent(odnoklassniki.ApiServerEvent.CONNECTED));
                }
                function initError(error) {
                    if (!OdnoklassnikiJSBridge.dispatcher)
                        return;
                    OdnoklassnikiJSBridge.dispatcher.dispatchEvent(new odnoklassniki.ApiServerEvent(odnoklassniki.ApiServerEvent.CONNECTION_ERROR, error));
                }
            };
            OdnoklassnikiJSBridge.getCurrentUser = function (callback) {
                if (!OdnoklassnikiJSBridge.supported)
                    return;
                odnoklassniki.ExternalInterfaceAsync("OKAS.clientCall", OdnoklassnikiJSBridge.addApiHandler(callback), "users.getCurrentUser");
            };
            OdnoklassnikiJSBridge.getAllFriends = function (callback, uid) {
                if (!OdnoklassnikiJSBridge.supported)
                    return;
                odnoklassniki.ExternalInterfaceAsync("OKAS.clientCall", OdnoklassnikiJSBridge.addApiHandler(callback), "friends.get", OdnoklassnikiJSBridge.safe({ uid: uid }));
            };
            OdnoklassnikiJSBridge.getAppFriends = function (callback) {
                if (!OdnoklassnikiJSBridge.supported)
                    return;
                odnoklassniki.ExternalInterfaceAsync("OKAS.clientCall", OdnoklassnikiJSBridge.addApiHandler(callback), "friends.getAppUsers");
            };
            OdnoklassnikiJSBridge.getInfo = function (uids, fields, callback, emptyPictures) {
                if (emptyPictures === void 0) { emptyPictures = false; }
                if (!OdnoklassnikiJSBridge.supported)
                    return;
                if (!uids)
                    uids = [];
                if (uids.length > 100)
                    uids.length = 100;
                odnoklassniki.ExternalInterfaceAsync("OKAS.clientCall", OdnoklassnikiJSBridge.addApiHandler(callback), "users.getInfo", OdnoklassnikiJSBridge.safe({ uids: uids.join(","), fields: fields.join(","), emptyPictures: emptyPictures }));
            };
            OdnoklassnikiJSBridge.getCallsLeft = function (methods, callback, uid) {
                if (uid === void 0) { uid = ""; }
                if (!OdnoklassnikiJSBridge.supported)
                    return;
                methods = methods || [];
                odnoklassniki.ExternalInterfaceAsync("OKAS.clientCall", OdnoklassnikiJSBridge.addApiHandler(callback), "users.getCallsLeft", OdnoklassnikiJSBridge.safe({ uid: uid, methods: methods.join(",") }));
            };
            OdnoklassnikiJSBridge.getUserGroups = function (uid, count, callback) {
                if (!OdnoklassnikiJSBridge.supported)
                    return;
                odnoklassniki.ExternalInterfaceAsync("OKAS.clientCall", OdnoklassnikiJSBridge.addApiHandler(callback), "group.getUserGroupsV2", OdnoklassnikiJSBridge.safe({ count: count }));
            };
            OdnoklassnikiJSBridge.getLikeSummary = function (likeId, fields, callback) {
                if (!OdnoklassnikiJSBridge.supported)
                    return;
                fields = fields || [];
                odnoklassniki.ExternalInterfaceAsync("OKAS.clientCall", OdnoklassnikiJSBridge.addApiHandler(callback), "like.getSummary", OdnoklassnikiJSBridge.safe({ like_id: likeId, fields: fields.join(",") }));
            };
            OdnoklassnikiJSBridge.showInvite = function (message, params, uids) {
                if (!OdnoklassnikiJSBridge.supported)
                    return;
                odnoklassniki.ExternalInterfaceAsync("OKAS.UICall", "showInvite", { message: message, params: params, uids: uids ? uids.split(",").join(";") : null });
            };
            OdnoklassnikiJSBridge.showNotification = function (message, params, uids) {
                if (!OdnoklassnikiJSBridge.supported)
                    return;
                odnoklassniki.ExternalInterfaceAsync("OKAS.UICall", "showNotification", { message: message, params: params, uids: uids ? uids.split(",").join(";") : null });
            };
            OdnoklassnikiJSBridge.showPayment = function (name, description, code, price, options, attributes, currency, callback) {
                if (price === void 0) { price = -1; }
                if (options === void 0) { options = null; }
                if (attributes === void 0) { attributes = null; }
                if (currency === void 0) { currency = null; }
                if (callback === void 0) { callback = 'false'; }
                if (!OdnoklassnikiJSBridge.supported)
                    return;
                odnoklassniki.ExternalInterfaceAsync("OKAS.UICall", "showPayment", { name: name, description: description, code: code, price: price, options: options, attributes: attributes, currency: currency, callback: callback });
            };
            OdnoklassnikiJSBridge.postMediatopic = function (params, status) {
                if (status === void 0) { status = false; }
                if (!OdnoklassnikiJSBridge.supported)
                    return;
                odnoklassniki.ExternalInterfaceAsync("OKAS.UICall", "postMediatopic", { params: { "media": params }, status: status });
            };
            OdnoklassnikiJSBridge.addApiHandler = function (handler) {
                if (handler == null)
                    return -1;
                OdnoklassnikiJSBridge.apiKey++;
                OdnoklassnikiJSBridge.apiHandlers[OdnoklassnikiJSBridge.apiKey] = handler;
                return OdnoklassnikiJSBridge.apiKey;
            };
            OdnoklassnikiJSBridge.callApiHandler = function (apiKey, data) {
                var handler = OdnoklassnikiJSBridge.apiHandlers[apiKey];
                if (handler == null)
                    return;
                handler(data);
                delete OdnoklassnikiJSBridge.apiHandlers[apiKey];
            };
            OdnoklassnikiJSBridge.safe = function (value) {
                var obj = {};
                for (var s in value)
                    if (value[s])
                        obj[s] = value[s];
                return obj;
            };
            OdnoklassnikiJSBridge.supported = false;
            OdnoklassnikiJSBridge.apiKey = 0;
            return OdnoklassnikiJSBridge;
        }());
        odnoklassniki.OdnoklassnikiJSBridge = OdnoklassnikiJSBridge;
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var datas;
(function (datas) {
    datas.CONFIG = global.CONFIG;
    datas.ASViewer = global.ASViewer;
    datas.Event = flash.events.Event;
    datas.IOErrorEvent = flash.events.IOErrorEvent;
    datas.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    datas.URLLoader = flash.net.URLLoader;
    datas.URLLoaderDataFormat = flash.net.URLLoaderDataFormat;
    datas.URLRequest = flash.net.URLRequest;
    datas.ByteArray = flash.utils.ByteArray;
    var DataFile = (function (_super) {
        __extends(DataFile, _super);
        function DataFile(pack, fid, url, md5, dynamic) {
            var _this = this;
            var pureURL;
            if (dynamic) {
                pureURL = 'imgs' + (pack == 0 ? '/' : pack + '/') + url;
                url = datas.CONFIG.getStorage() + pureURL;
                if (url.indexOf('\\') >= 0)
                    url = url.split('\\').join('/');
            }
            _this = _super.call(this, pack, fid, -1, url, dynamic, md5) || this;
            if (pureURL)
                _this.pureURL = pureURL;
            return _this;
        }
        DataFile.prototype.startLoad = function () {
            if (this.status == datas.DataAbstract.STATUS_LOADING || this.status == datas.DataAbstract.STATUS_COMPLETE) {
                return;
            }
            this.status = datas.DataAbstract.STATUS_LOADING;
            if (this.dynamic) {
                this.loader = new datas.URLLoader;
                this.loader.dataFormat = datas.URLLoaderDataFormat.BINARY;
                this.loader.addEventListener(datas.Event.COMPLETE, this.onLoadComplete.bind(this));
                this.loader.addEventListener(datas.IOErrorEvent.IO_ERROR, this.onError.bind(this));
                this.loader.addEventListener(datas.SecurityErrorEvent.SECURITY_ERROR, this.onError.bind(this));
                this.loader.load(new datas.URLRequest(this.url));
            }
            else {
                datas.AssetsData.loadPack(this.pack, this.onComplete.bind(this));
            }
        };
        DataFile.prototype.onLoadComplete = function (result) {
            if (!this.dynamic) {
                this.onComplete();
                return;
            }
            if (!result) {
                this.onError(new datas.IOErrorEvent(datas.IOErrorEvent.IO_ERROR));
                return;
            }
            var event = this.dynamic ? result : null;
            var bytes = event ? this.loader.data : result;
            if (!bytes) {
                this.onError(new datas.IOErrorEvent(datas.IOErrorEvent.IO_ERROR));
                return;
            }
            datas.ASViewer.writeFile(this.pureURL, new Uint8Array(bytes.buffer), { encoding: 'binary' });
            this.onComplete(event);
        };
        return DataFile;
    }(datas.DataAbstract));
    datas.DataFile = DataFile;
})(datas || (datas = {}));
var flash;
(function (flash) {
    var text;
    (function (text) {
        text.DisplayObject = flash.display.DisplayObject;
        text.Graphics = flash.display.Graphics;
        text.InteractiveObject = flash.display.InteractiveObject;
        text.Event = flash.events.Event;
        text.MouseEvent = flash.events.MouseEvent;
        text.Matrix = flash.geom.Matrix;
        text.Rectangle = flash.geom.Rectangle;
        var TextField = (function (_super) {
            __extends(TextField, _super);
            function TextField() {
                var _this = _super.call(this) || this;
                _this.graphicsDirty = true;
                _this._textFormat = new text.TextFormat;
                _this._width = 100;
                _this._height = 100;
                _this._background = false;
                _this._backgroundColor = 0;
                _this._border = false;
                _this._borderColor = 0;
                _this._rect = new text.Rectangle;
                _this._scrollV = 1;
                _this.graphics = new text.Graphics(_this);
                _this.textColor = 0;
                _this.text = '';
                _this.__updateVertexData();
                _this.addEventListener(text.Event.ADDED_TO_STAGE, _this._onAddedToStage.bind(_this));
                _this.addEventListener(text.Event.REMOVED_FROM_STAGE, _this._onRemovedFromStage.bind(_this));
                return _this;
            }
            TextField.isFontCompatible = function (param1, param2) {
                return false;
            };
            TextField.prototype._onAddedToStage = function (event) {
                this.addEventListener(text.MouseEvent.MOUSE_WHEEL, this._onMouseWheel.bind(this));
            };
            TextField.prototype._onRemovedFromStage = function (event) {
                this.removeEventListener(text.MouseEvent.MOUSE_WHEEL, this._onMouseWheel.bind(this));
            };
            TextField.prototype._onMouseWheel = function (e) {
                if (e.isDefaultPrevented()) {
                    return;
                }
                var delta = e.delta;
                if ((delta < 0 && this.scrollV < this.maxScrollV) || (delta > 0 && this.scrollV > 0)) {
                    this.scrollV -= delta;
                    e.preventDefault();
                }
            };
            Object.defineProperty(TextField.prototype, "alwaysShowSelection", {
                get: function () { return false; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "antiAliasType", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "autoSize", {
                get: function () { return this._autoSize; },
                set: function (param1) {
                    this._autoSize = param1;
                    this.graphicsDirty = true;
                    this.dirtyGraphics();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "background", {
                get: function () { return this._background; },
                set: function (param1) {
                    this._background = param1;
                    this.graphicsDirty = true;
                    this.dirtyGraphics();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "backgroundColor", {
                get: function () { return this._backgroundColor; },
                set: function (param1) {
                    this._backgroundColor = param1;
                    this.graphicsDirty = true;
                    this.dirtyGraphics();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "border", {
                get: function () { return this._border; },
                set: function (param1) {
                    this._border = param1;
                    this.graphicsDirty = true;
                    this.dirtyGraphics();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "borderColor", {
                get: function () { return this._borderColor; },
                set: function (param1) {
                    this._borderColor = param1;
                    this.graphicsDirty = true;
                    this.dirtyGraphics();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "bottomScrollV", {
                get: function () { return 0; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "caretIndex", {
                get: function () { return 0; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "condenseWhite", {
                get: function () { return false; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "defaultTextFormat", {
                get: function () { return this._textFormat; },
                set: function (value) {
                    this._textFormat = value;
                    this.scrollV = this.scrollV;
                    this.graphicsDirty = true;
                    this.dirtyGraphics();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "embedFonts", {
                get: function () { return false; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "gridFitType", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "htmlText", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "length", {
                get: function () { return this._text.length; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "textInteractionMode", {
                get: function () { return null; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "maxChars", {
                get: function () { return 0; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "maxScrollH", {
                get: function () { return 0; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "maxScrollV", {
                get: function () {
                    return Math.max(this.lines.length - int(this.height / this._lineHeight), 1);
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "mouseWheelEnabled", {
                get: function () { return false; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "multiline", {
                get: function () { return false; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "numLines", {
                get: function () { return this.lines ? this.lines.length : 0; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "displayAsPassword", {
                get: function () { return false; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "restrict", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "scrollH", {
                get: function () {
                    return 0;
                },
                set: function (param1) {
                    this.dirtyGraphics();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "scrollV", {
                get: function () {
                    return this._scrollV;
                },
                set: function (index) {
                    this._scrollV = index;
                    if (this._scrollV < 1)
                        this._scrollV = 1;
                    if (this._scrollV > this.maxScrollV)
                        this._scrollV = this.maxScrollV;
                    this.dirtyGraphics();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "selectable", {
                get: function () { return false; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "selectedText", {
                get: function () {
                    return this.text.substring(this.selectionBeginIndex, this.selectionEndIndex);
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "selectionBeginIndex", {
                get: function () { return 0; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "selectionEndIndex", {
                get: function () { return 0; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "sharpness", {
                get: function () { return 0; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "styleSheet", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "text", {
                get: function () {
                    return this._text;
                },
                set: function (txt) {
                    txt = txt || '';
                    this._text = txt;
                    this.lines = txt.split("\n");
                    this.scrollV = this.scrollV;
                    this.dirtyGraphics();
                    this.graphicsDirty = true;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "textColor", {
                get: function () { return int(this._textFormat.color); },
                set: function (color) {
                    this._textFormat.color = color;
                    this.graphicsDirty = true;
                    this.dirtyGraphics();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "textHeight", {
                get: function () {
                    return this.lines ? int(this.defaultTextFormat.size) * this.lines.length : 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "textWidth", {
                get: function () {
                    if (this.stage && this.lines) {
                        var ctx = this.stage.ctx2d;
                        ctx.font = this.defaultTextFormat.css;
                        var w = 0;
                        for (var i = 0; i < this.lines.length; i++) {
                            var w2 = ctx.measureText(this.lines[i]).width;
                            if (w2 > w) {
                                w = w2;
                            }
                        }
                        return w;
                    }
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "thickness", {
                get: function () { return 0; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "type", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "wordWrap", {
                get: function () { return false; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            TextField.prototype.appendText = function (newText) {
                this.replaceText(this.text.length, this.text.length, newText);
            };
            Object.defineProperty(TextField.prototype, "width", {
                get: function () {
                    return this.autoSize == text.TextFieldAutoSize.LEFT ? (this.textWidth + 4) : this._width;
                },
                set: function (value) {
                    this._width = value;
                    this.__updateVertexData();
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TextField.prototype, "height", {
                get: function () {
                    return this.autoSize == text.TextFieldAutoSize.LEFT ? (this.textHeight + 2) : this._height;
                },
                set: function (value) {
                    this._height = value;
                    this.__updateVertexData();
                },
                enumerable: true,
                configurable: true
            });
            TextField.prototype.getRect = function (targetSpace, resultRect) {
                if (resultRect === void 0) { resultRect = null; }
                return this.displayObjectGetRect(targetSpace, resultRect);
            };
            TextField.prototype.getCharBoundaries = function (param1) { return null; };
            TextField.prototype.getCharIndexAtPoint = function (param1, param2) { return 0; };
            TextField.prototype.getCharIndexNearestPoint = function (param1, param2) { return 0; };
            TextField.prototype.getFirstCharInParagraph = function (param1) { return 0; };
            TextField.prototype.getLineIndexAtPoint = function (param1, param2) { return 0; };
            TextField.prototype.getLineIndexOfChar = function (param1) { return 0; };
            TextField.prototype.getLineLength = function (param1) { return 0; };
            TextField.prototype.getLineMetrics = function (param1) { return null; };
            TextField.prototype.getLineOffset = function (param1) { return 0; };
            TextField.prototype.getLineText = function (param1) { return null; };
            TextField.prototype.getParagraphLength = function (param1) { return 0; };
            TextField.prototype.getTextFormat = function (param1, param2) {
                if (param1 === void 0) { param1 = -1; }
                if (param2 === void 0) { param2 = -1; }
                return this._textFormat;
            };
            TextField.prototype.getTextRuns = function (param1, param2) {
                if (param1 === void 0) { param1 = 0; }
                if (param2 === void 0) { param2 = 2147483647; }
                return null;
            };
            TextField.prototype.getRawText = function () { return null; };
            TextField.prototype.replaceSelectedText = function (param1) { };
            TextField.prototype.replaceText = function (beginIndex, endIndex, newText) {
                this.text = this._text.substr(0, beginIndex) + newText + this._text.substr(endIndex);
            };
            TextField.prototype.setSelection = function (param1, param2) { };
            TextField.prototype.setTextFormat = function (param1, param2, param3) {
                if (param2 === void 0) { param2 = -1; }
                if (param3 === void 0) { param3 = -1; }
                this._textFormat = param1;
            };
            TextField.prototype.getImageReference = function (param1) { return null; };
            Object.defineProperty(TextField.prototype, "useRichTextClipboard", {
                get: function () { return false; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            TextField.prototype.__update = function (ctx) {
                _super.prototype.__update.call(this, ctx);
                if (this._text != null && this.visible) {
                    this.mScrollRect = this.mScrollRect || new text.Rectangle();
                    this.mScrollRect.copyFrom(this._rect);
                    if (this.border || this.background) {
                        this.mScrollRect.x--;
                        this.mScrollRect.y--;
                        this.mScrollRect.width++;
                        this.mScrollRect.height++;
                    }
                    var m = this.transform.concatenatedMatrix;
                    this.__beginClipRect(ctx, m);
                    this.__draw(ctx, m);
                    this.__endClipRect(ctx);
                }
            };
            TextField.prototype.__draw = function (ctx, m) {
                if (this.border || this.background) {
                    if (this.graphicsDirty) {
                        this.graphicsDirty = false;
                        this.graphics.clear();
                        if (this.border) {
                            this.graphics.lineStyle(0, this.borderColor);
                        }
                        if (this.background) {
                            this.graphics.beginFill(this.backgroundColor);
                        }
                        this.graphics.drawRect(0, 0, this.width, this.height);
                    }
                    this.graphics.draw(ctx, m, this.blendMode, this.transform.concatenatedColorTransform);
                }
                var w = this.width;
                var h = this.height;
                var lineHeight = this._lineHeight;
                var indent = this.defaultTextFormat.indent;
                var num = this._scrollV - 1;
                for (var i = num; i < this.lines.length; i++) {
                    var y = (i - num) * lineHeight;
                    if (y + lineHeight >= h) {
                        break;
                    }
                    this.stage.renderer.renderText(ctx, this.lines[i], this.defaultTextFormat, m, this.blendMode, this.transform.concatenatedColorTransform, indent + 1, y + 2);
                }
            };
            Object.defineProperty(TextField.prototype, "_lineHeight", {
                get: function () {
                    return this.flashFontLeading(this.defaultTextFormat.size) + this.defaultTextFormat.leading;
                },
                enumerable: true,
                configurable: true
            });
            TextField.prototype.__getRect = function () {
                return this._rect;
            };
            TextField.prototype.__doMouse = function (e) {
                if (this.visible) {
                    var obj = _super.prototype.__doMouse.call(this, e);
                    if (obj) {
                        return obj;
                    }
                    if (this.hitTestPoint(this.stage.mouseX, this.stage.mouseY)) {
                        return this;
                    }
                }
                return null;
            };
            TextField.prototype.flashFontLeading = function (fontSize) {
                if (fontSize == 2)
                    return fontSize;
                if (fontSize == 3)
                    return fontSize * 1.5;
                if (fontSize > 3 && fontSize < 10)
                    return fontSize * 1.25;
                return int(fontSize * 1.13);
            };
            TextField.prototype.__updateVertexData = function () {
                this._rect.setTo(0, 0, this.width, this.height);
                _super.prototype.__updateVertexData.call(this);
            };
            TextField.richTextFields = ["font", "size", "color", "bold", "italic", "underline", "url", "target", "align", "leftMargin", "rightMargin", "indent", "leading", "blockIndent", "kerning", "letterSpacing", "display"];
            return TextField;
        }(text.InteractiveObject));
        text.TextField = TextField;
    })(text = flash.text || (flash.text = {}));
})(flash || (flash = {}));
var s3eUtils;
(function (s3eUtils) {
    s3eUtils.Error = global.Error;
    s3eUtils.Event = flash.events.Event;
    s3eUtils.IOErrorEvent = flash.events.IOErrorEvent;
    s3eUtils.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    s3eUtils.URLLoader = flash.net.URLLoader;
    s3eUtils.URLRequest = flash.net.URLRequest;
    s3eUtils.URLRequestHeader = flash.net.URLRequestHeader;
    s3eUtils.URLRequestMethod = flash.net.URLRequestMethod;
    s3eUtils.Dictionary = flash.utils.Dictionary;
    s3eUtils.clearTimeout = flash.utils.clearTimeout;
    s3eUtils.setTimeout = flash.utils.setTimeout;
    var Parse = (function () {
        function Parse(app, key, api) {
            this.app = app;
            this.key = key;
            this.api = api || Parse.PARSE;
            this.map = new s3eUtils.Dictionary;
        }
        Parse.isCloudURL = function (url) {
            return url && url.indexOf("parse") != -1 && url.indexOf("functions") != -1;
        };
        Parse.prototype.Send = function (url, method, params, where, success, error) {
            if (params === void 0) { params = null; }
            if (where === void 0) { where = null; }
            if (success === void 0) { success = null; }
            if (error === void 0) { error = null; }
            var interval = 0;
            var xhr = new s3eUtils.URLLoader();
            var req = new s3eUtils.URLRequest(url);
            if (where != null) {
                if (params == null) {
                    params = {};
                }
                params['where'] = JSON.stringify(where);
            }
            if (params)
                req.data = JSON.stringify(params);
            req.contentType = Parse.TYPE;
            req.method = method;
            req.requestHeaders.push(new s3eUtils.URLRequestHeader('X-Parse-Application-Id', this.app));
            req.requestHeaders.push(new s3eUtils.URLRequestHeader('X-Parse-REST-API-Key', this.key));
            req.requestHeaders.push(new s3eUtils.URLRequestHeader('X-HTTP-Method-Override', method));
            xhr.addEventListener(s3eUtils.Event.COMPLETE, onComplete.bind(this));
            xhr.addEventListener(s3eUtils.IOErrorEvent.IO_ERROR, onError.bind(this));
            xhr.addEventListener(s3eUtils.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
            function onComplete(e) {
                s3eUtils.clearTimeout(interval);
                var responseStr = xhr.data;
                xhr.removeEventListener(s3eUtils.Event.COMPLETE, onComplete.bind(this));
                xhr.removeEventListener(s3eUtils.IOErrorEvent.IO_ERROR, onError.bind(this));
                xhr.removeEventListener(s3eUtils.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
                try {
                    xhr.close();
                }
                catch (e) { }
                this.map.delete(xhr);
                if (success != null) {
                    success(safeResponse.bind(this)(responseStr));
                }
            }
            function onError(e) {
                if (e === void 0) { e = null; }
                s3eUtils.clearTimeout(interval);
                var responseStr = xhr.data;
                xhr.removeEventListener(s3eUtils.Event.COMPLETE, onComplete.bind(this));
                xhr.removeEventListener(s3eUtils.IOErrorEvent.IO_ERROR, onError.bind(this));
                xhr.removeEventListener(s3eUtils.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
                try {
                    xhr.close();
                }
                catch (e) { }
                this.map.delete(xhr);
                if (error != null) {
                    error(safeResponse.bind(this)(responseStr));
                }
            }
            function safeResponse(value) {
                if (!value) {
                    return null;
                }
                try {
                    return JSON.parse(value);
                }
                catch (e) { }
                return null;
            }
            interval = s3eUtils.setTimeout(onError.bind(this), Parse.TIMEOUT);
            xhr.load(req);
            this.map.set(xhr, true);
        };
        Parse.prototype.Call = function (className, params, success, error) {
            if (params === void 0) { params = null; }
            if (success === void 0) { success = null; }
            if (error === void 0) { error = null; }
            var url = this.api + 'functions/' + className;
            if (params && !('api' in params))
                params['api'] = { version: Parse.INTERNAL_API_VERSION };
            if (params && this.guest && !('guest' in params))
                params['guest'] = this.guest;
            this.Send(url, s3eUtils.URLRequestMethod.POST, params, null, success, error);
        };
        Parse.PARSE = "https://api.parse.com/1/";
        Parse.TYPE = 'application/json';
        Parse.TIMEOUT = 20 * 1000;
        Parse.INTERNAL_API_VERSION = 1.6;
        return Parse;
    }());
    s3eUtils.Parse = Parse;
})(s3eUtils || (s3eUtils = {}));
var deng;
(function (deng) {
    var fzip;
    (function (fzip) {
        fzip.Error = global.Error;
        fzip.Event = flash.events.Event;
        fzip.EventDispatcher = flash.events.EventDispatcher;
        fzip.IOErrorEvent = flash.events.IOErrorEvent;
        fzip.Bitmap = flash.display.Bitmap;
        fzip.BitmapData = flash.display.BitmapData;
        fzip.DisplayObject = flash.display.DisplayObject;
        fzip.Loader = flash.display.Loader;
        fzip.ByteArray = flash.utils.ByteArray;
        var FZipLibrary = (function (_super) {
            __extends(FZipLibrary, _super);
            function FZipLibrary() {
                var _this = _super.call(this) || this;
                _this.pendingFiles = [];
                _this.pendingZips = [];
                _this.currentState = 0;
                _this.bitmapDataFormat = /[]/;
                _this.displayObjectFormat = /[]/;
                _this.bitmapDataList = {};
                _this.displayObjectList = {};
                return _this;
            }
            FZipLibrary.prototype.addZip = function (zip) {
                this.pendingZips.unshift(zip);
                this.processNext();
            };
            FZipLibrary.prototype.formatAsBitmapData = function (ext) {
                this.bitmapDataFormat = this.addExtension(this.bitmapDataFormat, ext);
            };
            FZipLibrary.prototype.formatAsDisplayObject = function (ext) {
                this.displayObjectFormat = this.addExtension(this.displayObjectFormat, ext);
            };
            FZipLibrary.prototype.addExtension = function (original, ext) {
                return new RegExp(ext.replace(/[^A-Za-z0-9]/, "\\$&") + "$|" + original.source);
            };
            FZipLibrary.prototype.getBitmapData = function (filename) {
                if (!this.bitmapDataList[filename] instanceof fzip.BitmapData) {
                    throw new fzip.Error("File \"" + filename + "\" was not found as a BitmapData");
                }
                return this.bitmapDataList[filename];
            };
            FZipLibrary.prototype.getDisplayObject = function (filename) {
                if (!this.displayObjectList.hasOwnProperty(filename)) {
                    throw new ReferenceError("File \"" + filename + "\" was not found as a DisplayObject");
                }
                return this.displayObjectList[filename];
            };
            FZipLibrary.prototype.getDefinition = function (filename, definition) {
                if (!this.displayObjectList.hasOwnProperty(filename)) {
                    throw new ReferenceError("File \"" + filename + "\" was not found as a DisplayObject, ");
                }
                var disp = this.displayObjectList[filename];
                try {
                    return disp.loaderInfo.applicationDomain.getDefinition(definition);
                }
                catch (e) {
                    throw new ReferenceError("Definition \"" + definition + "\" in file \"" + filename + "\" could not be retrieved: " + e.message);
                }
                return null;
            };
            FZipLibrary.prototype.processNext = function (evt) {
                if (evt === void 0) { evt = null; }
                while (this.currentState === 0) {
                    if (this.pendingFiles.length > 0) {
                        var nextFile = this.pendingFiles.pop();
                        if (this.bitmapDataFormat.test(nextFile.filename)) {
                            this.currentState |= FZipLibrary.FORMAT_BITMAPDATA;
                        }
                        if (this.displayObjectFormat.test(nextFile.filename)) {
                            this.currentState |= FZipLibrary.FORMAT_DISPLAYOBJECT;
                        }
                        if ((this.currentState & (FZipLibrary.FORMAT_BITMAPDATA | FZipLibrary.FORMAT_DISPLAYOBJECT)) !== 0) {
                            this.currentFilename = nextFile.filename;
                            this.currentLoader = new fzip.Loader();
                            this.currentLoader.contentLoaderInfo.addEventListener(fzip.Event.COMPLETE, this.loaderCompleteHandler.bind(this));
                            this.currentLoader.contentLoaderInfo.addEventListener(fzip.IOErrorEvent.IO_ERROR, this.loaderCompleteHandler.bind(this));
                            var content = nextFile.content;
                            content.position = 0;
                            this.currentLoader.loadBytes(content);
                            break;
                        }
                    }
                    else if (this.currentZip == null) {
                        if (this.pendingZips.length > 0) {
                            this.currentZip = this.pendingZips.pop();
                            var i = this.currentZip.getFileCount();
                            while (i > 0) {
                                this.pendingFiles.push(this.currentZip.getFileAt(--i));
                            }
                            if (this.currentZip.active) {
                                this.currentZip.addEventListener(fzip.Event.COMPLETE, this.zipCompleteHandler.bind(this));
                                this.currentZip.addEventListener(fzip.FZipEvent.FILE_LOADED, this.fileCompleteHandler.bind(this));
                                this.currentZip.addEventListener(fzip.FZipErrorEvent.PARSE_ERROR, this.zipCompleteHandler.bind(this));
                                break;
                            }
                            else {
                                this.currentZip = null;
                            }
                        }
                        else {
                            this.dispatchEvent(new fzip.Event(fzip.Event.COMPLETE));
                            break;
                        }
                    }
                    else {
                        break;
                    }
                }
            };
            FZipLibrary.prototype.loaderCompleteHandler = function (evt) {
                if ((this.currentState & FZipLibrary.FORMAT_BITMAPDATA) === FZipLibrary.FORMAT_BITMAPDATA) {
                    if (this.currentLoader.content instanceof fzip.Bitmap && this.currentLoader.content.bitmapData instanceof fzip.BitmapData) {
                        var bitmapData = this.currentLoader.content.bitmapData;
                        this.bitmapDataList[this.currentFilename] = bitmapData.clone();
                    }
                    else if (this.currentLoader.content instanceof fzip.DisplayObject) {
                        var width = uint(this.currentLoader.content.width);
                        var height = uint(this.currentLoader.content.height);
                        if (width && height) {
                            var bitmapData2 = new fzip.BitmapData(width, height, true, 0x00000000);
                            bitmapData2.draw(this.currentLoader);
                            this.bitmapDataList[this.currentFilename] = bitmapData2;
                        }
                        else {
                            trace("File \"" + this.currentFilename + "\" could not be converted to BitmapData");
                        }
                    }
                    else {
                        trace("File \"" + this.currentFilename + "\" could not be converted to BitmapData");
                    }
                }
                if ((this.currentState & FZipLibrary.FORMAT_DISPLAYOBJECT) === FZipLibrary.FORMAT_DISPLAYOBJECT) {
                    if (this.currentLoader.content instanceof fzip.DisplayObject) {
                        this.displayObjectList[this.currentFilename] = this.currentLoader.content;
                    }
                    else {
                        this.currentLoader.unload();
                        trace("File \"" + this.currentFilename + "\" could not be loaded as a DisplayObject");
                    }
                }
                else {
                    this.currentLoader.unload();
                }
                this.currentLoader = null;
                this.currentFilename = "";
                this.currentState &= ~(FZipLibrary.FORMAT_BITMAPDATA | FZipLibrary.FORMAT_DISPLAYOBJECT);
                this.processNext();
            };
            FZipLibrary.prototype.fileCompleteHandler = function (evt) {
                this.pendingFiles.unshift(evt.file);
                this.processNext();
            };
            FZipLibrary.prototype.zipCompleteHandler = function (evt) {
                this.currentZip.removeEventListener(fzip.Event.COMPLETE, this.zipCompleteHandler.bind(this));
                this.currentZip.removeEventListener(fzip.FZipEvent.FILE_LOADED, this.fileCompleteHandler.bind(this));
                this.currentZip.removeEventListener(fzip.FZipErrorEvent.PARSE_ERROR, this.zipCompleteHandler.bind(this));
                this.currentZip = null;
                this.processNext();
            };
            FZipLibrary.FORMAT_BITMAPDATA = (1 << 0);
            FZipLibrary.FORMAT_DISPLAYOBJECT = (1 << 1);
            return FZipLibrary;
        }(fzip.EventDispatcher));
        fzip.FZipLibrary = FZipLibrary;
    })(fzip = deng.fzip || (deng.fzip = {}));
})(deng || (deng = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.Error = global.Error;
        display.BitmapFilter = flash.filters.BitmapFilter;
        display.ColorTransform = flash.geom.ColorTransform;
        display.Matrix = flash.geom.Matrix;
        display.Point = flash.geom.Point;
        display.Rectangle = flash.geom.Rectangle;
        display.Base64 = flash.utils.Base64;
        display.ByteArray = flash.utils.ByteArray;
        var BitmapData = (function () {
            function BitmapData(width, height, transparent, fillColor) {
                if (transparent === void 0) { transparent = true; }
                if (fillColor === void 0) { fillColor = 0xffffffff; }
                this.is_IBitmapDrawable = null;
                this._lock = false;
                this._transparent = false;
                this._width = 0;
                this._height = 0;
                this.ctor(width, height, transparent, fillColor);
            }
            BitmapData.prototype.ctor = function (width, height, transparent, fillColor) {
                if (transparent === void 0) { transparent = true; }
                if (fillColor === void 0) { fillColor = 0xffffffff; }
                this._transparent = transparent;
                this.image = document.createElement("canvas");
                this.image.width = this._width = width;
                this.image.height = this._height = height;
                this.ctx = this.image.getContext("2d");
                this.imageData = this.ctx.getImageData(0, 0, width, height);
                this.data = this.imageData.data;
                this.fillRect(this.rect, fillColor);
            };
            BitmapData.prototype.fromImage = function (img, m) {
                if (m === void 0) { m = null; }
                if (m) {
                    this.ctx.setTransform(m.a, m.b, m.c, m.d, m.tx, m.ty);
                }
                this.ctx.drawImage(img, 0, 0);
                this.imageData = this.ctx.getImageData(0, 0, this.width, this.height);
                this.data = this.imageData.data;
                this.dirty();
            };
            BitmapData.prototype.clone = function () { return null; };
            Object.defineProperty(BitmapData.prototype, "width", {
                get: function () { return this._width; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(BitmapData.prototype, "height", {
                get: function () { return this._height; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(BitmapData.prototype, "transparent", {
                get: function () { return this._transparent; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(BitmapData.prototype, "rect", {
                get: function () {
                    return new display.Rectangle(0, 0, this.width, this.height);
                },
                enumerable: true,
                configurable: true
            });
            BitmapData.prototype.applyFilter = function (sourceBitmapData, sourceRect, destPoint, filter) {
            };
            BitmapData.prototype.getPixel = function (x, y) {
                var p = (y * this.width + x) * 4;
                return (this.data[p] << 16) | (this.data[p + 1] << 8) | this.data[p + 2];
            };
            BitmapData.prototype.getPixel32 = function (x, y) {
                var p = (y * this.width + x) * 4;
                return (this.data[p + 3] << 24) | (this.data[p] << 16) | (this.data[p + 1] << 8) | this.data[p + 2];
            };
            BitmapData.prototype.setPixel = function (x, y, color) {
                var p = (y * this.width + x) * 4;
                this.data[p] = (color >> 16) & 0xff;
                this.data[p + 1] = (color >> 8) & 0xff;
                this.data[p + 2] = color & 0xff;
                if (!this._lock) {
                    this.ctx.putImageData(this.imageData, 0, 0);
                    this.dirty();
                }
            };
            BitmapData.prototype.setPixel32 = function (x, y, color) {
                var p = (y * this.width + x) * 4;
                this.data[p] = (color >> 16) & 0xff;
                this.data[p + 1] = (color >> 8) & 0xff;
                this.data[p + 2] = color & 0xff;
                this.data[p + 3] = color >>> 24;
                if (!this._lock) {
                    this.ctx.putImageData(this.imageData, 0, 0);
                    this.dirty();
                }
            };
            BitmapData.prototype.colorTransform = function (rect, ct) {
            };
            BitmapData.prototype.compare = function (b) {
                return null;
            };
            BitmapData.prototype.copyChannel = function (b, r, p, param4, param5) {
            };
            BitmapData.prototype.copyPixels = function (sourceBitmapData, sourceRect, destPoint, alphaBitmapData, alphaPoint, mergeAlpha) {
                if (alphaBitmapData === void 0) { alphaBitmapData = null; }
                if (alphaPoint === void 0) { alphaPoint = null; }
                if (mergeAlpha === void 0) { mergeAlpha = false; }
                this.lock();
                for (var x = 0; x < sourceRect.width; x++) {
                    for (var y = 0; y < sourceRect.height; y++) {
                        this.setPixel32(x + destPoint.x, y + destPoint.y, sourceBitmapData.getPixel32(x + sourceRect.x, y + sourceRect.y));
                    }
                }
                this.unlock();
            };
            BitmapData.prototype.dispose = function () {
                this.image = null;
                this.ctx = null;
                this.dirtyGraphics = null;
                this.data = null;
                this.imageData = null;
                this._width = this._height = 0;
            };
            BitmapData.prototype.draw = function (source, matrix, colorTransform, blendMode, clipRect, smoothing) {
                if (matrix === void 0) { matrix = null; }
                if (colorTransform === void 0) { colorTransform = null; }
                if (blendMode === void 0) { blendMode = null; }
                if (clipRect === void 0) { clipRect = null; }
                if (smoothing === void 0) { smoothing = false; }
                this.drawWithQuality(source, matrix, colorTransform, blendMode, clipRect, smoothing);
            };
            BitmapData.prototype.drawWithQuality = function (source, matrix, colorTransform, blendMode, clipRect, smoothing, quality) {
                if (matrix === void 0) { matrix = null; }
                if (colorTransform === void 0) { colorTransform = null; }
                if (blendMode === void 0) { blendMode = null; }
                if (clipRect === void 0) { clipRect = null; }
                if (smoothing === void 0) { smoothing = false; }
                if (quality === void 0) { quality = null; }
                if (source instanceof BitmapData) {
                    var bmd = source;
                    this.fromImage(bmd.image, matrix);
                }
            };
            BitmapData.prototype.encode = function (rect, compressor, byteArray) {
                if (byteArray === void 0) { byteArray = null; }
                var mime;
                var quality = 100;
                if (compressor instanceof display.PNGEncoderOptions) {
                    mime = 'image/png';
                }
                if (compressor instanceof display.JPEGEncoderOptions) {
                    mime = 'image/jpeg';
                    quality = compressor.quality;
                }
                if (compressor instanceof display.JPEGXREncoderOptions) {
                    throw new display.Error('JPEGXREncoderOptions is not implemented');
                }
                if (mime) {
                    var dataURL = this.image.toDataURL(mime, int(quality / 100));
                    var tmp = display.Base64.decode(dataURL.substr(dataURL.indexOf(',') + 1));
                    return byteArray ? byteArray.fromByteArray(tmp) : tmp;
                }
                return null;
            };
            BitmapData.prototype.fillRect = function (rect, fillColor) {
                this.lock();
                var _w = rect.width;
                var _h = rect.height;
                for (var y = 0; y < _h; ++y) {
                    for (var x = 0; x < _w; ++x) {
                        this.setPixel32(x, y, this.transparent ? fillColor : (0xff000000 | fillColor));
                    }
                }
                this.unlock();
            };
            BitmapData.prototype.floodFill = function (x, y, color) { };
            BitmapData.prototype.generateFilterRect = function (sourceRect, filter) {
                return null;
            };
            BitmapData.prototype.getColorBoundsRect = function (mask, color, findColor) {
                if (findColor === void 0) { findColor = true; }
                return null;
            };
            BitmapData.prototype.getPixels = function (rect) {
                var dest = new display.ByteArray;
                var _x = rect.x, _y = rect.y, _w = rect.width, _h = rect.height;
                for (var y = _y; y < _h; ++y) {
                    for (var x = _x; x < _w; ++x) {
                        if (this._transparent) {
                            dest.writeUnsignedInt(this.getPixel32(x, y));
                        }
                        else {
                            dest.writeInt(this.getPixel(x, y));
                        }
                    }
                }
                return dest;
            };
            BitmapData.prototype.copyPixelsToByteArray = function (param1, param2) { };
            BitmapData.prototype.getVector = function (param1) { return null; };
            BitmapData.prototype.hitTest = function (firstPoint, firstAlphaThreshold, secondObject, secondBitmapDataPoint, secondAlphaThreshold) {
                if (secondBitmapDataPoint === void 0) { secondBitmapDataPoint = null; }
                if (secondAlphaThreshold === void 0) { secondAlphaThreshold = 1; }
                return false;
            };
            BitmapData.prototype.merge = function (sourceBitmapData, sourceRect, destPoint, redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier) { };
            BitmapData.prototype.noise = function (randomSeed, low, high, channelOptions, grayScale) {
                if (low === void 0) { low = 0; }
                if (high === void 0) { high = 255; }
                if (channelOptions === void 0) { channelOptions = 7; }
                if (grayScale === void 0) { grayScale = false; }
                this.lock();
                for (var y = 0; y < this.height; ++y) {
                    for (var x = 0; x < this.width; ++x) {
                        this.setPixel32(x, y, 0xff000000 | 0xffffff * Math.random());
                    }
                }
                this.unlock();
            };
            BitmapData.prototype.paletteMap = function (sourceBitmapData, sourceRect, destPoint, redArray, greenArray, blueArray, alphaArray) {
                if (redArray === void 0) { redArray = null; }
                if (greenArray === void 0) { greenArray = null; }
                if (blueArray === void 0) { blueArray = null; }
                if (alphaArray === void 0) { alphaArray = null; }
            };
            BitmapData.prototype.perlinNoise = function (baseX, baseY, numOctaves, randomSeed, stitch, fractalNoise, channelOptions, grayScale, offsets) {
                if (channelOptions === void 0) { channelOptions = 7; }
                if (grayScale === void 0) { grayScale = false; }
                if (offsets === void 0) { offsets = null; }
                var perm = [151, 160, 137, 91, 90, 15,
                    131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23,
                    190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33,
                    88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166,
                    77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244,
                    102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196,
                    135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123,
                    5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42,
                    223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9,
                    129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228,
                    251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107,
                    49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254,
                    138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180];
                var bw = this.width;
                var bh = this.height;
                var vec = new Array();
                for (var i = 0; i < bw * bh; i++) {
                    vec[i] = 0;
                }
                var octaves = numOctaves;
                while (true) {
                    baseX = int(baseX);
                    baseY = int(baseY);
                    if (octaves <= 0 || baseX <= 1 || baseY <= 1) {
                        break;
                    }
                    var nx = Math.ceil(bw / baseX);
                    var ny = Math.ceil(bh / baseY);
                    for (var y = 0; y <= ny; y++) {
                        for (var x = 0; x <= nx; x++) {
                            if (x != 0 && y != 0) {
                                var r00 = perm[((x - 1) % 16) + ((y - 1) % 16) * 16];
                                var r10 = perm[(x % 16) + ((y - 1) % 16) * 16];
                                var r01 = perm[((x - 1) % 16) + (y % 16) * 16];
                                var r11 = perm[(x % 16) + (y % 16) * 16];
                                var w = x * baseX;
                                if (w > bw) {
                                    w = bw;
                                }
                                var h = y * baseY;
                                if (h > bh) {
                                    h = bh;
                                }
                                var sx = (x - 1) * baseX;
                                var sy = (y - 1) * baseY;
                                for (var bx = sx; bx < w; bx++) {
                                    var tx = (bx - sx) / baseX;
                                    tx = tx * tx * (3 - 2 * tx);
                                    for (var by = sy; by < h; by++) {
                                        var ty = (by - sy) / baseY;
                                        ty = ty * ty * (3 - 2 * ty);
                                        var cx0 = r10 * tx + r00 * (1 - tx);
                                        var cx1 = r11 * tx + r01 * (1 - tx);
                                        var c = cx1 * ty + cx0 * (1 - ty);
                                        vec[bx + by * bw] += c / numOctaves;
                                    }
                                }
                            }
                        }
                    }
                    octaves--;
                    baseX /= 2;
                    baseY /= 2;
                }
                this.setVector(this.rect, vec);
            };
            BitmapData.prototype.pixelDissolve = function (sourceBitmapData, sourceRect, destPoint, randomSeed, numPixels, fillColor) {
                if (randomSeed === void 0) { randomSeed = 0; }
                if (numPixels === void 0) { numPixels = 0; }
                if (fillColor === void 0) { fillColor = 0; }
                return 0;
            };
            BitmapData.prototype.scroll = function (x, y) { };
            BitmapData.prototype.setPixels = function (rect, inputByteArray) {
                var _x = rect.x, _y = rect.y, _w = rect.width, _h = rect.height;
                for (var y = _y; y < _h; ++y) {
                    for (var x = _x; x < _w; ++x) {
                        if (this._transparent) {
                            this.setPixel32(x, y, inputByteArray.readUnsignedInt());
                        }
                        else {
                            this.setPixel(x, y, inputByteArray.readInt());
                        }
                    }
                }
            };
            BitmapData.prototype.setVector = function (param1, param2) {
                this.lock();
                for (var x = 0; x < this.width; x++) {
                    for (var y = 0; y < this.height; y++) {
                        this.setPixel(x, y, param2[x + y * this.width]);
                    }
                }
                this.unlock();
            };
            BitmapData.prototype.threshold = function (sourceBitmapData, sourceRect, destPoint, operation, threshold, color, mask, copySource) {
                if (color === void 0) { color = 0; }
                if (mask === void 0) { mask = 0xFFFFFFFF; }
                if (copySource === void 0) { copySource = false; }
                return 0;
            };
            BitmapData.prototype.lock = function () {
                this._lock = true;
            };
            BitmapData.prototype.unlock = function (changeRect) {
                if (changeRect === void 0) { changeRect = null; }
                this._lock = false;
                this.ctx.putImageData(this.imageData, 0, 0);
                this.dirty();
            };
            BitmapData.prototype.histogram = function (hRect) {
                if (hRect === void 0) { hRect = null; }
                return null;
            };
            BitmapData.prototype.dirty = function () {
                if (this.dirtyGraphics != null)
                    this.dirtyGraphics();
                if (this.image)
                    this.image._dirtyTexture = true;
            };
            return BitmapData;
        }());
        display.BitmapData = BitmapData;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var com;
(function (com) {
    var facebook;
    (function (facebook) {
        var graph;
        (function (graph) {
            var net;
            (function (net) {
                net.FacebookURLDefaults = com.facebook.graph.core.FacebookURLDefaults;
                net.Batch = com.facebook.graph.data.Batch;
                net.BatchItem = com.facebook.graph.data.BatchItem;
                net.PostRequest = com.facebook.graph.utils.PostRequest;
                net.Bitmap = flash.display.Bitmap;
                net.BitmapData = flash.display.BitmapData;
                net.PNGEncoderOptions = flash.display.PNGEncoderOptions;
                net.URLRequest = flash.net.URLRequest;
                net.URLRequestMethod = flash.net.URLRequestMethod;
                net.URLVariables = flash.net.URLVariables;
                net.ByteArray = flash.utils.ByteArray;
                var FacebookBatchRequest = (function (_super) {
                    __extends(FacebookBatchRequest, _super);
                    function FacebookBatchRequest(batch, completeCallback) {
                        if (completeCallback === void 0) { completeCallback = null; }
                        var _this = _super.call(this) || this;
                        _this._batch = batch;
                        _this._callback = completeCallback;
                        return _this;
                    }
                    FacebookBatchRequest.prototype.call = function (accessToken) {
                        this._accessToken = accessToken;
                        this.urlRequest = new net.URLRequest(net.FacebookURLDefaults.GRAPH_URL);
                        this.urlRequest.method = net.URLRequestMethod.POST;
                        var formatted = [];
                        var files = [];
                        var hasFiles = false;
                        var requests = this._batch.requests;
                        var l = requests.length;
                        for (var i = 0; i < l; i++) {
                            var request = requests[i];
                            var fileData = this.extractFileData(request.params);
                            var params = { method: request.requestMethod, relative_url: request.relativeURL };
                            if (request.params) {
                                if (request.params['contentType'] != undefined) {
                                    params.contentType = request.params['contentType'];
                                }
                                var urlVars = this.objectToURLVariables(request.params).toString();
                                if (request.requestMethod == net.URLRequestMethod.GET || request.requestMethod.toUpperCase() == "DELETE") {
                                    params.relative_url += "?" + urlVars;
                                }
                                else {
                                    params.body = urlVars;
                                }
                            }
                            formatted.push(params);
                            if (fileData) {
                                files.push(fileData);
                                params.attached_files = request.params.fileName == null ? 'file' + i : request.params.fileName;
                                hasFiles = true;
                            }
                            else {
                                files.push(null);
                            }
                        }
                        if (!hasFiles) {
                            var requestVars = new net.URLVariables();
                            requestVars.access_token = accessToken;
                            requestVars.batch = JSON.stringify(formatted);
                            this.urlRequest.data = requestVars;
                            this.loadURLLoader();
                        }
                        else {
                            this.sendPostRequest(formatted, files);
                        }
                    };
                    FacebookBatchRequest.prototype.sendPostRequest = function (requests, files) {
                        var post = new net.PostRequest();
                        post.writePostData('access_token', this._accessToken);
                        post.writePostData('batch', JSON.stringify(requests));
                        var l = requests.length;
                        for (var i = 0; i < l; i++) {
                            var values = requests[i];
                            var fileData = files[i];
                            if (fileData) {
                                if (fileData instanceof net.Bitmap) {
                                    fileData = fileData.bitmapData;
                                }
                                if (fileData instanceof net.ByteArray) {
                                    post.writeFileData(values.attached_files, fileData, values.contentType);
                                }
                                else if (fileData instanceof net.BitmapData) {
                                    var ba = fileData.encode(fileData.rect, new net.PNGEncoderOptions());
                                    post.writeFileData(values.attached_files, ba, 'image/png');
                                }
                            }
                        }
                        post.close();
                        this.urlRequest.contentType = 'multipart/form-data; boundary=' + post.boundary;
                        this.urlRequest.data = post.getPostData();
                        this.loadURLLoader();
                    };
                    FacebookBatchRequest.prototype.handleDataReady = function () {
                        var results = this._data;
                        var l = results.length;
                        for (var i = 0; i < l; i++) {
                            var body = JSON.parse(this._data[i].body);
                            this._data[i].body = body;
                            if (this._batch.requests[i].callback != null) {
                                this._batch.requests[i].callback(this._data[i]);
                            }
                        }
                    };
                    return FacebookBatchRequest;
                }(net.AbstractFacebookRequest));
                net.FacebookBatchRequest = FacebookBatchRequest;
            })(net = graph.net || (graph.net = {}));
        })(graph = facebook.graph || (facebook.graph = {}));
    })(facebook = com.facebook || (com.facebook = {}));
})(com || (com = {}));
var datas;
(function (datas) {
    datas.Error = global.Error;
    datas.ASViewer = global.ASViewer;
    datas.CONFIG = global.CONFIG;
    datas.Event = flash.events.Event;
    datas.IOErrorEvent = flash.events.IOErrorEvent;
    datas.ProgressEvent = flash.events.ProgressEvent;
    datas.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    datas.Sound = flash.media.Sound;
    datas.SoundChannel = flash.media.SoundChannel;
    datas.URLRequest = flash.net.URLRequest;
    datas.ByteArray = flash.utils.ByteArray;
    var DataSound = (function (_super) {
        __extends(DataSound, _super);
        function DataSound(pack, fid, id, url, dynamic, md5, music) {
            var _this = this;
            _this.music = false;
            if (dynamic) {
                url = datas.CONFIG.getStorage() + 'imgs' + (pack == 0 ? '/' : pack + '/') + url;
            }
            _this = _super.call(this, pack, fid, id, url, dynamic, md5) || this;
            _this.music = music;
            return _this;
        }
        DataSound.prototype.startLoad = function () {
            this.status = datas.DataAbstract.STATUS_LOADING;
            if (this.dynamic)
                this.onGetAsset(null);
            else
                datas.AssetsData.getAsset(this.pack, this.fid, onGetAssetInternal.bind(this));
            function onGetAssetInternal(asset) {
                if (asset)
                    this.onGetAsset(asset);
            }
        };
        DataSound.prototype.readyToDestroy = function () {
            this.status = datas.DataAbstract.STATUS_READY_TO_DESTROY;
        };
        DataSound.prototype.startDestroy = function () {
            if (this.mSound) {
                this.mSound.removeEventListener(datas.Event.COMPLETE, this.onComplete.bind(this));
                this.mSound.removeEventListener(datas.ProgressEvent.PROGRESS, this.onProgress.bind(this));
                this.mSound.removeEventListener(datas.IOErrorEvent.IO_ERROR, this.onError.bind(this));
                try {
                    this.mSound.close();
                }
                catch (e) { }
                this.mSound = null;
            }
        };
        DataSound.prototype.getSound = function () {
            return this.mSound;
        };
        DataSound.prototype.play = function (loop, position) {
            if (position === void 0) { position = 0; }
            return this.mSound.play(position, loop ? 999 : 0);
        };
        Object.defineProperty(DataSound.prototype, "status", {
            get: function () {
                return this.mStatus;
            },
            set: function (value) {
                this.mStatus = value;
                datas.ASViewer.instance.DataSound_changeStatus(this);
            },
            enumerable: true,
            configurable: true
        });
        DataSound.prototype.onGetAsset = function (asset) {
            if (!this.url) {
                return;
            }
            this.mSound = new datas.Sound;
            this.mSound.addEventListener(datas.Event.COMPLETE, this.onComplete.bind(this));
            this.mSound.addEventListener(datas.ProgressEvent.PROGRESS, this.onProgress.bind(this));
            this.mSound.addEventListener(datas.IOErrorEvent.IO_ERROR, this.onError.bind(this));
            this.mSound.addEventListener(datas.SecurityErrorEvent.SECURITY_ERROR, this.onError.bind(this));
            if (this.dynamic) {
                this.mSound.load(new datas.URLRequest(this.url));
            }
            else {
                this.mSound.loadCompressedDataFromByteArray(asset, asset.length);
                asset.clear();
                this.onComplete();
            }
        };
        DataSound.prototype.toString = function () {
            return "[DataSound pack=" + this.pack + " fid=" + this.fid + "]";
        };
        return DataSound;
    }(datas.DataAbstract));
    datas.DataSound = DataSound;
})(datas || (datas = {}));
var flash;
(function (flash) {
    var media;
    (function (media) {
        media.Error = global.Error;
        media.Event = flash.events.Event;
        media.EventDispatcher = flash.events.EventDispatcher;
        media.IOErrorEvent = flash.events.IOErrorEvent;
        media.ProgressEvent = flash.events.ProgressEvent;
        media.SecurityErrorEvent = flash.events.SecurityErrorEvent;
        media.URLRequest = flash.net.URLRequest;
        media.ByteArray = flash.utils.ByteArray;
        media.Capabilities = flash.system.Capabilities;
        var Sound = (function (_super) {
            __extends(Sound, _super);
            function Sound(stream, context) {
                if (stream === void 0) { stream = null; }
                if (context === void 0) { context = null; }
                var _this = _super.call(this) || this;
                _this.loops = 0;
                _this.__bytesLoaded = 0;
                _this.__bytesTotal = 0;
                _this.context = context;
                _this.stream = stream;
                _this.__queue = new Array;
                if (Sound.ctx) {
                    if (stream) {
                        _this.load(stream, context);
                    }
                }
                return _this;
            }
            Sound.prototype.load = function (stream, context) {
                if (context === void 0) { context = null; }
                if (Sound.ctx) {
                    var _context = this._buildLoaderContext(context);
                    this._load(stream, _context.checkPolicyFile, _context.bufferTime);
                }
            };
            Sound.prototype.loadCompressedDataFromByteArray = function (bytes, bytesLength) {
                if (Sound.ctx) {
                    Sound.ctx.decodeAudioData(bytes.buffer, this.decodeAudioDataSuccess.bind(this));
                }
                else {
                    this.decodeAudioDataSuccess(null);
                }
            };
            Sound.prototype.loadPCMFromByteArray = function (bytes, samples, format, stereo, sampleRate) {
                if (format === void 0) { format = "float"; }
                if (stereo === void 0) { stereo = true; }
                if (sampleRate === void 0) { sampleRate = 44100; }
            };
            Sound.prototype._buildLoaderContext = function (context) {
                if (context == null) {
                    context = new media.SoundLoaderContext();
                }
                return context;
            };
            Sound.prototype._load = function (url, checkPolicyFile, bufferTime) {
                this.__request = url;
                this.xhr = new XMLHttpRequest;
                var _url = this.__request.url;
                if (_url.substr(0, 3).toLowerCase() !== 'www' && _url.substr(0, 4).toLowerCase() !== 'http' && Sound.__base) {
                    _url = Sound.__base + _url;
                }
                this.xhr.open("GET", _url);
                this.xhr.responseType = "arraybuffer";
                this.xhr.onreadystatechange = this.xhr_onreadystatechange.bind(this);
                this.xhr.onprogress = this.xhr_progress.bind(this);
                this.xhr.send();
                this.dispatchEvent(new media.Event(media.Event.OPEN));
            };
            Sound.prototype.xhr_progress = function (e) {
                this.__bytesLoaded = e.loaded;
                this.__bytesTotal = e.total;
                this.dispatchEvent(new media.ProgressEvent(media.ProgressEvent.PROGRESS, false, false, this.__bytesLoaded, this.__bytesTotal));
            };
            Sound.prototype.xhr_onreadystatechange = function (e) {
                if (this.xhr.readyState === 4 && this.xhr.status === 200) {
                    Sound.ctx.decodeAudioData(this.xhr.response, this.decodeAudioDataSuccess.bind(this));
                }
                else if (this.xhr.readyState === 4 && (this.xhr.status === 403 || this.xhr.status === 404)) {
                    this.dispatchEvent(new media.IOErrorEvent(media.IOErrorEvent.IO_ERROR));
                }
                else if (this.xhr.readyState === 4 && this.xhr.status === 0) {
                    this.dispatchEvent(new media.SecurityErrorEvent(media.SecurityErrorEvent.SECURITY_ERROR));
                }
            };
            Sound.prototype.decodeAudioDataSuccess = function (buffer) {
                this.buffer = buffer;
                while (this.__queue.length) {
                    this.__queue.shift()();
                }
                this.dispatchEvent(new media.Event(media.Event.COMPLETE));
            };
            Object.defineProperty(Sound.prototype, "url", {
                get: function () {
                    return this.__request ? this.__request.url : null;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Sound.prototype, "isURLInaccessible", {
                get: function () {
                    return false;
                },
                enumerable: true,
                configurable: true
            });
            Sound.prototype.play = function (offset, loops, sndTransform) {
                if (offset === void 0) { offset = 0; }
                if (loops === void 0) { loops = 0; }
                if (sndTransform === void 0) { sndTransform = null; }
                var ch;
                if (Sound.ctx) {
                    if (!this.buffer && !this.xhr && this.stream && this.stream.url) {
                        this.load(this.stream, this.context);
                    }
                    this.sndTransform = sndTransform;
                    this.loops = loops;
                    ch = new media.SoundChannel;
                    Sound.channels.push(ch);
                    if (this.buffer) {
                        bufferReady.bind(this)();
                    }
                    else {
                        this.__queue.push(bufferReady.bind(this));
                    }
                }
                function bufferReady() {
                    this.source = Sound.ctx.createBufferSource();
                    this.source.loop = loops > 0;
                    this.source.buffer = this.buffer;
                    this.source.start(0, offset / 1000);
                    ch.__init(this.source, sndTransform, offset / 1000);
                }
                return ch;
            };
            Object.defineProperty(Sound.prototype, "length", {
                get: function () {
                    if (this.buffer)
                        return int(this.buffer.duration) * 1000;
                    return 0;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Sound.prototype, "isBuffering", {
                get: function () {
                    return false;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Sound.prototype, "bytesLoaded", {
                get: function () {
                    return this.__bytesLoaded;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Sound.prototype, "bytesTotal", {
                get: function () {
                    return this.__bytesTotal;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Sound.prototype, "id3", {
                get: function () {
                    return null;
                },
                enumerable: true,
                configurable: true
            });
            Sound.prototype.close = function () {
                this.__request = null;
                try {
                    this.xhr.onreadystatechange = undefined;
                    this.xhr.onprogress = undefined;
                    this.xhr.abort();
                }
                catch (e) {
                }
                this.__bytesLoaded = this.__bytesTotal = 0;
            };
            Sound.prototype.extract = function (target, length, startPosition) {
                if (startPosition === void 0) { startPosition = -1; }
                return 0;
            };
            Object.defineProperty(Sound, "ctx", {
                get: function () {
                    if (Sound._ctxDisabled) {
                        return null;
                    }
                    if (!Sound._ctx) {
                        if (typeof (AudioContext) != "undefined") {
                            Sound._ctx = new AudioContext;
                        }
                        else if (typeof (window.webkitAudioContext) != "undefined") {
                            Sound._ctx = (new window.webkitAudioContext);
                        }
                        else {
                            Sound._ctxDisabled = true;
                        }
                        if (Sound._ctx) {
                            Sound.__fixCtx();
                            Sound._ctx.onstatechange = Sound.__fixCtx;
                        }
                    }
                    return Sound._ctx;
                },
                enumerable: true,
                configurable: true
            });
            Sound.__isSuspended = function () {
                return Sound._ctx && typeof Sound._ctx.state == 'string' && Sound._ctx.state != 'running';
            };
            Sound.__fixCtx = function () {
                if (!Sound._ctx) {
                    return;
                }
                if (Sound.__isSuspended()) {
                    window.removeEventListener("click", Sound.__resumeCtx);
                    window.addEventListener("click", Sound.__resumeCtx);
                    if (media.Capabilities.isMobile) {
                        window.removeEventListener("touchstart", Sound.__resumeCtx);
                        window.addEventListener("touchstart", Sound.__resumeCtx);
                    }
                }
            };
            Sound.__resumeCtx = function () {
                if (!Sound._ctx) {
                    return;
                }
                if (typeof Sound._ctx.resume === 'function') {
                    Sound._ctx.resume();
                }
                if (Sound.__isSuspended()) {
                    return;
                }
                window.removeEventListener("click", Sound.__resumeCtx);
                if (media.Capabilities.isMobile) {
                    window.removeEventListener("touchstart", Sound.__resumeCtx);
                }
            };
            Sound.channels = [];
            Sound.__base = '';
            return Sound;
        }(media.EventDispatcher));
        media.Sound = Sound;
    })(media = flash.media || (flash.media = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var net;
    (function (net) {
        net.Error = global.Error;
        net.Event = flash.events.Event;
        net.EventDispatcher = flash.events.EventDispatcher;
        net.HTTPStatusEvent = flash.events.HTTPStatusEvent;
        net.IOErrorEvent = flash.events.IOErrorEvent;
        net.ProgressEvent = flash.events.ProgressEvent;
        net.SecurityErrorEvent = flash.events.SecurityErrorEvent;
        net.ByteArray = flash.utils.ByteArray;
        net.Capabilities = flash.system.Capabilities;
        var URLStream = (function (_super) {
            __extends(URLStream, _super);
            function URLStream() {
                var _this = _super.call(this) || this;
                _this.is_IDataInput = null;
                _this._data = new net.ByteArray;
                return _this;
            }
            URLStream.prototype.load = function (request) {
                var headers = [];
                for (var _i = 0, _a = request.requestHeaders; _i < _a.length; _i++) {
                    var h = _a[_i];
                    if (h.name.toLowerCase() == 'X-HTTP-Method-Override'.toLowerCase())
                        continue;
                    headers[headers.length] = {
                        name: h.name,
                        value: h.value
                    };
                }
                var len = headers.length;
                var contentType = false;
                for (var i = 0; i < len; ++i) {
                    if (headers[i].name.toLowerCase() == 'content-type') {
                        contentType = true;
                        break;
                    }
                }
                if (request.contentType && !contentType) {
                    headers.push({
                        name: 'Content-Type',
                        value: request.contentType
                    });
                }
                var _url = request.url;
                if (_url.substr(0, 3).toLowerCase() !== 'www' && _url.substr(0, 4).toLowerCase() !== 'http' && URLStream.__base) {
                    _url = URLStream.__base + _url;
                }
                var data;
                if (request.data) {
                    if (typeof request.data == 'string') {
                        data = request.data;
                    }
                    else if (request.data instanceof net.ByteArray) {
                        if (net.Capabilities.browser == 'Microsoft Internet Explorer') {
                            data = new Uint8Array(request.data.buffer);
                        }
                        else {
                            data = new DataView(request.data.buffer);
                        }
                    }
                    else if (request.data instanceof net.URLVariables) {
                        _url += '?' + request.data.toString();
                    }
                    else if ('toFixed' in request.data) {
                        data = request.data.toString();
                    }
                    else {
                        try {
                            data = JSON.stringify(request.data);
                        }
                        catch (e) { }
                    }
                }
                try {
                    _create.bind(this)();
                    _open.bind(this)(request.method || net.URLRequestMethod.GET, _url, URLStream.sync);
                    for (var i = 0; i < headers.length; ++i) {
                        _header.bind(this)(headers[i].name, headers[i].value);
                    }
                    _load.bind(this)(data);
                }
                catch (e) {
                    this.dispatchEvent(new net.IOErrorEvent(net.IOErrorEvent.IO_ERROR, false, false, e.message));
                }
                function _create() {
                    this._xhr = new XMLHttpRequest;
                }
                function _open(method, url, sync) {
                    this._xhr.open(method, url, !sync);
                }
                function _header(name, value) {
                    this._xhr.setRequestHeader(name, value);
                }
                function _load(data) {
                    this._xhr.responseType = "arraybuffer";
                    this._xhr.onreadystatechange = this.xhr_onreadystatechange.bind(this);
                    this._xhr.onprogress = this.xhr_progress.bind(this);
                    this._xhr.send(data);
                }
            };
            URLStream.prototype.readBytes = function (b, offset, length) {
                if (offset === void 0) { offset = 0; }
                if (length === void 0) { length = 0; }
                this._data.readBytes(b, offset, length);
            };
            URLStream.prototype.readBoolean = function () {
                return this._data.readBoolean();
            };
            URLStream.prototype.readByte = function () {
                return this._data.readByte();
            };
            URLStream.prototype.readUnsignedByte = function () {
                return this._data.readUnsignedByte();
            };
            URLStream.prototype.readShort = function () {
                return this._data.readShort();
            };
            URLStream.prototype.readUnsignedShort = function () {
                return this._data.readUnsignedShort();
            };
            URLStream.prototype.readUnsignedInt = function () {
                return this._data.readUnsignedInt();
            };
            URLStream.prototype.readInt = function () {
                return this._data.readInt();
            };
            URLStream.prototype.readFloat = function () {
                return this._data.readFloat();
            };
            URLStream.prototype.readDouble = function () {
                return this._data.readDouble();
            };
            URLStream.prototype.readMultiByte = function (param1, param2) {
                return this._data.readMultiByte(param1, param2);
            };
            URLStream.prototype.readUTF = function () {
                return this._data.readUTF();
            };
            URLStream.prototype.readUTFBytes = function (param1) {
                return this._data.readUTFBytes(param1);
            };
            Object.defineProperty(URLStream.prototype, "connected", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(URLStream.prototype, "bytesAvailable", {
                get: function () {
                    return this._data.bytesAvailable;
                },
                enumerable: true,
                configurable: true
            });
            URLStream.prototype.close = function () {
                try {
                    this._xhr.onreadystatechange = undefined;
                    this._xhr.onprogress = undefined;
                    this._xhr.abort();
                }
                catch (e) {
                }
            };
            URLStream.prototype.readObject = function () {
                return this._data.readObject();
            };
            Object.defineProperty(URLStream.prototype, "objectEncoding", {
                get: function () { return this._data.objectEncoding; },
                set: function (param1) { this._data.objectEncoding = param1; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(URLStream.prototype, "endian", {
                get: function () { return this._data.endian; },
                set: function (param1) { this._data.endian = param1; },
                enumerable: true,
                configurable: true
            });
            URLStream.prototype.xhr_progress = function (e) {
                this.dispatchEvent(new net.ProgressEvent(net.ProgressEvent.PROGRESS, false, false, e.loaded, e.total));
            };
            URLStream.prototype.xhr_onreadystatechange = function (e) {
                var state = this._xhr.readyState;
                var status = this._xhr.status;
                var complete = state == 4 && status == 200;
                var error = state == 4 && (status == 400 || status == 403 || status == 404);
                var securityError = state == 4 && (status == 0);
                var ev = new net.HTTPStatusEvent(net.HTTPStatusEvent.HTTP_STATUS, false, false, status || 0);
                var headersRaw = 'getAllResponseHeaders' in this._xhr ? this._xhr.getAllResponseHeaders() : undefined;
                if (headersRaw && (complete || error || securityError)) {
                    var headers = new Array;
                    var tmp = headersRaw.split('\n');
                    var len = tmp.length;
                    for (var i = 0; i < len; ++i) {
                        var str = tmp[i].replace(/\r/, '');
                        var index = str.indexOf(': ');
                        if (index == -1) {
                            continue;
                        }
                        headers.push(new net.URLRequestHeader(str.substring(0, index), str.substr(index + 2)));
                    }
                    ev.responseHeaders = headers;
                }
                this.dispatchEvent(ev);
                if (state == 4) {
                    var buffer = this._xhr.response;
                    if (buffer) {
                        this._data = this._data.fromArrayBuffer(buffer);
                    }
                }
                if (complete) {
                    this.dispatchEvent(new net.ProgressEvent(net.ProgressEvent.PROGRESS, false, false, this._data.length, this._data.length));
                    this.dispatchEvent(new net.Event(net.Event.COMPLETE));
                }
                else if (error) {
                    this.dispatchEvent(new net.IOErrorEvent(net.IOErrorEvent.IO_ERROR));
                }
                else if (securityError) {
                    this.dispatchEvent(new net.SecurityErrorEvent(net.SecurityErrorEvent.SECURITY_ERROR));
                }
            };
            URLStream.sync = false;
            URLStream.__base = '';
            return URLStream;
        }(net.EventDispatcher));
        net.URLStream = URLStream;
    })(net = flash.net || (flash.net = {}));
})(flash || (flash = {}));
var flash;
(function (flash) {
    var ui;
    (function (ui) {
        ui.Graphics = flash.display.Graphics;
        ui.NativeMenu = flash.display.NativeMenu;
        ui.Shape = flash.display.Shape;
        ui.Sprite = flash.display.Sprite;
        ui.Stage = flash.display.Stage;
        ui.ContextMenuEvent = flash.events.ContextMenuEvent;
        ui.MouseEvent = flash.events.MouseEvent;
        ui.URLRequest = flash.net.URLRequest;
        ui.TextField = flash.text.TextField;
        ui.CSSColor = flash.utils.CSSColor;
        ui.Dictionary = flash.utils.Dictionary;
        var ContextMenu = (function (_super) {
            __extends(ContextMenu, _super);
            function ContextMenu() {
                var _this = _super.call(this) || this;
                _this.clipboardMenu = false;
                _this.customItems = [];
                return _this;
            }
            Object.defineProperty(ContextMenu, "isSupported", {
                get: function () {
                    return ui.Mouse.supportsCursor;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(ContextMenu, "isOpened", {
                get: function () {
                    return ContextMenu.sOpened;
                },
                enumerable: true,
                configurable: true
            });
            ContextMenu.prototype.clone = function () {
                var ins = new ContextMenu;
                ins.link = this.link;
                if (this.customItems) {
                    ins.customItems = this.customItems.concat();
                }
                ins.clipboardMenu = this.clipboardMenu;
                return ins;
            };
            ContextMenu.prototype.hideBuiltInItems = function () { };
            ContextMenu.prototype.show = function (event) {
                if (!this.customItems || !this.customItems.length)
                    return;
                event.preventDefault();
                var MARGIN = 2;
                var GAP = 35;
                var WIDTH = 100;
                var HEIGHT = 22;
                var BACKGROUND_COLOR = 0xffffff;
                var BORDER_COLOR = 0xbababa;
                var SHADOW_COLOR = 0x666666;
                var TEXT_ENABLED_COLOR = 0x0;
                var TEXT_DISABLED_COLOR = 0x999999;
                var OVER_ENABLED_COLOR = ui.CSSColor.predefined2Hex('Highlight');
                var OVER_DISABLED_COLOR = 0xe6e6e6;
                var SEPARATOR_COLOR = 0xd7d7d7;
                var info = [];
                var map = new ui.Dictionary;
                var view = new ui.Sprite;
                var stage = event.target.stage;
                stage.addChild(view);
                ContextMenu.sOpened = true;
                ContextMenu.sMouseShowed = ui.Mouse['sCursorShowed'];
                ui.Mouse.show();
                document.addEventListener("mousedown", hide.bind(this));
                document.addEventListener("touchstart", hide.bind(this));
                var len = this.customItems.length;
                var x = 0, y = 0;
                for (var i = 0; i < len; ++i) {
                    var itm = this.customItems[i];
                    if (!itm.caption)
                        continue;
                    var sep = null;
                    if (itm.separatorBefore) {
                        sep = view.addChild(new ui.Shape);
                        y += 7;
                        sep.y = y;
                    }
                    var caption = itm.caption;
                    var cont = new ui.Sprite;
                    cont.mouseChildren = false;
                    cont.x = MARGIN + x;
                    cont.y = MARGIN + y;
                    var label = createText.bind(this)(itm.enabled);
                    var labelTab = null;
                    if (caption.indexOf('\t') >= 0) {
                        var spt = caption.split('\t');
                        caption = spt[0];
                        labelTab = cont.addChild(createText.bind(this)(itm.enabled));
                        labelTab.text = spt[1];
                        labelTab.y = 1;
                    }
                    label.text = caption;
                    label.y = 1;
                    view.addChild(cont);
                    cont.addChild(label);
                    cont.addEventListener(ui.MouseEvent.MOUSE_OVER, over.bind(this));
                    cont.addEventListener(ui.MouseEvent.MOUSE_OUT, out.bind(this));
                    label.width = label.textWidth + GAP * 3;
                    label.height = HEIGHT;
                    if (labelTab) {
                        labelTab.width = labelTab.textWidth + 2;
                        labelTab.height = label.height;
                    }
                    label.x = GAP;
                    if (sep)
                        sep.x = label.x;
                    WIDTH = Math.max(GAP + label.width, WIDTH);
                    cont.visible = itm.visible;
                    info[i] = {
                        itm: itm,
                        cont: cont,
                        label: label,
                        labelTab: labelTab,
                        sep: sep
                    };
                    map.set(cont, info[i]);
                    if (itm.enabled)
                        info[i].click = itm.click.bind(itm);
                    y += HEIGHT;
                }
                WIDTH = Math.max(WIDTH, 200);
                len = info.length;
                for (i = 0; i < len; ++i) {
                    var obj = info[i];
                    fillRect.bind(this)(obj.cont.graphics, 0, 0, WIDTH, HEIGHT, BACKGROUND_COLOR);
                    if (obj.labelTab)
                        obj.labelTab.x = WIDTH - obj.labelTab.width - GAP / 2;
                    if (obj.sep)
                        fillRect.bind(this)(obj.sep.graphics, 0, obj.label.y - 3, WIDTH - obj.label.x - 2, 0, 0x0, 0, 1, SEPARATOR_COLOR);
                }
                var w = GAP + view.width + MARGIN * 2 - 2;
                var h = view.height + MARGIN * 2;
                fillRect.bind(this)(view.graphics, 8, 8, w - 5, h - 5, SHADOW_COLOR);
                fillRect.bind(this)(view.graphics, 0, 0, w, h, BACKGROUND_COLOR, 1, 1, BORDER_COLOR, false);
                view.x = event.stageX;
                if (view.x + w + 8 > stage.stageWidth)
                    view.x = stage.stageWidth - w - 8;
                view.y = event.stageY;
                if (view.y + h + 8 > stage.stageHeight)
                    view.y = stage.stageHeight - h - 8;
                view.addEventListener(ui.MouseEvent.MOUSE_DOWN, down.bind(this));
                view.addEventListener(ui.MouseEvent.MOUSE_UP, up.bind(this));
                this.dispatchEvent(new ui.ContextMenuEvent(ui.ContextMenuEvent.MENU_SELECT));
                function createText(enabled) {
                    var tf = new ui.TextField;
                    enableText.bind(this)(tf, enabled);
                    tf.defaultTextFormat.font = 'Arial';
                    return tf;
                }
                function enableText(value, enable) {
                    if (value)
                        value.defaultTextFormat.color = enable ? TEXT_ENABLED_COLOR : TEXT_DISABLED_COLOR;
                }
                function fillRect(g, x, y, w, h, fillColor, alpha, borderThickness, borderColor, clear) {
                    if (fillColor === void 0) { fillColor = 0x0; }
                    if (alpha === void 0) { alpha = 1; }
                    if (borderThickness === void 0) { borderThickness = 0; }
                    if (borderColor === void 0) { borderColor = 0x0; }
                    if (clear === void 0) { clear = true; }
                    if (clear)
                        g.clear();
                    if (borderThickness > 0)
                        g.lineStyle(borderThickness, borderColor);
                    g.beginFill(fillColor, alpha);
                    g.drawRect(x, y, w, h);
                }
                function down(e) {
                    e.stopPropagation();
                }
                function up(e) {
                    var obj = map.get(e.target);
                    if (obj) {
                        if (obj.click)
                            obj.click();
                        else
                            return;
                    }
                    else if (view == e.target || view.contains(e.target)) {
                        return;
                    }
                    hide.bind(this)();
                    view.removeEventListener(ui.MouseEvent.MOUSE_DOWN, down.bind(this));
                    view.removeEventListener(ui.MouseEvent.MOUSE_UP, up.bind(this));
                    for (var _i = 0, info_1 = info; _i < info_1.length; _i++) {
                        obj = info_1[_i];
                        obj.cont.removeEventListener(ui.MouseEvent.MOUSE_OVER, over.bind(this));
                        obj.cont.removeEventListener(ui.MouseEvent.MOUSE_OUT, out.bind(this));
                    }
                }
                function over(e) {
                    var obj = map.get(e.target);
                    fillRect.bind(this)(obj.cont.graphics, 0, 0, WIDTH, HEIGHT, obj.itm.enabled ? OVER_ENABLED_COLOR : OVER_DISABLED_COLOR);
                }
                function out(e) {
                    fillRect.bind(this)(map.get(e.target).cont.graphics, 0, 0, WIDTH, HEIGHT, 0x0, 0);
                }
                function hide() {
                    document.removeEventListener("mousedown", hide.bind(this));
                    stage.removeChild(view);
                    ContextMenu.sOpened = false;
                    ui.Mouse.cursor = ui.Mouse.cursor;
                    if (ContextMenu.sMouseShowed === false)
                        ui.Mouse.hide();
                }
            };
            ContextMenu.sOpened = false;
            ContextMenu.sMouseShowed = false;
            return ContextMenu;
        }(ui.NativeMenu));
        ui.ContextMenu = ContextMenu;
    })(ui = flash.ui || (flash.ui = {}));
})(flash || (flash = {}));
var global;
(function (global) {
    global.Sprite = flash.display.Sprite;
    global.Event = flash.events.Event;
    global.MouseEvent = flash.events.MouseEvent;
    global.System = flash.system.System;
    global.TextField = flash.text.TextField;
    global.TextFormat = flash.text.TextFormat;
    global.getTimer = flash.utils.getTimer;
    var Stats = (function (_super) {
        __extends(Stats, _super);
        function Stats(_theme) {
            if (_theme === void 0) { _theme = null; }
            var _this = _super.call(this) || this;
            _this.WIDTH = 70;
            _this.HEIGHT = 58;
            _this.timer = 0;
            _this.fps = 0;
            _this.ms = 0;
            _this.ms_prev = 0;
            _this.buff = 0;
            _this.fps_graph = 0;
            _this.mem_graph = 0;
            _this.mem_max_graph = 0;
            _this.theme = { bg: 0x000033, fps: 0xffff00, ms: 0x00ff00, mem: 0x00ffff, memmax: 0xff0070, cmem: 0x00ffff };
            if (_theme) {
                if (_theme.bg != null)
                    _this.theme.bg = _theme.bg;
                if (_theme.fps != null)
                    _this.theme.fps = _theme.fps;
                if (_theme.ms != null)
                    _this.theme.ms = _theme.ms;
                if (_theme.mem != null)
                    _this.theme.mem = _theme.mem;
                if (_theme.memmax != null)
                    _this.theme.memmax = _theme.memmax;
                if (_theme.cmem != null)
                    _this.theme.cmem = _theme.cmem;
            }
            _this.mem_max = 0;
            _this.xml = { fps: '', ms: '', mem: '', memMax: '', cmem: '' };
            _this.style = {};
            _this.style.fps = { color: _this.theme.fps };
            _this.style.ms = { color: _this.theme.ms };
            _this.style.mem = { color: _this.theme.mem };
            _this.style.memMax = { color: _this.theme.memmax };
            _this.style.cmem = { color: _this.theme.cmem };
            _this.texts = new Array;
            var i = 0;
            for (var s in _this.style) {
                var text = new global.TextField;
                text.y = i++ * 10;
                text.width = _this.WIDTH;
                text.height = 16;
                text.defaultTextFormat = new global.TextFormat('Arial', 9, _this.style[s].color);
                text.condenseWhite = true;
                text.selectable = false;
                text.mouseEnabled = false;
                _this.texts.push(text);
            }
            _this.addEventListener(global.Event.ADDED_TO_STAGE, _this.init.bind(_this), false, 0, true);
            _this.addEventListener(global.Event.REMOVED_FROM_STAGE, _this.destroy.bind(_this), false, 0, true);
            return _this;
        }
        Stats.prototype.init = function (e) {
            this.graphics.beginFill(this.theme.bg);
            this.graphics.drawRect(0, 0, this.WIDTH, this.HEIGHT);
            this.graphics.endFill();
            for (var _i = 0, _a = this.texts; _i < _a.length; _i++) {
                var text = _a[_i];
                this.addChild(text);
            }
            this.addEventListener(global.Event.ENTER_FRAME, this.update.bind(this));
            this.addEventListener(global.MouseEvent.CLICK, this.click.bind(this));
        };
        Stats.prototype.destroy = function (e) {
            this.graphics.clear();
            while (this.numChildren > 0)
                this.removeChildAt(0);
            this.removeEventListener(global.Event.ENTER_FRAME, this.update.bind(this));
            this.removeEventListener(global.MouseEvent.CLICK, this.click.bind(this));
        };
        Stats.prototype.click = function (e) {
            if (this.hasEventListener(global.Event.ENTER_FRAME)) {
                this.removeEventListener(global.Event.ENTER_FRAME, this.update.bind(this));
            }
            else {
                this.addEventListener(global.Event.ENTER_FRAME, this.update.bind(this));
            }
        };
        Stats.prototype.update = function (e) {
            this.timer = global.getTimer();
            if (this.timer - 1000 > this.ms_prev) {
                this.ms_prev = this.timer;
                this.mem = Number((global.System.totalMemory * 0.000000954).toFixed(3));
                this.mem_max = this.mem_max > this.mem ? this.mem_max : this.mem;
                if (window.Module && Module.buffer)
                    this.cmem = Number((Module.buffer.byteLength * 0.000000954).toFixed(3));
                else
                    this.cmem = 0;
                this.xml.fps = "FPS: " + this.fps + " / " + this.stage.frameRate;
                this.xml.mem = "MEM: " + this.mem;
                this.xml.memMax = "MAX: " + this.mem_max;
                this.xml.cmem = "RAM: " + this.cmem;
                this.fps = 0;
            }
            this.fps++;
            this.xml.ms = "MS: " + (this.timer - this.ms);
            this.ms = this.timer;
            var i = 0;
            for (var s in this.style) {
                this.texts[i++].text = this.xml[s];
            }
        };
        return Stats;
    }(global.Sprite));
    global.Stats = Stats;
})(global || (global = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.ColorTransform = flash.geom.ColorTransform;
        display.Matrix = flash.geom.Matrix;
        display.Rectangle = flash.geom.Rectangle;
        var Graphics = (function () {
            function Graphics(parent) {
                this.graphicsData = new Array;
                this._worldMatrix = new display.Matrix;
                this.lockBound = false;
                this.pathPool = [];
                this.pathPoolPos = 0;
                this.renderState = false;
                this.parent = parent;
                this.commands = new Array;
            }
            Graphics.prototype.test = function (func, params) {
                if (this.renderState)
                    return this.renderState;
                var args = [];
                var len = params.length;
                for (var i = 0; i < len; ++i) {
                    args.push(params[i]);
                }
                args.unshift(func);
                this.commands.push(args);
                return this.renderState;
            };
            Graphics.prototype.clear = function () {
                if (this.parent)
                    this.parent.dirtyGraphics();
                this.lastStroke = null;
                this.lastPath = null;
                this.pathPoolPos = 0;
                this.graphicsData = new Array;
                this.bound = null;
                this.commands.length = 0;
            };
            Graphics.prototype.beginFill = function (color, alpha) {
                if (alpha === void 0) { alpha = 1.0; }
                if (!this.test(this.beginFill.bind(this), arguments))
                    return;
                this.endStrokAndFill();
                this.lastFill = new display.GraphicsSolidFill(this.parent, color, alpha);
                this.graphicsData.push(this.lastFill);
            };
            Graphics.prototype.beginGradientFill = function (type, colors, alphas, ratios, matrix, spreadMethod, interpolationMethod, focalPointRatio) {
                if (matrix === void 0) { matrix = null; }
                if (spreadMethod === void 0) { spreadMethod = "pad"; }
                if (interpolationMethod === void 0) { interpolationMethod = "rgb"; }
                if (focalPointRatio === void 0) { focalPointRatio = 0; }
                if (!this.test(this.beginGradientFill.bind(this), arguments))
                    return;
                this.endStrokAndFill();
                this.lastFill = new display.GraphicsGradientFill(type, colors, alphas, ratios, matrix, spreadMethod, interpolationMethod, focalPointRatio);
                this.graphicsData.push(this.lastFill);
            };
            Graphics.prototype.beginBitmapFill = function (bitmap, matrix, repeat, smooth) {
                if (matrix === void 0) { matrix = null; }
                if (repeat === void 0) { repeat = true; }
                if (smooth === void 0) { smooth = false; }
                if (!this.test(this.beginBitmapFill.bind(this), arguments))
                    return;
                this.endStrokAndFill();
                this.lastFill = new display.GraphicsBitmapFill(bitmap, matrix, repeat, smooth);
                this.graphicsData.push(this.lastFill);
            };
            Graphics.prototype.endStrokAndFill = function () {
                if (!this.test(this.endStrokAndFill.bind(this), arguments))
                    return;
                if (this.lastPath) {
                    if (this.lastFill) {
                        var efill = new display.GraphicsEndFill;
                        efill.fill = this.lastFill;
                        this.graphicsData.push(efill);
                        this.lastFill = null;
                    }
                    if (this.lastStroke && !isNaN(this.lastStroke.thickness)) {
                        this.lastStroke = new display.GraphicsStroke(this.parent, NaN);
                        this.graphicsData.push(this.lastStroke);
                    }
                    this.lastPath = null;
                }
            };
            Graphics.prototype.lineGradientStyle = function (type, colors, alphas, ratios, matrix, spreadMethod, interpolationMethod, focalPointRatio) {
                if (matrix === void 0) { matrix = null; }
                if (spreadMethod === void 0) { spreadMethod = "pad"; }
                if (interpolationMethod === void 0) { interpolationMethod = "rgb"; }
                if (focalPointRatio === void 0) { focalPointRatio = 0; }
                if (!this.test(this.lineGradientStyle.bind(this), arguments))
                    return;
                if (this.lastStroke) {
                    var gs = this.lastStroke;
                    gs.fill = new display.GraphicsGradientFill(type, colors, alphas, ratios, matrix, spreadMethod, interpolationMethod, focalPointRatio);
                }
            };
            Graphics.prototype.lineStyle = function (thickness, color, alpha, pixelHinting, scaleMode, caps, joints, miterLimit) {
                if (thickness === void 0) { thickness = NaN; }
                if (color === void 0) { color = 0; }
                if (alpha === void 0) { alpha = 1.0; }
                if (pixelHinting === void 0) { pixelHinting = false; }
                if (scaleMode === void 0) { scaleMode = "normal"; }
                if (caps === void 0) { caps = null; }
                if (joints === void 0) { joints = null; }
                if (miterLimit === void 0) { miterLimit = 3; }
                if (!this.test(this.lineStyle.bind(this), arguments))
                    return;
                this.endStrokAndFill();
                if (!isNaN(thickness)) {
                    this.lastStroke = new display.GraphicsStroke(this.parent, thickness === 0 ? 1 : thickness, pixelHinting, scaleMode, caps, joints, miterLimit, new display.GraphicsSolidFill(this.parent, color, alpha));
                    this.graphicsData.push(this.lastStroke);
                }
            };
            Graphics.prototype.drawRect = function (x, y, width, height) {
                if (!this.test(this.drawRect.bind(this), arguments)) {
                    this.inflateBound(x, y);
                    this.inflateBound(x + width, y + height);
                    return;
                }
                this.lockBound = true;
                this.moveTo(x, y);
                this.lineTo(x + width, y);
                this.lineTo(x + width, y + height);
                this.lineTo(x, y + height);
                this.lastPath.closePath();
                this.lockBound = false;
                this.inflateBound(x, y);
                this.inflateBound(x + width, y + height);
            };
            Graphics.prototype.drawRoundRect = function (x, y, width, height, ellipseWidth, ellipseHeight) {
                if (ellipseHeight === void 0) { ellipseHeight = NaN; }
                if (!this.test(this.drawRoundRect.bind(this), arguments)) {
                    this.inflateBound(x, y);
                    this.inflateBound(x + width, y + height);
                    return;
                }
                this.lockBound = true;
                if (isNaN(ellipseHeight))
                    ellipseHeight = ellipseWidth;
                this.moveTo(x + ellipseWidth, y);
                this.lineTo(x + width - ellipseWidth, y);
                this.curveTo(x + width, y, x + width, y + ellipseHeight);
                this.lineTo(x + width, y + height - ellipseHeight);
                this.curveTo(x + width, y + height, x + width - ellipseWidth, y + height);
                this.lineTo(x + ellipseWidth, y + height);
                this.curveTo(x, y + height, x, y + height - ellipseHeight);
                this.lineTo(x, y + ellipseHeight);
                this.curveTo(x, y, x + ellipseWidth, y);
                this.lockBound = false;
                this.inflateBound(x, y);
                this.inflateBound(x + width, y + height);
            };
            Graphics.prototype.drawRoundRectComplex = function (x, y, width, height, topLeftRadius, topRightRadius, bottomLeftRadius, bottomRightRadius) {
                if (!this.test(this.drawRoundRectComplex.bind(this), arguments)) {
                    this.inflateBound(x, y);
                    this.inflateBound(x + width, y + height);
                    return;
                }
                this.lockBound = true;
                this.moveTo(x + topLeftRadius, y);
                this.lineTo(x + width - topRightRadius, y);
                this.curveTo(x + width, y, x + width, y + topRightRadius);
                this.lineTo(x + width, y + height - bottomRightRadius);
                this.curveTo(x + width, y + height, x + width - bottomRightRadius, y + height);
                this.lineTo(x + bottomLeftRadius, y + height);
                this.curveTo(x, y + height, x, y + height - bottomLeftRadius);
                this.lineTo(x, y + topLeftRadius);
                this.curveTo(x, y, x + topLeftRadius, y);
                this.lockBound = false;
                this.inflateBound(x, y);
                this.inflateBound(x + width, y + height);
            };
            Graphics.prototype.drawCircle = function (x, y, radius) {
                if (!this.test(this.drawCircle.bind(this), arguments)) {
                    this.inflateBound(x - radius, y - radius);
                    this.inflateBound(x + radius, y + radius);
                    return;
                }
                this.makePath();
                this.lastPath.moveTo(x + radius, y);
                this.lastPath.arc(x, y, radius, 0, Math.PI * 2);
                this.inflateBound(x - radius, y - radius);
                this.inflateBound(x + radius, y + radius);
            };
            Graphics.prototype.drawEllipse = function (x, y, w, h) {
                if (!this.test(this.drawEllipse.bind(this), arguments)) {
                    this.inflateBound(x, y);
                    this.inflateBound(x + w, y + h);
                    return;
                }
                this.lockBound = true;
                var kappa = .5522848, ox = (w / 2) * kappa, oy = (h / 2) * kappa, xe = x + w, ye = y + h, xm = x + w / 2, ym = y + h / 2;
                this.moveTo(x, ym);
                this.cubicCurveTo(x, ym - oy, xm - ox, y, xm, y);
                this.cubicCurveTo(xm + ox, y, xe, ym - oy, xe, ym);
                this.cubicCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);
                this.cubicCurveTo(xm - ox, ye, x, ym + oy, x, ym);
                this.lockBound = false;
                this.inflateBound(x, y);
                this.inflateBound(x + w, y + h);
            };
            Graphics.prototype.moveTo = function (x, y) {
                if (!this.test(this.moveTo.bind(this), arguments)) {
                    this.inflateBound(x, y);
                    return;
                }
                this.makePath();
                this.lastPath.moveTo(x, y);
                this.inflateBound(x, y);
            };
            Graphics.prototype.lineTo = function (x, y) {
                if (!this.test(this.lineTo.bind(this), arguments)) {
                    this.inflateBound(x, y);
                    return;
                }
                this.makePath();
                this.lastPath.lineTo(x, y);
                this.inflateBound(x, y);
            };
            Graphics.prototype.curveTo = function (controlX, controlY, anchorX, anchorY) {
                if (!this.test(this.curveTo.bind(this), arguments)) {
                    this.inflateBound(controlX, controlY);
                    this.inflateBound(anchorX, anchorY);
                    return;
                }
                this.makePath();
                this.lastPath.curveTo(controlX, controlY, anchorX, anchorY);
                this.inflateBound(controlX, controlY);
                this.inflateBound(anchorX, anchorY);
            };
            Graphics.prototype.cubicCurveTo = function (controlX1, controlY1, controlX2, controlY2, anchorX, anchorY) {
                if (!this.test(this.cubicCurveTo.bind(this), arguments)) {
                    this.inflateBound(controlX1, controlY1);
                    this.inflateBound(controlX2, controlY2);
                    this.inflateBound(anchorX, anchorY);
                    return;
                }
                this.makePath();
                this.lastPath.cubicCurveTo(controlX1, controlY1, controlX2, controlY2, anchorX, anchorY);
                this.inflateBound(controlX1, controlY1);
                this.inflateBound(controlX2, controlY2);
                this.inflateBound(anchorX, anchorY);
            };
            Graphics.prototype.endFill = function () {
                if (!this.test(this.endFill.bind(this), arguments))
                    return;
                this.endStrokAndFill();
            };
            Graphics.prototype.copyFrom = function (g) {
                if (!this.test(this.copyFrom.bind(this), arguments)) {
                    this.bound = g.bound;
                    return;
                }
                this.graphicsData = g.graphicsData.slice();
                this.bound = g.bound;
            };
            Graphics.prototype.lineBitmapStyle = function (bitmap, matrix, repeat, smooth) {
                if (matrix === void 0) { matrix = null; }
                if (repeat === void 0) { repeat = true; }
                if (smooth === void 0) { smooth = false; }
                if (!this.test(this.lineBitmapStyle.bind(this), arguments))
                    return;
                if (this.lastStroke && this.lastStroke instanceof display.GraphicsStroke) {
                    var gs = this.lastStroke;
                    gs.fill = new display.GraphicsBitmapFill(bitmap, matrix, repeat, smooth);
                }
            };
            Graphics.prototype.drawPath = function (commands, data, winding) {
                if (winding === void 0) { winding = "evenOdd"; }
                if (!this.test(this.drawPath.bind(this), arguments))
                    return;
                this.makePath();
                this.lastPath.commands.push.apply(null, commands);
                this.lastPath.data.push.apply(null, data);
            };
            Graphics.prototype.drawTriangles = function (vertices, indices, uvtData, culling) {
                if (indices === void 0) { indices = null; }
                if (uvtData === void 0) { uvtData = null; }
                if (culling === void 0) { culling = "none"; }
                if (!this.test(this.drawTriangles.bind(this), arguments))
                    return;
                this.makePath();
                this.lastPath.drawTriangles(vertices, indices, uvtData);
            };
            Graphics.prototype.drawGraphicsData = function (graphicsData) {
                if (!this.test(this.drawGraphicsData.bind(this), arguments))
                    return;
                var item = null;
                var path = null;
                var fill = null;
                var stroke = null;
                if (graphicsData == null) {
                    return;
                }
                for (var i = 0; i < graphicsData.length; i++) {
                    item = graphicsData[i];
                    if ("is_IGraphicsPath" in item) {
                        path = item;
                        this.drawPathObject(path);
                    }
                    else if ("is_IGraphicsFill" in item) {
                        fill = item;
                        this.beginFillObject(fill);
                    }
                    else if ("is_IGraphicsStroke" in item) {
                        stroke = item;
                        this.beginStrokeObject(stroke);
                    }
                }
            };
            Graphics.prototype.readGraphicsData = function (recurse) {
                if (recurse === void 0) { recurse = true; }
                if (!this.test(this.readGraphicsData.bind(this), arguments))
                    return;
                return this.graphicsData.slice();
            };
            Graphics.prototype.inflateBound = function (x, y) {
                if (this.lockBound)
                    return;
                if (this.bound == null)
                    this.bound = new display.Rectangle(Number.MAX_VALUE, Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);
                if (this.bound.left > x) {
                    this.bound.left = x;
                }
                if (this.bound.right < x) {
                    this.bound.right = x;
                }
                if (this.bound.top > y) {
                    this.bound.top = y;
                }
                if (this.bound.bottom < y) {
                    this.bound.bottom = y;
                }
            };
            Graphics.prototype.makePath = function () {
                if (this.lastPath == null) {
                    this.lastPath = this.pathPool[this.pathPoolPos];
                    if (this.lastPath == null) {
                        this.lastPath = this.pathPool[this.pathPoolPos] = this.parent.stage.renderer.createPath();
                    }
                    this.lastPath.clear();
                    this.lastPath.gpuPath2DDirty = true;
                    this.pathPoolPos++;
                    this.graphicsData.push(this.lastPath);
                    if (this.parent)
                        this.parent.dirtyGraphics();
                }
            };
            Graphics.prototype.drawPathObject = function (path) {
                var graphicsPath = null;
                var graphicsTrianglePath = null;
                if (path instanceof display.GraphicsPath) {
                    graphicsPath = path;
                    this.drawPath(graphicsPath.commands, graphicsPath.data, graphicsPath.winding);
                }
                else if (path instanceof display.GraphicsTrianglePath) {
                    graphicsTrianglePath = path;
                    this.drawTriangles(graphicsTrianglePath.vertices, graphicsTrianglePath.indices, graphicsTrianglePath.uvtData, graphicsTrianglePath.culling);
                }
            };
            Graphics.prototype.beginFillObject = function (fill) {
                var solidFill = null;
                var gradientFill = null;
                var bitmapFill = null;
                if (fill == null) {
                    this.endFill();
                }
                else if (fill instanceof display.GraphicsEndFill) {
                    this.endFill();
                }
                else if (fill instanceof display.GraphicsSolidFill) {
                    solidFill = fill;
                    this.beginFill(solidFill.color, solidFill.alpha);
                }
                else if (fill instanceof display.GraphicsGradientFill) {
                    gradientFill = fill;
                    this.beginGradientFill(gradientFill.type, gradientFill.colors, gradientFill.alphas, gradientFill.ratios, gradientFill.matrix, gradientFill.spreadMethod, gradientFill.interpolationMethod, gradientFill.focalPointRatio);
                }
                else if (fill instanceof display.GraphicsBitmapFill) {
                    bitmapFill = fill;
                    this.beginBitmapFill(bitmapFill.bitmapData, bitmapFill.matrix, bitmapFill.repeat, bitmapFill.smooth);
                }
            };
            Graphics.prototype.beginStrokeObject = function (istroke) {
                var solidFill = null;
                var gradientFill = null;
                var bitmapFill = null;
                var stroke = null;
                var fill = null;
                if (istroke != null && istroke instanceof display.GraphicsStroke) {
                    stroke = istroke;
                }
                if (stroke && stroke.fill && "is_IGraphicsFill" in stroke.fill) {
                    fill = stroke.fill;
                }
                if (stroke == null || fill == null) {
                    this.lineStyle();
                }
                else if (fill instanceof display.GraphicsSolidFill) {
                    solidFill = fill;
                    this.lineStyle(stroke.thickness, solidFill.color, solidFill.alpha, stroke.pixelHinting, stroke.scaleMode, stroke.caps, stroke.joints, stroke.miterLimit);
                }
                else if (fill instanceof display.GraphicsGradientFill) {
                    gradientFill = fill;
                    this.lineStyle(stroke.thickness, 0, 1, stroke.pixelHinting, stroke.scaleMode, stroke.caps, stroke.joints, stroke.miterLimit);
                    this.lineGradientStyle(gradientFill.type, gradientFill.colors, gradientFill.alphas, gradientFill.ratios, gradientFill.matrix, gradientFill.spreadMethod, gradientFill.interpolationMethod, gradientFill.focalPointRatio);
                }
                else if (fill instanceof display.GraphicsBitmapFill) {
                    bitmapFill = fill;
                    this.lineStyle(stroke.thickness, 0, 1, stroke.pixelHinting, stroke.scaleMode, stroke.caps, stroke.joints, stroke.miterLimit);
                    this.lineBitmapStyle(bitmapFill.bitmapData, bitmapFill.matrix, bitmapFill.repeat, bitmapFill.smooth);
                }
            };
            Graphics.prototype.draw = function (ctx, m, blendMode, colorTransform) {
                this.renderState = true;
                while (this.commands.length) {
                    var args = this.commands.shift();
                    var fn = args.shift();
                    fn.apply(null, args);
                }
                this.renderState = false;
                if (this.graphicsData.length) {
                    this.parent.stage.renderer.renderGraphics(ctx, this, m, blendMode, colorTransform);
                }
            };
            Graphics.debug = false;
            return Graphics;
        }());
        display.Graphics = Graphics;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var api;
(function (api) {
    var odnoklassniki;
    (function (odnoklassniki) {
        var net;
        (function (net) {
            net.Error = global.Error;
            net.EventStats = global.EventStats;
            net.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
            net.Bitmap = flash.display.Bitmap;
            net.BitmapData = flash.display.BitmapData;
            net.Event = flash.events.Event;
            net.IOErrorEvent = flash.events.IOErrorEvent;
            net.ProgressEvent = flash.events.ProgressEvent;
            net.SecurityErrorEvent = flash.events.SecurityErrorEvent;
            net.URLLoader = flash.net.URLLoader;
            net.URLRequest = flash.net.URLRequest;
            net.URLRequestHeader = flash.net.URLRequestHeader;
            net.URLRequestMethod = flash.net.URLRequestMethod;
            net.URLVariables = flash.net.URLVariables;
            net.ByteArray = flash.utils.ByteArray;
            net.PNGEncoderOptions = flash.display.PNGEncoderOptions;
            var OdnoklassnikiRequest = (function () {
                function OdnoklassnikiRequest(url, requestMethod, callback) {
                    if (requestMethod === void 0) { requestMethod = 'GET'; }
                    if (callback === void 0) { callback = null; }
                    this._success = false;
                    this._format = "XML";
                    this._serverUrl = url;
                    this._requestMethod = requestMethod;
                    this._callback = callback;
                }
                OdnoklassnikiRequest.prototype.call = function (method, data, callback, format, url) {
                    if (data === void 0) { data = null; }
                    if (callback === void 0) { callback = null; }
                    if (format === void 0) { format = "JSON"; }
                    if (url === void 0) { url = null; }
                    if (callback != null) {
                        this._callback = callback;
                    }
                    this._method = method;
                    this._format = format;
                    if (method == "photos.upload") {
                        this.uploadPhotos(data, callback, format, url);
                        return;
                    }
                    if (!data)
                        data = {};
                    data['method'] = method;
                    if (!data.sig) {
                        data = net.Odnoklassniki.getSignature(data, false, format);
                    }
                    var req_url = (url) ? url + "fb.do" : this._serverUrl + "fb.do";
                    this.urlRequest = new net.URLRequest(req_url);
                    this.urlRequest.method = this._requestMethod;
                    this.urlRequest.data = this.getUrlVars(data);
                    this.load();
                };
                OdnoklassnikiRequest.prototype.uploadPhotos = function (data, callback, format, url) {
                    if (callback === void 0) { callback = null; }
                    if (format === void 0) { format = "JSON"; }
                    if (url === void 0) { url = null; }
                    if (!data)
                        data = {};
                    data['method'] = "photos.upload";
                    var req_url = (url) ? url + "fb.do" : this._serverUrl + "fb.do";
                    var fileData = [];
                    if (data.files) {
                        for (var i = 0; i < data.files.length; i++) {
                            if (this.isValueFile(data.files[i])) {
                                fileData.push(data.files[i]);
                            }
                        }
                        delete data.files;
                    }
                    data = net.Odnoklassniki.getSignature(data, false, format);
                    req_url += this.getUrlParams(data);
                    this.urlRequest = new net.URLRequest(req_url);
                    if (fileData.length == 0) {
                        this.urlRequest.data = this.getUrlVars(data);
                        this.load();
                        return;
                    }
                    var post = new net.PostRequest();
                    for (i = 0; i < fileData.length; i++) {
                        var file_name = "file_" + (i + 1);
                        if (fileData[i] instanceof net.Bitmap) {
                            fileData[i] = fileData[i].bitmapData;
                        }
                        if (fileData[i] instanceof net.ByteArray) {
                            post.writeFileData(file_name, fileData[i], 'image/jpeg');
                        }
                        else if (fileData[i] instanceof net.BitmapData) {
                            var ba = fileData[i].encode(fileData[i].rect, new net.PNGEncoderOptions());
                            post.writeFileData(file_name, ba, 'image/jpeg');
                        }
                        fileData[i] = null;
                    }
                    fileData = null;
                    post.close();
                    this.urlRequest.method = net.URLRequestMethod.POST;
                    this.urlRequest.data = post.getPostData();
                    this.urlRequest.requestHeaders.push(new net.URLRequestHeader('Content-Type', 'multipart/form-data; boundary=' + post.boundary));
                    this.load();
                };
                OdnoklassnikiRequest.prototype.getUrlParams = function (data) {
                    var s = "?";
                    for (var k in data) {
                        if (k != "files")
                            s += k + "=" + data[k] + "&";
                    }
                    return s;
                };
                OdnoklassnikiRequest.prototype.isValueFile = function (value) {
                    return (value instanceof net.Bitmap || value instanceof net.BitmapData || value instanceof net.ByteArray);
                };
                OdnoklassnikiRequest.prototype.getUrlVars = function (data) {
                    var urlVars = new net.URLVariables();
                    if (data == null) {
                        return urlVars;
                    }
                    for (var s in data) {
                        urlVars[s] = data[s];
                    }
                    return urlVars;
                };
                OdnoklassnikiRequest.prototype.load = function () {
                    this.urlLoader = new net.URLLoader();
                    this.urlLoader.addEventListener(net.Event.COMPLETE, this.onComplete.bind(this), false, 0, false);
                    this.urlLoader.addEventListener(net.IOErrorEvent.IO_ERROR, this.onIOError.bind(this), false, 0, true);
                    this.urlLoader.addEventListener(net.SecurityErrorEvent.SECURITY_ERROR, this.onSecurityError.bind(this), false, 0, true);
                    this.urlLoader.addEventListener(net.ProgressEvent.PROGRESS, this.onProgress.bind(this), false, 0, true);
                    this.urlLoader.load(this.urlRequest);
                };
                OdnoklassnikiRequest.prototype.onComplete = function (e) {
                    net.EventStats.handle(OdnoklassnikiRequest, e);
                    if (this._format == "JSON") {
                        this._data = JSON.parse(this.urlLoader.data);
                        try {
                            this._data.method = this._method;
                        }
                        catch (e) { }
                    }
                    else {
                        this._data = this.urlLoader.data;
                    }
                    this._success = true;
                    this.complete();
                };
                OdnoklassnikiRequest.prototype.complete = function () {
                    this._callback(this);
                    this.close();
                };
                OdnoklassnikiRequest.prototype.onIOError = function (e) {
                    net.EventStats.handle(OdnoklassnikiRequest, e);
                    this._success = false;
                    this.complete();
                };
                OdnoklassnikiRequest.prototype.onSecurityError = function (e) {
                    net.EventStats.handle(OdnoklassnikiRequest, e);
                    if (this._callback != null) {
                        this._callback({ error: "security_error" });
                    }
                };
                OdnoklassnikiRequest.prototype.onProgress = function (e) {
                };
                OdnoklassnikiRequest.prototype.close = function () {
                    if (this.urlLoader != null) {
                        this.urlLoader.removeEventListener(net.Event.COMPLETE, this.onComplete.bind(this));
                        this.urlLoader.removeEventListener(net.IOErrorEvent.IO_ERROR, this.onIOError.bind(this));
                        this.urlLoader.removeEventListener(net.SecurityErrorEvent.SECURITY_ERROR, this.onSecurityError.bind(this));
                        this.urlLoader.removeEventListener(net.ProgressEvent.PROGRESS, this.onProgress.bind(this));
                        try {
                            this.urlLoader.close();
                        }
                        catch (e) { }
                        this.urlLoader = null;
                    }
                };
                Object.defineProperty(OdnoklassnikiRequest.prototype, "data", {
                    get: function () {
                        return this._data;
                    },
                    enumerable: true,
                    configurable: true
                });
                Object.defineProperty(OdnoklassnikiRequest.prototype, "success", {
                    get: function () {
                        return this._success;
                    },
                    enumerable: true,
                    configurable: true
                });
                return OdnoklassnikiRequest;
            }());
            net.OdnoklassnikiRequest = OdnoklassnikiRequest;
        })(net = odnoklassniki.net || (odnoklassniki.net = {}));
    })(odnoklassniki = api.odnoklassniki || (api.odnoklassniki = {}));
})(api || (api = {}));
var deng;
(function (deng) {
    var fzip;
    (function (fzip) {
        fzip.Error = global.Error;
        fzip.Event = flash.events.Event;
        fzip.EventDispatcher = flash.events.EventDispatcher;
        fzip.HTTPStatusEvent = flash.events.HTTPStatusEvent;
        fzip.IOErrorEvent = flash.events.IOErrorEvent;
        fzip.ProgressEvent = flash.events.ProgressEvent;
        fzip.SecurityErrorEvent = flash.events.SecurityErrorEvent;
        fzip.URLRequest = flash.net.URLRequest;
        fzip.URLStream = flash.net.URLStream;
        fzip.ByteArray = flash.utils.ByteArray;
        fzip.Dictionary = flash.utils.Dictionary;
        fzip.Endian = flash.utils.Endian;
        var FZip = (function (_super) {
            __extends(FZip, _super);
            function FZip(filenameEncoding) {
                if (filenameEncoding === void 0) { filenameEncoding = "utf-8"; }
                var _this = _super.call(this) || this;
                _this.ddSignature = 0;
                _this.ddCompressedSize = 0;
                _this.charEncoding = filenameEncoding;
                _this.parseFunc = _this.parseIdle.bind(_this);
                return _this;
            }
            Object.defineProperty(FZip.prototype, "active", {
                get: function () {
                    return (unbind(this.parseFunc) !== this.parseIdle);
                },
                enumerable: true,
                configurable: true
            });
            FZip.prototype.load = function (request) {
                if (!this.urlStream && unbind(this.parseFunc) == this.parseIdle) {
                    this.urlStream = new fzip.URLStream();
                    this.urlStream.endian = fzip.Endian.LITTLE_ENDIAN;
                    this.addEventHandlers();
                    this.filesList = [];
                    this.filesDict = new fzip.Dictionary();
                    this.parseFunc = this.parseSignature.bind(this);
                    this.urlStream.load(request);
                }
            };
            FZip.prototype.loadBytes = function (bytes) {
                if (!this.urlStream && unbind(this.parseFunc) == this.parseIdle) {
                    this.filesList = [];
                    this.filesDict = new fzip.Dictionary();
                    bytes.position = 0;
                    bytes.endian = fzip.Endian.LITTLE_ENDIAN;
                    this.parseFunc = this.parseSignature.bind(this);
                    if (this.parse(bytes)) {
                        this.parseFunc = this.parseIdle.bind(this);
                        this.dispatchEvent(new fzip.Event(fzip.Event.COMPLETE));
                    }
                    else {
                        this.dispatchEvent(new fzip.FZipErrorEvent(fzip.FZipErrorEvent.PARSE_ERROR, "EOF"));
                    }
                }
            };
            FZip.prototype.close = function () {
                if (this.urlStream) {
                    this.parseFunc = this.parseIdle.bind(this);
                    this.removeEventHandlers();
                    this.urlStream.close();
                    this.urlStream = null;
                }
            };
            FZip.prototype.serialize = function (stream, includeAdler32) {
                if (includeAdler32 === void 0) { includeAdler32 = false; }
                if (stream != null && this.filesList.length > 0) {
                    var endian = stream.endian;
                    var ba = new fzip.ByteArray();
                    stream.endian = ba.endian = fzip.Endian.LITTLE_ENDIAN;
                    var offset = 0;
                    var files = 0;
                    for (var i = 0; i < this.filesList.length; i++) {
                        var file = this.filesList[i];
                        if (file != null) {
                            file.serialize(ba, includeAdler32, true, offset);
                            offset += file.serialize(stream, includeAdler32);
                            files++;
                        }
                    }
                    if (ba.length > 0) {
                        stream.writeBytes(ba, 0, 0);
                    }
                    stream.writeUnsignedInt(FZip.SIG_END_OF_CENTRAL_DIRECTORY);
                    stream.writeShort(0);
                    stream.writeShort(0);
                    stream.writeShort(files);
                    stream.writeShort(files);
                    stream.writeUnsignedInt(ba.length);
                    stream.writeUnsignedInt(offset);
                    stream.writeShort(0);
                    stream.endian = endian;
                }
            };
            FZip.prototype.getFileCount = function () {
                return this.filesList ? this.filesList.length : 0;
            };
            FZip.prototype.getFileAt = function (index) {
                return this.filesList ? this.filesList[index] : null;
            };
            FZip.prototype.getFileByName = function (name) {
                return this.filesDict.get(name) ? this.filesDict.get(name) : null;
            };
            FZip.prototype.addFile = function (name, content, doCompress) {
                if (content === void 0) { content = null; }
                if (doCompress === void 0) { doCompress = true; }
                return this.addFileAt(this.filesList ? this.filesList.length : 0, name, content, doCompress);
            };
            FZip.prototype.addFileFromString = function (name, content, charset, doCompress) {
                if (charset === void 0) { charset = "utf-8"; }
                if (doCompress === void 0) { doCompress = true; }
                return this.addFileFromStringAt(this.filesList ? this.filesList.length : 0, name, content, charset, doCompress);
            };
            FZip.prototype.addFileAt = function (index, name, content, doCompress) {
                if (content === void 0) { content = null; }
                if (doCompress === void 0) { doCompress = true; }
                if (this.filesList == null) {
                    this.filesList = [];
                }
                if (this.filesDict == null) {
                    this.filesDict = new fzip.Dictionary();
                }
                else if (this.filesDict.get(name)) {
                    throw (new fzip.Error("File already exists: " + name + ". Please remove first."));
                }
                var file = new fzip.FZipFile();
                file.filename = name;
                file.setContent(content, doCompress);
                if (index >= this.filesList.length) {
                    this.filesList.push(file);
                }
                else {
                    this.filesList.splice(index, 0, file);
                }
                this.filesDict.set(name, file);
                return file;
            };
            FZip.prototype.addFileFromStringAt = function (index, name, content, charset, doCompress) {
                if (charset === void 0) { charset = "utf-8"; }
                if (doCompress === void 0) { doCompress = true; }
                if (this.filesList == null) {
                    this.filesList = [];
                }
                if (this.filesDict == null) {
                    this.filesDict = new fzip.Dictionary();
                }
                else if (this.filesDict.get(name)) {
                    throw (new fzip.Error("File already exists: " + name + ". Please remove first."));
                }
                var file = new fzip.FZipFile();
                file.filename = name;
                file.setContentAsString(content, charset, doCompress);
                if (index >= this.filesList.length) {
                    this.filesList.push(file);
                }
                else {
                    this.filesList.splice(index, 0, file);
                }
                this.filesDict.set(name, file);
                return file;
            };
            FZip.prototype.removeFileAt = function (index) {
                if (this.filesList != null && this.filesDict != null && index < this.filesList.length) {
                    var file = this.filesList[index];
                    if (file != null) {
                        this.filesList.splice(index, 1);
                        this.filesDict.delete(file.filename);
                        return file;
                    }
                }
                return null;
            };
            FZip.prototype.parse = function (stream) {
                while (this.parseFunc(stream)) { }
                return (unbind(this.parseFunc) === this.parseIdle);
            };
            FZip.prototype.parseIdle = function (stream) {
                return false;
            };
            FZip.prototype.parseSignature = function (stream) {
                if (stream.bytesAvailable >= 4) {
                    var sig = stream.readUnsignedInt();
                    switch (sig) {
                        case FZip.SIG_LOCAL_FILE_HEADER:
                            this.parseFunc = this.parseLocalfile.bind(this);
                            this.currentFile = new fzip.FZipFile(this.charEncoding);
                            break;
                        case FZip.SIG_CENTRAL_FILE_HEADER:
                        case FZip.SIG_END_OF_CENTRAL_DIRECTORY:
                        case FZip.SIG_SPANNING_MARKER:
                        case FZip.SIG_DIGITAL_SIGNATURE:
                        case FZip.SIG_ZIP64_END_OF_CENTRAL_DIRECTORY:
                        case FZip.SIG_ZIP64_END_OF_CENTRAL_DIRECTORY_LOCATOR:
                        case FZip.SIG_DATA_DESCRIPTOR:
                        case FZip.SIG_ARCHIVE_EXTRA_DATA:
                        case FZip.SIG_SPANNING:
                            this.parseFunc = this.parseIdle.bind(this);
                            break;
                        default:
                            throw (new fzip.Error("Unknown record signature: 0x" + sig.toString(16)));
                    }
                    return true;
                }
                return false;
            };
            FZip.prototype.parseLocalfile = function (stream) {
                if (this.currentFile.parse(stream)) {
                    if (this.currentFile.hasDataDescriptor) {
                        this.parseFunc = this.findDataDescriptor.bind(this);
                        this.ddBuffer = new fzip.ByteArray();
                        this.ddSignature = 0;
                        this.ddCompressedSize = 0;
                        return true;
                    }
                    else {
                        this.onFileLoaded();
                        if (unbind(this.parseFunc) != this.parseIdle) {
                            this.parseFunc = this.parseSignature.bind(this);
                            return true;
                        }
                    }
                }
                return false;
            };
            FZip.prototype.findDataDescriptor = function (stream) {
                while (stream.bytesAvailable > 0) {
                    var c = stream.readUnsignedByte();
                    this.ddSignature = (this.ddSignature >>> 8) | (c << 24);
                    if (this.ddSignature == FZip.SIG_DATA_DESCRIPTOR) {
                        this.ddBuffer.length -= 3;
                        this.parseFunc = this.validateDataDescriptor.bind(this);
                        return true;
                    }
                    this.ddBuffer.writeByte(c);
                }
                return false;
            };
            FZip.prototype.validateDataDescriptor = function (stream) {
                if (stream.bytesAvailable >= 12) {
                    var ddCRC32 = stream.readUnsignedInt();
                    var ddSizeCompressed = stream.readUnsignedInt();
                    var ddSizeUncompressed = stream.readUnsignedInt();
                    if (this.ddBuffer.length == ddSizeCompressed) {
                        this.ddBuffer.position = 0;
                        this.currentFile._crc32 = ddCRC32;
                        this.currentFile._sizeCompressed = ddSizeCompressed;
                        this.currentFile._sizeUncompressed = ddSizeUncompressed;
                        this.currentFile.parseContent(this.ddBuffer);
                        this.onFileLoaded();
                        this.parseFunc = this.parseSignature.bind(this);
                    }
                    else {
                        this.ddBuffer.writeUnsignedInt(ddCRC32);
                        this.ddBuffer.writeUnsignedInt(ddSizeCompressed);
                        this.ddBuffer.writeUnsignedInt(ddSizeUncompressed);
                        this.parseFunc = this.findDataDescriptor.bind(this);
                    }
                    return true;
                }
                return false;
            };
            FZip.prototype.onFileLoaded = function () {
                this.filesList.push(this.currentFile);
                if (this.currentFile.filename) {
                    this.filesDict.set(this.currentFile.filename, this.currentFile);
                }
                this.dispatchEvent(new fzip.FZipEvent(fzip.FZipEvent.FILE_LOADED, this.currentFile));
                this.currentFile = null;
            };
            FZip.prototype.progressHandler = function (evt) {
                this.dispatchEvent(evt.clone());
                try {
                    if (this.parse(this.urlStream)) {
                        this.close();
                        this.dispatchEvent(new fzip.Event(fzip.Event.COMPLETE));
                    }
                }
                catch (e) {
                    this.close();
                    if (this.hasEventListener(fzip.FZipErrorEvent.PARSE_ERROR)) {
                        this.dispatchEvent(new fzip.FZipErrorEvent(fzip.FZipErrorEvent.PARSE_ERROR, e.message));
                    }
                    else {
                        throw (e);
                    }
                }
            };
            FZip.prototype.defaultHandler = function (evt) {
                this.dispatchEvent(evt.clone());
            };
            FZip.prototype.defaultErrorHandler = function (evt) {
                this.close();
                this.dispatchEvent(evt.clone());
            };
            FZip.prototype.addEventHandlers = function () {
                this.urlStream.addEventListener(fzip.Event.COMPLETE, this.defaultHandler.bind(this));
                this.urlStream.addEventListener(fzip.Event.OPEN, this.defaultHandler.bind(this));
                this.urlStream.addEventListener(fzip.HTTPStatusEvent.HTTP_STATUS, this.defaultHandler.bind(this));
                this.urlStream.addEventListener(fzip.IOErrorEvent.IO_ERROR, this.defaultErrorHandler.bind(this));
                this.urlStream.addEventListener(fzip.SecurityErrorEvent.SECURITY_ERROR, this.defaultErrorHandler.bind(this));
                this.urlStream.addEventListener(fzip.ProgressEvent.PROGRESS, this.progressHandler.bind(this));
            };
            FZip.prototype.removeEventHandlers = function () {
                this.urlStream.removeEventListener(fzip.Event.COMPLETE, this.defaultHandler.bind(this));
                this.urlStream.removeEventListener(fzip.Event.OPEN, this.defaultHandler.bind(this));
                this.urlStream.removeEventListener(fzip.HTTPStatusEvent.HTTP_STATUS, this.defaultHandler.bind(this));
                this.urlStream.removeEventListener(fzip.IOErrorEvent.IO_ERROR, this.defaultErrorHandler.bind(this));
                this.urlStream.removeEventListener(fzip.SecurityErrorEvent.SECURITY_ERROR, this.defaultErrorHandler.bind(this));
                this.urlStream.removeEventListener(fzip.ProgressEvent.PROGRESS, this.progressHandler.bind(this));
            };
            FZip.SIG_CENTRAL_FILE_HEADER = 0x02014b50;
            FZip.SIG_SPANNING_MARKER = 0x30304b50;
            FZip.SIG_LOCAL_FILE_HEADER = 0x04034b50;
            FZip.SIG_DIGITAL_SIGNATURE = 0x05054b50;
            FZip.SIG_END_OF_CENTRAL_DIRECTORY = 0x06054b50;
            FZip.SIG_ZIP64_END_OF_CENTRAL_DIRECTORY = 0x06064b50;
            FZip.SIG_ZIP64_END_OF_CENTRAL_DIRECTORY_LOCATOR = 0x07064b50;
            FZip.SIG_DATA_DESCRIPTOR = 0x08074b50;
            FZip.SIG_ARCHIVE_EXTRA_DATA = 0x08064b50;
            FZip.SIG_SPANNING = 0x08074b50;
            return FZip;
        }(fzip.EventDispatcher));
        fzip.FZip = FZip;
    })(fzip = deng.fzip || (deng.fzip = {}));
})(deng || (deng = {}));
var api;
(function (api) {
    var vk;
    (function (vk) {
        vk.Error = global.Error;
        vk.CONFIG = global.CONFIG;
        vk.EventStats = global.EventStats;
        vk.ExternalInterfaceAsync = global.ExternalInterfaceAsync;
        vk.GLog = global.GLog;
        vk.VKCallbackEvent = api.vk.events.VKCallbackEvent;
        vk.VKServerEvent = api.vk.events.VKServerEvent;
        vk.Event = flash.events.Event;
        vk.EventDispatcher = flash.events.EventDispatcher;
        vk.IOErrorEvent = flash.events.IOErrorEvent;
        vk.SecurityErrorEvent = flash.events.SecurityErrorEvent;
        vk.ExternalInterface = flash.external.ExternalInterface;
        vk.URLLoader = flash.net.URLLoader;
        vk.URLLoaderDataFormat = flash.net.URLLoaderDataFormat;
        vk.URLRequest = flash.net.URLRequest;
        vk.ByteArray = flash.utils.ByteArray;
        vk.MultipartURLLoader = s3eUtils.MultipartURLLoader;
        var VKJSBridge = (function () {
            function VKJSBridge() {
                throw new vk.Error("Abstract class error");
            }
            VKJSBridge.addEventListener = function (type, listener) {
                if (!VKJSBridge.dispatcher)
                    VKJSBridge.dispatcher = new vk.EventDispatcher;
                VKJSBridge.dispatcher.addEventListener(type, listener);
            };
            VKJSBridge.removeEventListener = function (type, listener) {
                if (!VKJSBridge.dispatcher)
                    VKJSBridge.dispatcher = new vk.EventDispatcher;
                VKJSBridge.dispatcher.removeEventListener(type, listener);
            };
            VKJSBridge.hasEventListener = function (type) {
                if (!VKJSBridge.dispatcher)
                    VKJSBridge.dispatcher = new vk.EventDispatcher;
                VKJSBridge.dispatcher.hasEventListener(type);
            };
            VKJSBridge.initialize = function (appId) {
                try {
                    if (vk.ExternalInterface.available) {
                        VKJSBridge.script_js =
                            "function() {\n\t\t\t\t\t\t\tVKAS = {\n\t\t\t\t\t\t\t logEnabled: true,\n\t\t\t\t\t\t\t logSupported: function () {return VKAS.logEnabled && window.console && window.console.log;},\n\t\t\t\t\t\t\t inviteCallbackId:0,\n\t\t\t\t\t\t\t setSWFObjectID: function(swfObjectID) {\t\t\t       \n\t\t\t\t\t\t\t\tVKAS.swfObjectID = swfObjectID;\n\t\t\t\t\t\t\t },\n\t\t\t\t\n\t\t\t\t\t\t\t getSwf: function () {\n\t\t\t\t\t\t\t\treturn document.getElementById(VKAS.swfObjectID);\n\t\t\t\t\t\t\t },\n\t\t\t\t\n\t\t\t\t\t\t\t init: function (logEnabled)\n\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\t// Log enable\n\t\t\t\t\t\t\t\tVKAS.logEnabled = logEnabled;\n\t\t\t\t\n\t\t\t\t\t\t\t\t// Already inited in the page side\n\t\t\t\t\t\t\t\t/*VKAS.initSuccess();\n\t\t\t\t\t\t\t\treturn;*/\n\t\t\t\t\n\t\t\t\t\t\t\t\tif (VKAS.logSupported()) trace('[VKAS] init call');\n\t\t\t\t\t\t\t\t//var rParams = FAPI.Util.getRequestParameters();\n\t\t\t\t\t\t\t\t//if (VKAS.logSupported()) trace('[VKAS] ' + rParams)\n\t\t\t\t\t\t\t\tVK.init(VKAS.initSuccess, VKAS.initError,'5.131');\n\t\t\t\t\n\t\t\t\t\t\t \n\t\t\t\t\t\t\t },\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t initSuccess: function ()\n\t\t\t\t\t\t\t {\t\t          \n\t\t\t\t\t\t\t\tVK.addCallback(\"onRequestSuccess\",function() {\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t\t VKAS.getSwf().apiCallback(VKAS.inviteCallbackId, {response:\"Success\"});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tVK.addCallback(\"onRequestCancel\",function() {\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t\t VKAS.getSwf().apiCallback(VKAS.inviteCallbackId, {response:\"Cancel\"});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tVK.addCallback(\"onRequestFail\",function() {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tVKAS.getSwf().apiCallback(VKAS.inviteCallbackId, {response:\"Fail\"});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tVK.addCallback('onOrderSuccess', function(order_id) {\n\t\t\t\t\t\t\t\t  VKAS.getSwf().purchaseCallback(\"showPayment\", \"ok\",order_id);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tVK.addCallback('onOrderFail', function() {\n\t\t\t\t\t\t\t\t  VKAS.getSwf().purchaseCallback(\"showPayment\", \"fail\",\"onOrderFail\");\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tVK.addCallback('onOrderCancel', function() {\n\t\t\t\t\t\t\t\tVKAS.getSwf().purchaseCallback(\"showPayment\", \"fail\",\"onOrderCancel\");\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t//VK.Widgets.Like(\"vk_like\", {type:\"button\", pageTitle:\"some text\", text:\"some text\"}, 1);\n\t\t\t\t\t\t\t\tif (VKAS.logSupported()) trace('[VKAS] init complete',VKAS.getSwf());\n\t\t\t\t\t\t\t\tVKAS.getSwf().initSuccess();\n\t\t\t\t\t\n\t\t\t\t\t\t\t },\n\t\t \n\t\t\t\t\t\t\t initError: function (error)\n\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\tif (VKAS.logSupported()) trace('[VKAS] init error');\n\t\t\t\t\t\t\t\tVKAS.getSwf().initError(error);\n\t\t\t\t\t\t\t },\n\t\t \n\t\t\t\t\t\t\t apiCall: function (requestKey, method, params)\n\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\tif (!params) params = {};\n\t\t\t\t\t\t\t\t//params['method'] = method;\n\t\t\t\t\t\t\t\tVK.api(method,params, function (response) {\n\t\t\t\t\t\t\t\t VKAS.getSwf().apiCallback(requestKey, response);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t },\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t methodCall: function (requestKey,method, params)\n\t\t\t\t\t\t\t {\n\t\t\t\t\t\t\t\tswitch (method) {\n\t\t\t\t\t\t\t\t\tcase 'showInvite':\n\t\t\t\t\t\t\t\t\t\tVK.callMethod(\"showInviteBox\");\n\t\t\t\t\t\t\t\t\t\tbreak;\t\n\t\t\t\t\t\t\t\t\tcase 'showInviteFriends':\n\t\t\t\t\t\t\t\t\t\tVKAS.inviteCallbackId = requestKey;\n\t\t\t\t\t\t\t\t\t\tVK.callMethod(\"showRequestBox\",params.uid,params.message);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t  default:\n\t\t\t\t\t\t\tVK.callMethod(method,params);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t }, \n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t }";
                        vk.ExternalInterface.call(VKJSBridge.script_js);
                        vk.ExternalInterface.call("VKAS.setSWFObjectID", vk.ExternalInterface.objectID);
                    }
                    else {
                        return;
                    }
                }
                catch (error) {
                    vk.GLog.print("error: " + error.message);
                    return;
                }
                VKJSBridge.appId = appId;
                VKJSBridge.apiHandlers = new Object;
                VKJSBridge.supported = true;
                vk.ExternalInterface.addCallback("apiCallback", apiCallback.bind(this));
                vk.ExternalInterface.addCallback("initSuccess", initSuccess.bind(this));
                vk.ExternalInterface.addCallback("initError", initError.bind(this));
                vk.ExternalInterface.addCallback("purchaseCallback", purchaseCallback.bind(this));
                vk.ExternalInterface.call("VKAS.init", vk.CONFIG.QA_VERSION);
                function purchaseCallback(method, result, data) {
                    if (!VKJSBridge.dispatcher)
                        return;
                    VKJSBridge.dispatcher.dispatchEvent(new vk.VKCallbackEvent(vk.VKCallbackEvent.CALL_BACK, false, false, method, result, data));
                }
                function apiCallback(requestKey, params) {
                    VKJSBridge.callApiHandler(requestKey, params);
                }
                function initSuccess() {
                    if (!VKJSBridge.dispatcher)
                        return;
                    VKJSBridge.dispatcher.dispatchEvent(new vk.VKServerEvent(vk.VKServerEvent.CONNECTED));
                }
                function initError(error) {
                    if (!VKJSBridge.dispatcher)
                        return;
                    VKJSBridge.dispatcher.dispatchEvent(new vk.VKServerEvent(vk.VKServerEvent.CONNECTION_ERROR, error));
                }
            };
            VKJSBridge.getCurrentUser = function (callback) {
                if (!VKJSBridge.supported)
                    return;
                vk.ExternalInterfaceAsync("VKAS.apiCall", VKJSBridge.addApiHandler(callback), "users.get", VKJSBridge.safe({ test_mode: VKJSBridge.DEBUG, fields: ["sex", "nickname", "photo_50"] }));
            };
            VKJSBridge.getAllFriends = function (callback, uid) {
                if (!VKJSBridge.supported)
                    return;
                vk.ExternalInterfaceAsync("VKAS.apiCall", VKJSBridge.addApiHandler(callback), "friends.get", VKJSBridge.safe({ test_mode: VKJSBridge.DEBUG, fields: ["sex", "nickname", "photo_50"], user_id: uid }));
            };
            VKJSBridge.getAppFriends = function (callback) {
                if (!VKJSBridge.supported)
                    return;
                vk.ExternalInterfaceAsync("VKAS.apiCall", VKJSBridge.addApiHandler(callback), "friends.getAppUsers", VKJSBridge.safe({ test_mode: VKJSBridge.DEBUG }));
            };
            VKJSBridge.getInfo = function (uids, fields, callback) {
                if (!VKJSBridge.supported)
                    return;
                if (!uids)
                    uids = [];
                if (uids.length > 100)
                    uids.length = 100;
                vk.ExternalInterfaceAsync("VKAS.apiCall", VKJSBridge.addApiHandler(callback), "users.get", VKJSBridge.safe({ user_ids: uids, fields: fields, test_mode: VKJSBridge.DEBUG }));
            };
            VKJSBridge.getUserGroups = function (uid, count, callback) {
                if (!VKJSBridge.supported)
                    return;
                vk.ExternalInterfaceAsync("VKAS.apiCall", VKJSBridge.addApiHandler(callback), "groups.get", VKJSBridge.safe({ user_id: uid, count: count, test_mode: VKJSBridge.DEBUG }));
            };
            VKJSBridge.showInvite = function (message, uids, callback) {
                if (!VKJSBridge.supported)
                    return;
                if (uids) {
                    var friendsArray = uids.split(",");
                    if (friendsArray.length > 5) {
                        friendsArray.length = 5;
                    }
                    var counter = 0;
                    var responses = [];
                    function friendsInviteCallback(response) {
                        counter += 1;
                        responses.push(response);
                        if (counter < friendsArray.length) {
                            vk.ExternalInterface.call("VKAS.methodCall", VKJSBridge.addApiHandler(friendsInviteCallback.bind(this)), "showInviteFriends", { message: message, uid: friendsArray[counter] });
                        }
                        else {
                            var responseArray = [];
                            var i = 0;
                            var friendsLength = friendsArray.length;
                            for (i = 0; i < friendsLength; i++) {
                                if (responses[i].response == "Success") {
                                    responseArray.push(friendsArray[i]);
                                }
                            }
                            callback(responseArray);
                        }
                    }
                    vk.ExternalInterfaceAsync("VKAS.methodCall", VKJSBridge.addApiHandler(friendsInviteCallback.bind(this)), "showInviteFriends", { message: message, uid: friendsArray[counter] });
                }
                else {
                    vk.ExternalInterfaceAsync("VKAS.methodCall", 0, "showInvite", {});
                }
            };
            VKJSBridge.showWallPost = function (message, uids, callback, attachments) {
                if (attachments === void 0) { attachments = null; }
                if (!VKJSBridge.supported)
                    return;
                if (uids) {
                    if (message && VKJSBridge.appId) {
                        message += "\n\n";
                        message += "http://vk.com/app" + VKJSBridge.appId + "?method=wall.post";
                    }
                    var usersID = uids.split(",");
                    var counter = 0;
                    var responses = [];
                    var callParams = {
                        owner_id: usersID[counter],
                        message: message,
                        test_mode: VKJSBridge.DEBUG
                    };
                    var imageURL;
                    var imageExt;
                    var imageLoader;
                    var imageData;
                    var upload_url;
                    var serverLoader;
                    for (var _i = 0, attachments_1 = attachments; _i < attachments_1.length; _i++) {
                        var url = attachments_1[_i];
                        if (!url)
                            continue;
                        url = url.toLowerCase();
                        if (url.indexOf("photo") != -1 && url.indexOf("_") != -1) {
                            VKJSBridge.log("Пост на стену уже загруженной картинки");
                            callParams.attachments = url;
                            wallPost.bind(this)();
                            return;
                        }
                        if (url.indexOf(".png") != -1)
                            imageExt = "png";
                        else if (url.indexOf(".jpg") != -1 ||
                            url.indexOf(".jpeg") != -1)
                            imageExt = "jpg";
                        else if (url.indexOf(".bmp") != -1)
                            imageExt = "bmp";
                        else if (url.indexOf(".gif") != -1)
                            imageExt = "gif";
                        if (imageExt) {
                            imageURL = url;
                            break;
                        }
                    }
                    if (imageURL) {
                        VKJSBridge.log("Пост на стену с картинкой -> " + imageURL);
                        loadImage.bind(this)();
                    }
                    else {
                        VKJSBridge.log("Пост на стену без картинки");
                        wallPost.bind(this)();
                    }
                    function loadImage() {
                        imageLoader = new vk.URLLoader;
                        imageLoader.dataFormat = vk.URLLoaderDataFormat.BINARY;
                        imageLoader.addEventListener(vk.IOErrorEvent.IO_ERROR, getImageOnError.bind(this));
                        imageLoader.addEventListener(vk.SecurityErrorEvent.SECURITY_ERROR, getImageOnError.bind(this));
                        imageLoader.addEventListener(vk.Event.COMPLETE, getImageOnComplete.bind(this));
                        imageLoader.load(new vk.URLRequest(imageURL));
                    }
                    function getImageOnComplete(event) {
                        vk.EventStats.handle(VKJSBridge, event);
                        VKJSBridge.log("getImageOnComplete -> " + (imageLoader.data ? imageLoader.data.length : 0));
                        imageData = imageLoader.data;
                        disposeImageLoader.bind(this)();
                        vk.ExternalInterface.call("VKAS.apiCall", VKJSBridge.addApiHandler(getWallUploadServerCallback.bind(this)), "photos.getWallUploadServer", VKJSBridge.safe());
                    }
                    function getImageOnError(event) {
                        vk.EventStats.handle(VKJSBridge, event);
                        VKJSBridge.log("getImageOnError -> " + event.text);
                        disposeImageLoader.bind(this)();
                        wallPost.bind(this)();
                    }
                    function disposeImageLoader() {
                        if (imageLoader) {
                            imageLoader.removeEventListener(vk.IOErrorEvent.IO_ERROR, getImageOnError.bind(this));
                            imageLoader.removeEventListener(vk.SecurityErrorEvent.SECURITY_ERROR, getImageOnError.bind(this));
                            imageLoader.removeEventListener(vk.Event.COMPLETE, getImageOnComplete.bind(this));
                            imageLoader.close();
                            imageLoader = null;
                        }
                    }
                    function getWallUploadServerCallback(response) {
                        if (!response) {
                            VKJSBridge.log("Ошибка получения сервера для загрузки картинки -> пустой ответ");
                            wallPost.bind(this)();
                            return;
                        }
                        upload_url = 'response' in response ? response.response.upload_url : null;
                        if (!upload_url || upload_url == "") {
                            VKJSBridge.log("Ошибка получения сервера для загрузки картинки -> не удалось взять response.upload_url из JSON");
                            wallPost.bind(this)();
                            return;
                        }
                        postWallUploadServer.bind(this)();
                    }
                    function postWallUploadServer() {
                        serverLoader = new vk.MultipartURLLoader;
                        serverLoader.addEventListener(vk.IOErrorEvent.IO_ERROR, postImageOnError.bind(this));
                        serverLoader.addEventListener(vk.SecurityErrorEvent.SECURITY_ERROR, postImageOnError.bind(this));
                        serverLoader.addEventListener(vk.Event.COMPLETE, postImageOnComplete.bind(this));
                        serverLoader.addFile(imageData, "file." + imageExt, "photo", "image/" + imageExt);
                        serverLoader.load(upload_url);
                    }
                    function postImageOnComplete(event) {
                        vk.EventStats.handle(VKJSBridge, event);
                        VKJSBridge.log("postImageOnComplete");
                        try {
                            var obj = JSON.parse(serverLoader.loader.data);
                            disposeServerLoader.bind(this)();
                        }
                        catch (error) {
                            VKJSBridge.log("Ошибка загрузки картинки на сервер VK -> ответ не является валидным JSON");
                            disposeServerLoader.bind(this)();
                            wallPost.bind(this)();
                            return;
                        }
                        vk.ExternalInterface.call("VKAS.apiCall", VKJSBridge.addApiHandler(saveWallPhotoCallback.bind(this)), "photos.saveWallPhoto", VKJSBridge.safe(obj));
                    }
                    function postImageOnError(event) {
                        vk.EventStats.handle(VKJSBridge, event);
                        VKJSBridge.log("postImageOnError -> " + event.text);
                        disposeServerLoader.bind(this)();
                        wallPost.bind(this)();
                    }
                    function disposeServerLoader() {
                        if (serverLoader) {
                            serverLoader.removeEventListener(vk.IOErrorEvent.IO_ERROR, postImageOnError.bind(this));
                            serverLoader.removeEventListener(vk.SecurityErrorEvent.SECURITY_ERROR, postImageOnError.bind(this));
                            serverLoader.removeEventListener(vk.Event.COMPLETE, postImageOnComplete.bind(this));
                            serverLoader.close();
                            serverLoader = null;
                        }
                    }
                    function saveWallPhotoCallback(response) {
                        if (!response) {
                            VKJSBridge.log("Ошибка сохранения картинки на сервер VK -> пустой ответ");
                            wallPost.bind(this)();
                            return;
                        }
                        try {
                            var photo = 'response' in response ? (response.response["0"] ? response.response["0"] : null) : null;
                            var newPhotoId = "photo" + photo.owner_id + "_" + photo.id;
                        }
                        catch (error) {
                            VKJSBridge.log("Ошибка сохранения картинки на сервер VK -> ответ не является валидным JSON");
                            wallPost.bind(this)();
                            return;
                        }
                        if (!newPhotoId || newPhotoId == "") {
                            VKJSBridge.log("Ошибка сохранения картинки на сервер VK -> не удалось взять response.photo.id из JSON");
                            wallPost.bind(this)();
                            return;
                        }
                        callParams.attachments = newPhotoId;
                        wallPost.bind(this)();
                    }
                    function wallPost() {
                        vk.ExternalInterfaceAsync("VKAS.apiCall", VKJSBridge.addApiHandler(wallPostCallback.bind(this)), "wall.post", VKJSBridge.safe(callParams));
                    }
                    function wallPostCallback(response) {
                        counter += 1;
                        responses.push(response);
                        if (counter < usersID.length) {
                            callParams.owner_id = usersID[counter];
                            wallPost.bind(this)();
                        }
                        else {
                            var responseArray = [];
                            var i = 0;
                            var friendsLength = usersID.length;
                            for (i = 0; i < friendsLength; i++) {
                                if ("response" in responses[i]) {
                                    responseArray.push(usersID[i]);
                                }
                                if ("error" in responses[i]) {
                                    trace("[VKAS Wallpost error] " + responses[i].error.error_msg);
                                }
                            }
                            callback(responseArray);
                        }
                    }
                }
            };
            VKJSBridge.showPayment = function (itemId, type, currency, votesNum) {
                if (type === void 0) { type = "item"; }
                if (currency === void 0) { currency = false; }
                if (votesNum === void 0) { votesNum = 0; }
                if (!VKJSBridge.supported)
                    return;
                switch (type) {
                    case "item":
                        vk.ExternalInterfaceAsync("VKAS.methodCall", 0, "showOrderBox", { type: type, item: itemId });
                        break;
                    case "votes":
                        vk.ExternalInterfaceAsync("VKAS.methodCall", 0, "showOrderBox", { type: type, votes: votesNum });
                        break;
                    case "offers":
                        vk.ExternalInterfaceAsync("VKAS.methodCall", 0, "showOrderBox", { type: type, offer_id: itemId, currency: currency });
                        break;
                }
            };
            VKJSBridge.addApiHandler = function (handler) {
                if (handler == null)
                    return -1;
                VKJSBridge.apiKey++;
                VKJSBridge.apiHandlers[VKJSBridge.apiKey] = handler;
                return VKJSBridge.apiKey;
            };
            VKJSBridge.callApiHandler = function (apiKey, data) {
                var handler = VKJSBridge.apiHandlers[apiKey];
                if (handler == null)
                    return;
                handler(data);
                delete VKJSBridge.apiHandlers[apiKey];
            };
            VKJSBridge.safe = function (value) {
                if (value === void 0) { value = null; }
                var obj = {};
                for (var s in value)
                    if (value[s])
                        obj[s] = value[s];
                return obj;
            };
            VKJSBridge.log = function (message) {
                vk.GLog.print(VKJSBridge.TAG + message);
            };
            VKJSBridge.TAG = "[VKJS] ";
            VKJSBridge.DEBUG = 0;
            VKJSBridge.supported = false;
            VKJSBridge.apiKey = 0;
            return VKJSBridge;
        }());
        vk.VKJSBridge = VKJSBridge;
    })(vk = api.vk || (api.vk = {}));
})(api || (api = {}));
var datas;
(function (datas) {
    datas.Error = global.Error;
    datas.ASViewer = global.ASViewer;
    datas.CONFIG = global.CONFIG;
    datas.EventStats = global.EventStats;
    datas.GLog = global.GLog;
    datas.ErrorType = errors.ErrorType;
    datas.ErrorEvent = flash.events.ErrorEvent;
    datas.Event = flash.events.Event;
    datas.HTTPStatusEvent = flash.events.HTTPStatusEvent;
    datas.IOErrorEvent = flash.events.IOErrorEvent;
    datas.ProgressEvent = flash.events.ProgressEvent;
    datas.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    datas.URLLoader = flash.net.URLLoader;
    datas.URLLoaderDataFormat = flash.net.URLLoaderDataFormat;
    datas.URLRequest = flash.net.URLRequest;
    datas.ByteArray = flash.utils.ByteArray;
    datas.Dictionary = flash.utils.Dictionary;
    datas.Endian = flash.utils.Endian;
    datas.getTimer = flash.utils.getTimer;
    datas.CrashParam = tools.CrashParam;
    datas.mbsec = tools.mbsec;
    var AssetsData = (function () {
        function AssetsData() {
            throw new datas.Error("Abstract class Error.");
        }
        AssetsData.packInfo = function (pack, type, url, md5, size, partsNum) {
            if (!AssetsData.asset) {
                AssetsData.asset = new datas.ByteArray;
                AssetsData.map = new datas.Dictionary;
                AssetsData.emptyData = new datas.ByteArray;
            }
            if (AssetsData.packs[pack] == undefined) {
                var loader = new datas.URLLoader;
                loader.dataFormat = datas.URLLoaderDataFormat.BINARY;
                loader.addEventListener(datas.Event.COMPLETE, AssetsData.onLoadPackComplete.bind(this));
                loader.addEventListener(datas.ProgressEvent.PROGRESS, AssetsData.onLoadPackProgress.bind(this));
                loader.addEventListener("httpResponseStatus", AssetsData.onLoadPackResponseStatus.bind(this));
                loader.addEventListener(datas.HTTPStatusEvent.HTTP_STATUS, AssetsData.onLoadPackStatus.bind(this));
                loader.addEventListener(datas.IOErrorEvent.IO_ERROR, AssetsData.onLoadPackError.bind(this));
                loader.addEventListener(datas.SecurityErrorEvent.SECURITY_ERROR, AssetsData.onLoadPackError.bind(this));
                if (type == 0) {
                    url = "imgs/res.dat";
                }
                AssetsData.packs[pack] = {
                    id: pack,
                    type: type,
                    url: url,
                    requestUrl: null,
                    md5: md5,
                    parts: partsNum,
                    loader: loader,
                    percent: 0,
                    loading: false,
                    startedAt: 0,
                    bytesLoaded: 0,
                    bytesTotal: size,
                    status: [],
                    requestHeader: [],
                    responseHeader: [],
                    data: null,
                    background: false,
                    loadTimestamp: 0,
                    reconnect: 0
                };
                AssetsData.map.set(loader, {
                    pack: pack,
                    complete: [],
                    error: [],
                    progress: []
                });
            }
        };
        AssetsData.getAsset = function (pack, fid, callback) {
            if (callback == null)
                return;
            var withArgs = unbind(callback).length > 0;
            if (AssetsData.packs[pack] != undefined) {
                if (AssetsData.packs[pack].data != null) {
                    send.bind(this)();
                }
                else {
                    AssetsData.loadPack(pack, send.bind(this), error.bind(this));
                }
            }
            else
                error.bind(this)();
            function send() {
                if (withArgs) {
                    callback(AssetsData.read(pack, fid));
                }
                else {
                    AssetsData.read(pack, fid, AssetsData.asset);
                    callback();
                }
            }
            function error() {
                if (withArgs)
                    callback(null);
                else
                    callback();
            }
        };
        Object.defineProperty(AssetsData, "isPercentLoadedLocked", {
            get: function () {
                return AssetsData.locked;
            },
            enumerable: true,
            configurable: true
        });
        AssetsData.lockPercentLoaded = function (value) {
            if (value == AssetsData.locked) {
                return;
            }
            AssetsData.locked = value;
            if (!AssetsData.locked) {
                return;
            }
            for (var pack in AssetsData.packs) {
                AssetsData.checkLock(AssetsData.packs[pack]);
            }
        };
        AssetsData.percentLoaded = function () {
            var SKIP_SHORT_LOADING = 500;
            var timestamp = datas.getTimer();
            var p = 0;
            var num = 0;
            for (var pack in AssetsData.packs) {
                if (AssetsData.packs[pack].locked) {
                    continue;
                }
                if (timestamp - AssetsData.packs[pack].loadTimestamp < SKIP_SHORT_LOADING) {
                    continue;
                }
                if ((AssetsData.packs[pack].loading || AssetsData.packs[pack].data)) {
                    num++;
                    p += AssetsData.packs[pack].percent;
                }
            }
            return num ? p / num : 0;
        };
        Object.defineProperty(AssetsData, "packLoading", {
            get: function () {
                AssetsData.sHelperVector.length = 0;
                for (var packId in AssetsData.packs) {
                    var pack = AssetsData.packs[packId];
                    if (pack.loading && !pack.data && !pack.background) {
                        AssetsData.sHelperVector[AssetsData.sHelperVector.length] = packId + ' (' + pack.bytesLoaded + "/" + pack.bytesTotal + ')';
                    }
                }
                return AssetsData.sHelperVector;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(AssetsData, "packLoadingCount", {
            get: function () {
                var count = 0;
                for (var packId in AssetsData.packs) {
                    var pack = AssetsData.packs[packId];
                    if (pack && pack.loading && !pack.data && !pack.background) {
                        count++;
                    }
                }
                return count;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(AssetsData, "packDetails", {
            get: function () {
                AssetsData.sHelperVector.length = 0;
                AssetsData.sHelperVector[AssetsData.sHelperVector.length] = '<br>sDestinationCreated=' + AssetsData.sDestinationCreated;
                var pack;
                var str;
                for (var packId in AssetsData.packs) {
                    pack = AssetsData.packs[packId];
                    if (!pack) {
                        continue;
                    }
                    str = '<br>id=' + packId;
                    add('type', false);
                    add('loading');
                    add('background');
                    add('requestUrl');
                    add('bytesLoaded');
                    add('bytesTotal');
                    add('data');
                    AssetsData.sHelperVector[AssetsData.sHelperVector.length] = str;
                }
                function add(field, onlyPositive) {
                    if (onlyPositive === void 0) { onlyPositive = true; }
                    if (!pack || !str) {
                        return;
                    }
                    if (field in pack && ((onlyPositive && pack[field]) || !onlyPositive)) {
                        var uint16;
                        var bytes;
                        var value;
                        if (pack[field] instanceof datas.ByteArray) {
                            value = '';
                            bytes = pack[field];
                            bytes.position = 0;
                            while (bytes.bytesAvailable && bytes.position < 64) {
                                uint16 = bytes.readUnsignedByte().toString(16).toUpperCase();
                                value += (uint16.length == 1 ? '0' + uint16 : uint16) + ' ';
                            }
                        }
                        else {
                            value = pack[field];
                        }
                        str += ', ' + field + '=' + value;
                    }
                }
                return AssetsData.sHelperVector;
            },
            enumerable: true,
            configurable: true
        });
        AssetsData.loadPack = function (pack, complete, error, progress, inBackground) {
            if (complete === void 0) { complete = null; }
            if (error === void 0) { error = null; }
            if (progress === void 0) { progress = null; }
            if (inBackground === void 0) { inBackground = false; }
            if (AssetsData.packs[pack] != undefined) {
                if (AssetsData.packs[pack].data) {
                    if (complete != null) {
                        complete();
                    }
                    return;
                }
                if (AssetsData.packs[pack].type == AssetsData.PACK_NETWORK) {
                    if (complete != null) {
                        AssetsData.map.get(AssetsData.packs[pack].loader).complete.push(complete);
                    }
                    if (progress != null) {
                        AssetsData.map.get(AssetsData.packs[pack].loader).progress.push(progress);
                    }
                    if (error != null) {
                        AssetsData.map.get(AssetsData.packs[pack].loader).error.push(error);
                    }
                    if (!AssetsData.packs[pack].loading || AssetsData.packs[pack].reload) {
                        AssetsData.packs[pack].background = inBackground;
                        AssetsData.packs[pack].loading = true;
                        AssetsData.packs[pack].loadTimestamp = datas.getTimer();
                        AssetsData.checkLock(AssetsData.packs[pack]);
                        AssetsData.packs[pack].startedAt = new Date().time;
                        AssetsData.requestPack(pack, datas.CONFIG.getStorage() + AssetsData.packs[pack].url);
                    }
                    else if (!inBackground && AssetsData.packs[pack].background) {
                        AssetsData.packs[pack].background = false;
                        AssetsData.checkLock(AssetsData.packs[pack]);
                    }
                }
                else if (AssetsData.packs[pack].type == AssetsData.PACK_LOCAL) {
                    var u8 = FS.readFile(AssetsData.packs[pack].url, { encoding: 'binary' });
                    if (u8) {
                        AssetsData.packs[pack].data = new datas.ByteArray().fromArrayBuffer(u8.buffer);
                        AssetsData.packs[pack].data.endian = datas.Endian.LITTLE_ENDIAN;
                        AssetsData.checkLock(AssetsData.packs[pack]);
                        if (complete != null)
                            complete();
                    }
                    else if (error != null) {
                        error();
                    }
                }
                else {
                    throw new datas.Error("Invalid pack type=" + AssetsData.packs[pack].type);
                }
            }
            else if (error != null) {
                error();
            }
        };
        AssetsData.requestPack = function (pack, url) {
            datas.GLog.print("[AssetsData] requestPack " + pack);
            var obj = AssetsData.packs[pack];
            if (obj.parts > 1) {
                AssetsData.requestPack_parts(pack, url);
                return;
            }
            var request = new datas.URLRequest(url);
            if ("requestHeaders" in request && request["requestHeaders"] instanceof Array && request["requestHeaders"].length > 0) {
                AssetsData.packs[pack].requestHeader.push(request["requestHeaders"].join(";"));
            }
            obj.loader.load(request);
            obj.requestUrl = request.url;
        };
        AssetsData.requestPack_parts = function (pack, url) {
            free();
            var obj = AssetsData.packs[pack];
            var len = obj.parts;
            var ba = new datas.ByteArray;
            var bytes = new Array(len);
            var spt = url.split('.dat');
            for (var i = 0; i < len; ++i) {
                var l = new datas.URLLoader;
                l.dataFormat = datas.URLLoaderDataFormat.BINARY;
                l.addEventListener(datas.Event.COMPLETE, onComplete.bind(this));
                l.addEventListener(datas.ProgressEvent.PROGRESS, onProgress.bind(this));
                l.addEventListener(datas.IOErrorEvent.IO_ERROR, onError.bind(this));
                l.addEventListener(datas.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
                l.load(new datas.URLRequest(spt[0] + '_' + i + '.dat' + spt[1]));
                AssetsData.extraLoaders[pack] = AssetsData.extraLoaders[pack] || [];
                AssetsData.extraLoaders[pack].push(l);
            }
            function onProgress(event) {
                var loader = event.target;
                var bytesLoaded = 0;
                for (var _i = 0, _a = AssetsData.extraLoaders[pack]; _i < _a.length; _i++) {
                    var l = _a[_i];
                    bytesLoaded += l.bytesLoaded;
                }
                var obj = AssetsData.packs[pack];
                obj.bytesLoaded = bytesLoaded;
                obj.percent = Math.max(Math.min(obj.bytesLoaded / obj.bytesTotal, 1), 0);
                if (!obj.background) {
                    datas.ASViewer.instance.AssetsData_changeStatus(obj.id, obj.percent);
                }
            }
            function onComplete(event) {
                var loader = event.target;
                var index = loaderIndex(loader);
                bytes[index] = loader.data;
                var isComplete = AssetsData.extraLoaders[pack].length === bytes.filter(function (b, index, arr) { return b instanceof datas.ByteArray; }).length;
                if (!isComplete) {
                    return;
                }
                free();
                for (var i = 0; i < bytes.length; ++i)
                    ba.writeBytes(bytes[i]);
                AssetsData.onLoadPackComplete({ type: datas.Event.COMPLETE, target: AssetsData.packs[pack].loader, data: ba });
            }
            function onError(error) {
                free();
                AssetsData.onLoadPackError({ target: AssetsData.packs[pack].loader, text: error.text });
            }
            function free() {
                if (!AssetsData.extraLoaders[pack]) {
                    return;
                }
                for (var i = 0; i < AssetsData.extraLoaders[pack].length; ++i) {
                    var l = AssetsData.extraLoaders[pack][i];
                    l.removeEventListener(datas.Event.COMPLETE, onComplete.bind(this));
                    l.removeEventListener(datas.ProgressEvent.PROGRESS, onProgress.bind(this));
                    l.removeEventListener(datas.IOErrorEvent.IO_ERROR, onError.bind(this));
                    l.removeEventListener(datas.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
                    try {
                        l.close();
                    }
                    catch (e) { }
                }
            }
            function loaderIndex(l) {
                for (var i = 0; i < AssetsData.extraLoaders[pack].length; ++i) {
                    if (AssetsData.extraLoaders[pack][i] === l) {
                        return i;
                    }
                }
                return -1;
            }
        };
        AssetsData.checkLock = function (pack) {
            if (!pack) {
                return;
            }
            pack.locked = pack.data || !pack.loading || pack.background;
        };
        AssetsData.read = function (pack, fid, dest) {
            if (dest === void 0) { dest = null; }
            var src = AssetsData.packs[pack].data;
            try {
                src.position = fid * 10;
                src.readShort();
                var start = src.readUnsignedInt();
                var len = src.readUnsignedInt();
                AssetsData.sDestinationCreated = false;
                dest = dest || AssetsData.createDestination();
                if (dest.length)
                    dest.clear();
                if (AssetsData.sByteArrayOptimization) {
                    dest.fromArrayBuffer(datas.ByteArray._slice(src.dataView.buffer, start, start + len));
                }
                else {
                    src.position = start;
                    src.readBytes(dest, 0, len);
                }
            }
            catch (error) {
                datas.ASViewer.instance.showLoadingError(datas.ErrorType.READ, datas.ASViewer.JS_RELOAD, { error: error }, [new datas.CrashParam("Read fid", fid.toString())]);
                return null;
            }
            if (len == 0) {
                throw new datas.Error('File: ' + fid + ' not found in pack ' + pack);
            }
            dest.position = 0;
            return dest;
        };
        AssetsData.createDestination = function () {
            AssetsData.sDestinationCreated = true;
            return new datas.ByteArray;
        };
        AssetsData.onLoadPackStatus = function (event) {
            var loader = event.target;
            AssetsData.packs[AssetsData.map.get(loader).pack].status.push(event.status);
            if ("responseHeaders" in event && event["responseHeaders"] instanceof Array && event["responseHeaders"].length > 0)
                AssetsData.packs[AssetsData.map.get(loader).pack].responseHeader.push(event["responseHeaders"].join(";"));
        };
        AssetsData.onLoadPackResponseStatus = function (event) {
            var loader = event.target;
            AssetsData.packs[AssetsData.map.get(loader).pack].status.push(event.status);
        };
        AssetsData.onLoadPackProgress = function (event) {
            var loader = event.target;
            var pack = AssetsData.packs[AssetsData.map.get(loader).pack];
            pack.bytesLoaded = loader.bytesLoaded;
            if (!pack.bytesTotal)
                pack.bytesTotal = loader.bytesTotal;
            pack.percent = Math.max(Math.min(pack.bytesLoaded / pack.bytesTotal, 1), 0);
            if (!pack.background) {
                datas.ASViewer.instance.AssetsData_changeStatus(pack.id, pack.percent);
            }
            for (var _i = 0, _a = AssetsData.map.get(loader).progress; _i < _a.length; _i++) {
                var callback = _a[_i];
                callback(pack.bytesLoaded, pack.bytesTotal);
            }
        };
        AssetsData.onLoadPackComplete = function (event) {
            var loader = event.target;
            var pack = AssetsData.map.get(loader).pack;
            datas.EventStats.handle(AssetsData, event);
            AssetsData.packComplete[AssetsData.packComplete.length] = -pack;
            var ba = 'data' in event && event.data ? event.data : loader.data;
            if (ba.length < AssetsData.packs[pack].bytesTotal) {
                var message = '[AssetsData] Пак не догрузился. Отправляем на перезагрузку.';
                datas.GLog.print(message);
                datas.ASViewer.instance.showLoadingError(datas.ErrorType.LOAD, null, { error: new datas.Error(message) }, null, true);
                AssetsData.requestPack(pack, datas.CONFIG.getStorage() + AssetsData.packs[pack].url + "?rnd=" + int(Math.random() * int.MAX_VALUE));
                return;
            }
            if (ba) {
                ba.endian = datas.Endian.LITTLE_ENDIAN;
                AssetsData.packs[AssetsData.map.get(loader).pack].data = ba;
                AssetsData.checkLock(AssetsData.packs[AssetsData.map.get(loader).pack]);
            }
            AssetsData.packs[pack].loading = false;
            AssetsData.checkLock(AssetsData.packs[pack]);
            var url = AssetsData.packs[pack].url;
            var dir = "/imgs" + (AssetsData.map.get(loader).pack > 0 ? pack : "");
            if (AssetsData.map.get(loader).pack > 0 && !datas.ASViewer.FS_stat(dir)) {
                datas.ASViewer.mkdir(dir);
            }
            FS.writeFile(url, new Uint8Array(ba.buffer), { encoding: 'binary' });
            datas.GLog.print("[AssetsData] Пак успешно загружен: " + pack);
            var notify = new datas.ByteArray;
            notify.writeUTFBytes(JSON.stringify({ url: url, path: dir + "/" }));
            notify.writeByte(0);
            notify.position = 0;
            datas.ASViewer.instance.doCallback(datas.ASViewer.getCBID(datas.ASViewer.CBID_DOWNLOADER), notify, AssetsData.emptyData);
            var callbacks = AssetsData.map.get(loader).complete;
            while (callbacks.length)
                callbacks.shift()();
            AssetsData.map.get(loader).error.length = 0;
            AssetsData.map.get(loader).progress.length = 0;
            AssetsData.packComplete[AssetsData.packComplete.length - 1] = pack;
        };
        AssetsData.onLoadPackError = function (event) {
            var MAX_RECONNECT_COUNT = 1;
            var loader = event.target;
            var pack = AssetsData.map.get(loader).pack;
            datas.EventStats.handle(AssetsData, event);
            AssetsData.packFailed[AssetsData.packFailed.length] = -pack;
            var url = AssetsData.packs[pack] && "url" in AssetsData.packs[pack] ? AssetsData.packs[pack].url : null;
            var status = AssetsData.packs[pack] && "status" in AssetsData.packs[pack] ? AssetsData.packs[pack].status : [];
            var requestHeader = AssetsData.packs[pack] && "requestHeader" in AssetsData.packs[pack] ? AssetsData.packs[pack].requestHeader : [];
            var responseHeader = AssetsData.packs[pack] && "responseHeader" in AssetsData.packs[pack] ? AssetsData.packs[pack].responseHeader : [];
            var bytesLoaded = AssetsData.packs[pack] && "bytesLoaded" in AssetsData.packs[pack] ? AssetsData.packs[pack].bytesLoaded : 0;
            var bytesTotal = AssetsData.packs[pack] && "bytesTotal" in AssetsData.packs[pack] ? AssetsData.packs[pack].bytesTotal : 0;
            var duration = AssetsData.packs[pack] && "startedAt" in AssetsData.packs[pack] ? new Date().time - AssetsData.packs[pack].startedAt : -1;
            AssetsData.packs[pack].reload = true;
            datas.GLog.print("[AssetsData] Не удалось загрузить пак: " + pack + ", error=" + event.text);
            if (!AssetsData.packs[pack].background && datas.ASViewer.instance &&
                datas.ASViewer.instance.showLoadingError(datas.ErrorType.LOAD, function () {
                    datas.GLog.print("[AssetsData] Перезагрузка пака: " + pack);
                    AssetsData.packs[pack].reconnect++;
                    AssetsData.loadPack(pack);
                }.bind(this), { error: event }, [new datas.CrashParam("Pack url", url),
                    new datas.CrashParam("Pack duration", duration.toString()),
                    new datas.CrashParam("Pack bytes", bytesLoaded + "/" + bytesTotal + " (" + datas.mbsec(bytesLoaded, duration) + ")"),
                    new datas.CrashParam("Pack status", status.toString()),
                    new datas.CrashParam("Pack requestHeader", requestHeader.toString()),
                    new datas.CrashParam("Pack responseHeader", responseHeader.toString())], AssetsData.packs[pack].reconnect < MAX_RECONNECT_COUNT)) {
                AssetsData.packFailed[AssetsData.packFailed.length - 1] = pack;
                return;
            }
            AssetsData.packs[pack].loading = false;
            AssetsData.checkLock(AssetsData.packs[pack]);
            var callbacks = AssetsData.map.get(loader).error;
            var httpStatus = status.length ? status[status.length - 1] : 520;
            var errorMessage = event.text || 'Unknown error';
            while (callbacks.length) {
                var cb = callbacks.shift();
                switch (cb.length) {
                    case 2:
                        cb(httpStatus, errorMessage);
                        break;
                    default: cb();
                }
            }
            AssetsData.map.get(loader).complete.length = 0;
            AssetsData.map.get(loader).progress.length = 0;
            AssetsData.packFailed[AssetsData.packFailed.length - 1] = pack;
        };
        AssetsData.PACK_LOCAL = 0;
        AssetsData.PACK_NETWORK = 1;
        AssetsData.packComplete = [];
        AssetsData.packFailed = [];
        AssetsData.packs = {};
        AssetsData.locked = false;
        AssetsData.sHelperVector = [];
        AssetsData.sDestinationCreated = false;
        AssetsData.sByteArrayOptimization = true;
        AssetsData.extraLoaders = {};
        return AssetsData;
    }());
    datas.AssetsData = AssetsData;
})(datas || (datas = {}));
var s3eUtils;
(function (s3eUtils) {
    s3eUtils.Error = global.Error;
    s3eUtils.EventStats = global.EventStats;
    s3eUtils.IllegalOperationError = flash.errors.IllegalOperationError;
    s3eUtils.Event = flash.events.Event;
    s3eUtils.EventDispatcher = flash.events.EventDispatcher;
    s3eUtils.HTTPStatusEvent = flash.events.HTTPStatusEvent;
    s3eUtils.IOErrorEvent = flash.events.IOErrorEvent;
    s3eUtils.ProgressEvent = flash.events.ProgressEvent;
    s3eUtils.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    s3eUtils.URLLoader = flash.net.URLLoader;
    s3eUtils.URLLoaderDataFormat = flash.net.URLLoaderDataFormat;
    s3eUtils.URLRequest = flash.net.URLRequest;
    s3eUtils.URLRequestHeader = flash.net.URLRequestHeader;
    s3eUtils.URLRequestMethod = flash.net.URLRequestMethod;
    s3eUtils.ByteArray = flash.utils.ByteArray;
    s3eUtils.Dictionary = flash.utils.Dictionary;
    s3eUtils.Endian = flash.utils.Endian;
    s3eUtils.clearInterval = flash.utils.clearInterval;
    s3eUtils.setTimeout = flash.utils.setTimeout;
    var MultipartURLLoader = (function (_super) {
        __extends(MultipartURLLoader, _super);
        function MultipartURLLoader() {
            var _this = _super.call(this) || this;
            _this._async = false;
            _this._prepared = false;
            _this.asyncFilePointer = 0;
            _this.totalFilesSize = 0;
            _this.writtenBytes = 0;
            _this._fileNames = new Array();
            _this._files = new s3eUtils.Dictionary();
            _this._variableNames = new Array();
            _this._variables = new s3eUtils.Dictionary();
            _this._loader = new s3eUtils.URLLoader();
            _this.requestHeaders = new Array();
            return _this;
        }
        MultipartURLLoader.prototype.load = function (path, async) {
            if (async === void 0) { async = false; }
            if (path == null || path == '')
                throw new s3eUtils.IllegalOperationError('You cant load without specifing PATH');
            this._path = path;
            this._async = async;
            if (this._async) {
                if (!this._prepared) {
                    this.constructPostDataAsync();
                }
                else {
                    this.doSend();
                }
            }
            else {
                this._data = this.constructPostData();
                this.doSend();
            }
        };
        MultipartURLLoader.prototype.startLoad = function () {
            if (this._path == null || this._path == '' || this._async == false)
                throw new s3eUtils.IllegalOperationError('You can use this method only if loading asynchronous.');
            if (!this._prepared && this._async)
                throw new s3eUtils.IllegalOperationError('You should prepare data before sending when using asynchronous.');
            this.doSend();
        };
        MultipartURLLoader.prototype.prepareData = function () {
            this.constructPostDataAsync();
        };
        MultipartURLLoader.prototype.close = function () {
            try {
                this._loader.close();
            }
            catch (e) { }
        };
        MultipartURLLoader.prototype.addVariable = function (name, value) {
            if (value === void 0) { value = ''; }
            if (this._variableNames.indexOf(name) == -1) {
                this._variableNames.push(name);
            }
            this._variables.set(name, value);
            this._prepared = false;
        };
        MultipartURLLoader.prototype.addFile = function (fileContent, fileName, dataField, contentType) {
            if (dataField === void 0) { dataField = 'Filedata'; }
            if (contentType === void 0) { contentType = 'application/octet-stream'; }
            if (this._fileNames.indexOf(fileName) == -1) {
                this._fileNames.push(fileName);
                this._files.set(fileName, new s3eUtils.FilePart(fileContent, fileName, dataField, contentType));
                this.totalFilesSize += fileContent.length;
            }
            else {
                var f = this._files.get(fileName);
                this.totalFilesSize -= f.fileContent.length;
                f.fileContent = fileContent;
                f.fileName = fileName;
                f.dataField = dataField;
                f.contentType = contentType;
                this.totalFilesSize += fileContent.length;
            }
            this._prepared = false;
        };
        MultipartURLLoader.prototype.clearVariables = function () {
            this._variableNames = new Array();
            this._variables = new s3eUtils.Dictionary();
            this._prepared = false;
        };
        MultipartURLLoader.prototype.clearFiles = function () {
            for (var _i = 0, _a = this._fileNames; _i < _a.length; _i++) {
                var name = _a[_i];
                this._files.get(name).dispose();
            }
            this._fileNames = new Array();
            this._files = new s3eUtils.Dictionary();
            this.totalFilesSize = 0;
            this._prepared = false;
        };
        MultipartURLLoader.prototype.dispose = function () {
            s3eUtils.clearInterval(this.asyncWriteTimeoutId);
            this.removeListener();
            this.close();
            this._loader = null;
            this._boundary = null;
            this._variableNames = null;
            this._variables = null;
            this._fileNames = null;
            this._files = null;
            this.requestHeaders = null;
            this._data = null;
        };
        MultipartURLLoader.prototype.getBoundary = function () {
            if (this._boundary == null) {
                this._boundary = '';
                for (var i = 0; i < 0x20; i++) {
                    this._boundary += String.fromCharCode(int(97 + Math.random() * 25));
                }
            }
            return this._boundary;
        };
        Object.defineProperty(MultipartURLLoader.prototype, "ASYNC", {
            get: function () {
                return this._async;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(MultipartURLLoader.prototype, "PREPARED", {
            get: function () {
                return this._prepared;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(MultipartURLLoader.prototype, "dataFormat", {
            get: function () {
                return this._loader.dataFormat;
            },
            set: function (format) {
                if (format != s3eUtils.URLLoaderDataFormat.BINARY && format != s3eUtils.URLLoaderDataFormat.TEXT && format != s3eUtils.URLLoaderDataFormat.VARIABLES) {
                    throw new s3eUtils.IllegalOperationError('Illegal URLLoader Data Format');
                }
                this._loader.dataFormat = format;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(MultipartURLLoader.prototype, "loader", {
            get: function () {
                return this._loader;
            },
            enumerable: true,
            configurable: true
        });
        MultipartURLLoader.prototype.doSend = function () {
            var urlRequest = new s3eUtils.URLRequest();
            urlRequest.url = this._path;
            urlRequest.method = s3eUtils.URLRequestMethod.POST;
            urlRequest.data = this._data;
            urlRequest.requestHeaders.push(new s3eUtils.URLRequestHeader('Content-type', 'multipart/form-data; boundary=' + this.getBoundary()));
            if (this.requestHeaders.length) {
                urlRequest.requestHeaders = urlRequest.requestHeaders.concat(this.requestHeaders);
            }
            this.addListener();
            this._loader.load(urlRequest);
        };
        MultipartURLLoader.prototype.constructPostDataAsync = function () {
            s3eUtils.clearInterval(this.asyncWriteTimeoutId);
            this._data = new s3eUtils.ByteArray();
            this._data.endian = s3eUtils.Endian.BIG_ENDIAN;
            this._data = this.constructVariablesPart(this._data);
            this.asyncFilePointer = 0;
            this.writtenBytes = 0;
            this._prepared = false;
            if (this._fileNames.length) {
                this.nextAsyncLoop();
            }
            else {
                this._data = this.closeDataObject(this._data);
                this._prepared = true;
                this.dispatchEvent(new s3eUtils.MultipartURLLoaderEvent(s3eUtils.MultipartURLLoaderEvent.DATA_PREPARE_COMPLETE));
            }
        };
        MultipartURLLoader.prototype.constructPostData = function () {
            var postData = new s3eUtils.ByteArray();
            postData.endian = s3eUtils.Endian.BIG_ENDIAN;
            postData = this.constructVariablesPart(postData);
            postData = this.constructFilesPart(postData);
            postData = this.closeDataObject(postData);
            return postData;
        };
        MultipartURLLoader.prototype.closeDataObject = function (postData) {
            postData = this.LINEBREAK(postData);
            postData = this.BOUNDARY(postData);
            postData = this.LINEBREAK(postData);
            var bytes = 'Content-Disposition: form-data; name="Upload"';
            for (var i = 0; i < bytes.length; i++)
                postData.writeByte(bytes.charCodeAt(i));
            postData = this.LINEBREAK(postData);
            postData = this.LINEBREAK(postData);
            bytes = 'Submit Query';
            for (i = 0; i < bytes.length; i++)
                postData.writeByte(bytes.charCodeAt(i));
            postData = this.LINEBREAK(postData);
            postData = this.BOUNDARY(postData);
            postData = this.DOUBLEDASH(postData);
            return postData;
        };
        MultipartURLLoader.prototype.constructVariablesPart = function (postData) {
            var i = 0;
            var bytes;
            for (var _i = 0, _a = this._variableNames; _i < _a.length; _i++) {
                var name = _a[_i];
                postData = this.BOUNDARY(postData);
                postData = this.LINEBREAK(postData);
                bytes = 'Content-Disposition: form-data; name="' + name + '"';
                for (i = 0; i < bytes.length; i++) {
                    postData.writeByte(bytes.charCodeAt(i));
                }
                postData = this.LINEBREAK(postData);
                postData = this.LINEBREAK(postData);
                postData.writeUTFBytes(this._variables.get(name));
                postData = this.LINEBREAK(postData);
            }
            return postData;
        };
        MultipartURLLoader.prototype.constructFilesPart = function (postData) {
            var i = 0;
            var bytes;
            if (this._fileNames.length) {
                for (var _i = 0, _a = this._fileNames; _i < _a.length; _i++) {
                    var name = _a[_i];
                    postData = this.getFilePartHeader(postData, this._files.get(name));
                    postData = this.getFilePartData(postData, this._files.get(name));
                    if (i != this._fileNames.length - 1) {
                        postData = this.LINEBREAK(postData);
                    }
                    i++;
                }
                postData = this.closeFilePartsData(postData);
            }
            return postData;
        };
        MultipartURLLoader.prototype.closeFilePartsData = function (postData) {
            return postData;
        };
        MultipartURLLoader.prototype.getFilePartHeader = function (postData, part) {
            var i = 0;
            var bytes;
            postData = this.BOUNDARY(postData);
            postData = this.LINEBREAK(postData);
            bytes = 'Content-Disposition: form-data; name="Filename"';
            for (i = 0; i < bytes.length; i++) {
                postData.writeByte(bytes.charCodeAt(i));
            }
            postData = this.LINEBREAK(postData);
            postData = this.LINEBREAK(postData);
            postData.writeUTFBytes(part.fileName);
            postData = this.LINEBREAK(postData);
            postData = this.BOUNDARY(postData);
            postData = this.LINEBREAK(postData);
            bytes = 'Content-Disposition: form-data; name="' + part.dataField + '"; filename="';
            for (i = 0; i < bytes.length; i++) {
                postData.writeByte(bytes.charCodeAt(i));
            }
            postData.writeUTFBytes(part.fileName);
            postData = this.QUOTATIONMARK(postData);
            postData = this.LINEBREAK(postData);
            bytes = 'Content-Type: ' + part.contentType;
            for (i = 0; i < bytes.length; i++) {
                postData.writeByte(bytes.charCodeAt(i));
            }
            postData = this.LINEBREAK(postData);
            postData = this.LINEBREAK(postData);
            return postData;
        };
        MultipartURLLoader.prototype.getFilePartData = function (postData, part) {
            postData.writeBytes(part.fileContent, 0, part.fileContent.length);
            return postData;
        };
        MultipartURLLoader.prototype.onProgress = function (event) {
            this.dispatchEvent(event);
        };
        MultipartURLLoader.prototype.onComplete = function (event) {
            s3eUtils.EventStats.handle(MultipartURLLoader, event);
            this.removeListener();
            this.dispatchEvent(event);
        };
        MultipartURLLoader.prototype.onIOError = function (event) {
            s3eUtils.EventStats.handle(MultipartURLLoader, event);
            this.removeListener();
            this.dispatchEvent(event);
        };
        MultipartURLLoader.prototype.onSecurityError = function (event) {
            s3eUtils.EventStats.handle(MultipartURLLoader, event);
            this.removeListener();
            this.dispatchEvent(event);
        };
        MultipartURLLoader.prototype.onHTTPStatus = function (event) {
            this.dispatchEvent(event);
        };
        MultipartURLLoader.prototype.addListener = function () {
            this._loader.addEventListener(s3eUtils.Event.COMPLETE, this.onComplete.bind(this), false, 0, false);
            this._loader.addEventListener(s3eUtils.ProgressEvent.PROGRESS, this.onProgress.bind(this), false, 0, false);
            this._loader.addEventListener(s3eUtils.IOErrorEvent.IO_ERROR, this.onIOError.bind(this), false, 0, false);
            this._loader.addEventListener(s3eUtils.HTTPStatusEvent.HTTP_STATUS, this.onHTTPStatus.bind(this), false, 0, false);
            this._loader.addEventListener(s3eUtils.SecurityErrorEvent.SECURITY_ERROR, this.onSecurityError.bind(this), false, 0, false);
        };
        MultipartURLLoader.prototype.removeListener = function () {
            this._loader.removeEventListener(s3eUtils.Event.COMPLETE, this.onComplete.bind(this));
            this._loader.removeEventListener(s3eUtils.ProgressEvent.PROGRESS, this.onProgress.bind(this));
            this._loader.removeEventListener(s3eUtils.IOErrorEvent.IO_ERROR, this.onIOError.bind(this));
            this._loader.removeEventListener(s3eUtils.HTTPStatusEvent.HTTP_STATUS, this.onHTTPStatus.bind(this));
            this._loader.removeEventListener(s3eUtils.SecurityErrorEvent.SECURITY_ERROR, this.onSecurityError.bind(this));
        };
        MultipartURLLoader.prototype.BOUNDARY = function (p) {
            var l = this.getBoundary().length;
            p = this.DOUBLEDASH(p);
            for (var i = 0; i < l; i++) {
                p.writeByte(this._boundary.charCodeAt(i));
            }
            return p;
        };
        MultipartURLLoader.prototype.LINEBREAK = function (p) {
            p.writeShort(0x0d0a);
            return p;
        };
        MultipartURLLoader.prototype.QUOTATIONMARK = function (p) {
            p.writeByte(0x22);
            return p;
        };
        MultipartURLLoader.prototype.DOUBLEDASH = function (p) {
            p.writeShort(0x2d2d);
            return p;
        };
        MultipartURLLoader.prototype.nextAsyncLoop = function () {
            var fp;
            if (this.asyncFilePointer < this._fileNames.length) {
                fp = this._files.get(this._fileNames[this.asyncFilePointer]);
                this._data = this.getFilePartHeader(this._data, fp);
                this.asyncWriteTimeoutId = s3eUtils.setTimeout(this.writeChunkLoop.bind(this), 10, this._data, fp.fileContent, 0);
                this.asyncFilePointer++;
            }
            else {
                this._data = this.closeFilePartsData(this._data);
                this._data = this.closeDataObject(this._data);
                this._prepared = true;
                this.dispatchEvent(new s3eUtils.MultipartURLLoaderEvent(s3eUtils.MultipartURLLoaderEvent.DATA_PREPARE_PROGRESS, this.totalFilesSize, this.totalFilesSize));
                this.dispatchEvent(new s3eUtils.MultipartURLLoaderEvent(s3eUtils.MultipartURLLoaderEvent.DATA_PREPARE_COMPLETE));
            }
        };
        MultipartURLLoader.prototype.writeChunkLoop = function (dest, data, p) {
            if (p === void 0) { p = 0; }
            var len = Math.min(MultipartURLLoader.BLOCK_SIZE, data.length - p);
            dest.writeBytes(data, p, len);
            if (len < MultipartURLLoader.BLOCK_SIZE || p + len >= data.length) {
                dest = this.LINEBREAK(dest);
                this.nextAsyncLoop();
                return;
            }
            p += len;
            this.writtenBytes += len;
            if (this.writtenBytes % MultipartURLLoader.BLOCK_SIZE * 2 == 0) {
                this.dispatchEvent(new s3eUtils.MultipartURLLoaderEvent(s3eUtils.MultipartURLLoaderEvent.DATA_PREPARE_PROGRESS, this.writtenBytes, this.totalFilesSize));
            }
            this.asyncWriteTimeoutId = s3eUtils.setTimeout(this.writeChunkLoop.bind(this), 10, dest, data, p);
        };
        MultipartURLLoader.BLOCK_SIZE = 64 * 1024;
        return MultipartURLLoader;
    }(s3eUtils.EventDispatcher));
    s3eUtils.MultipartURLLoader = MultipartURLLoader;
})(s3eUtils || (s3eUtils = {}));
var flash;
(function (flash) {
    var __native;
    (function (__native) {
        __native.BitmapData = flash.display.BitmapData;
        __native.GraphicsPath = flash.display.GraphicsPath;
        __native.Stage = flash.display.Stage;
        __native.Context3D = flash.display3D.Context3D;
        __native.Context3DBlendFactor = flash.display3D.Context3DBlendFactor;
        __native.Context3DProgramType = flash.display3D.Context3DProgramType;
        __native.Context3DTextureFormat = flash.display3D.Context3DTextureFormat;
        __native.Context3DTriangleFace = flash.display3D.Context3DTriangleFace;
        __native.Context3DVertexBufferFormat = flash.display3D.Context3DVertexBufferFormat;
        __native.Program3D = flash.display3D.Program3D;
        __native.Texture = flash.display3D.textures.Texture;
        __native.Event = flash.events.Event;
        __native.ColorTransform = flash.geom.ColorTransform;
        __native.Matrix = flash.geom.Matrix;
        __native.Matrix3D = flash.geom.Matrix3D;
        __native.Rectangle = flash.geom.Rectangle;
        __native.ByteArray = flash.utils.ByteArray;
        var GLCanvasRenderingContext2D = (function () {
            function GLCanvasRenderingContext2D(stage, isBatch) {
                if (isBatch === void 0) { isBatch = false; }
                this.fillStyleIsImage = false;
                this.globalAlpha = 1;
                this.text2img = {};
                this.matr3d = new __native.Matrix3D;
                this.uvmatr3d = new __native.Matrix3D;
                this.matr = new __native.Matrix;
                this.matrhelp = new __native.Matrix;
                this.isBatch = false;
                this.batchs = [];
                this.batchsLen = 0;
                this.states = [];
                this.statesPos = -1;
                this.posPool = {};
                this.uvPool = {};
                this.colorPool = {};
                this.indexPool = {};
                this.newDrawable = new __native.GLDrawable(null, null, null, WebGLRenderingContext.DYNAMIC_DRAW);
                this.numPos = 0;
                this.numIndex = 0;
                this.updateColor = true;
                this.isBatch = isBatch;
                this.stage = stage;
                this.canvas = stage.canvas;
                this.ctx = new __native.Context3D;
                this.ctx.canvas = this.canvas;
                this.ctx.stage = stage;
                var params = {
                    alpha: true,
                    antialias: false
                };
                this.ctx.gl = (this.canvas.getContext("webgl", params) || this.canvas.getContext("experimental-webgl", params));
                this.stage_resize(null);
                this.ctx.setBlendFactorsSeparate(__native.Context3DBlendFactor.SOURCE_ALPHA, __native.Context3DBlendFactor.ONE_MINUS_SOURCE_ALPHA, __native.Context3DBlendFactor.ONE, __native.Context3DBlendFactor.ONE_MINUS_SOURCE_ALPHA);
                this.ctx.setCulling(__native.Context3DTriangleFace.NONE);
                var posData = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]);
                var iData = new Uint16Array([0, 2, 1, 2, 1, 3]);
                this.bitmapDrawable = new __native.GLDrawable(posData, posData, iData, this.ctx.gl.STATIC_DRAW);
                var vcode = "attribute vec2 va0;" +
                    "attribute vec4 va1;" +
                    "attribute vec2 va2;" +
                    "varying vec4 vColor;" +
                    "varying vec2 vUV;" +
                    "uniform mat4 vc0;" +
                    "uniform mat4 vc4;" +
                    "void main(void) {" +
                    "vColor=va1;" +
                    "vUV=(vc4*vec4(va2,0.0,1.0)).xy;" +
                    "gl_Position =vc0*vec4(va0, 0.0,1.0);" +
                    "}";
                var fcode = "precision lowp float;" +
                    "varying vec4 vColor;" +
                    "varying vec2 vUV;" +
                    "uniform sampler2D fs0;" +
                    "void main(void) {" +
                    "gl_FragColor = texture2D(fs0,vUV)*vColor;" +
                    "}";
                this.bitmapProg = this.ctx.createProgram();
                var vb = new __native.ByteArray;
                vb.writeUTFBytes(vcode);
                var fb = new __native.ByteArray;
                fb.writeUTFBytes(fcode);
                this.bitmapProg.upload(vb, fb);
                vcode =
                    "attribute vec2 va0;" +
                        "attribute vec4 va1;" +
                        "varying vec4 vColor;" +
                        "uniform mat4 vc0;" +
                        "void main(void) {" +
                        "vColor=va1;" +
                        "gl_Position =vc0*vec4(va0, 0.0,1.0);" +
                        "}";
                fcode = "precision lowp float;" +
                    "varying vec4 vColor;" +
                    "void main(void) {" +
                    "gl_FragColor = vColor;" +
                    "}";
                this.colorProg = this.ctx.createProgram();
                vb = new __native.ByteArray;
                vb.writeUTFBytes(vcode);
                fb = new __native.ByteArray;
                fb.writeUTFBytes(fcode);
                this.colorProg.upload(vb, fb);
                stage.addEventListener(__native.Event.RESIZE, this.stage_resize.bind(this));
            }
            GLCanvasRenderingContext2D.prototype.stage_resize = function (e) {
                this.ctx.configureBackBuffer(this.stage.stageWidth, this.stage.stageHeight, 0, false);
            };
            GLCanvasRenderingContext2D.prototype.arc = function (x, y, radius, startAngle, endAngle) {
                this.currentPath.path.arc(x, y, radius, startAngle, endAngle);
                return null;
            };
            GLCanvasRenderingContext2D.prototype.arcTo = function (x1, y1, x2, y2, radius) {
                return null;
            };
            GLCanvasRenderingContext2D.prototype.beginPath = function () {
                this.currentPath = new __native.GLPath2D;
                this.currentPath.path = this.stage.renderer.createPath();
                this.currentPath.matr = this.matr;
                return null;
            };
            GLCanvasRenderingContext2D.prototype.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {
                this.currentPath.path.cubicCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);
                return null;
            };
            GLCanvasRenderingContext2D.prototype.clearRect = function (x, y, w, h) {
                this.ctx.clear(0, 0, 0, 0);
                this.batchsLen = 0;
                return null;
            };
            GLCanvasRenderingContext2D.prototype.save = function () {
            };
            GLCanvasRenderingContext2D.prototype.restore = function () {
                this.ctx.setScissorRectangle(null);
            };
            GLCanvasRenderingContext2D.prototype.clip = function (opt_fillRule) {
                if (opt_fillRule === void 0) { opt_fillRule = ""; }
                if (this.isBatch)
                    return;
                if (!this.currentPath)
                    return;
                var path = this.currentPath.path;
                if (!path || !path.poly)
                    return;
                var array = path.poly.array;
                this._clipRect = this._clipRect || new __native.Rectangle(0, 0, this.stage.stageWidth, this.stage.stageHeight);
                if (array && array.length == 8) {
                    this._clipRect.setTo(array[0], array[1], array[4] - array[0], array[5] - array[1]);
                }
                this.ctx.setScissorRectangle(this._clipRect);
            };
            GLCanvasRenderingContext2D.prototype.closePath = function () {
                return null;
            };
            GLCanvasRenderingContext2D.prototype.createImageData = function (sw, sh) {
                return null;
            };
            GLCanvasRenderingContext2D.prototype.createLinearGradient = function (x0, y0, x1, y1) {
                return null;
            };
            GLCanvasRenderingContext2D.prototype.createPattern = function (image, repetition) {
                return (new __native.GLCanvasPattern(image, repetition));
            };
            GLCanvasRenderingContext2D.prototype.createRadialGradient = function (x0, y0, r0, x1, y1, r1) {
                return null;
            };
            GLCanvasRenderingContext2D.prototype.drawImage = function (image, dx, dy) {
                this.drawImageInternal(image, this.bitmapDrawable, this.matr, null, true, this.colorTransform ? this.colorTransform.tint : undefined, true, true);
                return null;
            };
            GLCanvasRenderingContext2D.prototype.drawPath = function (path, colorTransform) {
                this.currentPath = path["glpath2d"];
                if (path["glpath2d"] == null) {
                    this.currentPath = path["glpath2d"] = new __native.GLPath2D;
                }
                this.currentPath.path = path;
                this.currentPath.matr = this.matr;
                return null;
            };
            GLCanvasRenderingContext2D.prototype.drawImageInternal = function (image, drawable, posmatr, uvmatr, scaleWithImage, color, scaleWithImageUV, isImage, smoothing) {
                if (smoothing === void 0) { smoothing = false; }
                if (!this.isBatch) {
                    if (image) {
                        var colorb = drawable.color;
                        colorb.dirty = true;
                        var data = colorb.data;
                        var len = data.length;
                        for (var i = 0; i < len; i++) {
                            data[i] = color;
                        }
                        this.renderImage(image, drawable, posmatr, uvmatr, scaleWithImage, scaleWithImageUV, isImage, smoothing);
                    }
                }
                else {
                    if (!isImage && !this.lastImageIsImage) {
                    }
                    else if (image == null || this.lastImage != image) {
                        if (this.numPos > 0) {
                            this.batchFinish();
                        }
                        this.numPos = 0;
                        this.numIndex = 0;
                        this.lastImage = image;
                        this.lastImageIsImage = isImage;
                    }
                    if (drawable) {
                        this.numPos += drawable.pos.data.length / 2;
                        this.numIndex += drawable.index.data.length / 3;
                    }
                    var batch = this.batchs[this.batchsLen];
                    if (batch == null) {
                        batch = this.batchs[this.batchsLen] = [];
                    }
                    this.batchsLen++;
                    batch[0] = image;
                    batch[1] = drawable;
                    batch[2] = posmatr;
                    batch[3] = uvmatr;
                    batch[4] = scaleWithImage;
                    batch[5] = color;
                    batch[6] = scaleWithImageUV;
                    batch[7] = isImage;
                }
            };
            GLCanvasRenderingContext2D.prototype.renderImage = function (image, drawable, posmatr, uvmatr, scaleWithImage, scaleWithImageUV, isImage, smoothing) {
                if (smoothing === void 0) { smoothing = false; }
                if (!isImage) {
                    this.ctx.setProgram(this.colorProg);
                }
                else {
                    var texture = this.getTexture(image);
                    this.ctx.setProgram(this.bitmapProg);
                    this.ctx.setTextureAt(0, texture.texture);
                    this.ctx.setVertexBufferAt(2, drawable.uv.getBuff(this.ctx), 0, __native.Context3DVertexBufferFormat.FLOAT_2);
                }
                this.ctx.setVertexBufferAt(0, drawable.pos.getBuff(this.ctx), 0, __native.Context3DVertexBufferFormat.FLOAT_2);
                this.ctx.setVertexBufferAt(1, drawable.color.getBuff(this.ctx), 0, __native.Context3DVertexBufferFormat.BYTES_4);
                if (posmatr) {
                    this.matr3d.rawData[0] = posmatr.a * 2 / this.stage.stageWidth;
                    this.matr3d.rawData[1] = -posmatr.b * 2 / this.stage.stageHeight;
                    this.matr3d.rawData[4] = posmatr.c * 2 / this.stage.stageWidth;
                    this.matr3d.rawData[5] = -posmatr.d * 2 / this.stage.stageHeight;
                    this.matr3d.rawData[12] = posmatr.tx * 2 / this.stage.stageWidth - 1;
                    this.matr3d.rawData[13] = 1 - posmatr.ty * 2 / this.stage.stageHeight;
                }
                else {
                    this.matr3d.rawData[0] = 2 / this.stage.stageWidth;
                    this.matr3d.rawData[1] = 0;
                    this.matr3d.rawData[4] = 0;
                    this.matr3d.rawData[5] = -2 / this.stage.stageHeight;
                    this.matr3d.rawData[12] = -1;
                    this.matr3d.rawData[13] = 1;
                }
                if (scaleWithImage) {
                    this.matr3d.rawData[0] *= image.width;
                    this.matr3d.rawData[1] *= image.width;
                    this.matr3d.rawData[4] *= image.height;
                    this.matr3d.rawData[5] *= image.height;
                }
                this.ctx.setProgramConstantsFromMatrix(__native.Context3DProgramType.VERTEX, 0, this.matr3d);
                if (isImage) {
                    if (uvmatr) {
                        if (posmatr) {
                            this.matrhelp.copyFrom(posmatr);
                            this.matrhelp.invert();
                            this.matrhelp.concat(uvmatr);
                        }
                        else {
                            this.matrhelp.copyFrom(uvmatr);
                        }
                        this.uvmatr3d.rawData[0] = this.matrhelp.a / texture.width;
                        this.uvmatr3d.rawData[1] = -this.matrhelp.b / texture.width;
                        this.uvmatr3d.rawData[4] = -this.matrhelp.c / texture.height;
                        this.uvmatr3d.rawData[5] = this.matrhelp.d / texture.height;
                        this.uvmatr3d.rawData[12] = -this.matrhelp.tx / texture.width;
                        this.uvmatr3d.rawData[13] = -this.matrhelp.ty / texture.height;
                        if (scaleWithImageUV) {
                            this.uvmatr3d.rawData[0] *= image.width;
                            this.uvmatr3d.rawData[1] *= image.width;
                            this.uvmatr3d.rawData[4] *= image.height;
                            this.uvmatr3d.rawData[5] *= image.height;
                        }
                    }
                    else {
                        this.uvmatr3d.rawData[0] = 1 / texture.width;
                        this.uvmatr3d.rawData[1] = 0;
                        this.uvmatr3d.rawData[4] = 0;
                        this.uvmatr3d.rawData[5] = 1 / texture.height;
                        this.uvmatr3d.rawData[12] = 0;
                        this.uvmatr3d.rawData[13] = 0;
                        if (scaleWithImageUV) {
                            this.uvmatr3d.rawData[0] *= image.width;
                            this.uvmatr3d.rawData[5] *= image.height;
                        }
                    }
                    this.ctx.setProgramConstantsFromMatrix(__native.Context3DProgramType.VERTEX, 4, this.uvmatr3d);
                }
                this.ctx.drawTriangles(drawable.index.getBuff(this.ctx), 0, drawable.numTriangles);
            };
            GLCanvasRenderingContext2D.prototype.batchFinish = function () {
                var posKey = this.getNextPow2(this.numPos);
                var indexKey = this.getNextPow2(this.numIndex);
                var newpos = this.posPool[posKey];
                var newuv = this.uvPool[posKey];
                var newcolor = this.colorPool[posKey];
                var newi = this.indexPool[indexKey];
                if (newpos == null) {
                    newpos = this.posPool[posKey] = new __native.GLVertexBufferSet(new Float32Array(posKey * 2), 2, this.ctx.gl.DYNAMIC_DRAW);
                    trace("bat new pos", posKey, this.numPos);
                }
                if (newuv == null && this.lastImageIsImage) {
                    newuv = this.uvPool[posKey] = new __native.GLVertexBufferSet(new Float32Array(posKey * 2), 2, this.ctx.gl.DYNAMIC_DRAW);
                }
                if (newcolor == null && this.updateColor) {
                    newcolor = this.colorPool[posKey] = new __native.GLVertexBufferSet(new Uint32Array(posKey), 4, this.ctx.gl.DYNAMIC_DRAW);
                }
                if (newi == null) {
                    newi = this.indexPool[indexKey] = new __native.GLIndexBufferSet(new Uint16Array(indexKey * 3), this.ctx.gl.DYNAMIC_DRAW);
                    trace("bat new index", indexKey, this.numIndex);
                }
                var newposdata = newpos.data;
                if (this.lastImageIsImage) {
                    var newuvdata = newuv.data;
                }
                if (this.updateColor) {
                    var newcolordata = newcolor.data;
                }
                var newidata = newi.data;
                this.newDrawable.index = newi;
                this.newDrawable.pos = newpos;
                this.newDrawable.uv = newuv;
                this.newDrawable.color = newcolor;
                this.newDrawable.numTriangles = this.numIndex;
                var si = 0;
                var il = 0;
                if (this.lastImageIsImage) {
                    var iw = this.lastImage.width;
                    var ih = this.lastImage.height;
                }
                var len = this.batchsLen;
                for (var i = 0; i < len; i++) {
                    var batch = this.batchs[i];
                    var drawable2 = batch[1];
                    var posmatr = batch[2];
                    var scaleWithImage = batch[4];
                    var scaleWithImageUV = batch[6];
                    var color = batch[5];
                    if (this.lastImageIsImage) {
                        var uvmatr = batch[3];
                        if (uvmatr) {
                            this.matrhelp.copyFrom(posmatr);
                            this.matrhelp.invert();
                            this.matrhelp.concat(uvmatr);
                            this.matrhelp.b *= -1;
                            this.matrhelp.c *= -1;
                            this.matrhelp.tx *= -1;
                            this.matrhelp.ty *= -1;
                        }
                    }
                    var data = drawable2.pos.data;
                    if (this.lastImageIsImage) {
                        var uvdata = drawable2.uv.data;
                    }
                    var len2 = data.length / 2;
                    for (var j = 0; j < len2; j++) {
                        var x = data[j * 2];
                        var y = data[j * 2 + 1];
                        if (scaleWithImage) {
                            x *= iw;
                            y *= ih;
                        }
                        var x2 = posmatr.a * x + posmatr.c * y + posmatr.tx;
                        var y2 = posmatr.d * y + posmatr.b * x + posmatr.ty;
                        newposdata[(si + j) * 2] = x2;
                        newposdata[(si + j) * 2 + 1] = y2;
                        if (this.lastImageIsImage) {
                            x = uvdata[j * 2];
                            y = uvdata[j * 2 + 1];
                            if (scaleWithImageUV) {
                                x *= iw;
                                y *= ih;
                            }
                            if (uvmatr) {
                                x2 = this.matrhelp.a * x + this.matrhelp.c * y + this.matrhelp.tx;
                                y2 = this.matrhelp.d * y + this.matrhelp.b * x + this.matrhelp.ty;
                                newuvdata[(si + j) * 2] = x2;
                                newuvdata[(si + j) * 2 + 1] = y2;
                            }
                            else {
                                newuvdata[(si + j) * 2] = x;
                                newuvdata[(si + j) * 2 + 1] = y;
                            }
                        }
                        if (this.updateColor) {
                            newcolordata[(si + j)] = color;
                        }
                    }
                    var did = drawable2.index.data;
                    var didl = did.length;
                    for (j = 0; j < didl; j++) {
                        var vi = did[j];
                        newidata[il + j] = vi + si;
                    }
                    si += len2;
                    il += didl;
                }
                this.newDrawable.index.dirty = true;
                this.newDrawable.pos.dirty = true;
                if (this.lastImageIsImage) {
                    this.newDrawable.uv.dirty = true;
                }
                if (this.updateColor) {
                    this.newDrawable.color.dirty = true;
                }
                this.renderImage(this.lastImage, this.newDrawable, null, null, false, false, this.lastImageIsImage);
                this.batchsLen = 0;
            };
            GLCanvasRenderingContext2D.prototype.fill = function () {
                if (this.fillStyleIsImage) {
                    var glcp = this.fillStyle;
                    this.drawImageInternal(glcp.image, this.currentPath.drawable, this.currentPath.matr, this.matr, false, this.colorTransform.tint, this.currentPath.path.tris.length > 0, true);
                }
                else if (this.currentPath) {
                    this.drawImageInternal(this.fillStyle, this.currentPath.drawable, this.currentPath.matr, null, false, this.fillStyle, false, false);
                }
                return null;
            };
            GLCanvasRenderingContext2D.prototype.fillRect = function (x, y, w, h) {
                return null;
            };
            GLCanvasRenderingContext2D.prototype.fillText = function (text, x, y) {
                var hash = text + ' ' + (this.font || '') + (this.fillStyle || '');
                var image = this.text2img[hash];
                if (image == null) {
                    image = this.text2img[hash] = document.createElement("canvas");
                    var ctx = image.getContext("2d");
                    ctx.font = this.font;
                    var measure = ctx.measureText(text);
                    image.width = measure.width;
                    var pxIndex = this.font.indexOf("px");
                    for (var i = pxIndex - 1; i > 0; --i) {
                        if (!/[0-9]/.test(this.font.charAt(i))) {
                            i++;
                            break;
                        }
                    }
                    image.height = int(this.font.substring(i, pxIndex));
                    ctx.font = this.font;
                    ctx.textBaseline = "top";
                    ctx.fillStyle = this.fillStyle;
                    ctx.fillText(text, 0, 0);
                }
                this.matrhelp.copyFrom(this.matr);
                this.matrhelp.translate(x, y);
                this.drawImageInternal(image, this.bitmapDrawable, this.matrhelp.clone(), null, true, this.colorTransform.tint, true, true);
                return null;
            };
            GLCanvasRenderingContext2D.prototype.getImageData = function (sx, sy, sw, sh) {
                return null;
            };
            GLCanvasRenderingContext2D.prototype.isPointInPath = function (x, y, opt_fillRule) {
                if (opt_fillRule === void 0) { opt_fillRule = ""; }
                return false;
            };
            GLCanvasRenderingContext2D.prototype.lineTo = function (x, y) {
                this.currentPath.path.lineTo(x, y);
                return null;
            };
            GLCanvasRenderingContext2D.prototype.measureText = function (text) {
                return null;
            };
            GLCanvasRenderingContext2D.prototype.moveTo = function (x, y) {
                this.currentPath.path.moveTo(x, y);
                return null;
            };
            GLCanvasRenderingContext2D.prototype.putImageData = function (imagedata, dx, dy, opt_dirtyX, opt_dirtyY, opt_dirtyWidth, opt_dirtyHeight) {
                if (opt_dirtyX === void 0) { opt_dirtyX = 0; }
                if (opt_dirtyY === void 0) { opt_dirtyY = 0; }
                if (opt_dirtyWidth === void 0) { opt_dirtyWidth = 0; }
                if (opt_dirtyHeight === void 0) { opt_dirtyHeight = 0; }
                return null;
            };
            GLCanvasRenderingContext2D.prototype.quadraticCurveTo = function (cpx, cpy, x, y) {
                this.currentPath.path.curveTo(cpx, cpy, x, y);
                return null;
            };
            GLCanvasRenderingContext2D.prototype.rect = function (x, y, w, h) {
                this.currentPath.path.moveTo(x, y);
                this.currentPath.path.lineTo(x + w, y);
                this.currentPath.path.lineTo(x + w, y + h);
                this.currentPath.path.lineTo(x, y + h);
                this.currentPath.path.closePath();
                return null;
            };
            GLCanvasRenderingContext2D.prototype.setTransform = function (m11, m12, m21, m22, dx, dy) {
                return null;
            };
            GLCanvasRenderingContext2D.prototype.setTransform2 = function (m) {
                this.matr = m;
                return null;
            };
            GLCanvasRenderingContext2D.prototype.stroke = function () {
                return null;
            };
            GLCanvasRenderingContext2D.prototype.strokeRect = function (x, y, w, h) {
                return null;
            };
            GLCanvasRenderingContext2D.prototype.strokeText = function (text, x, y, opt_maxWidth) {
                if (opt_maxWidth === void 0) { opt_maxWidth = 0; }
                return null;
            };
            GLCanvasRenderingContext2D.prototype.transform2 = function (m) {
                var result_a = this.matr.a / m.a;
                var result_b = 0.0;
                var result_c = 0.0;
                var result_d = this.matr.d / m.d;
                var result_tx = this.matr.tx / m.a + m.tx / m.a;
                var result_ty = this.matr.ty / m.d + m.ty / m.d;
                if (this.matr.b != 0.0 || this.matr.c != 0.0 || m.b != 0.0 || m.c != 0.0) {
                    result_a = result_a + this.matr.b * m.c;
                    result_d = result_d + this.matr.c * m.b;
                    result_b = result_b + (this.matr.a * m.b + this.matr.b * m.d);
                    result_c = result_c + (this.matr.c * m.a + this.matr.d * m.c);
                    result_tx = result_tx + this.matr.ty * m.c;
                    result_ty = result_ty + this.matr.tx * m.b;
                }
                m.a = result_a;
                m.b = result_b;
                m.c = result_c;
                m.d = result_d;
                m.tx = result_tx;
                m.ty = result_ty;
                this.matr = m;
                return null;
            };
            GLCanvasRenderingContext2D.prototype.getTexture = function (img) {
                var btexture = img._texture;
                if (btexture == null || (btexture && img._dirtyTexture)) {
                    if (btexture && btexture.texture) {
                        btexture.texture.dispose();
                    }
                    var w = this.getNextPow2(img.width);
                    var h = this.getNextPow2(img.height);
                    var bmd = new __native.BitmapData(w, h, true, 0);
                    bmd.fromImage(img);
                    var texture = this.ctx.createTexture(w, h, __native.Context3DTextureFormat.BGRA, false);
                    texture.uploadFromBitmapData(bmd, 1);
                    btexture = new __native.BitmapTexture;
                    btexture.img = img;
                    btexture.texture = texture;
                    btexture.width = w;
                    btexture.height = h;
                    img._texture = btexture;
                    img._dirtyTexture = false;
                }
                return btexture;
            };
            GLCanvasRenderingContext2D.prototype.getNextPow2 = function (v) {
                var r = 1;
                while (r < v) {
                    r *= 2;
                }
                return r;
            };
            return GLCanvasRenderingContext2D;
        }());
        __native.GLCanvasRenderingContext2D = GLCanvasRenderingContext2D;
    })(__native = flash.__native || (flash.__native = {}));
})(flash || (flash = {}));
var s3eUtils;
(function (s3eUtils) {
    s3eUtils.Error = global.Error;
    s3eUtils.CONFIG = global.CONFIG;
    s3eUtils.EventStats = global.EventStats;
    s3eUtils.GLog = global.GLog;
    s3eUtils.toMb = global.toMb;
    s3eUtils.Bitmap = flash.display.Bitmap;
    s3eUtils.BitmapData = flash.display.BitmapData;
    s3eUtils.DisplayObject = flash.display.DisplayObject;
    s3eUtils.FrameLabel = flash.display.FrameLabel;
    s3eUtils.Loader = flash.display.Loader;
    s3eUtils.MovieClip = flash.display.MovieClip;
    s3eUtils.Sprite = flash.display.Sprite;
    s3eUtils.Event = flash.events.Event;
    s3eUtils.IOErrorEvent = flash.events.IOErrorEvent;
    s3eUtils.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    s3eUtils.Matrix = flash.geom.Matrix;
    s3eUtils.Point = flash.geom.Point;
    s3eUtils.Rectangle = flash.geom.Rectangle;
    s3eUtils.URLRequest = flash.net.URLRequest;
    s3eUtils.ByteArray = flash.utils.ByteArray;
    s3eUtils.Dictionary = flash.utils.Dictionary;
    s3eUtils.setTimeout = flash.utils.setTimeout;
    var SnappedSWF = (function (_super) {
        __extends(SnappedSWF, _super);
        function SnappedSWF() {
            var _this = _super.call(this) || this;
            _this.isShowed = false;
            _this.mFrame = 0;
            _this.mSnapshotMode = false;
            _this.mProgress = 0;
            _this.mProgressScrollRect2Width = 0;
            _this.mMap = new s3eUtils.Dictionary;
            _this.mSize = new s3eUtils.Dictionary;
            _this.mScale = new s3eUtils.Dictionary;
            _this.mFrameLabels = new s3eUtils.Dictionary;
            _this.mLastFrameDrawed = new s3eUtils.Dictionary;
            _this.mMatrix = new s3eUtils.Matrix;
            _this.mProgressMap = new s3eUtils.Dictionary;
            _this.mProgressSize = new s3eUtils.Dictionary;
            _this.mProgressType = new s3eUtils.Dictionary;
            _this.mProgressScrollRect = new s3eUtils.Rectangle;
            _this.visible = false;
            return _this;
        }
        SnappedSWF.prototype.load = function (url, frameIntegrity) {
            this.mFrameIntegrity = frameIntegrity;
            this.mLoader = new s3eUtils.Loader;
            this.mLoader.contentLoaderInfo.addEventListener(s3eUtils.Event.COMPLETE, function (event) {
                s3eUtils.EventStats.handle(SnappedSWF, event);
                s3eUtils.GLog.print("[SnappedSWF] loading complete, url=" + url);
                if (this.mLoader.content instanceof s3eUtils.Bitmap) {
                    var name_1 = 'default';
                    this.mView = this.mLoader.content;
                    this.mMap.set(name_1, [this.mView.bitmapData]);
                    this.mSize.set(name_1, new s3eUtils.Point(this.mView.width, this.mView.height));
                    this.mScale.set(name_1, new s3eUtils.Point(1, 1));
                    this.addChild(this.mView);
                    s3eUtils.GLog.print("[SnappedSWF] ready for using");
                    return;
                }
                this.mContent = this.mLoader.content;
                if (!this.mContent) {
                    return;
                }
                if (!this.mContent.numChildren) {
                    this.mContent = null;
                    return;
                }
                this.mView = new s3eUtils.Bitmap;
                this.mProgressView = new s3eUtils.Bitmap;
                this.mProgressView.scrollRect = this.mProgressScrollRect;
                for (var i = 0; i < this.mContent.numChildren; ++i) {
                    var child = this.mContent.getChildAt(i);
                    if (!child) {
                        continue;
                    }
                    child.gotoAndStop(0);
                    var name = this.parseName(child.name);
                    this.mMap.set(name, []);
                    this.mSize.set(name, new s3eUtils.Point(child.width, child.height));
                    this.mScale.set(name, new s3eUtils.Point(child.scaleX, child.scaleY));
                    this.mFrameLabels.set(name, new s3eUtils.Dictionary);
                    for (var _i = 0, _a = child.currentLabels; _i < _a.length; _i++) {
                        var label = _a[_i];
                        this.mFrameLabels.get(name).set(label.frame, parseInt(label.name));
                    }
                    if (child.currentLabels && child.currentLabels.length) {
                        this.mProgressType.set(name, child.currentLabels[0].name);
                    }
                    child.visible = false;
                }
                this.mSnapshotMode = true;
                this.printFrame();
                this.addEventListener(s3eUtils.Event.ENTER_FRAME, this.printFrame.bind(this));
                s3eUtils.GLog.print("[SnappedSWF] ready for using");
            }.bind(this));
            var request = new s3eUtils.URLRequest(url);
            this.mLoader.contentLoaderInfo.addEventListener(s3eUtils.IOErrorEvent.IO_ERROR, function (event) {
                s3eUtils.EventStats.handle(SnappedSWF, event);
                s3eUtils.GLog.print("[SnappedSWF] loading error=" + event.text + ", url=" + url);
                s3eUtils.setTimeout(this.mLoader.load.bind(this.mLoader), s3eUtils.getReconnectInterval(), request);
            }.bind(this));
            this.mLoader.contentLoaderInfo.addEventListener(s3eUtils.SecurityErrorEvent.SECURITY_ERROR, function (event) {
                s3eUtils.EventStats.handle(SnappedSWF, event);
                s3eUtils.GLog.print("[SnappedSWF] loading security error=" + event.text + ", url=" + url);
                s3eUtils.setTimeout(this.mLoader.load.bind(this.mLoader), s3eUtils.getReconnectInterval(), request);
            }.bind(this));
            this.addEventListener(s3eUtils.Event.ADDED_TO_STAGE, function (event) {
                this.stage.addEventListener(s3eUtils.Event.RESIZE, this.resize.bind(this));
                this.resize();
            }.bind(this));
            if (SnappedSWF.EmbedData != null && 'getAsset' in SnappedSWF.EmbedData) {
                var ba = SnappedSWF.EmbedData['getAsset'](url);
                if (ba) {
                    this.mLoader.loadBytes(ba);
                    return;
                }
            }
            return;
            this.mLoader.load(request);
        };
        SnappedSWF.prototype.show = function (name) {
            if (name === void 0) { name = 'default'; }
            if (this.isShowed && this.mCurrent == name) {
                return;
            }
            this.mCurrent = name;
            this.mFrame = 0;
            this.scrollRectSetWidth(0);
            this.showFrame(this.mFrame);
            this.visible = this.isShowed = true;
            this.resize();
            s3eUtils.Blocker.show(this);
            this.removeEventListener(s3eUtils.Event.ENTER_FRAME, this.nextFrame.bind(this));
            this.addEventListener(s3eUtils.Event.ENTER_FRAME, this.nextFrame.bind(this));
        };
        Object.defineProperty(SnappedSWF.prototype, "progress", {
            get: function () {
                return this.mProgress;
            },
            set: function (value) {
                if (value > 100)
                    value = 100;
                if (value < 0)
                    value = 0;
                if (value == this.mProgress) {
                    return;
                }
                this.mProgress = value;
                this.updateProgressView();
            },
            enumerable: true,
            configurable: true
        });
        SnappedSWF.prototype.hide = function () {
            if (!this.isShowed) {
                return;
            }
            this.visible = this.isShowed = false;
            s3eUtils.Blocker.hide(this);
            this.removeEventListener(s3eUtils.Event.ENTER_FRAME, this.nextFrame.bind(this));
        };
        Object.defineProperty(SnappedSWF.prototype, "current", {
            get: function () {
                var def = 'default';
                return this.mMap.get(this.mCurrent) ? this.mCurrent : def;
            },
            enumerable: true,
            configurable: true
        });
        SnappedSWF.prototype.nextFrame = function (event) {
            if (event === void 0) { event = null; }
            if (!this.current) {
                return;
            }
            if (!this.mMap.get(this.current)) {
                return;
            }
            if (this.mProgressType.get(this.current) == SnappedSWF.PROGRESS_BY_FRAMES) {
                return;
            }
            this.mFrame += 1 / this.mFrameIntegrity;
            if (this.mFrame >= this.mMap.get(this.current).length)
                this.mFrame = 0;
            this.showFrame(this.mFrame);
        };
        SnappedSWF.prototype.resize = function (event) {
            if (event === void 0) { event = null; }
            if (!this.stage || !this.mView) {
                return;
            }
            if (!this.mMap.get(this.current)) {
                return;
            }
            this.mView.x = this.stage.stageWidth - this.mSize.get(this.current).x >> 1;
            this.mView.y = this.stage.stageHeight - this.mSize.get(this.current).y >> 1;
            if (!this.mProgressSize.get(this.current)) {
                return;
            }
            this.mProgressView.x = this.mView.x + this.mProgressSize.get(this.current).x;
            this.mProgressView.y = this.mView.y + this.mProgressSize.get(this.current).y;
        };
        SnappedSWF.prototype.printFrame = function (event) {
            if (event === void 0) { event = null; }
            var bd;
            var completed = 0;
            var numChildren = this.mContent.numChildren;
            for (var i = 0; i < numChildren; ++i) {
                var child = this.mContent.getChildAt(i);
                if (!child) {
                    continue;
                }
                var name = this.parseName(child.name);
                var currentFrame = child.currentFrame;
                currentFrame = child.currentFrame;
                var duplicateFrames = this.mFrameLabels.get(name)[currentFrame];
                if (duplicateFrames < 1)
                    duplicateFrames = 1;
                var want2skipFrame = this.mFrameIntegrity > 1 && currentFrame % this.mFrameIntegrity == 0 && duplicateFrames <= 1;
                if (this.mProgressType.get(name) == SnappedSWF.PROGRESS_BY_FRAMES)
                    want2skipFrame = false;
                var needDrawLastFrame = currentFrame == child.totalFrames;
                if (needDrawLastFrame && (this.mLastFrameDrawed.get(name) || want2skipFrame)) {
                    completed++;
                    continue;
                }
                if (want2skipFrame) {
                    child.nextFrame();
                    continue;
                }
                var sX = this.mScale.get(name).x;
                var sY = this.mScale.get(name).y;
                this.mMatrix.identity();
                this.mMatrix.scale(sX, sY);
                if (!this.mProgressMap.get(name)) {
                    var prog = child.getChildByName('progress');
                    if (prog) {
                        try {
                            bd = new s3eUtils.BitmapData(prog.width * sX, prog.height * sY, true, 0x0);
                            bd.draw(prog, this.mMatrix);
                        }
                        catch (error) {
                            bd = null;
                        }
                        this.mProgressSize.set(name, new s3eUtils.Rectangle(prog.x * sX, prog.y * sY, bd.width, bd.height));
                        this.mProgressMap.set(name, bd);
                        child.removeChild(prog);
                    }
                }
                try {
                    bd = new s3eUtils.BitmapData(this.mSize.get(name).x, this.mSize.get(name).y, true, 0x0);
                    bd.draw(child, this.mMatrix);
                }
                catch (error) {
                    if (this.mMap.get(name).length > 0) {
                        bd = this.mMap.get(name)[this.mMap.get(name).length - 1];
                    }
                    else {
                        continue;
                    }
                }
                for (var j = 0; j < duplicateFrames; ++j) {
                    this.mMap.get(name).push(bd);
                }
                if (needDrawLastFrame) {
                    this.mLastFrameDrawed.set(name, true);
                }
                child.nextFrame();
            }
            if (completed >= numChildren) {
                this.mSnapshotMode = false;
                this.removeEventListener(s3eUtils.Event.ENTER_FRAME, this.printFrame.bind(this));
                this.mLoader.unloadAndStop(true);
                this.mContent = null;
                this.mLoader = null;
                this.addChild(this.mView);
                this.addChild(this.mProgressView);
                this.resize();
                if (s3eUtils.CONFIG.QA_VERSION)
                    this.print();
            }
        };
        SnappedSWF.prototype.showFrame = function (index) {
            if (!this.mMap.get(this.current)) {
                return;
            }
            if (index > this.mMap.get(this.current).length - 1) {
                return;
            }
            this.mView.bitmapData = this.mMap.get(this.current)[index];
            if (!this.mProgressView) {
                return;
            }
            this.mProgressView.bitmapData = this.mProgressMap.get(this.current);
            if (!this.mProgressView.bitmapData) {
                this.mProgressScrollRect.setEmpty();
                return;
            }
            this.updateProgressView();
        };
        SnappedSWF.prototype.updateProgressView = function () {
            if (!this.mProgressView) {
                return;
            }
            if (this.mProgressType.get(this.current) == SnappedSWF.PROGRESS_BY_FRAMES) {
                this.showFrame(this.mProgress / 100 * this.mMap.get(this.current).length);
                return;
            }
            if (this.mProgressView.bitmapData) {
                this.mProgressScrollRect2Width = this.mProgressSize.get(this.current).width * (this.mProgress / 100);
                var w = this.mProgressView.scrollRect.width;
                if (w < this.mProgressScrollRect2Width && this.mProgressSize.get(this.current).width - w >= 5) {
                    var diff = this.mProgressScrollRect2Width - this.mProgressScrollRect.width;
                    this.scrollRectSetWidth(Math.round(this.mProgressScrollRect.width + ((diff) / 10)));
                }
                else {
                    this.scrollRectSetWidth(this.mProgressScrollRect2Width);
                }
            }
        };
        SnappedSWF.prototype.scrollRectSetWidth = function (width) {
            if (!this.mProgressSize.get(this.current)) {
                return;
            }
            this.mProgressScrollRect.setTo(0, 0, width, this.mProgressSize.get(this.current).height);
            this.mProgressView.scrollRect = this.mProgressScrollRect;
        };
        SnappedSWF.prototype.parseName = function (name) {
            return name.indexOf('instance') == -1 ? name : 'default';
        };
        SnappedSWF.prototype.print = function () {
            for (var _i = 0, _a = this.mMap.keys; _i < _a.length; _i++) {
                var name = _a[_i];
                var size = 0;
                var frames = 0;
                var duplicates = 0;
                var prev;
                for (var _b = 0, _c = this.mMap.get(name); _b < _c.length; _b++) {
                    var bd = _c[_b];
                    if (bd == prev) {
                        duplicates++;
                        continue;
                    }
                    frames++;
                    size += bd.width * bd.height * 4;
                    prev = bd;
                }
                s3eUtils.GLog.print("[SnappedSWF] " + name + ", frames=" + frames + "/" + duplicates + ", size (mb)=" + s3eUtils.toMb(size));
            }
        };
        SnappedSWF.PROGRESS_BY_SCROLLRECT = undefined;
        SnappedSWF.PROGRESS_BY_FRAMES = 'progress_by_frames';
        return SnappedSWF;
    }(s3eUtils.Sprite));
    s3eUtils.SnappedSWF = SnappedSWF;
})(s3eUtils || (s3eUtils = {}));
var flash;
(function (flash) {
    var display3D;
    (function (display3D) {
        display3D.BitmapData = flash.display.BitmapData;
        display3D.Stage = flash.display.Stage;
        display3D.CubeTexture = flash.display3D.textures.CubeTexture;
        display3D.RectangleTexture = flash.display3D.textures.RectangleTexture;
        display3D.Texture = flash.display3D.textures.Texture;
        display3D.TextureBase = flash.display3D.textures.TextureBase;
        display3D.VideoTexture = flash.display3D.textures.VideoTexture;
        display3D.EventDispatcher = flash.events.EventDispatcher;
        display3D.Matrix3D = flash.geom.Matrix3D;
        display3D.Rectangle = flash.geom.Rectangle;
        display3D.ByteArray = flash.utils.ByteArray;
        display3D.StageDisplayState = flash.display.StageDisplayState;
        var Context3D = (function (_super) {
            __extends(Context3D, _super);
            function Context3D() {
                var _this = _super.call(this) || this;
                _this.experimental = false;
                _this.currentTextures = {};
                _this.currentVBufs = {};
                return _this;
            }
            Object.defineProperty(Context3D, "supportsVideoTexture", {
                get: function () {
                    return false;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Context3D, "supportsWebGL", {
                get: function () {
                    return 'WebGLRenderingContext' in window;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Context3D.prototype, "driverInfo", {
                get: function () {
                    return 'WebGL (' + (this.experimental ? 'Experimental' : 'Baseline') + ')';
                },
                enumerable: true,
                configurable: true
            });
            Context3D.prototype.dispose = function (recreate) {
                if (recreate === void 0) { recreate = true; }
            };
            Object.defineProperty(Context3D.prototype, "enableErrorChecking", {
                get: function () {
                    return false;
                },
                set: function (toggle) {
                },
                enumerable: true,
                configurable: true
            });
            Context3D.prototype.configureBackBuffer = function (width, height, antiAlias, enableDepthAndStencil, wantsBestResolution) {
                if (enableDepthAndStencil === void 0) { enableDepthAndStencil = true; }
                if (wantsBestResolution === void 0) { wantsBestResolution = false; }
                this.canvas.width = width;
                this.canvas.height = height;
                this.gl.viewport(0, 0, width, height);
                if (enableDepthAndStencil) {
                    this.gl.enable(this.gl.DEPTH_TEST);
                    this.gl.enable(this.gl.STENCIL_TEST);
                }
                else {
                    this.gl.disable(this.gl.DEPTH_TEST);
                    this.gl.disable(this.gl.STENCIL_TEST);
                }
            };
            Context3D.prototype.clear = function (red, green, blue, alpha, depth, stencil, mask) {
                if (red === void 0) { red = 0; }
                if (green === void 0) { green = 0; }
                if (blue === void 0) { blue = 0; }
                if (alpha === void 0) { alpha = 1; }
                if (depth === void 0) { depth = 1; }
                if (stencil === void 0) { stencil = 0; }
                if (mask === void 0) { mask = 4294967295; }
                this.stage.dirtyGraphics();
                this.gl.clearColor(red, green, blue, alpha);
                this.gl.clearDepth(depth);
                this.gl.clearStencil(stencil);
                this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);
            };
            Context3D.prototype.drawTriangles = function (indexBuffer, firstIndex, numTriangles) {
                if (firstIndex === void 0) { firstIndex = 0; }
                if (numTriangles === void 0) { numTriangles = -1; }
                this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, indexBuffer.buff);
                this.gl.drawElements(this.gl.TRIANGLES, numTriangles < 0 ? indexBuffer.numIndices : numTriangles * 3, this.gl.UNSIGNED_SHORT, firstIndex * 2);
            };
            Context3D.prototype.present = function () {
                this.stage.dirtyGraphics();
            };
            Context3D.prototype.setProgram = function (program) {
                if (this.currentProgram != program) {
                    this.currentProgram = program;
                    this.gl.useProgram(program.program);
                }
            };
            Context3D.prototype.setProgramConstantsFromVector = function (programType, firstRegister, data, numRegisters) {
                if (numRegisters === void 0) { numRegisters = -1; }
                this.setProgramConstantsFromVectorGL(this.getUniformLocationName(programType, firstRegister), data, numRegisters);
            };
            Context3D.prototype.setProgramConstantsFromMatrix = function (programType, firstRegister, matrix, transposedMatrix) {
                if (transposedMatrix === void 0) { transposedMatrix = false; }
                this.setProgramConstantsFromMatrixGL(this.getUniformLocationName(programType, firstRegister), matrix, transposedMatrix);
            };
            Context3D.prototype.setProgramConstantsFromByteArray = function (programType, firstRegister, numRegisters, data, byteArrayOffset) {
            };
            Context3D.prototype.setProgramConstantsFromVectorGL = function (name, data, numRegisters) {
                if (numRegisters === void 0) { numRegisters = -1; }
                this.gl.uniform4fv(this.getUniformLocation(name), data);
            };
            Context3D.prototype.setProgramConstantsFromMatrixGL = function (name, matrix, transposedMatrix) {
                if (transposedMatrix === void 0) { transposedMatrix = false; }
                if (transposedMatrix) {
                    matrix.transpose();
                }
                this.gl.uniformMatrix4fv(this.getUniformLocation(name), false, matrix.rawData);
                if (transposedMatrix) {
                    matrix.transpose();
                }
            };
            Context3D.prototype.setProgramConstantsFromByteArrayGL = function (name, numRegisters, data, byteArrayOffset) {
            };
            Context3D.prototype.getUniformLocationName = function (programType, register) {
                return (display3D.Context3DProgramType.VERTEX === programType) ? ("vc" + register) : ("fc" + register);
            };
            Context3D.prototype.getUniformLocation = function (name) {
                return this.currentProgram.getUniformLocation(name);
            };
            Context3D.prototype.setVertexBufferAt = function (index, buffer, bufferOffset, format) {
                if (bufferOffset === void 0) { bufferOffset = 0; }
                if (format === void 0) { format = "float4"; }
                this.setVertexBufferAtGL("va" + index, buffer, bufferOffset, format);
            };
            Context3D.prototype.setVertexBufferAtGL = function (name, buffer, bufferOffset, format) {
                if (bufferOffset === void 0) { bufferOffset = 0; }
                if (format === void 0) { format = "float4"; }
                if (this.currentVBufs[name] == buffer) {
                    return;
                }
                this.currentVBufs[name] = buffer;
                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, buffer.buff);
                var loc = this.currentProgram.getAttribLocation(name);
                var type = this.gl.FLOAT;
                var size = 0;
                var numBytes = 4;
                var normalized = false;
                switch (format) {
                    case display3D.Context3DVertexBufferFormat.FLOAT_1:
                        size = 1;
                        break;
                    case display3D.Context3DVertexBufferFormat.FLOAT_2:
                        size = 2;
                        break;
                    case display3D.Context3DVertexBufferFormat.FLOAT_3:
                        size = 3;
                        break;
                    case display3D.Context3DVertexBufferFormat.FLOAT_4:
                        size = 4;
                        break;
                    case display3D.Context3DVertexBufferFormat.BYTES_4:
                        size = 4;
                        numBytes = 0;
                        type = this.gl.UNSIGNED_BYTE;
                        normalized = true;
                        break;
                }
                this.gl.vertexAttribPointer(loc, size, type, normalized, buffer.data32PerVertex * numBytes, bufferOffset * numBytes);
            };
            Context3D.prototype.setBlendFactors = function (sourceFactor, destinationFactor) {
                this.gl.enable(this.gl.BLEND);
                this.gl.blendEquation(this.gl.FUNC_ADD);
                this.gl.blendFunc(display3D.Context3DBlendFactor.getGLVal(this.gl, sourceFactor), display3D.Context3DBlendFactor.getGLVal(this.gl, destinationFactor));
            };
            Context3D.prototype.setBlendFactorsSeparate = function (sourceFactorRGB, destinationFactorRGB, sourceFactorAlpha, destinationFactorAlpha) {
                this.gl.enable(this.gl.BLEND);
                this.gl.blendEquationSeparate(this.gl.FUNC_ADD, this.gl.FUNC_ADD);
                this.gl.blendFuncSeparate(display3D.Context3DBlendFactor.getGLVal(this.gl, sourceFactorRGB), display3D.Context3DBlendFactor.getGLVal(this.gl, destinationFactorRGB), display3D.Context3DBlendFactor.getGLVal(this.gl, sourceFactorAlpha), display3D.Context3DBlendFactor.getGLVal(this.gl, destinationFactorAlpha));
            };
            Context3D.prototype.setColorMask = function (red, green, blue, alpha) {
                this.gl.colorMask(red, green, blue, alpha);
            };
            Context3D.prototype.setDepthTest = function (depthMask, passCompareMode) {
                this.gl.depthFunc(display3D.Context3DCompareMode.getGLVal(this.gl, passCompareMode));
                this.gl.depthMask(depthMask);
            };
            Context3D.prototype.setTextureAt = function (sampler, texture) {
                if (texture == null) {
                    this.setTextureInternal(sampler, null);
                }
                else if (texture instanceof display3D.Texture) {
                    this.setTextureInternal(sampler, texture);
                }
                else if (texture instanceof display3D.CubeTexture) {
                    this.setCubeTextureInternal(sampler, texture);
                }
                else if (texture instanceof display3D.RectangleTexture) {
                    this.setRectangleTextureInternal(sampler, texture);
                }
                else if (texture instanceof display3D.VideoTexture) {
                    this.setVideoTextureInternal(sampler, texture);
                }
            };
            Context3D.prototype.setRenderToTexture = function (texture, enableDepthAndStencil, antiAlias, surfaceSelector, colorOutputIndex) {
                if (enableDepthAndStencil === void 0) { enableDepthAndStencil = false; }
                if (antiAlias === void 0) { antiAlias = 0; }
                if (surfaceSelector === void 0) { surfaceSelector = 0; }
                if (colorOutputIndex === void 0) { colorOutputIndex = 0; }
                var targetType = 0;
                if (texture instanceof display3D.Texture) {
                    targetType = 1;
                }
                else if (texture instanceof display3D.CubeTexture) {
                    targetType = 2;
                }
                else if (texture instanceof display3D.RectangleTexture) {
                    targetType = 3;
                }
                else if (texture != null) {
                    throw "texture argument not derived from TextureBase (can be Texture, CubeTexture, or if supported, RectangleTexture)";
                }
                this.setRenderToTextureInternal(texture, targetType, enableDepthAndStencil, antiAlias, surfaceSelector, colorOutputIndex);
            };
            Context3D.prototype.setRenderToBackBuffer = function () {
            };
            Context3D.prototype.setRenderToTextureInternal = function (param1, param2, param3, param4, param5, param6) {
            };
            Context3D.prototype.setCulling = function (triangleFaceToCull) {
                if (triangleFaceToCull === display3D.Context3DTriangleFace.NONE) {
                    this.gl.disable(this.gl.CULL_FACE);
                }
                else {
                    this.gl.enable(this.gl.CULL_FACE);
                    this.gl.cullFace(display3D.Context3DTriangleFace.getGLVal(this.gl, triangleFaceToCull));
                }
            };
            Context3D.prototype.setStencilActions = function (triangleFace, compareMode, actionOnBothPass, actionOnDepthFail, actionOnDepthPassStencilFail) {
                if (triangleFace === void 0) { triangleFace = "frontAndBack"; }
                if (compareMode === void 0) { compareMode = "always"; }
                if (actionOnBothPass === void 0) { actionOnBothPass = "keep"; }
                if (actionOnDepthFail === void 0) { actionOnDepthFail = "keep"; }
                if (actionOnDepthPassStencilFail === void 0) { actionOnDepthPassStencilFail = "keep"; }
            };
            Context3D.prototype.setStencilReferenceValue = function (referenceValue, readMask, writeMask) {
                if (readMask === void 0) { readMask = 255; }
                if (writeMask === void 0) { writeMask = 255; }
            };
            Context3D.prototype.setScissorRectangle = function (rectangle) {
                if (rectangle == null) {
                    this.gl.disable(this.gl.SCISSOR_TEST);
                }
                else {
                    this.gl.enable(this.gl.SCISSOR_TEST);
                    this.gl.scissor(rectangle.x, this.stage.stageHeight - rectangle.y - rectangle.height, rectangle.width, rectangle.height);
                }
            };
            Context3D.prototype.createVertexBuffer = function (numVertices, data32PerVertex, bufferUsage) {
                if (bufferUsage === void 0) { bufferUsage = "staticDraw"; }
                var buffer = new display3D.VertexBuffer3D;
                buffer.data32PerVertex = data32PerVertex;
                buffer.buff = this.gl.createBuffer();
                buffer.gl = this.gl;
                return buffer;
            };
            Context3D.prototype.createIndexBuffer = function (numIndices, bufferUsage) {
                if (bufferUsage === void 0) { bufferUsage = "staticDraw"; }
                var buffer = new display3D.IndexBuffer3D;
                buffer.buff = this.gl.createBuffer();
                buffer.gl = this.gl;
                buffer.numIndices = numIndices;
                return buffer;
            };
            Context3D.prototype.createTexture = function (width, height, format, optimizeForRenderToTexture, streamingLevels) {
                if (streamingLevels === void 0) { streamingLevels = 0; }
                var t = new display3D.Texture;
                t.gl = this.gl;
                t.texture = this.gl.createTexture();
                return t;
            };
            Context3D.prototype.createCubeTexture = function (size, format, optimizeForRenderToTexture, streamingLevels) {
                if (streamingLevels === void 0) { streamingLevels = 0; }
                return null;
            };
            Context3D.prototype.createRectangleTexture = function (width, height, format, optimizeForRenderToTexture) { return null; };
            Context3D.prototype.createProgram = function () {
                var p = new display3D.Program3D;
                p.gl = this.gl;
                p.program = this.gl.createProgram();
                return p;
            };
            Context3D.prototype.drawToBitmapData = function (destination) {
            };
            Context3D.prototype.setSamplerStateAt = function (sampler, wrap, filter, mipfilter) {
            };
            Object.defineProperty(Context3D.prototype, "profile", {
                get: function () { return null; },
                enumerable: true,
                configurable: true
            });
            Context3D.prototype.setTextureInternal = function (sampler, texture) {
                this.setTextureAtGL("fs" + sampler, sampler, texture);
            };
            Context3D.prototype.setTextureAtGL = function (name, sampler, texture) {
                if (this.currentTextures[name] != texture) {
                    this.currentTextures[name] = texture;
                    if (texture) {
                        this.gl.activeTexture(WebGLRenderingContext["TEXTURE" + sampler]);
                        this.gl.bindTexture(this.gl.TEXTURE_2D, texture.texture);
                        this.gl.uniform1i(this.currentProgram.getUniformLocation(name), sampler);
                    }
                }
            };
            Context3D.prototype.setCubeTextureInternal = function (param1, param2) {
            };
            Context3D.prototype.setRectangleTextureInternal = function (param1, param2) {
            };
            Context3D.prototype.setVideoTextureInternal = function (param1, param2) {
            };
            Object.defineProperty(Context3D.prototype, "backBufferWidth", {
                get: function () { return 0; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Context3D.prototype, "backBufferHeight", {
                get: function () { return 0; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Context3D.prototype, "maxBackBufferWidth", {
                get: function () { return 0; },
                set: function (width) {
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Context3D.prototype, "maxBackBufferHeight", {
                get: function () { return 0; },
                set: function (height) {
                },
                enumerable: true,
                configurable: true
            });
            Context3D.prototype.createVideoTexture = function () { return null; };
            return Context3D;
        }(display3D.EventDispatcher));
        display3D.Context3D = Context3D;
    })(display3D = flash.display3D || (flash.display3D = {}));
})(flash || (flash = {}));
var tools;
(function (tools) {
    tools.Error = global.Error;
    tools.ASViewer = global.ASViewer;
    tools.CONFIG = global.CONFIG;
    tools.EventStats = global.EventStats;
    tools.GLog = global.GLog;
    tools.SocialStats = global.SocialStats;
    tools.toMb = global.toMb;
    tools.AssetsData = datas.AssetsData;
    tools.DataImage = datas.DataImage;
    tools.ErrorType = errors.ErrorType;
    tools.Stage = flash.display.Stage;
    tools.StageDisplayState = flash.display.StageDisplayState;
    tools.ErrorEvent = flash.events.ErrorEvent;
    tools.Capabilities = flash.system.Capabilities;
    tools.System = flash.system.System;
    tools.getTimer = flash.utils.getTimer;
    tools.AppIcf = s3eUtils.AppIcf;
    tools.Online = s3eUtils.Online;
    tools.Parse = s3eUtils.Parse;
    tools.FrameRateStats = tools.fps.FrameRateStats;
    var CrashReport = (function () {
        function CrashReport() {
            throw new tools.Error("Abstract class error");
        }
        CrashReport.startApp = function (cppSatckData) {
            CrashReport.cppSatckData = cppSatckData;
        };
        CrashReport.viewerReadInt = function (cppPtr) {
            var res = Module.HEAP32[cppPtr >> 2];
            return res;
        };
        CrashReport.viewerReadStr = function (cppPtr) {
            var strPtr = Module.HEAPU32[cppPtr >> 2];
            var res = Module.UTF8ToString(strPtr);
            return res;
        };
        CrashReport.viewerTrace = function () {
            var cppStackStr = "";
            if (!CrashReport.cppSatckData)
                return cppStackStr;
            cppStackStr = "<br><b>ViewerTrace:</b><br>";
            var curCppStackPtr = CrashReport.cppSatckData;
            var frames = CrashReport.viewerReadInt(curCppStackPtr);
            curCppStackPtr += 4;
            if (frames > 256)
                return cppStackStr;
            for (var frame = 0; frame < frames; frame++) {
                var functionName = CrashReport.viewerReadStr(curCppStackPtr);
                curCppStackPtr += 4;
                var param1 = CrashReport.viewerReadStr(curCppStackPtr);
                curCppStackPtr += 4;
                var param2 = CrashReport.viewerReadStr(curCppStackPtr);
                curCppStackPtr += 4;
                var objID = CrashReport.viewerReadInt(curCppStackPtr);
                curCppStackPtr += 8;
                if (objID >= 0) {
                    cppStackStr += functionName + " " + param1 + " " + param2 + " (id:" + objID + ")";
                }
                else {
                    cppStackStr += functionName + " " + param1 + " " + param2;
                }
                cppStackStr += "<br>";
            }
            return cppStackStr;
        };
        CrashReport.send = function (subject, errorCode, userId, userName, gameVersion, message, files, limit) {
            if (message === void 0) { message = null; }
            if (files === void 0) { files = []; }
            if (limit === void 0) { limit = CrashReport.LIMIT_SINGLE; }
            try {
                var d = new Date;
                userId = userId || 'undefined_' + d.fullYear + '.' + d.month + '.' + d.day + '-' + d.hours + ':00';
            }
            catch (e) { }
            if (!subject || !userId) {
                tools.GLog.print("[Error " + subject + "] " + message);
                return;
            }
            if (CrashReport.map[subject] > 0) {
                tools.GLog.print("[Error " + subject + "] " + message);
                return;
            }
            message = message || "";
            userName = userName || "undefined";
            var splitter = "<br>";
            var header = "";
            header += '-x-x-x-START-x-x-x-' + splitter;
            header += '-x-x-x-Params:-x-x-x-' + splitter;
            try {
                var stage = tools.ASViewer.instance.stage;
                var absStatAppId = tools.AppIcf.read(tools.ASViewer.ICF_ABS_STAT, "appID");
                var cloudAppId = tools.AppIcf.read(tools.ASViewer.ICF_CLOUD, "app");
                var market = tools.AppIcf.read(tools.ASViewer.ICF_GAME, 'market');
                var os = tools.Capabilities.os;
                var browser = tools.CONFIG.getBrowser();
                var flashPlayer = 'FP 0';
                var driver = (tools.ASViewer.sDriverInfo ? tools.ASViewer.sDriverInfo : "not established");
                var viewport = stage.stageWidth + "x" + stage.stageHeight + " / " + stage.fullScreenWidth + "x" + stage.fullScreenHeight;
                var displayState = stage.displayState;
                var fps = tools.FrameRateStats.average;
                var viewerLoadState = tools.ASViewer.instance.viewerLoadState;
                var viewerLoadStateStr = tools.ASViewer.instance.viewerLoadStateStr;
                var osLocale = tools.ASViewer.instance.systemLanguage;
                var userLocale = tools.ASViewer.instance.pageLanguage;
                var eventAS3 = tools.EventStats.toString();
                var eventCPP = tools.ASViewer.sLastEvent2Viewer;
                var callbackCPP = tools.ASViewer.sLastStartCallbackFn;
                var commonCPP = tools.ASViewer.sLastS3eCommon;
                var totalMemory = tools.System.totalMemory;
                addHeader.bind(this)("AbsStat", absStatAppId);
                addHeader.bind(this)("Cloud key", cloudAppId);
                addHeader.bind(this)("Market", market);
                addHeader.bind(this)("User Id", userId);
                addHeader.bind(this)("User Name", userName);
                addHeader.bind(this)("Game Version", gameVersion);
                addHeader.bind(this)("Build Version", this.VERSION);
                addHeader.bind(this)("System OS", os);
                addHeader.bind(this)("Browser", browser);
                addHeader.bind(this)("Flash player", flashPlayer);
                addHeader.bind(this)("Debugger", tools.Capabilities.isDebugger);
                addHeader.bind(this)("Driver Info", driver);
                addHeader.bind(this)("Viewport", viewport);
                addHeader.bind(this)("Display State", displayState);
                addHeader.bind(this)("System Language", osLocale);
                addHeader.bind(this)("Page Language", userLocale);
                addHeader.bind(this)("Avg FPS", fps.toFixed(1));
                addHeader.bind(this)("Is Online", tools.Online.connected);
                addHeader.bind(this)("Timing", tools.time2string(tools.ASViewer.instance.loadTime) + ' / ' + tools.time2string(tools.ASViewer.instance.playTime) + ' (' + tools.time2string(tools.ASViewer.instance.changeScreenTime) + ')');
                addHeader.bind(this)("LoadStep", viewerLoadState, true);
                addHeader.bind(this)("Event to Viewer", eventCPP);
                addHeader.bind(this)("AS3 last Event", eventAS3);
                addHeader.bind(this)("Last Frame Time", tools.getTimer() - tools.ASViewer.sStartFrameTime);
                addHeader.bind(this)("s3eCommon", commonCPP);
                addHeader.bind(this)("startCallbackFn", callbackCPP);
                addHeader.bind(this)("Memory", tools.toMb(totalMemory));
                if (window.Module && Module.HEAP8)
                    addHeader.bind(this)("CModule Memory", "current (mb)=" + tools.toMb(Module.HEAP8.byteLength) + ", first (mb)=" + tools.ASViewer.instance.firstMalloc);
                addHeader.bind(this)("Malloc", "last (mb)=" + tools.toMb(tools.DataImage.BYTES_LAST) + ", max (mb)=" + tools.toMb(tools.DataImage.BYTES_MAX));
                addHeader.bind(this)("DataImage Load", "fid=" + tools.DataImage.IMAGE_LAST_LOAD_FID + ", pack=" + tools.DataImage.IMAGE_LAST_LOAD_PACK + ', size=' + tools.DataImage.IMAGE_LAST_LOAD_FID_SIZE.x + "x" + tools.DataImage.IMAGE_LAST_LOAD_FID_SIZE.y);
                if (tools.DataImage.IMAGE_LAST_UNCOMPRESSED_BYTES)
                    addHeader.bind(this)("DataImage SetPixels", "bytes=" + tools.DataImage.IMAGE_LAST_UNCOMPRESSED_BYTES);
                addHeader.bind(this)("DataImage Get Image", "fid=" + tools.DataImage.IMAGE_LAST_GET_FID + ", pack=" + tools.DataImage.IMAGE_LAST_GET_PACK + ", status=" + tools.DataImage.IMAGE_LAST_GET_STATUS);
                addHeader.bind(this)("DataImage Get Child", "fid=" + tools.DataImage.CHILD_LAST_GET_FID + ", pack=" + tools.DataImage.CHILD_LAST_GET_PACK + ", status=" + tools.DataImage.CHILD_LAST_GET_STATUS);
                for (var i = 0; i < (tools.DataImage.loaderInfo || []).length; ++i) {
                    var customLoader = tools.DataImage.loaderInfo[i];
                    var client = customLoader && customLoader.client ? customLoader.client : null;
                    addHeader.bind(this)("DataImage Loader [" + i + "]", "loader=" + customLoader + ", client=" + client);
                }
                if (tools.DataImage.queueLength)
                    addHeader.bind(this)("DataImage Queue", "length=" + tools.DataImage.queueLength);
                addHeader.bind(this)("Pack Complete", tools.AssetsData.packComplete);
                addHeader.bind(this)("Pack Loading", tools.AssetsData.packLoading);
                addHeader.bind(this)("Pack Failed", tools.AssetsData.packFailed);
                if (errorCode == 2100 || errorCode == 2030)
                    addHeader.bind(this)("Pack Details", tools.AssetsData.packDetails);
                if (errorCode == 900) {
                    addHeader.bind(this)("GET", tools.ASViewer.instance.httpGetLastResponse);
                    addHeader.bind(this)("POST", tools.ASViewer.instance.httpPostLastResponse);
                }
                if (errorCode == 100)
                    addHeader.bind(this)("Social Stats", tools.SocialStats.toString());
                for (var _i = 0, _a = tools.Tests.getList(); _i < _a.length; _i++) {
                    var test = _a[_i];
                    addHeader.bind(this)("Test " + test.type, test.text);
                }
                addHeader.bind(this)("Error Code", errorCode);
                for (var _b = 0, _c = CrashReport.params; _b < _c.length; _b++) {
                    var p = _c[_b];
                    addHeader.bind(this)(p.name, p.value);
                }
                var tmp = new Array;
                while (CrashReport.tempParams.length) {
                    p = CrashReport.tempParams.pop();
                    tmp.unshift(p);
                    addHeader.bind(this)(p.name, p.value);
                }
                var EXCLUDE = [];
                var cloud = tools.ASViewer.instance.cloudCrash;
                if (cloud && EXCLUDE.indexOf(subject) == -1) {
                    var subjectOfMessage = subject;
                    if (message) {
                        var ind = message.indexOf(':');
                        if (ind > 0 && ind <= 128)
                            subjectOfMessage = message.substr(0, ind);
                    }
                    message = message + "<br>" + CrashReport.viewerTrace();
                    var details = {
                        appId: cloudAppId,
                        market: market,
                        version: tools.ASViewer.instance.getVersionInt(),
                        subject: subjectOfMessage + tools.ASViewer.game2postfix,
                        code: errorCode,
                        stack: message,
                        os: os,
                        browser: browser,
                        driver: driver,
                        viewport: viewport,
                        fullscreen: displayState != tools.StageDisplayState.NORMAL,
                        locale: userLocale || osLocale,
                        state: viewerLoadState,
                        statestr: viewerLoadStateStr,
                        evcpp: eventCPP,
                        evas3: eventAS3,
                        callbackcpp: callbackCPP,
                        commoncpp: commonCPP,
                        time: tools.ASViewer.instance.sessionTime,
                        memoryas3: int(totalMemory * 0.000000954),
                        mbsec: int(tools.Tests.getResultNum(tools.Tests.NETWORK)),
                        avgfps: fps,
                        log: tools.ASViewer.instance.getLogsStr(tools.ASViewer.LOG_FILE, 2048)
                    };
                    if (flashPlayer && flashPlayer.indexOf('FP ') >= 0)
                        details.player = parseFloat(flashPlayer.split('FP ')[1]);
                    if (window.Module && Module.HEAP8)
                        details.memorycpp = int(Module.HEAP8.byteLength * 0.000000954);
                    for (var _d = 0, _e = CrashReport.params; _d < _e.length; _d++) {
                        p = _e[_d];
                        if (p.name == 'device')
                            continue;
                        if (p.name in details)
                            continue;
                        details[p.name] = p.value;
                    }
                    for (var _f = 0, tmp_1 = tmp; _f < tmp_1.length; _f++) {
                        p = tmp_1[_f];
                        if (p.name in details)
                            continue;
                        details[p.name] = p.value;
                    }
                    if (!details.log) {
                        details.log = '';
                    }
                    for (var _g = 0, files_1 = files; _g < files_1.length; _g++) {
                        var file = files_1[_g];
                        if (!file)
                            continue;
                        if (!file.name)
                            continue;
                        if (!file.content)
                            continue;
                        details.log += '\n\n';
                        details.log += '===================\n';
                        details.log += file.name.toUpperCase() + '\n';
                        details.log += '===================\n';
                        details.log += file.content;
                    }
                    CrashReport.setStatus(' (in progress)');
                    cloud.Call("crash", {
                        user: {
                            udid: userId,
                            name: userName
                        },
                        details: details
                    }, CrashReport.onComplete.bind(this), CrashReport.onError.bind(this));
                }
                else {
                    CrashReport.setStatus(' (canceled)');
                }
            }
            catch (error) {
                tools.GLog.print(error.stack);
            }
            if (limit == CrashReport.LIMIT_SINGLE) {
                CrashReport.map[subject] = CrashReport.map[subject] || 0;
                CrashReport.map[subject]++;
            }
            var messageWithSplit = '-x-x-x-Message:-x-x-x-' + splitter;
            messageWithSplit += message.split("	at ").join("	at<br>");
            var text = header + splitter + messageWithSplit;
            text += splitter + '-x-x-x-END-x-x-x-';
            tools.GLog.print("[Error " + subject + "] " + text);
            function addHeader(name, value, findDuplicates) {
                if (findDuplicates === void 0) { findDuplicates = false; }
                if (typeof value === 'undefined' || (typeof value === 'string' && !value.length)) {
                    return;
                }
                if (findDuplicates) {
                    for (var _i = 0, _a = CrashReport.params; _i < _a.length; _i++) {
                        var p = _a[_i];
                        if (p.name == name) {
                            return;
                        }
                    }
                }
                header += "<b>" + name + ":</b> " + value + splitter;
            }
        };
        CrashReport.setParam = function (value, temp) {
            if (temp === void 0) { temp = true; }
            if (!value) {
                return;
            }
            var target = temp ? CrashReport.tempParams : CrashReport.params;
            if (value.replace) {
                for (var i = 0; i < target.length; ++i) {
                    if (target[i].name == value.name) {
                        target.splice(i, 1);
                        i--;
                    }
                }
            }
            target.push(value);
        };
        CrashReport.deleteParam = function (name, temp) {
            if (temp === void 0) { temp = true; }
            if (!name) {
                return;
            }
            var target = temp ? CrashReport.tempParams : CrashReport.params;
            for (var i = 0; i < target.length; ++i) {
                if (target[i].name == name) {
                    target.splice(i, 1);
                    i--;
                }
            }
        };
        CrashReport.onComplete = function (event) {
            if (event === void 0) { event = null; }
            CrashReport.setStatus(' (ok)');
        };
        CrashReport.onError = function (event) {
            if (event === void 0) { event = null; }
            CrashReport.setStatus(' (error)');
        };
        CrashReport.setStatus = function (value) {
            CrashReport.status = value;
            var fn = tools.ASViewer.instance.updateContextMenu;
            if (!fn.length)
                fn.bind(tools.ASViewer.instance)();
            else
                fn.bind(tools.ASViewer.instance)(CrashReport.status);
        };
        CrashReport.VERSION = 0;
        CrashReport.LIMIT_SINGLE = 1;
        CrashReport.LIMIT_MULTIPLE = 2147483647;
        CrashReport.status = '';
        CrashReport.map = {};
        CrashReport.params = [];
        CrashReport.tempParams = [];
        CrashReport.cppSatckData = 0;
        return CrashReport;
    }());
    tools.CrashReport = CrashReport;
})(tools || (tools = {}));
var global;
(function (global) {
    global.DisplayObject = flash.display.DisplayObject;
    global.Loader = flash.display.Loader;
    global.MovieClip = flash.display.MovieClip;
    global.StageAlign = flash.display.StageAlign;
    global.StageScaleMode = flash.display.StageScaleMode;
    global.Event = flash.events.Event;
    global.IOErrorEvent = flash.events.IOErrorEvent;
    global.ProgressEvent = flash.events.ProgressEvent;
    global.Rectangle = flash.geom.Rectangle;
    global.URLRequest = flash.net.URLRequest;
    global.Security = flash.system.Security;
    global.getDefinitionByName = flash.utils.getDefinitionByName;
    var FactoryClass = (function (_super) {
        __extends(FactoryClass, _super);
        function FactoryClass() {
            var _this = _super.call(this) || this;
            _this.mLoadRatio = FactoryClass.DEFAULT_RATIO;
            _this.mProgressWidth = 0;
            _this.mProgressHeight = 0;
            _this.mProgressRect2Width = 0;
            _this.mState = FactoryClass.STATE_INIT;
            _this.mReady2Complete = false;
            _this.mComplete = false;
            FactoryClass.instance = _this;
            if (_this.stage)
                _this.init();
            else
                _this.addEventListener(global.Event.ADDED_TO_STAGE, _this.init.bind(_this));
            return _this;
        }
        Object.defineProperty(FactoryClass, "percent", {
            set: function (value) {
                FactoryClass.sTargetInitPercent = value;
                if (FactoryClass.instance) {
                    if (FactoryClass.sTargetInitPercent >= 1) {
                        FactoryClass.sReady2Complete = true;
                        FactoryClass.instance.updateView();
                        if (!FactoryClass.instance.mProgress) {
                            FactoryClass.instance.mProgressRect = new global.Rectangle(0, 0, 0, this.mProgressHeight);
                            FactoryClass.instance.mProgress = new global.DisplayObject();
                        }
                        FactoryClass.instance.mProgressRect.width = FactoryClass.instance.mProgressRect2Width;
                        FactoryClass.instance.mProgress.scrollRect = FactoryClass.instance.mProgressRect;
                        return;
                    }
                    else if (FactoryClass.instance.state == FactoryClass.STATE_COMPLETE) {
                        FactoryClass.instance.state = FactoryClass.STATE_INIT_TARGET;
                    }
                    FactoryClass.instance.updateView();
                }
            },
            enumerable: true,
            configurable: true
        });
        FactoryClass.prototype.init = function (event) {
            if (event === void 0) { event = null; }
            this.mBgLoadPercent = this.mProgressLoadPercent = FactoryClass.sTargetInitPercent = 0;
            var params = this.stage.loaderInfo.parameters;
            var preloader = params.hasOwnProperty("preloader") ? JSON.parse(params.preloader) : null;
            if (!preloader) {
                preloader = {
                    color: "000000",
                    ratio: 0.5,
                    bg: {
                        url: "bg.jpg",
                        scaleMode: "showAll"
                    },
                    progress: {
                        url: "progress.png",
                        x: 225,
                        y: 723
                    }
                };
            }
            if (preloader.hasOwnProperty("ratio"))
                this.mLoadRatio = preloader.ratio;
            if (preloader.hasOwnProperty("bg"))
                this.mBgInfo = preloader.bg;
            if (preloader.hasOwnProperty("progress"))
                this.mProgressInfo = preloader.progress;
            if (!this.mBgInfo)
                this.mBgInfo = {};
            if (!this.mProgressInfo)
                this.mProgressInfo = {};
            this.state = this.mBgInfo.url ? FactoryClass.STATE_BG : (this.mProgressInfo.url ? FactoryClass.STATE_PROGRESS : FactoryClass.STATE_INIT_TARGET);
        };
        FactoryClass.prototype.fatalError = function (message) {
            throw new global.Error(message);
        };
        FactoryClass.prototype.onProgress = function (event) {
            if (event === void 0) { event = null; }
            switch (this.state) {
                case FactoryClass.STATE_BG:
                    this.mBgLoadPercent = this.currentPercent;
                    break;
                case FactoryClass.STATE_PROGRESS:
                    this.mProgressLoadPercent = this.currentPercent;
                    break;
            }
        };
        FactoryClass.prototype.onComplete = function (event) {
            if (event === void 0) { event = null; }
            switch (this.state) {
                case FactoryClass.STATE_BG:
                    this.mBg = this.mLoader.content;
                    this.state = this.mProgressInfo.url ? FactoryClass.STATE_PROGRESS : FactoryClass.STATE_INIT_TARGET;
                    break;
                case FactoryClass.STATE_PROGRESS:
                    this.mProgress = this.mLoader.content;
                    this.mProgressWidth = this.mProgress.width;
                    this.mProgressHeight = this.mProgress.height;
                    this.state = FactoryClass.STATE_INIT_TARGET;
                    break;
            }
        };
        FactoryClass.prototype.onError = function (event) {
            switch (this.state) {
                case FactoryClass.STATE_BG:
                    this.state = FactoryClass.STATE_PROGRESS;
                    break;
                case FactoryClass.STATE_PROGRESS:
                    this.state = FactoryClass.STATE_INIT_TARGET;
                    break;
            }
        };
        Object.defineProperty(FactoryClass.prototype, "state", {
            get: function () {
                return this.mState;
            },
            set: function (value) {
                if (this.mState == value) {
                    return;
                }
                this.mState = value;
                switch (this.state) {
                    case FactoryClass.STATE_FATAL_ERROR:
                        this.fatalError("Cant load anything");
                        break;
                    case FactoryClass.STATE_BG:
                        this.load(this.mBgInfo.url);
                        break;
                    case FactoryClass.STATE_PROGRESS:
                        this.load(this.mProgressInfo.url);
                        break;
                    case FactoryClass.STATE_INIT_TARGET:
                        if (this.mBg) {
                            if ("smoothing" in this.mBg)
                                this.mBg["smoothing"] = true;
                            this.addChild(this.mBg);
                        }
                        if (this.mProgress) {
                            if ("smoothing" in this.mProgress)
                                this.mProgress["smoothing"] = true;
                            this.mProgressRect = new global.Rectangle(0, 0, 0, this.mProgressHeight);
                            this.addChild(this.mProgress);
                        }
                        this.stage.addEventListener(global.Event.RESIZE, this.onResize.bind(this));
                        this.stage.addEventListener(global.Event.ENTER_FRAME, this.onEnterFrame.bind(this));
                        this.onResize();
                        this.updateView();
                        break;
                    case FactoryClass.STATE_COMPLETE:
                        FactoryClass.sReady2Complete = false;
                        if (this.mBg)
                            this.removeChild(this.mBg);
                        if (this.mProgress)
                            this.removeChild(this.mProgress);
                        if (this.mProgress)
                            this.mProgress.scrollRect = null;
                        this.stage.removeEventListener(global.Event.RESIZE, this.onResize.bind(this));
                        this.stage.removeEventListener(global.Event.ENTER_FRAME, this.onEnterFrame.bind(this));
                        this.parent.removeChild(this);
                        this.mComplete = true;
                        if (FactoryClass.sFirstReady2Complete) {
                            FactoryClass.sFirstReady2Complete = false;
                            global.PartnerConsole.loadComplete();
                        }
                        break;
                }
            },
            enumerable: true,
            configurable: true
        });
        FactoryClass.prototype.updateView = function () {
            if (this.mProgress) {
                var p = FactoryClass.sTargetInitPercent;
                this.mProgressRect2Width = this.mProgressWidth * p;
                if (!this.mProgress.scrollRect) {
                    this.mProgress.scrollRect = this.mProgressRect;
                }
            }
        };
        Object.defineProperty(FactoryClass.prototype, "currentPercent", {
            get: function () {
                var p = 0;
                if (this.mLoader && this.mLoader.contentLoaderInfo.bytesTotal > 0) {
                    p = this.mLoader.contentLoaderInfo.bytesLoaded / this.mLoader.contentLoaderInfo.bytesTotal;
                }
                return p;
            },
            enumerable: true,
            configurable: true
        });
        FactoryClass.prototype.load = function (url) {
            this.mURL = url;
            this.mLoader = new global.Loader;
            this.mLoader.contentLoaderInfo.addEventListener(global.ProgressEvent.PROGRESS, this.onProgress.bind(this));
            this.mLoader.contentLoaderInfo.addEventListener(global.Event.COMPLETE, this.onComplete.bind(this));
            this.mLoader.contentLoaderInfo.addEventListener(global.IOErrorEvent.IO_ERROR, this.onError.bind(this));
            var varName = this.mURL;
            varName = varName.replace(/\\/g, '/');
            varName = varName.replace(/[.]/g, '_');
            varName = varName.replace(/\//g, '__');
            if (FactoryClass[varName]) {
                this.mLoader.loadBytes(new FactoryClass[varName]);
                this.onProgress();
                return;
            }
            this.mLoader.load(new global.URLRequest(this.mURL));
        };
        FactoryClass.prototype.onResize = function (event) {
            if (event === void 0) { event = null; }
            if (this.mBg) {
                switch (this.mBgInfo.scaleMode) {
                    case global.StageScaleMode.EXACT_FIT:
                        this.mBg.x = this.mBg.y = 0;
                        this.mBg.width = this.stage.stageWidth;
                        this.mBg.height = this.stage.stageHeight;
                        break;
                    case global.StageScaleMode.NO_BORDER:
                        if (this.mBg.width / this.mBg.height < this.stage.stageWidth / this.stage.stageHeight) {
                            this.mBg.width = this.stage.stageWidth;
                            this.mBg.scaleY = this.mBg.scaleX;
                        }
                        else {
                            this.mBg.height = this.stage.stageHeight;
                            this.mBg.scaleX = this.mBg.scaleY;
                        }
                        var halign = this.mBgInfo.halign;
                        var valign = this.mBgInfo.valign;
                        var wd = this.stage.stageWidth - this.mBg.width;
                        var hd = this.stage.stageHeight - this.mBg.height;
                        this.mBg.x = 0;
                        if (halign == "right")
                            this.mBg.x = wd;
                        else
                            this.mBg.x = wd / 2;
                        this.mBg.y = 0;
                        if (valign == "bottom")
                            this.mBg.y = hd;
                        else
                            this.mBg.y = hd / 2;
                        break;
                    case global.StageScaleMode.NO_SCALE:
                        this.mBg.x = this.mBg.y = 0;
                        break;
                    case global.StageScaleMode.SHOW_ALL:
                        if (this.mBg.width / this.mBg.height > this.stage.stageWidth / this.stage.stageHeight) {
                            this.mBg.width = this.stage.stageWidth;
                            this.mBg.scaleY = this.mBg.scaleX;
                        }
                        else {
                            this.mBg.height = this.stage.stageHeight;
                            this.mBg.scaleX = this.mBg.scaleY;
                        }
                        this.mBg.x = (this.stage.stageWidth - this.mBg.width) / 2;
                        this.mBg.y = (this.stage.stageHeight - this.mBg.height) / 2;
                        break;
                }
            }
            if (this.mProgress) {
                this.mProgress.scaleX = this.mProgress.scaleY = this.mBg.scaleX;
                this.mProgress.x = this.mBg.x + this.mProgressInfo.x * this.mBg.scaleX;
                this.mProgress.y = this.mBg.y + this.mProgressInfo.y * this.mBg.scaleX;
            }
        };
        FactoryClass.prototype.onEnterFrame = function (event) {
            if (!this.mProgress) {
                return;
            }
            if (!this.mProgress.scrollRect) {
                return;
            }
            if (this.mProgress.scrollRect.width < this.mProgressRect2Width && this.mProgressWidth - this.mProgressRect.width >= 5) {
                this.mProgressRect.width = Math.round(this.mProgressRect.width + ((this.mProgressRect2Width - this.mProgressRect.width) / 10));
            }
            else {
                this.mProgressRect.width = this.mProgressRect2Width;
            }
            this.mProgress.scrollRect = this.mProgressRect;
            if (FactoryClass.sReady2Complete && this.mProgress.scrollRect.width == this.mProgressRect2Width) {
                FactoryClass.instance.state = FactoryClass.STATE_COMPLETE;
            }
        };
        FactoryClass.STATE_FATAL_ERROR = -1;
        FactoryClass.STATE_INIT = 0;
        FactoryClass.STATE_BG = 1;
        FactoryClass.STATE_PROGRESS = 2;
        FactoryClass.STATE_INIT_TARGET = 3;
        FactoryClass.STATE_COMPLETE = 4;
        FactoryClass.DEFAULT_RATIO = 0.5;
        FactoryClass.RELOAD_INTERVAL = 3000;
        FactoryClass.sReady2Complete = false;
        FactoryClass.sFirstReady2Complete = false;
        return FactoryClass;
    }(global.MovieClip));
    global.FactoryClass = FactoryClass;
})(global || (global = {}));
var datas;
(function (datas) {
    datas.Error = global.Error;
    datas.ASViewer = global.ASViewer;
    datas.CONFIG = global.CONFIG;
    datas.EventStats = global.EventStats;
    datas.Bitmap = flash.display.Bitmap;
    datas.BitmapData = flash.display.BitmapData;
    datas.ErrorEvent = flash.events.ErrorEvent;
    datas.Event = flash.events.Event;
    datas.IOErrorEvent = flash.events.IOErrorEvent;
    datas.ProgressEvent = flash.events.ProgressEvent;
    datas.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    datas.Point = flash.geom.Point;
    datas.Rectangle = flash.geom.Rectangle;
    datas.URLRequest = flash.net.URLRequest;
    datas.ImageDecodingPolicy = flash.system.ImageDecodingPolicy;
    datas.LoaderContext = flash.system.LoaderContext;
    datas.ByteArray = flash.utils.ByteArray;
    datas.Endian = flash.utils.Endian;
    datas.clearTimeout = flash.utils.clearTimeout;
    datas.setTimeout = flash.utils.setTimeout;
    datas.CursorManager = tools.CursorManager;
    datas.CustomLoader = tools.CustomLoader;
    datas.QueueItem = tools.QueueItem;
    datas.Tests = tools.Tests;
    datas.getNextPowerOfTwo = tools.getNextPowerOfTwo;
    var DataImage = (function (_super) {
        __extends(DataImage, _super);
        function DataImage(type, pack, fid, url, md5, packMask, fidMask, urlMask, md5Mask, dynamic) {
            if (dynamic === void 0) { dynamic = false; }
            var _this = this;
            _this.type = 0;
            _this.dataPtr = 0;
            _this.dataSize = 0;
            _this.width = 0;
            _this.height = 0;
            _this.origWidth = 0;
            _this.origHeight = 0;
            _this.unused = false;
            _this.mRecovering = false;
            _this.mCheckMemoryTimeout = 0;
            var fname = 'imgs' + (pack == 0 ? '/' : pack + '/') + url;
            if (dynamic) {
                url = datas.CONFIG.getStorage() + fname;
            }
            _this = _super.call(this, pack, fid, -1, url, dynamic, md5) || this;
            _this.type = type;
            _this.fileName = fname;
            return _this;
        }
        DataImage.waitForGetBitmap = function (value) {
            if (DataImage.sWaitForGetBitmap == value) {
                return;
            }
            DataImage.sWaitForGetBitmap = value;
            DataImage.checkQueue();
        };
        DataImage.loaderFreeIndex = function (target) {
            var MAX_DYNAMIC_NUM = 16;
            var len = DataImage.sLoader.length;
            for (var i = 0; i < len; ++i) {
                var cl = DataImage.sLoader[i];
                if (!target.dynamic && i == 0) {
                    if (cl && cl.client)
                        return -1;
                    if (DataImage.sWaitForGetBitmap == target)
                        return i;
                    return -1;
                }
                if (!cl)
                    return i;
                if (cl.client)
                    continue;
                return i;
            }
            if (len >= MAX_DYNAMIC_NUM)
                return -1;
            return len;
        };
        DataImage.loaderIndexByTarget = function (target) {
            var len = DataImage.sLoader.length;
            for (var i = 0; i < len; ++i) {
                var cl = DataImage.sLoader[i];
                if (!cl)
                    continue;
                if (cl.client == target)
                    return i;
            }
            return -1;
        };
        DataImage.checkQueue = function () {
            if (!DataImage.queue.length) {
                return;
            }
            if (!DataImage.queue[0].condition()) {
                return;
            }
            DataImage.queue.shift().handler();
        };
        DataImage.getBuffer = function (size) {
            var INIT_SIZE = 2048 * 2048 * 4;
            if (!DataImage.bufferPtr) {
                DataImage.bufferPtr = Module._malloc(INIT_SIZE);
                DataImage.bufferSize = INIT_SIZE;
            }
            if (size > DataImage.bufferSize) {
                Module._free(DataImage.bufferPtr);
                DataImage.bufferPtr = Module._malloc(size);
                DataImage.bufferSize = size;
            }
            return DataImage.bufferPtr;
        };
        Object.defineProperty(DataImage, "loaderInfo", {
            get: function () {
                return DataImage.sLoader;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(DataImage, "queueLength", {
            get: function () {
                return DataImage.queue.length;
            },
            enumerable: true,
            configurable: true
        });
        DataImage.setBuffer = function (value, target) {
            if (!value || DataImage.sBuferWaitForUsePtr)
                return 0;
            var dataSize = value.length;
            if (!dataSize)
                return 0;
            var dataPtr = DataImage.getBuffer(dataSize);
            value.endian = datas.Endian.BIG_ENDIAN;
            value.position = 0;
            datas.ASViewer.writeBytes(dataPtr, dataSize, value);
            DataImage.sBuferWaitForUsePtr = target;
            return dataPtr;
        };
        DataImage.freeBuffer = function (target) {
            if (DataImage.sBuferWaitForUsePtr && DataImage.sBuferWaitForUsePtr != target) {
                throw new datas.Error("Can't freeBuffer, wait=" + DataImage.sBuferWaitForUsePtr + ", target=" + target, 1506);
            }
            DataImage.sBuferWaitForUsePtr = null;
        };
        Object.defineProperty(DataImage.prototype, "recovering", {
            get: function () {
                return this.mRecovering;
            },
            set: function (value) {
                var prev = this.mRecovering;
                this.mRecovering = value;
                if (prev && !this.mRecovering) {
                    if (DataImage.changeRecovering != null) {
                        DataImage.changeRecovering(this);
                    }
                }
            },
            enumerable: true,
            configurable: true
        });
        DataImage.prototype.addChild = function (fid) {
            this.children = this.children || new Array;
            this.children[this.children.length] = new datas.DataBytes(this.pack, fid, this.dynamic, this.md5);
            this.children[this.children.length - 1].startLoad();
        };
        Object.defineProperty(DataImage.prototype, "isChildrenReady", {
            get: function () {
                if (!this.children)
                    return true;
                for (var _i = 0, _a = this.children; _i < _a.length; _i++) {
                    var db = _a[_i];
                    if (db.status != datas.DataAbstract.STATUS_COMPLETE) {
                        return false;
                    }
                }
                return true;
            },
            enumerable: true,
            configurable: true
        });
        DataImage.prototype.getChildStatus = function (fid) {
            if (!this.children) {
                return datas.DataAbstract.STATUS_INIT;
            }
            for (var _i = 0, _a = this.children; _i < _a.length; _i++) {
                var db = _a[_i];
                if (db.fid == fid) {
                    return db.status;
                }
            }
            return datas.DataAbstract.STATUS_INIT;
        };
        DataImage.prototype.getChildPack = function (fid) {
            if (!this.children) {
                return -1;
            }
            for (var _i = 0, _a = this.children; _i < _a.length; _i++) {
                var db = _a[_i];
                if (db.fid == fid) {
                    return db.pack;
                }
            }
            return -1;
        };
        DataImage.prototype.getChild = function (fid) {
            if (!this.children) {
                return null;
            }
            for (var _i = 0, _a = this.children; _i < _a.length; _i++) {
                var db = _a[_i];
                if (db.fid == fid) {
                    return db.bytes;
                }
            }
            return null;
        };
        DataImage.prototype.startLoad = function () {
            this.status = datas.DataAbstract.STATUS_LOADING;
            DataImage.sLoader = DataImage.sLoader || [new datas.CustomLoader];
            DataImage.IMAGE_LAST_LOAD_FID = this.fid;
            DataImage.IMAGE_LAST_LOAD_PACK = this.pack;
            DataImage.IMAGE_LAST_LOAD_FID_SIZE.setTo(this.width, this.height);
            DataImage.IMAGE_LAST_UNCOMPRESSED_BYTES = 0;
            switch (this.type) {
                case DataImage.TEXTURE_TYPE_PNG:
                case DataImage.TEXTURE_TYPE_JPEG:
                case DataImage.TEXTURE_TYPE_JPEGXR:
                case DataImage.TEXTURE_TYPE_WEBP:
                    if (this.dynamic)
                        this.onGetAsset(null);
                    else
                        datas.AssetsData.getAsset(this.pack, this.fid, onGetAssetInternal.bind(this));
                    break;
                case DataImage.TEXTURE_TYPE_COMPRESSED_BYTES:
                    this.onGetAsset(this.bytes);
                    break;
                case DataImage.TEXTURE_TYPE_PVR_BGRA_8888:
                    var w = this.origWidth ? this.origWidth : this.width;
                    var h = this.origHeight ? this.origHeight : this.height;
                    DataImage.IMAGE_LAST_UNCOMPRESSED_BYTES = this.bytes.length;
                    this.bytes.position = 0;
                    var bd = new datas.BitmapData(w, h);
                    bd.setPixels(new datas.Rectangle(0, 0, w, h), this.bytes);
                    this.decompessComplete(bd);
                    break;
                default:
                    throw new datas.Error('startLoad: Unsupported format ' + this.type);
            }
            function onGetAssetInternal() {
                if (datas.AssetsData.asset.length) {
                    this.onGetAsset(datas.AssetsData.asset);
                }
                else {
                    throw new datas.Error("[" + this.type + "] ArgumentError: AssetsData.asset.length == 0", 2100);
                }
            }
        };
        DataImage.prototype.readyToDestroy = function () {
            this.status = datas.DataAbstract.STATUS_READY_TO_DESTROY;
        };
        DataImage.prototype.startDestroy = function () {
            this.dataPtr = this.dataSize = 0;
            this.status = datas.DataAbstract.STATUS_INIT;
            if (this.result) {
                this.result.dispose();
                this.result = null;
            }
            if (DataImage.sBuferWaitForUsePtr == this) {
                DataImage.freeBuffer(this);
            }
            this.freeLoaderAndCheckQueue();
            var len = DataImage.queue.length;
            for (var i = 0; i < len; ++i) {
                var qi = DataImage.queue[i];
                if (qi && qi.target == this) {
                    DataImage.queue.splice(i, 1);
                    break;
                }
            }
            datas.clearTimeout(this.mCheckMemoryTimeout);
        };
        Object.defineProperty(DataImage.prototype, "status", {
            get: function () {
                return this.mStatus;
            },
            set: function (value) {
                this.mStatus = value;
                datas.ASViewer.instance.DataImage_changeStatus(this);
            },
            enumerable: true,
            configurable: true
        });
        DataImage.prototype.onGetAsset = function (ba) {
            if (this.status != datas.DataAbstract.STATUS_LOADING) {
                return;
            }
            var ins = this;
            var context = new datas.LoaderContext;
            context.imageDecodingPolicy = datas.ImageDecodingPolicy.ON_LOAD;
            switch (this.type) {
                case DataImage.TEXTURE_TYPE_JPEGXR:
                case DataImage.TEXTURE_TYPE_WEBP:
                    if (!this.dynamic) {
                        this.onComplete(datas.DataAbstract.sEventComplete);
                        break;
                    }
                case DataImage.TEXTURE_TYPE_PNG:
                case DataImage.TEXTURE_TYPE_JPEG:
                case DataImage.TEXTURE_TYPE_COMPRESSED_BYTES:
                    if (condition.bind(this)())
                        load.bind(this)();
                    else
                        DataImage.queue.push(new datas.QueueItem(this, condition.bind(this), load.bind(this)));
                    break;
                default:
                    throw new datas.Error('onGetAsset: Unsupported format ' + this.type);
            }
            function condition() {
                return DataImage.loaderFreeIndex(ins) >= 0;
            }
            function load() {
                var index = DataImage.loaderFreeIndex(ins);
                var cl;
                if (index < DataImage.sLoader.length)
                    cl = DataImage.sLoader[index];
                if (!cl)
                    DataImage.sLoader[index] = cl = new datas.CustomLoader;
                cl.client = ins;
                cl.contentRemoveEventListeners();
                cl.contentAddEventListener(datas.Event.COMPLETE, complete.bind(this));
                cl.contentAddEventListener(datas.IOErrorEvent.IO_ERROR, this.onError.bind(this));
                cl.contentAddEventListener(datas.SecurityErrorEvent.SECURITY_ERROR, this.onError.bind(this));
                cl.contentAddEventListener(datas.ProgressEvent.PROGRESS, this.onProgress.bind(this));
                if (this.dynamic) {
                    if (this.type == DataImage.TEXTURE_TYPE_JPEGXR || this.type == DataImage.TEXTURE_TYPE_WEBP) {
                        cl.loadRAW(new datas.URLRequest(this.url));
                        return;
                    }
                    cl.load(new datas.URLRequest(this.url), context);
                }
                else {
                    cl.loadBytes(ba, context);
                }
                datas.Tests.start(datas.Tests.DECODE);
            }
            function complete(event) {
                var index = DataImage.loaderIndexByTarget(ins);
                var cl = DataImage.sLoader[index];
                if (cl.raw) {
                    datas.ASViewer.writeFile(this.fileName, new Uint8Array(cl.raw.buffer), { encoding: 'binary' }, true);
                    this.freeLoaderAndCheckQueue(true);
                    this.onComplete(datas.DataAbstract.sEventComplete);
                    return;
                }
                var bitmapData = cl.content.bitmapData;
                datas.Tests.finish(datas.Tests.DECODE, "size", bitmapData.width + 'x' + bitmapData.height);
                datas.EventStats.handle(DataImage, event);
                this.decompessComplete(bitmapData);
            }
        };
        DataImage.prototype.decompessComplete = function (bd) {
            var ins = this;
            if (this.result)
                this.result.dispose();
            this.result = bd;
            this.width = this.result.width;
            this.height = this.result.height;
            var actualWidth = datas.getNextPowerOfTwo(this.width);
            var actualHeight = datas.getNextPowerOfTwo(this.height);
            if (actualWidth != this.width || actualHeight != this.height) {
                this.origWidth = this.width;
                this.origHeight = this.height;
                this.width = actualWidth;
                this.height = actualHeight;
                var temp = new datas.BitmapData(this.width, this.height, true, 0);
                temp.copyPixels(this.result, this.result.rect, DataImage.sOrigin);
                this.result.dispose();
                this.result = temp;
            }
            this.freeLoaderAndCheckQueue(true);
            checkMemory.bind(this)();
            function checkMemory() {
                if (ins.status != datas.DataAbstract.STATUS_LOADING)
                    return;
                if (!DataImage.sBuferWaitForUsePtr && DataImage.sWaitForGetBitmap == ins) {
                    memoryReady.bind(this)();
                }
                else {
                    datas.clearTimeout(this.mCheckMemoryTimeout);
                    this.mCheckMemoryTimeout = datas.setTimeout(checkMemory.bind(this), 1);
                }
            }
            function memoryReady() {
                if (ins.status != datas.DataAbstract.STATUS_LOADING) {
                    return;
                }
                this.dataSize = this.result.width * this.result.height * 4;
                this.dataPtr = DataImage.getBuffer(this.dataSize);
                DataImage.sBuferWaitForUsePtr = ins;
                DataImage.sWaitForGetBitmap = null;
                DataImage.BYTES_LAST = this.dataSize;
                if (DataImage.BYTES_LAST > DataImage.BYTES_MAX)
                    DataImage.BYTES_MAX = DataImage.BYTES_LAST;
                var ba = this.result.getPixels(this.result.rect);
                this.result.dispose();
                this.result = bd = null;
                ba.endian = datas.Endian.BIG_ENDIAN;
                ba.position = 0;
                datas.ASViewer.writeBytes(this.dataPtr, this.dataSize, ba);
                ba.clear();
                this.onComplete(datas.DataAbstract.sEventComplete);
            }
        };
        DataImage.prototype.onError = function (event) {
            _super.prototype.onError.call(this, event);
            this.freeLoaderAndCheckQueue();
        };
        DataImage.prototype.freeLoaderAndCheckQueue = function (throwThenError) {
            if (throwThenError === void 0) { throwThenError = false; }
            if (this.type == DataImage.TEXTURE_TYPE_PNG || this.type == DataImage.TEXTURE_TYPE_JPEG || this.type == DataImage.TEXTURE_TYPE_JPEGXR || this.type == DataImage.TEXTURE_TYPE_JPEG_PNG || this.type == DataImage.TEXTURE_TYPE_COMPRESSED_BYTES || this.type == DataImage.TEXTURE_TYPE_WEBP) {
                var index = DataImage.loaderIndexByTarget(this);
                if (index >= 0) {
                    var cl = DataImage.sLoader[index];
                    cl.unloadAndStop(true);
                    cl.contentRemoveEventListeners();
                    if (cl.content && cl.content instanceof datas.BitmapData) {
                        cl.content.dispose();
                    }
                    DataImage.sLoader[index] = null;
                }
                else if (throwThenError) {
                    throw new datas.Error("[DataImage] sLoader=" + DataImage.sLoader + ", client == this (" + cl.client == this + ")");
                }
            }
            DataImage.checkQueue();
        };
        DataImage.prototype.toString = function () {
            return "[DataImage pack=" + this.pack + " fid=" + this.fid + " status=" + this.status + "]";
        };
        DataImage.TEXTURE_TYPE_COMPRESSED_BYTES = -1;
        DataImage.TEXTURE_TYPE_NOT_SUPPORTED = 0;
        DataImage.TEXTURE_TYPE_PNG = 1;
        DataImage.TEXTURE_TYPE_JPEG = 2;
        DataImage.TEXTURE_TYPE_JPEG_PNG = 3;
        DataImage.TEXTURE_TYPE_PVRTC = 4;
        DataImage.TEXTURE_TYPE_BC3 = 5;
        DataImage.TEXTURE_TYPE_ETC1 = 6;
        DataImage.TEXTURE_TYPE_ETC1_PNG = 7;
        DataImage.TEXTURE_TYPE_PVRTC_PNG = 8;
        DataImage.TEXTURE_TYPE_PVRTC_PVRA8 = 9;
        DataImage.TEXTURE_TYPE_ETC1_PVRA8 = 10;
        DataImage.TEXTURE_TYPE_PVR_RGBA_8888 = 11;
        DataImage.TEXTURE_TYPE_BPG = 12;
        DataImage.TEXTURE_TYPE_GIF = 13;
        DataImage.TEXTURE_TYPE_JPEGXR = 14;
        DataImage.TEXTURE_TYPE_PVR_BGRA_8888 = 15;
        DataImage.TEXTURE_TYPE_PVRTC_JXRA8 = 16;
        DataImage.TEXTURE_TYPE_ETC1_JXRA8 = 17;
        DataImage.TEXTURE_TYPE_PVR_ARGB_8888 = 18;
        DataImage.TEXTURE_TYPE_WEBP = 19;
        DataImage.TEXTURE_TYPE_ETC1_WEBPA8 = 20;
        DataImage.TEXTURE_TYPE_PVRTC_WEBPA8 = 21;
        DataImage.BYTES_LAST = 0;
        DataImage.BYTES_MAX = 0;
        DataImage.IMAGE_LAST_UNCOMPRESSED_BYTES = 0;
        DataImage.IMAGE_LAST_LOAD_FID = 0;
        DataImage.IMAGE_LAST_LOAD_PACK = 0;
        DataImage.IMAGE_LAST_LOAD_FID_SIZE = new datas.Point;
        DataImage.IMAGE_LAST_GET_FID = -1;
        DataImage.IMAGE_LAST_GET_PACK = -1;
        DataImage.IMAGE_LAST_GET_STATUS = datas.DataAbstract.STATUS_INIT;
        DataImage.CHILD_LAST_GET_FID = -1;
        DataImage.CHILD_LAST_GET_PACK = -1;
        DataImage.CHILD_LAST_GET_STATUS = datas.DataAbstract.STATUS_INIT;
        DataImage.sOrigin = new datas.Point;
        DataImage.queue = [];
        DataImage.bufferPtr = 0;
        DataImage.bufferSize = 0;
        return DataImage;
    }(datas.DataAbstract));
    datas.DataImage = DataImage;
})(datas || (datas = {}));
var flash;
(function (flash) {
    var display;
    (function (display) {
        display.Error = global.Error;
        display.BaseRenderer = flash.__native.BaseRenderer;
        display.GLCanvasRenderingContext2D = flash.__native.GLCanvasRenderingContext2D;
        display.IRenderer = flash.__native.IRenderer;
        display.WebGLRenderer = flash.__native.WebGLRenderer;
        display.Context3D = flash.display3D.Context3D;
        display.Event = flash.events.Event;
        display.FullScreenEvent = flash.events.FullScreenEvent;
        display.KeyboardEvent = flash.events.KeyboardEvent;
        display.MouseEvent = flash.events.MouseEvent;
        display.TouchEvent = flash.events.TouchEvent;
        display.UncaughtErrorEvent = flash.events.UncaughtErrorEvent;
        display.ExternalInterface = flash.external.ExternalInterface;
        display.Rectangle = flash.geom.Rectangle;
        display.Sound = flash.media.Sound;
        display.URLStream = flash.net.URLStream;
        display.URLVariables = flash.net.URLVariables;
        display.Capabilities = flash.system.Capabilities;
        display.Keyboard = flash.ui.Keyboard;
        display.getTimer = flash.utils.getTimer;
        display.setTimeout = flash.utils.setTimeout;
        display.Dictionary = flash.utils.Dictionary;
        display.StageOrientationEvent = flash.events.StageOrientationEvent;
        display.MouseCursor = flash.ui.MouseCursor;
        display.Mouse = flash.ui.Mouse;
        var Stage = (function (_super) {
            __extends(Stage, _super);
            function Stage(mainClass, width, height, flashvars, params, attributes) {
                if (width === void 0) { width = 0; }
                if (height === void 0) { height = 0; }
                if (flashvars === void 0) { flashvars = null; }
                if (params === void 0) { params = null; }
                if (attributes === void 0) { attributes = null; }
                var _this = _super.call(this) || this;
                _this.dirty = false;
                _this._frameRate = 0;
                _this.mMouseX = 0;
                _this.mMouseY = 0;
                _this.mCanvasMouseIsEnter = false;
                _this.mCanvasMouseIsDown = false;
                _this.mStageWidth = 0;
                _this.mStageHeight = 0;
                _this.mLastStageWidth = 0;
                _this.mLastStageHeight = 0;
                _this.mColor = 0;
                _this.mLastMouseWheelTime = 0;
                if (mainClass == null) {
                    throw new display.Error('Please specify the main class');
                }
                params = params || {};
                var wmode = params.wmode = params.wmode || 'direct';
                attributes = attributes || {};
                attributes.id = attributes.id || 'playerglobal';
                _this.mBody = document.createElement("div");
                _this.mBody.id = 'stage' + Stage.sStageID++;
                _this.mBodyStyle = _this.mBody.style;
                _this.mBodyStyle.position = 'absolute';
                _this.mBodyStyle.left = _this.mBodyStyle.top = '0';
                Object.defineProperty(_this.mBody, 'style', {
                    value: {
                        position: 'absolute',
                        top: '0',
                        left: '0'
                    }
                });
                var head = document.getElementsByTagName('head');
                if (head && head[0]) {
                    _this.mDocumentMetaViewport = _this.mDocumentMetaViewport || head[0].appendChild(document.createElement('meta'));
                    _this.mDocumentMetaViewport.setAttribute('name', 'viewport');
                    _this.mDocumentMetaViewport.setAttribute('content', 'width=device-width, height=device-height, initial-scale=1, user-scalable=no');
                }
                ["fullscreenchange", "webkitfullscreenchange", "mozfullscreenchange", "msfullscreenchange"].forEach(function (eventType) { document.addEventListener(eventType, this.onFullscreenChange.bind(this), false); }.bind(_this));
                switch (wmode.toLowerCase()) {
                    case 'direct':
                        break;
                    case 'gpu':
                    case 'gpu batch':
                        if (display.Context3D.supportsWebGL) {
                            break;
                        }
                        else {
                            wmode = 'direct';
                            break;
                        }
                    default:
                        wmode = 'direct';
                }
                _this.mLastOrientation = _this.deviceOrientation;
                _this._wmode = wmode;
                _this.mStageWidth = width > 0 ? width : 800;
                _this.mStageHeight = height > 0 ? height : 600;
                _this.mNormalRect = new display.Rectangle;
                _this._injection();
                _this._stage = _this;
                _this._setLoaderInfo(new display.LoaderInfo);
                if (typeof flashvars == 'string' && flashvars.length) {
                    _this.loaderInfo.variables = new display.URLVariables(flashvars);
                }
                var bgcolor = params.bgcolor;
                if (bgcolor) {
                    if (bgcolor.lastIndexOf('#') != -1)
                        bgcolor = bgcolor.split('#')[1];
                    if (bgcolor.lastIndexOf("0x") == -1)
                        bgcolor = "0x" + bgcolor;
                    _this.color = parseInt(bgcolor);
                }
                var base = params.base;
                if (base) {
                    display.URLStream.__base = base;
                    display.Sound.__base = base;
                    display.Loader.__base = base;
                }
                display.ExternalInterface.objectID = attributes.id;
                Stage.startTime = Date.now();
                _this.frameRate = 60;
                _this._stage3Ds = [new display.Stage3D(_this), new display.Stage3D(_this), new display.Stage3D(_this), new display.Stage3D(_this)];
                window.addEventListener("resize", _this.onWindowResize.bind(_this), false);
                setInterval(_this.onWindowVisibilityCheck.bind(_this), 200);
                window.addEventListener('blur', _this.onWindowBlur.bind(_this), false);
                window.addEventListener('focus', _this.onWindowFocus.bind(_this), false);
                _this.updateCanvas(_this.mStageWidth, _this.mStageHeight);
                display.setTimeout(_this.onAnimationFrame.bind(_this), 1);
                _this.canvas;
                _this._root = (new mainClass);
                _this._root._setLoaderInfo(new display.LoaderInfo);
                display.setTimeout(_this.addChild.bind(_this), 1, _this._root);
                return _this;
            }
            Stage.sRequestAnimationFrameDefault = function (callback) {
                display.setTimeout(callback, 1000 / 60);
            };
            Object.defineProperty(Stage.prototype, "renderer", {
                get: function () {
                    if (!this._renderer) {
                        switch (this._wmode) {
                            case 'gpu':
                            case 'gpu batch':
                                this._renderer = new display.WebGLRenderer;
                                break;
                            default:
                                this._renderer = new display.BaseRenderer;
                        }
                    }
                    return this._renderer;
                },
                set: function (value) { this._renderer = value; },
                enumerable: true,
                configurable: true
            });
            Stage.prototype.__enterFrame = function () {
                if (this.dirty) {
                    this.dirty = false;
                    var c = this.ctx;
                    c.setTransform(1, 0, 0, 1, 0, 0);
                    c.clearRect(0, 0, this.stageWidth, this.stageHeight);
                    this.renderer.start(c);
                    this.__update(c);
                    this.renderer.finish(c);
                }
                else {
                    this.__dispatchEnterFrame(true);
                }
            };
            Stage.prototype.processMouseEvent = function (e) {
                var obj = this.__doMouse(e);
                if (obj) {
                    Stage.sHelperPoint.setTo(e.localX, e.localY);
                    obj.globalToLocal(Stage.sHelperPoint, Stage.sHelperPoint);
                    e.localX = Stage.sHelperPoint.x;
                    e.localY = Stage.sHelperPoint.y;
                }
                if (e.type === display.MouseEvent.MOUSE_MOVE) {
                    var t = this.mLastMouseOverObj;
                    while (t) {
                        if (t == obj) {
                            break;
                        }
                        else {
                            t.dispatchEvent(new display.MouseEvent(display.MouseEvent.MOUSE_OUT, true, false, e.localX, e.localY, null, e.ctrlKey, e.altKey, e.shiftKey));
                            t.dispatchEvent(new display.MouseEvent(display.MouseEvent.ROLL_OUT, true, false, e.localX, e.localY, null, e.ctrlKey, e.altKey, e.shiftKey));
                        }
                        t = t.parent;
                    }
                    if (obj && obj != t) {
                        obj.dispatchEvent(new display.MouseEvent(display.MouseEvent.MOUSE_OVER, true, false, e.localX, e.localY, null, e.ctrlKey, e.altKey, e.shiftKey));
                        obj.dispatchEvent(new display.MouseEvent(display.MouseEvent.ROLL_OVER, true, false, e.localX, e.localY, null, e.ctrlKey, e.altKey, e.shiftKey));
                    }
                    this.mLastMouseOverObj = obj;
                }
                if (obj) {
                    obj.dispatchEvent(e);
                    if (e.type === display.MouseEvent.MOUSE_DOWN) {
                        this.mLastMouseDownObj = obj;
                    }
                    var isUp = e.type === display.MouseEvent.MOUSE_UP;
                    if (e.type === display.MouseEvent.MOUSE_OUT && this.mCanvasMouseIsDown) {
                        isUp = true;
                        this.mCanvasMouseIsDown = false;
                        obj.dispatchEvent(new display.MouseEvent(display.MouseEvent.MOUSE_UP, true, false, e.localX, e.localY, null, e.ctrlKey, e.altKey, e.shiftKey));
                    }
                    if (isUp) {
                        if (obj === this.mLastMouseDownObj) {
                            obj.dispatchEvent(new display.MouseEvent(display.MouseEvent.CLICK, true, false, e.localX, e.localY, null, e.ctrlKey, e.altKey, e.shiftKey));
                        }
                    }
                    if (e.type == display.MouseEvent.CONTEXT_MENU) {
                        this.dispatchEvent(new display.MouseEvent(display.MouseEvent.RIGHT_CLICK, true, false, e.localX, e.localY, null, e.ctrlKey, e.altKey, e.shiftKey));
                        this.contextMenu = this.contextMenu || new display.ContextMenu;
                        var _target = obj;
                        while (_target) {
                            if (_target['contextMenu']) {
                                _target['contextMenu'].show(e);
                                break;
                            }
                            _target = _target.parent;
                        }
                    }
                }
            };
            Object.defineProperty(Stage.prototype, "body", {
                get: function () {
                    return this.mBody;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "deviceOrientation", {
                get: function () {
                    if (window.matchMedia("(orientation: portrait)").matches) {
                        return display.StageOrientation.PORTRAIT;
                    }
                    if (window.matchMedia("(orientation: landscape)").matches) {
                        return display.StageOrientation.LANDSCAPE;
                    }
                    return display.StageOrientation.PORTRAIT;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "orientation", {
                get: function () {
                    return this.deviceOrientation;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "supportedOrientations", {
                get: function () {
                    return [display.StageOrientation.PORTRAIT, display.StageOrientation.LANDSCAPE];
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "autoOrients", {
                get: function () { return true; },
                set: function (value) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "frameRate", {
                get: function () { return this._frameRate; },
                set: function (v) { this._frameRate = v; },
                enumerable: true,
                configurable: true
            });
            Stage.prototype.setAspectRatio = function (newAspectRatio) {
            };
            Stage.prototype.setOrientation = function (newOrientation) {
            };
            Stage.prototype.setAutoSize = function (time) {
                clearInterval(this.mAutoSize);
                if (time >= 0) {
                    this.mAutoSize = setInterval(requestAutoSize.bind(this), Math.max(Math.min(time, 1000), 1000 / 60));
                }
                else {
                    this.mAutoSize = 0;
                }
                this.mNeedAutoSize = this.mAutoSize > 0;
                return this;
                function requestAutoSize() {
                    this.mNeedAutoSize = true;
                }
            };
            Stage.prototype.onAnimationFrame = function () {
                Stage.sRequestAnimationFrame.call(window, this.onAnimationFrame.bind(this));
                if (this.mStageHidden) {
                    return;
                }
                if (this.mNeedAutoSize && this.displayState === display.StageDisplayState.NORMAL) {
                    var parentElement = this.mBody.parentElement;
                    if (parentElement) {
                        this.mStageWidth = parentElement.clientWidth * display.Capabilities.pixelAspectRatio;
                        this.mStageHeight = parentElement.clientHeight * display.Capabilities.pixelAspectRatio;
                        this.mNeedAutoSize = false;
                    }
                }
                if (this.mLastStageWidth !== this.mStageWidth || this.mLastStageHeight !== this.mStageHeight) {
                    this.updateCanvas(this.mLastStageWidth = this.mStageWidth, this.mLastStageHeight = this.mStageHeight);
                    this.dispatchEvent(new display.Event(display.Event.RESIZE));
                }
                if (this.mNeedSendMouseMove) {
                    this.processMouseEvent(this.mNeedSendMouseMove);
                    this.mNeedSendMouseMove = null;
                }
                if (this.mNeedSendTouchMove) {
                    this.dispatchEvent(this.mNeedSendTouchMove);
                    this.mNeedSendTouchMove = null;
                }
                this.__enterFrame();
            };
            Object.defineProperty(Stage.prototype, "root", {
                get: function () {
                    return this._root;
                },
                enumerable: true,
                configurable: true
            });
            Stage.prototype.invalidate = function () { };
            Object.defineProperty(Stage.prototype, "scaleMode", {
                get: function () { return null; },
                set: function (param1) {
                    trace('Warning: scaleMode not implemented. Default value: StageScaleMode.NO_SCALE');
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "align", {
                get: function () { return null; },
                set: function (param1) {
                    trace('Warning: align not implemented. Default value: StageAlign.TOP_LEFT');
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "stageWidth", {
                get: function () {
                    return this.mStageWidth;
                },
                set: function (value) {
                    if (this.displayState != display.StageDisplayState.NORMAL) {
                        return;
                    }
                    this.mStageWidth = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "stageHeight", {
                get: function () {
                    return this.mStageHeight;
                },
                set: function (value) {
                    if (this.displayState != display.StageDisplayState.NORMAL) {
                        return;
                    }
                    this.mStageHeight = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "showDefaultContextMenu", {
                get: function () { return false; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "colorCorrection", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "colorCorrectionSupport", {
                get: function () { return null; },
                enumerable: true,
                configurable: true
            });
            Stage.prototype.isFocusInaccessible = function () { return false; };
            Object.defineProperty(Stage.prototype, "stageFocusRect", {
                get: function () { return false; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "quality", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "displayState", {
                get: function () {
                    return document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement ?
                        display.StageDisplayState.FULL_SCREEN :
                        display.StageDisplayState.NORMAL;
                },
                set: function (state) {
                    if (state === display.StageDisplayState.NORMAL) {
                        var cancelFunc = (document.exitFullscreen || document.webkitExitFullscreen || document.mozCancelFullScreen || document.msExitFullscreen);
                        cancelFunc.call(document);
                    }
                    else {
                        var target = this.mBody;
                        var requestFunc = (target.requestFullscreen || target.webkitRequestFullscreen || target.mozRequestFullScreen || target.msRequestFullscreen);
                        if (!requestFunc) {
                            return;
                        }
                        this.mNormalRect.setTo(this.x, this.y, this.mStageWidth, this.mStageHeight);
                        requestFunc.call(target);
                    }
                },
                enumerable: true,
                configurable: true
            });
            Stage.prototype.onFullscreenChange = function (e) {
                if (this.displayState === display.StageDisplayState.NORMAL) {
                    this.mStageWidth = this.mNormalRect.width;
                    this.mStageHeight = this.mNormalRect.height;
                }
                else {
                    this.mStageWidth = display.Capabilities.screenResolutionX;
                    this.mStageHeight = display.Capabilities.screenResolutionY;
                }
                this.dispatchEvent(new display.FullScreenEvent(display.FullScreenEvent.FULL_SCREEN, false, false, this.displayState !== display.StageDisplayState.NORMAL));
            };
            Object.defineProperty(Stage.prototype, "fullScreenSourceRect", {
                get: function () { return null; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "focus", {
                get: function () { return null; },
                set: function (value) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "mouseLock", {
                get: function () { return false; },
                set: function (param1) { },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "stage3Ds", {
                get: function () { return this._stage3Ds; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "color", {
                get: function () { return this.mColor; },
                set: function (value) {
                    this.mColor = value;
                    this.mBodyStyle.backgroundColor = '#' + this.mColor.toString(16);
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "fullScreenWidth", {
                get: function () {
                    return display.Capabilities.screenResolutionX;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "fullScreenHeight", {
                get: function () {
                    return display.Capabilities.screenResolutionY;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "wmodeGPU", {
                get: function () { return this._wmode.indexOf('gpu') >= 0; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "softKeyboardRect", {
                get: function () { return null; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "allowsFullScreen", {
                get: function () { return true; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "allowsFullScreenInteractive", {
                get: function () { return false; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "contentsScaleFactor", {
                get: function () { return 0; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "browserZoomFactor", {
                get: function () { return 0; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "x", {
                set: function (v) {
                    throw new display.Error('The Stage class does not implement this property or method.', 2071);
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "y", {
                set: function (v) {
                    throw new display.Error('The Stage class does not implement this property or method.', 2071);
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "width", {
                set: function (v) {
                    throw new display.Error('The Stage class does not implement this property or method.', 2071);
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "height", {
                set: function (v) {
                    throw new display.Error('The Stage class does not implement this property or method.', 2071);
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "scaleX", {
                set: function (v) {
                    throw new display.Error('The Stage class does not implement this property or method.', 2071);
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "scaleY", {
                set: function (v) {
                    throw new display.Error('The Stage class does not implement this property or method.', 2071);
                },
                enumerable: true,
                configurable: true
            });
            Stage.prototype.setParent = function (parentElement) {
                if (parentElement) {
                    parentElement.appendChild(this.body);
                    if (this.mAutoSize) {
                        this.mNeedAutoSize = true;
                    }
                }
                return this;
            };
            Object.defineProperty(Stage.prototype, "canvas", {
                get: function () {
                    if (!this._canvas) {
                        this._canvas = document.createElement("canvas");
                        this._canvas.style.width = this._canvas.style.height = '100%';
                        this._canvas.style.zIndex = "32";
                        this._canvas.style.position = 'absolute';
                        this.body.appendChild(this._canvas);
                        this.mTouchMode = display.Capabilities.touchscreenType == 'finger';
                        if (this.mTouchMode) {
                            this._canvas.addEventListener("touchstart", this.onCanvasTouchEvent.bind(this));
                            window.addEventListener("touchmove", this.onCanvasTouchEvent.bind(this));
                            window.addEventListener("touchend", this.onCanvasTouchEvent.bind(this));
                            window.addEventListener("touchcancel", this.onCanvasTouchEvent.bind(this));
                        }
                        else {
                            this._canvas.addEventListener("mouseleave", this.onCanvasMouseEvent.bind(this));
                            this._canvas.addEventListener("mousedown", this.onCanvasMouseEvent.bind(this));
                            this._canvas.addEventListener("contextmenu", this.onCanvasMouseEvent.bind(this));
                            window.addEventListener("mousemove", this.onCanvasMouseEvent.bind(this));
                            window.addEventListener("mouseup", this.onCanvasMouseEvent.bind(this));
                        }
                        document.addEventListener("keydown", this.onCanvasKeyEvent.bind(this));
                        document.addEventListener("keyup", this.onCanvasKeyEvent.bind(this));
                        window.addEventListener('DOMMouseScroll', this.onCanvasMouseEvent.bind(this));
                        if (window.onmousewheel)
                            window.onmousewheel = this.onCanvasMouseEvent.bind(this);
                        else
                            this._canvas.addEventListener("mousewheel", this.onCanvasMouseEvent.bind(this));
                    }
                    return this._canvas;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "canvas2d", {
                get: function () {
                    if (!this._canvas2d) {
                        this._canvas2d = document.createElement("canvas");
                    }
                    return this._canvas2d;
                },
                enumerable: true,
                configurable: true
            });
            Stage.prototype.onCanvasMouseEvent = function (e) {
                var jsType = e.type;
                var wheelDelta, button = e.button || 0;
                var mouseType = [], mx = this.getMouseXFromEvent(e), my = this.getMouseYFromEvent(e);
                if (!isNaN(mx) && !isNaN(my)) {
                    this.mMouseX = mx;
                    this.mMouseY = my;
                }
                switch (jsType) {
                    case "mouseleave":
                        if (this.mCanvasMouseIsEnter) {
                            this.mCanvasMouseIsEnter = false;
                            this.dispatchEvent(new display.Event(display.Event.MOUSE_LEAVE));
                            mouseType.push(display.MouseEvent.MOUSE_OUT);
                        }
                        break;
                    case "mousedown":
                        this.__preventDocumentScroll(e);
                        this.mCanvasMouseIsDown = this.mCanvasMouseIsEnter = true;
                        mouseType.push(button === 0 ? display.MouseEvent.MOUSE_DOWN : display.MouseEvent.RIGHT_MOUSE_DOWN);
                        break;
                    case "mousemove":
                        this.__preventDocumentScroll(e);
                        if (!isNaN(mx) && !isNaN(my)) {
                            var isEnter = this.mMouseX >= 0 && this.mMouseX <= this.mStageWidth && this.mMouseY >= 0 && this.mMouseY <= this.mStageHeight;
                            if (isEnter && !this.mCanvasMouseIsEnter) {
                                this.mCanvasMouseIsEnter = true;
                                mouseType.push(display.MouseEvent.MOUSE_OVER);
                            }
                            else if (!isEnter && this.mCanvasMouseIsEnter) {
                                this.mCanvasMouseIsEnter = false;
                                this.dispatchEvent(new display.Event(display.Event.MOUSE_LEAVE));
                                mouseType.push(display.MouseEvent.MOUSE_OUT);
                            }
                            if (this.mCanvasMouseIsEnter = isEnter) {
                                mouseType.push(display.MouseEvent.MOUSE_MOVE);
                            }
                        }
                        break;
                    case "mouseup":
                        if (this.mCanvasMouseIsDown) {
                            this.mCanvasMouseIsDown = false;
                            mouseType.push(button === 0 ? display.MouseEvent.MOUSE_UP : display.MouseEvent.RIGHT_MOUSE_UP);
                        }
                        break;
                    case "contextmenu":
                        mouseType.push(display.MouseEvent.CONTEXT_MENU);
                        break;
                    case "mousewheel":
                    case "DOMMouseScroll":
                        var diff = int(display.getTimer() - this.mLastMouseWheelTime);
                        if (diff <= 1) {
                            break;
                        }
                        else {
                            this.mLastMouseWheelTime = display.getTimer();
                        }
                        mouseType.push(display.MouseEvent.MOUSE_WHEEL);
                        e = e || window.event;
                        if (e.wheelDelta) {
                            wheelDelta = e.wheelDelta / 120;
                        }
                        else if (e.detail) {
                            wheelDelta = -e.detail;
                        }
                        break;
                }
                var len = mouseType.length;
                for (var i = 0, type; i < len; ++i) {
                    var event = new display.MouseEvent(type = mouseType[i], true, false, this.mMouseX, this.mMouseY, null, e.ctrlKey, e.altKey, e.shiftKey, e.button > 0, wheelDelta);
                    event.movementX = e.movementX || 0;
                    event.movementY = e.movementY || 0;
                    event.base = e;
                    this.processMouseEvent(event);
                }
            };
            Stage.prototype.onCanvasTouchEvent = function (e) {
                switch (e.type) {
                    case "touchstart":
                        Stage.sHelperMouseEvent.type = 'mousedown';
                        break;
                    case "touchmove":
                        Stage.sHelperMouseEvent.type = 'mousemove';
                        break;
                    case "touchend":
                        Stage.sHelperMouseEvent.type = 'mouseup';
                        break;
                    case "touchcancel":
                        Stage.sHelperMouseEvent.type = 'mouseup';
                        break;
                    default:
                        return;
                }
                Stage.sHelperMouseEvent.ctrlKey = e.ctrlKey;
                Stage.sHelperMouseEvent.altKey = e.altKey;
                Stage.sHelperMouseEvent.shiftKey = e.shiftKey;
                if (e.targetTouches && e.targetTouches.length) {
                    Stage.sHelperMouseEvent.pageX = e.targetTouches[0].pageX;
                    Stage.sHelperMouseEvent.pageY = e.targetTouches[0].pageY;
                }
                if (typeof e.preventDefault == 'function') {
                    Stage.sHelperMouseEvent.preventDefault = e.preventDefault.bind(e);
                }
                this.onCanvasMouseEvent(Stage.sHelperMouseEvent);
            };
            Stage.prototype.__preventDocumentScroll = function (e) {
                if (!e || typeof e.preventDefault != 'function') {
                    return;
                }
                if (display.Sound.__isSuspended()) {
                    return;
                }
                e.preventDefault();
            };
            Stage.prototype.onCanvasKeyEvent = function (e) {
                var jsType = e.type;
                var flashType;
                switch (jsType) {
                    case "keydown":
                        flashType = display.KeyboardEvent.KEY_DOWN;
                        break;
                    case "keyup":
                        flashType = display.KeyboardEvent.KEY_UP;
                        break;
                }
                if (this.hasEventListener(flashType)) {
                    var event = new display.KeyboardEvent(flashType, true, false, display.Keyboard[(e.key || '').toUpperCase()] || 0, e.keyCode, e.location, e.ctrlKey, e.altKey, e.shiftKey);
                    event.base = e;
                    this.dispatchEvent(event);
                }
            };
            Stage.prototype.getMouseXFromEvent = function (e) {
                return (e.pageX - Stage._canvasOffset(this.mBody).x) * (this.mStageWidth / this.mBody.clientWidth);
            };
            Stage.prototype.getMouseYFromEvent = function (e) {
                return (e.pageY - Stage._canvasOffset(this.mBody).y) * (this.mStageHeight / this.mBody.clientHeight);
            };
            Stage._canvasOffset = function (obj) {
                var left = 0, top = 0;
                if (obj.offsetParent) {
                    do {
                        left += obj.offsetLeft;
                        top += obj.offsetTop;
                    } while (obj = obj.offsetParent);
                    Stage.sHelperCanvasOffset.x = left;
                    Stage.sHelperCanvasOffset.y = top;
                    return Stage.sHelperCanvasOffset;
                }
                Stage.sHelperCanvasOffset.x = Stage.sHelperCanvasOffset.y = 0;
                return Stage.sHelperCanvasOffset;
            };
            Object.defineProperty(Stage.prototype, "ctx", {
                get: function () {
                    if (!this._ctx) {
                        if (this._wmode === "gpu") {
                            this._ctx = (new display.GLCanvasRenderingContext2D(this));
                        }
                        else if (this._wmode === "gpu batch") {
                            this._ctx = (new display.GLCanvasRenderingContext2D(this, true));
                        }
                        else {
                            this._ctx = this.canvas.getContext("2d");
                        }
                    }
                    return this._ctx;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "ctx2d", {
                get: function () {
                    if (!this._ctx2d) {
                        this._ctx2d = this.canvas2d.getContext("2d");
                        this._ctx2d.width = this._ctx2d.height = 1024;
                    }
                    return this._ctx2d;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "displayContextInfo", {
                get: function () { return null; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "mouseX", {
                get: function () {
                    return this.mMouseX;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Stage.prototype, "mouseY", {
                get: function () {
                    return this.mMouseY;
                },
                enumerable: true,
                configurable: true
            });
            Stage.prototype.__getRect = function () {
                return this.getRect(this);
            };
            Stage.prototype.__update = function (ctx) {
                this.__dispatchEnterFrame();
                _super.prototype.__update.call(this, ctx);
            };
            Stage.prototype.__doMouse = function (e) {
                if (this.mouseEnabled && this.visible) {
                    var obj = _super.prototype.__doMouse.call(this, e);
                    if (obj) {
                        return obj;
                    }
                    if (this.hitTestPoint(this.stage.mouseX, this.stage.mouseY)) {
                        return this;
                    }
                }
                return null;
            };
            Stage.prototype.updateCanvas = function (width, height) {
                this.canvas.width = width;
                this.canvas.height = height;
                if (this.displayState === display.StageDisplayState.NORMAL) {
                    this.mBodyStyle.width = (width / display.Capabilities.pixelAspectRatio) + 'px';
                    this.mBodyStyle.height = (height / display.Capabilities.pixelAspectRatio) + 'px';
                }
                else {
                    this.mBodyStyle.width = this.mBodyStyle.height = '100%';
                }
                this.dirty = true;
            };
            Stage.prototype.onWindowResize = function () {
                var currentOrientation = this.deviceOrientation;
                if (currentOrientation !== this.mLastOrientation) {
                    this.dispatchEvent(new display.StageOrientationEvent(display.StageOrientationEvent.ORIENTATION_CHANGE, true, false, this.mLastOrientation, this.mLastOrientation = currentOrientation));
                }
                if (this.displayState === display.StageDisplayState.FULL_SCREEN) {
                    this.mStageWidth = display.Capabilities.screenResolutionX;
                    this.mStageHeight = display.Capabilities.screenResolutionY;
                }
            };
            Stage.prototype.onWindowBlur = function () {
                this.onWindowVisibilityCheck();
            };
            Stage.prototype.onWindowFocus = function () {
                this.onWindowVisibilityCheck(true);
            };
            Stage.prototype.onWindowVisibilityCheck = function (forceVisible) {
                if (forceVisible === void 0) { forceVisible = false; }
                if ((this.mWindowHidden = forceVisible || document.hidden) == this.mStageHidden) {
                    return;
                }
                this.mStageHidden = this.mWindowHidden;
                this.dispatchEvent(new display.Event(this.mStageHidden ? display.Event.DEACTIVATE : display.Event.ACTIVATE));
            };
            Stage.prototype._injection = function () {
                if (Stage.sInjected) {
                    return;
                }
                Stage.sInjected = true;
                window.onerror = function (message, url, lineNo, columnNo, error) {
                    if (this.loaderInfo.uncaughtErrorEvents.hasEventListener(display.UncaughtErrorEvent.UNCAUGHT_ERROR)) {
                        var event = new display.UncaughtErrorEvent(display.UncaughtErrorEvent.UNCAUGHT_ERROR, true, true, error || message);
                        this.loaderInfo.uncaughtErrorEvents.dispatchEvent(event);
                        return event.isDefaultPrevented();
                    }
                    return false;
                }.bind(this);
                window.trace = function () {
                    var a = [];
                    for (var i = 0, len = arguments.length; i < len; i++) {
                        var v = a[i] = arguments[i];
                        if (typeof v === 'object' && v !== null)
                            a[i] = v.toString();
                    }
                    if (window.console && window.console.log) {
                        console.log.apply(console, a);
                    }
                };
                window.int = function (v) {
                    var max = 2147483647;
                    var min = -2147483648;
                    if (v === undefined)
                        return 0;
                    if (typeof v === 'string')
                        v = +v;
                    var i = v | 0;
                    if (i > max)
                        i = max;
                    if (i < min)
                        i = min;
                    return i;
                };
                window.int.MAX_VALUE = 2147483647;
                window.int.MIN_VALUE = -2147483648;
                window.uint = function (v) {
                    var max = 4294967295;
                    var min = 0;
                    if (v === undefined)
                        return 0;
                    if (typeof v === 'string')
                        v = +v;
                    var i = v | 0;
                    if (i > max)
                        i = max;
                    if (i < min)
                        i = max + ++i;
                    return i;
                };
                window.uint.MAX_VALUE = 4294967295;
                window.uint.MIN_VALUE = 0;
            };
            Stage.startTime = 0;
            Stage.sStageID = 0;
            Stage.sInjected = false;
            Stage.sHelperMouseEvent = {};
            Stage.sHelperCanvasOffset = { x: 0, y: 0 };
            Stage.sRequestAnimationFrame = window.requestAnimationFrame ||
                window.webkitRequestAnimationFrame ||
                window.mozRequestAnimationFrame ||
                window.oRequestAnimationFrame ||
                window.msRequestAnimationFrame || Stage.sRequestAnimationFrameDefault;
            return Stage;
        }(display.DisplayObjectContainer));
        display.Stage = Stage;
    })(display = flash.display || (flash.display = {}));
})(flash || (flash = {}));
var global;
(function (global) {
    global.Facebook = com.facebook.graph.Facebook;
    global.DisplayObject = flash.display.DisplayObject;
    global.StageDisplayState = flash.display.StageDisplayState;
    global.Event = flash.events.Event;
    global.EventDispatcher = flash.events.EventDispatcher;
    global.ExternalInterface = flash.external.ExternalInterface;
    global.ByteArray = flash.utils.ByteArray;
    global.Dictionary = flash.utils.Dictionary;
    global.setTimeout = flash.utils.setTimeout;
    global.FbDialogRequest = s3eSocial.FbDialogRequest;
    global.FbGraphRequest = s3eSocial.FbGraphRequest;
    global.Parse = s3eUtils.Parse;
    var s3eFacebook = (function (_super) {
        __extends(s3eFacebook, _super);
        function s3eFacebook() {
            var _this = _super.call(this) || this;
            _this.is_Is3eExtensionSocial = null;
            _this.TAG = "[Facebook] ";
            _this.USER_CANCELED_CODE = 4201;
            _this.mWithCallbacksId = 0;
            _this.mIsInited = false;
            _this.mIsLogged = false;
            _this.mEmptyData = new global.ByteArray;
            _this.refresh();
            return _this;
        }
        s3eFacebook.prototype.setViewer = function (viewer) {
            this.mViewer = viewer;
        };
        s3eFacebook.prototype.setCloud = function (cloud) {
        };
        s3eFacebook.prototype.setCloudPush = function (cloud) {
        };
        Object.defineProperty(s3eFacebook.prototype, "appId", {
            get: function () {
                return this.mFacebookAppId;
            },
            enumerable: true,
            configurable: true
        });
        s3eFacebook.prototype.setLeaderboardTableId = function (id) {
        };
        s3eFacebook.prototype.s3eCommonIntWithCallback = function (funcName, params, callback) {
            this.mWithCallbacksId++;
            this.mWithCallbacks.set(this.mWithCallbacksId, callback);
            return this.s3eCommonInt(funcName, this.mWithCallbacksId, params);
        };
        s3eFacebook.prototype.s3eCommonInt = function (funcName, cbID, params) {
            this.log("s3eCommonInt");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            var dataItem;
            if (params && params.length > 0)
                dataItem = JSON.parse(params);
            switch (funcName) {
                case s3eFacebook.keyInit:
                    return this.init(dataItem.appId, dataItem.appVersion);
                case s3eFacebook.keyCheckLogin:
                    return int(this.checkLogin(dataItem));
                case s3eFacebook.keyLogin:
                    return int(this.login(dataItem.sessionID, dataItem.permissions, cbID));
                case s3eFacebook.keyLogout:
                    return 0;
                case s3eFacebook.keyInitFBRequest_WithGraphPath:
                    return this.initFBGraphRequest(dataItem.graphPath, dataItem.httpMethod);
                case s3eFacebook.keyFBRequest_AddParamString:
                case s3eFacebook.keyFBRequest_AddParamNumber:
                case s3eFacebook.keyFBRequest_AddParamStringInternal:
                    return this.updateFBGraphRequestWithParams(dataItem.requestID, dataItem.name, dataItem.value);
                case s3eFacebook.keyFBRequest_Send:
                    return this.sendFBGraphRequest(dataItem.requestID, cbID);
                case s3eFacebook.keyFBRequest_Delete:
                    return this.deleteFBGraphRequest(dataItem.requestID);
                case s3eFacebook.keyFBDialog_WithAction:
                    return this.initFBDialogWithAction(dataItem.action);
                case s3eFacebook.keyFBDialog_AddParamString:
                case s3eFacebook.keyFBDialog_AddParamNumber:
                case s3eFacebook.keyFBDialog_AddParamStringInternal:
                    return this.updateFBDialogActionWithParams(dataItem.dialogID, dataItem.name, dataItem.value);
                case s3eFacebook.keyFBDialog_Show:
                    return this.showFBDialogAction(dataItem.dialogID, cbID);
                case s3eFacebook.keyFBDialog_Delete:
                    return this.deleteFBDialogAction(dataItem.dialogID);
                case s3eFacebook.keyFBRequest_ErrorCode:
                    return this.getFBRequest_ErrorCode(dataItem.requestID);
                case s3eFacebook.keyFBDialog_ErrorCode:
                    return this.getFBDialog_ErrorCode(dataItem.dialogID);
                case s3eFacebook.keyFBSession_ReauthorizeWithPublishPermissions:
                case s3eFacebook.keyFBSession_ReauthorizeWithReadPermissions:
                    return this.ReauthorizeWithPermissions(dataItem.sessionID, dataItem.permissions, cbID);
                case s3eFacebook.keyFBAppEvents_Purchase:
                    return this.AppEventsPurchase(dataItem);
                case s3eFacebook.keyFBAppEvents_Custom:
                    return this.AppEventsCustom(dataItem);
            }
            return -1;
        };
        s3eFacebook.prototype.s3eCommonStr = function (funcName, cbID, params) {
            this.log("s3eCommonStr");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            switch (funcName) {
                case s3eFacebook.keyFBGetAppID:
                    return this.mFacebookAppId;
            }
            return "";
        };
        s3eFacebook.prototype.s3eCommonData = function (funcName, cbID, params) {
            this.log("s3eCommonData");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            if (params && params.length > 0)
                var dataItem = JSON.parse(params);
            switch (funcName) {
                case s3eFacebook.keyFBRequest_ErrorString:
                    return this.getFBRequest_ErrorString(dataItem.requestID);
                case s3eFacebook.keyFBRequest_ResponseRaw:
                    return this.getResponceRaw(dataItem.requestID);
                case s3eFacebook.keyFBSession_AccessToken:
                    return this.getFBAccessToken();
                case s3eFacebook.keyFBDialog_DidCompleteWithUrl:
                    return this.getDidCompleteWithUrl(dataItem.dialogID);
            }
            return this.mEmptyData;
        };
        s3eFacebook.prototype.refresh = function () {
            this.mRequests = new global.Dictionary;
            this.mWithCallbacks = new global.Dictionary;
            this.mGraphRequestsList = new Array;
            this.mFbDialogRequestsList = new Array;
        };
        s3eFacebook.prototype.activate = function () {
            global.Facebook.activateApp();
        };
        s3eFacebook.prototype.mouseDown = function () { };
        s3eFacebook.prototype.deactivate = function () { };
        s3eFacebook.prototype.exit = function () { };
        s3eFacebook.prototype.init = function (appID, appVersion) {
            if (!this.mIsInited) {
                this.log("Call init function with appId = " + appID + " with app version = " + appVersion);
                this.mFacebookAppId = appID;
                this.mFacebookAppVersion = appVersion;
                if (global.ExternalInterface.available || global.Facebook.simulate) {
                    global.Facebook.init(this.mFacebookAppId, this.onInitCompleate.bind(this));
                }
                else {
                    this.notSupportedError();
                }
                this.mIsLogged = true;
            }
            return 0;
        };
        s3eFacebook.prototype.checkLogin = function (session) {
            if (session === void 0) { session = null; }
            this.log("Call checklogin function");
            return (this.mIsLogged && this.mIsInited);
        };
        s3eFacebook.prototype.login = function (sessionId, permissions, callbackKey) {
            this.mCurrentRequestKey = s3eFacebook.keyLogin;
            this.mRequests.set(s3eFacebook.keyLogin, new Request(callbackKey));
            this.log("Call login function");
            if (this.checkLogin()) {
                this.log("Already login");
                this.executeRequestByKey(s3eFacebook.keyLogin, true, { status: 0 });
                return 0;
            }
            this.log("Need auth");
            if (global.ExternalInterface.available || global.Facebook.simulate) {
                this.log("Auth with permissions = " + permissions);
                var opts = { scope: permissions };
                global.Facebook.login(this.onLoginComplete.bind(this), opts);
                return 0;
            }
            else {
                global.setTimeout(this.notSupportedError.bind(this), 1);
                return 1;
            }
        };
        s3eFacebook.prototype.initFBGraphRequest = function (path, httpMethod) {
            this.mGraphRequestsList.push(new global.FbGraphRequest(path, httpMethod));
            return this.mGraphRequestsList.length - 1;
        };
        s3eFacebook.prototype.updateFBGraphRequestWithParams = function (requestID, name, value) {
            try {
                this.mGraphRequestsList[requestID].setParam(name, value);
                return 0;
            }
            catch (e) { }
            return 1;
        };
        s3eFacebook.prototype.sendFBGraphRequest = function (requestID, callbackKey) {
            this.mCurrentRequestKey = s3eFacebook.keyFBRequest_Send;
            this.mRequests.set(this.mCurrentRequestKey, new Request(callbackKey));
            try {
                var request = this.mGraphRequestsList[requestID];
                this.log("request: path = " + request.requestPath + ", method = " + request.requestHttpMethod);
                if (request.requestHttpMethod == "DELETE")
                    global.Facebook.deleteRequest(request.requestPath, this.onCallbackDeleteRequest.bind(this));
                else
                    global.Facebook.api(request.requestPath, this.onCallbackSendGraphRequest.bind(this), request.requestParams, request.requestHttpMethod);
                return 0;
            }
            catch (e) {
                this.log(e.message);
            }
            ;
            return 1;
        };
        s3eFacebook.prototype.deleteFBGraphRequest = function (requestID) {
            try {
                this.mGraphRequestsList[requestID].setDeleteStatus(true);
                return 0;
            }
            catch (e) {
                this.log("error deleteFBGraphRequest");
            }
            return 1;
        };
        s3eFacebook.prototype.getResponceRaw = function (requestID) {
            try {
                var request = this.mGraphRequestsList[requestID];
                var JSONdata = JSON.stringify(request.requestResponce);
                if (!JSONdata || JSONdata.length == 0 || JSONdata == "[]")
                    JSONdata = "{}";
                this.log("ResponseRaw = " + JSONdata);
                global.SocialStats.response(JSONdata);
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(JSONdata);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) {
                this.log("getResponseRaw Error: " + e.message);
                global.SocialStats.response(e.message);
            }
            return null;
        };
        s3eFacebook.prototype.getFBRequest_ErrorCode = function (requestID) {
            try {
                return this.mGraphRequestsList[requestID].requestErrorCode;
            }
            catch (e) {
                this.log("error getFBRequest_ErrorCode");
            }
            return 1;
        };
        s3eFacebook.prototype.getFBRequest_ErrorString = function (requestID) {
            try {
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(this.mGraphRequestsList[requestID].requestErrorMessage);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) {
                this.log("error getFBRequest_ErrorString");
            }
            return this.mEmptyData;
        };
        s3eFacebook.prototype.getFBAccessToken = function () {
            try {
                var accessToken = "";
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(accessToken);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) {
                this.log("error getFBAccessToken");
            }
            return null;
        };
        s3eFacebook.prototype.initFBDialogWithAction = function (action) {
            this.mFbDialogRequestsList.push(new global.FbDialogRequest(action));
            return this.mFbDialogRequestsList.length - 1;
        };
        s3eFacebook.prototype.updateFBDialogActionWithParams = function (dialogID, name, value) {
            try {
                this.mFbDialogRequestsList[dialogID].setParam(name, value);
                return 0;
            }
            catch (e) {
                this.log("error updateFBDialogActionWithParams ");
            }
            return 1;
        };
        s3eFacebook.prototype.showFBDialogAction = function (dialogID, callbackKey) {
            this.mCurrentRequestKey = s3eFacebook.keyFBDialog_Show;
            this.mRequests.set(this.mCurrentRequestKey, new Request(callbackKey));
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                this.log("request.dialogAction = " + request.dialogAction);
                if (request && request.dialogAction == 'share_open_graph' && request.dialogParams && request.dialogParams.action_properties) {
                    var tmpRequstParam = JSON.parse(request.dialogParams.action_properties);
                    request.dialogAction = 'share';
                    request.dialogParams['href'] = tmpRequstParam.object['og:url'];
                    request.dialogParams['quote'] = tmpRequstParam.object['og:description'];
                }
                this.exitFullscreen();
                global.Facebook.ui(request.dialogAction, request.dialogParams, this.onCallbackShowDialog.bind(this));
                return 0;
            }
            catch (e) {
                global.GLog.print("error showFBDialogAction ");
            }
            ;
            return 1;
        };
        s3eFacebook.prototype.getDidCompleteWithUrl = function (dialogID) {
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                var JSONdata = JSON.stringify(request.dialogResponce);
                if (request.dialogResponce.hasOwnProperty("to"))
                    JSONdata = this.arrayToUrlParams(request.dialogResponce.to);
                if (request.dialogResponce.hasOwnProperty("post_id"))
                    JSONdata = "?post_id=" + request.dialogResponce.post_id;
                if (!JSONdata)
                    JSONdata = "";
                this.log("ResponseRaw = " + JSONdata);
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(JSONdata);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) { }
            return null;
        };
        s3eFacebook.prototype.deleteFBDialogAction = function (dialogID) {
            try {
                this.mFbDialogRequestsList[dialogID].setDeleteStatus(true);
                return 0;
            }
            catch (e) { }
            return 1;
        };
        s3eFacebook.prototype.getFBDialog_ErrorCode = function (dialogID) {
            try {
                return this.mFbDialogRequestsList[dialogID].dialogErrorCode;
            }
            catch (e) { }
            return 0;
        };
        s3eFacebook.prototype.ReauthorizeWithPermissions = function (sessionId, permissions, callbackKey) {
            this.mCurrentRequestKey = s3eFacebook.keyLogin;
            this.mRequests.set(s3eFacebook.keyLogin, new Request(callbackKey));
            this.log("Call ReauthorizeWithPermissions function");
            if (global.ExternalInterface.available || global.Facebook.simulate) {
                this.exitFullscreen();
                var opts = { scope: permissions, auth_type: "rerequest", return_scopes: true };
                global.Facebook.login(this.onLoginComplete.bind(this), opts);
                return 0;
            }
            else {
                this.notSupportedError();
                return 1;
            }
        };
        s3eFacebook.prototype.AppEventsPurchase = function (data) {
            if (!data)
                return 0;
            var price = NaN;
            var currency = data.currency;
            if ("price" in data)
                price = typeof data.price == 'string' ? parseFloat(data.price) : data.price;
            if (isNaN(price) || !currency)
                return 0;
            global.Facebook.logPurchase(price, currency);
            return 0;
        };
        s3eFacebook.prototype.AppEventsCustom = function (data) {
            if (!data)
                return 0;
            var eventName = data.eventName;
            var parameters = {};
            var valueToSum = "valueToSum" in data ? data.valueToSum : 0;
            if (data.parameters) {
                for (var _i = 0, _a = data.parameters; _i < _a.length; _i++) {
                    var p = _a[_i];
                    if ("paramName" in p && "paramValue" in p)
                        parameters[p.paramName] = p.paramValue;
                }
            }
            global.Facebook.logEvent(eventName, valueToSum, parameters);
            return 0;
        };
        s3eFacebook.prototype.onCallbackShowDialog = function (result) {
            this.log("onCallbackShowDialog" + this.jsonString(result));
            if (!result)
                result = { error_code: -1, error_message: "User canceled (manual)" };
            this.dispatchEvent(new global.Event(global.Event.ACTIVATE));
            var params = new Object;
            var dialogID = this.mFbDialogRequestsList.length - 1;
            var request = this.mFbDialogRequestsList[dialogID];
            var errorCode = 0;
            if (result) {
                for (var prop in result) {
                    if (prop == "error_message" || prop == "error_code") {
                        this.log("FAIL execute " + this.mCurrentRequestKey + ": " + result.error_message.toString() + result.error_code.toString());
                        errorCode = result.error_code;
                        if (result.error_message.toString().indexOf("User canceled") != -1)
                            errorCode = this.USER_CANCELED_CODE;
                        params.status = 0;
                        params.dialogID = dialogID;
                        request.setErrorData(errorCode, result.error_message.toString());
                        request.dialogResponce = "error_code=" + errorCode;
                        this.executeRequestByKey(this.mCurrentRequestKey, false, params);
                        return;
                    }
                }
                this.log("Compleate execute " + this.mCurrentRequestKey);
                params.status = 0;
                params.dialogID = dialogID;
                request.dialogResponce = result;
                this.executeRequestByKey(this.mCurrentRequestKey, true, params);
            }
            else {
                params.status = 1;
                params.dialogID = dialogID;
                request.setErrorData(this.USER_CANCELED_CODE, "");
                request.dialogResponce = "error_code=" + this.USER_CANCELED_CODE;
                this.executeRequestByKey(this.mCurrentRequestKey, false, params);
            }
        };
        s3eFacebook.prototype.onCallbackSendGraphRequest = function (result, fail) {
            if (fail === void 0) { fail = null; }
            var params = new Object;
            var requestID = this.mGraphRequestsList.length - 1;
            var request = this.mGraphRequestsList[requestID];
            if (result) {
                this.log("Complete execute " + s3eFacebook.keyFBRequest_Send + " with result: " + this.jsonString(result));
                params.status = 0;
                params.requestID = requestID;
                request.requestResponce = result;
                this.executeRequestByKey(s3eFacebook.keyFBRequest_Send, true, params);
            }
            else {
                if (fail)
                    this.log("FAIL execute " + s3eFacebook.keyFBRequest_Send + " with error: " + this.jsonString(fail));
                params.status = 1;
                params.requestID = requestID;
                request.requestResponce = fail;
                this.executeRequestByKey(s3eFacebook.keyFBRequest_Send, false, params);
            }
        };
        s3eFacebook.prototype.onCallbackDeleteRequest = function (result) {
            this.log("deleteRequestCallback " + result);
            if (result == "true")
                this.onCallbackSendGraphRequest(result);
            else
                this.onCallbackSendGraphRequest(JSON.stringify(result));
        };
        s3eFacebook.prototype.onInitCompleate = function (result, fail) {
            this.log("Facebook ready for work. " + result);
            this.mIsInited = true;
            this.mIsLogged = result;
        };
        s3eFacebook.prototype.onLoginComplete = function (result, fail) {
            var params = new Object;
            if (result) {
                this.log("Complete login " + result.toString());
                this.mIsLogged = true;
                params.status = 0;
                this.executeRequestByKey(s3eFacebook.keyLogin, true, params);
            }
            else if (fail) {
                this.log("Fail login " + fail.toString());
                params.status = 1;
                this.executeRequestByKey(s3eFacebook.keyLogin, false, params);
            }
        };
        s3eFacebook.prototype.onLogoutComplete = function (result, fail) {
            this.mIsLogged = false;
        };
        s3eFacebook.prototype.notSupportedError = function () {
            var data = { status: 1 };
            this.executeRequestByKey(this.mCurrentRequestKey, false, data);
        };
        s3eFacebook.prototype.executeRequestByKey = function (key, isCompleate, params, statusCode) {
            if (statusCode === void 0) { statusCode = 0; }
            var request;
            if (this.mRequests.get(key) != null) {
                this.log("Execute callback for key = " + key);
                request = this.mRequests.get(key);
                var JSONdata;
                if (params)
                    JSONdata = JSON.stringify(params);
                var dataItem = new global.ByteArray();
                dataItem.writeUTFBytes(JSONdata);
                dataItem.position = 0;
                if (this.mWithCallbacks.get(request.completeHandler)) {
                    this.mWithCallbacks.get(request.completeHandler)(dataItem, this.mEmptyData);
                    this.mWithCallbacks.delete(request.completeHandler);
                    return;
                }
                this.mViewer["doCallback"](request.completeHandler, dataItem, this.mEmptyData);
            }
            else {
                this.log("callback with key " + key + " not found");
            }
        };
        s3eFacebook.prototype.arrayToUrlParams = function (dataItem) {
            var str = "";
            if (dataItem)
                for (var i = 0; i < dataItem.length; ++i)
                    str += "?to[" + i + "]=" + dataItem[i];
            return str;
        };
        s3eFacebook.prototype.jsonString = function (value) {
            var result = null;
            if (!value)
                return result;
            if (typeof value == 'string')
                return value.toString();
            try {
                result = JSON.stringify(value);
            }
            catch (error) { }
            return result;
        };
        s3eFacebook.prototype.exitFullscreen = function () {
            if (this.mViewer && this.mViewer.stage && this.mViewer.stage.displayState != global.StageDisplayState.NORMAL) {
                try {
                    this.mViewer.stage.displayState = global.StageDisplayState.NORMAL;
                }
                catch (error) {
                    global.GLog.print(error.message);
                }
            }
        };
        s3eFacebook.prototype.log = function (message) {
            if (global.CONFIG.QA_VERSION)
                global.GLog.print(this.TAG + message);
        };
        s3eFacebook.keyInit = "s3eFBInit";
        s3eFacebook.keyCheckLogin = "s3eFBSession_LoggedIn";
        s3eFacebook.keyLogin = "s3eFBSession_Login";
        s3eFacebook.keyLogout = "s3eFBTerminate";
        s3eFacebook.keyInitFBRequest_WithGraphPath = "s3eFBRequest_WithGraphPath";
        s3eFacebook.keyFBRequest_AddParamString = "s3eFBRequest_AddParamString";
        s3eFacebook.keyFBRequest_AddParamNumber = "s3eFBRequest_AddParamNumber";
        s3eFacebook.keyFBRequest_AddParamStringInternal = "s3eFBRequest_AddParamStringInternal";
        s3eFacebook.keyFBRequest_Send = "s3eFBRequest_Send";
        s3eFacebook.keyFBRequest_Delete = "s3eFBRequest_Delete";
        s3eFacebook.keyFBRequest_ErrorCode = "s3eFBRequest_ErrorCode";
        s3eFacebook.keyFBRequest_ErrorString = "s3eFBRequest_ErrorString";
        s3eFacebook.keyFBDialog_ErrorCode = "s3eFBDialog_ErrorCode";
        s3eFacebook.keyFBDialog_WithAction = "s3eFBDialog_WithAction";
        s3eFacebook.keyFBDialog_AddParamString = "s3eFBDialog_AddParamString";
        s3eFacebook.keyFBDialog_AddParamNumber = "s3eFBDialog_AddParamNumber";
        s3eFacebook.keyFBDialog_AddParamStringInternal = "s3eFBDialog_AddParamStringInternal";
        s3eFacebook.keyFBDialog_Show = "s3eFBDialog_Show";
        s3eFacebook.keyFBDialog_Delete = "s3eFBDialog_Delete";
        s3eFacebook.keyFBSession_ReauthorizeWithPublishPermissions = "s3eFBSession_ReauthorizeWithPublishPermissions";
        s3eFacebook.keyFBSession_ReauthorizeWithReadPermissions = "s3eFBSession_ReauthorizeWithReadPermissions";
        s3eFacebook.keyFBAppEvents_Purchase = "s3eFBAppEvents_Purchase";
        s3eFacebook.keyFBAppEvents_Custom = "s3eFBAppEvents_Custom";
        s3eFacebook.keyFBRequest_ResponseRaw = "s3eFBRequest_ResponseRaw";
        s3eFacebook.keyFBSession_AccessToken = "s3eFBSession_AccessToken";
        s3eFacebook.keyFBDialog_DidCompleteWithUrl = "s3eFBDialog_DidCompleteWithUrl";
        s3eFacebook.keyFBGetAppID = "s3eFBGetAppID";
        return s3eFacebook;
    }(global.EventDispatcher));
    global.s3eFacebook = s3eFacebook;
})(global || (global = {}));
var Request = (function () {
    function Request(completeHandlerKey, errorHandlerKey) {
        if (errorHandlerKey === void 0) { errorHandlerKey = -1; }
        this.completeHandler = 0;
        this.errorHandler = 0;
        this.completeHandler = completeHandlerKey;
        this.errorHandler = errorHandlerKey;
    }
    return Request;
}());
var global;
(function (global) {
    global.Facebook = com.facebook.graph.Facebook;
    global.DisplayObject = flash.display.DisplayObject;
    global.StageDisplayState = flash.display.StageDisplayState;
    global.Event = flash.events.Event;
    global.EventDispatcher = flash.events.EventDispatcher;
    global.IOErrorEvent = flash.events.IOErrorEvent;
    global.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    global.ExternalInterface = flash.external.ExternalInterface;
    global.URLLoader = flash.net.URLLoader;
    global.URLRequest = flash.net.URLRequest;
    global.URLRequestMethod = flash.net.URLRequestMethod;
    global.URLVariables = flash.net.URLVariables;
    global.ByteArray = flash.utils.ByteArray;
    global.Dictionary = flash.utils.Dictionary;
    global.HTMLUtils = s3eUtils.HTMLUtils;
    global.Online = s3eUtils.Online;
    global.Parse = s3eUtils.Parse;
    var s3eFacebookBilling = (function (_super) {
        __extends(s3eFacebookBilling, _super);
        function s3eFacebookBilling(data) {
            var _this = _super.call(this) || this;
            _this.is_Is3eExtensionBilling = null;
            _this.TAG = "[Facebook Billing] ";
            _this.mWithCallbacksId = 0;
            _this.mIsInited = false;
            _this.mLocalMode = false;
            _this.mSupportedCurrencies = {
                'USD': { symbol: '&#36;', pre: true },
                'SGD': { symbol: 'S&#36;', pre: true },
                'RON': { symbol: 'LEU', pre: false },
                'EUR': { symbol: '&#8364;', pre: true },
                'TRY': { symbol: '&#8378;', pre: true },
                'SEK': { symbol: 'kr', pre: false },
                'ZAR': { symbol: 'R', pre: true },
                'BHD': { symbol: 'BD', pre: true },
                'HKD': { symbol: 'HK&#36;', pre: true },
                'CHF': { symbol: 'Fr.', pre: false },
                'NIO': { symbol: 'C&#36;', pre: true },
                'JPY': { symbol: '&#165;', pre: true },
                'ISK': { symbol: 'kr;', pre: false },
                'TWD': { symbol: 'NT&#36;', pre: true },
                'NZD': { symbol: 'NZ&#36;', pre: true },
                'CZK': { symbol: 'K&#269;', pre: true },
                'AUD': { symbol: 'A&#36;', pre: true },
                'THB': { symbol: '&#3647;', pre: true },
                'BOB': { symbol: 'Bs', pre: true },
                'BRL': { symbol: 'B&#36;', pre: true },
                'MXN': { symbol: 'Mex&#36;', pre: true },
                'ILS': { symbol: '&#8362;', pre: true },
                'JOD': { symbol: 'JD', pre: false },
                'HNL': { symbol: 'L', pre: true },
                'MOP': { symbol: 'MOP&#36;', pre: true },
                'COP': { symbol: '&#36;', pre: true },
                'UYU': { symbol: '&#36;U', pre: true },
                'CRC': { symbol: '&#8353;', pre: true },
                'DKK': { symbol: 'kr', pre: false },
                'QAR': { symbol: 'QR', pre: false },
                'PYG': { symbol: '&#8370;', pre: true },
                'EGP': { symbol: 'E&#163;', pre: true },
                'CAD': { symbol: 'C&#36;', pre: true },
                'LVL': { symbol: 'Ls', pre: true },
                'INR': { symbol: '&#8377;', pre: true },
                'LTL': { symbol: 'Lt;', pre: false },
                'KRW': { symbol: '&#8361;', pre: true },
                'GTQ': { symbol: 'Q', pre: true },
                'AED': { symbol: 'AED', pre: false },
                'VEF': { symbol: 'Bs.F.', pre: true },
                'SAR': { symbol: 'SR', pre: false },
                'NOK': { symbol: 'kr', pre: false },
                'UAH': { symbol: '&#8372;', pre: true },
                'DOP': { symbol: 'RD&#36;', pre: true },
                'CNY': { symbol: '&#165;', pre: true },
                'BGN': { symbol: 'lev', pre: false },
                'ARS': { symbol: '&#36;', pre: true },
                'PLN': { symbol: 'z&#322;', pre: false },
                'GBP': { symbol: '&#163;', pre: true },
                'PEN': { symbol: 'S/.', pre: false },
                'PHP': { symbol: 'PhP', pre: false },
                'VND': { symbol: '&#8363;', pre: false },
                'RUB': { symbol: 'py&#1073;', pre: false },
                'RSD': { symbol: 'RSD', pre: false },
                'HUF': { symbol: 'Ft', pre: false },
                'MYR': { symbol: 'RM', pre: true },
                'CLP': { symbol: '&#36;', pre: true },
                'HRK': { symbol: 'kn', pre: false },
                'IDR': { symbol: 'Rp', pre: true }
            };
            _this.mLocalMode = data == null || s3eFacebookBilling.simulate;
            _this.mMobilePricePoints = data && 'payment_mobile_pricepoints' in data ? data.payment_mobile_pricepoints : null;
            _this.mEmptyData = new global.ByteArray;
            _this.mPaymetsInfo = new global.Dictionary;
            _this.log("s3eFacebookBilling (localMode = " + _this.mLocalMode + ")");
            _this.refresh();
            return _this;
        }
        s3eFacebookBilling.prototype.setViewer = function (viewer) {
            this.mViewer = viewer;
        };
        s3eFacebookBilling.prototype.setCloud = function (cloud) {
        };
        s3eFacebookBilling.prototype.setCloudPush = function (cloud) {
        };
        s3eFacebookBilling.prototype.saved = function () {
            if (this.mConsumeDelayed) {
                this.mConsumeProductId = this.mConsumeDelayed;
                var request = new global.URLRequest(this.mServiceURL);
                request.method = global.URLRequestMethod.POST;
                var vars = new global.URLVariables;
                vars.consume = this.mConsumeProductId;
                request.data = vars;
                this.mConsumeLoader.load(request);
                this.mConsumeDelayed = null;
            }
        };
        s3eFacebookBilling.prototype.setServiceURL = function (url) {
            this.mServiceURL = url;
            this.mPaymentsLoader = new global.URLLoader;
            this.mPaymentsLoader.addEventListener(global.Event.COMPLETE, function (event) {
                global.EventStats.handle(s3eFacebookBilling, event);
                var data = this.mPaymentsLoader.data;
                if (data) {
                    var json = JSON.parse(data);
                    if (json.data && "length" in json.data) {
                        var map = {};
                        var len = json.data.length;
                        for (var i = 0; i < len; ++i) {
                            var sku = json.data[i].id;
                            this.log("Payment: " + sku);
                            if (!map[sku]) {
                                map[sku] = true;
                                this.doCallback(this.mBillingCallbacks.get(s3eFacebookBilling.s3eFacebookBillingSetRestoredCallback), { productID: sku });
                                this.log("Покупка восстановлена (" + sku + ")");
                            }
                        }
                    }
                }
                this.log("Обновление транзакций завершено");
            }.bind(this));
            this.mPaymentsLoader.addEventListener(global.IOErrorEvent.IO_ERROR, this.onTransactionRestoreFailed.bind(this));
            this.mPaymentsLoader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, this.onTransactionRestoreFailed.bind(this));
            this.mConsumeLoader = new global.URLLoader;
            this.mConsumeLoader.addEventListener(global.Event.COMPLETE, function (event) {
                global.EventStats.handle(s3eFacebookBilling, event);
                var data = this.mConsumeLoader.data;
                if (data) {
                    var response = JSON.parse(data);
                    if ("status" in response && response.status.toLowerCase() == "ok") {
                        this.log("Покупка успешно потреблена");
                        return;
                    }
                }
                this.log("Ошибка потребления покупки");
            }.bind(this));
            this.mConsumeLoader.addEventListener(global.IOErrorEvent.IO_ERROR, this.onConsumeFailed.bind(this));
            this.mConsumeLoader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, this.onConsumeFailed.bind(this));
        };
        s3eFacebookBilling.prototype.s3eCommonIntWithCallback = function (funcName, params, callback) {
            this.mWithCallbacksId++;
            this.mWithCallbacks.set(this.mWithCallbacksId, callback);
            return this.s3eCommonInt(funcName, this.mWithCallbacksId, params);
        };
        s3eFacebookBilling.prototype.s3eCommonInt = function (funcName, cbID, params) {
            this.log("s3eCommonInt");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            var dataItem;
            if (params && params.length > 0)
                dataItem = JSON.parse(params);
            if (this.mLocalMode) {
                switch (funcName) {
                    case s3eFacebookBilling.s3eFacebookBillingRequestProductsInformation:
                    case s3eFacebookBilling.s3eFacebookBillingConsumeItem:
                    case s3eFacebookBilling.s3eFacebookBillingRestoreCompletedTransactions:
                        return 0;
                    case s3eFacebookBilling.s3eFacebookBillingRequestPayment:
                        this.mPurchaseProductId = dataItem.productID;
                        this.onPurchaseCallback({ status: "completed" });
                        return 0;
                }
            }
            switch (funcName) {
                case s3eFacebookBilling.s3eFacebookBillingInit:
                    return 1;
                case s3eFacebookBilling.s3eFacebookBillingSetErrorCallback:
                case s3eFacebookBilling.s3eFacebookBillingSetPurchasedCallback:
                case s3eFacebookBilling.s3eFacebookBillingSetRestoredCallback:
                case s3eFacebookBilling.s3eFacebookBillingSetInfoCallback:
                    this.mBillingCallbacks.set(funcName, cbID);
                    return 0;
                case s3eFacebookBilling.s3eFacebookBillingRequestProductsInformation:
                    if (!dataItem || (dataItem && !dataItem.products))
                        return 1;
                    if (!global.ExternalInterface.available)
                        return 1;
                    global.skipCachedProductsInformation(dataItem);
                    if (!dataItem.products.length)
                        return 1;
                    this.mUserCurrency = 'USD';
                    for (var _i = 0, _a = dataItem.products; _i < _a.length; _i++) {
                        var url = _a[_i];
                        global.Facebook.api('', function (result, fail) {
                            if (fail === void 0) { fail = null; }
                            if (!result)
                                return;
                            if (!result.data)
                                return;
                            if (!result.data.price)
                                return;
                            var productID = result.url;
                            var price = NaN;
                            var currency = null;
                            var defaultPrice = NaN;
                            var defaultCurrency = null;
                            for (var _i = 0, _a = result.data.price; _i < _a.length; _i++) {
                                var priceObject = _a[_i];
                                if (priceObject.currency == this.mUserCurrency) {
                                    price = priceObject.amount;
                                    currency = priceObject.currency;
                                }
                                if (priceObject.currency == "USD") {
                                    defaultPrice = priceObject.amount;
                                    defaultCurrency = priceObject.currency;
                                }
                            }
                            if (!price || !currency) {
                                this.log("Не удалось найти валюту в продукте: userCurrency=" + this.mUserCurrency + ", id=" + productID);
                                price = defaultPrice;
                                currency = defaultCurrency;
                            }
                            var priceStr = null;
                            var info = this.mSupportedCurrencies[currency];
                            var symbol = global.HTMLUtils.decode(info.symbol);
                            if (info)
                                priceStr = info.pre ? symbol + price : price + symbol;
                            else
                                priceStr = price.toString();
                            price = parseFloat(price + "");
                            this.mPaymetsInfo.set(productID, { price: price, currency: currency, priceStr: priceStr });
                            this.doCallback(this.mBillingCallbacks.get(s3eFacebookBilling.s3eFacebookBillingSetInfoCallback), { productID: productID, mPrice: price, mPriceStr: priceStr, mCurrency: currency, mIsDiscount: false });
                            this.log("Информация о покупке: price=" + price + ", priceStr=" + priceStr + ", currency=" + currency + ", id=" + productID);
                        }.bind(this), { id: url, scrape: true }, global.URLRequestMethod.POST);
                    }
                    return 0;
                case s3eFacebookBilling.s3eFacebookBillingRequestPayment:
                    if (!dataItem || (dataItem && !dataItem.productID)) {
                        this.errorBilling(s3eFacebookBilling.OBILLING_PURCHASE_PAYMENT_INVALID);
                        return 1;
                    }
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eFacebookBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED, dataItem.productID);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eFacebookBilling.OBILLING_NETWORK_NO_INTERNET, dataItem.productID);
                        return 1;
                    }
                    var s = 64;
                    if (typeof (s) == 'number' && s === parseInt(s, 10)) {
                        var a = [];
                        a.length = s + 1;
                        s = a.join('x');
                    }
                    var requestID = s.replace(/x/g, function () {
                        var n = Math.round(Math.random() * 61) + 48;
                        n = n > 57 ? (n + 7 > 90 ? n + 13 : n + 7) : n;
                        return String.fromCharCode(n);
                    }.bind(this));
                    this.exitFullscreen();
                    this.mPurchaseProductId = dataItem.productID;
                    var isEligiblePromo = dataItem.isEligiblePromo;
                    var obj = { action: 'purchaseitem', product: this.mPurchaseProductId, request_id: requestID, quantity: 1 };
                    if (isEligiblePromo && isEligiblePromo == 1) {
                        obj.action = 'payer_promotion';
                    }
                    if (isEligiblePromo && isEligiblePromo == 1) {
                        isEligiblePromo = 0;
                        global.Facebook.ui('payer_promotion', obj, this.onPurchaseCallback.bind(this));
                    }
                    else {
                        global.Facebook.ui('pay', obj, this.onPurchaseCallback.bind(this));
                    }
                    return 0;
                case s3eFacebookBilling.s3eFacebookBillingConsumeItem:
                    if (!dataItem || (dataItem && !dataItem.productID || dataItem.productID.length == 0)) {
                        this.errorBilling(s3eFacebookBilling.OBILLING_PURCHASE_PAYMENT_INVALID);
                        return 1;
                    }
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eFacebookBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED, dataItem.productID);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eFacebookBilling.OBILLING_NETWORK_NO_INTERNET, dataItem.productID);
                        return 1;
                    }
                    this.mConsumeDelayed = dataItem.productID;
                    return 0;
                case s3eFacebookBilling.s3eFacebookBillingRestoreCompletedTransactions:
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eFacebookBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eFacebookBilling.OBILLING_NETWORK_NO_INTERNET);
                        return 1;
                    }
                    this.mPaymentsLoader.load(new global.URLRequest(this.mServiceURL));
                    return 0;
            }
            return -1;
        };
        s3eFacebookBilling.prototype.s3eCommonStr = function (funcName, cbID, params) {
            return "";
        };
        s3eFacebookBilling.prototype.s3eCommonData = function (funcName, cbID, params) {
            return this.mEmptyData;
        };
        s3eFacebookBilling.prototype.refresh = function () {
            this.mWithCallbacks = new global.Dictionary;
            this.mBillingCallbacks = new global.Dictionary;
        };
        s3eFacebookBilling.prototype.activate = function () { };
        s3eFacebookBilling.prototype.mouseDown = function () { };
        s3eFacebookBilling.prototype.deactivate = function () { };
        s3eFacebookBilling.prototype.exit = function () { };
        s3eFacebookBilling.prototype.onPurchaseCallback = function (result) {
            if (result === void 0) { result = null; }
            this.dispatchEvent(new global.Event(global.Event.ACTIVATE));
            if (result && result.status == "completed") {
                this.log("Покупка прошла удачно: " + this.mPurchaseProductId + " result.payment_id : " + result.payment_id);
                this.doCallback(this.mBillingCallbacks.get(s3eFacebookBilling.s3eFacebookBillingSetPurchasedCallback), { productID: this.mPurchaseProductId, paymentId: (result.payment_id + "") });
            }
            else {
                var error_code = result && result.error_code == 1383010 ? s3eFacebookBilling.OBILLING_PURCHASE_CANCELED : s3eFacebookBilling.OBILLING_ERROR_UNKNOWN;
                this.log("Ошибка покупки: " + this.mPurchaseProductId + " (" + error_code + ")");
                this.errorBilling(error_code, this.mPurchaseProductId);
            }
        };
        s3eFacebookBilling.prototype.onTransactionRestoreFailed = function ($event) {
            global.EventStats.handle(s3eFacebookBilling, $event);
            this.log("Ошибка обновления транзакций: " + $event.type);
            this.errorBilling(s3eFacebookBilling.OBILLING_ERROR_UNKNOWN);
        };
        s3eFacebookBilling.prototype.onConsumeFailed = function ($event) {
            global.EventStats.handle(s3eFacebookBilling, $event);
            this.log("Ошибка потребления покупки: " + this.mConsumeProductId);
            this.errorBilling(s3eFacebookBilling.OBILLING_ERROR_UNKNOWN);
        };
        s3eFacebookBilling.prototype.errorBilling = function (errorCode, productID) {
            if (productID === void 0) { productID = ""; }
            this.doCallback(this.mBillingCallbacks.get(s3eFacebookBilling.s3eFacebookBillingSetErrorCallback), { productID: productID, errorCode: errorCode, errorMessage: this.errorMessage(errorCode) });
        };
        s3eFacebookBilling.prototype.doCallback = function (cbAddr, response) {
            var dataItem = new global.ByteArray;
            dataItem.writeUTFBytes(JSON.stringify(response));
            dataItem.writeByte(0);
            dataItem.position = 0;
            this.mViewer["doCallback"](cbAddr, dataItem, this.mEmptyData);
        };
        s3eFacebookBilling.prototype.errorMessage = function (errorCode) {
            switch (errorCode) {
                case s3eFacebookBilling.OBILLING_ERROR_UNKNOWN: return "Unknown error";
                case s3eFacebookBilling.OBILLING_PURCHASE_CLIENT_INVALID: return "Client is not allowed to make the payment";
                case s3eFacebookBilling.OBILLING_PURCHASE_CANCELED: return "Client canceled purchase";
                case s3eFacebookBilling.OBILLING_PURCHASE_PAYMENT_INVALID: return "Invalid parameter/purchase ID";
                case s3eFacebookBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED: return "Device is not allowed to make the payment";
                case s3eFacebookBilling.OBILLING_NETWORK_NO_NETWORK: return "No network connection";
                case s3eFacebookBilling.OBILLING_NETWORK_NO_INTERNET: return "No internet connection";
                default: return "Unknown error code";
            }
        };
        s3eFacebookBilling.prototype.exitFullscreen = function () {
            if (this.mViewer && this.mViewer.stage && this.mViewer.stage.displayState != global.StageDisplayState.NORMAL) {
                try {
                    this.mViewer.stage.displayState = global.StageDisplayState.NORMAL;
                }
                catch (error) {
                    global.GLog.print(error.message);
                }
            }
        };
        s3eFacebookBilling.prototype.log = function (message) {
            global.GLog.print(this.TAG + message);
        };
        s3eFacebookBilling.s3eFacebookBillingInit = "s3eFacebookBillingInit";
        s3eFacebookBilling.s3eFacebookBillingSetErrorCallback = "s3eFacebookBillingSetErrorCallback";
        s3eFacebookBilling.s3eFacebookBillingSetPurchasedCallback = "s3eFacebookBillingSetPurchasedCallback";
        s3eFacebookBilling.s3eFacebookBillingSetRestoredCallback = "s3eFacebookBillingSetRestoredCallback";
        s3eFacebookBilling.s3eFacebookBillingSetInfoCallback = "s3eFacebookBillingSetInfoCallback";
        s3eFacebookBilling.s3eFacebookBillingRequestProductsInformation = "s3eFacebookBillingRequestProductsInformation";
        s3eFacebookBilling.s3eFacebookBillingRequestPayment = "s3eFacebookBillingRequestPayment";
        s3eFacebookBilling.s3eFacebookBillingConsumeItem = "s3eFacebookBillingConsumeItem";
        s3eFacebookBilling.s3eFacebookBillingRestoreCompletedTransactions = "s3eFacebookBillingRestoreCompletedTransactions";
        s3eFacebookBilling.OBILLING_ERROR_UNKNOWN = 0;
        s3eFacebookBilling.OBILLING_PURCHASE_CLIENT_INVALID = 1;
        s3eFacebookBilling.OBILLING_PURCHASE_CANCELED = 2;
        s3eFacebookBilling.OBILLING_PURCHASE_PAYMENT_INVALID = 3;
        s3eFacebookBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED = 4;
        s3eFacebookBilling.OBILLING_NETWORK_NO_NETWORK = 5;
        s3eFacebookBilling.OBILLING_NETWORK_NO_INTERNET = 6;
        s3eFacebookBilling.simulate = false;
        return s3eFacebookBilling;
    }(global.EventDispatcher));
    global.s3eFacebookBilling = s3eFacebookBilling;
})(global || (global = {}));
var global;
(function (global) {
    global.WQJSBridge = api.wizq.WQJSBridge;
    global.DisplayObject = flash.display.DisplayObject;
    global.StageDisplayState = flash.display.StageDisplayState;
    global.ErrorEvent = flash.events.ErrorEvent;
    global.Event = flash.events.Event;
    global.EventDispatcher = flash.events.EventDispatcher;
    global.IOErrorEvent = flash.events.IOErrorEvent;
    global.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    global.ExternalInterface = flash.external.ExternalInterface;
    global.URLLoader = flash.net.URLLoader;
    global.URLRequest = flash.net.URLRequest;
    global.URLRequestMethod = flash.net.URLRequestMethod;
    global.URLVariables = flash.net.URLVariables;
    global.ByteArray = flash.utils.ByteArray;
    global.Dictionary = flash.utils.Dictionary;
    global.clearTimeout = flash.utils.clearTimeout;
    global.getTimer = flash.utils.getTimer;
    global.Online = s3eUtils.Online;
    global.Parse = s3eUtils.Parse;
    var s3eWizqBilling = (function (_super) {
        __extends(s3eWizqBilling, _super);
        function s3eWizqBilling(data) {
            if (data === void 0) { data = null; }
            var _this = _super.call(this) || this;
            _this.is_Is3eExtensionBilling = null;
            _this.TAG = "[Wizq Billing] ";
            _this.mWithCallbacksId = 0;
            _this.mIsInited = false;
            _this.mPurchaseIsConsumable = false;
            _this.mLocalMode = false;
            _this.mWaitingDialogTimestamp = 0;
            _this.mWaitingDialog = 0;
            _this.mLocalMode = data == null;
            _this.mEmptyData = new global.ByteArray;
            _this.mPaymentsInfo = new global.Dictionary;
            _this.log("s3eWizqBilling (localMode = " + _this.mLocalMode + ")");
            _this.refresh();
            return _this;
        }
        s3eWizqBilling.prototype.setViewer = function (viewer) {
            this.mViewer = viewer;
        };
        s3eWizqBilling.prototype.setCloud = function (cloud) {
        };
        s3eWizqBilling.prototype.setCloudPush = function (cloud) {
        };
        s3eWizqBilling.prototype.saved = function () {
            if (this.mConsumeDelayed) {
                this.mConsumeProductId = this.mConsumeDelayed;
                var request = new global.URLRequest(this.mServiceURL);
                request.method = global.URLRequestMethod.POST;
                var vars = new global.URLVariables;
                vars.consume = this.mConsumeProductId;
                request.data = vars;
                this.mConsumeLoader.load(request);
                this.mConsumeDelayed = null;
            }
        };
        s3eWizqBilling.prototype.setServiceURL = function (url) {
            this.mServiceURL = url;
            this.mPaymentsLoader = new global.URLLoader;
            this.mPaymentsLoader.addEventListener(global.Event.COMPLETE, function (event) {
                global.EventStats.handle(s3eWizqBilling, event);
                var data = this.mPaymentsLoader.data;
                if (data) {
                    try {
                        var json = JSON.parse(data);
                    }
                    catch (error) {
                        this.log("Ошибка при парсинге списка покупок: " + error.message + ". data = " + data);
                    }
                    if (json && json.data && "length" in json.data) {
                        var map = {};
                        var len = json.data.length;
                        for (var i = 0; i < len; ++i) {
                            var sku = json.data[i].id;
                            if (this.mWaitingDialogMethod) {
                                if (sku == this.mPurchaseProductId) {
                                    this.apiCallback(this.mWaitingDialogMethod, "ok");
                                    if (this.mPurchaseIsConsumable) {
                                        var request = new global.URLRequest(this.mServiceURL);
                                        request.method = global.URLRequestMethod.POST;
                                        var vars = new global.URLVariables;
                                        vars.consume = this.mPurchaseProductId;
                                        request.data = vars;
                                        this.mConsumeLoader.load(request);
                                    }
                                    return;
                                }
                                continue;
                            }
                            this.log("Payment: " + sku);
                            if (!map[sku]) {
                                map[sku] = true;
                                this.doCallback(this.mBillingCallbacks.get(s3eWizqBilling.s3eWizqBillingSetRestoredCallback), { productID: sku });
                                this.log("Покупка восстановлена (" + sku + ")");
                            }
                        }
                    }
                }
                if (this.mWaitingDialogMethod) {
                    this.apiCallback(this.mWaitingDialogMethod, "cancel");
                    return;
                }
                this.log("Обновление транзакций завершено");
            }.bind(this));
            this.mPaymentsLoader.addEventListener(global.IOErrorEvent.IO_ERROR, this.onTransactionRestoreFailed.bind(this));
            this.mPaymentsLoader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, this.onTransactionRestoreFailed.bind(this));
            this.mConsumeLoader = new global.URLLoader;
            this.mConsumeLoader.addEventListener(global.Event.COMPLETE, function (event) {
                global.EventStats.handle(s3eWizqBilling, event);
                var data = this.mConsumeLoader.data;
                if (data) {
                    try {
                        var response = JSON.parse(data);
                        if ("status" in response && response.status.toLowerCase() == "ok") {
                            this.log("Покупка успешно потреблена");
                            return;
                        }
                    }
                    catch (error) {
                        this.log("Ошибка при парсинге списка покупок: " + error.message + ". data = " + data);
                        return;
                    }
                }
                this.log("Ошибка потребления покупки");
            }.bind(this));
            this.mConsumeLoader.addEventListener(global.IOErrorEvent.IO_ERROR, this.onConsumeFailed.bind(this));
            this.mConsumeLoader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, this.onConsumeFailed.bind(this));
        };
        s3eWizqBilling.prototype.s3eCommonIntWithCallback = function (funcName, params, callback) {
            this.mWithCallbacksId++;
            this.mWithCallbacks.set(this.mWithCallbacksId, callback);
            return this.s3eCommonInt(funcName, this.mWithCallbacksId, params);
        };
        s3eWizqBilling.prototype.s3eCommonInt = function (funcName, cbID, params) {
            this.log("s3eCommonInt");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            var dataItem;
            if (params && params.length > 0)
                dataItem = JSON.parse(params);
            if (this.mLocalMode) {
                switch (funcName) {
                    case s3eWizqBilling.s3eWizqBillingRequestProductsInformation:
                    case s3eWizqBilling.s3eWizqBillingConsumeItem:
                    case s3eWizqBilling.s3eWizqBillingRestoreCompletedTransactions:
                        return 0;
                    case s3eWizqBilling.s3eWizqBillingRequestPayment:
                        this.mPurchaseProductId = dataItem.productID;
                        this.apiCallback("showPayment", "cancel");
                        return 0;
                }
            }
            switch (funcName) {
                case s3eWizqBilling.s3eWizqBillingInit:
                    return 1;
                case s3eWizqBilling.s3eWizqBillingSetErrorCallback:
                case s3eWizqBilling.s3eWizqBillingSetPurchasedCallback:
                case s3eWizqBilling.s3eWizqBillingSetRestoredCallback:
                case s3eWizqBilling.s3eWizqBillingSetInfoCallback:
                    this.mBillingCallbacks.set(funcName, cbID);
                    return 0;
                case s3eWizqBilling.s3eWizqBillingRequestProductsInformation:
                    if (!dataItem || (dataItem && !dataItem.products))
                        return 1;
                    if (!global.ExternalInterface.available)
                        return 1;
                    global.skipCachedProductsInformation(dataItem);
                    if (!dataItem.products.length)
                        return 1;
                    for (var _i = 0, _a = dataItem.products; _i < _a.length; _i++) {
                        var url = _a[_i];
                        this.requestInfo(url, function (event) {
                            global.EventStats.handle(s3eWizqBilling, event);
                            var productID = this.onProductInfo(event);
                            if (!productID) {
                                this.log("Не удалось загрузить информацию о продукте: с сервера пришли данные не содержащие ноду 'og:url'");
                                return;
                            }
                            this.doCallback(this.mBillingCallbacks.get(s3eWizqBilling.s3eWizqBillingSetInfoCallback), this.getInfoObject(productID));
                        }.bind(this), function (event) {
                            global.EventStats.handle(s3eWizqBilling, event);
                            this.log("Не удалось загрузить информацию о продукте: " + event.text);
                        }.bind(this));
                    }
                    return 0;
                case s3eWizqBilling.s3eWizqBillingRequestPayment:
                    if (!dataItem || (dataItem && !dataItem.productID)) {
                        this.errorBilling(s3eWizqBilling.OBILLING_PURCHASE_PAYMENT_INVALID);
                        return 1;
                    }
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eWizqBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED, dataItem.productID);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eWizqBilling.OBILLING_NETWORK_NO_INTERNET, dataItem.productID);
                        return 1;
                    }
                    this.mPurchaseProductId = dataItem.productID;
                    this.mPurchaseIsConsumable = dataItem.isConsumable == 1;
                    var item = this.mPaymentsInfo.get(this.mPurchaseProductId);
                    if (!item) {
                        this.requestInfo(this.mPurchaseProductId, function (event) {
                            global.EventStats.handle(s3eWizqBilling, event);
                            var productID = this.onProductInfo(event);
                            if (!productID) {
                                global.EventStats.handle(s3eWizqBilling, event);
                                this.log("Не удалось загрузить информацию о продукте: с сервера пришли данные не содержащие ноду 'og:url'");
                                var error_code = s3eWizqBilling.OBILLING_ERROR_UNKNOWN;
                                this.log("Ошибка покупки: " + this.mPurchaseProductId + " (" + error_code + ")");
                                this.errorBilling(error_code, this.mPurchaseProductId);
                                return;
                            }
                            this.purchase(this.mPaymentsInfo.get(productID));
                        }.bind(this), function (event) {
                            global.EventStats.handle(s3eWizqBilling, event);
                            this.log("Не удалось загрузить информацию о продукте: " + event.text);
                            var error_code = s3eWizqBilling.OBILLING_ERROR_UNKNOWN;
                            this.log("Ошибка покупки: " + this.mPurchaseProductId + " (" + error_code + ")");
                            this.errorBilling(error_code, this.mPurchaseProductId);
                        }.bind(this));
                        return 0;
                    }
                    this.purchase(item);
                    return 0;
                case s3eWizqBilling.s3eWizqBillingConsumeItem:
                    if (!dataItem || (dataItem && !dataItem.productID || dataItem.productID.length == 0)) {
                        this.errorBilling(s3eWizqBilling.OBILLING_PURCHASE_PAYMENT_INVALID);
                        return 1;
                    }
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eWizqBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED, dataItem.productID);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eWizqBilling.OBILLING_NETWORK_NO_INTERNET, dataItem.productID);
                        return 1;
                    }
                    this.mConsumeDelayed = dataItem.productID;
                    return 0;
                case s3eWizqBilling.s3eWizqBillingRestoreCompletedTransactions:
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eWizqBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eWizqBilling.OBILLING_NETWORK_NO_INTERNET);
                        return 1;
                    }
                    this.mPaymentsLoader.load(new global.URLRequest(this.mServiceURL));
                    return 0;
            }
            return -1;
        };
        s3eWizqBilling.prototype.purchase = function (item) {
            this.exitFullscreen();
            global.WQJSBridge.showPayment(item.code, 1, item.price, item.name, item.image, function onPayment(data, error) {
                if (data === void 0) { data = null; }
                if (error === void 0) { error = null; }
                var success = !error;
                if (success) {
                    this.log("Покупка прошла удачно: " + this.mPurchaseProductId);
                    this.doCallback(this.mBillingCallbacks.get(s3eWizqBilling.s3eWizqBillingSetPurchasedCallback), { productID: this.mPurchaseProductId });
                }
                else {
                    var error_code = s3eWizqBilling.OBILLING_PURCHASE_CANCELED;
                    this.log("Ошибка покупки: " + this.mPurchaseProductId + " (" + error_code + ")");
                    this.errorBilling(error_code, this.mPurchaseProductId);
                }
            }.bind(this));
            this.mWaitingDialogMethod = "showPayment";
            this.mWaitingDialogTimestamp = global.getTimer();
        };
        s3eWizqBilling.prototype.requestInfo = function (url, complete, error) {
            if (!url || url == '') {
                error(new global.ErrorEvent(global.ErrorEvent.ERROR, false, false, 'url is undefined'));
                return;
            }
            var loader = new global.URLLoader;
            this.mPaymentsInfo.set(loader, url);
            loader.addEventListener(global.Event.COMPLETE, complete);
            loader.addEventListener(global.IOErrorEvent.IO_ERROR, error);
            loader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, error);
            loader.load(new global.URLRequest('payments/' + url + global.CONFIG.getRev()));
        };
        s3eWizqBilling.prototype.onProductInfo = function (event) {
            var loader = event.target;
            if (!loader.data) {
                return null;
            }
            try {
                var result = new global.XML(loader.data);
            }
            catch (error) {
                this.log(error.message);
                return null;
            }
            var currency = '';
            switch (global.WQJSBridge.wizqPlatform) {
                case 'mobage':
                    currency = 'MC';
                    break;
                case 'mixi':
                    currency = 'mixi';
                    break;
                case 'GMO':
                    currency = 'MC';
                    break;
                default:
                    currency = 'MC';
                    break;
            }
            var productID = result.meta.$(function (n) { return n.$property == "og:url"; }).$content;
            var title = result.meta.$(function (n) { return n.$property == "og:title"; }).$content;
            var description = result.meta.$(function (n) { return n.$property == "og:description"; }).$content;
            var image = result.meta.$(function (n) { return n.$property == "og:image"; }).$content;
            try {
                var index_currency = 0;
                for (index_currency = 0; index_currency < result.meta.length(); index_currency++) {
                    if (result.meta[index_currency].$content == currency) {
                        break;
                    }
                }
                var price = Math.round(parseFloat(result.meta[index_currency - 1].$content));
            }
            catch (e) {
                this.log("Не удалось достать цену продукта в необходимой валюте");
                return null;
            }
            var priceStr = price + " " + currency;
            this.mPaymentsInfo.set(productID, {
                code: productID,
                price: price,
                priceStr: priceStr,
                currency: currency,
                name: title,
                description: description,
                image: image
            });
            this.log("Информация о покупке: price=" + price + ", priceStr=" + priceStr + ", currency=OK, id=" + productID);
            return productID;
        };
        s3eWizqBilling.prototype.getInfoObject = function (productID) {
            var info = this.mPaymentsInfo.get(productID);
            if (!info) {
                return {
                    productID: productID
                };
            }
            return {
                productID: info.code,
                mPrice: info.price,
                mPriceStr: info.priceStr,
                mCurrency: info.currency,
                mIsDiscount: false
            };
        };
        s3eWizqBilling.prototype.s3eCommonStr = function (funcName, cbID, params) {
            return "";
        };
        s3eWizqBilling.prototype.s3eCommonData = function (funcName, cbID, params) {
            return this.mEmptyData;
        };
        s3eWizqBilling.prototype.refresh = function () {
            this.mWithCallbacks = new global.Dictionary;
            this.mBillingCallbacks = new global.Dictionary;
        };
        s3eWizqBilling.prototype.activate = function () {
        };
        s3eWizqBilling.prototype.mouseDown = function () { };
        s3eWizqBilling.prototype.deactivate = function () { };
        s3eWizqBilling.prototype.exit = function () { };
        s3eWizqBilling.prototype.apiCallback = function (method, result) {
            if (method == "showPayment") {
                this.clearWaitingDialog();
                this.dispatchEvent(new global.Event(global.Event.ACTIVATE));
                if (result && result == "ok") {
                    this.log("Покупка прошла удачно: " + this.mPurchaseProductId);
                    this.doCallback(this.mBillingCallbacks.get(s3eWizqBilling.s3eWizqBillingSetPurchasedCallback), { productID: this.mPurchaseProductId });
                }
                else {
                    var error_code = s3eWizqBilling.OBILLING_PURCHASE_CANCELED;
                    this.log("Ошибка покупки: " + this.mPurchaseProductId + " (" + error_code + ")");
                    this.errorBilling(error_code, this.mPurchaseProductId);
                }
            }
        };
        s3eWizqBilling.prototype.onTransactionRestoreFailed = function ($event) {
            global.EventStats.handle(s3eWizqBilling, $event);
            this.log("Ошибка обновления транзакций: " + $event.type + ("text" in $event ? ", " + $event["text"] : ""));
            this.errorBilling(s3eWizqBilling.OBILLING_ERROR_UNKNOWN);
        };
        s3eWizqBilling.prototype.onConsumeFailed = function ($event) {
            global.EventStats.handle(s3eWizqBilling, $event);
            this.log("Ошибка потребления покупки: " + this.mConsumeProductId);
            this.errorBilling(s3eWizqBilling.OBILLING_ERROR_UNKNOWN);
        };
        s3eWizqBilling.prototype.errorBilling = function (errorCode, productID) {
            if (productID === void 0) { productID = ""; }
            this.doCallback(this.mBillingCallbacks.get(s3eWizqBilling.s3eWizqBillingSetErrorCallback), { productID: productID, errorCode: errorCode, errorMessage: this.errorMessage(errorCode) });
        };
        s3eWizqBilling.prototype.doCallback = function (cbAddr, response) {
            var dataItem = new global.ByteArray;
            dataItem.writeUTFBytes(JSON.stringify(response));
            dataItem.writeByte(0);
            dataItem.position = 0;
            this.mViewer["doCallback"](cbAddr, dataItem, this.mEmptyData);
        };
        s3eWizqBilling.prototype.errorMessage = function (errorCode) {
            switch (errorCode) {
                case s3eWizqBilling.OBILLING_ERROR_UNKNOWN: return "Unknown error";
                case s3eWizqBilling.OBILLING_PURCHASE_CLIENT_INVALID: return "Client is not allowed to make the payment";
                case s3eWizqBilling.OBILLING_PURCHASE_CANCELED: return "Client canceled purchase";
                case s3eWizqBilling.OBILLING_PURCHASE_PAYMENT_INVALID: return "Invalid parameter/purchase ID";
                case s3eWizqBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED: return "Device is not allowed to make the payment";
                case s3eWizqBilling.OBILLING_NETWORK_NO_NETWORK: return "No network connection";
                case s3eWizqBilling.OBILLING_NETWORK_NO_INTERNET: return "No internet connection";
                default: return "Unknown error code";
            }
        };
        s3eWizqBilling.prototype.clearWaitingDialog = function () {
            this.mWaitingDialogMethod = null;
            this.mWaitingDialogTimestamp = 0;
            global.clearTimeout(this.mWaitingDialog);
        };
        s3eWizqBilling.prototype.exitFullscreen = function () {
            if (this.mViewer && this.mViewer.stage && this.mViewer.stage.displayState != global.StageDisplayState.NORMAL) {
                try {
                    this.mViewer.stage.displayState = global.StageDisplayState.NORMAL;
                }
                catch (error) {
                    global.GLog.print(error.message);
                }
            }
        };
        s3eWizqBilling.prototype.log = function (message) {
            global.GLog.print(this.TAG + message);
        };
        s3eWizqBilling.s3eWizqBillingInit = "s3eWizqBillingInit";
        s3eWizqBilling.s3eWizqBillingSetErrorCallback = "s3eWizqBillingSetErrorCallback";
        s3eWizqBilling.s3eWizqBillingSetPurchasedCallback = "s3eWizqBillingSetPurchasedCallback";
        s3eWizqBilling.s3eWizqBillingSetRestoredCallback = "s3eWizqBillingSetRestoredCallback";
        s3eWizqBilling.s3eWizqBillingSetInfoCallback = "s3eWizqBillingSetInfoCallback";
        s3eWizqBilling.s3eWizqBillingRequestProductsInformation = "s3eWizqBillingRequestProductsInformation";
        s3eWizqBilling.s3eWizqBillingRequestPayment = "s3eWizqBillingRequestPayment";
        s3eWizqBilling.s3eWizqBillingConsumeItem = "s3eWizqBillingConsumeItem";
        s3eWizqBilling.s3eWizqBillingRestoreCompletedTransactions = "s3eWizqBillingRestoreCompletedTransactions";
        s3eWizqBilling.OBILLING_ERROR_UNKNOWN = 0;
        s3eWizqBilling.OBILLING_PURCHASE_CLIENT_INVALID = 1;
        s3eWizqBilling.OBILLING_PURCHASE_CANCELED = 2;
        s3eWizqBilling.OBILLING_PURCHASE_PAYMENT_INVALID = 3;
        s3eWizqBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED = 4;
        s3eWizqBilling.OBILLING_NETWORK_NO_NETWORK = 5;
        s3eWizqBilling.OBILLING_NETWORK_NO_INTERNET = 6;
        return s3eWizqBilling;
    }(global.EventDispatcher));
    global.s3eWizqBilling = s3eWizqBilling;
})(global || (global = {}));
var global;
(function (global) {
    global.MD5 = com.adobe.crypto.MD5;
    global.DisplayObject = flash.display.DisplayObject;
    global.StageDisplayState = flash.display.StageDisplayState;
    global.ErrorEvent = flash.events.ErrorEvent;
    global.Event = flash.events.Event;
    global.EventDispatcher = flash.events.EventDispatcher;
    global.IOErrorEvent = flash.events.IOErrorEvent;
    global.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    global.ExternalInterface = flash.external.ExternalInterface;
    global.URLLoader = flash.net.URLLoader;
    global.URLRequest = flash.net.URLRequest;
    global.URLRequestMethod = flash.net.URLRequestMethod;
    global.URLVariables = flash.net.URLVariables;
    global.ByteArray = flash.utils.ByteArray;
    global.Dictionary = flash.utils.Dictionary;
    global.clearTimeout = flash.utils.clearTimeout;
    global.getTimer = flash.utils.getTimer;
    global.setTimeout = flash.utils.setTimeout;
    global.Online = s3eUtils.Online;
    global.Parse = s3eUtils.Parse;
    global.HTMLUtils = s3eUtils.HTMLUtils;
    var s3eFacebookInstantBilling = (function (_super) {
        __extends(s3eFacebookInstantBilling, _super);
        function s3eFacebookInstantBilling(data) {
            var _this = _super.call(this) || this;
            _this.is_Is3eExtensionBilling = null;
            _this.TAG = "[FacebookInstant Billing] ";
            _this.mWithCallbacksId = 0;
            _this.mIsInited = false;
            _this.mPurchaseIsConsumable = false;
            _this.mLocalMode = false;
            _this.mWaitingDialogTimestamp = 0;
            _this.mWaitingDialog = 0;
            _this.mSupportedCurrencies = {
                'USD': { symbol: '&#36;', pre: true },
                'SGD': { symbol: 'S&#36;', pre: true },
                'RON': { symbol: 'LEU', pre: false },
                'EUR': { symbol: '&#8364;', pre: true },
                'TRY': { symbol: '&#8378;', pre: true },
                'SEK': { symbol: 'kr', pre: false },
                'ZAR': { symbol: 'R', pre: true },
                'BHD': { symbol: 'BD', pre: true },
                'HKD': { symbol: 'HK&#36;', pre: true },
                'CHF': { symbol: 'Fr.', pre: false },
                'NIO': { symbol: 'C&#36;', pre: true },
                'JPY': { symbol: '&#165;', pre: true },
                'ISK': { symbol: 'kr;', pre: false },
                'TWD': { symbol: 'NT&#36;', pre: true },
                'NZD': { symbol: 'NZ&#36;', pre: true },
                'CZK': { symbol: 'K&#269;', pre: true },
                'AUD': { symbol: 'A&#36;', pre: true },
                'THB': { symbol: '&#3647;', pre: true },
                'BOB': { symbol: 'Bs', pre: true },
                'BRL': { symbol: 'B&#36;', pre: true },
                'MXN': { symbol: 'Mex&#36;', pre: true },
                'ILS': { symbol: '&#8362;', pre: true },
                'JOD': { symbol: 'JD', pre: false },
                'HNL': { symbol: 'L', pre: true },
                'MOP': { symbol: 'MOP&#36;', pre: true },
                'COP': { symbol: '&#36;', pre: true },
                'UYU': { symbol: '&#36;U', pre: true },
                'CRC': { symbol: '&#8353;', pre: true },
                'DKK': { symbol: 'kr', pre: false },
                'QAR': { symbol: 'QR', pre: false },
                'PYG': { symbol: '&#8370;', pre: true },
                'EGP': { symbol: 'E&#163;', pre: true },
                'CAD': { symbol: 'C&#36;', pre: true },
                'LVL': { symbol: 'Ls', pre: true },
                'INR': { symbol: '&#8377;', pre: true },
                'LTL': { symbol: 'Lt;', pre: false },
                'KRW': { symbol: '&#8361;', pre: true },
                'GTQ': { symbol: 'Q', pre: true },
                'AED': { symbol: 'AED', pre: false },
                'VEF': { symbol: 'Bs.F.', pre: true },
                'SAR': { symbol: 'SR', pre: false },
                'NOK': { symbol: 'kr', pre: false },
                'UAH': { symbol: '&#8372;', pre: true },
                'DOP': { symbol: 'RD&#36;', pre: true },
                'CNY': { symbol: '&#165;', pre: true },
                'BGN': { symbol: 'lev', pre: false },
                'ARS': { symbol: '&#36;', pre: true },
                'PLN': { symbol: 'z&#322;', pre: false },
                'GBP': { symbol: '&#163;', pre: true },
                'PEN': { symbol: 'S/.', pre: false },
                'PHP': { symbol: 'PhP', pre: false },
                'VND': { symbol: '&#8363;', pre: false },
                'RUB': { symbol: 'py&#1073;', pre: false },
                'RSD': { symbol: 'RSD', pre: false },
                'HUF': { symbol: 'Ft', pre: false },
                'MYR': { symbol: 'RM', pre: true },
                'CLP': { symbol: '&#36;', pre: true },
                'HRK': { symbol: 'kn', pre: false },
                'IDR': { symbol: 'Rp', pre: true }
            };
            _this.mLocalMode = false;
            _this.mEmptyData = new global.ByteArray;
            _this.mPaymetsInfo = new global.Dictionary;
            _this.log("s3eFacebookInstantBilling (localMode = " + _this.mLocalMode + ")");
            _this.refresh();
            return _this;
        }
        s3eFacebookInstantBilling.prototype.setViewer = function (viewer) {
            this.mViewer = viewer;
        };
        s3eFacebookInstantBilling.prototype.setCloud = function (cloud) {
        };
        s3eFacebookInstantBilling.prototype.setCloudPush = function (cloud) {
        };
        s3eFacebookInstantBilling.prototype.saved = function () {
            if (this.mConsumeDelayed) {
                this.mConsumeProductId = this.mConsumeDelayed;
                this.log("Ошибка потребления покупки: " + this.mConsumeProductId);
                this.errorBilling(s3eFacebookInstantBilling.OBILLING_ERROR_UNKNOWN);
                this.mConsumeDelayed = null;
            }
        };
        s3eFacebookInstantBilling.prototype.setServiceURL = function (url) {
        };
        s3eFacebookInstantBilling.prototype.s3eCommonIntWithCallback = function (funcName, params, callback) {
            this.mWithCallbacksId++;
            this.mWithCallbacks.set(this.mWithCallbacksId, callback);
            return this.s3eCommonInt(funcName, this.mWithCallbacksId, params);
        };
        s3eFacebookInstantBilling.prototype.s3eCommonInt = function (funcName, cbID, params) {
            this.log("s3eCommonInt");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            var dataItem;
            if (params && params.length > 0)
                dataItem = JSON.parse(params);
            if (this.mLocalMode) {
                switch (funcName) {
                    case s3eFacebookInstantBilling.s3eFacebookInstantBillingRequestProductsInformation:
                    case s3eFacebookInstantBilling.s3eFacebookInstantBillingConsumeItem:
                    case s3eFacebookInstantBilling.s3eFacebookInstantBillingRestoreCompletedTransactions:
                        return 0;
                    case s3eFacebookInstantBilling.s3eFacebookInstantBillingRequestPayment:
                        this.mPurchaseProductId = dataItem.productID;
                        this.log("Покупка прошла удачно: " + this.mPurchaseProductId);
                        this.doCallback(this.mBillingCallbacks.get(s3eFacebookInstantBilling.s3eFacebookInstantBillingSetPurchasedCallback), { productID: this.mPurchaseProductId });
                        return 0;
                }
            }
            switch (funcName) {
                case s3eFacebookInstantBilling.s3eFacebookInstantBillingInit:
                    return 1;
                case s3eFacebookInstantBilling.s3eFacebookInstantBillingSetErrorCallback:
                case s3eFacebookInstantBilling.s3eFacebookInstantBillingSetPurchasedCallback:
                case s3eFacebookInstantBilling.s3eFacebookInstantBillingSetRestoredCallback:
                case s3eFacebookInstantBilling.s3eFacebookInstantBillingSetInfoCallback:
                    this.mBillingCallbacks.set(funcName, cbID);
                    return 0;
                case s3eFacebookInstantBilling.s3eFacebookInstantBillingRequestProductsInformation:
                    if (!dataItem || (dataItem && !dataItem.products))
                        return 1;
                    if (!global.ExternalInterface.available)
                        return 1;
                    global.skipCachedProductsInformation(dataItem);
                    if (!dataItem.products.length)
                        return 1;
                    return 0;
                case s3eFacebookInstantBilling.s3eFacebookInstantBillingRequestPayment:
                    if (!dataItem || (dataItem && !dataItem.productID)) {
                        this.errorBilling(s3eFacebookInstantBilling.OBILLING_PURCHASE_PAYMENT_INVALID);
                        return 1;
                    }
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eFacebookInstantBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED, dataItem.productID);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eFacebookInstantBilling.OBILLING_NETWORK_NO_INTERNET, dataItem.productID);
                        return 1;
                    }
                    this.mPurchaseProductId = dataItem.productID;
                    this.mPurchaseIsConsumable = dataItem.isConsumable == 1;
                    this.purchase(dataItem.productID);
                    return 0;
                case s3eFacebookInstantBilling.s3eFacebookInstantBillingConsumeItem:
                    if (!dataItem || (dataItem && !dataItem.productID || dataItem.productID.length == 0)) {
                        this.errorBilling(s3eFacebookInstantBilling.OBILLING_PURCHASE_PAYMENT_INVALID);
                        return 1;
                    }
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eFacebookInstantBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED, dataItem.productID);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eFacebookInstantBilling.OBILLING_NETWORK_NO_INTERNET, dataItem.productID);
                        return 1;
                    }
                    this.mConsumeDelayed = dataItem.productID;
                    return 0;
                case s3eFacebookInstantBilling.s3eFacebookInstantBillingRestoreCompletedTransactions:
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eFacebookInstantBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eFacebookInstantBilling.OBILLING_NETWORK_NO_INTERNET);
                        return 1;
                    }
                    this.log("Ошибка восстановления покупки: " + error);
                    this.errorBilling(s3eFacebookInstantBilling.OBILLING_ERROR_UNKNOWN);
                    return 0;
            }
            return -1;
        };
        s3eFacebookInstantBilling.prototype.purchase = function (productID) {
            this.exitFullscreen();
            this.log("Ошибка покупки: " + error);
            this.errorBilling(error_code, this.mPurchaseProductId);
        };
        s3eFacebookInstantBilling.prototype.getInfoObject = function (productID) {
            var info = this.mPaymetsInfo.get(productID);
            if (!info) {
                return {
                    productID: productID
                };
            }
            return {
                productID: info.code,
                mPrice: info.price,
                mPriceStr: info.priceStr,
                mCurrency: info.currency,
                mIsDiscount: false
            };
        };
        s3eFacebookInstantBilling.prototype.s3eCommonStr = function (funcName, cbID, params) {
            return "";
        };
        s3eFacebookInstantBilling.prototype.s3eCommonData = function (funcName, cbID, params) {
            return this.mEmptyData;
        };
        s3eFacebookInstantBilling.prototype.refresh = function () {
            this.mWithCallbacks = new global.Dictionary;
            this.mBillingCallbacks = new global.Dictionary;
        };
        s3eFacebookInstantBilling.prototype.activate = function () {
        };
        s3eFacebookInstantBilling.prototype.mouseDown = function () { };
        s3eFacebookInstantBilling.prototype.deactivate = function () { };
        s3eFacebookInstantBilling.prototype.exit = function () { };
        s3eFacebookInstantBilling.prototype.errorBilling = function (errorCode, productID) {
            if (productID === void 0) { productID = ""; }
            this.doCallback(this.mBillingCallbacks.get(s3eFacebookInstantBilling.s3eFacebookInstantBillingSetErrorCallback), { productID: productID, errorCode: errorCode, errorMessage: this.errorMessage(errorCode) });
        };
        s3eFacebookInstantBilling.prototype.doCallback = function (cbAddr, response) {
            var dataItem = new global.ByteArray;
            dataItem.writeUTFBytes(JSON.stringify(response));
            dataItem.writeByte(0);
            dataItem.position = 0;
            this.mViewer["doCallback"](cbAddr, dataItem, this.mEmptyData);
        };
        s3eFacebookInstantBilling.prototype.errorMessage = function (errorCode) {
            switch (errorCode) {
                case s3eFacebookInstantBilling.OBILLING_ERROR_UNKNOWN: return "Unknown error";
                case s3eFacebookInstantBilling.OBILLING_PURCHASE_CLIENT_INVALID: return "Client is not allowed to make the payment";
                case s3eFacebookInstantBilling.OBILLING_PURCHASE_CANCELED: return "Client canceled purchase";
                case s3eFacebookInstantBilling.OBILLING_PURCHASE_PAYMENT_INVALID: return "Invalid parameter/purchase ID";
                case s3eFacebookInstantBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED: return "Device is not allowed to make the payment";
                case s3eFacebookInstantBilling.OBILLING_NETWORK_NO_NETWORK: return "No network connection";
                case s3eFacebookInstantBilling.OBILLING_NETWORK_NO_INTERNET: return "No internet connection";
                default: return "Unknown error code";
            }
        };
        s3eFacebookInstantBilling.prototype.exitFullscreen = function () {
            if (this.mViewer && this.mViewer.stage && this.mViewer.stage.displayState != global.StageDisplayState.NORMAL) {
                try {
                    this.mViewer.stage.displayState = global.StageDisplayState.NORMAL;
                }
                catch (error) {
                    global.GLog.print(error.message);
                }
            }
        };
        s3eFacebookInstantBilling.prototype.log = function (message) {
            global.GLog.print(this.TAG + message);
        };
        s3eFacebookInstantBilling.s3eFacebookInstantBillingInit = "s3eFacebookInstantBillingInit";
        s3eFacebookInstantBilling.s3eFacebookInstantBillingSetErrorCallback = "s3eFacebookInstantBillingSetErrorCallback";
        s3eFacebookInstantBilling.s3eFacebookInstantBillingSetPurchasedCallback = "s3eFacebookInstantBillingSetPurchasedCallback";
        s3eFacebookInstantBilling.s3eFacebookInstantBillingSetRestoredCallback = "s3eFacebookInstantBillingSetRestoredCallback";
        s3eFacebookInstantBilling.s3eFacebookInstantBillingSetInfoCallback = "s3eFacebookInstantBillingSetInfoCallback";
        s3eFacebookInstantBilling.s3eFacebookInstantBillingRequestProductsInformation = "s3eFacebookInstantBillingRequestProductsInformation";
        s3eFacebookInstantBilling.s3eFacebookInstantBillingRequestPayment = "s3eFacebookInstantBillingRequestPayment";
        s3eFacebookInstantBilling.s3eFacebookInstantBillingConsumeItem = "s3eFacebookInstantBillingConsumeItem";
        s3eFacebookInstantBilling.s3eFacebookInstantBillingRestoreCompletedTransactions = "s3eFacebookInstantBillingRestoreCompletedTransactions";
        s3eFacebookInstantBilling.OBILLING_ERROR_UNKNOWN = 0;
        s3eFacebookInstantBilling.OBILLING_PURCHASE_CLIENT_INVALID = 1;
        s3eFacebookInstantBilling.OBILLING_PURCHASE_CANCELED = 2;
        s3eFacebookInstantBilling.OBILLING_PURCHASE_PAYMENT_INVALID = 3;
        s3eFacebookInstantBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED = 4;
        s3eFacebookInstantBilling.OBILLING_NETWORK_NO_NETWORK = 5;
        s3eFacebookInstantBilling.OBILLING_NETWORK_NO_INTERNET = 6;
        return s3eFacebookInstantBilling;
    }(global.EventDispatcher));
    global.s3eFacebookInstantBilling = s3eFacebookInstantBilling;
})(global || (global = {}));
var global;
(function (global) {
    global.WQJSBridge = api.wizq.WQJSBridge;
    global.DisplayObject = flash.display.DisplayObject;
    global.StageDisplayState = flash.display.StageDisplayState;
    global.ErrorEvent = flash.events.ErrorEvent;
    global.Event = flash.events.Event;
    global.EventDispatcher = flash.events.EventDispatcher;
    global.IOErrorEvent = flash.events.IOErrorEvent;
    global.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    global.URLLoader = flash.net.URLLoader;
    global.URLLoaderDataFormat = flash.net.URLLoaderDataFormat;
    global.URLRequest = flash.net.URLRequest;
    global.ByteArray = flash.utils.ByteArray;
    global.Dictionary = flash.utils.Dictionary;
    global.clearTimeout = flash.utils.clearTimeout;
    global.getTimer = flash.utils.getTimer;
    global.setTimeout = flash.utils.setTimeout;
    global.FbDialogRequest = s3eSocial.FbDialogRequest;
    global.FbGraphRequest = s3eSocial.FbGraphRequest;
    global.AppIcf = s3eUtils.AppIcf;
    global.Parse = s3eUtils.Parse;
    var s3eWizq = (function (_super) {
        __extends(s3eWizq, _super);
        function s3eWizq(appId) {
            if (appId === void 0) { appId = null; }
            var _this = _super.call(this) || this;
            _this.is_Is3eExtensionSocial = null;
            _this.TAG = "[WIZQ] ";
            _this.USER_CANCELED_CODE = 4201;
            _this.USER_UPDATE_INTERVAL = 5 * 60 * 1000;
            _this.DEFAULT_TABLE_ID = "Wizq";
            _this.USID_PREFIX = "wq_";
            _this.TABLE_ID = _this.DEFAULT_TABLE_ID;
            _this.mIsInited = false;
            _this.mIsLogged = false;
            _this.mParseUsersTimestamp = 0;
            _this.mCallbacksId = 0;
            _this.mWaitingDialog = 0;
            _this.mAppId = appId;
            _this.mParseUsers = new global.Dictionary;
            _this.mEmptyData = new global.ByteArray;
            _this.refresh();
            return _this;
        }
        s3eWizq.prototype.setViewer = function (viewer) {
            this.mViewer = viewer;
        };
        s3eWizq.prototype.setCloud = function (cloud) {
            this.mCloud = cloud;
        };
        s3eWizq.prototype.setCloudPush = function (cloud) {
            this.mCloudPush = cloud;
        };
        Object.defineProperty(s3eWizq.prototype, "appId", {
            get: function () {
                return this.mAppId;
            },
            enumerable: true,
            configurable: true
        });
        s3eWizq.prototype.setLeaderboardTableId = function (id) {
            this.TABLE_ID = id;
        };
        s3eWizq.prototype.s3eCommonIntWithCallback = function (funcName, params, callback) {
            this.mCallbacksId++;
            this.mCallbacks.set(this.mCallbacksId, callback);
            return this.s3eCommonInt(funcName, this.mCallbacksId, params);
        };
        s3eWizq.prototype.s3eCommonInt = function (funcName, cbID, params) {
            this.log("s3eCommonInt");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            if (params && params.length > 0)
                var dataItem = JSON.parse(params);
            switch (funcName) {
                case s3eWizq.keyInit:
                    return this.init(dataItem.appId, dataItem.appVersion);
                case s3eWizq.keyCheckLogin:
                    return int(this.checkLogin(dataItem));
                case s3eWizq.keyLogin:
                    return int(this.login(dataItem.sessionID, dataItem.permissions, cbID));
                case s3eWizq.keyLogout:
                    return 0;
                case s3eWizq.keyInitFBRequest_WithGraphPath:
                    return this.initFBGraphRequest(dataItem.graphPath, dataItem.httpMethod);
                case s3eWizq.keyFBRequest_AddParamString:
                case s3eWizq.keyFBRequest_AddParamNumber:
                case s3eWizq.keyFBRequest_AddParamStringInternal:
                    return this.updateFBGraphRequestWithParams(dataItem.requestID, dataItem.name, dataItem.value);
                case s3eWizq.keyFBRequest_Send:
                    return this.sendFBGraphRequest(dataItem.requestID, cbID);
                case s3eWizq.keyFBRequest_Delete:
                    return this.deleteFBGraphRequest(dataItem.requestID);
                case s3eWizq.keyFBDialog_WithAction:
                    return this.initFBDialogWithAction(dataItem.action);
                case s3eWizq.keyFBDialog_AddParamString:
                case s3eWizq.keyFBDialog_AddParamNumber:
                case s3eWizq.keyFBDialog_AddParamStringInternal:
                    return this.updateFBDialogActionWithParams(dataItem.dialogID, dataItem.name, dataItem.value);
                case s3eWizq.keyFBDialog_Show:
                    return this.showFBDialogAction(dataItem.dialogID, cbID);
                case s3eWizq.keyFBDialog_Delete:
                    return this.deleteFBDialogAction(dataItem.dialogID);
                case s3eWizq.keyFBRequest_ErrorCode:
                    return this.getFBRequest_ErrorCode(dataItem.requestID);
                case s3eWizq.keyFBDialog_ErrorCode:
                    return this.getFBDialog_ErrorCode(dataItem.dialogID);
                case s3eWizq.keyFBSession_ReauthorizeWithPublishPermissions:
                case s3eWizq.keyFBSession_ReauthorizeWithReadPermissions:
                    return this.ReauthorizeWithPermissions(dataItem.sessionID, dataItem.permissions, dataItem.userText, cbID);
            }
            return -1;
        };
        s3eWizq.prototype.s3eCommonStr = function (funcName, cbID, params) {
            this.log("s3eCommonStr");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            switch (funcName) {
                case s3eWizq.keyFBGetAppID:
                    return this.appId;
            }
            return "";
        };
        s3eWizq.prototype.s3eCommonData = function (funcName, cbID, params) {
            this.log("s3eCommonData");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            if (params && params.length > 0)
                var dataItem = JSON.parse(params);
            switch (funcName) {
                case s3eWizq.keyFBRequest_ErrorString:
                    return this.getFBRequest_ErrorString(dataItem.requestID);
                case s3eWizq.keyFBRequest_ResponseRaw:
                    return this.getResponseRaw(dataItem.requestID);
                case s3eWizq.keyFBSession_AccessToken:
                    return this.getFBAccessToken();
                case s3eWizq.keyFBDialog_DidCompleteWithUrl:
                    return this.getResponceFbDialogRequest(dataItem.dialogID);
            }
            return this.mEmptyData;
        };
        s3eWizq.prototype.refresh = function () {
            this.mRequests = new global.Dictionary;
            this.mCallbacks = new global.Dictionary;
            this.mGraphRequestsList = new Array;
            this.mFbDialogRequestsList = new Array;
        };
        s3eWizq.prototype.activate = function () {
        };
        s3eWizq.prototype.mouseDown = function () { };
        s3eWizq.prototype.deactivate = function () { };
        s3eWizq.prototype.exit = function () { };
        s3eWizq.prototype.init = function (appID, appVersion) {
            this.log("Call init function");
            if (!this.mIsInited) {
                this.mVersionMain = global.AppIcf.read(s3eWizq.ICF_GAME, "VersionMain");
                this.mVersionGraphic = global.AppIcf.read(s3eWizq.ICF_GAME, "VersionGraphic");
                this.mVersionLogic = global.AppIcf.read(s3eWizq.ICF_GAME, "VersionLogic");
                this.mMarket = global.AppIcf.read(s3eWizq.ICF_GAME, "Market");
                this.mAppFacebookId = appID;
                this.mAppVersion = appVersion;
                this.mIsInited = true;
                this.log("Init wizq with appId = " + this.mAppId + " with app version = " + appVersion + " with facebookId = " + this.mAppFacebookId);
            }
            return 0;
        };
        s3eWizq.prototype.checkLogin = function (session) {
            if (session === void 0) { session = null; }
            this.log("Call checklogin function");
            return this.mIsInited && this.mIsLogged;
        };
        s3eWizq.prototype.login = function (sessionId, permissions, callbackKey) {
            this.mCurrentRequestKey = s3eWizq.keyLogin;
            this.mRequests.set(s3eWizq.keyLogin, new Request(callbackKey));
            this.log("Call login function");
            global.WQJSBridge.initialize("appkey");
            if (this.checkLogin()) {
                this.log("Already login");
                this.mIsLogged = true;
                this.executeRequestByKey(s3eWizq.keyLogin, true, { status: 0 });
                return 0;
            }
            else {
                this.log("Need auth");
                this.log("Auth with permissions = " + permissions);
                global.WQJSBridge.getCurrentUser(me_getCurrentUserID.bind(this));
                function me_getCurrentUserID(userWQID, error) {
                    if (error === void 0) { error = null; }
                    if (error) {
                        onErrorConnection.bind(this)();
                    }
                    global.WQJSBridge.getInfo([userWQID.toString()], me_getCurrentUser.bind(this));
                    function me_getCurrentUser(userWQ, error) {
                        if (error === void 0) { error = null; }
                        if (error) {
                            onErrorConnection.bind(this)();
                        }
                        for (var obj in userWQ) {
                            if (obj == '__vanilla__sort') {
                                continue;
                            }
                            this.mOkMe = this.wquser2fbpureID(userWQ[obj]);
                        }
                        this.mIsLogged = true;
                        this.executeRequestByKey(s3eWizq.keyLogin, true, { status: 0 });
                    }
                }
                function onErrorConnection() {
                    if ("showLoadingError" in this.mViewer) {
                        this.mViewer["showLoadingError"]("login");
                    }
                    return;
                }
                return 0;
            }
        };
        s3eWizq.prototype.to2recipients = function (to) {
            var recipients = [];
            for (var _i = 0, to_1 = to; _i < to_1.length; _i++) {
                var usid = to_1[_i];
                recipients.push({ usid: this.USID_PREFIX + usid });
            }
            return recipients;
        };
        s3eWizq.prototype.arrayToUrlParams = function (dataItem) {
            var str = "";
            if (dataItem)
                for (var i = 0; i < dataItem.length; ++i)
                    str += "?to[" + i + "]=" + dataItem[i];
            return str;
        };
        s3eWizq.prototype.initFBGraphRequest = function (path, httpMethod) {
            this.mGraphRequestsList.push(new global.FbGraphRequest(path, httpMethod));
            return this.mGraphRequestsList.length - 1;
        };
        s3eWizq.prototype.updateFBGraphRequestWithParams = function (requestID, name, value) {
            try {
                this.mGraphRequestsList[requestID].setParam(name, value);
                return 0;
            }
            catch (e) { }
            return 1;
        };
        s3eWizq.prototype.sendFBGraphRequest = function (requestID, callbackKey) {
            this.mCurrentRequestKey = s3eWizq.keyFBRequest_Send;
            this.mRequests.set(this.mCurrentRequestKey, new Request(callbackKey));
            try {
                var request = this.mGraphRequestsList[requestID];
                this.log("request: path = " + request.requestPath + ", method = " + request.requestHttpMethod);
                if (request.requestHttpMethod == "DELETE") {
                    this.mCloud.Call("clear", { request: { objectId: request.requestPath } }, function (data) {
                        if (data === void 0) { data = null; }
                        this.onCallbackSendGraphRequest("ok");
                    }.bind(this), function (data) {
                        if (data === void 0) { data = null; }
                        this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                    }.bind(this));
                    return 0;
                }
                if (request.requestPath == "me") {
                    global.WQJSBridge.getCurrentUser(me_getCurrentUserID.bind(this));
                    function me_getCurrentUserID(userWQID) {
                        global.WQJSBridge.getInfo([userWQID.toString()], me_getCurrentUser.bind(this));
                        function me_getCurrentUser(userWQ) {
                            for (var obj in userWQ) {
                                if (obj == '__vanilla__sort') {
                                    continue;
                                }
                                userWQ = this.wquser2fb(userWQ[obj]);
                            }
                            this.onCallbackSendGraphRequest(userWQ);
                        }
                    }
                    return 0;
                }
                if (request.requestPath == "me/friends") {
                    global.WQJSBridge.getAppFriends(meFriends_getAppFriends.bind(this));
                    function meFriends_getAppFriends(appFriends, error) {
                        if (error === void 0) { error = null; }
                        var result = [];
                        if (error) {
                            this.onCallbackSendGraphRequest(null, { error: { type: error } });
                            return;
                        }
                        var appUIDS = [];
                        for (var str in appFriends) {
                            if (str == '__vanilla__sort') {
                                continue;
                            }
                            appUIDS.push(appFriends[str]);
                        }
                        if (!appFriends)
                            appFriends = { uids: [] };
                        global.WQJSBridge.getInfo(appUIDS, meFriends_getInfo.bind(this));
                        function meFriends_getInfo(friendsInfo, error) {
                            if (error === void 0) { error = null; }
                            if (error) {
                                this.onCallbackSendGraphRequest(null, { error: { type: error } });
                                return;
                            }
                            for (var obj in friendsInfo) {
                                if (obj == '__vanilla__sort') {
                                    continue;
                                }
                                result.push(this.wquser2fb(friendsInfo[obj]));
                            }
                            this.onCallbackSendGraphRequest(result, null);
                        }
                    }
                    return 0;
                }
                if (request.requestPath == "me/invitable_friends") {
                    global.WQJSBridge.getAllFriends(meInvitableFriends_onGetAllFriends.bind(this));
                    function meInvitableFriends_onGetAllFriends(friends, error) {
                        if (error === void 0) { error = null; }
                        if (error) {
                            this.onCallbackSendGraphRequest(null, { error: { type: error } });
                            return;
                        }
                        var allfriends = [];
                        for (var str in friends) {
                            if (str == '__vanilla__sort') {
                                continue;
                            }
                            allfriends.push(friends[str]);
                        }
                        global.WQJSBridge.getInfo(allfriends, meInvitableFriends_getInfo.bind(this));
                        function meInvitableFriends_getInfo(friendsInfo, error) {
                            if (error === void 0) { error = null; }
                            if (error) {
                                this.onCallbackSendGraphRequest(null, { error: { type: error } });
                                return;
                            }
                            var result = [];
                            var user;
                            for (var obj in friendsInfo) {
                                if (obj == '__vanilla__sort') {
                                    continue;
                                }
                                user = this.wquser2fb(friendsInfo[obj]);
                                if (!user.installed) {
                                    result.push(this.wquser2fb(friendsInfo[obj]));
                                }
                            }
                            this.onCallbackSendGraphRequest(result, null);
                        }
                    }
                    return 0;
                }
                if (request.requestPath == "me/scores") {
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, "ok", null);
                    return 0;
                }
                if (request.requestPath == "me/permissions") {
                    var list = [{ permission: "user_friends", status: "granted" }, { permission: "publish_actions", status: "granted" }, { permission: "user_groups", status: "granted" }];
                    for (var i = 0; i < 11; ++i) {
                        var permission = global.AppIcf.read("s3eFacebook", "read_permission_" + i);
                        if (!permission)
                            continue;
                        list[list.length] = { permission: permission, status: "granted" };
                    }
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, list, null);
                    return 0;
                }
                if (request.requestPath == this.mAppFacebookId + "/permissions") {
                    list = [{ permission: "user_friends", status: "live" }, { permission: "publish_actions", status: "live" }];
                    for (i = 0; i < 11; ++i) {
                        permission = global.AppIcf.read("s3eFacebook", "write_permission_" + i);
                        if (!permission)
                            continue;
                        list[list.length] = { permission: permission, status: "live" };
                    }
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, list, null);
                    return 0;
                }
                if (request.requestPath == "me/apprequests") {
                    this.mCloud.Call("requests", { user: { usid: this.USID_PREFIX + global.WQJSBridge.wizqPlatform + "-" + this.mOkMe.id } }, meApprequests_complete.bind(this), meApprequests_error.bind(this));
                    function meApprequests_complete(data) {
                        if (data === void 0) { data = null; }
                        var result = [];
                        for (var _i = 0, _a = data.result; _i < _a.length; _i++) {
                            var req = _a[_i];
                            if (!req.from || !req.to)
                                continue;
                            result.push({ id: req.objectId,
                                data: req.data,
                                message: req.message,
                                from: { id: this.findUSID(req.from.usid), name: req.from.name },
                                to: { id: this.findUSID(req.to.usid), name: req.to.name } });
                        }
                        this.onCallbackSendGraphRequest(result, null);
                    }
                    function meApprequests_error(data) {
                        if (data === void 0) { data = null; }
                        this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                    }
                    return 0;
                }
                if (request.requestPath == "me/groups") {
                    var result = [];
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, result, null);
                    return 0;
                }
                if (request.requestPath == "me/og.likes") {
                    result = [];
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, result, null);
                    return 0;
                }
                if (request.requestPath == "me/achievements") {
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, { data: [] }, null);
                    return 0;
                }
                if (request.requestHttpMethod == "POST") {
                    if (request.requestPath.indexOf("/apprequests") != -1) {
                        var split = request.requestPath.split("/apprequests");
                        if (split.length < 2)
                            return 1;
                        var message = request.requestParams.message;
                        var data = request.requestParams.data;
                        var to = [split[0]];
                        this.mCloud.Call("send", { user: { usid: this.USID_PREFIX + global.WQJSBridge.wizqPlatform + "-" + this.mOkMe.id },
                            request: { message: message, data: data, recipients: this.to2recipients(to) } }, apprequests_complete.bind(this), apprequests_error.bind(this));
                        function apprequests_complete(result) {
                            if (result === void 0) { result = null; }
                            if (this.mCloudPush) {
                                var list = [];
                                var date = new Date;
                                for (var _i = 0, to_2 = to; _i < to_2.length; _i++) {
                                    var id = to_2[_i];
                                    id = id.split('-')[1];
                                    list.push({ appId: this.appId, from: this.mOkMe.id, to: id, message: message, data: data, time: date.time / 1000 });
                                }
                                if (list.length > 0) {
                                    this.mCloudPush.Call("register", {
                                        game: { market: global.WQJSBridge.wizqPlatform, version: this.getVersionObject() },
                                        user: { usid: [this.USID_PREFIX + global.WQJSBridge.wizqPlatform + "-" + this.mOkMe.id] },
                                        push: list
                                    });
                                }
                            }
                            this.onCallbackSendGraphRequest({ request: "", to: to }, null);
                        }
                        function apprequests_error(data) {
                            if (data === void 0) { data = null; }
                            this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                        }
                        return 0;
                    }
                    if (request.requestPath.indexOf("achievements") != -1) {
                        global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, { "id": "0" });
                        return 0;
                    }
                    if (request.requestPath.indexOf("me/") != -1) {
                        var locale = request.requestParams['locale'];
                        var objectURL = null;
                        for (var name in request.requestParams) {
                            var val = request.requestParams[name];
                            if (typeof val == 'string') {
                                var str = val;
                                if (str.indexOf("http") >= 0 && name.indexOf("image") == -1) {
                                    objectURL = str;
                                    break;
                                }
                            }
                        }
                        if (str.indexOf("https") >= 0) {
                            objectURL = objectURL.replace("https", "http");
                        }
                        if (locale && objectURL) {
                            var loader = new global.URLLoader;
                            loader.dataFormat = global.URLLoaderDataFormat.TEXT;
                            loader.addEventListener(global.Event.COMPLETE, mePostStory_loaderComplete.bind(this));
                            loader.addEventListener(global.IOErrorEvent.IO_ERROR, mePostStory_loaderError.bind(this));
                            loader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, mePostStory_loaderError.bind(this));
                            loader.load(new global.URLRequest(objectURL));
                            function mePostStory_loaderComplete(event) {
                                global.EventStats.handle(s3eWizq, event);
                                try {
                                    var result = new global.XML(loader.data);
                                }
                                catch (error) {
                                    this.onCallbackSendGraphRequest(null, { error: { type: "unknown", message: "parsing xml error" } });
                                    return;
                                }
                                if (result) {
                                    var description = result.head.meta.$(function (n) { return n.$property == "og:description"; }).$content;
                                    var image = result.head.meta.$(function (n) { return n.$property == "og:image"; }).$content;
                                    var title = result.head.meta.$(function (n) { return n.$property == "og:title"; }).$content;
                                    if (!description)
                                        description = result.meta.$(function (n) { return n.$property == "og:description"; }).$content;
                                    if (!image)
                                        image = result.meta.$(function (n) { return n.$property == "og:image"; }).$content;
                                    if (!title)
                                        image = result.meta.$(function (n) { return n.$property == "og:title"; }).$content;
                                    this.exitFullscreen();
                                    global.WQJSBridge.makePost(title, description, image, "", null);
                                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, { "id": "0" });
                                }
                                else {
                                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, null, "error");
                                }
                            }
                            function mePostStory_loaderError(event) {
                                global.EventStats.handle(s3eWizq, event);
                                this.onCallbackSendGraphRequest(null, { error: { type: "unknown", message: "mePostStory_loaderError" } });
                            }
                            return 0;
                        }
                    }
                }
            }
            catch (e) {
                this.log("sendFBGraphRequest: " + e.message);
            }
            ;
            global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, null, { error: { message: "This function does not supported" } });
            return 1;
        };
        s3eWizq.prototype.wquser2fb = function (data) {
            var user = {};
            user.id = global.WQJSBridge.wizqPlatform + "-" + data.id;
            user.name = data.nickname;
            user.first_name = data.nickname;
            user.last_name = data.nickname;
            user.picture = { data: { url: data.thumbnailUrl } };
            if (data.hasApp == "true" || data.hasApp == true) {
                user.installed = true;
            }
            else {
                user.installed = false;
            }
            user.locale = "ja_JP";
            return user;
        };
        s3eWizq.prototype.wquser2fbpureID = function (data) {
            var user = {};
            user.id = data.id;
            user.name = data.nickname;
            user.first_name = data.nickname;
            user.last_name = data.nickname;
            user.picture = { data: { url: data.thumbnailUrl } };
            user.installed = data.hasApp;
            user.locale = "ja_JP";
            return user;
        };
        s3eWizq.prototype.findCloudUserById = function (list, userId) {
            for (var _i = 0, list_1 = list; _i < list_1.length; _i++) {
                var user = list_1[_i];
                if ("usid" in user && this.findUSID(user.usid) == userId)
                    return user;
            }
            return null;
        };
        s3eWizq.prototype.parseScore2Fb = function (userId, score) {
            return { data: [{ user: { id: userId }, score: score, application: { id: this.mAppFacebookId } }] };
        };
        s3eWizq.prototype.findUSID = function (list) {
            var usid = "";
            for (var _i = 0, list_2 = list; _i < list_2.length; _i++) {
                var value = list_2[_i];
                usid = value;
            }
            return usid;
        };
        s3eWizq.prototype.addPrefix2Ids = function (list) {
            var result = [];
            if (list) {
                var len = list.length;
                for (var i = 0; i < len; ++i)
                    result.push(this.USID_PREFIX + list[i]);
            }
            return result;
        };
        s3eWizq.prototype.deleteFBGraphRequest = function (requestID) {
            try {
                this.mGraphRequestsList[requestID].setDeleteStatus(true);
                return 0;
            }
            catch (e) {
                this.log("deleteFBGraphRequest: " + e.message);
            }
            return 1;
        };
        s3eWizq.prototype.getResponseRaw = function (requestID) {
            try {
                var request = this.mGraphRequestsList[requestID];
                var JSONdata = JSON.stringify(request.requestResponce);
                if (!JSONdata || JSONdata.length == 0 || JSONdata == "[]")
                    JSONdata = "{}";
                if (request.requestPath.indexOf("me/permissions") != -1 ||
                    request.requestPath.indexOf(this.mAppFacebookId + "/permissions") != -1 ||
                    request.requestPath.indexOf("me/friends") != -1 ||
                    request.requestPath.indexOf("me/invitable_friends") != -1 ||
                    request.requestPath.indexOf("me/apprequests") != -1 ||
                    request.requestPath.indexOf("me/groups") != -1 ||
                    request.requestPath.indexOf("me/og.likes") != -1) {
                    JSONdata = JSON.stringify({ data: request.requestResponce });
                }
                this.log("ResponseRaw = " + JSONdata);
                global.SocialStats.response(JSONdata);
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(JSONdata);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) {
                this.log("getResponseRaw Error: " + e.message);
                global.SocialStats.response(e.message);
            }
            return null;
        };
        s3eWizq.prototype.getFBRequest_ErrorCode = function (requestID) {
            try {
                return this.mGraphRequestsList[requestID].requestErrorCode;
            }
            catch (e) {
                this.log("getFBRequest_ErrorCode: " + e.message);
            }
            return 1;
        };
        s3eWizq.prototype.getFBRequest_ErrorString = function (requestID) {
            try {
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(this.mGraphRequestsList[requestID].requestErrorMessage);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) {
                this.log("error getFBRequest_ErrorString");
            }
            return this.mEmptyData;
        };
        s3eWizq.prototype.getFBAccessToken = function () {
            try {
                var accessToken = "";
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(accessToken);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) {
                this.log("getFBAccessToken: " + e.message);
            }
            return null;
        };
        s3eWizq.prototype.initFBDialogWithAction = function (action) {
            this.mFbDialogRequestsList.push(new global.FbDialogRequest(action));
            return this.mFbDialogRequestsList.length - 1;
        };
        s3eWizq.prototype.updateFBDialogActionWithParams = function (dialogID, name, value) {
            try {
                this.mFbDialogRequestsList[dialogID].setParam(name, value);
                return 0;
            }
            catch (e) {
                this.log("error updateFBDialogActionWithParams ");
            }
            return 1;
        };
        s3eWizq.prototype.showFBDialogAction = function (dialogID, callbackKey) {
            this.mCurrentRequestKey = s3eWizq.keyFBDialog_Show;
            this.mRequests.set(this.mCurrentRequestKey, new Request(callbackKey));
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                this.log("request.dialogAction = " + request.dialogAction);
                if (request.dialogAction == "feed" || request.dialogAction == "share_open_graph") {
                    var dialogActionParams = window.JSON.parse(request.dialogParams.action_properties);
                    if (dialogActionParams.object["og:description"] && dialogActionParams.object["og:description"].length > 120)
                        dialogActionParams.object["og:description"] = dialogActionParams.object["og:description"].substr(0, 117) + "...";
                    this.mWaitingDialogMethod = "postMediatopic";
                    this.exitFullscreen();
                    global.WQJSBridge.makePost(dialogActionParams.object["og:title"], dialogActionParams.object["og:description"], dialogActionParams.object["og:image"], "", function (response, error) {
                        if (error === void 0) { error = null; }
                        var success = !error;
                        if (success)
                            request.dialogResponce = "?post_id=0";
                        else
                            request.dialogResponce = "?error_code=0";
                        this.executeRequestByKey(this.mCurrentRequestKey, false, { status: success ? 0 : 1, dialogID: dialogID });
                    }.bind(this));
                    return 0;
                }
                if (request.dialogAction == "apprequests") {
                    this.exitFullscreen();
                    if (request.dialogInviteMode) {
                        this.mWaitingDialogMethod = "showInvite";
                        global.WQJSBridge.showInvite(function (response, error) {
                            if (error === void 0) { error = null; }
                            var success = !error;
                            if (success)
                                request.dialogResponce = "?post_id=0";
                            else
                                request.dialogResponce = "?error_code=0";
                            this.executeRequestByKey(this.mCurrentRequestKey, false, { status: success ? 0 : 1, dialogID: dialogID });
                        }.bind(this));
                    }
                    else {
                        this.executeRequestByKey(this.mCurrentRequestKey, false, { status: 1, dialogID: dialogID });
                    }
                    return 0;
                }
            }
            catch (e) {
                this.log("showFBDialogAction: " + e.message);
            }
            ;
            return 1;
        };
        s3eWizq.prototype.getResponceFbDialogRequest = function (dialogID) {
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                this.log("ResponseRaw = " + request.dialogResponce);
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(request.dialogResponce);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) { }
            return null;
        };
        s3eWizq.prototype.deleteFBDialogAction = function (dialogID) {
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                request.setDeleteStatus(true);
                return 0;
            }
            catch (e) { }
            return 1;
        };
        s3eWizq.prototype.getFBDialog_ErrorCode = function (dialogID) {
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                return request.dialogErrorCode;
            }
            catch (e) { }
            return 0;
        };
        s3eWizq.prototype.ReauthorizeWithPermissions = function (sessionId, permissions, userText, callbackKey) {
            this.mCurrentRequestKey = s3eWizq.keyLogin;
            this.mRequests.set(s3eWizq.keyLogin, new Request(callbackKey));
            global.setTimeout(this.executeRequestByKey.bind(this), 1, s3eWizq.keyLogin, false, { status: 1 });
            return 0;
        };
        s3eWizq.prototype.onCallbackSendGraphRequest = function (result, fail) {
            if (fail === void 0) { fail = null; }
            var params = new Object;
            var requestID = this.mGraphRequestsList.length - 1;
            var request = this.mGraphRequestsList[requestID];
            if (result) {
                this.log("Complete execute " + s3eWizq.keyFBRequest_Send);
                params.status = 0;
                params.requestID = requestID;
                request.requestResponce = result;
                this.executeRequestByKey(s3eWizq.keyFBRequest_Send, true, params);
            }
            else {
                this.log("FAIL execute " + s3eWizq.keyFBRequest_Send + ": " + (fail ? JSON.stringify(fail) : "The result was not found"));
                params.status = 1;
                params.requestID = requestID;
                request.requestResponce = fail;
                this.executeRequestByKey(s3eWizq.keyFBRequest_Send, false, params);
            }
        };
        s3eWizq.prototype.executeRequestByKey = function (key, isCompleate, params, statusCode) {
            if (statusCode === void 0) { statusCode = 0; }
            var request;
            if (this.mRequests.get(key) != null) {
                this.log("Execute callback for key = " + key);
                request = this.mRequests.get(key);
                var JSONdata;
                if (params)
                    JSONdata = JSON.stringify(params);
                var dataItem = new global.ByteArray();
                dataItem.writeUTFBytes(JSONdata);
                dataItem.position = 0;
                if (this.mCallbacks.get(request.completeHandler)) {
                    this.mCallbacks.get(request.completeHandler)(dataItem, this.mEmptyData);
                    this.mCallbacks.delete(request.completeHandler);
                    return;
                }
                this.mViewer["doCallback"](request.completeHandler, dataItem, this.mEmptyData);
            }
            else {
                this.log("callback with key " + key + " not found");
            }
        };
        s3eWizq.prototype.clearWaitingDialog = function () {
            this.mWaitingDialogMethod = null;
            global.clearTimeout(this.mWaitingDialog);
        };
        s3eWizq.prototype.getVersionObject = function () {
            return { main: this.mVersionMain, graphic: this.mVersionGraphic, logic: this.mVersionLogic };
        };
        s3eWizq.prototype.exitFullscreen = function () {
            if (this.mViewer && this.mViewer.stage && this.mViewer.stage.displayState != global.StageDisplayState.NORMAL) {
                try {
                    this.mViewer.stage.displayState = global.StageDisplayState.NORMAL;
                }
                catch (error) {
                    this.log(error.message);
                }
            }
        };
        s3eWizq.prototype.log = function (message) {
            if (global.CONFIG.QA_VERSION)
                global.GLog.print(this.TAG + message);
        };
        s3eWizq.ICF_GAME = "game";
        s3eWizq.keyInit = "s3eFBInit";
        s3eWizq.keyCheckLogin = "s3eFBSession_LoggedIn";
        s3eWizq.keyLogin = "s3eFBSession_Login";
        s3eWizq.keyLogout = "s3eFBTerminate";
        s3eWizq.keyInitFBRequest_WithGraphPath = "s3eFBRequest_WithGraphPath";
        s3eWizq.keyFBRequest_AddParamString = "s3eFBRequest_AddParamString";
        s3eWizq.keyFBRequest_AddParamNumber = "s3eFBRequest_AddParamNumber";
        s3eWizq.keyFBRequest_AddParamStringInternal = "s3eFBRequest_AddParamStringInternal";
        s3eWizq.keyFBRequest_Send = "s3eFBRequest_Send";
        s3eWizq.keyFBRequest_Delete = "s3eFBRequest_Delete";
        s3eWizq.keyFBRequest_ErrorCode = "s3eFBRequest_ErrorCode";
        s3eWizq.keyFBRequest_ErrorString = "s3eFBRequest_ErrorString";
        s3eWizq.keyFBDialog_ErrorCode = "s3eFBDialog_ErrorCode";
        s3eWizq.keyFBDialog_WithAction = "s3eFBDialog_WithAction";
        s3eWizq.keyFBDialog_AddParamString = "s3eFBDialog_AddParamString";
        s3eWizq.keyFBDialog_AddParamNumber = "s3eFBDialog_AddParamNumber";
        s3eWizq.keyFBDialog_AddParamStringInternal = "s3eFBDialog_AddParamStringInternal";
        s3eWizq.keyFBDialog_Show = "s3eFBDialog_Show";
        s3eWizq.keyFBDialog_Delete = "s3eFBDialog_Delete";
        s3eWizq.keyFBSession_ReauthorizeWithPublishPermissions = "s3eFBSession_ReauthorizeWithPublishPermissions";
        s3eWizq.keyFBSession_ReauthorizeWithReadPermissions = "s3eFBSession_ReauthorizeWithReadPermissions";
        s3eWizq.keyFbLikeShow = "s3eFbLikeShow";
        s3eWizq.keyFbLikeHide = "s3eFbLikeHide";
        s3eWizq.keyFBRequest_ResponseRaw = "s3eFBRequest_ResponseRaw";
        s3eWizq.keyFBSession_AccessToken = "s3eFBSession_AccessToken";
        s3eWizq.keyFBDialog_DidCompleteWithUrl = "s3eFBDialog_DidCompleteWithUrl";
        s3eWizq.keyFBGetAppID = "s3eFBGetAppID";
        return s3eWizq;
    }(global.EventDispatcher));
    global.s3eWizq = s3eWizq;
})(global || (global = {}));
var Request = (function () {
    function Request(completeHandlerKey, errorHandlerKey) {
        if (errorHandlerKey === void 0) { errorHandlerKey = -1; }
        this.completeHandler = 0;
        this.errorHandler = 0;
        this.completeHandler = completeHandlerKey;
        this.errorHandler = errorHandlerKey;
    }
    return Request;
}());
var global;
(function (global) {
    global.OdnoklassnikiJSBridge = api.odnoklassniki.OdnoklassnikiJSBridge;
    global.ApiCallbackEvent = api.odnoklassniki.events.ApiCallbackEvent;
    global.DisplayObject = flash.display.DisplayObject;
    global.StageDisplayState = flash.display.StageDisplayState;
    global.ErrorEvent = flash.events.ErrorEvent;
    global.Event = flash.events.Event;
    global.EventDispatcher = flash.events.EventDispatcher;
    global.IOErrorEvent = flash.events.IOErrorEvent;
    global.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    global.ExternalInterface = flash.external.ExternalInterface;
    global.URLLoader = flash.net.URLLoader;
    global.URLRequest = flash.net.URLRequest;
    global.URLRequestMethod = flash.net.URLRequestMethod;
    global.URLVariables = flash.net.URLVariables;
    global.ByteArray = flash.utils.ByteArray;
    global.Dictionary = flash.utils.Dictionary;
    global.clearTimeout = flash.utils.clearTimeout;
    global.getTimer = flash.utils.getTimer;
    global.setTimeout = flash.utils.setTimeout;
    global.Online = s3eUtils.Online;
    global.Parse = s3eUtils.Parse;
    global.getApiCallbackEvent = s3eUtils.getApiCallbackEvent;
    var s3eOdnoklassnikiBilling = (function (_super) {
        __extends(s3eOdnoklassnikiBilling, _super);
        function s3eOdnoklassnikiBilling(data) {
            var _this = _super.call(this) || this;
            _this.is_Is3eExtensionBilling = null;
            _this.TAG = "[Odnoklassniki Billing] ";
            _this.mWithCallbacksId = 0;
            _this.mIsInited = false;
            _this.mPurchaseIsConsumable = false;
            _this.mLocalMode = false;
            _this.mWaitingDialogTimestamp = 0;
            _this.mWaitingDialog = 0;
            _this.mClicked = false;
            _this.mConsumeDelayed = [];
            _this.mLocalMode = data == null;
            _this.mEmptyData = new global.ByteArray;
            _this.mPaymentsInfo = new global.Dictionary;
            _this.log("s3eOdnoklassnikiBilling (localMode = " + _this.mLocalMode + ")");
            _this.refresh();
            return _this;
        }
        s3eOdnoklassnikiBilling.prototype.setViewer = function (viewer) {
            this.mViewer = viewer;
        };
        s3eOdnoklassnikiBilling.prototype.setCloud = function (cloud) {
        };
        s3eOdnoklassnikiBilling.prototype.setCloudPush = function (cloud) {
        };
        s3eOdnoklassnikiBilling.prototype.saved = function () {
            if (this.mConsumeDelayed.length > 0) {
                for (var i = 0; i < this.mConsumeDelayed.length; i++) {
                    this.mConsumeProductId = this.mConsumeDelayed[i];
                    var request = new global.URLRequest(this.mServiceURL);
                    request.method = global.URLRequestMethod.POST;
                    var vars = new global.URLVariables;
                    vars.consume = this.mConsumeProductId;
                    request.data = vars;
                    this.mConsumeLoader.load(request);
                }
                this.mConsumeDelayed = [];
            }
        };
        s3eOdnoklassnikiBilling.prototype.setServiceURL = function (url) {
            this.mServiceURL = url;
            this.mPaymentsLoader = new global.URLLoader;
            this.mPaymentsLoader.addEventListener(global.Event.COMPLETE, function (event) {
                global.EventStats.handle(s3eOdnoklassnikiBilling, event);
                var data = this.mPaymentsLoader.data;
                if (data) {
                    try {
                        var json = JSON.parse(data);
                    }
                    catch (error) {
                        this.log("Ошибка при парсинге списка покупок: " + error.message + ". data = " + data);
                    }
                    if (json && json.data && "length" in json.data) {
                        var map = {};
                        var len = json.data.length;
                        for (var i = 0; i < len; ++i) {
                            var sku = json.data[i].id;
                            if (this.mWaitingDialogMethod) {
                                if (sku == this.mPurchaseProductId) {
                                    this.apiCallback(global.getApiCallbackEvent(this.mWaitingDialogMethod, "ok"));
                                    if (this.mPurchaseIsConsumable) {
                                        var request = new global.URLRequest(this.mServiceURL);
                                        request.method = global.URLRequestMethod.POST;
                                        var vars = new global.URLVariables;
                                        vars.consume = this.mPurchaseProductId;
                                        request.data = vars;
                                        this.mConsumeLoader.load(request);
                                    }
                                    return;
                                }
                                continue;
                            }
                            this.log("Payment: " + sku);
                            if (!map[sku]) {
                                map[sku] = true;
                                this.doCallback(this.mBillingCallbacks.get(s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingSetRestoredCallback), { productID: sku });
                                this.log("Покупка восстановлена (" + sku + ")");
                            }
                        }
                    }
                }
                if (this.mWaitingDialogMethod) {
                    this.apiCallback(global.getApiCallbackEvent(this.mWaitingDialogMethod, "cancel"));
                    return;
                }
                this.log("Обновление транзакций завершено");
            }.bind(this));
            this.mPaymentsLoader.addEventListener(global.IOErrorEvent.IO_ERROR, this.onTransactionRestoreFailed.bind(this));
            this.mPaymentsLoader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, this.onTransactionRestoreFailed.bind(this));
            this.mConsumeLoader = new global.URLLoader;
            this.mConsumeLoader.addEventListener(global.Event.COMPLETE, function (event) {
                global.EventStats.handle(s3eOdnoklassnikiBilling, event);
                var data = this.mConsumeLoader.data;
                if (data) {
                    var response = JSON.parse(data);
                    if ("status" in response && response.status.toLowerCase() == "ok") {
                        this.log("Покупка успешно потреблена");
                        return;
                    }
                }
                this.log("Ошибка потребления покупки");
            }.bind(this));
            this.mConsumeLoader.addEventListener(global.IOErrorEvent.IO_ERROR, this.onConsumeFailed.bind(this));
            this.mConsumeLoader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, this.onConsumeFailed.bind(this));
            global.OdnoklassnikiJSBridge.addEventListener(global.ApiCallbackEvent.CALL_BACK, this.apiCallback.bind(this));
        };
        s3eOdnoklassnikiBilling.prototype.s3eCommonIntWithCallback = function (funcName, params, callback) {
            this.mWithCallbacksId++;
            this.mWithCallbacks.set(this.mWithCallbacksId, callback);
            return this.s3eCommonInt(funcName, this.mWithCallbacksId, params);
        };
        s3eOdnoklassnikiBilling.prototype.s3eCommonInt = function (funcName, cbID, params) {
            this.log("s3eCommonInt");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            var dataItem;
            if (params && params.length > 0)
                dataItem = JSON.parse(params);
            if (this.mLocalMode) {
                switch (funcName) {
                    case s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingRequestProductsInformation:
                    case s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingConsumeItem:
                    case s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingRestoreCompletedTransactions:
                        return 0;
                    case s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingRequestPayment:
                        this.mPurchaseProductId = dataItem.productID;
                        this.apiCallback(global.getApiCallbackEvent("showPayment", "cancel"));
                        return 0;
                }
            }
            switch (funcName) {
                case s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingInit:
                    return 1;
                case s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingSetErrorCallback:
                case s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingSetPurchasedCallback:
                case s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingSetRestoredCallback:
                case s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingSetInfoCallback:
                    this.mBillingCallbacks.set(funcName, cbID);
                    return 0;
                case s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingRequestProductsInformation:
                    if (!dataItem || (dataItem && !dataItem.products))
                        return 1;
                    if (!global.ExternalInterface.available)
                        return 1;
                    global.skipCachedProductsInformation(dataItem);
                    if (!dataItem.products.length)
                        return 1;
                    for (var _i = 0, _a = dataItem.products; _i < _a.length; _i++) {
                        var url = _a[_i];
                        this.requestInfo(url, function (event) {
                            global.EventStats.handle(s3eOdnoklassnikiBilling, event);
                            var productID = this.onProductInfo(event);
                            if (!productID) {
                                this.log("Не удалось загрузить информацию о продукте: с сервера пришли данные не содержащие ноду 'og:url'");
                                return;
                            }
                            this.doCallback(this.mBillingCallbacks.get(s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingSetInfoCallback), this.getInfoObject(productID));
                        }.bind(this), function (event) {
                            global.EventStats.handle(s3eOdnoklassnikiBilling, event);
                            this.log("Не удалось загрузить информацию о продукте: " + event.text);
                        }.bind(this));
                    }
                    return 0;
                case s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingRequestPayment:
                    if (!dataItem || (dataItem && !dataItem.productID)) {
                        this.errorBilling(s3eOdnoklassnikiBilling.OBILLING_PURCHASE_PAYMENT_INVALID);
                        return 1;
                    }
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eOdnoklassnikiBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED, dataItem.productID);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eOdnoklassnikiBilling.OBILLING_NETWORK_NO_INTERNET, dataItem.productID);
                        return 1;
                    }
                    this.mPurchaseProductId = dataItem.productID;
                    this.mPurchaseIsConsumable = dataItem.isConsumable == 1;
                    var item = this.mPaymentsInfo.get(this.mPurchaseProductId);
                    if (!item) {
                        this.requestInfo(this.mPurchaseProductId, function (event) {
                            global.EventStats.handle(s3eOdnoklassnikiBilling, event);
                            var productID = this.onProductInfo(event);
                            if (!productID) {
                                global.EventStats.handle(s3eOdnoklassnikiBilling, event);
                                this.log("Не удалось загрузить информацию о продукте: с сервера пришли данные не содержащие ноду 'og:url'");
                                var error_code = s3eOdnoklassnikiBilling.OBILLING_ERROR_UNKNOWN;
                                this.log("Ошибка покупки: " + this.mPurchaseProductId + " (" + error_code + ")");
                                this.errorBilling(error_code, this.mPurchaseProductId);
                                return;
                            }
                            this.purchase(this.mPaymentsInfo.get(productID));
                        }.bind(this), function (event) {
                            global.EventStats.handle(s3eOdnoklassnikiBilling, event);
                            this.log("Не удалось загрузить информацию о продукте: " + event.text);
                            var error_code = s3eOdnoklassnikiBilling.OBILLING_ERROR_UNKNOWN;
                            this.log("Ошибка покупки: " + this.mPurchaseProductId + " (" + error_code + ")");
                            this.errorBilling(error_code, this.mPurchaseProductId);
                        }.bind(this));
                        return 0;
                    }
                    this.purchase(item);
                    return 0;
                case s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingConsumeItem:
                    if (!dataItem || (dataItem && !dataItem.productID || dataItem.productID.length == 0)) {
                        this.errorBilling(s3eOdnoklassnikiBilling.OBILLING_PURCHASE_PAYMENT_INVALID);
                        return 1;
                    }
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eOdnoklassnikiBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED, dataItem.productID);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eOdnoklassnikiBilling.OBILLING_NETWORK_NO_INTERNET, dataItem.productID);
                        return 1;
                    }
                    this.mConsumeDelayed.push(dataItem.productID);
                    return 0;
                case s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingRestoreCompletedTransactions:
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eOdnoklassnikiBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eOdnoklassnikiBilling.OBILLING_NETWORK_NO_INTERNET);
                        return 1;
                    }
                    this.mPaymentsLoader.load(new global.URLRequest(this.mServiceURL));
                    return 0;
            }
            return -1;
        };
        s3eOdnoklassnikiBilling.prototype.purchase = function (item) {
            this.exitFullscreen();
            if (global.CONFIG.QA_VERSION) {
                item.price = 1;
            }
            global.OdnoklassnikiJSBridge.showPayment(item.name, item.description, item.code, item.price, null, null, null, 'true');
            this.mWaitingDialogMethod = "showPayment";
            this.mWaitingDialogTimestamp = global.getTimer();
        };
        s3eOdnoklassnikiBilling.prototype.requestInfo = function (url, complete, error) {
            if (!url || url == '') {
                error(new global.ErrorEvent(global.ErrorEvent.ERROR, false, false, 'url is undefined'));
                return;
            }
            var loader = new global.URLLoader;
            this.mPaymentsInfo.set(loader, url);
            loader.addEventListener(global.Event.COMPLETE, complete);
            loader.addEventListener(global.IOErrorEvent.IO_ERROR, error);
            loader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, error);
            loader.load(new global.URLRequest(url + global.CONFIG.getRev() + '&fb_local=ru_RU'));
        };
        s3eOdnoklassnikiBilling.prototype.onProductInfo = function (event) {
            var loader = event.target;
            if (!loader.data) {
                return null;
            }
            try {
                var result = new global.XML(loader.data);
            }
            catch (error) {
                this.log(error.message);
                return null;
            }
            var productID = result.meta.$(function (n) { return n.$property == "og:url"; }).$content;
            var price = Math.round(parseFloat(result.meta.$(function (n) { return n.$property == "product:price:amount"; }).$content));
            var title = result.meta.$(function (n) { return n.$property == "og:title"; }).$content;
            var description = result.meta.$(function (n) { return n.$property == "og:description"; }).$content;
            var currency = "OK";
            var priceStr = price + " " + currency;
            this.mPaymentsInfo.set(productID, {
                code: productID,
                price: price,
                priceStr: priceStr,
                currency: currency,
                name: title,
                description: description
            });
            this.log("Информация о покупке: price=" + price + ", priceStr=" + priceStr + ", currency=OK, id=" + productID);
            return productID;
        };
        s3eOdnoklassnikiBilling.prototype.getInfoObject = function (productID) {
            var info = this.mPaymentsInfo.get(productID);
            if (!info) {
                return {
                    productID: productID
                };
            }
            return {
                productID: info.code,
                mPrice: info.price,
                mPriceStr: info.priceStr,
                mCurrency: info.currency,
                mIsDiscount: false
            };
        };
        s3eOdnoklassnikiBilling.prototype.s3eCommonStr = function (funcName, cbID, params) {
            return "";
        };
        s3eOdnoklassnikiBilling.prototype.s3eCommonData = function (funcName, cbID, params) {
            return this.mEmptyData;
        };
        s3eOdnoklassnikiBilling.prototype.refresh = function () {
            this.mWithCallbacks = new global.Dictionary;
            this.mBillingCallbacks = new global.Dictionary;
        };
        s3eOdnoklassnikiBilling.prototype.activate = function () {
        };
        s3eOdnoklassnikiBilling.prototype.mouseDown = function () {
            if (!this.mClicked && this.mWaitingDialogMethod && global.getTimer() - this.mWaitingDialogTimestamp > 1000) {
                this.mWaitingDialog = global.setTimeout(this.mPaymentsLoader.load.bind(this.mPaymentsLoader), 100, new global.URLRequest(this.mServiceURL));
                this.mClicked = true;
            }
        };
        s3eOdnoklassnikiBilling.prototype.deactivate = function () { };
        s3eOdnoklassnikiBilling.prototype.exit = function () { };
        s3eOdnoklassnikiBilling.prototype.apiCallback = function (event) {
            var method = event.method, result = event.result, data = event.data;
            if (method == "getPageInfo")
                return;
            global.EventStats.handle(s3eOdnoklassnikiBilling, event);
            this.log("apiCallback: " + method + ", " + result + ", " + data);
            if (method == "showPayment") {
                this.clearWaitingDialog();
                this.dispatchEvent(new global.Event(global.Event.ACTIVATE));
                if (result && result == "ok") {
                    this.log("Покупка прошла удачно: " + this.mPurchaseProductId);
                    this.doCallback(this.mBillingCallbacks.get(s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingSetPurchasedCallback), { productID: this.mPurchaseProductId });
                }
                else {
                    var error_code = s3eOdnoklassnikiBilling.OBILLING_PURCHASE_CANCELED;
                    this.log("Ошибка покупки: " + this.mPurchaseProductId + " (" + error_code + ")");
                    this.errorBilling(error_code, this.mPurchaseProductId);
                }
            }
        };
        s3eOdnoklassnikiBilling.prototype.onTransactionRestoreFailed = function ($event) {
            global.EventStats.handle(s3eOdnoklassnikiBilling, $event);
            this.log("Ошибка обновления транзакций: " + $event.type + ("text" in $event ? ", " + $event["text"] : ""));
            this.errorBilling(s3eOdnoklassnikiBilling.OBILLING_ERROR_UNKNOWN);
        };
        s3eOdnoklassnikiBilling.prototype.onConsumeFailed = function ($event) {
            global.EventStats.handle(s3eOdnoklassnikiBilling, $event);
            this.log("Ошибка потребления покупки: " + this.mConsumeProductId);
            this.errorBilling(s3eOdnoklassnikiBilling.OBILLING_ERROR_UNKNOWN);
        };
        s3eOdnoklassnikiBilling.prototype.errorBilling = function (errorCode, productID) {
            if (productID === void 0) { productID = ""; }
            this.doCallback(this.mBillingCallbacks.get(s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingSetErrorCallback), { productID: productID, errorCode: errorCode, errorMessage: this.errorMessage(errorCode) });
        };
        s3eOdnoklassnikiBilling.prototype.doCallback = function (cbAddr, response) {
            var dataItem = new global.ByteArray;
            dataItem.writeUTFBytes(JSON.stringify(response));
            dataItem.writeByte(0);
            dataItem.position = 0;
            this.mViewer["doCallback"](cbAddr, dataItem, this.mEmptyData);
        };
        s3eOdnoklassnikiBilling.prototype.errorMessage = function (errorCode) {
            switch (errorCode) {
                case s3eOdnoklassnikiBilling.OBILLING_ERROR_UNKNOWN: return "Unknown error";
                case s3eOdnoklassnikiBilling.OBILLING_PURCHASE_CLIENT_INVALID: return "Client is not allowed to make the payment";
                case s3eOdnoklassnikiBilling.OBILLING_PURCHASE_CANCELED: return "Client canceled purchase";
                case s3eOdnoklassnikiBilling.OBILLING_PURCHASE_PAYMENT_INVALID: return "Invalid parameter/purchase ID";
                case s3eOdnoklassnikiBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED: return "Device is not allowed to make the payment";
                case s3eOdnoklassnikiBilling.OBILLING_NETWORK_NO_NETWORK: return "No network connection";
                case s3eOdnoklassnikiBilling.OBILLING_NETWORK_NO_INTERNET: return "No internet connection";
                default: return "Unknown error code";
            }
        };
        s3eOdnoklassnikiBilling.prototype.clearWaitingDialog = function () {
            this.mWaitingDialogMethod = null;
            this.mWaitingDialogTimestamp = 0;
            this.mClicked = false;
            global.clearTimeout(this.mWaitingDialog);
        };
        s3eOdnoklassnikiBilling.prototype.exitFullscreen = function () {
            if (this.mViewer && this.mViewer.stage && this.mViewer.stage.displayState != global.StageDisplayState.NORMAL) {
                try {
                    this.mViewer.stage.displayState = global.StageDisplayState.NORMAL;
                }
                catch (error) {
                    global.GLog.print(error.message);
                }
            }
        };
        s3eOdnoklassnikiBilling.prototype.log = function (message) {
            global.GLog.print(this.TAG + message);
        };
        s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingInit = "s3eOdnoklassnikiBillingInit";
        s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingSetErrorCallback = "s3eOdnoklassnikiBillingSetErrorCallback";
        s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingSetPurchasedCallback = "s3eOdnoklassnikiBillingSetPurchasedCallback";
        s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingSetRestoredCallback = "s3eOdnoklassnikiBillingSetRestoredCallback";
        s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingSetInfoCallback = "s3eOdnoklassnikiBillingSetInfoCallback";
        s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingRequestProductsInformation = "s3eOdnoklassnikiBillingRequestProductsInformation";
        s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingRequestPayment = "s3eOdnoklassnikiBillingRequestPayment";
        s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingConsumeItem = "s3eOdnoklassnikiBillingConsumeItem";
        s3eOdnoklassnikiBilling.s3eOdnoklassnikiBillingRestoreCompletedTransactions = "s3eOdnoklassnikiBillingRestoreCompletedTransactions";
        s3eOdnoklassnikiBilling.OBILLING_ERROR_UNKNOWN = 0;
        s3eOdnoklassnikiBilling.OBILLING_PURCHASE_CLIENT_INVALID = 1;
        s3eOdnoklassnikiBilling.OBILLING_PURCHASE_CANCELED = 2;
        s3eOdnoklassnikiBilling.OBILLING_PURCHASE_PAYMENT_INVALID = 3;
        s3eOdnoklassnikiBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED = 4;
        s3eOdnoklassnikiBilling.OBILLING_NETWORK_NO_NETWORK = 5;
        s3eOdnoklassnikiBilling.OBILLING_NETWORK_NO_INTERNET = 6;
        return s3eOdnoklassnikiBilling;
    }(global.EventDispatcher));
    global.s3eOdnoklassnikiBilling = s3eOdnoklassnikiBilling;
})(global || (global = {}));
var global;
(function (global) {
    global.RUJSBridge = api.ru.RUJSBridge;
    global.RUCallbackEvent = api.ru.events.RUCallbackEvent;
    global.MD5 = com.adobe.crypto.MD5;
    global.DisplayObject = flash.display.DisplayObject;
    global.StageDisplayState = flash.display.StageDisplayState;
    global.ErrorEvent = flash.events.ErrorEvent;
    global.Event = flash.events.Event;
    global.EventDispatcher = flash.events.EventDispatcher;
    global.IOErrorEvent = flash.events.IOErrorEvent;
    global.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    global.ExternalInterface = flash.external.ExternalInterface;
    global.URLLoader = flash.net.URLLoader;
    global.URLRequest = flash.net.URLRequest;
    global.URLRequestMethod = flash.net.URLRequestMethod;
    global.URLVariables = flash.net.URLVariables;
    global.ByteArray = flash.utils.ByteArray;
    global.Dictionary = flash.utils.Dictionary;
    global.clearTimeout = flash.utils.clearTimeout;
    global.getTimer = flash.utils.getTimer;
    global.setTimeout = flash.utils.setTimeout;
    global.Online = s3eUtils.Online;
    global.Parse = s3eUtils.Parse;
    global.getRUCallbackEvent = s3eUtils.getRUCallbackEvent;
    var s3eMailruBilling = (function (_super) {
        __extends(s3eMailruBilling, _super);
        function s3eMailruBilling(data) {
            var _this = _super.call(this) || this;
            _this.is_Is3eExtensionBilling = null;
            _this.TAG = "[Mailru Billing] ";
            _this.mWithCallbacksId = 0;
            _this.mIsInited = false;
            _this.mPurchaseIsConsumable = false;
            _this.mLocalMode = false;
            _this.mWaitingDialogTimestamp = 0;
            _this.mWaitingDialog = 0;
            _this.mLocalMode = data == null;
            _this.mEmptyData = new global.ByteArray;
            _this.mPaymetsInfo = new global.Dictionary;
            _this.log("s3eMailruBilling (localMode = " + _this.mLocalMode + ")");
            _this.refresh();
            return _this;
        }
        s3eMailruBilling.prototype.setViewer = function (viewer) {
            this.mViewer = viewer;
        };
        s3eMailruBilling.prototype.setCloud = function (cloud) {
        };
        s3eMailruBilling.prototype.setCloudPush = function (cloud) {
        };
        s3eMailruBilling.prototype.saved = function () {
            if (this.mConsumeDelayed) {
                this.mConsumeProductId = this.mConsumeDelayed;
                var request = new global.URLRequest(this.mServiceURL);
                request.method = global.URLRequestMethod.POST;
                var vars = new global.URLVariables;
                vars.consume = this.mConsumeProductId;
                request.data = vars;
                this.mConsumeLoader.load(request);
                this.mConsumeDelayed = null;
            }
        };
        s3eMailruBilling.prototype.setServiceURL = function (url) {
            this.mServiceURL = url;
            this.log("mServiceURL: " + this.mServiceURL);
            this.mPaymentsLoader = new global.URLLoader;
            this.mPaymentsLoader.addEventListener(global.Event.COMPLETE, function (event) {
                global.EventStats.handle(s3eMailruBilling, event);
                var data = this.mPaymentsLoader.data;
                if (data) {
                    try {
                        var json = JSON.parse(data);
                    }
                    catch (error) {
                        this.log("Ошибка при парсинге списка покупок: " + error.message + ". data = " + data);
                    }
                    if (json && json.data && "length" in json.data) {
                        var map = {};
                        var len = json.data.length;
                        for (var i = 0; i < len; ++i) {
                            var sku = json.data[i].id;
                            if (this.mWaitingDialogMethod) {
                                if (sku == this.mPurchaseProductId) {
                                    this.apiCallback(global.getRUCallbackEvent(this.mWaitingDialogMethod, "ok"));
                                    if (this.mPurchaseIsConsumable) {
                                        var request = new global.URLRequest(this.mServiceURL);
                                        request.method = global.URLRequestMethod.POST;
                                        var vars = new global.URLVariables;
                                        vars.consume = this.mPurchaseProductId;
                                        request.data = vars;
                                        this.mConsumeLoader.load(request);
                                    }
                                    return;
                                }
                                continue;
                            }
                            this.log("Payment: " + sku);
                            if (!map[sku]) {
                                map[sku] = true;
                                this.doCallback(this.mBillingCallbacks.get(s3eMailruBilling.s3eMailruBillingSetRestoredCallback), { productID: sku });
                                this.log("Покупка восстановлена (" + sku + ")");
                            }
                        }
                    }
                }
                if (this.mWaitingDialogMethod) {
                    this.apiCallback(global.getRUCallbackEvent(this.mWaitingDialogMethod, "cancel"));
                    return;
                }
                this.log("Обновление транзакций завершено");
            }.bind(this));
            this.mPaymentsLoader.addEventListener(global.IOErrorEvent.IO_ERROR, this.onTransactionRestoreFailed.bind(this));
            this.mPaymentsLoader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, this.onTransactionRestoreFailed.bind(this));
            this.mConsumeLoader = new global.URLLoader;
            this.mConsumeLoader.addEventListener(global.Event.COMPLETE, function (event) {
                global.EventStats.handle(s3eMailruBilling, event);
                var data = this.mConsumeLoader.data;
                if (data) {
                    var response = JSON.parse(data);
                    if ("status" in response && response.status.toLowerCase() == "ok") {
                        this.log("Покупка успешно потреблена");
                        return;
                    }
                }
                this.log("Ошибка потребления покупки");
            }.bind(this));
            this.mConsumeLoader.addEventListener(global.IOErrorEvent.IO_ERROR, this.onConsumeFailed.bind(this));
            this.mConsumeLoader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, this.onConsumeFailed.bind(this));
            global.RUJSBridge.addEventListener(global.RUCallbackEvent.CALL_BACK, this.apiCallback.bind(this));
        };
        s3eMailruBilling.prototype.s3eCommonIntWithCallback = function (funcName, params, callback) {
            this.mWithCallbacksId++;
            this.mWithCallbacks.set(this.mWithCallbacksId, callback);
            return this.s3eCommonInt(funcName, this.mWithCallbacksId, params);
        };
        s3eMailruBilling.prototype.s3eCommonInt = function (funcName, cbID, params) {
            this.log("s3eCommonInt");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            var dataItem;
            if (params && params.length > 0)
                dataItem = JSON.parse(params);
            if (this.mLocalMode) {
                switch (funcName) {
                    case s3eMailruBilling.s3eMailruBillingRequestProductsInformation:
                    case s3eMailruBilling.s3eMailruBillingConsumeItem:
                    case s3eMailruBilling.s3eMailruBillingRestoreCompletedTransactions:
                        return 0;
                    case s3eMailruBilling.s3eMailruBillingRequestPayment:
                        this.mPurchaseProductId = dataItem.productID;
                        this.apiCallback(global.getRUCallbackEvent("showPayment", "cancel"));
                        return 0;
                }
            }
            switch (funcName) {
                case s3eMailruBilling.s3eMailruBillingInit:
                    return 1;
                case s3eMailruBilling.s3eMailruBillingSetErrorCallback:
                case s3eMailruBilling.s3eMailruBillingSetPurchasedCallback:
                case s3eMailruBilling.s3eMailruBillingSetRestoredCallback:
                case s3eMailruBilling.s3eMailruBillingSetInfoCallback:
                    this.mBillingCallbacks.set(funcName, cbID);
                    return 0;
                case s3eMailruBilling.s3eMailruBillingRequestProductsInformation:
                    if (!dataItem || (dataItem && !dataItem.products))
                        return 1;
                    if (!global.ExternalInterface.available)
                        return 1;
                    global.skipCachedProductsInformation(dataItem);
                    if (!dataItem.products.length)
                        return 1;
                    for (var _i = 0, _a = dataItem.products; _i < _a.length; _i++) {
                        var url = _a[_i];
                        this.requestInfo(url, function (event) {
                            global.EventStats.handle(s3eMailruBilling, event);
                            var productID = this.onProductInfo(event);
                            if (!productID) {
                                this.log("Не удалось загрузить информацию о продукте: с сервера пришли данные не содержащие ноду 'og:url'");
                                return;
                            }
                            this.doCallback(this.mBillingCallbacks.get(s3eMailruBilling.s3eMailruBillingSetInfoCallback), this.getInfoObject(productID));
                        }.bind(this), function (event) {
                            global.EventStats.handle(s3eMailruBilling, event);
                            this.log("Не удалось загрузить информацию о продукте: " + event.text);
                        }.bind(this));
                    }
                    return 0;
                case s3eMailruBilling.s3eMailruBillingRequestPayment:
                    if (!dataItem || (dataItem && !dataItem.productID)) {
                        this.errorBilling(s3eMailruBilling.OBILLING_PURCHASE_PAYMENT_INVALID);
                        return 1;
                    }
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eMailruBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED, dataItem.productID);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eMailruBilling.OBILLING_NETWORK_NO_INTERNET, dataItem.productID);
                        return 1;
                    }
                    this.mPurchaseProductId = dataItem.productID;
                    this.mPurchaseIsConsumable = dataItem.isConsumable == 1;
                    var item = this.mPaymetsInfo.get(this.mPurchaseProductId);
                    if (!item) {
                        this.requestInfo(this.mPurchaseProductId, function (event) {
                            global.EventStats.handle(s3eMailruBilling, event);
                            var productID = this.onProductInfo(event);
                            if (!productID) {
                                global.EventStats.handle(s3eMailruBilling, event);
                                this.log("Не удалось загрузить информацию о продукте: с сервера пришли данные не содержащие ноду 'og:url'");
                                var error_code = s3eMailruBilling.OBILLING_ERROR_UNKNOWN;
                                this.log("Ошибка покупки: " + this.mPurchaseProductId + " (" + error_code + ")");
                                this.errorBilling(error_code, this.mPurchaseProductId);
                                return;
                            }
                            this.purchase(this.mPaymetsInfo.get(productID));
                        }.bind(this), function (event) {
                            global.EventStats.handle(s3eMailruBilling, event);
                            this.log("Не удалось загрузить информацию о продукте: " + event.text);
                            var error_code = s3eMailruBilling.OBILLING_ERROR_UNKNOWN;
                            this.log("Ошибка покупки: " + this.mPurchaseProductId + " (" + error_code + ")");
                            this.errorBilling(error_code, this.mPurchaseProductId);
                        }.bind(this));
                        return 0;
                    }
                    this.purchase(item);
                    return 0;
                case s3eMailruBilling.s3eMailruBillingConsumeItem:
                    if (!dataItem || (dataItem && !dataItem.productID || dataItem.productID.length == 0)) {
                        this.errorBilling(s3eMailruBilling.OBILLING_PURCHASE_PAYMENT_INVALID);
                        return 1;
                    }
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eMailruBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED, dataItem.productID);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eMailruBilling.OBILLING_NETWORK_NO_INTERNET, dataItem.productID);
                        return 1;
                    }
                    this.mConsumeDelayed = dataItem.productID;
                    return 0;
                case s3eMailruBilling.s3eMailruBillingRestoreCompletedTransactions:
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eMailruBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eMailruBilling.OBILLING_NETWORK_NO_INTERNET);
                        return 1;
                    }
                    this.mPaymentsLoader.load(new global.URLRequest(this.mServiceURL));
                    return 0;
            }
            return -1;
        };
        s3eMailruBilling.prototype.purchase = function (item) {
            this.exitFullscreen();
            if (global.CONFIG.QA_VERSION) {
                item.price = 1;
            }
            var id = global.MD5.hash(item.code);
            id = id.substr(0, 4);
            var code = "";
            for (var i = 0; i < 4; i++) {
                code += id.charCodeAt(i);
            }
            var idI = int(code);
            global.RUJSBridge.showPayment(idI, item.name, item.price);
            this.mWaitingDialogMethod = "showPayment";
            this.mWaitingDialogTimestamp = global.getTimer();
        };
        s3eMailruBilling.prototype.requestInfo = function (url, complete, error) {
            if (!url || url == '') {
                error(new global.ErrorEvent(global.ErrorEvent.ERROR, false, false, 'url is undefined'));
                return;
            }
            var loader = new global.URLLoader;
            this.mPaymetsInfo.set(loader, url);
            loader.addEventListener(global.Event.COMPLETE, complete);
            loader.addEventListener(global.IOErrorEvent.IO_ERROR, error);
            loader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, error);
            loader.load(new global.URLRequest(url + global.CONFIG.getRev() + '&fb_local=ru_RU'));
        };
        s3eMailruBilling.prototype.onProductInfo = function (event) {
            var loader = event.target;
            if (!loader.data) {
                return null;
            }
            try {
                var result = new global.XML(loader.data);
            }
            catch (error) {
                this.log(error.message);
                return null;
            }
            var productID = result.meta.$(function (n) { return n.$property == "og:url"; }).$content;
            var price = Math.round(parseFloat(result.meta.$(function (n) { return n.$property == "product:price:amount"; }).$content));
            var title = result.meta.$(function (n) { return n.$property == "og:title"; }).$content;
            var description = result.meta.$(function (n) { return n.$property == "og:description"; }).$content;
            var currency = this.declensionRu(price, "мэйлик", "мэйлика", "мэйликов");
            var priceStr = price + " " + currency;
            this.mPaymetsInfo.set(productID, {
                code: productID,
                price: price,
                priceStr: priceStr,
                currency: currency,
                name: title,
                description: description
            });
            this.log("Информация о покупке: price=" + price + ", priceStr=" + priceStr + ", currency=" + currency + ", id=" + productID);
            return productID;
        };
        s3eMailruBilling.prototype.getInfoObject = function (productID) {
            var info = this.mPaymetsInfo.get(productID);
            if (!info) {
                return {
                    productID: productID
                };
            }
            return {
                productID: info.code,
                mPrice: info.price,
                mPriceStr: info.priceStr,
                mCurrency: info.currency,
                mIsDiscount: false
            };
        };
        s3eMailruBilling.prototype.s3eCommonStr = function (funcName, cbID, params) {
            return "";
        };
        s3eMailruBilling.prototype.s3eCommonData = function (funcName, cbID, params) {
            return this.mEmptyData;
        };
        s3eMailruBilling.prototype.refresh = function () {
            this.mWithCallbacks = new global.Dictionary;
            this.mBillingCallbacks = new global.Dictionary;
        };
        s3eMailruBilling.prototype.activate = function () {
            if (this.mWaitingDialogMethod && global.getTimer() - this.mWaitingDialogTimestamp > 1000)
                this.mWaitingDialog = global.setTimeout(this.mPaymentsLoader.load.bind(this.mPaymentsLoader), 100, new global.URLRequest(this.mServiceURL));
        };
        s3eMailruBilling.prototype.mouseDown = function () { };
        s3eMailruBilling.prototype.deactivate = function () { };
        s3eMailruBilling.prototype.exit = function () { };
        s3eMailruBilling.prototype.apiCallback = function (event) {
            var method = event.method, result = event.result, data = event.data;
            if (method == "getPageInfo")
                return;
            global.EventStats.handle(s3eMailruBilling, event);
            this.log("apiCallback: " + method + ", " + result + ", " + data);
            if (method == "showPayment") {
                this.clearWaitingDialog();
                this.dispatchEvent(new global.Event(global.Event.ACTIVATE));
                if (result && result == "ok") {
                    this.log("Покупка прошла удачно: " + this.mPurchaseProductId);
                    this.doCallback(this.mBillingCallbacks.get(s3eMailruBilling.s3eMailruBillingSetPurchasedCallback), { productID: this.mPurchaseProductId });
                }
                else {
                    var error_code = s3eMailruBilling.OBILLING_PURCHASE_CANCELED;
                    this.log("Ошибка покупки: " + this.mPurchaseProductId + " (" + error_code + ")");
                    this.errorBilling(error_code, this.mPurchaseProductId);
                }
            }
        };
        s3eMailruBilling.prototype.onTransactionRestoreFailed = function ($event) {
            global.EventStats.handle(s3eMailruBilling, $event);
            this.log("Ошибка обновления транзакций: " + $event.type + ("text" in $event ? ", " + $event["text"] : ""));
            this.errorBilling(s3eMailruBilling.OBILLING_ERROR_UNKNOWN);
        };
        s3eMailruBilling.prototype.onConsumeFailed = function ($event) {
            global.EventStats.handle(s3eMailruBilling, $event);
            this.log("Ошибка потребления покупки: " + this.mConsumeProductId);
            this.errorBilling(s3eMailruBilling.OBILLING_ERROR_UNKNOWN);
        };
        s3eMailruBilling.prototype.errorBilling = function (errorCode, productID) {
            if (productID === void 0) { productID = ""; }
            this.doCallback(this.mBillingCallbacks.get(s3eMailruBilling.s3eMailruBillingSetErrorCallback), { productID: productID, errorCode: errorCode, errorMessage: this.errorMessage(errorCode) });
        };
        s3eMailruBilling.prototype.doCallback = function (cbAddr, response) {
            var dataItem = new global.ByteArray;
            dataItem.writeUTFBytes(JSON.stringify(response));
            dataItem.writeByte(0);
            dataItem.position = 0;
            this.mViewer["doCallback"](cbAddr, dataItem, this.mEmptyData);
        };
        s3eMailruBilling.prototype.errorMessage = function (errorCode) {
            switch (errorCode) {
                case s3eMailruBilling.OBILLING_ERROR_UNKNOWN: return "Unknown error";
                case s3eMailruBilling.OBILLING_PURCHASE_CLIENT_INVALID: return "Client is not allowed to make the payment";
                case s3eMailruBilling.OBILLING_PURCHASE_CANCELED: return "Client canceled purchase";
                case s3eMailruBilling.OBILLING_PURCHASE_PAYMENT_INVALID: return "Invalid parameter/purchase ID";
                case s3eMailruBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED: return "Device is not allowed to make the payment";
                case s3eMailruBilling.OBILLING_NETWORK_NO_NETWORK: return "No network connection";
                case s3eMailruBilling.OBILLING_NETWORK_NO_INTERNET: return "No internet connection";
                default: return "Unknown error code";
            }
        };
        s3eMailruBilling.prototype.https2http = function (value) {
            return value;
        };
        s3eMailruBilling.prototype.clearWaitingDialog = function () {
            this.mWaitingDialogMethod = null;
            this.mWaitingDialogTimestamp = 0;
            global.clearTimeout(this.mWaitingDialog);
        };
        s3eMailruBilling.prototype.exitFullscreen = function () {
            if (this.mViewer && this.mViewer.stage && this.mViewer.stage.displayState != global.StageDisplayState.NORMAL) {
                try {
                    this.mViewer.stage.displayState = global.StageDisplayState.NORMAL;
                }
                catch (error) {
                    global.GLog.print(error.message);
                }
            }
        };
        s3eMailruBilling.prototype.declensionRu = function (number, one, two, five) {
            number = Math.abs(number);
            number %= 100;
            if (number >= 5 && number <= 20) {
                return five;
            }
            number %= 10;
            if (number == 1) {
                return one;
            }
            if (number >= 2 && number <= 4) {
                return two;
            }
            return five;
        };
        s3eMailruBilling.prototype.declensionEn = function (number, one, two) {
            if (number < 2)
                return one;
            return two;
        };
        s3eMailruBilling.prototype.log = function (message) {
            global.GLog.print(this.TAG + message);
        };
        s3eMailruBilling.s3eMailruBillingInit = "s3eMailruBillingInit";
        s3eMailruBilling.s3eMailruBillingSetErrorCallback = "s3eMailruBillingSetErrorCallback";
        s3eMailruBilling.s3eMailruBillingSetPurchasedCallback = "s3eMailruBillingSetPurchasedCallback";
        s3eMailruBilling.s3eMailruBillingSetRestoredCallback = "s3eMailruBillingSetRestoredCallback";
        s3eMailruBilling.s3eMailruBillingSetInfoCallback = "s3eMailruBillingSetInfoCallback";
        s3eMailruBilling.s3eMailruBillingRequestProductsInformation = "s3eMailruBillingRequestProductsInformation";
        s3eMailruBilling.s3eMailruBillingRequestPayment = "s3eMailruBillingRequestPayment";
        s3eMailruBilling.s3eMailruBillingConsumeItem = "s3eMailruBillingConsumeItem";
        s3eMailruBilling.s3eMailruBillingRestoreCompletedTransactions = "s3eMailruBillingRestoreCompletedTransactions";
        s3eMailruBilling.OBILLING_ERROR_UNKNOWN = 0;
        s3eMailruBilling.OBILLING_PURCHASE_CLIENT_INVALID = 1;
        s3eMailruBilling.OBILLING_PURCHASE_CANCELED = 2;
        s3eMailruBilling.OBILLING_PURCHASE_PAYMENT_INVALID = 3;
        s3eMailruBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED = 4;
        s3eMailruBilling.OBILLING_NETWORK_NO_NETWORK = 5;
        s3eMailruBilling.OBILLING_NETWORK_NO_INTERNET = 6;
        return s3eMailruBilling;
    }(global.EventDispatcher));
    global.s3eMailruBilling = s3eMailruBilling;
})(global || (global = {}));
var global;
(function (global) {
    global.VKJSBridge = api.vk.VKJSBridge;
    global.VKCallbackEvent = api.vk.events.VKCallbackEvent;
    global.VKServerEvent = api.vk.events.VKServerEvent;
    global.DisplayObject = flash.display.DisplayObject;
    global.StageDisplayState = flash.display.StageDisplayState;
    global.Event = flash.events.Event;
    global.EventDispatcher = flash.events.EventDispatcher;
    global.IOErrorEvent = flash.events.IOErrorEvent;
    global.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    global.URLLoader = flash.net.URLLoader;
    global.URLLoaderDataFormat = flash.net.URLLoaderDataFormat;
    global.URLRequest = flash.net.URLRequest;
    global.Capabilities = flash.system.Capabilities;
    global.ByteArray = flash.utils.ByteArray;
    global.Dictionary = flash.utils.Dictionary;
    global.clearTimeout = flash.utils.clearTimeout;
    global.getTimer = flash.utils.getTimer;
    global.setTimeout = flash.utils.setTimeout;
    global.FbDialogRequest = s3eSocial.FbDialogRequest;
    global.FbGraphRequest = s3eSocial.FbGraphRequest;
    global.AppIcf = s3eUtils.AppIcf;
    global.Parse = s3eUtils.Parse;
    var s3eVkontakte = (function (_super) {
        __extends(s3eVkontakte, _super);
        function s3eVkontakte(appId) {
            var _this = _super.call(this) || this;
            _this.is_Is3eExtensionSocial = null;
            _this.TAG = "[Vkontakte] ";
            _this.USER_CANCELED_CODE = 4201;
            _this.USER_UPDATE_INTERVAL = 5 * 60 * 1000;
            _this.USID_PREFIX = "vk_";
            _this.DEFAULT_TABLE_ID = "Vkontakte";
            _this.TABLE_ID = _this.DEFAULT_TABLE_ID;
            _this.mIsInited = false;
            _this.mIsLogged = false;
            _this.mParseUsersTimestamp = 0;
            _this.mCallbacksId = 0;
            _this.mWaitingDialog = 0;
            _this.mAppId = appId;
            _this.mParseUsers = new global.Dictionary;
            _this.mEmptyData = new global.ByteArray;
            _this.refresh();
            return _this;
        }
        s3eVkontakte.prototype.setViewer = function (viewer) {
            this.mViewer = viewer;
        };
        s3eVkontakte.prototype.setCloud = function (cloud) {
            this.mCloud = cloud;
        };
        s3eVkontakte.prototype.setCloudPush = function (cloud) {
            this.mCloudPush = cloud;
        };
        Object.defineProperty(s3eVkontakte.prototype, "appId", {
            get: function () {
                return this.mAppId;
            },
            enumerable: true,
            configurable: true
        });
        s3eVkontakte.prototype.setLeaderboardTableId = function (id) {
            this.TABLE_ID = id;
        };
        s3eVkontakte.prototype.s3eCommonIntWithCallback = function (funcName, params, callback) {
            this.mCallbacksId++;
            this.mCallbacks.set(this.mCallbacksId, callback);
            return this.s3eCommonInt(funcName, this.mCallbacksId, params);
        };
        s3eVkontakte.prototype.s3eCommonInt = function (funcName, cbID, params) {
            this.log("s3eCommonInt");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            if (params && params.length > 0)
                var dataItem = JSON.parse(params);
            switch (funcName) {
                case s3eVkontakte.keyInit:
                    return this.init(dataItem.appId, dataItem.appVersion);
                case s3eVkontakte.keyCheckLogin:
                    return int(this.checkLogin(dataItem));
                case s3eVkontakte.keyLogin:
                    return int(this.login(dataItem.sessionID, dataItem.permissions, cbID));
                case s3eVkontakte.keyLogout:
                    return 0;
                case s3eVkontakte.keyInitFBRequest_WithGraphPath:
                    return this.initFBGraphRequest(dataItem.graphPath, dataItem.httpMethod);
                case s3eVkontakte.keyFBRequest_AddParamString:
                case s3eVkontakte.keyFBRequest_AddParamNumber:
                case s3eVkontakte.keyFBRequest_AddParamStringInternal:
                    return this.updateFBGraphRequestWithParams(dataItem.requestID, dataItem.name, dataItem.value);
                case s3eVkontakte.keyFBRequest_Send:
                    return this.sendFBGraphRequest(dataItem.requestID, cbID);
                case s3eVkontakte.keyFBRequest_Delete:
                    return this.deleteFBGraphRequest(dataItem.requestID);
                case s3eVkontakte.keyFBDialog_WithAction:
                    return this.initFBDialogWithAction(dataItem.action);
                case s3eVkontakte.keyFBDialog_AddParamString:
                case s3eVkontakte.keyFBDialog_AddParamNumber:
                case s3eVkontakte.keyFBDialog_AddParamStringInternal:
                    return this.updateFBDialogActionWithParams(dataItem.dialogID, dataItem.name, dataItem.value);
                case s3eVkontakte.keyFBDialog_Show:
                    return this.showFBDialogAction(dataItem.dialogID, cbID);
                case s3eVkontakte.keyFBDialog_Delete:
                    return this.deleteFBDialogAction(dataItem.dialogID);
                case s3eVkontakte.keyFBRequest_ErrorCode:
                    return this.getFBRequest_ErrorCode(dataItem.requestID);
                case s3eVkontakte.keyFBDialog_ErrorCode:
                    return this.getFBDialog_ErrorCode(dataItem.dialogID);
                case s3eVkontakte.keyFBSession_ReauthorizeWithPublishPermissions:
                case s3eVkontakte.keyFBSession_ReauthorizeWithReadPermissions:
                    return this.ReauthorizeWithPermissions(dataItem.sessionID, dataItem.permissions, dataItem.userText, cbID);
            }
            return -1;
        };
        s3eVkontakte.prototype.s3eCommonStr = function (funcName, cbID, params) {
            this.log("s3eCommonStr");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            switch (funcName) {
                case s3eVkontakte.keyFBGetAppID:
                    return this.mAppId;
            }
            return "";
        };
        s3eVkontakte.prototype.s3eCommonData = function (funcName, cbID, params) {
            this.log("s3eCommonData");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            if (params && params.length > 0)
                var dataItem = JSON.parse(params);
            switch (funcName) {
                case s3eVkontakte.keyFBRequest_ErrorString:
                    return this.getFBRequest_ErrorString(dataItem.requestID);
                case s3eVkontakte.keyFBRequest_ResponseRaw:
                    return this.getResponseRaw(dataItem.requestID);
                case s3eVkontakte.keyFBSession_AccessToken:
                    return this.getFBAccessToken();
                case s3eVkontakte.keyFBDialog_DidCompleteWithUrl:
                    return this.getResponceFbDialogRequest(dataItem.dialogID);
            }
            return this.mEmptyData;
        };
        s3eVkontakte.prototype.refresh = function () {
            this.mRequests = new global.Dictionary;
            this.mCallbacks = new global.Dictionary;
            this.mGraphRequestsList = new Array;
            this.mFbDialogRequestsList = new Array;
        };
        s3eVkontakte.prototype.activate = function () {
        };
        s3eVkontakte.prototype.mouseDown = function () { };
        s3eVkontakte.prototype.deactivate = function () { };
        s3eVkontakte.prototype.exit = function () { };
        s3eVkontakte.prototype.init = function (appID, appVersion) {
            this.log("Call init function");
            if (!this.mIsInited) {
                this.mVersionMain = global.AppIcf.read(s3eVkontakte.ICF_GAME, "VersionMain");
                this.mVersionGraphic = global.AppIcf.read(s3eVkontakte.ICF_GAME, "VersionGraphic");
                this.mVersionLogic = global.AppIcf.read(s3eVkontakte.ICF_GAME, "VersionLogic");
                this.mMarket = global.AppIcf.read(s3eVkontakte.ICF_GAME, "Market");
                this.mAppFacebookId = appID;
                this.mAppVersion = appVersion;
                this.mIsInited = true;
                this.log("Init vkontakte with appId = " + this.mAppId + " with app version = " + appVersion + " with facebookId = " + this.mAppFacebookId);
            }
            return 0;
        };
        s3eVkontakte.prototype.checkLogin = function (session) {
            if (session === void 0) { session = null; }
            this.log("Call checklogin function");
            return (this.mIsLogged && this.mIsInited);
        };
        s3eVkontakte.prototype.login = function (sessionId, permissions, callbackKey) {
            this.mCurrentRequestKey = s3eVkontakte.keyLogin;
            this.mRequests.set(s3eVkontakte.keyLogin, new Request(callbackKey));
            this.log("Call login function");
            if (this.checkLogin()) {
                this.log("Already login");
                this.mIsLogged = true;
                this.executeRequestByKey(s3eVkontakte.keyLogin, true, { status: 0 });
                return 0;
            }
            else {
                this.log("Need auth");
                this.log("Auth with permissions = " + permissions);
                global.VKJSBridge.addEventListener(global.VKServerEvent.CONNECTED, onConnect.bind(this));
                global.VKJSBridge.addEventListener(global.VKServerEvent.CONNECTION_ERROR, onErrorConnection.bind(this));
                global.VKJSBridge.addEventListener(global.VKCallbackEvent.CALL_BACK, this.apiCallback.bind(this));
                global.VKJSBridge.initialize(this.mAppId);
                function onConnect(e) {
                    global.EventStats.handle(s3eVkontakte, e);
                    var msg = "";
                    try {
                        msg = ": " + (typeof e.data == 'string' ? e.data : JSON.stringify(e.data));
                    }
                    catch (error) { }
                    this.log("connected" + msg);
                    global.VKJSBridge.getCurrentUser(function (userOk) {
                        this.mVkMe = userOk.response[0];
                        this.log("mVkMe" + JSON.stringify(this.mVkMe));
                        this.mIsLogged = true;
                        this.executeRequestByKey(s3eVkontakte.keyLogin, true, { status: 0 });
                    }.bind(this));
                }
                function onErrorConnection(e) {
                    global.EventStats.handle(s3eVkontakte, e);
                    var msg = "";
                    try {
                        msg = ": " + (typeof e.data == 'string' ? e.data : JSON.stringify(e.data));
                    }
                    catch (error) { }
                    this.log("unable to connect" + msg);
                    if ("showLoadingError" in this.mViewer) {
                        this.mViewer["showLoadingError"]("login");
                    }
                    return;
                }
                return 0;
            }
        };
        s3eVkontakte.prototype.apiCallback = function (event) {
        };
        s3eVkontakte.prototype.to2recipients = function (to) {
            var recipients = [];
            for (var _i = 0, to_3 = to; _i < to_3.length; _i++) {
                var usid = to_3[_i];
                recipients.push({ usid: this.USID_PREFIX + usid });
            }
            return recipients;
        };
        s3eVkontakte.prototype.arrayToUrlParams = function (dataItem) {
            var str = "";
            if (dataItem)
                for (var i = 0; i < dataItem.length; ++i)
                    str += "?to[" + i + "]=" + dataItem[i];
            return str;
        };
        s3eVkontakte.prototype.initFBGraphRequest = function (path, httpMethod) {
            this.mGraphRequestsList.push(new global.FbGraphRequest(path, httpMethod));
            return this.mGraphRequestsList.length - 1;
        };
        s3eVkontakte.prototype.updateFBGraphRequestWithParams = function (requestID, name, value) {
            try {
                this.mGraphRequestsList[requestID].setParam(name, value);
                return 0;
            }
            catch (e) { }
            return 1;
        };
        s3eVkontakte.prototype.sendFBGraphRequest = function (requestID, callbackKey) {
            this.mCurrentRequestKey = s3eVkontakte.keyFBRequest_Send;
            this.mRequests.set(this.mCurrentRequestKey, new Request(callbackKey));
            try {
                var request = this.mGraphRequestsList[requestID];
                this.log("request: path = " + request.requestPath + ", method = " + request.requestHttpMethod);
                if (request.requestHttpMethod == "DELETE") {
                    this.mCloud.Call("clear", { request: { objectId: request.requestPath } }, function (data) {
                        if (data === void 0) { data = null; }
                        this.onCallbackSendGraphRequest("ok");
                    }.bind(this), function (data) {
                        if (data === void 0) { data = null; }
                        this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                    }.bind(this));
                    return 0;
                }
                if (request.requestPath == "me") {
                    global.VKJSBridge.getCurrentUser(function (userVK) {
                        if ("response" in userVK) {
                            userVK = this.vkuser2fb(userVK.response[0], true);
                            this.onCallbackSendGraphRequest(userVK);
                        }
                    }.bind(this));
                    return 0;
                }
                if (request.requestPath == "me/friends") {
                    global.VKJSBridge.getAllFriends(function (friends) {
                        if (!friends || ("response" in friends) == false)
                            friends = { response: { items: [] } };
                        var friendsInfoArray = friends.response.items;
                        global.VKJSBridge.getAppFriends(function (appFriends) {
                            var appUIDS = [];
                            if ("response" in appFriends) {
                                appUIDS = appFriends.response;
                            }
                            var result = [];
                            var len = friendsInfoArray.length;
                            for (var i = 0; i < len; ++i) {
                                if (appUIDS.indexOf(friendsInfoArray[i].id) == -1)
                                    continue;
                                result.push(this.vkuser2fb(friendsInfoArray[i], true));
                            }
                            this.onCallbackSendGraphRequest(result, null);
                        }.bind(this));
                    }.bind(this), null);
                    return 0;
                }
                if (request.requestPath == "me/invitable_friends") {
                    global.VKJSBridge.getAllFriends(function (friends) {
                        if (!friends || ("response" in friends) == false)
                            friends = { response: { items: [] } };
                        var friendsInfoArray = friends.response.items;
                        global.VKJSBridge.getAppFriends(function (appFriends) {
                            var appUIDS = [];
                            if ("response" in appFriends) {
                                appUIDS = appFriends.response;
                            }
                            var result = [];
                            var len = friendsInfoArray.length;
                            for (var i = 0; i < len; ++i) {
                                if (appUIDS.indexOf(friendsInfoArray[i].id) != -1)
                                    continue;
                                result.push(this.vkuser2fb(friendsInfoArray[i], false));
                            }
                            this.onCallbackSendGraphRequest(result, null);
                        }.bind(this));
                    }.bind(this), null);
                    return 0;
                }
                if (request.requestPath == "me/scores") {
                    if (this.mParseUsers.get(this.mVkMe.id.toString()))
                        this.mParseUsers.get(this.mVkMe.id.toString()).scores = this.parseScore2Fb(this.mVkMe.id.toString(), request.requestParams.score);
                    if (this.mCloudPush) {
                        this.mCloudPush.Call("third_party", {
                            game: {
                                market: this.mMarket,
                                version: this.getVersionObject(),
                                appId: this.mAppId
                            },
                            user: {
                                id: this.mVkMe.id.toString()
                            },
                            command: {
                                name: "secure.addAppEvent",
                                params: {
                                    activity_id: 2,
                                    value: request.requestParams.score
                                }
                            }
                        });
                    }
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, "ok", null);
                    return 0;
                }
                if (request.requestPath == "me/permissions") {
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, [{ permission: "user_friends", status: "granted" }, { permission: "publish_actions", status: "granted" }], null);
                    return 0;
                }
                if (request.requestPath == this.mAppFacebookId + "/permissions") {
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, [{ permission: "user_friends", status: "live" }, { permission: "publish_actions", status: "live" }], null);
                    return 0;
                }
                if (request.requestPath == "me/apprequests") {
                    this.mCloud.Call("requests", { user: { usid: this.USID_PREFIX + this.mVkMe.id.toString() } }, function (data) {
                        if (data === void 0) { data = null; }
                        var result = [];
                        for (var _i = 0, _a = data.result; _i < _a.length; _i++) {
                            var req = _a[_i];
                            if (!req.from || !req.to)
                                continue;
                            result.push({ id: req.objectId,
                                data: req.data,
                                message: req.message,
                                from: { id: this.findUSID(req.from.usid), name: req.from.name },
                                to: { id: this.findUSID(req.to.usid), name: req.to.name } });
                        }
                        this.onCallbackSendGraphRequest(result, null);
                    }.bind(this), function (data) {
                        if (data === void 0) { data = null; }
                        this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                    }.bind(this));
                    return 0;
                }
                if (request.requestPath == "me/groups") {
                    global.VKJSBridge.getUserGroups(this.mVkMe.id.toString(), 100, function (groups) {
                        if ("response" in groups) {
                            groups = groups.response.items;
                        }
                        else {
                            groups = [];
                        }
                        var result = [];
                        var len = groups.length;
                        for (var i = 0; i < len; ++i)
                            result.push({ id: groups[i].id, name: groups[i].name });
                        this.onCallbackSendGraphRequest(result, null);
                    }.bind(this));
                    return 0;
                }
                if (request.requestPath == "me/og.likes") {
                    var result = [];
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, result, null);
                    return 0;
                }
                if (request.requestHttpMethod == "GET" && request.requestPath == "me/achievements") {
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, { data: [] }, null);
                    return 0;
                }
                if (request.requestHttpMethod == "POST") {
                    if (request.requestPath.indexOf("/apprequests") != -1) {
                        var split = request.requestPath.split("/apprequests");
                        if (split.length < 2)
                            return 1;
                        var message = request.requestParams.message;
                        var data = request.requestParams.data;
                        var to = [split[0]];
                        global.VKJSBridge.showWallPost(message, to.join(","), function (response) {
                            this.log("gift" + JSON.stringify(response));
                        }.bind(this), ["photo267659312_370636484"]);
                        this.mCloud.Call("send", { user: { usid: this.USID_PREFIX + this.mVkMe.id.toString() }, request: { message: message, data: data, recipients: this.to2recipients(to) } }, function (result) {
                            if (result === void 0) { result = null; }
                            this.log("gift posted");
                            if (this.mCloudPush) {
                                var list = [];
                                var date = new Date;
                                for (var _i = 0, to_4 = to; _i < to_4.length; _i++) {
                                    var id = to_4[_i];
                                    var fr = this.mParseUsers.get(id);
                                    list.push({ appId: this.mAppId, from: this.mVkMe.id.toString(), to: id, message: message, data: data, time: date.time / 1000 });
                                }
                                if (list.length > 0) {
                                    this.mCloudPush.Call("register", {
                                        game: { market: this.mMarket, version: this.getVersionObject() },
                                        user: { usid: [this.USID_PREFIX + this.mVkMe.id.toString()] },
                                        push: list
                                    });
                                }
                            }
                            this.onCallbackSendGraphRequest({ request: "", to: to }, null);
                        }.bind(this), function (data) {
                            if (data === void 0) { data = null; }
                            this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                        }.bind(this));
                        return 0;
                    }
                    if (request.requestPath.indexOf("achievements") != -1) {
                        this.log('Try post achievement');
                        var activity_id = 0;
                        for (var name in request.requestParams) {
                            var val = request.requestParams[name];
                            if (typeof val == 'string') {
                                if (name == 'achievement') {
                                    activity_id = parseInt(val);
                                    break;
                                }
                            }
                        }
                        if (this.mCloudPush && activity_id >= 3) {
                            this.mCloudPush.Call("third_party", {
                                game: {
                                    market: this.mMarket,
                                    version: this.getVersionObject(),
                                    appId: this.mAppId
                                },
                                user: {
                                    id: this.mVkMe.id.toString()
                                },
                                command: {
                                    name: "secure.addAppEvent",
                                    params: {
                                        activity_id: activity_id,
                                        value: 0
                                    }
                                }
                            });
                        }
                        else {
                            this.log('[Error] there is no parameter with name "achievement"');
                        }
                        global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, { "id": "0" });
                        return 0;
                    }
                    if (request.requestPath.indexOf("me/") != -1) {
                        var locale = request.requestParams['locale'];
                        var objectURL = null;
                        for (name in request.requestParams) {
                            val = request.requestParams[name];
                            if (typeof val == 'string') {
                                var str = val;
                                if (str.indexOf("http") >= 0 && name.indexOf("image") == -1) {
                                    objectURL = str;
                                    break;
                                }
                            }
                        }
                        if (locale && objectURL) {
                            if (objectURL.indexOf("level_") && this.mCloudPush) {
                                var sub = objectURL.substring(objectURL.lastIndexOf('_') + 1, objectURL.lastIndexOf('.'));
                                var level = parseInt(sub);
                                if (level > 0 && level < 1000) {
                                    this.mCloudPush.Call("third_party", {
                                        game: {
                                            market: this.mMarket,
                                            version: this.getVersionObject(),
                                            appId: this.mAppId
                                        },
                                        user: {
                                            id: this.mVkMe.id.toString()
                                        },
                                        command: {
                                            name: "secure.addAppEvent",
                                            params: {
                                                activity_id: 1,
                                                value: level
                                            }
                                        }
                                    });
                                }
                            }
                            var loader = new global.URLLoader;
                            loader.dataFormat = global.URLLoaderDataFormat.TEXT;
                            loader.addEventListener(global.Event.COMPLETE, function (event) {
                                global.EventStats.handle(s3eVkontakte, event);
                                try {
                                    var result = new global.XML(loader.data);
                                }
                                catch (error) {
                                    this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                                    return;
                                }
                                if (result) {
                                    var description = result.head.meta.$(function (n) { return n.$property == "og:description"; }).$content;
                                    var image = result.head.meta.$(function (n) { return n.$property == "og:image"; }).$content;
                                    if (!description)
                                        description = result.meta.$(function (n) { return n.$property == "og:description"; }).$content;
                                    if (!image)
                                        image = result.meta.$(function (n) { return n.$property == "og:image"; }).$content;
                                    var att = {
                                        description: description,
                                        media: [{ src: image }]
                                    };
                                    var text = {
                                        "type": "text",
                                        "text": att.description
                                    };
                                    var app = {
                                        "type": "app",
                                        "text": "",
                                        "images": [
                                            {
                                                "url": att.media[0].src,
                                                "mark": "mark_url",
                                                "title": att.description ? att.description : "image"
                                            }
                                        ]
                                    };
                                    this.exitFullscreen();
                                    global.VKJSBridge.showWallPost(att.description, this.mVkMe.id.toString(), function (response) {
                                    }.bind(this), [att.media[0].src]);
                                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, { "id": "0" });
                                }
                                else {
                                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, null, "error");
                                }
                            }.bind(this));
                            loader.addEventListener(global.IOErrorEvent.IO_ERROR, function (event) {
                                global.EventStats.handle(s3eVkontakte, event);
                                this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                            }.bind(this));
                            loader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, function (event) {
                                global.EventStats.handle(s3eVkontakte, event);
                                this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                            }.bind(this));
                            loader.load(new global.URLRequest(objectURL + "?fb_locale=ru_RU"));
                            return 0;
                        }
                    }
                }
            }
            catch (e) {
                this.log("sendFBGraphRequest: " + e.message);
            }
            ;
            global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, null, { error: { message: "This function does not supported" } });
            return 1;
        };
        s3eVkontakte.prototype.vkuser2fb = function (data, installed) {
            var user = {};
            user.id = data.id.toString();
            user.name = data.first_name + " " + data.last_name;
            user.first_name = data.first_name;
            user.last_name = data.last_name;
            user.picture = { data: { url: this.getphotourl(data.photo_50, data.sex) } };
            user.installed = installed;
            user.locale = global.Capabilities.language.substr(0, 2);
            return user;
        };
        s3eVkontakte.prototype.getphotourl = function (aUrl, aSex) {
            var urltemp = aUrl.split('/').slice(2).join('/');
            if (urltemp == "vk.com/images/deactivated_50.png") {
                return "https://ssl.absolutist.com/free_online/timegap-beta/vkontakte/template/images/deactivated.jpg";
            }
            if (urltemp == "vk.com/images/camera_50.png") {
                if (aSex == 0) {
                    return "https://ssl.absolutist.com/free_online/timegap-beta/vkontakte/template/images/camera.jpg";
                }
                if (aSex == 1) {
                    return "https://ssl.absolutist.com/free_online/timegap-beta/vkontakte/template/images/female.jpg";
                }
                if (aSex == 2) {
                    return "https://ssl.absolutist.com/free_online/timegap-beta/vkontakte/template/images/male.jpg";
                }
            }
            return aUrl;
        };
        s3eVkontakte.prototype.findCloudUserById = function (list, userId) {
            for (var _i = 0, list_3 = list; _i < list_3.length; _i++) {
                var user = list_3[_i];
                if ("usid" in user && this.findUSID(user.usid) == userId)
                    return user;
            }
            return null;
        };
        s3eVkontakte.prototype.parseScore2Fb = function (userId, score) {
            return { data: [{ user: { id: userId }, score: score, application: { id: this.mAppFacebookId } }] };
        };
        s3eVkontakte.prototype.findUSID = function (list) {
            var usid = "";
            for (var _i = 0, list_4 = list; _i < list_4.length; _i++) {
                var value = list_4[_i];
                if (value.indexOf(this.USID_PREFIX) != -1) {
                    usid = value.split(this.USID_PREFIX).join("");
                    break;
                }
            }
            return usid;
        };
        s3eVkontakte.prototype.addPrefix2Ids = function (list) {
            var result = [];
            if (list) {
                var len = list.length;
                for (var i = 0; i < len; ++i)
                    result.push(this.USID_PREFIX + list[i]);
            }
            return result;
        };
        s3eVkontakte.prototype.deleteFBGraphRequest = function (requestID) {
            try {
                this.mGraphRequestsList[requestID].setDeleteStatus(true);
                return 0;
            }
            catch (e) {
                this.log("deleteFBGraphRequest: " + e.message);
            }
            return 1;
        };
        s3eVkontakte.prototype.getResponseRaw = function (requestID) {
            try {
                var request = this.mGraphRequestsList[requestID];
                var JSONdata = JSON.stringify(request.requestResponce);
                if (!JSONdata || JSONdata.length == 0 || JSONdata == "[]")
                    JSONdata = "{}";
                if (request.requestPath.indexOf("me/permissions") != -1 ||
                    request.requestPath.indexOf(this.mAppFacebookId + "/permissions") != -1 ||
                    request.requestPath.indexOf("me/friends") != -1 ||
                    request.requestPath.indexOf("me/invitable_friends") != -1 ||
                    request.requestPath.indexOf("me/apprequests") != -1 ||
                    request.requestPath.indexOf("me/groups") != -1) {
                    JSONdata = JSON.stringify({ data: request.requestResponce });
                }
                this.log("ResponseRaw = " + JSONdata);
                global.SocialStats.response(JSONdata);
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(JSONdata);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) {
                this.log("getResponseRaw Error: " + e.message);
                global.SocialStats.response(e.message);
            }
            return null;
        };
        s3eVkontakte.prototype.getFBRequest_ErrorCode = function (requestID) {
            try {
                return this.mGraphRequestsList[requestID].requestErrorCode;
            }
            catch (e) {
                this.log("getFBRequest_ErrorCode: " + e.message);
            }
            return 1;
        };
        s3eVkontakte.prototype.getFBRequest_ErrorString = function (requestID) {
            try {
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(this.mGraphRequestsList[requestID].requestErrorMessage);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) {
                this.log("error getFBRequest_ErrorString");
            }
            return this.mEmptyData;
        };
        s3eVkontakte.prototype.getFBAccessToken = function () {
            try {
                var accessToken = "";
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(accessToken);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) {
                this.log("getFBAccessToken: " + e.message);
            }
            return null;
        };
        s3eVkontakte.prototype.initFBDialogWithAction = function (action) {
            this.mFbDialogRequestsList.push(new global.FbDialogRequest(action));
            return this.mFbDialogRequestsList.length - 1;
        };
        s3eVkontakte.prototype.updateFBDialogActionWithParams = function (dialogID, name, value) {
            try {
                this.mFbDialogRequestsList[dialogID].setParam(name, value);
                return 0;
            }
            catch (e) {
                this.log("error updateFBDialogActionWithParams ");
            }
            return 1;
        };
        s3eVkontakte.prototype.showFBDialogAction = function (dialogID, callbackKey) {
            this.mCurrentRequestKey = s3eVkontakte.keyFBDialog_Show;
            this.mRequests.set(this.mCurrentRequestKey, new Request(callbackKey));
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                this.log("request.dialogAction = " + request.dialogAction);
                if (request.dialogAction == "feed" || request.dialogAction == "share_open_graph") {
                    this.mWaitingDialogMethod = "postMediatopic";
                    this.exitFullscreen();
                    var dialogActionParams = window.JSON.parse(request.dialogParams.action_properties);
                    global.VKJSBridge.showWallPost(dialogActionParams.object["og:description"], this.mVkMe.id.toString(), function (response) {
                        this.log("showWallPost" + JSON.stringify(response));
                        var success = response.length > 0;
                        if (success)
                            request.dialogResponce = "?post_id=0";
                        else
                            request.dialogResponce = "?error_code=0";
                        this.executeRequestByKey(this.mCurrentRequestKey, false, { status: success ? 0 : 1, dialogID: dialogID });
                    }.bind(this), [dialogActionParams.object["og:image"], dialogActionParams.object["og:url"]]);
                    return 0;
                }
                if (request.dialogAction == "apprequests") {
                    this.exitFullscreen();
                    this.log("request.dialogInviteMode" + request.dialogInviteMode);
                    if (request.dialogInviteMode) {
                        this.mWaitingDialogMethod = "showInvite";
                        var uidsString = "";
                        if (request.dialogParams.to instanceof Array) {
                            uidsString = request.dialogParams.to.join(",");
                        }
                        else {
                            uidsString = request.dialogParams.to;
                        }
                        global.VKJSBridge.showInvite(request.dialogParams.message, uidsString, function (response) {
                            try {
                                this.log("VKJSBridge.showInvite" + JSON.stringify(response));
                            }
                            catch (e) { }
                            var success = response.length > 0;
                            var to = (response instanceof Array ? response : []);
                            dialogID = this.mFbDialogRequestsList.length - 1;
                            request = this.mFbDialogRequestsList[dialogID];
                            request.dialogResponce = success ? this.arrayToUrlParams(to) : "?error_code=" + this.USER_CANCELED_CODE;
                            this.executeRequestByKey(this.mCurrentRequestKey, false, { status: success ? 0 : 1, dialogID: dialogID });
                        }.bind(this));
                        if (uidsString == null || uidsString != null && uidsString.length <= 0) {
                            request.dialogResponce = "?error_code=" + this.USER_CANCELED_CODE;
                            this.executeRequestByKey(this.mCurrentRequestKey, false, { status: 1, dialogID: dialogID });
                        }
                    }
                    else {
                        request.dialogResponce = "?error_code=" + this.USER_CANCELED_CODE;
                        this.executeRequestByKey(this.mCurrentRequestKey, false, { status: 1, dialogID: dialogID });
                    }
                    return 0;
                }
            }
            catch (e) {
                this.log("showFBDialogAction: " + e.message);
            }
            ;
            return 1;
        };
        s3eVkontakte.prototype.getResponceFbDialogRequest = function (dialogID) {
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                this.log("ResponseRaw = " + request.dialogResponce);
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(request.dialogResponce);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) { }
            return null;
        };
        s3eVkontakte.prototype.deleteFBDialogAction = function (dialogID) {
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                request.setDeleteStatus(true);
                return 0;
            }
            catch (e) { }
            return 1;
        };
        s3eVkontakte.prototype.getFBDialog_ErrorCode = function (dialogID) {
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                return request.dialogErrorCode;
            }
            catch (e) { }
            return 0;
        };
        s3eVkontakte.prototype.ReauthorizeWithPermissions = function (sessionId, permissions, userText, callbackKey) {
            this.mCurrentRequestKey = s3eVkontakte.keyLogin;
            this.mRequests.set(s3eVkontakte.keyLogin, new Request(callbackKey));
            global.setTimeout(this.executeRequestByKey.bind(this), 1, s3eVkontakte.keyLogin, false, { status: 1 });
            return 0;
        };
        s3eVkontakte.prototype.onCallbackSendGraphRequest = function (result, fail) {
            if (fail === void 0) { fail = null; }
            var params = new Object;
            var requestID = this.mGraphRequestsList.length - 1;
            var request = this.mGraphRequestsList[requestID];
            if (result) {
                this.log("Complete execute " + s3eVkontakte.keyFBRequest_Send);
                params.status = 0;
                params.requestID = requestID;
                request.requestResponce = result;
                this.executeRequestByKey(s3eVkontakte.keyFBRequest_Send, true, params);
            }
            else {
                this.log("FAIL execute " + s3eVkontakte.keyFBRequest_Send + ": " + (fail ? JSON.stringify(fail) : "The result was not found"));
                params.status = 1;
                params.requestID = requestID;
                request.requestResponce = fail;
                this.executeRequestByKey(s3eVkontakte.keyFBRequest_Send, false, params);
            }
        };
        s3eVkontakte.prototype.executeRequestByKey = function (key, isCompleate, params, statusCode) {
            if (statusCode === void 0) { statusCode = 0; }
            var request;
            if (this.mRequests.get(key) != null) {
                this.log("Execute callback for key = " + key);
                request = this.mRequests.get(key);
                var JSONdata;
                if (params)
                    JSONdata = JSON.stringify(params);
                var dataItem = new global.ByteArray();
                dataItem.writeUTFBytes(JSONdata);
                dataItem.position = 0;
                if (this.mCallbacks.get(request.completeHandler)) {
                    this.mCallbacks.get(request.completeHandler)(dataItem, this.mEmptyData);
                    this.mCallbacks.delete(request.completeHandler);
                    return;
                }
                this.mViewer["doCallback"](request.completeHandler, dataItem, this.mEmptyData);
            }
            else {
                this.log("callback with key " + key + " not found");
            }
        };
        s3eVkontakte.prototype.clearWaitingDialog = function () {
            this.mWaitingDialogMethod = null;
            global.clearTimeout(this.mWaitingDialog);
        };
        s3eVkontakte.prototype.getVersionObject = function () {
            return { main: this.mVersionMain, graphic: this.mVersionGraphic, logic: this.mVersionLogic };
        };
        s3eVkontakte.prototype.exitFullscreen = function () {
            if (this.mViewer && this.mViewer.stage && this.mViewer.stage.displayState != global.StageDisplayState.NORMAL) {
                try {
                    this.mViewer.stage.displayState = global.StageDisplayState.NORMAL;
                }
                catch (error) {
                    global.GLog.print(error.message);
                }
            }
        };
        s3eVkontakte.prototype.log = function (message) {
            if (global.CONFIG.QA_VERSION)
                global.GLog.print(this.TAG + message);
        };
        s3eVkontakte.ICF_GAME = "game";
        s3eVkontakte.keyInit = "s3eFBInit";
        s3eVkontakte.keyCheckLogin = "s3eFBSession_LoggedIn";
        s3eVkontakte.keyLogin = "s3eFBSession_Login";
        s3eVkontakte.keyLogout = "s3eFBTerminate";
        s3eVkontakte.keyInitFBRequest_WithGraphPath = "s3eFBRequest_WithGraphPath";
        s3eVkontakte.keyFBRequest_AddParamString = "s3eFBRequest_AddParamString";
        s3eVkontakte.keyFBRequest_AddParamNumber = "s3eFBRequest_AddParamNumber";
        s3eVkontakte.keyFBRequest_AddParamStringInternal = "s3eFBRequest_AddParamStringInternal";
        s3eVkontakte.keyFBRequest_Send = "s3eFBRequest_Send";
        s3eVkontakte.keyFBRequest_Delete = "s3eFBRequest_Delete";
        s3eVkontakte.keyFBRequest_ErrorCode = "s3eFBRequest_ErrorCode";
        s3eVkontakte.keyFBRequest_ErrorString = "s3eFBRequest_ErrorString";
        s3eVkontakte.keyFBDialog_ErrorCode = "s3eFBDialog_ErrorCode";
        s3eVkontakte.keyFBDialog_WithAction = "s3eFBDialog_WithAction";
        s3eVkontakte.keyFBDialog_AddParamString = "s3eFBDialog_AddParamString";
        s3eVkontakte.keyFBDialog_AddParamNumber = "s3eFBDialog_AddParamNumber";
        s3eVkontakte.keyFBDialog_AddParamStringInternal = "s3eFBDialog_AddParamStringInternal";
        s3eVkontakte.keyFBDialog_Show = "s3eFBDialog_Show";
        s3eVkontakte.keyFBDialog_Delete = "s3eFBDialog_Delete";
        s3eVkontakte.keyFBSession_ReauthorizeWithPublishPermissions = "s3eFBSession_ReauthorizeWithPublishPermissions";
        s3eVkontakte.keyFBSession_ReauthorizeWithReadPermissions = "s3eFBSession_ReauthorizeWithReadPermissions";
        s3eVkontakte.keyFBRequest_ResponseRaw = "s3eFBRequest_ResponseRaw";
        s3eVkontakte.keyFBSession_AccessToken = "s3eFBSession_AccessToken";
        s3eVkontakte.keyFBDialog_DidCompleteWithUrl = "s3eFBDialog_DidCompleteWithUrl";
        s3eVkontakte.keyFBGetAppID = "s3eFBGetAppID";
        return s3eVkontakte;
    }(global.EventDispatcher));
    global.s3eVkontakte = s3eVkontakte;
})(global || (global = {}));
var Request = (function () {
    function Request(completeHandlerKey, errorHandlerKey) {
        if (errorHandlerKey === void 0) { errorHandlerKey = -1; }
        this.completeHandler = 0;
        this.errorHandler = 0;
        this.completeHandler = completeHandlerKey;
        this.errorHandler = errorHandlerKey;
    }
    return Request;
}());
var global;
(function (global) {
    global.VKJSBridge = api.vk.VKJSBridge;
    global.VKCallbackEvent = api.vk.events.VKCallbackEvent;
    global.DisplayObject = flash.display.DisplayObject;
    global.StageDisplayState = flash.display.StageDisplayState;
    global.Event = flash.events.Event;
    global.EventDispatcher = flash.events.EventDispatcher;
    global.IOErrorEvent = flash.events.IOErrorEvent;
    global.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    global.ExternalInterface = flash.external.ExternalInterface;
    global.URLLoader = flash.net.URLLoader;
    global.URLRequest = flash.net.URLRequest;
    global.URLRequestMethod = flash.net.URLRequestMethod;
    global.URLVariables = flash.net.URLVariables;
    global.Capabilities = flash.system.Capabilities;
    global.ByteArray = flash.utils.ByteArray;
    global.Dictionary = flash.utils.Dictionary;
    global.clearTimeout = flash.utils.clearTimeout;
    global.getTimer = flash.utils.getTimer;
    global.setTimeout = flash.utils.setTimeout;
    global.Online = s3eUtils.Online;
    global.Parse = s3eUtils.Parse;
    global.SHttpSecure = s3eUtils.SHttpSecure;
    global.getVKCallbackEvent = s3eUtils.getVKCallbackEvent;
    var s3eVkontakteBilling = (function (_super) {
        __extends(s3eVkontakteBilling, _super);
        function s3eVkontakteBilling(data) {
            var _this = _super.call(this) || this;
            _this.is_Is3eExtensionBilling = null;
            _this.TAG = "[Vkontakte Billing] ";
            _this.mWithCallbacksId = 0;
            _this.mIsInited = false;
            _this.mPurchaseIsConsumable = false;
            _this.mLocalMode = false;
            _this.mWaitingDialogTimestamp = 0;
            _this.mWaitingDialog = 0;
            _this.mLocalMode = data == null;
            _this.mEmptyData = new global.ByteArray;
            _this.mPaymetsInfo = new global.Dictionary;
            _this.log("s3eVkontakteBilling (localMode = " + _this.mLocalMode + ")");
            _this.refresh();
            return _this;
        }
        s3eVkontakteBilling.prototype.setViewer = function (viewer) {
            this.mViewer = viewer;
        };
        s3eVkontakteBilling.prototype.setCloud = function (cloud) {
        };
        s3eVkontakteBilling.prototype.setCloudPush = function (cloud) {
        };
        s3eVkontakteBilling.prototype.saved = function () {
            if (this.mConsumeDelayed) {
                this.mConsumeProductId = this.mConsumeDelayed;
                var request = new global.URLRequest(this.mServiceURL);
                request.method = global.URLRequestMethod.POST;
                var vars = new global.URLVariables;
                vars.consume = this.mConsumeProductId;
                request.data = vars;
                this.mConsumeLoader.load(request);
                this.mConsumeDelayed = null;
            }
        };
        s3eVkontakteBilling.prototype.setServiceURL = function (url) {
            this.mServiceURL = this.https2http(url);
            this.log("mServiceURL: " + this.mServiceURL);
            this.mPaymentsLoader = new global.URLLoader;
            this.mPaymentsLoader.addEventListener(global.Event.COMPLETE, function (event) {
                global.EventStats.handle(s3eVkontakteBilling, event);
                var data = this.mPaymentsLoader.data;
                if (data) {
                    try {
                        var json = JSON.parse(data);
                    }
                    catch (error) {
                        this.log("Ошибка при парсинге списка покупок: " + error.message + ". data = " + data);
                    }
                    if (json && json.data && "length" in json.data) {
                        var map = {};
                        var len = json.data.length;
                        for (var i = 0; i < len; ++i) {
                            var sku = json.data[i].id;
                            if (this.mWaitingDialogMethod) {
                                if (sku == this.mPurchaseProductId) {
                                    this.apiCallback(global.getVKCallbackEvent(this.mWaitingDialogMethod, "ok"));
                                    if (this.mPurchaseIsConsumable) {
                                        var request = new global.URLRequest(this.mServiceURL);
                                        request.method = global.URLRequestMethod.POST;
                                        var vars = new global.URLVariables;
                                        vars.consume = this.mPurchaseProductId;
                                        request.data = vars;
                                        this.mConsumeLoader.load(request);
                                    }
                                    return;
                                }
                                continue;
                            }
                            this.log("Payment: " + sku);
                            if (!map[sku]) {
                                map[sku] = true;
                                this.doCallback(this.mBillingCallbacks.get(s3eVkontakteBilling.s3eVkontakteBillingSetRestoredCallback), { productID: sku });
                                this.log("Покупка восстановлена (" + sku + ")");
                            }
                        }
                    }
                }
                if (this.mWaitingDialogMethod) {
                    this.apiCallback(global.getVKCallbackEvent(this.mWaitingDialogMethod, "cancel"));
                    return;
                }
                this.log("Обновление транзакций завершено");
            }.bind(this));
            this.mPaymentsLoader.addEventListener(global.IOErrorEvent.IO_ERROR, this.onTransactionRestoreFailed.bind(this));
            this.mPaymentsLoader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, this.onTransactionRestoreFailed.bind(this));
            this.mConsumeLoader = new global.URLLoader;
            this.mConsumeLoader.addEventListener(global.Event.COMPLETE, function (event) {
                global.EventStats.handle(s3eVkontakteBilling, event);
                var data = this.mConsumeLoader.data;
                if (data) {
                    var response = JSON.parse(data);
                    if ("status" in response && response.status.toLowerCase() == "ok") {
                        this.log("Покупка успешно потреблена");
                        return;
                    }
                }
                this.log("Ошибка потребления покупки");
            }.bind(this));
            this.mConsumeLoader.addEventListener(global.IOErrorEvent.IO_ERROR, this.onConsumeFailed.bind(this));
            this.mConsumeLoader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, this.onConsumeFailed.bind(this));
            global.VKJSBridge.addEventListener(global.VKCallbackEvent.CALL_BACK, this.apiCallback.bind(this));
        };
        s3eVkontakteBilling.prototype.s3eCommonIntWithCallback = function (funcName, params, callback) {
            this.mWithCallbacksId++;
            this.mWithCallbacks.set(this.mWithCallbacksId, callback);
            return this.s3eCommonInt(funcName, this.mWithCallbacksId, params);
        };
        s3eVkontakteBilling.prototype.s3eCommonInt = function (funcName, cbID, params) {
            this.log("s3eCommonInt");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            var dataItem;
            if (params && params.length > 0)
                dataItem = JSON.parse(params);
            if (this.mLocalMode) {
                switch (funcName) {
                    case s3eVkontakteBilling.s3eVkontakteBillingRequestProductsInformation:
                    case s3eVkontakteBilling.s3eVkontakteBillingConsumeItem:
                    case s3eVkontakteBilling.s3eVkontakteBillingRestoreCompletedTransactions:
                        return 0;
                    case s3eVkontakteBilling.s3eVkontakteBillingRequestPayment:
                        this.mPurchaseProductId = dataItem.productID;
                        this.apiCallback(global.getVKCallbackEvent("showPayment", "cancel"));
                        return 0;
                }
            }
            switch (funcName) {
                case s3eVkontakteBilling.s3eVkontakteBillingInit:
                    return 1;
                case s3eVkontakteBilling.s3eVkontakteBillingSetErrorCallback:
                case s3eVkontakteBilling.s3eVkontakteBillingSetPurchasedCallback:
                case s3eVkontakteBilling.s3eVkontakteBillingSetRestoredCallback:
                case s3eVkontakteBilling.s3eVkontakteBillingSetInfoCallback:
                    this.mBillingCallbacks.set(funcName, cbID);
                    return 0;
                case s3eVkontakteBilling.s3eVkontakteBillingRequestProductsInformation:
                    if (!dataItem || (dataItem && !dataItem.products))
                        return 1;
                    if (!global.ExternalInterface.available)
                        return 1;
                    global.skipCachedProductsInformation(dataItem);
                    if (!dataItem.products.length)
                        return 1;
                    for (var _i = 0, _a = dataItem.products; _i < _a.length; _i++) {
                        var url = _a[_i];
                        var loader = new global.URLLoader;
                        this.mPaymetsInfo.set(loader, url);
                        loader.addEventListener(global.Event.COMPLETE, function (event) {
                            global.EventStats.handle(s3eVkontakteBilling, event);
                            var loader = event.target;
                            if (!loader.data)
                                return;
                            try {
                                var result = new global.XML(loader.data);
                            }
                            catch (error) {
                                this.log(error.message);
                                return;
                            }
                            var localeIsRu = global.Capabilities.language.substr(0, 2).indexOf("ru") >= 0;
                            var productID = this.mPaymetsInfo.get(loader);
                            var price = Math.round(parseFloat(result.meta.$(function (n) { return n.$property == "product:price:amount"; }).$content));
                            var title = result.meta.$(function (n) { return n.$property == "og:title"; }).$content;
                            var description = result.meta.$(function (n) { return n.$property == "og:description"; }).$content;
                            var currency = localeIsRu ? this.declensionRu(price, "голос", "голоса", "голосов") : this.declensionEn(price, "vote", "votes");
                            var priceStr = price + " " + currency;
                            this.mPaymetsInfo.set(productID, { code: productID, price: price, name: title, description: description });
                            this.log("Информация о покупке: price=" + price + ", priceStr=" + priceStr + ", currency=" + currency + ", id=" + productID);
                            this.doCallback(this.mBillingCallbacks.get(s3eVkontakteBilling.s3eVkontakteBillingSetInfoCallback), { productID: productID, mPrice: price, mPriceStr: priceStr, mCurrency: currency, mIsDiscount: false });
                        }.bind(this));
                        loader.addEventListener(global.IOErrorEvent.IO_ERROR, function (event) {
                            global.EventStats.handle(s3eVkontakteBilling, event);
                            this.log("Не удалось загрузить информацию о продукте: " + event.text);
                        }.bind(this));
                        loader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, function (event) {
                            global.EventStats.handle(s3eVkontakteBilling, event);
                            this.log("Не удалось загрузить информацию о продукте: " + event.text);
                        }.bind(this));
                        loader.load(new global.URLRequest(this.mServiceURL + "&item=" + url));
                    }
                    return 0;
                case s3eVkontakteBilling.s3eVkontakteBillingRequestPayment:
                    if (!dataItem || (dataItem && !dataItem.productID)) {
                        this.errorBilling(s3eVkontakteBilling.OBILLING_PURCHASE_PAYMENT_INVALID);
                        return 1;
                    }
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eVkontakteBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED, dataItem.productID);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eVkontakteBilling.OBILLING_NETWORK_NO_INTERNET, dataItem.productID);
                        return 1;
                    }
                    this.mPurchaseProductId = dataItem.productID;
                    this.mPurchaseIsConsumable = dataItem.isConsumable == 1;
                    this.exitFullscreen();
                    global.VKJSBridge.showPayment(this.mPurchaseProductId);
                    this.mWaitingDialogMethod = "showPayment";
                    this.mWaitingDialogTimestamp = global.getTimer();
                    return 0;
                case s3eVkontakteBilling.s3eVkontakteBillingConsumeItem:
                    if (!dataItem || (dataItem && !dataItem.productID || dataItem.productID.length == 0)) {
                        this.errorBilling(s3eVkontakteBilling.OBILLING_PURCHASE_PAYMENT_INVALID);
                        return 1;
                    }
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eVkontakteBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED, dataItem.productID);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eVkontakteBilling.OBILLING_NETWORK_NO_INTERNET, dataItem.productID);
                        return 1;
                    }
                    this.mConsumeDelayed = dataItem.productID;
                    return 0;
                case s3eVkontakteBilling.s3eVkontakteBillingRestoreCompletedTransactions:
                    if (!global.ExternalInterface.available) {
                        this.errorBilling(s3eVkontakteBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED);
                        return 1;
                    }
                    if (!global.Online.connected) {
                        this.errorBilling(s3eVkontakteBilling.OBILLING_NETWORK_NO_INTERNET);
                        return 1;
                    }
                    this.mPaymentsLoader.load(new global.URLRequest(this.mServiceURL));
                    return 0;
            }
            return -1;
        };
        s3eVkontakteBilling.prototype.s3eCommonStr = function (funcName, cbID, params) {
            return "";
        };
        s3eVkontakteBilling.prototype.s3eCommonData = function (funcName, cbID, params) {
            return this.mEmptyData;
        };
        s3eVkontakteBilling.prototype.refresh = function () {
            this.mWithCallbacks = new global.Dictionary;
            this.mBillingCallbacks = new global.Dictionary;
        };
        s3eVkontakteBilling.prototype.activate = function () {
            if (this.mWaitingDialogMethod && global.getTimer() - this.mWaitingDialogTimestamp > 1000)
                this.mWaitingDialog = global.setTimeout(this.mPaymentsLoader.load.bind(this.mPaymentsLoader), 100, new global.URLRequest(this.mServiceURL));
        };
        s3eVkontakteBilling.prototype.mouseDown = function () { };
        s3eVkontakteBilling.prototype.deactivate = function () { };
        s3eVkontakteBilling.prototype.exit = function () { };
        s3eVkontakteBilling.prototype.apiCallback = function (event) {
            var method = event.method, result = event.result, data = event.data;
            if (method == "getPageInfo")
                return;
            global.EventStats.handle(s3eVkontakteBilling, event);
            this.log("apiCallback: " + method + ", " + result + ", " + data);
            if (method == "showPayment") {
                this.clearWaitingDialog();
                this.dispatchEvent(new global.Event(global.Event.ACTIVATE));
                if (result && result == "ok") {
                    this.log("Покупка прошла удачно: " + this.mPurchaseProductId);
                    this.doCallback(this.mBillingCallbacks.get(s3eVkontakteBilling.s3eVkontakteBillingSetPurchasedCallback), { productID: this.mPurchaseProductId });
                }
                else {
                    var error_code = s3eVkontakteBilling.OBILLING_PURCHASE_CANCELED;
                    this.log("Ошибка покупки: " + this.mPurchaseProductId + " (" + error_code + ")");
                    this.errorBilling(error_code, this.mPurchaseProductId);
                }
            }
        };
        s3eVkontakteBilling.prototype.onTransactionRestoreFailed = function ($event) {
            global.EventStats.handle(s3eVkontakteBilling, $event);
            this.log("Ошибка обновления транзакций: " + $event.type + ("text" in $event ? ", " + $event["text"] : ""));
            this.errorBilling(s3eVkontakteBilling.OBILLING_ERROR_UNKNOWN);
        };
        s3eVkontakteBilling.prototype.onConsumeFailed = function ($event) {
            global.EventStats.handle(s3eVkontakteBilling, $event);
            this.log("Ошибка потребления покупки: " + this.mConsumeProductId);
            this.errorBilling(s3eVkontakteBilling.OBILLING_ERROR_UNKNOWN);
        };
        s3eVkontakteBilling.prototype.errorBilling = function (errorCode, productID) {
            if (productID === void 0) { productID = ""; }
            this.doCallback(this.mBillingCallbacks.get(s3eVkontakteBilling.s3eVkontakteBillingSetErrorCallback), { productID: productID, errorCode: errorCode, errorMessage: this.errorMessage(errorCode) });
        };
        s3eVkontakteBilling.prototype.doCallback = function (cbAddr, response) {
            var dataItem = new global.ByteArray;
            dataItem.writeUTFBytes(JSON.stringify(response));
            dataItem.writeByte(0);
            dataItem.position = 0;
            this.mViewer["doCallback"](cbAddr, dataItem, this.mEmptyData);
        };
        s3eVkontakteBilling.prototype.errorMessage = function (errorCode) {
            switch (errorCode) {
                case s3eVkontakteBilling.OBILLING_ERROR_UNKNOWN: return "Unknown error";
                case s3eVkontakteBilling.OBILLING_PURCHASE_CLIENT_INVALID: return "Client is not allowed to make the payment";
                case s3eVkontakteBilling.OBILLING_PURCHASE_CANCELED: return "Client canceled purchase";
                case s3eVkontakteBilling.OBILLING_PURCHASE_PAYMENT_INVALID: return "Invalid parameter/purchase ID";
                case s3eVkontakteBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED: return "Device is not allowed to make the payment";
                case s3eVkontakteBilling.OBILLING_NETWORK_NO_NETWORK: return "No network connection";
                case s3eVkontakteBilling.OBILLING_NETWORK_NO_INTERNET: return "No internet connection";
                default: return "Unknown error code";
            }
        };
        s3eVkontakteBilling.prototype.https2http = function (value) {
            return global.SHttpSecure.getInstance().useCorrectProtocolForUrl(value);
        };
        s3eVkontakteBilling.prototype.clearWaitingDialog = function () {
            this.mWaitingDialogMethod = null;
            this.mWaitingDialogTimestamp = 0;
            global.clearTimeout(this.mWaitingDialog);
        };
        s3eVkontakteBilling.prototype.exitFullscreen = function () {
            if (this.mViewer && this.mViewer.stage && this.mViewer.stage.displayState != global.StageDisplayState.NORMAL) {
                try {
                    this.mViewer.stage.displayState = global.StageDisplayState.NORMAL;
                }
                catch (error) {
                    global.GLog.print(error.message);
                }
            }
        };
        s3eVkontakteBilling.prototype.declensionRu = function (number, one, two, five) {
            number = Math.abs(number);
            number %= 100;
            if (number >= 5 && number <= 20) {
                return five;
            }
            number %= 10;
            if (number == 1) {
                return one;
            }
            if (number >= 2 && number <= 4) {
                return two;
            }
            return five;
        };
        s3eVkontakteBilling.prototype.declensionEn = function (number, one, two) {
            if (number < 2)
                return one;
            return two;
        };
        s3eVkontakteBilling.prototype.log = function (message) {
            global.GLog.print(this.TAG + message);
        };
        s3eVkontakteBilling.s3eVkontakteBillingInit = "s3eVkontakteBillingInit";
        s3eVkontakteBilling.s3eVkontakteBillingSetErrorCallback = "s3eVkontakteBillingSetErrorCallback";
        s3eVkontakteBilling.s3eVkontakteBillingSetPurchasedCallback = "s3eVkontakteBillingSetPurchasedCallback";
        s3eVkontakteBilling.s3eVkontakteBillingSetRestoredCallback = "s3eVkontakteBillingSetRestoredCallback";
        s3eVkontakteBilling.s3eVkontakteBillingSetInfoCallback = "s3eVkontakteBillingSetInfoCallback";
        s3eVkontakteBilling.s3eVkontakteBillingRequestProductsInformation = "s3eVkontakteBillingRequestProductsInformation";
        s3eVkontakteBilling.s3eVkontakteBillingRequestPayment = "s3eVkontakteBillingRequestPayment";
        s3eVkontakteBilling.s3eVkontakteBillingConsumeItem = "s3eVkontakteBillingConsumeItem";
        s3eVkontakteBilling.s3eVkontakteBillingRestoreCompletedTransactions = "s3eVkontakteBillingRestoreCompletedTransactions";
        s3eVkontakteBilling.OBILLING_ERROR_UNKNOWN = 0;
        s3eVkontakteBilling.OBILLING_PURCHASE_CLIENT_INVALID = 1;
        s3eVkontakteBilling.OBILLING_PURCHASE_CANCELED = 2;
        s3eVkontakteBilling.OBILLING_PURCHASE_PAYMENT_INVALID = 3;
        s3eVkontakteBilling.OBILLING_PURCHASE_PAYMENT_NOT_ALLOWED = 4;
        s3eVkontakteBilling.OBILLING_NETWORK_NO_NETWORK = 5;
        s3eVkontakteBilling.OBILLING_NETWORK_NO_INTERNET = 6;
        return s3eVkontakteBilling;
    }(global.EventDispatcher));
    global.s3eVkontakteBilling = s3eVkontakteBilling;
})(global || (global = {}));
var global;
(function (global) {
    global.RUJSBridge = api.ru.RUJSBridge;
    global.RUCallbackEvent = api.ru.events.RUCallbackEvent;
    global.RUServerEvent = api.ru.events.RUServerEvent;
    global.DisplayObject = flash.display.DisplayObject;
    global.StageDisplayState = flash.display.StageDisplayState;
    global.Event = flash.events.Event;
    global.EventDispatcher = flash.events.EventDispatcher;
    global.IOErrorEvent = flash.events.IOErrorEvent;
    global.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    global.ExternalInterface = flash.external.ExternalInterface;
    global.URLLoader = flash.net.URLLoader;
    global.URLLoaderDataFormat = flash.net.URLLoaderDataFormat;
    global.URLRequest = flash.net.URLRequest;
    global.Capabilities = flash.system.Capabilities;
    global.ByteArray = flash.utils.ByteArray;
    global.Dictionary = flash.utils.Dictionary;
    global.clearTimeout = flash.utils.clearTimeout;
    global.getTimer = flash.utils.getTimer;
    global.setTimeout = flash.utils.setTimeout;
    global.FbDialogRequest = s3eSocial.FbDialogRequest;
    global.FbGraphRequest = s3eSocial.FbGraphRequest;
    global.AppIcf = s3eUtils.AppIcf;
    global.Parse = s3eUtils.Parse;
    var s3eMailru = (function (_super) {
        __extends(s3eMailru, _super);
        function s3eMailru(appId) {
            var _this = _super.call(this) || this;
            _this.is_Is3eExtensionSocial = null;
            _this.TAG = "[Mailru] ";
            _this.USER_CANCELED_CODE = 4201;
            _this.USER_UPDATE_INTERVAL = 5 * 60 * 1000;
            _this.USID_PREFIX = "ru_";
            _this.DEFAULT_TABLE_ID = "Mailru";
            _this.TABLE_ID = _this.DEFAULT_TABLE_ID;
            _this.mIsInited = false;
            _this.mIsLogged = false;
            _this.mParseUsersTimestamp = 0;
            _this.mCallbacksId = 0;
            _this.mWaitingDialog = 0;
            _this.mAppId = appId;
            _this.mParseUsers = new global.Dictionary;
            _this.mEmptyData = new global.ByteArray;
            _this.refresh();
            return _this;
        }
        s3eMailru.prototype.setViewer = function (viewer) {
            this.mViewer = viewer;
        };
        s3eMailru.prototype.setCloud = function (cloud) {
            this.mCloud = cloud;
        };
        s3eMailru.prototype.setCloudPush = function (cloud) {
            this.mCloudPush = cloud;
        };
        Object.defineProperty(s3eMailru.prototype, "appId", {
            get: function () {
                return this.mAppId;
            },
            enumerable: true,
            configurable: true
        });
        s3eMailru.prototype.setLeaderboardTableId = function (id) {
            this.TABLE_ID = id;
        };
        s3eMailru.prototype.s3eCommonIntWithCallback = function (funcName, params, callback) {
            this.mCallbacksId++;
            this.mCallbacks.set(this.mCallbacksId, callback);
            return this.s3eCommonInt(funcName, this.mCallbacksId, params);
        };
        s3eMailru.prototype.s3eCommonInt = function (funcName, cbID, params) {
            this.log("s3eCommonInt");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            if (params && params.length > 0)
                var dataItem = JSON.parse(params);
            switch (funcName) {
                case s3eMailru.keyInit:
                    return this.init(dataItem.appId, dataItem.appVersion);
                case s3eMailru.keyCheckLogin:
                    return int(this.checkLogin(dataItem));
                case s3eMailru.keyLogin:
                    return int(this.login(dataItem.sessionID, dataItem.permissions, cbID));
                case s3eMailru.keyLogout:
                    return 0;
                case s3eMailru.keyInitFBRequest_WithGraphPath:
                    return this.initFBGraphRequest(dataItem.graphPath, dataItem.httpMethod);
                case s3eMailru.keyFBRequest_AddParamString:
                case s3eMailru.keyFBRequest_AddParamNumber:
                case s3eMailru.keyFBRequest_AddParamStringInternal:
                    return this.updateFBGraphRequestWithParams(dataItem.requestID, dataItem.name, dataItem.value);
                case s3eMailru.keyFBRequest_Send:
                    return this.sendFBGraphRequest(dataItem.requestID, cbID);
                case s3eMailru.keyFBRequest_Delete:
                    return this.deleteFBGraphRequest(dataItem.requestID);
                case s3eMailru.keyFBDialog_WithAction:
                    return this.initFBDialogWithAction(dataItem.action);
                case s3eMailru.keyFBDialog_AddParamString:
                case s3eMailru.keyFBDialog_AddParamNumber:
                case s3eMailru.keyFBDialog_AddParamStringInternal:
                    return this.updateFBDialogActionWithParams(dataItem.dialogID, dataItem.name, dataItem.value);
                case s3eMailru.keyFBDialog_Show:
                    return this.showFBDialogAction(dataItem.dialogID, cbID);
                case s3eMailru.keyFBDialog_Delete:
                    return this.deleteFBDialogAction(dataItem.dialogID);
                case s3eMailru.keyFBRequest_ErrorCode:
                    return this.getFBRequest_ErrorCode(dataItem.requestID);
                case s3eMailru.keyFBDialog_ErrorCode:
                    return this.getFBDialog_ErrorCode(dataItem.dialogID);
                case s3eMailru.keyFBSession_ReauthorizeWithPublishPermissions:
                case s3eMailru.keyFBSession_ReauthorizeWithReadPermissions:
                    return this.ReauthorizeWithPermissions(dataItem.sessionID, dataItem.permissions, dataItem.userText, cbID);
            }
            return -1;
        };
        s3eMailru.prototype.s3eCommonStr = function (funcName, cbID, params) {
            this.log("s3eCommonStr");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            switch (funcName) {
                case s3eMailru.keyFBGetAppID:
                    return this.mAppId;
            }
            return "";
        };
        s3eMailru.prototype.s3eCommonData = function (funcName, cbID, params) {
            this.log("s3eCommonData");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            if (params && params.length > 0)
                var dataItem = JSON.parse(params);
            switch (funcName) {
                case s3eMailru.keyFBRequest_ErrorString:
                    return this.getFBRequest_ErrorString(dataItem.requestID);
                case s3eMailru.keyFBRequest_ResponseRaw:
                    return this.getResponseRaw(dataItem.requestID);
                case s3eMailru.keyFBSession_AccessToken:
                    return this.getFBAccessToken();
                case s3eMailru.keyFBDialog_DidCompleteWithUrl:
                    return this.getResponceFbDialogRequest(dataItem.dialogID);
            }
            return this.mEmptyData;
        };
        s3eMailru.prototype.refresh = function () {
            this.mRequests = new global.Dictionary;
            this.mCallbacks = new global.Dictionary;
            this.mGraphRequestsList = new Array;
            this.mFbDialogRequestsList = new Array;
        };
        s3eMailru.prototype.activate = function () {
        };
        s3eMailru.prototype.mouseDown = function () { };
        s3eMailru.prototype.deactivate = function () { };
        s3eMailru.prototype.exit = function () { };
        s3eMailru.prototype.init = function (appID, appVersion) {
            this.log("Call init function");
            if (!this.mIsInited) {
                this.mVersionMain = global.AppIcf.read(s3eMailru.ICF_GAME, "VersionMain");
                this.mVersionGraphic = global.AppIcf.read(s3eMailru.ICF_GAME, "VersionGraphic");
                this.mVersionLogic = global.AppIcf.read(s3eMailru.ICF_GAME, "VersionLogic");
                this.mMarket = global.AppIcf.read(s3eMailru.ICF_GAME, "Market");
                this.mAppFacebookId = appID;
                this.mAppVersion = appVersion;
                this.mIsInited = true;
                this.log("Init mailru with appId = " + this.mAppId + " with app version = " + appVersion + " with facebookId = " + this.mAppFacebookId);
            }
            return 0;
        };
        s3eMailru.prototype.checkLogin = function (session) {
            if (session === void 0) { session = null; }
            this.log("Call checklogin function");
            return (this.mIsLogged && this.mIsInited);
        };
        s3eMailru.prototype.login = function (sessionId, permissions, callbackKey) {
            this.mCurrentRequestKey = s3eMailru.keyLogin;
            this.mRequests.set(s3eMailru.keyLogin, new Request(callbackKey));
            this.log("Call login function");
            if (this.checkLogin()) {
                this.log("Already login");
                this.mIsLogged = true;
                this.executeRequestByKey(s3eMailru.keyLogin, true, { status: 0 });
                return 0;
            }
            else {
                this.log("Need auth");
                this.log("Auth with permissions = " + permissions);
                global.RUJSBridge.addEventListener(global.RUServerEvent.CONNECTED, onConnect.bind(this));
                global.RUJSBridge.addEventListener(global.RUServerEvent.LIKE_PRESSED, onLike.bind(this));
                global.RUJSBridge.initialize(this.mAppId);
                function onLike(e) {
                    var msg = "";
                    try {
                        msg = ": " + (typeof e.data == 'string' ? e.data : JSON.stringify(e.data));
                    }
                    catch (error) { }
                    this.log("like" + msg);
                    var paramLike = "likes_app";
                    if (e.data && e.data.hasOwnProperty("data") && e.data.data == "unliked") {
                        paramLike = "dislikes_app";
                    }
                    this.mCloud.Call("save", {
                        game: {
                            market: this.mMarket
                        },
                        user: {
                            objectId: this.mViewer['cloudUser'].objectId,
                            udid: this.USID_PREFIX + this.mRuMe.uid,
                            stats: [paramLike]
                        }
                    });
                    this.writeCloudStatsParam('like', paramLike == 'likes_app');
                }
                function onConnect(e) {
                    global.EventStats.handle(s3eMailru, e);
                    var msg = "";
                    try {
                        msg = ": " + (typeof e.data == 'string' ? e.data : JSON.stringify(e.data));
                    }
                    catch (error) { }
                    this.log("connected" + msg);
                    global.RUJSBridge.getCurrentUser(function (userRu) {
                        this.mRuMe = userRu[0];
                        this.log("mRuMe" + JSON.stringify(this.mRuMe));
                        this.mIsLogged = true;
                        this.executeRequestByKey(s3eMailru.keyLogin, true, { status: 0 });
                    }.bind(this));
                }
                function onErrorConnection(e) {
                    global.EventStats.handle(s3eMailru, e);
                    var msg = "";
                    try {
                        msg = ": " + (typeof e.data == 'string' ? e.data : JSON.stringify(e.data));
                    }
                    catch (error) { }
                    this.log("unable to connect" + msg);
                    if ("showLoadingError" in this.mViewer) {
                        this.mViewer["showLoadingError"]("login");
                    }
                    return;
                }
                return 0;
            }
        };
        s3eMailru.prototype.apiCallback = function (event) {
        };
        s3eMailru.prototype.to2recipients = function (to) {
            var recipients = [];
            for (var _i = 0, to_5 = to; _i < to_5.length; _i++) {
                var usid = to_5[_i];
                recipients.push({ usid: this.USID_PREFIX + usid });
            }
            return recipients;
        };
        s3eMailru.prototype.arrayToUrlParams = function (dataItem) {
            var str = "";
            if (dataItem)
                for (var i = 0; i < dataItem.length; ++i)
                    str += "?to[" + i + "]=" + dataItem[i];
            return str;
        };
        s3eMailru.prototype.initFBGraphRequest = function (path, httpMethod) {
            this.mGraphRequestsList.push(new global.FbGraphRequest(path, httpMethod));
            return this.mGraphRequestsList.length - 1;
        };
        s3eMailru.prototype.updateFBGraphRequestWithParams = function (requestID, name, value) {
            try {
                this.mGraphRequestsList[requestID].setParam(name, value);
                return 0;
            }
            catch (e) { }
            return 1;
        };
        s3eMailru.prototype.sendFBGraphRequest = function (requestID, callbackKey) {
            this.mCurrentRequestKey = s3eMailru.keyFBRequest_Send;
            this.mRequests.set(this.mCurrentRequestKey, new Request(callbackKey));
            try {
                var request = this.mGraphRequestsList[requestID];
                this.log("request: path = " + request.requestPath + ", method = " + request.requestHttpMethod);
                if (request.requestHttpMethod == "DELETE") {
                    this.mCloud.Call("clear", { request: { objectId: request.requestPath } }, function (data) {
                        if (data === void 0) { data = null; }
                        this.onCallbackSendGraphRequest("ok");
                    }.bind(this), function (data) {
                        if (data === void 0) { data = null; }
                        this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                    }.bind(this));
                    return 0;
                }
                if (request.requestPath == "me") {
                    global.RUJSBridge.getCurrentUser(function (userRu) {
                        if (userRu && userRu.length > 0) {
                            userRu = this.mailru2fb(userRu[0], true);
                            this.onCallbackSendGraphRequest(userRu);
                        }
                    }.bind(this));
                    return 0;
                }
                if (request.requestPath == "me/friends") {
                    global.RUJSBridge.getAllFriends(function (friends) {
                        if (!friends || friends.length <= 0)
                            friends = [];
                        var friendsInfoArray = friends;
                        var result = [];
                        var len = friendsInfoArray.length;
                        for (var i = 0; i < len; ++i) {
                            if (friendsInfoArray[i].app_installed == 0)
                                continue;
                            result.push(this.mailru2fb(friendsInfoArray[i], true));
                        }
                        this.onCallbackSendGraphRequest(result, null);
                    }.bind(this));
                    return 0;
                }
                if (request.requestPath == "me/invitable_friends") {
                    global.RUJSBridge.getAllFriends(function (friends) {
                        if (!friends || friends.length <= 0)
                            friends = [];
                        var friendsInfoArray = friends;
                        var result = [];
                        var len = friendsInfoArray.length;
                        for (var i = 0; i < len; ++i) {
                            if (friendsInfoArray[i].app_installed == 1)
                                continue;
                            result.push(this.mailru2fb(friendsInfoArray[i], false));
                        }
                        this.onCallbackSendGraphRequest(result, null);
                    }.bind(this));
                    return 0;
                }
                if (request.requestPath == "me/scores") {
                    if (this.mParseUsers.get(this.mRuMe.uid.toString()))
                        this.mParseUsers.get(this.mRuMe.uid.toString()).scores = this.parseScore2Fb(this.mRuMe.uid.toString(), request.requestParams.score);
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, "ok", null);
                    return 0;
                }
                if (request.requestPath == "me/permissions") {
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, [{ permission: "user_friends", status: "granted" }, { permission: "publish_actions", status: "granted" }], null);
                    return 0;
                }
                if (request.requestPath == this.mAppFacebookId + "/permissions") {
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, [{ permission: "user_friends", status: "live" }, { permission: "publish_actions", status: "live" }], null);
                    return 0;
                }
                if (request.requestPath == "me/apprequests") {
                    this.mCloud.Call("requests", { user: { usid: this.USID_PREFIX + this.mRuMe.uid.toString() } }, function (data) {
                        if (data === void 0) { data = null; }
                        var result = [];
                        for (var _i = 0, _a = data.result; _i < _a.length; _i++) {
                            var req = _a[_i];
                            if (!req.from || !req.to)
                                continue;
                            result.push({ id: req.objectId,
                                data: req.data,
                                message: req.message,
                                from: { id: this.findUSID(req.from.usid), name: req.from.name },
                                to: { id: this.findUSID(req.to.usid), name: req.to.name } });
                        }
                        this.onCallbackSendGraphRequest(result, null);
                    }.bind(this), function (data) {
                        if (data === void 0) { data = null; }
                        this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                    }.bind(this));
                    return 0;
                }
                if (request.requestPath == "me/groups") {
                    var result = [];
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, result, null);
                    return 0;
                }
                if (request.requestPath == "me/og.likes") {
                    result = [];
                    if (this.readCloudStatsParam('like') == true) {
                        result.push({ id: "ok_shareWidget", application: { id: this.mAppFacebookId } });
                    }
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, result, null);
                    return 0;
                }
                if (request.requestHttpMethod == "GET" && request.requestPath == "me/achievements") {
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, { data: [] }, null);
                    return 0;
                }
                if (request.requestHttpMethod == "POST") {
                    if (request.requestPath.indexOf("/apprequests") != -1) {
                        var split = request.requestPath.split("/apprequests");
                        if (split.length < 2)
                            return 1;
                        var message = request.requestParams.message;
                        var data = request.requestParams.data;
                        var to = [split[0]];
                        global.RUJSBridge.showRequest(message, to.join(","), "https://ssl.absolutist.com/free_online/some.jpg", function (response) {
                            this.log("gift" + JSON.stringify(response));
                            if (response && response.id && response.id.length > 0) {
                                this.mCloud.Call("send", { user: { usid: this.USID_PREFIX + this.mRuMe.uid.toString() }, request: { message: message, data: data, recipients: this.to2recipients(to) } }, function (result) {
                                    if (result === void 0) { result = null; }
                                    this.log("gift posted");
                                    if (this.mCloudPush) {
                                        var list = [];
                                        var date = new Date;
                                        for (var _i = 0, to_6 = to; _i < to_6.length; _i++) {
                                            var id = to_6[_i];
                                            var fr = this.mParseUsers.get(id);
                                            list.push({ appId: this.mAppId, from: this.mRuMe.uid.toString(), to: id, message: message, data: data, time: date.time / 1000 });
                                        }
                                        if (list.length > 0) {
                                            this.mCloudPush.Call("register", {
                                                game: { market: this.mMarket, version: this.getVersionObject() },
                                                user: { usid: [this.USID_PREFIX + this.mRuMe.uid.toString()] },
                                                push: list
                                            });
                                        }
                                    }
                                    this.onCallbackSendGraphRequest({ request: "", to: to }, null);
                                }.bind(this), function (data) {
                                    if (data === void 0) { data = null; }
                                    this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                                }.bind(this));
                            }
                            else {
                                this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                            }
                        }.bind(this));
                        return 0;
                    }
                    if (request.requestPath.indexOf("achievements") != -1) {
                        this.log('Try post achievement');
                        var activity_id = 0;
                        for (var name in request.requestParams) {
                            var val = request.requestParams[name];
                            if (typeof val == 'string') {
                                if (name == 'achievement') {
                                    activity_id = parseInt(val);
                                    break;
                                }
                            }
                        }
                        if (this.mCloudPush && activity_id >= 3) {
                            this.mCloudPush.Call("third_party", {
                                game: {
                                    market: this.mMarket,
                                    version: this.getVersionObject(),
                                    appId: this.mAppId
                                },
                                user: {
                                    id: this.mRuMe.uid.toString()
                                },
                                command: {
                                    name: "secure.addAppEvent",
                                    params: {
                                        activity_id: activity_id,
                                        value: 0
                                    }
                                }
                            });
                        }
                        else {
                            this.log('[Error] there is no parameter with name "achievement"');
                        }
                        global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, { "id": "0" });
                        return 0;
                    }
                    if (request.requestPath.indexOf("me/") != -1) {
                        var locale = request.requestParams['locale'];
                        var objectURL = null;
                        for (name in request.requestParams) {
                            val = request.requestParams[name];
                            if (typeof val == 'string') {
                                var str = val;
                                if (str.indexOf("http") >= 0 && name.indexOf("image") == -1) {
                                    objectURL = str;
                                    break;
                                }
                            }
                        }
                        if (locale && objectURL) {
                            if (objectURL.indexOf("level_") && this.mCloudPush) {
                                var sub = objectURL.substring(objectURL.lastIndexOf('_') + 1, objectURL.lastIndexOf('.'));
                                var level = parseInt(sub);
                                if (level > 0 && level < 1000) {
                                    this.mCloudPush.Call("third_party", {
                                        game: {
                                            market: this.mMarket,
                                            version: this.getVersionObject(),
                                            appId: this.mAppId
                                        },
                                        user: {
                                            id: this.mRuMe.uid.toString()
                                        },
                                        command: {
                                            name: "secure.addAppEvent",
                                            params: {
                                                activity_id: 1,
                                                value: level
                                            }
                                        }
                                    });
                                }
                            }
                            var loader = new global.URLLoader;
                            loader.dataFormat = global.URLLoaderDataFormat.TEXT;
                            loader.addEventListener(global.Event.COMPLETE, function (event) {
                                global.EventStats.handle(s3eMailru, event);
                                try {
                                    var result = new global.XML(loader.data);
                                }
                                catch (error) {
                                    this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                                    return;
                                }
                                if (result) {
                                    var description = result.head.meta.$(function (n) { return n.$property == "og:description"; }).$content;
                                    var image = result.head.meta.$(function (n) { return n.$property == "og:image"; }).$content;
                                    var title = result.head.meta.$(function (n) { return n.$property == "og:title"; }).$content;
                                    if (!description)
                                        description = result.meta.$(function (n) { return n.$property == "og:description"; }).$content;
                                    if (!image)
                                        image = result.meta.$(function (n) { return n.$property == "og:image"; }).$content;
                                    if (!title)
                                        title = result.meta.$(function (n) { return n.$property == "og:title"; }).$content;
                                    var att = {
                                        description: description,
                                        media: [{ src: image }]
                                    };
                                    var text = {
                                        "type": "text",
                                        "text": att.description
                                    };
                                    var app = {
                                        "type": "app",
                                        "text": "",
                                        "images": [
                                            {
                                                "url": att.media[0].src,
                                                "mark": "mark_url",
                                                "title": att.description ? att.description : "image"
                                            }
                                        ]
                                    };
                                    this.exitFullscreen();
                                    global.RUJSBridge.showPost(title, att.description, this.mRuMe.uid.toString(), att.media[0].src, null, function (response) {
                                    }.bind(this));
                                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, { "id": "0" });
                                }
                                else {
                                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, null, "error");
                                }
                            }.bind(this));
                            loader.addEventListener(global.IOErrorEvent.IO_ERROR, function (event) {
                                global.EventStats.handle(s3eMailru, event);
                                this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                            }.bind(this));
                            loader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, function (event) {
                                global.EventStats.handle(s3eMailru, event);
                                this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                            }.bind(this));
                            loader.load(new global.URLRequest(objectURL + "?fb_locale=ru_RU"));
                            return 0;
                        }
                    }
                }
            }
            catch (e) {
                this.log("sendFBGraphRequest: " + e.message);
            }
            ;
            global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, null, { error: { message: "This function does not supported" } });
            return 1;
        };
        s3eMailru.prototype.readCloudStatsParam = function (param) {
            if (!this.mViewer)
                return null;
            if (!('cloudUser' in this.mViewer))
                return null;
            if (!this.mViewer['cloudUser'].stats)
                return null;
            if (!('length' in this.mViewer['cloudUser'].stats))
                return null;
            if (this.mViewer['cloudUser'].stats.length < 3)
                return null;
            return this.mViewer['cloudUser'].stats[2][param];
        };
        s3eMailru.prototype.writeCloudStatsParam = function (param, value) {
            if (!this.mViewer)
                return;
            if (!('cloudUser' in this.mViewer))
                return;
            if (!this.mViewer['cloudUser'].stats)
                return;
            if (!('length' in this.mViewer['cloudUser'].stats))
                return;
            if (this.mViewer['cloudUser'].stats.length < 3)
                return;
            this.mViewer['cloudUser'].stats[2][param] = value;
        };
        s3eMailru.prototype.mailru2fb = function (data, installed) {
            var user = {};
            user.id = data.uid.toString();
            user.name = data.first_name + " " + data.last_name;
            user.first_name = data.first_name;
            user.last_name = data.last_name;
            if (data.hasOwnProperty("pic_190")) {
                user.picture = { data: { url: data.pic_190 } };
            }
            else {
                user.picture = { data: { url: data.pic } };
            }
            user.installed = installed;
            user.locale = "ru";
            return user;
        };
        s3eMailru.prototype.getphotourl = function (aUrl, aSex) {
            var urltemp = aUrl.split('/').slice(2).join('/');
            if (urltemp == "vk.com/images/deactivated_50.png") {
                return "https://ssl.absolutist.com/free_online/timegap-beta/vkontakte/template/images/deactivated.jpg";
            }
            if (urltemp == "vk.com/images/camera_50.png") {
                if (aSex == 0) {
                    return "https://ssl.absolutist.com/free_online/timegap-beta/vkontakte/template/images/camera.jpg";
                }
                if (aSex == 1) {
                    return "https://ssl.absolutist.com/free_online/timegap-beta/vkontakte/template/images/female.jpg";
                }
                if (aSex == 2) {
                    return "https://ssl.absolutist.com/free_online/timegap-beta/vkontakte/template/images/male.jpg";
                }
            }
            return aUrl;
        };
        s3eMailru.prototype.findCloudUserById = function (list, userId) {
            for (var _i = 0, list_5 = list; _i < list_5.length; _i++) {
                var user = list_5[_i];
                if ("usid" in user && this.findUSID(user.usid) == userId)
                    return user;
            }
            return null;
        };
        s3eMailru.prototype.parseScore2Fb = function (userId, score) {
            return { data: [{ user: { id: userId }, score: score, application: { id: this.mAppFacebookId } }] };
        };
        s3eMailru.prototype.findUSID = function (list) {
            var usid = "";
            for (var _i = 0, list_6 = list; _i < list_6.length; _i++) {
                var value = list_6[_i];
                if (value.indexOf(this.USID_PREFIX) != -1) {
                    usid = value.split(this.USID_PREFIX).join("");
                    break;
                }
            }
            return usid;
        };
        s3eMailru.prototype.addPrefix2Ids = function (list) {
            var result = [];
            if (list) {
                var len = list.length;
                for (var i = 0; i < len; ++i)
                    result.push(this.USID_PREFIX + list[i]);
            }
            return result;
        };
        s3eMailru.prototype.deleteFBGraphRequest = function (requestID) {
            try {
                this.mGraphRequestsList[requestID].setDeleteStatus(true);
                return 0;
            }
            catch (e) {
                this.log("deleteFBGraphRequest: " + e.message);
            }
            return 1;
        };
        s3eMailru.prototype.getResponseRaw = function (requestID) {
            try {
                var request = this.mGraphRequestsList[requestID];
                var JSONdata = JSON.stringify(request.requestResponce);
                if (!JSONdata || JSONdata.length == 0 || JSONdata == "[]")
                    JSONdata = "{}";
                if (request.requestPath.indexOf("me/permissions") != -1 ||
                    request.requestPath.indexOf(this.mAppFacebookId + "/permissions") != -1 ||
                    request.requestPath.indexOf("me/friends") != -1 ||
                    request.requestPath.indexOf("me/invitable_friends") != -1 ||
                    request.requestPath.indexOf("me/apprequests") != -1 ||
                    request.requestPath.indexOf("me/groups") != -1 ||
                    request.requestPath.indexOf("me/og.likes") != -1) {
                    JSONdata = JSON.stringify({ data: request.requestResponce });
                }
                this.log("ResponseRaw = " + JSONdata);
                global.SocialStats.response(JSONdata);
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(JSONdata);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) {
                this.log("getResponseRaw Error: " + e.message);
                global.SocialStats.response(e.message);
            }
            return null;
        };
        s3eMailru.prototype.getFBRequest_ErrorCode = function (requestID) {
            try {
                return this.mGraphRequestsList[requestID].requestErrorCode;
            }
            catch (e) {
                this.log("getFBRequest_ErrorCode: " + e.message);
            }
            return 1;
        };
        s3eMailru.prototype.getFBRequest_ErrorString = function (requestID) {
            try {
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(this.mGraphRequestsList[requestID].requestErrorMessage);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) {
                this.log("error getFBRequest_ErrorString");
            }
            return this.mEmptyData;
        };
        s3eMailru.prototype.getFBAccessToken = function () {
            try {
                var accessToken = "";
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(accessToken);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) {
                this.log("getFBAccessToken: " + e.message);
            }
            return null;
        };
        s3eMailru.prototype.initFBDialogWithAction = function (action) {
            this.mFbDialogRequestsList.push(new global.FbDialogRequest(action));
            return this.mFbDialogRequestsList.length - 1;
        };
        s3eMailru.prototype.updateFBDialogActionWithParams = function (dialogID, name, value) {
            try {
                this.mFbDialogRequestsList[dialogID].setParam(name, value);
                return 0;
            }
            catch (e) {
                this.log("error updateFBDialogActionWithParams ");
            }
            return 1;
        };
        s3eMailru.prototype.showFBDialogAction = function (dialogID, callbackKey) {
            this.mCurrentRequestKey = s3eMailru.keyFBDialog_Show;
            this.mRequests.set(this.mCurrentRequestKey, new Request(callbackKey));
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                this.log("request.dialogAction = " + request.dialogAction);
                if (request.dialogAction == "feed" || request.dialogAction == "share_open_graph") {
                    this.mWaitingDialogMethod = "postMediatopic";
                    this.exitFullscreen();
                    var dialogActionParams = window.JSON.parse(request.dialogParams.action_properties);
                    global.RUJSBridge.showPost("", dialogActionParams.object["og:description"], this.mRuMe.uid.toString(), dialogActionParams.object["og:image"], [dialogActionParams.object["og:url"]], function (response) {
                        this.log("showWallPost" + JSON.stringify(response));
                        var success = false;
                        if (response && response.hasOwnProperty("response") && response.response == 'publishSuccess') {
                            success = true;
                        }
                        if (success)
                            request.dialogResponce = "?post_id=0";
                        else
                            request.dialogResponce = "?error_code=0";
                        this.executeRequestByKey(this.mCurrentRequestKey, false, { status: success ? 0 : 1, dialogID: dialogID });
                    }.bind(this));
                    return 0;
                }
                if (request.dialogAction == "apprequests") {
                    this.exitFullscreen();
                    this.log("request.dialogInviteMode" + request.dialogInviteMode);
                    if (request.dialogInviteMode) {
                        this.mWaitingDialogMethod = "showInvite";
                        var uidsString = "";
                        if (request.dialogParams.to instanceof Array) {
                            uidsString = request.dialogParams.to.join(",");
                        }
                        else {
                            uidsString = request.dialogParams.to;
                        }
                        global.RUJSBridge.showInvite(request.dialogParams.message, uidsString, function (response) {
                            try {
                                this.log("VKJSBridge.showInvite" + JSON.stringify(response));
                            }
                            catch (e) { }
                            var success = response.id.length > 0;
                            var to = (response.id instanceof Array ? response.id : []);
                            dialogID = this.mFbDialogRequestsList.length - 1;
                            request = this.mFbDialogRequestsList[dialogID];
                            request.dialogResponce = success ? this.arrayToUrlParams(to) : "?error_code=" + this.USER_CANCELED_CODE;
                            this.executeRequestByKey(this.mCurrentRequestKey, false, { status: success ? 0 : 1, dialogID: dialogID });
                        }.bind(this));
                        if (uidsString == null || uidsString != null && uidsString.length <= 0) {
                            request.dialogResponce = "?error_code=" + this.USER_CANCELED_CODE;
                            this.executeRequestByKey(this.mCurrentRequestKey, false, { status: 1, dialogID: dialogID });
                        }
                    }
                    else {
                        this.mWaitingDialogMethod = "showNotification";
                        uidsString = "";
                        if (request.dialogParams.to instanceof Array) {
                            uidsString = request.dialogParams.to.join(",");
                        }
                        else {
                            uidsString = request.dialogParams.to;
                        }
                        global.RUJSBridge.showRequest(request.dialogParams.message, uidsString, request.dialogParams.picture, function (response) {
                            try {
                                this.log("VKJSBridge.showInvite" + JSON.stringify(response));
                            }
                            catch (e) { }
                            var success = response.id.length > 0;
                            var to = (response.id instanceof Array ? response.id : []);
                            dialogID = this.mFbDialogRequestsList.length - 1;
                            request = this.mFbDialogRequestsList[dialogID];
                            request.dialogResponce = success ? this.arrayToUrlParams(to) : "?error_code=" + this.USER_CANCELED_CODE;
                            this.executeRequestByKey(this.mCurrentRequestKey, false, { status: success ? 0 : 1, dialogID: dialogID });
                        }.bind(this));
                        if (uidsString == null || uidsString != null && uidsString.length <= 0) {
                            request.dialogResponce = "?error_code=" + this.USER_CANCELED_CODE;
                            this.executeRequestByKey(this.mCurrentRequestKey, false, { status: 1, dialogID: dialogID });
                        }
                    }
                    return 0;
                }
                if (request.dialogAction == "like") {
                    if (!global.ExternalInterface.available) {
                        this.executeRequestByKey(this.mCurrentRequestKey, false, { status: 1, dialogID: dialogID });
                        return 1;
                    }
                    this.mWaitingDialogMethod = 'like';
                    this.exitFullscreen();
                    global.RUJSBridge.like(function (response) {
                        dialogID = this.mFbDialogRequestsList.length - 1;
                        request = this.mFbDialogRequestsList[dialogID];
                        request.dialogResponce = response;
                        this.executeRequestByKey(this.mCurrentRequestKey, false, { status: 0, dialogID: dialogID });
                    }.bind(this));
                    return 0;
                }
            }
            catch (e) {
                this.log("showFBDialogAction: " + e.message);
            }
            ;
            return 1;
        };
        s3eMailru.prototype.getResponceFbDialogRequest = function (dialogID) {
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                this.log("ResponseRaw = " + request.dialogResponce);
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(request.dialogResponce);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) { }
            return null;
        };
        s3eMailru.prototype.deleteFBDialogAction = function (dialogID) {
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                request.setDeleteStatus(true);
                return 0;
            }
            catch (e) { }
            return 1;
        };
        s3eMailru.prototype.getFBDialog_ErrorCode = function (dialogID) {
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                return request.dialogErrorCode;
            }
            catch (e) { }
            return 0;
        };
        s3eMailru.prototype.ReauthorizeWithPermissions = function (sessionId, permissions, userText, callbackKey) {
            this.mCurrentRequestKey = s3eMailru.keyLogin;
            this.mRequests.set(s3eMailru.keyLogin, new Request(callbackKey));
            global.setTimeout(this.executeRequestByKey.bind(this), 1, s3eMailru.keyLogin, false, { status: 1 });
            return 0;
        };
        s3eMailru.prototype.onCallbackSendGraphRequest = function (result, fail) {
            if (fail === void 0) { fail = null; }
            var params = new Object;
            var requestID = this.mGraphRequestsList.length - 1;
            var request = this.mGraphRequestsList[requestID];
            if (result) {
                this.log("Complete execute " + s3eMailru.keyFBRequest_Send);
                params.status = 0;
                params.requestID = requestID;
                request.requestResponce = result;
                this.executeRequestByKey(s3eMailru.keyFBRequest_Send, true, params);
            }
            else {
                this.log("FAIL execute " + s3eMailru.keyFBRequest_Send + ": " + (fail ? JSON.stringify(fail) : "The result was not found"));
                params.status = 1;
                params.requestID = requestID;
                request.requestResponce = fail;
                this.executeRequestByKey(s3eMailru.keyFBRequest_Send, false, params);
            }
        };
        s3eMailru.prototype.executeRequestByKey = function (key, isCompleate, params, statusCode) {
            if (statusCode === void 0) { statusCode = 0; }
            var request;
            if (this.mRequests.get(key) != null) {
                this.log("Execute callback for key = " + key);
                request = this.mRequests.get(key);
                var JSONdata;
                if (params)
                    JSONdata = JSON.stringify(params);
                var dataItem = new global.ByteArray();
                dataItem.writeUTFBytes(JSONdata);
                dataItem.position = 0;
                if (this.mCallbacks.get(request.completeHandler)) {
                    this.mCallbacks.get(request.completeHandler)(dataItem, this.mEmptyData);
                    this.mCallbacks.delete(request.completeHandler);
                    return;
                }
                this.mViewer["doCallback"](request.completeHandler, dataItem, this.mEmptyData);
            }
            else {
                this.log("callback with key " + key + " not found");
            }
        };
        s3eMailru.prototype.clearWaitingDialog = function () {
            this.mWaitingDialogMethod = null;
            global.clearTimeout(this.mWaitingDialog);
        };
        s3eMailru.prototype.getVersionObject = function () {
            return { main: this.mVersionMain, graphic: this.mVersionGraphic, logic: this.mVersionLogic };
        };
        s3eMailru.prototype.exitFullscreen = function () {
            if (this.mViewer && this.mViewer.stage && this.mViewer.stage.displayState != global.StageDisplayState.NORMAL) {
                try {
                    this.mViewer.stage.displayState = global.StageDisplayState.NORMAL;
                }
                catch (error) {
                    global.GLog.print(error.message);
                }
            }
        };
        s3eMailru.prototype.log = function (message) {
            if (global.CONFIG.QA_VERSION)
                global.GLog.print(this.TAG + message);
        };
        s3eMailru.ICF_GAME = "game";
        s3eMailru.keyInit = "s3eFBInit";
        s3eMailru.keyCheckLogin = "s3eFBSession_LoggedIn";
        s3eMailru.keyLogin = "s3eFBSession_Login";
        s3eMailru.keyLogout = "s3eFBTerminate";
        s3eMailru.keyInitFBRequest_WithGraphPath = "s3eFBRequest_WithGraphPath";
        s3eMailru.keyFBRequest_AddParamString = "s3eFBRequest_AddParamString";
        s3eMailru.keyFBRequest_AddParamNumber = "s3eFBRequest_AddParamNumber";
        s3eMailru.keyFBRequest_AddParamStringInternal = "s3eFBRequest_AddParamStringInternal";
        s3eMailru.keyFBRequest_Send = "s3eFBRequest_Send";
        s3eMailru.keyFBRequest_Delete = "s3eFBRequest_Delete";
        s3eMailru.keyFBRequest_ErrorCode = "s3eFBRequest_ErrorCode";
        s3eMailru.keyFBRequest_ErrorString = "s3eFBRequest_ErrorString";
        s3eMailru.keyFBDialog_ErrorCode = "s3eFBDialog_ErrorCode";
        s3eMailru.keyFBDialog_WithAction = "s3eFBDialog_WithAction";
        s3eMailru.keyFBDialog_AddParamString = "s3eFBDialog_AddParamString";
        s3eMailru.keyFBDialog_AddParamNumber = "s3eFBDialog_AddParamNumber";
        s3eMailru.keyFBDialog_AddParamStringInternal = "s3eFBDialog_AddParamStringInternal";
        s3eMailru.keyFBDialog_Show = "s3eFBDialog_Show";
        s3eMailru.keyFBDialog_Delete = "s3eFBDialog_Delete";
        s3eMailru.keyFBSession_ReauthorizeWithPublishPermissions = "s3eFBSession_ReauthorizeWithPublishPermissions";
        s3eMailru.keyFBSession_ReauthorizeWithReadPermissions = "s3eFBSession_ReauthorizeWithReadPermissions";
        s3eMailru.keyFBRequest_ResponseRaw = "s3eFBRequest_ResponseRaw";
        s3eMailru.keyFBSession_AccessToken = "s3eFBSession_AccessToken";
        s3eMailru.keyFBDialog_DidCompleteWithUrl = "s3eFBDialog_DidCompleteWithUrl";
        s3eMailru.keyFBGetAppID = "s3eFBGetAppID";
        return s3eMailru;
    }(global.EventDispatcher));
    global.s3eMailru = s3eMailru;
})(global || (global = {}));
var Request = (function () {
    function Request(completeHandlerKey, errorHandlerKey) {
        if (errorHandlerKey === void 0) { errorHandlerKey = -1; }
        this.completeHandler = 0;
        this.errorHandler = 0;
        this.completeHandler = completeHandlerKey;
        this.errorHandler = errorHandlerKey;
    }
    return Request;
}());
var global;
(function (global) {
    global.OdnoklassnikiJSBridge = api.odnoklassniki.OdnoklassnikiJSBridge;
    global.ApiCallbackEvent = api.odnoklassniki.events.ApiCallbackEvent;
    global.ApiServerEvent = api.odnoklassniki.events.ApiServerEvent;
    global.DisplayObject = flash.display.DisplayObject;
    global.StageDisplayState = flash.display.StageDisplayState;
    global.ErrorEvent = flash.events.ErrorEvent;
    global.Event = flash.events.Event;
    global.EventDispatcher = flash.events.EventDispatcher;
    global.IOErrorEvent = flash.events.IOErrorEvent;
    global.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    global.ExternalInterface = flash.external.ExternalInterface;
    global.URLLoader = flash.net.URLLoader;
    global.URLLoaderDataFormat = flash.net.URLLoaderDataFormat;
    global.URLRequest = flash.net.URLRequest;
    global.ByteArray = flash.utils.ByteArray;
    global.Dictionary = flash.utils.Dictionary;
    global.clearTimeout = flash.utils.clearTimeout;
    global.setTimeout = flash.utils.setTimeout;
    global.FbDialogRequest = s3eSocial.FbDialogRequest;
    global.FbGraphRequest = s3eSocial.FbGraphRequest;
    global.AppIcf = s3eUtils.AppIcf;
    global.Parse = s3eUtils.Parse;
    global.getApiCallbackEvent = s3eUtils.getApiCallbackEvent;
    var s3eOdnoklassniki = (function (_super) {
        __extends(s3eOdnoklassniki, _super);
        function s3eOdnoklassniki(appId, appKey) {
            var _this = _super.call(this) || this;
            _this.is_Is3eExtensionSocial = null;
            _this.TAG = "[Odnoklassniki] ";
            _this.USER_CANCELED_CODE = 4201;
            _this.USER_UPDATE_INTERVAL = 5 * 60 * 1000;
            _this.USID_PREFIX = "ok_";
            _this.DEFAULT_TABLE_ID = "Odnoklassniki";
            _this.TABLE_ID = _this.DEFAULT_TABLE_ID;
            _this.mIsInited = false;
            _this.mIsLogged = false;
            _this.mParseUsersTimestamp = 0;
            _this.mCallbacksId = 0;
            _this.mWaitingDialog = 0;
            _this.mGamePostfix = '';
            _this.mAppId = appId;
            _this.mAppKey = appKey;
            _this.mParseUsers = new global.Dictionary;
            _this.mEmptyData = new global.ByteArray;
            _this.refresh();
            return _this;
        }
        s3eOdnoklassniki.prototype.setViewer = function (viewer) {
            this.mViewer = viewer;
        };
        s3eOdnoklassniki.prototype.setCloud = function (cloud) {
            this.mCloud = cloud;
        };
        s3eOdnoklassniki.prototype.setCloudPush = function (cloud) {
            this.mCloudPush = cloud;
        };
        Object.defineProperty(s3eOdnoklassniki.prototype, "appId", {
            get: function () {
                return this.mAppId;
            },
            enumerable: true,
            configurable: true
        });
        s3eOdnoklassniki.prototype.setLeaderboardTableId = function (id) {
            this.TABLE_ID = id;
        };
        s3eOdnoklassniki.prototype.s3eCommonIntWithCallback = function (funcName, params, callback) {
            this.mCallbacksId++;
            this.mCallbacks.set(this.mCallbacksId, callback);
            return this.s3eCommonInt(funcName, this.mCallbacksId, params);
        };
        s3eOdnoklassniki.prototype.s3eCommonInt = function (funcName, cbID, params) {
            this.log("s3eCommonInt");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            if (params && params.length > 0)
                var dataItem = JSON.parse(params);
            switch (funcName) {
                case s3eOdnoklassniki.keyInit:
                    return this.init(dataItem.appId, dataItem.appVersion);
                case s3eOdnoklassniki.keyCheckLogin:
                    return int(this.checkLogin(dataItem));
                case s3eOdnoklassniki.keyLogin:
                    return int(this.login(dataItem.sessionID, dataItem.permissions, cbID));
                case s3eOdnoklassniki.keyLogout:
                    return 0;
                case s3eOdnoklassniki.keyInitFBRequest_WithGraphPath:
                    return this.initFBGraphRequest(dataItem.graphPath, dataItem.httpMethod);
                case s3eOdnoklassniki.keyFBRequest_AddParamString:
                case s3eOdnoklassniki.keyFBRequest_AddParamNumber:
                case s3eOdnoklassniki.keyFBRequest_AddParamStringInternal:
                    return this.updateFBGraphRequestWithParams(dataItem.requestID, dataItem.name, dataItem.value);
                case s3eOdnoklassniki.keyFBRequest_Send:
                    return this.sendFBGraphRequest(dataItem.requestID, cbID);
                case s3eOdnoklassniki.keyFBRequest_Delete:
                    return this.deleteFBGraphRequest(dataItem.requestID);
                case s3eOdnoklassniki.keyFBDialog_WithAction:
                    return this.initFBDialogWithAction(dataItem.action);
                case s3eOdnoklassniki.keyFBDialog_AddParamString:
                case s3eOdnoklassniki.keyFBDialog_AddParamNumber:
                case s3eOdnoklassniki.keyFBDialog_AddParamStringInternal:
                    return this.updateFBDialogActionWithParams(dataItem.dialogID, dataItem.name, dataItem.value);
                case s3eOdnoklassniki.keyFBDialog_Show:
                    return this.showFBDialogAction(dataItem.dialogID, cbID);
                case s3eOdnoklassniki.keyFBDialog_Delete:
                    return this.deleteFBDialogAction(dataItem.dialogID);
                case s3eOdnoklassniki.keyFBRequest_ErrorCode:
                    return this.getFBRequest_ErrorCode(dataItem.requestID);
                case s3eOdnoklassniki.keyFBDialog_ErrorCode:
                    return this.getFBDialog_ErrorCode(dataItem.dialogID);
                case s3eOdnoklassniki.keyFBSession_ReauthorizeWithPublishPermissions:
                case s3eOdnoklassniki.keyFBSession_ReauthorizeWithReadPermissions:
                    return this.ReauthorizeWithPermissions(dataItem.sessionID, dataItem.permissions, dataItem.userText, cbID);
            }
            return -1;
        };
        s3eOdnoklassniki.prototype.s3eCommonStr = function (funcName, cbID, params) {
            this.log("s3eCommonStr");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            switch (funcName) {
                case s3eOdnoklassniki.keyFBGetAppID:
                    return this.appId;
            }
            return "";
        };
        s3eOdnoklassniki.prototype.s3eCommonData = function (funcName, cbID, params) {
            this.log("s3eCommonData");
            this.log("funcName = " + funcName);
            this.log("params = " + params);
            this.log("cbID = " + cbID);
            if (params && params.length > 0)
                var dataItem = JSON.parse(params);
            switch (funcName) {
                case s3eOdnoklassniki.keyFBRequest_ErrorString:
                    return this.getFBRequest_ErrorString(dataItem.requestID);
                case s3eOdnoklassniki.keyFBRequest_ResponseRaw:
                    return this.getResponseRaw(dataItem.requestID);
                case s3eOdnoklassniki.keyFBSession_AccessToken:
                    return this.getFBAccessToken();
                case s3eOdnoklassniki.keyFBDialog_DidCompleteWithUrl:
                    return this.getResponceFbDialogRequest(dataItem.dialogID);
            }
            return this.mEmptyData;
        };
        s3eOdnoklassniki.prototype.refresh = function () {
            this.mRequests = new global.Dictionary;
            this.mCallbacks = new global.Dictionary;
            this.mGraphRequestsList = new Array;
            this.mFbDialogRequestsList = new Array;
        };
        s3eOdnoklassniki.prototype.activate = function () {
        };
        s3eOdnoklassniki.prototype.mouseDown = function () {
            if (this.mWaitingDialogMethod)
                this.mWaitingDialog = global.setTimeout(this.apiCallback.bind(this), 500, global.getApiCallbackEvent(this.mWaitingDialogMethod, "cancel"));
        };
        s3eOdnoklassniki.prototype.deactivate = function () { };
        s3eOdnoklassniki.prototype.exit = function () { };
        s3eOdnoklassniki.prototype.init = function (appID, appVersion) {
            this.log("Call init function");
            if (!this.mIsInited) {
                this.mVersionMain = global.AppIcf.read(s3eOdnoklassniki.ICF_GAME, "VersionMain");
                this.mVersionGraphic = global.AppIcf.read(s3eOdnoklassniki.ICF_GAME, "VersionGraphic");
                this.mVersionLogic = global.AppIcf.read(s3eOdnoklassniki.ICF_GAME, "VersionLogic");
                this.mGamePostfix = global.AppIcf.read(s3eOdnoklassniki.ICF_CLOUD, 'game') || '';
                this.mMarket = global.AppIcf.read(s3eOdnoklassniki.ICF_GAME, "Market");
                this.mAppFacebookId = appID;
                this.mAppVersion = appVersion;
                this.mIsInited = true;
                this.log("Init odnoklassniki with appId = " + this.mAppId + " with appKey = " + this.mAppKey + " with app version = " + appVersion + " with facebookId = " + this.mAppFacebookId);
            }
            return 0;
        };
        s3eOdnoklassniki.prototype.checkLogin = function (session) {
            if (session === void 0) { session = null; }
            this.log("Call checklogin function");
            return (this.mIsLogged && this.mIsInited);
        };
        s3eOdnoklassniki.prototype.login = function (sessionId, permissions, callbackKey) {
            this.mCurrentRequestKey = s3eOdnoklassniki.keyLogin;
            this.mRequests.set(s3eOdnoklassniki.keyLogin, new Request(callbackKey));
            this.log("Call login function");
            if (this.checkLogin()) {
                this.log("Already login");
                this.mIsLogged = true;
                this.executeRequestByKey(s3eOdnoklassniki.keyLogin, true, { status: 0 });
                return 0;
            }
            else {
                this.log("Need auth");
                this.log("Auth with permissions = " + permissions);
                global.OdnoklassnikiJSBridge.addEventListener(global.ApiServerEvent.CONNECTED, onConnect.bind(this));
                global.OdnoklassnikiJSBridge.addEventListener(global.ApiServerEvent.CONNECTION_ERROR, onErrorConnection.bind(this));
                global.OdnoklassnikiJSBridge.addEventListener(global.ApiCallbackEvent.CALL_BACK, this.apiCallback.bind(this));
                global.OdnoklassnikiJSBridge.initialize(this.mAppKey);
                function onConnect(e) {
                    global.EventStats.handle(s3eOdnoklassniki, e);
                    var msg = "";
                    try {
                        msg = ": " + (typeof e.data == 'string' ? e.data : JSON.stringify(e.data));
                    }
                    catch (error) { }
                    this.log("connected" + msg);
                    global.OdnoklassnikiJSBridge.getCurrentUser(onConnect_getCurrentUser.bind(this));
                    function onConnect_getCurrentUser(userOk) {
                        this.mOkMe = userOk;
                        this.mIsLogged = true;
                        this.executeRequestByKey(s3eOdnoklassniki.keyLogin, true, { status: 0 });
                    }
                }
                function onErrorConnection(e) {
                    global.EventStats.handle(s3eOdnoklassniki, e);
                    var msg = "";
                    try {
                        msg = ": " + (typeof e.data == 'string' ? e.data : JSON.stringify(e.data));
                    }
                    catch (error) { }
                    this.log("unable to connect" + msg);
                    if ("showLoadingError" in this.mViewer) {
                        this.mViewer["showLoadingError"]("login");
                    }
                    return;
                }
                return 0;
            }
        };
        s3eOdnoklassniki.prototype.apiCallback = function (event) {
            global.EventStats.handle(s3eOdnoklassniki, event);
            var method = event.method, result = event.result, data = event.data;
            if (method == "getPageInfo")
                return;
            this.log("apiCallback: " + method + ", " + result + ", " + data);
            if (method == "loadAd" || method == "showLoadedAd") {
                return;
            }
            if (method == "showNotification") {
                if (!dialogHandler.bind(this)())
                    return;
                var success = result == "ok";
                var to = typeof data == 'string' ? data.split(",") : (data instanceof Array ? data : []);
                var dialogID = this.mFbDialogRequestsList.length - 1;
                var request = this.mFbDialogRequestsList[dialogID];
                if (success) {
                    var db = request.dialogParams;
                    this.mCloud.Call("send", { user: { usid: this.USID_PREFIX + this.mOkMe.uid + this.mGamePostfix }, request: { message: db.message, data: db.data, recipients: this.to2recipients(to) } }, function (data) {
                        if (data === void 0) { data = null; }
                        complete.bind(this)();
                    }.bind(this), function (data) {
                        if (data === void 0) { data = null; }
                        success = false;
                        complete.bind(this)();
                    }.bind(this));
                }
                else {
                    complete.bind(this)();
                }
            }
            else if (method == "showInvite") {
                if (!dialogHandler.bind(this)())
                    return;
                success = result == "ok";
                to = typeof data == 'string' ? data.split(",") : (data instanceof Array ? data : []);
                dialogID = this.mFbDialogRequestsList.length - 1;
                request = this.mFbDialogRequestsList[dialogID];
                request.dialogResponce = success ? this.arrayToUrlParams(to) : "?error_code=" + this.USER_CANCELED_CODE;
                this.executeRequestByKey(this.mCurrentRequestKey, false, { status: success ? 0 : 1, dialogID: dialogID });
            }
            else if (method == "postMediatopic") {
                if (!dialogHandler.bind(this)())
                    return;
                dialogID = this.mFbDialogRequestsList.length - 1;
                request = this.mFbDialogRequestsList[dialogID];
                success = result == "ok";
                if (success)
                    request.dialogResponce = "?post_id=0";
                else
                    request.dialogResponce = "?error_code=0";
                this.executeRequestByKey(this.mCurrentRequestKey, false, { status: success ? 0 : 1, dialogID: dialogID });
            }
            else if (method == "like") {
                if (result == '?result_code=0' && !this.readCloudStatsParam('like')) {
                    this.mCloud.Call("save", {
                        game: {
                            market: this.mMarket
                        },
                        user: {
                            objectId: this.mViewer['cloudUser'].objectId,
                            udid: this.USID_PREFIX + this.mOkMe.uid + this.mGamePostfix,
                            stats: ["likes_app"]
                        }
                    });
                    this.writeCloudStatsParam('like', true);
                }
                if (!dialogHandler.bind(this)())
                    return;
                dialogID = this.mFbDialogRequestsList.length - 1;
                request = this.mFbDialogRequestsList[dialogID];
                request.dialogResponce = result;
                this.executeRequestByKey(this.mCurrentRequestKey, false, { status: 0, dialogID: dialogID });
            }
            function dialogHandler() {
                if (!this.mWaitingDialogMethod)
                    return false;
                this.clearWaitingDialog();
                this.dispatchEvent(new global.Event(global.Event.ACTIVATE));
                return true;
            }
            function complete() {
                request.dialogResponce = success ? this.arrayToUrlParams(to) : "?error_code=" + this.USER_CANCELED_CODE;
                this.executeRequestByKey(this.mCurrentRequestKey, false, { status: success ? 0 : 1, dialogID: dialogID });
            }
        };
        s3eOdnoklassniki.prototype.to2recipients = function (to) {
            var recipients = [];
            for (var _i = 0, to_7 = to; _i < to_7.length; _i++) {
                var usid = to_7[_i];
                recipients.push({ usid: this.USID_PREFIX + usid + this.mGamePostfix });
            }
            return recipients;
        };
        s3eOdnoklassniki.prototype.arrayToUrlParams = function (dataItem) {
            var str = "";
            if (dataItem)
                for (var i = 0; i < dataItem.length; ++i)
                    str += "?to[" + i + "]=" + dataItem[i];
            return str;
        };
        s3eOdnoklassniki.prototype.initFBGraphRequest = function (path, httpMethod) {
            this.mGraphRequestsList.push(new global.FbGraphRequest(path, httpMethod));
            return this.mGraphRequestsList.length - 1;
        };
        s3eOdnoklassniki.prototype.updateFBGraphRequestWithParams = function (requestID, name, value) {
            try {
                this.mGraphRequestsList[requestID].setParam(name, value);
                return 0;
            }
            catch (e) { }
            return 1;
        };
        s3eOdnoklassniki.prototype.sendFBGraphRequest = function (requestID, callbackKey) {
            this.mCurrentRequestKey = s3eOdnoklassniki.keyFBRequest_Send;
            this.mRequests.set(this.mCurrentRequestKey, new Request(callbackKey));
            try {
                var request = this.mGraphRequestsList[requestID];
                this.log("request: path = " + request.requestPath + ", method = " + request.requestHttpMethod);
                if (request.requestHttpMethod == "DELETE") {
                    this.mCloud.Call("clear", { request: { objectId: request.requestPath } }, function (data) {
                        if (data === void 0) { data = null; }
                        this.onCallbackSendGraphRequest("ok");
                    }.bind(this), function (data) {
                        if (data === void 0) { data = null; }
                        this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                    }.bind(this));
                    return 0;
                }
                if (request.requestPath == "me") {
                    global.OdnoklassnikiJSBridge.getCurrentUser(function me_getCurrentUser(userOk) {
                        this.onCallbackSendGraphRequest(this.okuser2fb(userOk, true));
                    }.bind(this));
                    return 0;
                }
                if (request.requestPath == "me/friends") {
                    global.OdnoklassnikiJSBridge.getAppFriends(meFriends_getAppFriends.bind(this));
                    function meFriends_getAppFriends(appFriends) {
                        if (!appFriends)
                            appFriends = { uids: [] };
                        var appUIDS = appFriends.uids;
                        global.OdnoklassnikiJSBridge.getInfo(appUIDS, ['uid', 'first_name', 'last_name', 'name', 'pic_2'], meFriends_getInfo.bind(this));
                        function meFriends_getInfo(friendsInfo) {
                            if (!friendsInfo)
                                friendsInfo = [];
                            var result = [];
                            var len = friendsInfo.length;
                            for (var i = 0; i < len; ++i)
                                result.push(this.okuser2fb(friendsInfo[i], true));
                            this.onCallbackSendGraphRequest(result, null);
                        }
                    }
                    return 0;
                }
                if (request.requestPath == "me/invitable_friends") {
                    global.OdnoklassnikiJSBridge.getAllFriends(meInvitableFriends_onGetAllFriends.bind(this), null);
                    function meInvitableFriends_onGetAllFriends(friends) {
                        global.OdnoklassnikiJSBridge.getAppFriends(meInvitableFriends_getAppFriends.bind(this));
                        function meInvitableFriends_getAppFriends(appFriends) {
                            var appUIDS = appFriends.uids;
                            global.OdnoklassnikiJSBridge.getInfo(friends, ['uid', 'first_name', 'last_name', 'name', 'pic_2'], meInvitableFriends_getInfo.bind(this));
                            function meInvitableFriends_getInfo(friendsInfo) {
                                var result = [];
                                friendsInfo = friendsInfo || [];
                                var len = friendsInfo.length;
                                for (var i = 0; i < len; ++i) {
                                    if (appUIDS.indexOf(friendsInfo[i].uid) != -1)
                                        continue;
                                    result.push(this.okuser2fb(friendsInfo[i], false));
                                }
                                this.onCallbackSendGraphRequest(result, null);
                            }
                        }
                    }
                    return 0;
                }
                if (request.requestPath == "me/scores") {
                    if (this.mParseUsers.get(this.mOkMe.uid))
                        this.mParseUsers.get(this.mOkMe.uid).scores = this.parseScore2Fb(this.mOkMe.uid, request.requestParams.score);
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, "ok", null);
                    return 0;
                }
                if (request.requestPath == "me/permissions") {
                    var list = [{ permission: "user_friends", status: "granted" }, { permission: "publish_actions", status: "granted" }, { permission: "user_groups", status: "granted" }];
                    for (var i = 0; i < 11; ++i) {
                        var permission = global.AppIcf.read("s3eFacebook", "read_permission_" + i);
                        if (!permission)
                            continue;
                        list[list.length] = { permission: permission, status: "granted" };
                    }
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, list, null);
                    return 0;
                }
                if (request.requestPath == this.mAppFacebookId + "/permissions") {
                    list = [{ permission: "user_friends", status: "live" }, { permission: "publish_actions", status: "live" }];
                    for (i = 0; i < 11; ++i) {
                        permission = global.AppIcf.read("s3eFacebook", "write_permission_" + i);
                        if (!permission)
                            continue;
                        list[list.length] = { permission: permission, status: "live" };
                    }
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, list, null);
                    return 0;
                }
                if (request.requestPath == "me/apprequests") {
                    this.mCloud.Call("requests", { user: { usid: this.USID_PREFIX + this.mOkMe.uid + this.mGamePostfix } }, meApprequests_complete.bind(this), meApprequests_error.bind(this));
                    function meApprequests_complete(data) {
                        if (data === void 0) { data = null; }
                        var result = [];
                        for (var _i = 0, _a = data.result; _i < _a.length; _i++) {
                            var req = _a[_i];
                            if (!req.from || !req.to)
                                continue;
                            result.push({ id: req.objectId,
                                data: req.data,
                                message: req.message,
                                from: { id: this.findUSID(req.from.usid), name: req.from.name },
                                to: { id: this.findUSID(req.to.usid), name: req.to.name } });
                        }
                        this.onCallbackSendGraphRequest(result, null);
                    }
                    function meApprequests_error(data) {
                        if (data === void 0) { data = null; }
                        this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                    }
                    return 0;
                }
                if (request.requestPath == "me/groups") {
                    global.OdnoklassnikiJSBridge.getUserGroups(this.mOkMe.uid, 100, meGroups_getUserGroups.bind(this));
                    function meGroups_getUserGroups(responce) {
                        responce = responce || { 'groups': [] };
                        var groups = 'groups' in responce && responce.groups != null ? responce.groups : [];
                        var result = [];
                        if ('length' in groups) {
                            var len = groups.length;
                            for (var i = 0; i < len; ++i) {
                                var g = groups[i];
                                if (!g)
                                    continue;
                                if ('groupId' in g)
                                    result.push({ id: g.groupId, name: "" });
                            }
                        }
                        this.onCallbackSendGraphRequest(result, null);
                    }
                    return 0;
                }
                if (request.requestPath == "me/og.likes") {
                    var result = [];
                    if (this.readCloudStatsParam('like') == true) {
                        result.push({ id: "ok_shareWidget", application: { id: this.mAppFacebookId } });
                    }
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, result, null);
                    return 0;
                }
                if (request.requestPath == "me/achievements") {
                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, { data: [] }, null);
                    return 0;
                }
                if (request.requestHttpMethod == "POST") {
                    if (request.requestPath.indexOf("/apprequests") != -1) {
                        var split = request.requestPath.split("/apprequests");
                        if (split.length < 2)
                            return 1;
                        var message = request.requestParams.message;
                        var data = request.requestParams.data;
                        var to = [split[0]];
                        this.mCloud.Call("send", { user: { usid: this.USID_PREFIX + this.mOkMe.uid + this.mGamePostfix },
                            request: { message: message, data: data, recipients: this.to2recipients(to) } }, apprequests_complete.bind(this), apprequests_error.bind(this));
                        function apprequests_complete(result) {
                            if (result === void 0) { result = null; }
                            if (this.mCloudPush) {
                                var list = [];
                                var date = new Date;
                                for (var _i = 0, to_8 = to; _i < to_8.length; _i++) {
                                    var id = to_8[_i];
                                    var fr = this.mParseUsers.get(id);
                                    list.push({ appId: this.appId, from: this.mOkMe.uid, to: id, message: message, data: data, time: date.time / 1000 });
                                }
                                if (list.length > 0) {
                                    this.mCloudPush.Call("register", {
                                        game: { market: this.mMarket, version: this.getVersionObject() },
                                        user: { usid: [this.USID_PREFIX + this.mOkMe.uid] },
                                        push: list
                                    });
                                }
                            }
                            this.onCallbackSendGraphRequest({ request: "", to: to }, null);
                        }
                        function apprequests_error(data) {
                            if (data === void 0) { data = null; }
                            this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                        }
                        return 0;
                    }
                    if (request.requestPath.indexOf("achievements") != -1) {
                        global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, { "id": "0" });
                        return 0;
                    }
                    if (request.requestPath.indexOf("me/") != -1) {
                        var locale = request.requestParams['locale'];
                        var objectURL = null;
                        for (var name in request.requestParams) {
                            var val = request.requestParams[name];
                            if (typeof val == 'string') {
                                var str = val;
                                if (str.indexOf("http") >= 0 && name.indexOf("image") == -1) {
                                    objectURL = str;
                                    break;
                                }
                            }
                        }
                        if (locale && objectURL) {
                            var loader = new global.URLLoader;
                            loader.dataFormat = global.URLLoaderDataFormat.TEXT;
                            loader.addEventListener(global.Event.COMPLETE, mePostStory_loaderComplete.bind(this));
                            loader.addEventListener(global.IOErrorEvent.IO_ERROR, mePostStory_loaderError.bind(this));
                            loader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, mePostStory_loaderError.bind(this));
                            loader.load(new global.URLRequest(objectURL + "?fb_locale=ru_RU"));
                            function mePostStory_loaderComplete(event) {
                                global.EventStats.handle(s3eOdnoklassniki, event);
                                try {
                                    var result = new global.XML(loader.data);
                                }
                                catch (error) {
                                    this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                                    return;
                                }
                                if (result) {
                                    var description = result.head.meta.$(function (n) { return n.$property == "og:description"; }).$content;
                                    var image = result.head.meta.$(function (n) { return n.$property == "og:image"; }).$content;
                                    if (!description)
                                        description = result.meta.$(function (n) { return n.$property == "og:description"; }).$content;
                                    if (!image)
                                        image = result.meta.$(function (n) { return n.$property == "og:image"; }).$content;
                                    var att = {
                                        description: description,
                                        media: [{ src: image }]
                                    };
                                    if (att.description && att.description.length > 64)
                                        att.description = att.description.substr(0, 61) + "...";
                                    var text = {
                                        "type": "text",
                                        "text": att.description
                                    };
                                    var app = {
                                        "type": "app",
                                        "text": "",
                                        "images": [
                                            {
                                                "url": att.media[0].src,
                                                "mark": "mark_url",
                                                "title": att.description ? att.description : "image"
                                            }
                                        ]
                                    };
                                    this.exitFullscreen();
                                    global.OdnoklassnikiJSBridge.postMediatopic([text, app]);
                                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, { "id": "0" });
                                }
                                else {
                                    global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, null, "error");
                                }
                            }
                            function mePostStory_loaderError(event) {
                                global.EventStats.handle(s3eOdnoklassniki, event);
                                this.onCallbackSendGraphRequest(null, { error: { type: "unknown" } });
                            }
                            return 0;
                        }
                    }
                }
            }
            catch (e) {
                this.log("sendFBGraphRequest: " + e.message);
            }
            ;
            global.setTimeout(this.onCallbackSendGraphRequest.bind(this), 1, null, { error: { message: "This function does not supported" } });
            return 1;
        };
        s3eOdnoklassniki.prototype.readCloudStatsParam = function (param) {
            if (!this.mViewer)
                return null;
            if (!('cloudUser' in this.mViewer))
                return null;
            if (!this.mViewer['cloudUser'].stats)
                return null;
            if (!('length' in this.mViewer['cloudUser'].stats))
                return null;
            if (this.mViewer['cloudUser'].stats.length < 3)
                return null;
            return this.mViewer['cloudUser'].stats[2][param];
        };
        s3eOdnoklassniki.prototype.writeCloudStatsParam = function (param, value) {
            if (!this.mViewer)
                return;
            if (!('cloudUser' in this.mViewer))
                return;
            if (!this.mViewer['cloudUser'].stats)
                return;
            if (!('length' in this.mViewer['cloudUser'].stats))
                return;
            if (this.mViewer['cloudUser'].stats.length < 3)
                return;
            this.mViewer['cloudUser'].stats[2][param] = value;
        };
        s3eOdnoklassniki.prototype.okuser2fb = function (data, installed) {
            var user = {};
            user.id = data.uid;
            user.name = data.name;
            user.first_name = data.first_name;
            user.last_name = data.last_name;
            user.picture = { data: { url: data.pic_2 } };
            user.installed = installed;
            if (data.locale)
                user.locale = data.locale;
            return user;
        };
        s3eOdnoklassniki.prototype.findCloudUserById = function (list, userId) {
            for (var _i = 0, list_7 = list; _i < list_7.length; _i++) {
                var user = list_7[_i];
                if ("usid" in user && this.findUSID(user.usid) == userId)
                    return user;
            }
            return null;
        };
        s3eOdnoklassniki.prototype.parseScore2Fb = function (userId, score) {
            return { data: [{ user: { id: userId }, score: score, application: { id: this.mAppFacebookId } }] };
        };
        s3eOdnoklassniki.prototype.findUSID = function (list) {
            var usid = "";
            for (var _i = 0, list_8 = list; _i < list_8.length; _i++) {
                var value = list_8[_i];
                if (value.indexOf(this.USID_PREFIX) != -1) {
                    usid = value.split(this.USID_PREFIX).join("");
                    break;
                }
            }
            return usid;
        };
        s3eOdnoklassniki.prototype.addPrefix2Ids = function (list) {
            var result = [];
            if (list) {
                var len = list.length;
                for (var i = 0; i < len; ++i)
                    result.push(this.USID_PREFIX + list[i]);
            }
            return result;
        };
        s3eOdnoklassniki.prototype.deleteFBGraphRequest = function (requestID) {
            try {
                this.mGraphRequestsList[requestID].setDeleteStatus(true);
                return 0;
            }
            catch (e) {
                this.log("deleteFBGraphRequest: " + e.message);
            }
            return 1;
        };
        s3eOdnoklassniki.prototype.getResponseRaw = function (requestID) {
            try {
                var request = this.mGraphRequestsList[requestID];
                var JSONdata = JSON.stringify(request.requestResponce);
                if (!JSONdata || JSONdata.length == 0 || JSONdata == "[]")
                    JSONdata = "{}";
                if (request.requestPath.indexOf("me/permissions") != -1 ||
                    request.requestPath.indexOf(this.mAppFacebookId + "/permissions") != -1 ||
                    request.requestPath.indexOf("me/friends") != -1 ||
                    request.requestPath.indexOf("me/invitable_friends") != -1 ||
                    request.requestPath.indexOf("me/apprequests") != -1 ||
                    request.requestPath.indexOf("me/groups") != -1 ||
                    request.requestPath.indexOf("me/og.likes") != -1) {
                    JSONdata = JSON.stringify({ data: request.requestResponce });
                }
                this.log("ResponseRaw = " + JSONdata);
                global.SocialStats.response(JSONdata);
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(JSONdata);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) {
                this.log("getResponseRaw Error: " + e.message);
                global.SocialStats.response(e.message);
            }
            return null;
        };
        s3eOdnoklassniki.prototype.getFBRequest_ErrorCode = function (requestID) {
            try {
                return this.mGraphRequestsList[requestID].requestErrorCode;
            }
            catch (e) {
                this.log("getFBRequest_ErrorCode: " + e.message);
            }
            return 1;
        };
        s3eOdnoklassniki.prototype.getFBRequest_ErrorString = function (requestID) {
            try {
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(this.mGraphRequestsList[requestID].requestErrorMessage);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) {
                this.log("error getFBRequest_ErrorString");
            }
            return this.mEmptyData;
        };
        s3eOdnoklassniki.prototype.getFBAccessToken = function () {
            try {
                var accessToken = "";
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(accessToken);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) {
                this.log("getFBAccessToken: " + e.message);
            }
            return null;
        };
        s3eOdnoklassniki.prototype.initFBDialogWithAction = function (action) {
            this.mFbDialogRequestsList.push(new global.FbDialogRequest(action));
            return this.mFbDialogRequestsList.length - 1;
        };
        s3eOdnoklassniki.prototype.updateFBDialogActionWithParams = function (dialogID, name, value) {
            try {
                this.mFbDialogRequestsList[dialogID].setParam(name, value);
                return 0;
            }
            catch (e) {
                this.log("error updateFBDialogActionWithParams ");
            }
            return 1;
        };
        s3eOdnoklassniki.prototype.showFBDialogAction = function (dialogID, callbackKey) {
            this.mCurrentRequestKey = s3eOdnoklassniki.keyFBDialog_Show;
            this.mRequests.set(this.mCurrentRequestKey, new Request(callbackKey));
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                this.log("request.dialogAction = " + request.dialogAction);
                if (request.dialogAction == "feed" || request.dialogAction == "share_open_graph") {
                    var dialogActionParams = window.JSON.parse(request.dialogParams.action_properties);
                    if (dialogActionParams.object["og:description"] && dialogActionParams.object["og:description"].length > 64)
                        dialogActionParams.object["og:description"] = dialogActionParams.object["og:description"].substr(0, 61) + "...";
                    request.dialogParams.href = null;
                    this.mWaitingDialogMethod = "postMediatopic";
                    this.exitFullscreen();
                    var text = {
                        "type": "text",
                        "text": dialogActionParams.object["og:description"]
                    };
                    var link;
                    if (request.dialogParams.href) {
                        link = {
                            "type": "link",
                            "url": request.dialogParams.href
                        };
                    }
                    var app;
                    if (dialogActionParams.object["og:image"]) {
                        app = {
                            "type": "app",
                            "text": "",
                            "images": [
                                {
                                    "url": dialogActionParams.object["og:image"],
                                    "mark": "mark_url",
                                    "title": dialogActionParams.object["og:description"] ? dialogActionParams.object["og:description"] : "image"
                                }
                            ]
                        };
                    }
                    var post = [text];
                    if (link)
                        post.push(link);
                    if (app)
                        post.push(app);
                    global.OdnoklassnikiJSBridge.postMediatopic(post);
                    return 0;
                }
                if (request.dialogAction == "apprequests") {
                    global.OdnoklassnikiJSBridge.getCallsLeft(["notifications.sendFromUser"], showFbDialogAction_getCallsLeft.bind(this));
                    function showFbDialogAction_getCallsLeft(result) {
                        if (result.length > 0 && result[0].available) {
                            this.log(result.method + "," + result[0].name + "," + result[0].available + "," + result[0].callsLeft);
                            this.exitFullscreen();
                            this.mWaitingDialogMethod = "showInvite";
                            global.OdnoklassnikiJSBridge.showInvite(request.dialogParams.message, request.dialogParams.data, request.dialogParams.to);
                        }
                        else {
                            this.executeRequestByKey(this.mCurrentRequestKey, false, { status: 1, dialogID: dialogID });
                        }
                    }
                    return 0;
                }
                if (request.dialogAction == "like") {
                    if (!global.ExternalInterface.available) {
                        this.executeRequestByKey(this.mCurrentRequestKey, false, { status: 1, dialogID: dialogID });
                        return 1;
                    }
                    this.mWaitingDialogMethod = 'like';
                    if (this.readCloudStatsParam('like') == true) {
                        global.setTimeout(this.apiCallback.bind(this), 1, global.getApiCallbackEvent(this.mWaitingDialogMethod, '?result_code=0'));
                        return 0;
                    }
                    this.exitFullscreen();
                    global.ExternalInterfaceAsync("OKAS.UICall", "like");
                    return 0;
                }
            }
            catch (e) {
                this.log("showFBDialogAction: " + e.message);
            }
            ;
            return 1;
        };
        s3eOdnoklassniki.prototype.getResponceFbDialogRequest = function (dialogID) {
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                this.log("ResponseRaw = " + request.dialogResponce);
                var byteData = new global.ByteArray();
                byteData.writeUTFBytes(request.dialogResponce);
                byteData.writeByte(0);
                byteData.position = 0;
                return byteData;
            }
            catch (e) { }
            return null;
        };
        s3eOdnoklassniki.prototype.deleteFBDialogAction = function (dialogID) {
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                request.setDeleteStatus(true);
                return 0;
            }
            catch (e) { }
            return 1;
        };
        s3eOdnoklassniki.prototype.getFBDialog_ErrorCode = function (dialogID) {
            try {
                var request = this.mFbDialogRequestsList[dialogID];
                return request.dialogErrorCode;
            }
            catch (e) { }
            return 0;
        };
        s3eOdnoklassniki.prototype.ReauthorizeWithPermissions = function (sessionId, permissions, userText, callbackKey) {
            this.mCurrentRequestKey = s3eOdnoklassniki.keyLogin;
            this.mRequests.set(s3eOdnoklassniki.keyLogin, new Request(callbackKey));
            global.setTimeout(this.executeRequestByKey.bind(this), 1, s3eOdnoklassniki.keyLogin, false, { status: 1 });
            return 0;
        };
        s3eOdnoklassniki.prototype.onCallbackSendGraphRequest = function (result, fail) {
            if (fail === void 0) { fail = null; }
            var params = new Object;
            var requestID = this.mGraphRequestsList.length - 1;
            var request = this.mGraphRequestsList[requestID];
            if (result) {
                this.log("Complete execute " + s3eOdnoklassniki.keyFBRequest_Send);
                params.status = 0;
                params.requestID = requestID;
                request.requestResponce = result;
                this.executeRequestByKey(s3eOdnoklassniki.keyFBRequest_Send, true, params);
            }
            else {
                this.log("FAIL execute " + s3eOdnoklassniki.keyFBRequest_Send + ": " + (fail ? JSON.stringify(fail) : "The result was not found"));
                params.status = 1;
                params.requestID = requestID;
                request.requestResponce = fail;
                this.executeRequestByKey(s3eOdnoklassniki.keyFBRequest_Send, false, params);
            }
        };
        s3eOdnoklassniki.prototype.executeRequestByKey = function (key, isCompleate, params, statusCode) {
            if (statusCode === void 0) { statusCode = 0; }
            var request;
            if (this.mRequests.get(key) != null) {
                this.log("Execute callback for key = " + key);
                request = this.mRequests.get(key);
                var JSONdata;
                if (params)
                    JSONdata = JSON.stringify(params);
                var dataItem = new global.ByteArray();
                dataItem.writeUTFBytes(JSONdata);
                dataItem.position = 0;
                if (this.mCallbacks.get(request.completeHandler)) {
                    this.mCallbacks.get(request.completeHandler)(dataItem, this.mEmptyData);
                    this.mCallbacks.delete(request.completeHandler);
                    return;
                }
                this.mViewer["doCallback"](request.completeHandler, dataItem, this.mEmptyData);
            }
            else {
                this.log("callback with key " + key + " not found");
            }
        };
        s3eOdnoklassniki.prototype.clearWaitingDialog = function () {
            this.mWaitingDialogMethod = null;
            global.clearTimeout(this.mWaitingDialog);
        };
        s3eOdnoklassniki.prototype.getVersionObject = function () {
            return { main: this.mVersionMain, graphic: this.mVersionGraphic, logic: this.mVersionLogic };
        };
        s3eOdnoklassniki.prototype.exitFullscreen = function () {
            if (this.mViewer && this.mViewer.stage && this.mViewer.stage.displayState != global.StageDisplayState.NORMAL) {
                try {
                    this.mViewer.stage.displayState = global.StageDisplayState.NORMAL;
                }
                catch (error) {
                    this.log(error.message);
                }
            }
        };
        s3eOdnoklassniki.prototype.log = function (message) {
            if (global.CONFIG.QA_VERSION)
                global.GLog.print(this.TAG + message);
        };
        s3eOdnoklassniki.ICF_GAME = "game";
        s3eOdnoklassniki.ICF_CLOUD = "cloud";
        s3eOdnoklassniki.keyInit = "s3eFBInit";
        s3eOdnoklassniki.keyCheckLogin = "s3eFBSession_LoggedIn";
        s3eOdnoklassniki.keyLogin = "s3eFBSession_Login";
        s3eOdnoklassniki.keyLogout = "s3eFBTerminate";
        s3eOdnoklassniki.keyInitFBRequest_WithGraphPath = "s3eFBRequest_WithGraphPath";
        s3eOdnoklassniki.keyFBRequest_AddParamString = "s3eFBRequest_AddParamString";
        s3eOdnoklassniki.keyFBRequest_AddParamNumber = "s3eFBRequest_AddParamNumber";
        s3eOdnoklassniki.keyFBRequest_AddParamStringInternal = "s3eFBRequest_AddParamStringInternal";
        s3eOdnoklassniki.keyFBRequest_Send = "s3eFBRequest_Send";
        s3eOdnoklassniki.keyFBRequest_Delete = "s3eFBRequest_Delete";
        s3eOdnoklassniki.keyFBRequest_ErrorCode = "s3eFBRequest_ErrorCode";
        s3eOdnoklassniki.keyFBRequest_ErrorString = "s3eFBRequest_ErrorString";
        s3eOdnoklassniki.keyFBDialog_ErrorCode = "s3eFBDialog_ErrorCode";
        s3eOdnoklassniki.keyFBDialog_WithAction = "s3eFBDialog_WithAction";
        s3eOdnoklassniki.keyFBDialog_AddParamString = "s3eFBDialog_AddParamString";
        s3eOdnoklassniki.keyFBDialog_AddParamNumber = "s3eFBDialog_AddParamNumber";
        s3eOdnoklassniki.keyFBDialog_AddParamStringInternal = "s3eFBDialog_AddParamStringInternal";
        s3eOdnoklassniki.keyFBDialog_Show = "s3eFBDialog_Show";
        s3eOdnoklassniki.keyFBDialog_Delete = "s3eFBDialog_Delete";
        s3eOdnoklassniki.keyFBSession_ReauthorizeWithPublishPermissions = "s3eFBSession_ReauthorizeWithPublishPermissions";
        s3eOdnoklassniki.keyFBSession_ReauthorizeWithReadPermissions = "s3eFBSession_ReauthorizeWithReadPermissions";
        s3eOdnoklassniki.keyFBRequest_ResponseRaw = "s3eFBRequest_ResponseRaw";
        s3eOdnoklassniki.keyFBSession_AccessToken = "s3eFBSession_AccessToken";
        s3eOdnoklassniki.keyFBDialog_DidCompleteWithUrl = "s3eFBDialog_DidCompleteWithUrl";
        s3eOdnoklassniki.keyFBGetAppID = "s3eFBGetAppID";
        return s3eOdnoklassniki;
    }(global.EventDispatcher));
    global.s3eOdnoklassniki = s3eOdnoklassniki;
})(global || (global = {}));
var Request = (function () {
    function Request(completeHandlerKey, errorHandlerKey) {
        if (errorHandlerKey === void 0) { errorHandlerKey = -1; }
        this.completeHandler = 0;
        this.errorHandler = 0;
        this.completeHandler = completeHandlerKey;
        this.errorHandler = errorHandlerKey;
    }
    return Request;
}());
var global;
(function (global) {
    global.AssetsData = datas.AssetsData;
    global.PackInfo = datas.PackInfo;
    global.DataAbstract = datas.DataAbstract;
    global.DataFile = datas.DataFile;
    global.DataImage = datas.DataImage;
    global.DataSound = datas.DataSound;
    global.FZip = deng.fzip.FZip;
    global.FZipFile = deng.fzip.FZipFile;
    global.ErrorType = errors.ErrorType;
    global.Bitmap = flash.display.Bitmap;
    global.BitmapData = flash.display.BitmapData;
    global.DisplayObject = flash.display.DisplayObject;
    global.LoaderInfo = flash.display.LoaderInfo;
    global.Sprite = flash.display.Sprite;
    global.Stage3D = flash.display.Stage3D;
    global.StageAlign = flash.display.StageAlign;
    global.StageDisplayState = flash.display.StageDisplayState;
    global.StageScaleMode = flash.display.StageScaleMode;
    global.Context3D = flash.display3D.Context3D;
    global.Context3DCompareMode = flash.display3D.Context3DCompareMode;
    global.Context3DRenderMode = flash.display3D.Context3DRenderMode;
    global.ContextMenuEvent = flash.events.ContextMenuEvent;
    global.ErrorEvent = flash.events.ErrorEvent;
    global.Event = flash.events.Event;
    global.FullScreenEvent = flash.events.FullScreenEvent;
    global.IOErrorEvent = flash.events.IOErrorEvent;
    global.KeyboardEvent = flash.events.KeyboardEvent;
    global.MouseEvent = flash.events.MouseEvent;
    global.ProgressEvent = flash.events.ProgressEvent;
    global.SecurityErrorEvent = flash.events.SecurityErrorEvent;
    global.ExternalInterface = flash.external.ExternalInterface;
    global.Rectangle = flash.geom.Rectangle;
    global.SoundChannel = flash.media.SoundChannel;
    global.SoundTransform = flash.media.SoundTransform;
    global.FileReference = flash.net.FileReference;
    global.SharedObject = flash.net.SharedObject;
    global.URLLoaderDataFormat = flash.net.URLLoaderDataFormat;
    global.URLRequest = flash.net.URLRequest;
    global.URLRequestHeader = flash.net.URLRequestHeader;
    global.URLRequestMethod = flash.net.URLRequestMethod;
    global.URLStream = flash.net.URLStream;
    global.navigateToURL = flash.net.navigateToURL;
    global.Capabilities = flash.system.Capabilities;
    global.ImageDecodingPolicy = flash.system.ImageDecodingPolicy;
    global.LoaderContext = flash.system.LoaderContext;
    global.Security = flash.system.Security;
    global.System = flash.system.System;
    global.ContextMenu = flash.ui.ContextMenu;
    global.ContextMenuItem = flash.ui.ContextMenuItem;
    global.Keyboard = flash.ui.Keyboard;
    global.Mouse = flash.ui.Mouse;
    global.ByteArray = flash.utils.ByteArray;
    global.Base64 = flash.utils.Base64;
    global.Dictionary = flash.utils.Dictionary;
    global.Endian = flash.utils.Endian;
    global.clearTimeout = flash.utils.clearTimeout;
    global.getDefinitionByName = flash.utils.getDefinitionByName;
    global.getTimer = flash.utils.getTimer;
    global.setTimeout = flash.utils.setTimeout;
    global.AppIcf = s3eUtils.AppIcf;
    global.Blocker = s3eUtils.Blocker;
    global.Online = s3eUtils.Online;
    global.OnlineURL = s3eUtils.OnlineURL;
    global.Parse = s3eUtils.Parse;
    global.Popup = s3eUtils.Popup;
    global.SnappedSWF = s3eUtils.SnappedSWF;
    global.URLVariablesGlobal = s3eUtils.URLVariablesGlobal;
    global.getReconnectInterval = s3eUtils.getReconnectInterval;
    global.ARectangle = tools.ARectangle;
    global.CacheService = tools.CacheService;
    global.CommonBuffers = tools.CommonBuffers;
    global.CrashParam = tools.CrashParam;
    global.CrashReport = tools.CrashReport;
    global.CursorManager = tools.CursorManager;
    global.ExtendedLoader = tools.ExtendedLoader;
    global.ExtendedURLLoader = tools.ExtendedURLLoader;
    global.KeyboardMap = tools.KeyboardMap;
    global.MouseWheel = tools.MouseWheel;
    global.ProfileSupport = tools.ProfileSupport;
    global.Tests = tools.Tests;
    global.cloudErrorCode = tools.cloudErrorCode;
    global.FrameRateStats = tools.fps.FrameRateStats;
    global.gc = tools.gc;
    global.getNextPowerOfTwo = tools.getNextPowerOfTwo;
    global.PreloadManager = tools.init.PreloadManager;
    global.State = tools.init.State;
    global.UncaughtErrorEvent = flash.events.UncaughtErrorEvent;
    global.HTTPStatusEvent = flash.events.HTTPStatusEvent;
    var ASViewer = (function (_super) {
        __extends(ASViewer, _super);
        function ASViewer(wmode) {
            if (wmode === void 0) { wmode = ASViewer.WMODE_DIRECT; }
            var _this = _super.call(this) || this;
            _this.is_IASViewer = null;
            _this.INIT_STATE_ASSETS = 0;
            _this.INIT_STATE_CLOUD = 1;
            _this.INIT_STATE_TREE = 2;
            _this.INIT_STATE_RESTORE = 10;
            _this.DEFAULT_PERMISSIONS = "user_friends,email";
            _this.RESIZE_DELAY = 100;
            _this.RESIZE_MAX_WAITING = 500;
            _this.CHANGE_SCREEN_TIMEOUT = 2 * 60 * 1000;
            _this.GET_FID_TIMEOUT = 15 * 1000;
            _this.firstMalloc = 0;
            _this.localTimezone = 0;
            _this.localTimerStamp = 0;
            _this.channelDimension = 10;
            _this.w = 0;
            _this.h = 0;
            _this.lastFrameTime = 0;
            _this.mCloudLaunches = 0;
            _this.mSocialInited = false;
            _this.mStatisticsInited = false;
            _this.mBillingInited = false;
            _this.mPartnerInited = false;
            _this.mLastPercent = 0;
            _this.mRecoveringTextureCount = 0;
            _this.mAsyncStarted = false;
            _this.mAssetsReady = false;
            _this.mASMReady = false;
            _this.mCloudLoginReady = false;
            _this.mCloudOfflineMode = false;
            _this.mSocialReady = false;
            _this.mAppActive = true;
            _this.mDeactivated = false;
            _this.mFirstScreenFrameExecuted = false;
            _this.mViewerLoadingProgress = -1;
            _this.mViewerLoadState = ASViewer.LOAD_IDLE;
            _this.mChangeScreenTimestamp = 0;
            _this.mGetImageFidTimestamp = -1;
            _this.mGetChildFidTimestamp = -1;
            _this.mTextIds = {};
            _this.mCbid = {};
            _this.mResizeTimeout = 0;
            _this.mResizeTimestamp = 0;
            _this.mPanelsInited = false;
            _this.mActiveTimestamp = 0;
            _this.mDelayedResize = false;
            _this.mIsMouseLeave = false;
            _this.mViewerCrashed = false;
            _this.mViewerNeedAS3Crash = false;
            _this.mPrintDT = false;
            _this.mStartPlayTimestamp = 0;
            _this.mStartSessionTimestamp = 0;
            _this.mSessionRegisterStatus = 0;
            _this.mBackgroundReconnectCount = 0;
            _this.mPausedByInactive = false;
            _this.mScreenshotDataPtr = 0;
            _this.mSystemShowLoadingProgress = false;
            _this.mSharedObjectStatus = 0;
            _this.mForceSendToFlurry = 0;
            _this.mADShowing = false;
            _this.wmode = wmode;
            ASViewer.instance = window.global_ASViewer_instance = _this;
            global.GLog.buf = new global.ByteArray;
            _this.mEmptyData = new global.ByteArray;
            _this.mHTTPGetMap = new global.Dictionary;
            _this.mPostBytesMap = new global.Dictionary;
            _this.mLoaderDecodeMap = new global.Dictionary;
            _this.mPush2Send = new global.Dictionary;
            _this.sockets = new global.Dictionary;
            ASViewer.sS3eCommonCbIDMap = new global.Dictionary;
            _this.initStatistics();
            _this.localTimezone = new Date().timezoneOffset * 60 * 1000;
            global.Security.allowDomain("*");
            try {
                global.SharedObject.getLocal("test");
            }
            catch (error) {
                if (error.errorID == 2134)
                    _this.mSharedObjectStatus = 1;
            }
            _this.addEventListener(flash.events.Event.ADDED_TO_STAGE, _this.init.bind(_this));
            return _this;
        }
        Object.defineProperty(ASViewer.prototype, "viewerLoadStateStr", {
            get: function () {
                switch (this.viewerLoadState) {
                    case ASViewer.LOAD_IDLE: return 'LOAD_IDLE';
                    case ASViewer.BEGIN_LOAD_FIRST_SCREEN: return 'BEGIN_LOAD_FIRST_SCREEN';
                    case ASViewer.BEGIN_LOAD_NEXT_SCREEN: return 'BEGIN_LOAD_NEXT_SCREEN';
                    case ASViewer.LOAD_CONFIGS: return 'LOAD_CONFIGS';
                    case ASViewer.LOAD_PROGRESS_RESOURCES: return 'LOAD_PROGRESS_RESOURCES';
                    case ASViewer.SHOW_SPLASH: return 'SHOW_SPLASH';
                    case ASViewer.LOAD_TEXTS: return 'LOAD_TEXTS';
                    case ASViewer.LOAD_SCRIPTS: return 'LOAD_SCRIPTS';
                    case ASViewer.LOAD_LAYOUT: return 'LOAD_LAYOUT';
                    case ASViewer.LOAD_INIT_GLOBAL_SCREENS: return 'LOAD_INIT_GLOBAL_SCREENS';
                    case ASViewer.LOAD_FIRST_SCREEN_RESOURCES: return 'LOAD_FIRST_SCREEN_RESOURCES';
                    case ASViewer.LOAD_NEXT_SCREEN_RESOURCES: return 'LOAD_NEXT_SCREEN_RESOURCES';
                    case ASViewer.LOAD_ERROR: return 'LOAD_ERROR';
                    case ASViewer.LOAD_COMPLETE: return 'LOAD_COMPLETE';
                }
                return null;
            },
            enumerable: true,
            configurable: true
        });
        ASViewer.getCBID = function (value) {
            return ASViewer.instance.mCbid[value];
        };
        ASViewer.setLastS3eCommon = function (funcName, cbID) {
            if (cbID === void 0) { cbID = -1; }
            ASViewer.sLastS3eCommon = funcName;
            if (cbID >= 0 && !ASViewer.sS3eCommonCbIDMap.get(cbID)) {
                ASViewer.sS3eCommonCbIDMap.set(cbID, funcName);
            }
        };
        ASViewer.writeBytes = function (dataPtr, dataSize, value) {
            value.position = 0;
            if (value.length < dataSize) {
                dataSize = value.length;
            }
            Module.HEAP8.set(new Uint8Array(value.dataView.buffer).subarray(0, dataSize), dataPtr);
        };
        ASViewer.FS_stat = function (path) {
            try {
                return FS.stat(path);
            }
            catch (e) { }
            return null;
        };
        ASViewer.writeFile = function (path, data, params, mkdir) {
            if (mkdir === void 0) { mkdir = true; }
            if (mkdir) {
                ASViewer.mkdir(path.substr(0, path.lastIndexOf('/')));
            }
            FS.writeFile(path, data, params);
        };
        ASViewer.mkdir = function (dir) {
            if (!dir)
                return;
            if (dir.substr(0, 1) == '/')
                dir = dir.substr(1);
            if (!dir.length)
                return;
            try {
                var spt = dir.split('/');
                if (spt.length > 1) {
                    dir = '';
                    while (spt.length) {
                        var d = (dir.length ? dir + '/' : '') + spt[0];
                        if (!ASViewer.FS_stat(d)) {
                            FS.mkdir(d);
                        }
                        dir += '/' + spt.shift();
                    }
                }
                else {
                    if (!ASViewer.FS_stat(dir)) {
                        FS.mkdir(dir);
                    }
                }
            }
            catch (e) { }
        };
        Object.defineProperty(ASViewer, "game2postfix", {
            get: function () {
                var game = global.AppIcf.read(ASViewer.ICF_CLOUD, 'game');
                return game ? game : '';
            },
            enumerable: true,
            configurable: true
        });
        ASViewer.prototype.DataImage_changeStatus = function (target) {
            if (this.mFirstScreenFrameExecuted) {
                return;
            }
            var p = 0;
            var len = 0;
            for (var _i = 0, _a = this.packs.values; _i < _a.length; _i++) {
                var pack = _a[_i];
                if (!pack)
                    continue;
                for (var _b = 0, _c = pack.images.values; _b < _c.length; _b++) {
                    var img = _c[_b];
                    if (!img)
                        continue;
                    if (img.dynamic)
                        continue;
                    p += img.percentLoaded;
                    len++;
                }
            }
            global.PreloadManager.update(global.PreloadManager.ST_CREATE_IMAGES, (p / len) * 100);
        };
        ASViewer.prototype.DataSound_changeStatus = function (snd) {
            var index = this.sounds2load.indexOf(snd);
            if (index >= 0) {
                switch (snd.status) {
                    case global.DataAbstract.STATUS_LOADING:
                        if (index) {
                            this.sounds2load.splice(index, 1);
                            this.sounds2load.unshift(snd);
                        }
                        break;
                    case global.DataAbstract.STATUS_COMPLETE:
                    case global.DataAbstract.STATUS_ERROR:
                    case global.DataAbstract.STATUS_READY_TO_DESTROY:
                        this.sounds2load.splice(index, 1);
                        break;
                }
            }
            if (!this.mFirstScreenFrameExecuted) {
                if (!snd.dynamic && snd.status == global.DataAbstract.STATUS_COMPLETE)
                    global.PreloadManager.update(global.PreloadManager.ST_CREATE_SOUNDS, this.soundGetLoadProgress() * 100);
            }
            var MAX_SOUND_INTERVAL = 300;
            if (snd.status != global.DataAbstract.STATUS_COMPLETE) {
                return;
            }
            for (var _i = 0, _a = this.channels2sounds.keys; _i < _a.length; _i++) {
                var channelID = _a[_i];
                var obj = this.channels2sounds.get(channelID);
                if (obj.resID == snd.id) {
                    var need2play = obj.play && (snd.music || (!snd.music && global.getTimer() - obj.stamp < MAX_SOUND_INTERVAL));
                    if (need2play) {
                        this.soundPlay(obj.channelID, obj.resID, obj.loop, obj.position);
                        if (obj.volume.length) {
                            this.soundSetVolume(obj.channelID, obj.volume[obj.volume.length - 1].volume);
                        }
                    }
                    this.channels2sounds.delete(channelID);
                    break;
                }
            }
        };
        ASViewer.prototype.AssetsData_changeStatus = function (packId, percent) {
            if (this.mViewerLoadState >= ASViewer.LOAD_FIRST_SCREEN_RESOURCES) {
                global.PreloadManager.update(global.PreloadManager.ST_LOAD_PACKS, global.AssetsData.percentLoaded() * 100);
            }
        };
        ASViewer.prototype.logEvent = function (eventName, parameters, mask) {
            if (parameters === void 0) { parameters = null; }
            if (mask === void 0) { mask = ASViewer.SENDER_FLURRY; }
            if (this.mForceSendToFlurry == 2)
                mask = ASViewer.SENDER_NONE;
            if (mask & ASViewer.SENDER_FLURRY && this.mStatistics)
                this.mStatistics.logEvent(eventName, parameters, 0);
            if (mask & ASViewer.SENDER_ABS) {
                var params = [];
                for (var paramName in parameters)
                    params.push({ paramName: paramName, paramValue: parameters[paramName] });
                var dataItem = new global.ByteArray;
                dataItem.writeUTFBytes(JSON.stringify({
                    eventName: eventName,
                    eventParams: params
                }));
                dataItem.writeByte(0);
                dataItem.position = 0;
                this.doCallback(this.mCbid[ASViewer.CBID_EVENT], dataItem, this.mEmptyData);
            }
        };
        ASViewer.prototype.log = function (value) {
            global.GLog.print(value, false);
        };
        Object.defineProperty(ASViewer.prototype, "cloudUser", {
            get: function () {
                return this.mCloudUser;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ASViewer.prototype, "cloudCrash", {
            get: function () {
                return this.mCloudCrash;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ASViewer.prototype, "viewerLoadState", {
            get: function () {
                return this.mViewerLoadState;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ASViewer.prototype, "loadTime", {
            get: function () {
                return this.mStartPlayTimestamp ? this.mStartPlayTimestamp : global.getTimer();
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ASViewer.prototype, "playTime", {
            get: function () {
                return this.mStartPlayTimestamp ? global.getTimer() - this.mStartPlayTimestamp : 0;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ASViewer.prototype, "sessionTime", {
            get: function () {
                return this.mStartSessionTimestamp ? global.getTimer() - this.mStartSessionTimestamp : 0;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ASViewer.prototype, "changeScreenTime", {
            get: function () {
                return this.mChangeScreenTimestamp > 0 ? global.getTimer() - this.mChangeScreenTimestamp : 0;
            },
            enumerable: true,
            configurable: true
        });
        ASViewer.prototype.isUserActive = function () {
            return this.mActiveTimestamp == 0 || global.getTimer() - this.mActiveTimestamp < ASViewer.INACTIVE_INTERVAL;
        };
        ASViewer.prototype.getLoadingPercent = function () {
            return this.mLastPercent;
        };
        ASViewer.prototype.getLanguage = function () {
            if (!this.mSysLanguage)
                this.initLanguage();
            return this.mPageLanguage ? this.mPageLanguage : this.mSysLanguage;
        };
        Object.defineProperty(ASViewer.prototype, "systemLanguage", {
            get: function () {
                return this.mSysLanguage;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ASViewer.prototype, "pageLanguage", {
            get: function () {
                return this.mPageLanguage;
            },
            enumerable: true,
            configurable: true
        });
        ASViewer.prototype.showCursor = function (show) {
            if (show)
                global.Mouse.show();
            else
                global.Mouse.hide();
        };
        ASViewer.prototype.showCustomCursor = function (resId) {
            if (!global.CursorManager.supported) {
                return;
            }
            if (resId < 0 || this.mIsMouseLeave) {
                global.CursorManager.showDefault();
                return;
            }
            global.CursorManager.showCustom(resId.toString());
        };
        ASViewer.prototype.declareCustomCursor = function (resId, pack, fid, x, y, w, h, a, fps) {
            if (!global.CursorManager.supported) {
                return;
            }
            global.CursorManager.declare(resId.toString(), pack, fid, new global.ARectangle(x, y, w, h, a), fps);
        };
        ASViewer.prototype.getScreenWidth = function () { return this.w; };
        ASViewer.prototype.getScreenHeight = function () { return this.h; };
        ASViewer.prototype.startDraw = function () { this.clear(); };
        ASViewer.prototype.present = function () {
            this.ctx3d.present();
            if (this.mFirstScreenFrameExecuted && this.mViewerLoadState == ASViewer.LOAD_NEXT_SCREEN_RESOURCES) {
                global.Online.downloadPercent = global.AssetsData.percentLoaded() * 100;
                global.Online.show();
            }
            else {
                this.tryProgressHide();
            }
        };
        ASViewer.prototype.resImgAddToLoadQueue = function (type, pack, fid, fileName, md5, packMask, fidMask, fileNameMask, md5Mask, dynamic) {
            if (dynamic === void 0) { dynamic = 0; }
            var img = this.getImageById(pack, fid);
            if (!img) {
                img = new global.DataImage(type, pack, fid, fileName, md5, packMask, fidMask, fileNameMask, md5Mask, dynamic == 1);
                this.setImageById(pack, fid, img);
            }
            else {
                img.status = global.DataAbstract.STATUS_INIT;
            }
            img.unused = false;
            if (img.dynamic) {
                this.images2load.splice(this.images2load.length ? this.images2load.length - 1 : this.images2load.length, 0, img);
            }
        };
        ASViewer.prototype.resFileAddToLoadQueue = function (pack, fid, fileName, md5, dynamic) {
            if (dynamic === void 0) { dynamic = 0; }
            var file = this.getFileById(pack, fid);
            if (!file) {
                file = new global.DataFile(pack, fid, fileName, md5, dynamic == 1);
                this.setFileById(pack, fid, file);
            }
            file.startLoad();
        };
        ASViewer.prototype.resFileGetStatus = function (pack, fid) {
            var obj = {
                status: global.DataAbstract.STATUS_INIT
            };
            var file = this.getFileById(pack, fid);
            if (file) {
                obj.status = file.status;
            }
            return obj;
        };
        ASViewer.prototype.resImgGetBitmap = function (pack, fid) {
            if (this.mViewerLoadState == ASViewer.LOAD_NEXT_SCREEN_RESOURCES && !global.AssetsData.isPercentLoadedLocked) {
                global.AssetsData.lockPercentLoaded(true);
                global.Online.downloadPercent = global.AssetsData.percentLoaded() * 100;
            }
            var obj = {
                status: 1,
                type: 0,
                width: 0,
                height: 0,
                dataPtr: 0,
                dataSize: 0
            };
            var img = this.getImageById(pack, fid);
            if (img) {
                global.DataImage.waitForGetBitmap(img);
                obj.status = img.status;
                obj.type = img.type;
                if (obj.type == global.DataImage.TEXTURE_TYPE_COMPRESSED_BYTES) {
                    obj.type = global.DataImage.TEXTURE_TYPE_PVR_ARGB_8888;
                }
                if (img.status == global.DataAbstract.STATUS_COMPLETE && img.dataSize > 0 && img.isChildrenReady) {
                    obj.width = img.width;
                    obj.height = img.height;
                    obj.dataPtr = img.dataPtr;
                    obj.dataSize = img.dataSize;
                    global.DataImage.freeBuffer(img);
                }
                else if (img.status == global.DataAbstract.STATUS_INIT) {
                    img.startLoad();
                }
                if (global.DataImage.IMAGE_LAST_GET_FID == fid && img.status != global.DataAbstract.STATUS_COMPLETE) {
                    if (this.mGetImageFidTimestamp == -1) {
                        this.mGetImageFidTimestamp = global.getTimer();
                    }
                }
                else {
                    this.mGetImageFidTimestamp = -1;
                }
                global.DataImage.IMAGE_LAST_GET_FID = fid;
                global.DataImage.IMAGE_LAST_GET_PACK = img.pack;
                global.DataImage.IMAGE_LAST_GET_STATUS = img.status;
            }
            else {
                obj.status = global.DataAbstract.STATUS_ERROR;
            }
            return obj;
        };
        ASViewer.prototype.resImgUploadBitmap = function (pack, fid) {
            var img = this.getImageById(pack, fid);
            if (img != null) {
                img.startDestroy();
                img.recovering = false;
            }
        };
        ASViewer.prototype.resImgAddToUnloadQueue = function (pack, fid) {
            var img = this.getImageById(pack, fid);
            if (img != null) {
                if (img.bytes && img.type == global.DataImage.TEXTURE_TYPE_PVR_BGRA_8888) {
                    img.bytes.clear();
                    img.bytes = null;
                }
                img.unused = true;
                img.recovering = false;
            }
        };
        ASViewer.prototype.packInfo = function (pack, type, url, md5, size, partsNum) {
            global.AssetsData.packInfo(pack, type, url, md5, size, partsNum);
        };
        ASViewer.prototype.soundAddToLoadQueue = function (pack, fid, url, resID, dynamic, md5, music) {
            if (dynamic === void 0) { dynamic = false; }
            if (md5 === void 0) { md5 = null; }
            if (music === void 0) { music = false; }
            if (!this.getSoundById(pack, resID)) {
                var snd = new global.DataSound(pack, fid, resID, url, dynamic, md5, music);
                this.setSoundById(pack, resID, snd);
                if (snd.music)
                    this.sounds2load[this.sounds2load.length] = snd;
                if (!dynamic)
                    snd.startLoad();
            }
        };
        ASViewer.prototype.soundGetLoadProgress = function () {
            var num = 0;
            var percent = 0;
            for (var _i = 0, _a = this.packs.values; _i < _a.length; _i++) {
                var pack = _a[_i];
                if (!pack)
                    continue;
                for (var _b = 0, _c = pack.sounds.values; _b < _c.length; _b++) {
                    var snd = _c[_b];
                    if (!snd)
                        continue;
                    if (snd.dynamic)
                        continue;
                    num++;
                    percent += snd.percentLoaded;
                }
            }
            return percent / num;
        };
        ASViewer.prototype.soundAddToUnloadQueue = function (resID) {
            for (var _i = 0, _a = this.channels2sounds.keys; _i < _a.length; _i++) {
                var channelID = _a[_i];
                if (this.channels2sounds.get(channelID).resID == resID) {
                    this.channels2sounds.delete(channelID);
                    break;
                }
            }
        };
        ASViewer.prototype.soundGetFreeChannel = function () {
            for (var i = 1; i < this.channelDimension; ++i) {
                if (this.channels[i] == null)
                    return i;
            }
            return 1;
        };
        ASViewer.prototype.soundPlay = function (channelID, pack, resID, loop, position) {
            if (position === void 0) { position = 0; }
            var snd = this.getSoundById(pack, resID);
            if (snd) {
                if (snd.getSound() && snd.status == global.DataAbstract.STATUS_COMPLETE) {
                    if (this.channels[channelID] != null) {
                        this.channels[channelID].stop();
                    }
                    var ch = snd.play(loop, position);
                    if (!ch)
                        return 1;
                    ch.addEventListener(flash.events.Event.SOUND_COMPLETE, this.onSoundComplete.bind(this));
                    this.channels[channelID] = ch;
                    this.channelsinfo[channelID].resID = resID;
                    this.channelsinfo[channelID].loop = loop;
                    this.channels2sounds.delete(channelID);
                    return 0;
                }
                else if (!snd.getSound()) {
                    if (snd.status == global.DataAbstract.STATUS_INIT) {
                        snd.startLoad();
                    }
                    if (snd.status == global.DataAbstract.STATUS_LOADING) {
                        this.channels2sounds.set(channelID, {
                            snd: snd,
                            channelID: channelID,
                            resID: resID,
                            loop: loop,
                            position: position,
                            volume: [],
                            play: true,
                            stamp: global.getTimer()
                        });
                        return 0;
                    }
                }
            }
            return 1;
        };
        ASViewer.prototype.soundStop = function (channelID) {
            var ch = this.channels[channelID];
            if (ch) {
                this.channels[channelID] = null;
                ch.stop();
                ch.removeEventListener(flash.events.Event.SOUND_COMPLETE, this.onSoundComplete.bind(this));
            }
            var obj = this.channels2sounds.get(channelID);
            if (obj) {
                obj.play = false;
            }
        };
        ASViewer.prototype.soundSetVolume = function (channelID, volume) {
            var ch = this.channels[channelID];
            if (ch) {
                var sndTransform = ch.soundTransform;
                sndTransform.volume = volume;
                ch.soundTransform = sndTransform;
            }
            var obj = this.channels2sounds.get(channelID);
            if (obj) {
                obj.volume.push({
                    volume: volume,
                    stamp: global.getTimer()
                });
            }
        };
        ASViewer.prototype.soundGetVolume = function (channelID) {
            var ch = this.channels[channelID];
            if (ch) {
                return ch.soundTransform.volume;
            }
            var obj = this.channels2sounds.get(channelID);
            if (obj && obj.volume.length) {
                return obj.volume[obj.volume.length - 1].volume;
            }
            return 0;
        };
        ASViewer.prototype.soundIsPlayed = function (channelID) {
            var ch = this.channels[channelID];
            if (ch) {
                return 1;
            }
            var obj = this.channels2sounds.get(channelID);
            if (obj) {
                return obj.play ? 1 : 0;
            }
            return 0;
        };
        ASViewer.prototype.soundPosition = function (channelID) {
            var ch = this.channels[channelID];
            if (ch) {
                return ch.position;
            }
            var obj = this.channels2sounds.get(channelID);
            if (obj) {
                return obj.position;
            }
            return 0;
        };
        ASViewer.prototype.soundPause = function (channelID) {
            var ch = this.channels[channelID];
            if (ch) {
                this.positions[channelID] = ch.position;
                this.soundStop(channelID);
            }
            var obj = this.channels2sounds.get(channelID);
            if (obj) {
                obj.play = false;
            }
        };
        ASViewer.prototype.soundResume = function (channelID) {
            var ch = this.channels[channelID];
            if (ch) {
                this.soundPlay(channelID, this.channelsinfo[channelID].resID, this.channelsinfo[channelID].loop, this.positions[channelID]);
            }
            var obj = this.channels2sounds.get(channelID);
            if (obj) {
                obj.play = true;
            }
        };
        ASViewer.prototype.openURL = function (url, window) {
            if (window === void 0) { window = "_blank"; }
            global.navigateToURL(new global.URLRequest(url), window);
        };
        ASViewer.prototype.s3eCommonInt = function (extName, funcName, cbID, params) {
            ASViewer.setLastS3eCommon(funcName, cbID);
            var result = execute.bind(this)();
            ASViewer.setLastS3eCommon(null);
            return result;
            function execute() {
                var obj;
                if (extName == "s3eGRender") {
                    if (funcName == "s3eGRenderInitCaptureScreenPixels") {
                        global.GLog.print("[Viewer funcName] s3eGRenderInitCaptureScreenPixels");
                        this.ctx3d.configureBackBuffer(this.w, this.h, 0, false);
                    }
                }
                if (extName == "s3eFacebook") {
                    this.initSocial();
                    if (this.mSocial)
                        return this.mSocial.s3eCommonInt(funcName, cbID, params);
                    else
                        return 1;
                }
                else if (extName && extName.indexOf("Billing") != -1) {
                    this.initBilling(null);
                    if (this.mBilling)
                        return this.mBilling.s3eCommonInt(funcName, cbID, params);
                    else
                        return 0;
                }
                else if (extName == "s3eHTTP") {
                    if (funcName == "s3eHTTPGet") {
                        if (params && params.length > 0) {
                            var dataItem = JSON.parse(params);
                            this.httpGet(dataItem.requestID, dataItem.url, dataItem.timeout, cbID);
                        }
                    }
                }
                else if (extName == "s3eViewer") {
                    if (funcName == "s3eViewerFirstScreenFrame") {
                        this.firstScreenFrame();
                    }
                    else if (funcName == "s3eViewerGameDebug") {
                        global.CONFIG.DEBUG = params == "1";
                        this.updateContextMenu();
                    }
                    else if (funcName == "s3eViewerTraceLog") {
                        global.CONFIG.LOG = params == "1";
                        this.updateContextMenu();
                    }
                }
                else if (extName == "s3eSystem") {
                    if (funcName == "s3eSystemFullscreen") {
                        if (this.stage && this.stage.allowsFullScreen && this.mFirstScreenFrameExecuted) {
                            if (global.ExternalInterface.available) {
                                try {
                                    global.ExternalInterface.call('displayState', this.stage.displayState);
                                }
                                catch (error) { }
                            }
                            try {
                                this.readFullscreenRect();
                                try {
                                    this.stage.displayState = params == "ON" ? global.StageDisplayState.FULL_SCREEN : global.StageDisplayState.NORMAL;
                                }
                                catch (error) { }
                            }
                            catch (error) {
                                global.GLog.print("ERROR: stage.displayState " + error.message);
                            }
                        }
                        else {
                            global.GLog.print("Fullscreen not allowed!");
                        }
                    }
                    else if (funcName == "s3eSystemWheelType") {
                        if (params == "PAGE") {
                        }
                        else if (params == "DUCK") {
                        }
                    }
                    else if (funcName == "s3eSystemFileSystemReady") {
                        return this.mSharedObjectStatus;
                    }
                    else if (funcName == "s3eSystemIsInternetConnection") {
                        return global.Online.connected ? 1 : 0;
                    }
                    else if (funcName == 's3eSystemStartShowLoadingProgress') {
                        if (this.mViewerLoadState == ASViewer.LOAD_COMPLETE) {
                            this.mSystemShowLoadingProgress = true;
                            global.Online.show();
                        }
                    }
                    else if (funcName == 's3eSystemStopShowLoadingProgress') {
                        this.mSystemShowLoadingProgress = false;
                        this.tryProgressHide();
                    }
                    else if (funcName == 's3eSystemGetFullScreenWidth') {
                        return global.Capabilities.screenResolutionX;
                    }
                    else if (funcName == 's3eSystemGetFullScreenHeight') {
                        return global.Capabilities.screenResolutionY;
                    }
                }
                else if (extName == "s3eApplication") {
                    switch (funcName) {
                        case ASViewer.CBID_FULLSCREEN:
                        case ASViewer.CBID_TEXT_REQUEST:
                        case ASViewer.CBID_RESTORE_CONTEXT:
                        case ASViewer.CBID_EXTERNAL_COMMAND:
                        case ASViewer.CBID_CLOUD_SAVE:
                        case ASViewer.CBID_CLOUD_FORCED_SAVE:
                        case ASViewer.CBID_CLOUD_EXIT:
                        case ASViewer.CBID_DOWNLOADER:
                        case ASViewer.CBID_CLOUD_RECEIVE:
                        case ASViewer.CBID_EVENT:
                        case ASViewer.CBID_DOWNLOAD_PACK_PROGRESS:
                        case ASViewer.CBID_DOWNLOAD_PACK_COMPLETE:
                        case ASViewer.CBID_DOWNLOAD_PACK_ERROR:
                            global.GLog.print(funcName + " = " + cbID);
                            this.mCbid[funcName] = cbID;
                            break;
                        case "s3eApplicationTextResponse":
                            this.mStrResult = params;
                            break;
                        case "s3eApplicationGetLounchesNum":
                            return this.mCloudLaunches;
                        case 's3eApplicationDownloadPack':
                            if (params && params.length > 0) {
                                obj = JSON.parse(params);
                                global.AssetsData.packInfo(obj.pack, global.AssetsData.PACK_NETWORK, obj.url, obj.md5, obj.size, obj.parts);
                                global.AssetsData.loadPack(obj.pack, function () {
                                    var dataItem = new global.ByteArray;
                                    dataItem.writeUTFBytes(JSON.stringify({ pack: obj.pack }));
                                    dataItem.writeByte(0);
                                    dataItem.position = 0;
                                    this.doCallback(this.mCbid[ASViewer.CBID_DOWNLOAD_PACK_COMPLETE], dataItem, this.mEmptyData);
                                }.bind(this), function (httpStatus, message) {
                                    message = message || 'Unknown error';
                                    var cpp_errCode = ASViewer.IPACK_DOWNLOADER_ERROR_NO_SERVER_CONNECTION;
                                    if (!global.Online.connected) {
                                        cpp_errCode = ASViewer.IPACK_DOWNLOADER_ERROR_NO_SERVER_CONNECTION;
                                    }
                                    if (httpStatus == 404) {
                                        cpp_errCode = ASViewer.IPACK_DOWNLOADER_ERROR_RESOURCES_NOT_FOUND;
                                    }
                                    var dataItem = new global.ByteArray;
                                    dataItem.writeUTFBytes(JSON.stringify({ pack: obj.pack, errCode: cpp_errCode, errStr: message }));
                                    dataItem.writeByte(0);
                                    dataItem.position = 0;
                                    this.doCallback(this.mCbid[ASViewer.CBID_DOWNLOAD_PACK_ERROR], dataItem, this.mEmptyData);
                                }.bind(this), function (bytesLoaded, bytesTotal) {
                                    var dataItem = new global.ByteArray;
                                    dataItem.writeUTFBytes(JSON.stringify({ pack: obj.pack, loadedBytes: bytesLoaded, totalBytes: bytesTotal }));
                                    dataItem.writeByte(0);
                                    dataItem.position = 0;
                                    this.doCallback(this.mCbid[ASViewer.CBID_DOWNLOAD_PACK_PROGRESS], dataItem, this.mEmptyData);
                                }.bind(this), true);
                            }
                            break;
                    }
                }
                else if (extName == "s3eResImg") {
                    if (funcName == "s3eResImgAddToLoadQueue") {
                        try {
                            obj = JSON.parse(params);
                        }
                        catch (error) { }
                        if (obj) {
                            var img = this.getImageById(obj.parentPack, obj.parentFID);
                            if (img) {
                                for (var _i = 0, _a = obj.childFIDs; _i < _a.length; _i++) {
                                    var fid = _a[_i];
                                    img.addChild(fid);
                                }
                            }
                        }
                    }
                }
                else if (extName == "s3eCommand") {
                    if (funcName == "s3eCommandSend") {
                        try {
                            obj = JSON.parse(params);
                        }
                        catch (error) { }
                        if (obj) {
                            if (obj.extCommandName == "cmdGlobalTopTableId") {
                                if (this.mSocial)
                                    this.mSocial.setLeaderboardTableId(obj.extCommandParam);
                            }
                            else {
                                this.sendCommand(global.ExternalInterface.objectID, obj.extCommandName, obj.extCommandParam);
                            }
                        }
                    }
                }
                else if (extName == "s3ePartnerAPI") {
                    this.initPartnerAPI();
                    if (this.mPartner)
                        return this.mPartner.s3eCommonInt(funcName, cbID, params);
                    else
                        return 1;
                }
                else if (extName == "s3eNotifications") {
                    if (funcName == "s3eNotificationsAvailable") {
                        return this.mCloudPush ? 1 : 0;
                    }
                    else if (funcName == "s3eNotificationsCreate") {
                        if (params && params.length > 0) {
                            dataItem = JSON.parse(params);
                            this.mPush2Send.set(dataItem.id, dataItem);
                        }
                    }
                    else if (funcName == "s3eNotificationsErase") {
                        if (params && params.length > 0) {
                            dataItem = JSON.parse(params);
                            if (this.mPush2Send.get(dataItem.id)) {
                                this.mPush2Send.delete(dataItem.id);
                                return 1;
                            }
                        }
                    }
                    else if (funcName == "s3eNotificationsGetLaunchNotification") {
                        return 0;
                    }
                }
                else if (extName == "s3eAbsSystem") {
                    try {
                        obj = JSON.parse(params);
                    }
                    catch (error) { }
                    if (funcName == "s3eAbsSystemStartApp") {
                        if (obj) {
                            global.CrashReport.startApp(obj.stackData);
                        }
                    }
                    else if (funcName == "s3eAbsSystemSetAppStateParam") {
                        if (obj) {
                            global.CrashReport.setParam(new global.CrashParam(obj.paramName, obj.paramValue, obj.repl), false);
                        }
                    }
                    else if (funcName == "s3eAbsSystemSendError") {
                        if (obj) {
                            var msg = obj.message || '';
                            var subject = global.ErrorType.VIEWER;
                            if (msg.indexOf('::') >= 0) {
                                subject = msg.split('::')[0];
                            }
                            try {
                                throw new global.Error;
                            }
                            catch (e) {
                                if ('getStackTrace' in e) {
                                    var stack = e.getStackTrace();
                                    if (stack)
                                        msg += stack;
                                }
                            }
                            global.CrashReport.send(subject, 0, this.mUniqueId, this.mSocialUserName, this.getVersion(), msg);
                        }
                    }
                }
                else if (extName == "s3eGRender") {
                    if (funcName == "s3eGRenderStopCaptureScreenPixels") {
                        if (this.mScreenshotDataPtr > 0) {
                            this.mScreenshotDataPtr = 0;
                            global.DataImage.freeBuffer(ASViewer.instance);
                        }
                    }
                }
                else if (extName == "s3eGResImg") {
                    if (funcName == "s3eGResImgCancelPacketLoading") {
                        try {
                            obj = JSON.parse(params);
                        }
                        catch (error) { }
                        if (obj) {
                            img = this.getImageById(obj.pack, obj.fid);
                            if (img)
                                img.startDestroy();
                        }
                    }
                }
                else if (extName == "s3eSoundManager") {
                    if (funcName == "s3eSoundManagerLoadResources") {
                        try {
                            obj = JSON.parse(params);
                        }
                        catch (error) { }
                        if ('loadQueue' in obj) {
                            for (var _b = 0, _c = obj.loadQueue; _b < _c.length; _b++) {
                                var snd = _c[_b];
                                this.soundAddToLoadQueue(snd.pack, snd.fid, snd.fileName, snd.id, snd.dyn == 1, snd.md5, snd.music == 1);
                            }
                        }
                    }
                    else if (funcName == "s3eSoundManagerAddToLoadQueueFinish") {
                    }
                }
                else if (extName == "s3eCloud") {
                    if (funcName == "getGuestMode") {
                        return this.mGuestId ? ASViewer.GUEST_QA : ASViewer.GUEST_NONE;
                    }
                }
                else if (extName == "s3eFile") {
                    if (funcName == "s3eFileSystemSync") {
                        global.GLog.print("FS.syncfs started (ram -> disk)");
                        FS.syncfs(function (error) {
                            global.GLog.print("FS.syncfs finished (ram -> disk) " + (error ? "with error: " + error : "successfully"));
                        });
                    }
                }
                else if (extName == 's3eHTML5Ads') {
                    if (params && params.length > 0) {
                        obj = JSON.parse(params);
                    }
                    if (funcName == ASViewer.CBID_S3E_HTML5_ADS_CALLBACK) {
                        global.GLog.print(funcName + " = " + cbID);
                        this.mCbid[funcName] = cbID;
                    }
                    else if (funcName == 'configure') {
                        s3eHTML5Ads.setConsole(global.CONFIG.LOG ? global.GLog.print : null);
                        if (!this.mAdContainer) {
                            this.mAdContainer = document.createElement('div');
                            this.mAdContainer.style.width = this.mAdContainer.style.height = '100%';
                            this.mAdContainer.style.position = 'absolute';
                            this.mAdContainer.style.zIndex = "64";
                            this.mAdContainer.style.top = "0px";
                            this.mAdContainer.style.left = "0px";
                            this.mAdContainer.style.visibility = 'hidden';
                            this.stage.body.appendChild(this.mAdContainer);
                            s3eHTML5Ads.setAdRootContainer(this.mAdContainer);
                            var bgDiv = document.createElement('div');
                            bgDiv.style.width = bgDiv.style.height = '100%';
                            bgDiv.style.backgroundColor = 'black';
                            bgDiv.style.position = 'absolute';
                            bgDiv.style.filter = 'alpha(opacity=50)';
                            bgDiv.style.opacity = '0.5';
                            this.mAdContainer.appendChild(bgDiv);
                            if (window['s3eHTML5AdsResources']) {
                                this.mAdLoader = document.createElement('img');
                                this.mAdLoader.src = s3eHTML5AdsResources.getLoaderImg();
                                var rootLoader = document.createElement('div');
                                var loaderDiv = document.createElement('div');
                                loaderDiv.style.display = 'table-cell';
                                loaderDiv.style.verticalAlign = 'middle';
                                loaderDiv.style.textAlign = 'center';
                                rootLoader.style.display = 'table';
                                rootLoader.style.position = 'absolute';
                                rootLoader.style.height = '100%';
                                rootLoader.style.width = '100%';
                                loaderDiv.style.background = 'transparent';
                                rootLoader.appendChild(loaderDiv);
                                this.mAdContainer.appendChild(rootLoader);
                                this.mAdLoader.style.width = '20%';
                                this.mAdLoader.style.height = '20%';
                                this.mAdLoader.style.visibility = 'hidden';
                                loaderDiv.appendChild(this.mAdLoader);
                                s3eHTML5Ads.setAdLoaderContainer(this.mAdLoader);
                            }
                        }
                        if (!this.mAdVideo) {
                            this.mAdVideo = document.createElement('video');
                            this.mAdVideo.style.position = 'absolute';
                            this.mAdVideo.style.height = '100%';
                            this.mAdVideo.style.width = '100%';
                            this.mAdContainer.appendChild(this.mAdVideo);
                            s3eHTML5Ads.setVideoContent(this.mAdVideo);
                        }
                        if (!this.mAdBanner) {
                            this.mAdBanner = document.createElement('div');
                            this.mAdBanner.style.position = 'absolute';
                            this.mAdBanner.style.height = '100%';
                            this.mAdBanner.style.width = '100%';
                            this.mAdContainer.appendChild(this.mAdBanner);
                            s3eHTML5Ads.setAdContainer(this.mAdBanner);
                        }
                        s3eHTML5Ads.setCallback(function (p, v) {
                            switch (v) {
                                case s3eHTML5Ads.S3E_HTML5_ADS_AD_SERVING_INTERRUPTED:
                                case s3eHTML5Ads.S3E_HTML5_ADS_AD_IS_SHOWN_SUCCESSFULLY:
                                    if (this.mAdContainer)
                                        this.mAdContainer.style.visibility = 'hidden';
                                    this.mADShowing = false;
                                    break;
                            }
                            var dataItem = new global.ByteArray;
                            dataItem.writeUTFBytes(JSON.stringify({ providerName: p, result: v }));
                            dataItem.writeByte(0);
                            dataItem.position = 0;
                            this.doCallback(this.mCbid[ASViewer.CBID_S3E_HTML5_ADS_CALLBACK], dataItem, this.mEmptyData);
                        }.bind(this));
                        s3eHTML5Ads.configure(JSON.parse(params));
                    }
                    else if (funcName == 'loadAd') {
                        if (obj.providerName == 's3eLifeStreet' || obj.providerName == 's3eGoogleAdSense') {
                            this.mADShowing = true;
                        }
                        s3eHTML5Ads.loadAd(obj.providerName, obj.placementName, this.w, this.h, false);
                    }
                    else if (funcName == 'showAd') {
                        this.mADShowing = true;
                        if (this.mAdContainer)
                            this.mAdContainer.style.visibility = 'visible';
                        s3eHTML5Ads.showAd(obj.providerName, obj.placementName);
                    }
                    else if (funcName == 'loadRewardedAd') {
                        if (obj.providerName == 's3eLifeStreet' || obj.providerName == 's3eGoogleAdSense') {
                            this.mADShowing = true;
                        }
                        s3eHTML5Ads.loadRewardedAd(obj.providerName, obj.placementName, this.w, this.h, false);
                    }
                    else if (funcName == 'showRewardedAd') {
                        this.mADShowing = true;
                        if (this.mAdContainer)
                            this.mAdContainer.style.visibility = 'visible';
                        s3eHTML5Ads.showRewardedAd(obj.providerName, obj.placementName);
                    }
                    else if (funcName == 'stopAd') {
                        this.mADShowing = false;
                        if (this.mAdContainer)
                            this.mAdContainer.style.visibility = 'hidden';
                        s3eHTML5Ads.stopAd(obj.providerName);
                    }
                }
                else if (extName == 's3ePartnerConsole') {
                    if (params && params.length > 0) {
                        obj = JSON.parse(params);
                    }
                    if (funcName == ASViewer.CBID_PARTNER_CONSOLE_OPTIONS_ARE_RECEIVED) {
                        global.GLog.print(funcName + " = " + cbID);
                        this.mCbid[funcName] = cbID;
                        global.PartnerConsole.setOptionsAreReceivedCallback(function (o) {
                            var dataItem = new global.ByteArray;
                            dataItem.writeUTFBytes(JSON.stringify({ options: o }));
                            dataItem.writeByte(0);
                            dataItem.position = 0;
                            this.doCallback(this.mCbid[ASViewer.CBID_PARTNER_CONSOLE_OPTIONS_ARE_RECEIVED], dataItem, this.mEmptyData);
                        }.bind(this));
                    }
                    else if (funcName == ASViewer.CBID_PARTNER_CONSOLE_GAME_EVENT) {
                        global.GLog.print(funcName + " = " + cbID);
                        this.mCbid[funcName] = cbID;
                        global.PartnerConsole.setGameEventCallback(function (e) {
                            if (e == 'msn_pause') {
                                this.mADShowing = true;
                                this.appPause();
                                return 0;
                            }
                            if (e == 'msn_resume') {
                                global.GLog.print("msn_resume");
                                this.mADShowing = false;
                                this.tryAppResume();
                                return 0;
                            }
                            if (e == 'msn_quit_game') {
                                this.onBeforeExit();
                                return 0;
                            }
                            var dataItem = new global.ByteArray;
                            dataItem.writeUTFBytes(JSON.stringify({ event: e }));
                            dataItem.writeByte(0);
                            dataItem.position = 0;
                            this.doCallback(this.mCbid[ASViewer.CBID_PARTNER_CONSOLE_GAME_EVENT], dataItem, this.mEmptyData);
                        }.bind(this));
                    }
                    else if (funcName == 'postHighScore') {
                        if (obj && obj.highscore) {
                            global.PartnerConsole.postHighScore(obj.highscore);
                        }
                    }
                    else if (funcName == 'setHideLeaderboards') {
                        if (obj && obj.hideLeader) {
                            global.PartnerConsole.setHideLeaderboards(obj.hideLeader);
                        }
                    }
                    else if (funcName == 'setEndLevel') {
                        if (obj && obj.lvl) {
                            global.PartnerConsole.setEndLevel(obj.lvl);
                        }
                    }
                    else if (funcName == 'sendOptions') {
                        if (obj && obj.options) {
                            global.PartnerConsole.sendOptions(obj.options);
                        }
                    }
                    else if (funcName == 'crossConfigLink') {
                        if (obj && obj.crossConfigLink) {
                            global.PartnerConsole.setCrossConfigLink(obj.crossConfigLink);
                        }
                    }
                    else if (funcName == 'leaderboardTableName') {
                        if (obj && obj.leaderboardTableName) {
                            global.PartnerConsole.setLeaderboardTableName(obj.leaderboardTableName);
                        }
                    }
                    else if (funcName == 'handleGameEvent') {
                        if (obj && obj.gameEvent) {
                            global.PartnerConsole.handleGameEvent(obj.gameEvent);
                        }
                    }
                }
                else if (extName == 's3eWebSocket') {
                    if (params && params.length > 0) {
                        obj = JSON.parse(params);
                    }
                    var connectID = obj.connectID, socket;
                    if (funcName == 's3eWebSocketConnect') {
                        var url = (obj.url || '').replace('ws:', 'wss:');
                        socket = new WebSocket(url);
                        socket.onopen = function (event) {
                            global.GLog.print("[s3eWebSocket] onopen ");
                            dataItem = new global.ByteArray;
                            dataItem.writeUTFBytes(JSON.stringify({
                                connectID: connectID,
                                status: 0,
                                message: ''
                            }));
                            dataItem.writeByte(0);
                            dataItem.position = 0;
                            this.doCallback(obj.connectCB, dataItem, this.mEmptyData);
                        }.bind(this);
                        socket.onerror = function (event) {
                            global.GLog.print("[s3eWebSocket] onerror event.code: " + event.code + " event.message " + event.message);
                            dataItem = new global.ByteArray;
                            dataItem.writeUTFBytes(JSON.stringify({
                                connectID: connectID,
                                status: 2,
                                code: event.code,
                                message: event.message
                            }));
                            dataItem.writeByte(0);
                            dataItem.position = 0;
                            this.doCallback(obj.connectCB, dataItem, this.mEmptyData);
                        }.bind(this);
                        socket.onclose = function (event) {
                            global.GLog.print("[s3eWebSocket] onclose event.code: " + event.code + " event.reason " + event.reason);
                            dataItem = new global.ByteArray;
                            dataItem.writeUTFBytes(JSON.stringify({
                                connectID: connectID,
                                status: event.wasClean ? 1 : 2,
                                code: event.code,
                                message: event.reason
                            }));
                            dataItem.writeByte(0);
                            dataItem.position = 0;
                            this.doCallback(obj.connectCB, dataItem, this.mEmptyData);
                        }.bind(this);
                        socket.onmessage = function (event) {
                            global.GLog.print("[s3eWebSocket] onmessage ");
                            dataItem = new global.ByteArray;
                            dataItem.writeUTFBytes(JSON.stringify({
                                connectID: connectID
                            }));
                            dataItem.writeByte(0);
                            dataItem.position = 0;
                            var result = new global.ByteArray();
                            if (typeof event.data === 'string') {
                                result.writeUTFBytes(event.data);
                                result.writeByte(0);
                            }
                            else if (event.data instanceof ArrayBuffer) {
                                result.fromArrayBuffer(event.data);
                            }
                            result.position = 0;
                            this.doCallback(obj.messageCB, dataItem, result);
                        }.bind(this);
                        this.sockets.set(connectID, socket);
                    }
                    else if (funcName == 's3eWebDisconect') {
                        if (socket = this.sockets.get(connectID)) {
                            socket.close();
                            socket.onopen = socket.onmessage = socket.onerror = socket.onclose = null;
                            this.sockets.delete(connectID);
                        }
                    }
                }
                return 0;
            }
        };
        ASViewer.prototype.s3eCommonDouble = function (extName, funcName, cbID, params) {
            ASViewer.setLastS3eCommon(funcName, cbID);
            var result = execute.bind(this)();
            ASViewer.setLastS3eCommon(null);
            return result;
            function execute() {
                if (extName == "s3eTimer") {
                    if (funcName == "s3eTimerGetUTC")
                        return this.serverTime ? this.serverTime.time + (global.getTimer() - this.localTimerStamp) : new Date().time;
                    else if (funcName == "s3eTimerGetLocaltimeOffset")
                        return this.localTimezone;
                }
                return 0;
            }
        };
        ASViewer.prototype.s3eCommonDoubleDouble = function (extName, funcName, cbID, paramASN) {
            ASViewer.setLastS3eCommon(funcName, cbID);
            var result = execute.bind(this)();
            ASViewer.setLastS3eCommon(null);
            return result;
            function execute() {
                if (extName == "s3eViewer") {
                    if (funcName == "s3eViewerNextScreenLoadingProgress") {
                        this.mViewerLoadingProgress = paramASN;
                        global.PreloadManager.update(global.PreloadManager.ST_VIEWER_CPP, this.mViewerLoadingProgress * 100);
                    }
                    else if (funcName == "s3eViewerNextLoadStep") {
                        this.loadStep(paramASN);
                    }
                }
                return 0.0;
            }
        };
        ASViewer.prototype.s3eCommonData = function (extName, funcName, cbID, params) {
            ASViewer.setLastS3eCommon(funcName, cbID);
            var result = execute.bind(this)();
            ASViewer.setLastS3eCommon(null);
            return result;
            function execute() {
                if (extName == "s3eFacebook") {
                    this.initSocial();
                    if (this.mSocial)
                        return this.mSocial.s3eCommonData(funcName, cbID, params);
                }
                else if (extName == "s3eCacheService") {
                    if (funcName == "s3eCacheServiceGetCacheData")
                        return global.CacheService.get(params);
                }
                else if (extName == "s3eResImg") {
                    if (funcName == "s3eResImgGetDBFile") {
                        try {
                            var obj = JSON.parse(params);
                        }
                        catch (error) { }
                        if (obj) {
                            var img = this.getImageById(obj.parentPack, obj.parentFID);
                            if (img) {
                                var fid = obj.childFID;
                                if (global.DataImage.CHILD_LAST_GET_FID == fid && (img.getChildStatus(fid) != global.DataAbstract.STATUS_COMPLETE)) {
                                    if (this.mGetChildFidTimestamp == -1) {
                                        this.mGetChildFidTimestamp = global.getTimer();
                                    }
                                }
                                else {
                                    this.mGetChildFidTimestamp = -1;
                                }
                                global.DataImage.CHILD_LAST_GET_FID = fid;
                                global.DataImage.CHILD_LAST_GET_PACK = img.getChildPack(fid);
                                global.DataImage.CHILD_LAST_GET_STATUS = img.getChildStatus(fid);
                                return img.getChild(fid);
                            }
                        }
                    }
                }
                return this.mEmptyData;
            }
        };
        ASViewer.prototype.s3eCommonDataPtr = function (extName, funcName, cbID, params) {
            ASViewer.setLastS3eCommon(funcName, cbID);
            var result = execute.bind(this)();
            ASViewer.setLastS3eCommon(null);
            return result;
            function execute() {
                var obj = { dataPtr: 0, dataSize: 0 };
                var ba;
                if (extName == "s3eGRender") {
                    if (funcName == "s3eGRenderStartCaptureScreenPixels") {
                        ba = this.s3eGRenderCaptureScreenPixels();
                        this.mScreenshotDataPtr = obj.dataPtr = global.DataImage.setBuffer(ba, ASViewer.instance);
                        obj.dataSize = ba.length;
                    }
                }
                return obj;
            }
        };
        ASViewer.prototype.getHostName = function (url) {
            if (url.indexOf('file:') === 0) {
                return 'localhost';
            }
            var match = url.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);
            if (match != null && match.length > 2 && typeof match[2] === 'string' && match[2].length > 0) {
                return match[2];
            }
            return null;
        };
        ASViewer.prototype.getDomain = function (url) {
            if (url.indexOf('file:') === 0) {
                return 'localhost';
            }
            var hostName = this.getHostName(url);
            var domain = hostName;
            if (hostName != null) {
                var parts = hostName.split('.').reverse();
                if (parts != null && parts.length > 1) {
                    domain = parts[1] + '.' + parts[0];
                    if (hostName.toLowerCase().indexOf('.co.uk') != -1 && parts.length > 2) {
                        domain = parts[2] + '.' + domain;
                    }
                }
            }
            return domain;
        };
        ASViewer.prototype.s3eCommonStr = function (extName, funcName, cbID, params) {
            ASViewer.setLastS3eCommon(funcName, cbID);
            var result = global.CommonBuffers.writeStr(execute.bind(this)());
            ASViewer.setLastS3eCommon(null);
            return result;
            function execute() {
                if (extName == "s3eFacebook") {
                    this.initSocial();
                    if (this.mSocial)
                        return this.mSocial.s3eCommonStr(funcName, cbID, params);
                }
                else if (extName == "s3eSystem") {
                    if (funcName == "s3eSystemGetLanguage") {
                        return this.getLanguage();
                    }
                    else if (funcName == "s3eGetCurrentDomain") {
                        return document.referrer ? this.getHostName(document.referrer) : this.getHostName(window.location.href);
                    }
                }
                else if (extName == "s3eDevice") {
                    if (funcName == "s3eDeviceGetString") {
                        switch (params) {
                            case "S3E_DEVICE_UNIQUE_ID":
                                return this.mUniqueId;
                            case "S3E_DEVICE_OS":
                                return global.Capabilities.js.os;
                            case "S3E_DEVICE_OS_VERSION":
                                return global.Capabilities.js.osVersion;
                            case "S3E_DEVICE_ID":
                                return global.Capabilities.browser + ' ' + global.Capabilities.version;
                            case "S3E_DEVICE_LOCALE":
                                return this.getLanguage();
                            case "S3E_DEVICE_SOCIAL_ID":
                                return this.mUniqueIdPure;
                        }
                    }
                }
                else if (extName == "s3eCloud") {
                    if (funcName == "getObjectID") {
                        if (this.mCloud)
                            return this.mCloud.objectId;
                    }
                    else if (funcName == "getGuestObjectID") {
                        return this.mGuestId;
                    }
                }
                else if (extName == "s3ePartnerAPI") {
                    this.initPartnerAPI();
                    if (this.mPartner)
                        return this.mPartner["s3eCommonStr"](funcName, cbID, params);
                    else
                        return "";
                }
                else if (extName == "s3eApplication") {
                    if (funcName == "s3eApplicationGetReferer")
                        return global.CONFIG.getReferer();
                }
                return "";
            }
        };
        ASViewer.prototype.s3eCommonIntBA = function (extName, funcName, cbID, params, dataByte) {
            ASViewer.setLastS3eCommon(funcName, cbID);
            var result = execute.bind(this)();
            ASViewer.setLastS3eCommon(null);
            return result;
            function execute() {
                var paramsData;
                if (extName == "s3eImgLoader") {
                    if (funcName == "s3eImgLoaderParse") {
                        if (params && params.length > 0) {
                            paramsData = JSON.parse(params);
                        }
                        var loader = new global.ExtendedLoader(0, cbID);
                        loader.setParams(paramsData);
                        var context = new global.LoaderContext;
                        context.imageDecodingPolicy = global.ImageDecodingPolicy.ON_LOAD;
                        loader.loadBytes(dataByte, context);
                        loader.contentLoaderInfo.addEventListener(global.Event.COMPLETE, onLoadComplete.bind(this));
                        loader.contentLoaderInfo.addEventListener(global.IOErrorEvent.IO_ERROR, onLoadError.bind(this));
                        this.mLoaderDecodeMap.set(loader, true);
                        this.mLoaderData = dataByte;
                        function onLoadComplete(event) {
                            global.EventStats.handle(global.ExtendedLoader, event);
                            var loader = event.target.loader;
                            if (loader) {
                                var obj = new Object;
                                var content = loader.content;
                                obj.commandObj = loader.getParams().commandObj;
                                obj.httpObj = loader.getParams().httpObj;
                                obj.status = 0;
                                obj.width = content.width;
                                obj.height = content.height;
                                var jsonData = JSON.stringify(obj);
                                var paramsByte = new global.ByteArray;
                                paramsByte.writeUTFBytes(jsonData);
                                paramsByte.writeByte(0);
                                this.doCallback(loader.getCallbackKey(), paramsByte, this.encodeByteArray(content.bitmapData));
                                loader.removeEventListener(global.Event.COMPLETE, onLoadComplete.bind(this));
                                loader.removeEventListener(global.IOErrorEvent.IO_ERROR, onLoadError.bind(this));
                                this.mLoaderDecodeMap.delete(loader);
                            }
                        }
                        function onLoadError(event) {
                            global.EventStats.handle(global.ExtendedLoader, event);
                            var loader = event.currentTarget;
                            if (loader) {
                                var obj = new Object;
                                obj.commandObj = loader.getParams().commandObj;
                                obj.httpObj = loader.getParams().httpObj;
                                obj.status = 1;
                                obj.width = 0;
                                obj.height = 0;
                                var jsonData = JSON.stringify(obj);
                                var paramsByte = new global.ByteArray;
                                paramsByte.writeUTFBytes(jsonData);
                                paramsByte.writeByte(0);
                                this.doCallback(loader.getCallbackKey(), paramsByte, this.mEmptyData);
                                loader.removeEventListener(global.Event.COMPLETE, onLoadComplete.bind(this));
                                loader.removeEventListener(global.IOErrorEvent.IO_ERROR, onLoadError.bind(this));
                                this.mLoaderDecodeMap.delete(loader);
                            }
                        }
                    }
                }
                else if (extName == "s3eHTTP") {
                    if (funcName == "s3eHTTPPost") {
                        if (params && params.length > 0) {
                            var dataItem = JSON.parse(params);
                            this.httpPost(dataItem.requestID, dataItem.url, dataItem.headers, dataByte, dataItem.timeout, cbID);
                        }
                    }
                    if (funcName == "s3eHTTPPostBinary") {
                        if (params && params.length > 0) {
                            var dataItem = JSON.parse(params);
                            this.httpPostBinary(dataItem.requestID, dataItem.url, dataItem.headers, dataByte, dataItem.timeout, cbID);
                        }
                    }
                }
                else if (extName == "s3eCacheService") {
                    if (funcName == "s3eCacheServiceAddCacheData")
                        global.CacheService.set(params, dataByte);
                }
                else if (extName == "s3eResImg") {
                    if (funcName == "s3eResImgCreateClip") {
                        if (params && params.length > 0) {
                            paramsData = JSON.parse(params);
                        }
                        var fid = paramsData.fid;
                        global.GLog.print("s3eResImgCreateClip " + paramsData.fid);
                        if (this.mLoaderData) {
                            var img = new global.DataImage(global.DataImage.TEXTURE_TYPE_COMPRESSED_BYTES, 0, fid, null, null, 0, 0, null, null);
                            img.bytes = this.mLoaderData;
                            this.setImageById(paramsData.pack, paramsData.fid, img);
                            this.mLoaderData = null;
                        }
                        else {
                            img = new global.DataImage(global.DataImage.TEXTURE_TYPE_PVR_BGRA_8888, 0, fid, null, null, 0, 0, null, null);
                            img.width = paramsData.w;
                            img.height = paramsData.h;
                            img.bytes = dataByte;
                            this.setImageById(paramsData.pack, paramsData.fid, img);
                        }
                    }
                    else if (funcName == 's3eResImgCustomCursorData') {
                        paramsData = JSON.parse(params);
                        global.CursorManager.fromByteArray(paramsData.fid, dataByte);
                    }
                }
                else if (extName == 's3eWebSocket') {
                    if (params && params.length > 0) {
                        paramsData = JSON.parse(params);
                    }
                    var connectID = paramsData.connectID, socket;
                    if (funcName == 's3eWebSocketSend') {
                        socket = this.sockets.get(connectID);
                        if (socket) {
                            socket.send(dataByte.toString());
                        }
                    }
                }
                return 0;
            }
        };
        ASViewer.prototype.doCallback = function (cbAddr, params, data) {
            if (this.mViewerCrashed) {
                global.GLog.print("[ASViewer] doCallback -> cbAddr=" + cbAddr + " failed with error: mViewerCrashed == true");
                return false;
            }
            if (cbAddr <= 0 || cbAddr === undefined) {
                return false;
            }
            if (!this.contextValid) {
                global.GLog.print("[ASViewer] doCallback -> cbAddr=" + cbAddr + " failed with error: context is not valid");
                this.callbacks[this.callbacks.length] = { cbAddr: cbAddr, params: params, data: data };
                return false;
            }
            if (ASViewer.sLastEvent2Viewer) {
                global.GLog.print("[ASViewer] doCallback -> cbAddr=" + cbAddr + " sLastEvent2Viewer(" + ASViewer.sLastEvent2Viewer + ") is not empty ");
                this.callbacks[this.callbacks.length] = { cbAddr: cbAddr, params: params, data: data };
                return false;
            }
            var paramsSize = params ? params.length : 0;
            var paramsPtr = paramsSize ? Module._malloc(paramsSize) : 0;
            if (paramsPtr)
                ASViewer.writeBytes(paramsPtr, paramsSize, params);
            var dataSize = data ? data.length : 0;
            var dataPtr = dataSize ? Module._malloc(dataSize) : 0;
            if (dataPtr)
                ASViewer.writeBytes(dataPtr, dataSize, data);
            global.GLog.print("[ASViewer] doCallback -> cbAddr=" + cbAddr + ", params=" + this.getByteArrayLog(params) + ", data=" + this.getByteArrayLog(data));
            ASViewer.sLastStartCallbackFn = ASViewer.sS3eCommonCbIDMap.get(cbAddr);
            Module.viewer_startCallbackFn(cbAddr, paramsPtr, paramsSize, dataPtr, dataSize);
            ASViewer.sLastStartCallbackFn = null;
            return true;
        };
        ASViewer.prototype.doCallbackByType = function (cbAddr, params, data) {
            this.doCallback(this.mCbid[cbAddr], params, data);
        };
        ASViewer.prototype.sendCommand = function (fromId, cmdName, cmdParam) {
            var fn = window['sendCommand'];
            if (!fn)
                return;
            global.setTimeout(fn, 1, fromId, cmdName, cmdParam);
        };
        ASViewer.prototype.s3eGRenderCaptureScreenPixels = function () {
            var actualWidth = global.getNextPowerOfTwo(this.w);
            var actualHeight = global.getNextPowerOfTwo(this.h);
            var ba;
            var destination;
            try {
                destination = new global.BitmapData(actualWidth, actualHeight, false);
                this.ctx3d.drawToBitmapData(destination);
                this.ctx3d.present();
                ba = destination.getPixels(destination.rect);
            }
            catch (e) {
                ba = this.mEmptyData;
            }
            if (destination) {
                destination.dispose();
            }
            this.ctx3d.configureBackBuffer(this.w, this.h, 0, false);
            return ba;
        };
        ASViewer.prototype.showLoadingError = function (errorType, buttonCallback, event, params, withoutPopup) {
            if (buttonCallback === void 0) { buttonCallback = null; }
            if (event === void 0) { event = null; }
            if (params === void 0) { params = null; }
            if (withoutPopup === void 0) { withoutPopup = false; }
            if (buttonCallback == ASViewer.JS_RELOAD) {
                global.GLog.print("[Viewer crashed] " + errorType);
                this.mViewerCrashed = ASViewer.sStopWhenCrashed;
            }
            var error;
            var errorCode = -1;
            if (event) {
                error = event;
                if ('error' in event)
                    error = event.error;
                if ('errorID' in error)
                    errorCode = error.errorID;
            }
            if (errorType == global.ErrorType.MEMORY_FIRST)
                errorCode = 1000;
            else if (errorCode == 1000)
                errorType = global.ErrorType.MEMORY;
            var title = global.ErrorType.getErrorHeader(errorType, this.getLanguage());
            var body = global.ErrorType.getErrorBody(errorType, this.getLanguage());
            var buttonLabel = global.ErrorType.getErrorButtonLabel(errorType, this.getLanguage());
            var message = "";
            if (error) {
                if ('getStackTrace' in error)
                    message = error.getStackTrace();
                if (!message || message == '') {
                    if ('message' in error)
                        message = error.message;
                    else if ('text' in error)
                        message = error.text;
                    else
                        message = error.toString();
                }
                if (message && global.CONFIG.QA_VERSION) {
                    body += "\n" + message;
                }
            }
            if (params) {
                for (var _i = 0, params_1 = params; _i < params_1.length; _i++) {
                    var param = params_1[_i];
                    global.CrashReport.setParam(param);
                }
            }
            var files;
            if (global.CONFIG.LOG) {
                var str = this.getLogsStr();
                if (str) {
                    files = [
                        {
                            name: ASViewer.LOG_FILE,
                            content: str
                        }
                    ];
                }
            }
            global.CrashReport.send(errorType, errorCode, this.mUniqueId, this.mSocialUserName, this.getVersion(), message ? message : global.ErrorType.getErrorBody(errorType), files);
            var cb = buttonCallback != null ? internalCallback.bind(this) : null;
            if (withoutPopup || !this.mPopup) {
                if (cb != null) {
                    global.setTimeout(cb, global.getReconnectInterval(), true);
                    return true;
                }
                return false;
            }
            if (this.mFirstScreenFrameExecuted && cb != null)
                this.appPause();
            this.stage.setChildIndex(this.mPopup, this.stage.numChildren - 1);
            this.mPopup.show(title, body, buttonLabel, cb, false, errorType != global.ErrorType.UNCAUGHT);
            function internalCallback(value) {
                global.GLog.print("showLoadingError internalCallback mPopup.show");
                this.tryAppResume();
                if (buttonCallback.length > 0)
                    buttonCallback(value);
                else
                    buttonCallback();
            }
            return true;
        };
        ASViewer.prototype.commandFromJS = function (name, param) {
            param = param || "";
            global.GLog.print('[commandFromJS] name=' + name + ', param=' + param);
            if (name == "cmdCloud" && this.mCloud && global.ExternalInterface.available) {
                var obj = JSON.parse(param);
                if (obj.method && obj.method == 'users') {
                    var users = [];
                    if (this.mCloudUser) {
                        users.push(this.mCloudUser);
                        if (this.mCloudUser.friends)
                            for (var _i = 0, _a = this.mCloudUser.friends; _i < _a.length; _i++) {
                                var user = _a[_i];
                                users.push(user);
                            }
                    }
                    global.ExternalInterface.call(obj.callback, this.data2string({ result: users }));
                    return;
                }
                this.mCloud.Call(obj.method, obj.params, function (data) {
                    if (data === void 0) { data = null; }
                    global.ExternalInterface.call(obj.callback, this.data2string(data));
                }.bind(this), function (data) {
                    if (data === void 0) { data = null; }
                    global.ExternalInterface.call(obj.callback, "{}");
                }.bind(this));
                return;
            }
            var dataItem = new global.ByteArray;
            dataItem.writeUTFBytes(JSON.stringify({ extCommandName: name, extCommandParam: param }));
            dataItem.writeByte(0);
            dataItem.position = 0;
            this.doCallback(this.mCbid[ASViewer.CBID_EXTERNAL_COMMAND], dataItem, this.mEmptyData);
        };
        ASViewer.prototype.crashParamFromJS = function (name, value) {
            global.CrashReport.setParam(new global.CrashParam(name, value), false);
        };
        ASViewer.prototype.readConfig = function (aFlashVars) {
            var value;
            var result = "";
            value = this.getParamConfig("language", aFlashVars);
            if (value != "")
                result = value;
            value = this.getParamConfig("country", aFlashVars);
            if (value != "" && result != "")
                result += "_" + value;
            value = this.getParamConfig("Lang", aFlashVars);
            if (value != "")
                result = value;
            return result != "" ? result : null;
        };
        ASViewer.prototype.getParamConfig = function (aID, aFlashVars) {
            if (aFlashVars[aID] != undefined)
                return aFlashVars[aID];
            return "";
        };
        ASViewer.prototype.loadStep = function (value) {
            if (!this.mFirstScreenFrameExecuted && value != this.mViewerLoadState && value > ASViewer.LOAD_IDLE && value <= ASViewer.LOAD_COMPLETE) {
                this.logEvent("1st_download_" + value);
                if (value == ASViewer.LOAD_LAYOUT) {
                    this.initPanels();
                }
            }
            this.mViewerLoadState = value;
            if (this.mViewerLoadState == ASViewer.LOAD_COMPLETE) {
                global.AssetsData.lockPercentLoaded(false);
            }
            this.mGetImageFidTimestamp = this.mGetChildFidTimestamp = -1;
            this.mChangeScreenTimestamp = this.mViewerLoadState == ASViewer.LOAD_NEXT_SCREEN_RESOURCES ? global.getTimer() : -1;
        };
        ASViewer.prototype.data2string = function (data) {
            if (typeof data == 'string')
                return data;
            try {
                return JSON.stringify(data);
            }
            catch (error) { }
            return null;
        };
        ASViewer.prototype.getString = function (id) {
            if (this.mCbid[ASViewer.CBID_TEXT_REQUEST] >= 0) {
                var dataItem = new global.ByteArray;
                if (typeof id === 'string')
                    id = parseInt(id);
                dataItem.writeUTFBytes(JSON.stringify({ txtID: id }));
                dataItem.writeByte(0);
                dataItem.position = 0;
                this.doCallback(this.mCbid[ASViewer.CBID_TEXT_REQUEST], dataItem, this.mEmptyData);
                return this.mStrResult;
            }
            this.mStrResult = null;
            return this.mStrResult;
        };
        ASViewer.prototype.firstScreenFrame = function () {
            if (this.mFirstScreenFrameExecuted) {
                return;
            }
            this.mActiveTimestamp = global.getTimer();
            this.stage.addEventListener(global.FullScreenEvent.FULL_SCREEN, this.onFullScreen.bind(this));
            this.initPanels();
            this.sendCommand(global.ExternalInterface.objectID, "cmdLoaded");
            global.PreloadManager.stop();
            if (this.mPreloader) {
                this.mPreloader["sFirstReady2Complete"] = true;
                this.mPreloader["percent"] = this.mLastPercent = 1.0;
            }
            global.Online.start(this.isUserActive.bind(this), function (online) {
                global.GLog.print("online: " + online);
                if (online) {
                    global.GLog.print("Online.start");
                    this.tryAppResume(true);
                }
                else {
                    global.Online.show();
                    this.appPause();
                }
            }.bind(this));
            var info = global.AppIcf.read(ASViewer.ICF_FLASH, "backgroundPacks");
            if (info) {
                info = info.split(" ").join("");
                var packsIntArr = info.split(",");
                var i = 0;
                nextLoad.bind(this)();
                function nextLoad() {
                    if (i < packsIntArr.length)
                        global.AssetsData.loadPack(parseInt(packsIntArr[i]), loadPackComplete.bind(this), loadPackError.bind(this), null, true);
                }
                function loadPackComplete() {
                    global.GLog.print("[AssetsData] Фоновый пак успешно загружен: " + packsIntArr[i]);
                    i++;
                    nextLoad.bind(this)();
                }
                function loadPackError(httpStatus, message) {
                    global.GLog.print("[AssetsData] Не удалось загрузить фоновый пак: " + packsIntArr[i]);
                    i++;
                    nextLoad.bind(this)();
                }
            }
            if (this.mCbid[ASViewer.CBID_CLOUD_RECEIVE] >= 0 && this.mCloudLoadResponse) {
                var dataItem = new global.ByteArray;
                dataItem.writeUTFBytes(JSON.stringify({
                    method: "load",
                    response: this.mCloudLoadResponse
                }));
                dataItem.writeByte(0);
                dataItem.position = 0;
                this.doCallback(this.mCbid[ASViewer.CBID_CLOUD_RECEIVE], dataItem, this.mEmptyData);
            }
            this.mStartPlayTimestamp = global.getTimer();
            this.mFirstScreenFrameExecuted = true;
            global.gc();
        };
        ASViewer.prototype.onFullScreen = function (event) {
            if (this.mCbid[ASViewer.CBID_FULLSCREEN] >= 0) {
                var dataItem = new global.ByteArray;
                dataItem.writeUTFBytes(JSON.stringify({ isFullScreen: event.fullScreen ? 1 : 0 }));
                dataItem.writeByte(0);
                dataItem.position = 0;
                this.doCallback(this.mCbid[ASViewer.CBID_FULLSCREEN], dataItem, this.mEmptyData);
            }
        };
        ASViewer.prototype.onDeactivate = function (event) {
            if (event === void 0) { event = null; }
            this.mDeactivated = true;
            try {
                this.onDeactivateInternal(event);
            }
            catch (e) {
                global.GLog.print(e.message);
            }
            finally {
                if (!this.mADShowing) {
                    this.appPause();
                }
            }
        };
        ASViewer.prototype.onActivate = function (event) {
            if (event === void 0) { event = null; }
            this.mDeactivated = false;
            try {
                this.onActivateInternal(event);
            }
            catch (e) {
                global.GLog.print(e.message);
            }
            finally {
                if (!this.mADShowing) {
                    global.GLog.print("onActivate tryAppResume \n");
                    this.tryAppResume();
                }
            }
        };
        ASViewer.prototype.onSave = function () {
            this.doCallback(this.mCbid[ASViewer.CBID_CLOUD_SAVE], this.mEmptyData, this.mEmptyData);
        };
        ASViewer.prototype.onBeforeExit = function (e) {
            trace('onBeforeExit start');
            try {
                this.onExit();
            }
            catch (e) {
                trace('onExit error: ' + e.message);
            }
            for (var i = 0; i < ASViewer.LOCAL_STORAGE_FILES.length; ++i) {
                this.saveFileToLocalStorage(ASViewer.LOCAL_STORAGE_FILES[i]);
            }
            trace('onBeforeExit end');
            return undefined;
        };
        ASViewer.prototype.onExit = function () {
            global.PartnerConsole.gameEnd();
            if (this.mSocial)
                this.mSocial.exit();
            if (this.mBilling)
                this.mBilling.exit();
            this.appPause();
            this.doCallback(this.mCbid[ASViewer.CBID_CLOUD_EXIT], this.mEmptyData, this.mEmptyData);
        };
        ASViewer.prototype.onDeactivateInternal = function (event) {
            if (event === void 0) { event = null; }
            if (this.mSocial)
                this.mSocial.deactivate();
            if (this.mBilling)
                this.mBilling.deactivate();
        };
        ASViewer.prototype.onActivateInternal = function (event) {
            if (event === void 0) { event = null; }
            this.mActiveTimestamp = global.getTimer();
            if (this.mSocial)
                this.mSocial.activate();
            if (this.mBilling)
                this.mBilling.activate();
        };
        ASViewer.prototype.onKeyDown = function (event) {
            this.processBrowserKeyboardEvent(event);
            this.mActiveTimestamp = global.getTimer();
            if (this.mViewerCrashed)
                return;
            if (!this.mFirstScreenFrameExecuted)
                return;
            if (event && event.base && event.base.repeat) {
                return;
            }
            var key = global.KeyboardMap.map.get(event.keyCode);
            if (!key)
                key = global.KeyboardMap.S3E_KEY_INVALID;
            ASViewer.sLastEvent2Viewer = 'keyDn(' + key + ')';
            Module.viewer_keyDn(key);
            ASViewer.sLastEvent2Viewer = null;
        };
        ASViewer.prototype.onKeyUp = function (event) {
            this.processBrowserKeyboardEvent(event);
            this.mActiveTimestamp = global.getTimer();
            if (global.CONFIG.QA_VERSION)
                this.debugKeyUp(event);
            if (this.mViewerCrashed)
                return;
            if (!this.mFirstScreenFrameExecuted)
                return;
            if (event && event.base && event.base.repeat) {
                return;
            }
            var key = global.KeyboardMap.map.get(event.keyCode);
            if (!key)
                key = global.KeyboardMap.S3E_KEY_INVALID;
            ASViewer.sLastEvent2Viewer = 'keyUp(' + key + ')';
            Module.viewer_keyUp(key);
            ASViewer.sLastEvent2Viewer = null;
        };
        ASViewer.prototype.encodeByteArray = function (bmData) {
            if (bmData == null) {
                throw new global.Error("data parameter can not be empty!");
            }
            try {
                return bmData.getPixels(bmData.rect);
            }
            catch (error) {
                global.GLog.print('[encodeByteArray] error.message=' + error.message);
            }
            return null;
        };
        ASViewer.prototype.httpGet = function (id, url, timeout, callbackKey) {
            var httpStatus = 0;
            var loader = new global.ExtendedURLLoader(id, timeout, callbackKey);
            loader.dataFormat = global.URLLoaderDataFormat.BINARY;
            loader.addEventListener(global.Event.COMPLETE, onComplete.bind(this));
            loader.addEventListener(global.IOErrorEvent.IO_ERROR, onError.bind(this));
            loader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
            loader.addEventListener(global.HTTPStatusEvent.HTTP_STATUS, onStatus.bind(this));
            loader.load(new global.URLRequest(url));
            this.mHTTPGetMap.set(loader, true);
            function onComplete(event) {
                global.EventStats.handle(ASViewer, event);
                global.GLog.print("[httpGet] onComplete url=" + url);
                var loader = event.target;
                if (loader) {
                    var ba = loader.data;
                    if (ba) {
                        ba.endian = global.Endian.LITTLE_ENDIAN;
                        var len = ba.length;
                        if (len > 0 && len < 4 * 1024 && ba.readUTFBytes(1) == "{") {
                            ba.position = 0;
                            this.httpGetLastResponse = ba.readUTFBytes(len);
                        }
                        ba.position = 0;
                    }
                    var responceData = {};
                    responceData.status = 0;
                    responceData.httpStatus = httpStatus;
                    responceData.requestID = loader.getRequestId();
                    var jsonData = JSON.stringify(responceData);
                    var paramsByte = new global.ByteArray;
                    paramsByte.writeUTFBytes(jsonData);
                    paramsByte.writeByte(0);
                    this.doCallback(loader.getCallbackKey(), paramsByte, ba);
                    loader.removeEventListener(global.Event.COMPLETE, onComplete.bind(this));
                    loader.removeEventListener(global.IOErrorEvent.IO_ERROR, onError.bind(this));
                    loader.removeEventListener(global.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
                    loader.removeEventListener(global.HTTPStatusEvent.HTTP_STATUS, onStatus.bind(this));
                    this.mHTTPGetMap.delete(loader);
                }
                else {
                    global.GLog.print("[httpGet] ERROR::onComplete url=" + url);
                }
            }
            function onError(event) {
                var loader = event.currentTarget;
                global.EventStats.handle(ASViewer, event);
                global.GLog.print("[httpGet] ERROR::onError -> loader = " + loader);
                if (loader) {
                    var responceData = {};
                    responceData.status = 1;
                    responceData.httpStatus = httpStatus;
                    responceData.requestID = loader.getRequestId();
                    var jsonData = JSON.stringify(responceData);
                    var paramsByte = new global.ByteArray;
                    paramsByte.writeUTFBytes(jsonData);
                    paramsByte.writeByte(0);
                    this.doCallback(loader.getCallbackKey(), paramsByte, this.mEmptyData);
                    loader.removeEventListener(global.Event.COMPLETE, onComplete.bind(this));
                    loader.removeEventListener(global.IOErrorEvent.IO_ERROR, onError.bind(this));
                    loader.removeEventListener(global.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
                    loader.removeEventListener(global.HTTPStatusEvent.HTTP_STATUS, onStatus.bind(this));
                    this.mHTTPGetMap.delete(loader);
                }
            }
            function onStatus(event) {
                httpStatus = event.status;
            }
        };
        ASViewer.prototype.httpPost = function (id, url, headers, postData, timeout, callbackKey) {
            var isCloud = global.Parse.isCloudURL(url);
            var httpStatus = 0;
            var loader = new global.ExtendedURLLoader(id, timeout, callbackKey);
            var context = new global.LoaderContext(true);
            var req = new global.URLRequest(url);
            req.method = global.URLRequestMethod.POST;
            if (typeof url === 'string' && url.indexOf('data.absolutist.com') >= 0 &&
                global.Capabilities.browser === 'Microsoft Internet Explorer' &&
                typeof global.Capabilities.version === 'string' && global.Capabilities.version.indexOf('11') === 0) {
                req.requestHeaders = [new global.URLRequestHeader('Content-Type', 'text/base64')];
                req.data = global.Base64.encode(postData);
            }
            else {
                var list = [];
                for (var _i = 0, headers_1 = headers; _i < headers_1.length; _i++) {
                    var header = headers_1[_i];
                    for (var key in header) {
                        list.push(new global.URLRequestHeader(key, header[key]));
                    }
                }
                req.requestHeaders = list;
                req.data = postData;
            }
            loader.addEventListener(global.Event.COMPLETE, onComplete.bind(this));
            loader.addEventListener(global.IOErrorEvent.IO_ERROR, onError.bind(this));
            loader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
            loader.addEventListener(global.HTTPStatusEvent.HTTP_STATUS, onStatus.bind(this));
            loader.load(req);
            this.mPostBytesMap.set(loader, true);
            function handleResponse(dataStr) {
                global.GLog.print("httpPost->handleResponse, dataStr.length=" + (dataStr ? dataStr.length : 0));
                var ba = new global.ByteArray;
                ba.endian = global.Endian.LITTLE_ENDIAN;
                var len = dataStr.length;
                if (len > 0 && len < 4 * 1024 && dataStr.charAt(0) == "{")
                    this.httpPostLastResponse = dataStr;
                global.GLog.print("httpPost->handleResponse, dataStr=" + dataStr);
                ba.writeUTFBytes(dataStr);
                ba.position = 0;
                var responceData = new Object;
                responceData.status = 0;
                responceData.httpStatus = httpStatus;
                responceData.requestID = loader.getRequestId();
                var jsonData = JSON.stringify(responceData);
                var paramsByte = new global.ByteArray;
                paramsByte.writeUTFBytes(jsonData);
                paramsByte.writeByte(0);
                paramsByte.position = 0;
                this.doCallback(loader.getCallbackKey(), paramsByte, ba);
                loader.removeEventListener(global.Event.COMPLETE, onComplete.bind(this));
                loader.removeEventListener(global.IOErrorEvent.IO_ERROR, onError.bind(this));
                loader.removeEventListener(global.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
                loader.removeEventListener(global.HTTPStatusEvent.HTTP_STATUS, onStatus.bind(this));
                this.mPostBytesMap.delete(loader);
                if (global.Parse.isCloudURL(url) && url.indexOf("save") != -1 && this.mBilling)
                    this.mBilling.saved();
            }
            function onComplete(event) {
                global.EventStats.handle(ASViewer, event);
                var loader = event.target;
                if (loader) {
                    global.GLog.print("postBytes.onComplete url=" + url);
                    handleResponse.bind(this)(loader.data);
                }
                else {
                    global.GLog.print("ERROR: postBytes.onComplete loader==null");
                }
            }
            function onError(event) {
                global.EventStats.handle(ASViewer, event);
                var loader = event.currentTarget;
                if (loader) {
                    global.GLog.print("ERROR: postBytes.onError url=" + url + ", event=" + event);
                    if (isCloud) {
                        try {
                            var response = typeof loader.data == 'string' ? JSON.parse(loader.data) : loader.data;
                        }
                        catch (e) { }
                        if (global.cloudErrorCode(response) < 0) {
                            handleResponse.bind(this)(JSON.stringify(response));
                            return;
                        }
                    }
                    var responceData = new Object;
                    responceData.status = 1;
                    responceData.httpStatus = httpStatus;
                    responceData.requestID = loader.getRequestId();
                    var jsonData = JSON.stringify(responceData);
                    var paramsByte = new global.ByteArray;
                    paramsByte.writeUTFBytes(jsonData);
                    paramsByte.writeByte(0);
                    this.doCallback(loader.getCallbackKey(), paramsByte, this.mEmptyData);
                    loader.removeEventListener(global.Event.COMPLETE, onComplete.bind(this));
                    loader.removeEventListener(global.IOErrorEvent.IO_ERROR, onError.bind(this));
                    loader.removeEventListener(global.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
                    loader.removeEventListener(global.HTTPStatusEvent.HTTP_STATUS, onStatus.bind(this));
                    this.mPostBytesMap.delete(loader);
                }
                else {
                    global.GLog.print("ERROR: postBytes.onError loader==null");
                }
            }
            function onStatus(event) {
                httpStatus = event.status;
            }
        };
        ASViewer.prototype.httpPostBinary = function (id, url, headers, postData, timeout, callbackKey) {
            var isCloud = global.Parse.isCloudURL(url);
            var httpStatus = 0;
            var loader = new global.ExtendedURLLoader(id, timeout, callbackKey);
            loader.dataFormat = global.URLLoaderDataFormat.BINARY;
            var context = new global.LoaderContext(true);
            var req = new global.URLRequest(url);
            req.method = global.URLRequestMethod.POST;
            if (typeof url === 'string' && url.indexOf('data.absolutist.com') >= 0 &&
                global.Capabilities.browser === 'Microsoft Internet Explorer' &&
                typeof global.Capabilities.version === 'string' && global.Capabilities.version.indexOf('11') === 0) {
                req.requestHeaders = [new global.URLRequestHeader('Content-Type', 'text/base64')];
                req.data = global.Base64.encode(postData);
            }
            else {
                var list = [];
                for (var _i = 0, headers_2 = headers; _i < headers_2.length; _i++) {
                    var header = headers_2[_i];
                    for (var key in header) {
                        list.push(new global.URLRequestHeader(key, header[key]));
                    }
                }
                req.requestHeaders = list;
                req.data = postData;
            }
            loader.addEventListener(global.Event.COMPLETE, onComplete.bind(this));
            loader.addEventListener(global.IOErrorEvent.IO_ERROR, onError.bind(this));
            loader.addEventListener(global.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
            loader.addEventListener(global.HTTPStatusEvent.HTTP_STATUS, onStatus.bind(this));
            loader.load(req);
            this.mPostBytesMap.set(loader, true);
            function handleResponse(dataStr) {
                global.GLog.print("httpPost->handleResponse, dataStr.length=" + (dataStr ? dataStr.length : 0));
                var ba = new global.ByteArray;
                ba.endian = global.Endian.LITTLE_ENDIAN;
                var len = dataStr.length;
                if (len > 0 && len < 4 * 1024 && dataStr.charAt(0) == "{")
                    this.httpPostLastResponse = dataStr;
                ba.writeUTFBytes(dataStr);
                ba.position = 0;
                var responceData = new Object;
                responceData.status = 0;
                responceData.httpStatus = httpStatus;
                responceData.requestID = loader.getRequestId();
                var jsonData = JSON.stringify(responceData);
                var paramsByte = new global.ByteArray;
                paramsByte.writeUTFBytes(jsonData);
                paramsByte.writeByte(0);
                paramsByte.position = 0;
                this.doCallback(loader.getCallbackKey(), paramsByte, ba);
                loader.removeEventListener(global.Event.COMPLETE, onComplete.bind(this));
                loader.removeEventListener(global.IOErrorEvent.IO_ERROR, onError.bind(this));
                loader.removeEventListener(global.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
                loader.removeEventListener(global.HTTPStatusEvent.HTTP_STATUS, onStatus.bind(this));
                this.mPostBytesMap.delete(loader);
                if (global.Parse.isCloudURL(url) && url.indexOf("save") != -1 && this.mBilling)
                    this.mBilling.saved();
            }
            function onComplete(event) {
                global.EventStats.handle(ASViewer, event);
                var loader = event.target;
                if (loader) {
                    global.GLog.print("postBytes.onComplete url=" + url);
                    var ba = loader.data;
                    if (ba) {
                        ba.endian = global.Endian.LITTLE_ENDIAN;
                        var len = ba.length;
                        if (len > 0 && len < 4 * 1024 && ba.readUTFBytes(1) == "{") {
                            ba.position = 0;
                            this.httpPostLastResponse = ba.readUTFBytes(len);
                        }
                        ba.position = 0;
                    }
                    var responceData = {};
                    responceData.status = 0;
                    responceData.httpStatus = httpStatus;
                    responceData.requestID = loader.getRequestId();
                    var jsonData = JSON.stringify(responceData);
                    var paramsByte = new global.ByteArray;
                    paramsByte.writeUTFBytes(jsonData);
                    paramsByte.writeByte(0);
                    this.doCallback(loader.getCallbackKey(), paramsByte, ba);
                    loader.removeEventListener(global.Event.COMPLETE, onComplete.bind(this));
                    loader.removeEventListener(global.IOErrorEvent.IO_ERROR, onError.bind(this));
                    loader.removeEventListener(global.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
                    loader.removeEventListener(global.HTTPStatusEvent.HTTP_STATUS, onStatus.bind(this));
                    this.mPostBytesMap.delete(loader);
                }
                else {
                    global.GLog.print("ERROR: postBytes.onComplete loader==null");
                }
            }
            function onError(event) {
                global.EventStats.handle(ASViewer, event);
                var loader = event.currentTarget;
                if (loader) {
                    global.GLog.print("ERROR: postBytes.onError url=" + url + ", event=" + event);
                    var responceData = new Object;
                    responceData.status = 1;
                    responceData.httpStatus = httpStatus;
                    responceData.requestID = loader.getRequestId();
                    var jsonData = JSON.stringify(responceData);
                    var paramsByte = new global.ByteArray;
                    paramsByte.writeUTFBytes(jsonData);
                    paramsByte.writeByte(0);
                    this.doCallback(loader.getCallbackKey(), paramsByte, this.mEmptyData);
                    loader.removeEventListener(global.Event.COMPLETE, onComplete.bind(this));
                    loader.removeEventListener(global.IOErrorEvent.IO_ERROR, onError.bind(this));
                    loader.removeEventListener(global.SecurityErrorEvent.SECURITY_ERROR, onError.bind(this));
                    loader.removeEventListener(global.HTTPStatusEvent.HTTP_STATUS, onStatus.bind(this));
                    this.mPostBytesMap.delete(loader);
                }
                else {
                    global.GLog.print("ERROR: postBytes.onError loader==null");
                }
            }
            function onStatus(event) {
                httpStatus = event.status;
            }
        };
        ASViewer.prototype.onMouseUp = function (event) {
            if (!this.contextValid)
                return;
            if (this.mViewerCrashed)
                return;
            if (!this.mFirstScreenFrameExecuted)
                return;
            if (global.ContextMenu.isOpened)
                return;
            ASViewer.sLastEvent2Viewer = 'mouseUp(' + this.stage.mouseX + ', ' + this.stage.mouseY + ')';
            Module.viewer_mouseUp(this.stage.mouseX, this.stage.mouseY);
            ASViewer.sLastEvent2Viewer = null;
        };
        ASViewer.prototype.onMouseLeave = function (event) {
            this.mIsMouseLeave = true;
        };
        ASViewer.prototype.onMouseMove = function (event) {
            this.mIsMouseLeave = false;
            if (!this.contextValid)
                return;
            if (this.mViewerCrashed)
                return;
            if (!this.mFirstScreenFrameExecuted)
                return;
            if (global.ContextMenu.isOpened)
                return;
            ASViewer.sLastEvent2Viewer = 'mouseMove(' + this.stage.mouseX + ', ' + this.stage.mouseY + ')';
            Module.viewer_mouseMove(this.stage.mouseX, this.stage.mouseY);
            ASViewer.sLastEvent2Viewer = null;
            this.mActiveTimestamp = global.getTimer();
            event.stopImmediatePropagation();
        };
        ASViewer.prototype.onMouseDown = function (event) {
            if (!this.contextValid)
                return;
            if (this.mViewerCrashed)
                return;
            if (!this.mFirstScreenFrameExecuted)
                return;
            if (global.ContextMenu.isOpened)
                return;
            this.mActiveTimestamp = global.getTimer();
            ASViewer.sLastEvent2Viewer = 'mouseDown(' + this.stage.mouseX + ', ' + this.stage.mouseY + ')';
            Module.viewer_mouseDown(this.stage.mouseX, this.stage.mouseY);
            ASViewer.sLastEvent2Viewer = null;
            if (this.mSocial)
                this.mSocial.mouseDown();
            if (this.mBilling)
                this.mBilling.mouseDown();
        };
        ASViewer.prototype.onMouseWheel = function (delta) {
            if (!this.contextValid)
                return;
            if (this.mViewerCrashed)
                return;
            if (!this.mFirstScreenFrameExecuted)
                return;
            if (global.ContextMenu.isOpened)
                return;
            ASViewer.sLastEvent2Viewer = 'mouseWheel(' + this.stage.mouseX + ', ' + this.stage.mouseY + ', ' + delta + ')';
            Module.viewer_mouseWheel(this.stage.mouseX, this.stage.mouseY, delta);
            ASViewer.sLastEvent2Viewer = null;
        };
        ASViewer.prototype.onResize = function (event, forced) {
            if (forced === void 0) { forced = false; }
            global.GLog.print('onResize ' + this.stage.stageWidth + 'x' + this.stage.stageHeight);
            this.w = this.stage.stageWidth;
            this.h = this.stage.stageHeight;
            if (this.mStats)
                this.mStats.y = this.h - this.mStats.height;
            if (!this.contextValid) {
                this.mDelayedResize = true;
                return;
            }
            if (!forced) {
                if (!this.mResizeTimeout && global.getTimer() - this.mResizeTimestamp < this.RESIZE_MAX_WAITING) {
                    global.clearTimeout(this.mResizeTimeout);
                    this.mResizeTimeout = global.setTimeout(applyResize.bind(this), this.RESIZE_DELAY);
                    return;
                }
            }
            applyResize.bind(this)();
            function applyResize() {
                global.GLog.print('applyResize ' + this.stage.stageWidth + 'x' + this.stage.stageHeight);
                this.mResizeTimeout = 0;
                this.mResizeTimestamp = global.getTimer();
                this.ctx3d.configureBackBuffer(this.w, this.h, 0, false);
                if (typeof Module.viewer_changeScreen === 'function') {
                    ASViewer.sLastEvent2Viewer = 'changeScreen(' + this.w + ', ' + this.h + ')';
                    Module.viewer_changeScreen(this.w, this.h);
                    ASViewer.sLastEvent2Viewer = null;
                }
                if (this.mAdContainer) {
                    this.mAdBanner.style.height = '100%';
                    this.mAdBanner.style.width = '100%';
                    this.mAdVideo.style.height = '100%';
                    this.mAdVideo.style.width = '100%';
                    s3eHTML5Ads.resize(this.w, this.h, false);
                }
            }
        };
        ASViewer.prototype.init = function (event) {
            if (event === void 0) { event = null; }
            this.removeEventListener(flash.events.Event.ADDED_TO_STAGE, this.init.bind(this));
            this.mPreloader = global.FactoryClass;
            this.mPreloaderInstance = new global.FactoryClass();
            this.stage.addChild(this.mPreloaderInstance);
            if (this.mPreloader && !("percent" in this.mPreloader)) {
                global.GLog.print("ERROR: Preloader class must have static set 'percent' method");
                this.mPreloader = null;
            }
            if (!this.mPreloader) {
                this.mLastPercent = 1.0;
            }
            if (this.mPreloader) {
                global.PreloadManager.add(new global.State(global.PreloadManager.ST_ASSETS_ZIP, 10).add(new global.State(global.PreloadManager.ST_ASSETS_ASM, 10)));
                global.PreloadManager.add(new global.State(global.PreloadManager.ST_CLOUD_TIME, 5).add(new global.State(global.PreloadManager.ST_CLOUD_LOAD, 5)));
                global.PreloadManager.add(new global.State(global.PreloadManager.ST_VIEWER_CPP, 10).add(new global.State(global.PreloadManager.ST_LOAD_PACKS, 30)).add(new global.State(global.PreloadManager.ST_CREATE_IMAGES, 10)).add(new global.State(global.PreloadManager.ST_CREATE_SOUNDS, 10)));
                global.PreloadManager.start(this.sendInitPercent.bind(this));
            }
            this.stage.scaleMode = global.StageScaleMode.NO_SCALE;
            this.stage.align = global.StageAlign.TOP_LEFT;
            this.readFullscreenRect();
            global.MouseWheel.setup(this.stage, this.onMouseWheel.bind(this));
            this.stage.addEventListener(global.KeyboardEvent.KEY_DOWN, this.onKeyDown.bind(this));
            this.stage.addEventListener(global.KeyboardEvent.KEY_UP, this.onKeyUp.bind(this));
            var params = this.stage.loaderInfo.parameters;
            if (params.hasOwnProperty("apiconnection"))
                this.mOdnoklassnikiAppId = params.apiconnection.split('_')[0];
            if (params.hasOwnProperty("application_key"))
                this.mOdnoklassnikiAppKey = params.application_key;
            if (params.hasOwnProperty("vk_app_id"))
                this.mVkontakteAppId = params.vk_app_id;
            if (params.hasOwnProperty("ru_app_id"))
                this.mMailruAppId = params.ru_app_id;
            global.Blocker.init(this.stage);
            this.packs = new global.Dictionary;
            this.images2load = new Array;
            this.sounds2load = new Array;
            this.callbacks = new Array;
            this.channels = new Array;
            this.channels.length = this.channelDimension;
            this.channelsinfo = new Array;
            this.channels2sounds = new global.Dictionary;
            while (this.channelsinfo.length < this.channelDimension)
                this.channelsinfo.push({ resID: -1, loop: false });
            this.positions = new Array;
            this.positions.length = this.channelDimension;
            this.mIsMouseLeave = true;
            this.w = this.stage.stageWidth;
            this.h = this.stage.stageHeight;
            global.GLog.print('stage ' + this.w + 'x' + this.h);
            this.stage.addEventListener(global.Event.RESIZE, this.onResize.bind(this));
            if (global.CONFIG.QA_VERSION && !global.URLVariablesGlobal.get('review')) {
            }
            this.mAssetsFile = new global.FZip;
            this.mAssetsFile.addEventListener(global.Event.COMPLETE, this.onZipLoadComplete.bind(this));
            this.mAssetsFile.addEventListener(global.ProgressEvent.PROGRESS, this.onZipLoadProgress.bind(this));
            this.mAssetsFile.addEventListener(global.IOErrorEvent.IO_ERROR, function (event) {
                global.EventStats.handle(global.FZip, event);
                global.GLog.print("ERROR: onZipLoadError " + event.text);
                global.setTimeout(load.bind(this), global.getReconnectInterval());
            }.bind(this));
            load.bind(this)();
            this.checkASM();
            function load() {
                this.mAssetsFile.load(new global.URLRequest(global.CONFIG.getStorage() + ASViewer.ASSETS_URL + global.CONFIG.getRev()));
            }
        };
        ASViewer.prototype.requestContext3D = function (profile) {
            global.GLog.print("[Stage3D] requestContext3D " + profile);
            this.s3d = this.stage.stage3Ds[0];
            this.s3d.addEventListener(flash.events.Event.CONTEXT3D_CREATE, this.onContextCreated.bind(this));
            if (this.s3d.requestContext3D.length > 1)
                this.s3d["requestContext3D"](global.Context3DRenderMode.AUTO, profile);
            else
                this.s3d["requestContext3D"](global.Context3DRenderMode.AUTO);
        };
        ASViewer.prototype.updateContext = function () {
            if (this.wmode != ASViewer.WMODE_DIRECT) {
                return;
            }
            this.ctx3d = this.s3d.context3D;
            this.ctx3d.configureBackBuffer(this.w, this.h, 0, false);
            var contextHandle = GL.registerContext(this.ctx3d.gl, { majorVersion: 1, minorVersion: 0 });
            GL.makeContextCurrent(contextHandle);
            ASViewer.sDriverInfo = this.ctx3d.driverInfo;
            global.GLog.print("Stage3D context: " + ASViewer.sDriverInfo);
        };
        ASViewer.prototype.readFullscreenRect = function () {
            this.mFullcreenRect = this.mFullcreenRect || new global.Rectangle;
            if (!this.stage) {
                return;
            }
            var mw = Math.max(this.stage.fullScreenWidth, this.mFullcreenRect.width);
            var mh = Math.max(this.stage.fullScreenHeight, this.mFullcreenRect.height);
            this.mFullcreenRect.setTo(0, 0, mw, mh);
        };
        ASViewer.prototype.onContextCreated = function (event) {
            global.EventStats.handle(ASViewer, event);
            if (this.ctx3d) {
                if (this.mPreloader) {
                    this.mLastPercent = -1;
                    this.sendInitPercent(0);
                    for (var _i = 0, _a = this.packs.values; _i < _a.length; _i++) {
                        var pack = _a[_i];
                        if (!pack)
                            continue;
                        for (var _b = 0, _c = pack.images.values; _b < _c.length; _b++) {
                            var img = _c[_b];
                            if (!img)
                                continue;
                            img.recovering = !img.unused;
                        }
                    }
                    this.mRecoveringTextureCount = this.getRecoveringTextureCount();
                    global.DataImage.changeRecovering = function (target) {
                        var len = this.getRecoveringTextureCount();
                        this.sendInitPercent(Math.max(Math.min(1 - (len / this.mRecoveringTextureCount), 1), 0) * 100);
                        if (!len) {
                            this.mRecoveringTextureCount = 0;
                            global.DataImage.changeRecovering = null;
                            this.mPreloader["percent"] = 1;
                        }
                    }.bind(this);
                    global.setTimeout(run.bind(this), 1);
                }
                else {
                    run.bind(this)();
                }
                function run() {
                    this.updateContext();
                    if (this.mCbid[ASViewer.CBID_RESTORE_CONTEXT] >= 0) {
                        this.doCallback(this.mCbid[ASViewer.CBID_RESTORE_CONTEXT], this.mEmptyData, this.mEmptyData);
                    }
                }
                return;
            }
            this.updateContext();
            this.onFileSystemReady();
        };
        Object.defineProperty(ASViewer.prototype, "contextValid", {
            get: function () {
                if (this.wmode != ASViewer.WMODE_DIRECT) {
                    return true;
                }
                if (this.ctx3d) {
                    var driverInfo = this.ctx3d.driverInfo;
                    return driverInfo != null && driverInfo != "" && driverInfo != "Disposed";
                }
                else
                    return false;
            },
            enumerable: true,
            configurable: true
        });
        ASViewer.prototype.loadCloudData = function () {
            global.GLog.print("[cloud] connecting...");
            if (!this.mCloud) {
                offline.bind(this)();
                return;
            }
            this.registerSession();
            load.bind(this)();
            function load() {
                global.PreloadManager.update(global.PreloadManager.ST_CLOUD_TIME, 100);
                global.GLog.print("[cloud] loading user...");
                var obj = {
                    game: {
                        market: this.mMarket,
                        version: this.getVersionObject()
                    },
                    user: {
                        udid: this.mUniqueId,
                        locale: this.getLanguage(),
                        stats: ["start_session"]
                    }
                };
                if (this.mCloud.objectId)
                    obj.user.objectId = this.mCloud.objectId;
                if (this.mSocial)
                    obj.user.usid = [this.mUniqueId];
                if (this.mSocialUserName)
                    obj.user.name = this.mSocialUserName;
                if (this.mSocialUserEmail)
                    obj.user.email = this.mSocialUserEmail;
                var redeem_code = global.URLVariablesGlobal.get("redeem_code");
                if (redeem_code)
                    obj.user.redeem = { code: redeem_code, ref: global.URLVariablesGlobal.get("ref") };
                var guestId = global.URLVariablesGlobal.get('guest');
                if (guestId && guestId.length == 10) {
                    this.mGuestId = guestId;
                    this.mCloud.guest = {
                        objectId: this.mGuestId,
                        access: ASViewer.GUEST_QA
                    };
                    if (this.mCloudPush)
                        this.mCloudPush.guest = this.mCloud.guest;
                }
                this.mCloud.Call("load", obj, function (response) {
                    if (response === void 0) { response = null; }
                    global.GLog.print("[cloud] load completed successful");
                    if (response && response.result && response.result.length > 0) {
                        this.mCloudLoadResponse = response;
                        if (response.result[0].user) {
                            this.mCloudUser = response.result[0].user;
                            this.mCloudLaunches = this.mCloudUser.stats && this.mCloudUser.stats.length > 0 ? this.mCloudUser.stats[0] : 1;
                            this.mCloud.objectId = this.mCloudUser.objectId;
                            this.serverTime = response.result[0].time;
                            if (this.serverTime && "time" in this.serverTime && this.serverTime.time > 0) {
                                this.localTimerStamp = global.getTimer();
                            }
                            else {
                                this.serverTime = null;
                            }
                            this.logEvent("1st_download_cloud");
                        }
                        else {
                            global.GLog.print("[cloud] can't get user from load response");
                        }
                        global.PartnerConsole.setCloud(this.mCloud, this.mMarket);
                        this.mCloudData = response.result[0].data;
                        this.mCloudExtra = response.result[0].extra;
                        this.mCloudLoginReady = true;
                        this.registerSession();
                        global.PreloadManager.update(global.PreloadManager.ST_CLOUD_LOAD, 100);
                        this.tryStartAsync();
                        return;
                    }
                    retry.bind(this)();
                }.bind(this), function (response) {
                    if (response === void 0) { response = null; }
                    global.GLog.print("[cloud] load user error");
                    if (global.cloudErrorCode(response) == -8) {
                        global.GLog.print("[cloud] user has been blocked");
                        this.showLoadingError(global.ErrorType.BANNED);
                        return;
                    }
                    retry.bind(this)();
                }.bind(this));
            }
            function offline() {
                global.GLog.print("[cloud] offline mode");
                this.mCloudOfflineMode = true;
                this.mCloudLoginReady = true;
                global.PreloadManager.update(global.PreloadManager.ST_CLOUD_TIME, 100);
                global.PreloadManager.update(global.PreloadManager.ST_CLOUD_LOAD, 100);
                this.tryStartAsync();
            }
            function retry() {
                var MAX_RECONNECT_COUNT = 2;
                var callback = this.loadCloudData.bind(this);
                if (this.mBackgroundReconnectCount >= MAX_RECONNECT_COUNT) {
                    callback = function () {
                        this.mCloudLoginReady = true;
                        this.registerSession();
                        global.PreloadManager.update(global.PreloadManager.ST_CLOUD_LOAD, 100);
                        this.tryStartAsync();
                    }.bind(this);
                }
                this.showLoadingError(global.ErrorType.CLOUD, callback, null, null, this.mBackgroundReconnectCount < MAX_RECONNECT_COUNT);
                this.mBackgroundReconnectCount++;
            }
        };
        ASViewer.prototype.registerSession = function () {
            if (!this.mCloudCrash)
                return;
            if (this.mSessionRegisterStatus > 0)
                return;
            this.mSessionRegisterStatus = 1;
            if (!this.mStartSessionTimestamp)
                this.mStartSessionTimestamp = global.getTimer();
            this.mCloudCrash.Call("session", {
                user: {
                    udid: this.mUniqueId,
                    name: this.mSocialUserName
                },
                details: {
                    appId: global.AppIcf.read(ASViewer.ICF_CLOUD, "app"),
                    market: this.mMarket,
                    version: this.getVersionInt(),
                    os: global.Capabilities.os,
                    browser: global.CONFIG.getBrowser()
                }
            }, function (data) {
                if (data === void 0) { data = null; }
                this.mSessionRegisterStatus = 2;
            }.bind(this), function (data) {
                if (data === void 0) { data = null; }
                this.mSessionRegisterStatus = 0;
            }.bind(this));
        };
        ASViewer.prototype.tryStartAsync = function () {
            global.GLog.print("tryStartAsync...");
            if (this.mAsyncStarted) {
                global.GLog.print("[error] tryStartAsync allready called");
                return;
            }
            if (this.mAssetsReady && this.mASMReady && this.mCloudLoginReady && this.mSocialReady) {
                if (global.ExternalInterface.available) {
                    global.ExternalInterface.addCallback("sendCommand", this.commandFromJS.bind(this));
                    global.ExternalInterface.addCallback("crashParam", this.crashParamFromJS.bind(this));
                    global.ExternalInterface.addCallback("getString", this.getString.bind(this));
                    global.ExternalInterface.addCallback("save", this.onSave.bind(this));
                    window.onbeforeunload = this.onBeforeExit.bind(this);
                }
                this.stage.addEventListener(global.Event.DEACTIVATE, this.onDeactivate.bind(this));
                this.stage.addEventListener(global.Event.ACTIVATE, this.onActivate.bind(this));
                Module.calledRun = false;
                function onPostRun() {
                    this.mAsyncStarted = true;
                    global.GLog.print("viewer.CModule.startAsync() started successful");
                    this.createContext();
                }
                Module.postRun = onPostRun.bind(this);
                Module.run();
            }
            else {
                if (!this.mAssetsReady)
                    global.GLog.print("can't startAsync now: mAssetsReady = false");
                if (!this.mASMReady)
                    global.GLog.print("can't startAsync now: mASMReady = false");
                if (!this.mCloudLoginReady)
                    global.GLog.print("can't startAsync now: mCloudLoginReady = false");
                if (!this.mSocialReady)
                    global.GLog.print("can't startAsync now: mSocialReady = false");
            }
        };
        ASViewer.prototype.checkMalloc = function (mallocSize) {
            var minSize = 64;
            var stepSize = 16;
            var p = 0;
            while (!p && mallocSize >= minSize) {
                p = Module._malloc(mallocSize * 1024 * 1024);
                if (!p)
                    mallocSize -= stepSize;
            }
            if (!p) {
                this.showLoadingError(global.ErrorType.MEMORY_FIRST, ASViewer.JS_RELOAD, { error: { errorID: 1000, message: "Could not CModule.malloc " + minSize + " Mb" } });
                return;
            }
            this.firstMalloc = mallocSize;
            var p1 = Module._malloc(1);
            Module._free(p);
            global.GLog.print("[CModule.malloc] " + mallocSize + " Mb completed successfull (" + p + "<" + p1 + "=" + (p < p1).toString() + ")");
        };
        ASViewer.prototype.initPanels = function () {
            if (!this.mPanelsInited) {
                this.mPanelsInited = true;
                this.sendCommand(global.ExternalInterface.objectID, "cmdInit", JSON.stringify({ market: this.mMarket, appId: global.AppIcf.read(ASViewer.ICF_FACEBOOK, "facebookId") }));
            }
        };
        ASViewer.prototype.onZipLoadProgress = function (event) {
            if (!global.Tests.isStarted(global.Tests.NETWORK)) {
                global.Tests.start(global.Tests.NETWORK, "bytes", event.bytesTotal);
            }
            global.PreloadManager.update(global.PreloadManager.ST_ASSETS_ZIP, (event.bytesLoaded / event.bytesTotal) * 100);
        };
        ASViewer.prototype.onZipLoadComplete = function (event) {
            global.EventStats.handle(global.FZip, event);
            this.logEvent("1st_download_zip");
            this.mAssetsInfo = {};
            this.mAssetsInfo.dir = {};
            this.mAssetsInfo.file = {};
            var appdebugicf;
            var t = global.getTimer();
            var len = this.mAssetsFile.getFileCount();
            for (var i = 0; i < len; ++i) {
                var file = this.mAssetsFile.getFileAt(i);
                var filename = "/" + file.filename.replace(/\\/g, '/');
                if (filename.charAt(filename.length - 1) == "/") {
                    filename = filename.substr(0, filename.length - 1);
                    this.mAssetsInfo.dir[filename] = 0;
                }
                else if (file.content) {
                    var tmp = filename.split("/");
                    if (tmp.length > 2) {
                        tmp.shift();
                        tmp.pop();
                        var list = [];
                        while (tmp.length) {
                            list.unshift("/" + tmp.join('/'));
                            tmp.pop();
                        }
                        for (var _i = 0, list_9 = list; _i < list_9.length; _i++) {
                            var dirname = list_9[_i];
                            if (this.mAssetsInfo.dir[dirname] !== undefined)
                                continue;
                            this.mAssetsInfo.dir[dirname] = 0;
                        }
                    }
                    file.content.position = 0;
                    if (global.CONFIG.QA_VERSION) {
                        if (filename == "/app-debug.icf") {
                            appdebugicf = file.content.readUTFBytes(file.content.length);
                            continue;
                        }
                    }
                    file.content.endian = global.Endian.LITTLE_ENDIAN;
                    this.mAssetsInfo.file[filename] = file.content;
                }
            }
            global.GLog.print("Распаковка " + ASViewer.ASSETS_URL + ": " + (global.getTimer() - t));
            global.Tests.finish(global.Tests.NETWORK);
            var ba = this.mAssetsInfo.file["/app.icf"];
            if (ba) {
                ba.position = 0;
                var isSync = global.URLVariablesGlobal.get("sync") == '1' || global.URLVariablesGlobal.get("sync") == 'true';
                if (appdebugicf && !isSync) {
                    ba.position = ba.length;
                    ba.writeUTFBytes('\n' + appdebugicf);
                    ba.position = 0;
                }
                if (global.CONFIG.LOG) {
                    ba.position = ba.length;
                    ba.writeUTFBytes('\n[' + ASViewer.ICF_GAME_TRACE + ']\nAll=1');
                    ba.position = 0;
                }
                if (global.CONFIG.LOG_LEVEL) {
                    ba.position = ba.length;
                    ba.writeUTFBytes('\n[' + ASViewer.ICF_GAME_TRACE + ']\nLevel="' + global.CONFIG.LOG_LEVEL + '"');
                    ba.position = 0;
                }
                var secret = global.URLVariablesGlobal.get("secret");
                if (secret == 'Absolutist-2253') {
                    ba.position = ba.length;
                    ba.writeUTFBytes('\n[' + ASViewer.ICF_GAME + ']\ndebug="' + secret + '"');
                    ba.position = 0;
                }
                var fps = global.URLVariablesGlobal.get("fps") == '1' || global.URLVariablesGlobal.get("fps") == 'true';
                if (fps) {
                    ba.position = ba.length;
                    ba.writeUTFBytes('\n[' + ASViewer.ICF_GAME + ']\nfps=1');
                    ba.position = 0;
                }
                global.AppIcf.init(ba.readUTFBytes(ba.bytesAvailable));
                var appstr = global.AppIcf.toString();
                ba.position = 0;
                ba.writeUTFBytes(appstr);
                ba.writeByte(0);
                ba.position = 0;
                if (global.CONFIG.QA_VERSION || global.CONFIG.LOG) {
                    global.GLog.print(appstr);
                }
                this.mForceSendToFlurry = global.AppIcf.readInt(ASViewer.ICF_FLURRY, "force_send_to_flurry");
                global.CONFIG.DEBUG = global.AppIcf.read(ASViewer.ICF_GAME, "debug") == "Absolutist-2253";
            }
            ba = this.mAssetsInfo.file["/text_ids.xml"];
            if (ba) {
                try {
                    var str = ba.readUTFBytes(ba.bytesAvailable);
                    ba.position = 0;
                    var xml = new global.XML(str);
                    len = xml.text.length();
                    for (i = 0; i < len; ++i) {
                        var strId = xml.text.bind(xml)[i].$id;
                        this.mTextIds[strId] = parseInt(xml.text.bind(xml)[i]);
                    }
                    global.System.disposeXML(xml);
                }
                catch (error) {
                    global.GLog.print("ERROR: onZipLoadComplete " + error.message);
                }
            }
            this.mVersionMain = global.AppIcf.read(ASViewer.ICF_GAME, "VersionMain");
            this.mVersionGraphic = global.AppIcf.read(ASViewer.ICF_GAME, "VersionGraphic");
            this.mVersionLogic = global.AppIcf.read(ASViewer.ICF_GAME, "VersionLogic");
            this.mMarket = global.AppIcf.read(ASViewer.ICF_GAME, "Market");
            this.mAppTitle = global.AppIcf.read(ASViewer.ICF_GAME, "AppTitle");
            global.PartnerConsole.init(global.AppIcf.read("Game", "bundle"), this.stage);
            this.updateContextMenu();
            this.mPopup = new global.Popup;
            this.mPopup.load(global.AppIcf.read(ASViewer.ICF_FLASH, "popupRef") || 'window.popup');
            this.stage.addChild(this.mPopup);
            var app, key, server;
            app = global.AppIcf.read(ASViewer.ICF_CLOUD, "app");
            if (app && global.AppIcf.read(ASViewer.ICF_CLOUD, "mode") != "offline") {
                var cl = global.Parse;
                key = global.AppIcf.read(ASViewer.ICF_CLOUD, "key");
                server = global.AppIcf.read(ASViewer.ICF_CLOUD, "server");
                this.mCloud = new cl(app, key, server);
            }
            app = global.AppIcf.read(ASViewer.ICF_CRASH, "app");
            key = global.AppIcf.read(ASViewer.ICF_CRASH, "key");
            server = global.AppIcf.read(ASViewer.ICF_CRASH, "server");
            if (this.mCloud && app && key)
                this.mCloudCrash = new global.Parse(app, key, server);
            app = global.AppIcf.read(ASViewer.ICF_PUSH, "app");
            key = global.AppIcf.read(ASViewer.ICF_PUSH, "key");
            server = global.AppIcf.read(ASViewer.ICF_PUSH, "server");
            if (this.mCloud && app && key)
                this.mCloudPush = new global.Parse(app, key, server);
            if (this.mMarket == ASViewer.MARKET_WIZQ) {
                try {
                    if (global.ExternalInterface.available)
                        this.mWizqAppId = global.ExternalInterface.call('function () { return wqAppId; }');
                }
                catch (e) {
                    global.GLog.print("[ASViewer] ERROR: не достали app id через ExternalInterface");
                }
            }
            if ((this.mAssetsReady = true) && this.mASMReady) {
                this.startSocial();
            }
        };
        ASViewer.prototype.startSocial = function () {
            global.GLog.print("startSocial");
            this.defineSocialUniqueId(function () {
                global.GLog.print("define social unique id was complete successfull");
                this.mSocialReady = true;
                this.loadCloudData();
            }.bind(this));
        };
        ASViewer.prototype.checkASM = function () {
            if (window.Module && window.GL && window.FS) {
                this.onASMLoad();
            }
            else {
                this.loadASM();
                var fakeP = 0;
                var fakeInt = setInterval(function () {
                    fakeP += 0.03;
                    if (fakeP >= 1) {
                        fakeP = 1;
                        clearInterval(fakeInt);
                    }
                    this.onASMProgress({ loaded: fakeP, total: 1 });
                }.bind(this), 100);
            }
        };
        ASViewer.prototype.isEdge = function () {
            return window.navigator.userAgent.indexOf("Edge") > -1;
        };
        ASViewer.prototype.isWebAssembly = function () {
            try {
                if (typeof WebAssembly === "object"
                    && typeof WebAssembly.instantiate === "function") {
                    var module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));
                    if (module instanceof WebAssembly.Module)
                        return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;
                }
            }
            catch (e) {
            }
            return false;
        };
        ASViewer.prototype.loadASM = function () {
            var head = document.getElementsByTagName('head')[0];
            var script = document.createElement('script');
            script.type = 'text/javascript';
            script.onload = this.onASMLoad.bind(this);
            script.onerror = this.onASMError.bind(this);
            var url = 'asm.js' + global.CONFIG.getRev();
            var webASM = false;
            if (global.URLVariablesGlobal.get("wasm")) {
                webASM = global.URLVariablesGlobal.get("wasm") == '1';
                global.GLog.print("URL parameter wasm == " + global.URLVariablesGlobal.get("wasm"));
            }
            else {
                if (this.isEdge()) {
                    global.GLog.print("webassembly disabled because brouser is Edge");
                    webASM = false;
                }
                else if (!this.isWebAssembly()) {
                    global.GLog.print("isWebAssembly == false");
                    webASM = false;
                }
                else {
                    global.GLog.print("isWebAssembly == true");
                    webASM = true;
                }
            }
            if (webASM) {
                url = 'wasm.js' + global.CONFIG.getRev();
                Module['locateFile'] = function (path, scriptDirectory) {
                    return global.URLStream.__base + 'wasm.wasm' + global.CONFIG.getRev();
                };
            }
            if (global.URLStream.__base)
                url = global.URLStream.__base + url;
            script.src = url;
            head.appendChild(script);
        };
        ASViewer.prototype.onASMProgress = function (e) {
            global.PreloadManager.update(global.PreloadManager.ST_ASSETS_ASM, (e.loaded / e.total) * 100);
        };
        ASViewer.prototype.onASMError = function () {
            global.GLog.print("ERROR: can't load asm.js");
            global.setTimeout(this.loadASM.bind(this), global.getReconnectInterval());
        };
        ASViewer.prototype.onASMLoad = function () {
            global.PreloadManager.update(global.PreloadManager.ST_ASSETS_ASM, 100);
            if ((this.mASMReady = true) && this.mAssetsReady) {
                this.startSocial();
            }
        };
        ASViewer.prototype.createContext = function () {
            global.GLog.print("createContext");
            if (this.wmode == ASViewer.WMODE_DIRECT) {
                global.ProfileSupport.check(this.stage, "baselineExtended", function (profile, success) {
                    if (!success)
                        profile = "baseline";
                    global.setTimeout(this.requestContext3D.bind(this), 100, profile);
                }.bind(this));
            }
            else {
                this.onContextCreated(null);
            }
        };
        ASViewer.prototype.onFileSystemReady = function () {
            global.GLog.print("onFileSystemReady...");
            this.initLanguage();
            if (this.loaderInfo && this.loaderInfo.uncaughtErrorEvents) {
                this.loaderInfo.uncaughtErrorEvents.addEventListener(global.UncaughtErrorEvent.UNCAUGHT_ERROR, this.onUncaughtError.bind(this));
                global.GLog.print("uncaughtErrorEvents configured");
            }
            else {
                if (!this.loaderInfo)
                    global.GLog.print("there is no loaderInfo object");
                else
                    global.GLog.print("there is no uncaughtErrorEvents property in loaderInfo object");
            }
            this.mSharedObjectName = this.mUniqueId || '';
            this.mSharedObjectName = this.mSharedObjectName.replace(/[~%&\;:"',<>?# ]/g, "");
            if (!this.mSharedObjectName.length)
                this.mSharedObjectName = null;
            this.fixBackingStore();
            window.IDBFS.getDB_native = window.IDBFS.getDB;
            window.IDBFS.getDB = function (name, callback) {
                window.IDBFS.getDB_native(this.fileNameWithPrefix(name), callback);
            }.bind(this);
            if (!ASViewer.FS_stat('/home')) {
                FS.mkdir('/home');
            }
            FS.mount(window.IDBFS, {}, '/home');
            global.GLog.print("FS.syncfs started (disk -> ram)");
            FS.syncfs(true, onFileSystemReadyInternal.bind(this));
            function onFileSystemReadyInternal(error) {
                global.GLog.print("FS.syncfs finished (disk -> ram) " + (error ? "with error: " + error : "successfully"));
                for (var dir in this.mAssetsInfo.dir) {
                    if (ASViewer.FS_stat(dir)) {
                        continue;
                    }
                    global.GLog.print("add dir: " + dir);
                    FS.mkdir(dir);
                }
                for (var file in this.mAssetsInfo.file) {
                    global.GLog.print("add file: " + file);
                    var ba = this.mAssetsInfo.file[file];
                    if (!ba)
                        continue;
                    if (!ba.length)
                        continue;
                    FS.writeFile(file, new Uint8Array(ba.buffer), { encoding: 'binary' });
                }
                FS.writeFile(ASViewer.LOG_FILE, new Uint8Array(global.GLog.buf.buffer), { encoding: 'binary' });
                this.stage.addEventListener('SharedObjectFlushStatus.PENDING', function (event) {
                    global.EventStats.handle(ASViewer, event);
                    global.CrashReport.send(global.ErrorType.SHARED_OBJECT, -1, this.mUniqueId, this.mSocialUserName, this.getVersion(), global.ErrorType.getErrorBody(global.ErrorType.SHARED_OBJECT));
                }.bind(this), true);
                if (this.mCloudData && !this.loadFileFromLocalStorage('home/options.xml')) {
                    addOptionsFromCloud.bind(this)(this.mCloudData, 'home/options.xml');
                }
                if (this.mCloudExtra && !this.loadFileFromLocalStorage('home/extra.xml')) {
                    addOptionsFromCloud.bind(this)(this.mCloudExtra, 'home/extra.xml');
                }
                for (var i = 0; i < ASViewer.LOCAL_STORAGE_FILES.length; ++i) {
                    var fileName = ASViewer.LOCAL_STORAGE_FILES[i];
                    if (fileName === 'home/options.xml' || fileName === 'home/extra.xml') {
                        continue;
                    }
                    this.loadFileFromLocalStorage(fileName);
                }
                Module.viewer_init(this.w, this.h);
                if (this.mCloudLaunches == 1)
                    this.logSocialRefferer(ASViewer.SENDER_ABS);
                this.stage.frameRate = 60;
                this.lastFrameTime = global.getTimer();
                this.addEventListener(flash.events.Event.ENTER_FRAME, this.onEnterFrame.bind(this));
                this.stage.addEventListener(global.MouseEvent.MOUSE_DOWN, this.onMouseDown.bind(this));
                this.stage.addEventListener(global.MouseEvent.MOUSE_MOVE, this.onMouseMove.bind(this));
                this.stage.addEventListener(global.MouseEvent.MOUSE_UP, this.onMouseUp.bind(this));
                this.stage.addEventListener(global.Event.MOUSE_LEAVE, this.onMouseLeave.bind(this));
                global.gc();
            }
            function addOptionsFromCloud(value, fileName) {
                if (!value)
                    return;
                if (!value.length)
                    return;
                var ba = new global.ByteArray;
                ba.endian = global.Endian.LITTLE_ENDIAN;
                ba.writeUTFBytes(value);
                ba.writeByte(0);
                ba.position = 0;
                if (ASViewer.FS_stat(fileName)) {
                    FS.unlink(fileName);
                }
                FS.writeFile(fileName, new Uint8Array(ba.buffer), { encoding: 'binary' });
            }
        };
        ASViewer.prototype.saveFileToLocalStorage = function (fileName) {
            if (this.mGuestId) {
                return false;
            }
            try {
                var lsFileName = this.fileNameWithPrefix(fileName);
                trace('[LocalStorage] save file ' + fileName + ' to ' + lsFileName);
                var u8 = FS.readFile(fileName, { encoding: 'binary' });
                if (u8) {
                    var base64 = global.Base64.encode(new global.ByteArray().fromArrayBuffer(u8.buffer));
                    window.localStorage.setItem(lsFileName, base64);
                    window.localStorage.setItem(lsFileName + '_timestamp', new Date().toString());
                    trace('[LocalStorage] success');
                    return true;
                }
                else {
                    trace('[LocalStorage] no content');
                }
            }
            catch (e) {
                trace('[LocalStorage] error: ' + e.message);
            }
            return false;
        };
        ASViewer.prototype.loadFileFromLocalStorage = function (fileName) {
            if (this.mGuestId) {
                return false;
            }
            try {
                var lsFileName = this.fileNameWithPrefix(fileName);
                trace('[LocalStorage] load file ' + fileName + ' from ' + lsFileName);
                var base64 = window.localStorage.getItem(lsFileName);
                if (typeof base64 === 'string' && base64.length) {
                    if (ASViewer.FS_stat(fileName)) {
                        FS.unlink(fileName);
                    }
                    FS.writeFile(fileName, new Uint8Array(global.Base64.decode(base64).buffer), { encoding: 'binary' });
                    window.localStorage.removeItem(lsFileName);
                    window.localStorage.removeItem(lsFileName + '_timestamp');
                    trace('[LocalStorage] success');
                    return true;
                }
                else {
                    trace('[LocalStorage] no content');
                }
            }
            catch (e) {
                trace('[LocalStorage] error: ' + e.message);
            }
            return false;
        };
        ASViewer.prototype.fixBackingStore = function () {
            if (!this.mSharedObjectName) {
                return;
            }
            var system = getLocal.bind(this)('system');
            var profile = getLocal.bind(this)(this.mSharedObjectName);
            if (!system || !profile) {
                global.GLog.print("SharedObject is unavailable");
                return;
            }
            try {
                if (profile.data.hasOwnProperty('filemap')) {
                    global.GLog.print("the SharedObject's name is already '" + this.mSharedObjectName + "'");
                    return;
                }
                if (system.data.hasOwnProperty('filemap')) {
                    global.GLog.print("SharedObject moved from 'system' to '" + this.mSharedObjectName + "'");
                    system.data.filemap = {};
                    system.flush();
                }
                else {
                    global.GLog.print("will create a new SharedObject with name '" + this.mSharedObjectName + "'");
                }
            }
            catch (error) {
                global.GLog.print("error with processing SharedObject: " + error.message);
            }
            finally {
                try {
                    profile.close();
                    system.close();
                }
                catch (error) { }
            }
            function getLocal(name) {
                try {
                    return global.SharedObject.getLocal(name);
                }
                catch (error) { }
                return null;
            }
        };
        ASViewer.prototype.onUncaughtError = function (event) {
            event.preventDefault();
            this.showLoadingError(global.ErrorType.UNCAUGHT, ASViewer.JS_RELOAD, event);
        };
        ASViewer.prototype.tryAppResume = function (ignoreLog) {
            if (ignoreLog === void 0) { ignoreLog = false; }
            if (this.mViewerCrashed)
                return;
            if (!this.mFirstScreenFrameExecuted)
                return;
            if (this.mAppActive) {
                return;
            }
            ignoreLog = !global.CONFIG.QA_VERSION;
            if (!this.mPausedByInactive && !this.mDeactivated && global.Online.connected && ((this.mPopup && !this.mPopup.isShowed) || !this.mPopup)) {
                this.mAppActive = true;
                ASViewer.sLastEvent2Viewer = 'appResume()';
                Module.viewer_appResume();
                ASViewer.sLastEvent2Viewer = null;
            }
            else if (!ignoreLog) {
                var msg = "Can't resume viewer because of";
                if (this.mPausedByInactive)
                    msg += " -> mPausedByInactive";
                if (this.mDeactivated)
                    msg += " -> mDeactivated";
                if (!global.Online.connected)
                    msg += " -> !Online.connected";
                global.GLog.print(msg);
            }
        };
        ASViewer.prototype.appPause = function () {
            if (this.mViewerCrashed)
                return;
            if (!this.mFirstScreenFrameExecuted)
                return;
            if (!this.mAppActive) {
                return;
            }
            this.mAppActive = false;
            ASViewer.sLastEvent2Viewer = 'appPause()';
            Module.viewer_appPause();
            ASViewer.sLastEvent2Viewer = null;
        };
        ASViewer.prototype.tryProgressHide = function () {
            if (global.Online.connected && this.mViewerLoadingProgress < 0 && !this.mSystemShowLoadingProgress) {
                global.Online.hide();
            }
        };
        ASViewer.prototype.sendInitPercent = function (percent) {
            if (this.mPreloader) {
                if (percent > this.mLastPercent) {
                    this.mPreloader["percent"] = (Math.min(percent, 99)) / 100;
                    this.mLastPercent = percent;
                }
            }
            global.PartnerConsole.loadPercent(percent / 100);
        };
        ASViewer.prototype.initStatistics = function () {
            if (!this.mStatisticsInited) {
                if (global.ExternalInterface.available) {
                    global.URLVariablesGlobal.init();
                    if (global.URLVariablesGlobal.location.indexOf("facebook") >= 0) {
                        this.mStatistics = new global.s3eFacebookStatistics;
                    }
                }
                this.logEvent("1st_download_core");
                this.logSocialRefferer(ASViewer.SENDER_FLURRY);
                this.mStatisticsInited = true;
            }
        };
        ASViewer.prototype.initSocial = function () {
            if (!this.mSocialInited) {
                if (global.AppIcf.read(ASViewer.ICF_FACEBOOK, "facebookId") && global.ExternalInterface.available) {
                    switch (this.mMarket) {
                        case ASViewer.MARKET_FACEBOOK:
                            this.mSocial = new global.s3eFacebook;
                            break;
                        case ASViewer.MARKET_ODNOKLASSNIKI:
                            this.mSocial = new global.s3eOdnoklassniki(this.mOdnoklassnikiAppId, this.mOdnoklassnikiAppKey);
                            break;
                        case ASViewer.MARKET_VKONTAKTE:
                            this.mSocial = new global.s3eVkontakte(this.mVkontakteAppId);
                            break;
                        case ASViewer.MARKET_MAILRU:
                            this.mSocial = new global.s3eMailru(this.mMailruAppId);
                            break;
                        case ASViewer.MARKET_WIZQ:
                            this.mSocial = new global.s3eWizq(this.mWizqAppId);
                            break;
                    }
                }
                else {
                    if (global.ExternalInterface.available)
                        global.GLog.print("[Social] Не указаны параметры facebook в flashvars.");
                    else
                        global.GLog.print("[Social] ExternalInterface.available == false, считаем что социальная сеть не доступна.");
                }
                if (this.mSocial) {
                    this.mSocial.setViewer(this);
                    this.mSocial.setCloud(this.mCloud);
                    this.mSocial.setCloudPush(this.mCloudPush);
                    this.mSocial.addEventListener(global.Event.ACTIVATE, this.onActivate.bind(this));
                    this.mSocial.s3eCommonInt(global.s3eFacebook.keyInit, 0, JSON.stringify({ appId: global.AppIcf.read(ASViewer.ICF_FACEBOOK, "facebookId"), appVersion: this.getVersion() }));
                }
                this.mOnlineDisplay = global.Online.init(global.OnlineURL);
                if (this.mOnlineDisplay) {
                    var index = this.mPopup ? this.stage.getChildIndex(this.mPopup) : this.stage.numChildren;
                    this.stage.addChildAt(this.mOnlineDisplay, index - 1);
                }
                else {
                    global.GLog.print("can't add online display object to stage.");
                }
                this.mSocialInited = true;
            }
        };
        ASViewer.prototype.initBilling = function (data) {
            if (!this.mBillingInited) {
                var userId = data ? data["id"] : null;
                switch (this.mMarket) {
                    case ASViewer.MARKET_FACEBOOK:
                        this.mBilling = new global.s3eFacebookBilling(data);
                        this.mBilling.setServiceURL(getPaymentURL.bind(this)(global.AppIcf.read(ASViewer.ICF_FACEBOOK, "facebookId")));
                        break;
                    case ASViewer.MARKET_ODNOKLASSNIKI:
                        this.mBilling = new global.s3eOdnoklassnikiBilling(data);
                        this.mBilling.setServiceURL(getPaymentURL.bind(this)(this.mOdnoklassnikiAppKey));
                        break;
                    case ASViewer.MARKET_VKONTAKTE:
                        this.mBilling = new global.s3eVkontakteBilling(data);
                        this.mBilling.setServiceURL(getPaymentURL.bind(this)(this.mVkontakteAppId));
                        break;
                    case ASViewer.MARKET_MAILRU:
                        this.mBilling = new global.s3eMailruBilling(data);
                        this.mBilling.setServiceURL(getPaymentURL.bind(this)(this.mMailruAppId));
                        break;
                    case ASViewer.MARKET_WIZQ:
                        this.mBilling = new global.s3eWizqBilling(data);
                        this.mBilling.setServiceURL(getPaymentURL.bind(this)(this.mWizqAppId));
                        break;
                    case ASViewer.MARKET_FACEBOOKINSTANT:
                        this.mBilling = new global.s3eFacebookInstantBilling(data);
                        break;
                    default:
                        this.mBilling = new global.s3eFacebookBilling(null);
                        this.mBilling.setViewer(this);
                }
                if (this.mBilling) {
                    this.mBilling.setViewer(this);
                    this.mBilling.setCloud(this.mCloud);
                    this.mBilling.addEventListener(global.Event.ACTIVATE, this.onActivate.bind(this));
                }
                this.mBillingInited = true;
            }
            function getPaymentURL(appId) {
                var id = userId;
                var market = "";
                switch (this.mMarket) {
                    case ASViewer.MARKET_FACEBOOK:
                        market = "facebook";
                        break;
                    case ASViewer.MARKET_ODNOKLASSNIKI:
                        market = "odnoklassniki";
                        break;
                    case ASViewer.MARKET_VKONTAKTE:
                        market = "vkontakte";
                        break;
                    case ASViewer.MARKET_WIZQ:
                        market = "wizq";
                        id = id.split('-')[1];
                        break;
                    default:
                        market = this.mMarket;
                }
                return global.AppIcf.read(ASViewer.ICF_FLASH, "paymentServiceURL").split("[market]").join(market)
                    .split("[appId]").join(appId)
                    .split("[userId]").join(id);
            }
        };
        ASViewer.prototype.initPartnerAPI = function () {
        };
        ASViewer.prototype.initLanguage = function (data) {
            if (data === void 0) { data = null; }
            if (!this.mSysLanguage) {
                this.mSysLanguage = global.Capabilities.language;
                if (this.mSysLanguage.length > 2)
                    this.mSysLanguage = this.mSysLanguage.substr(0, 2);
            }
            if (!this.mPageLanguage && this.stage) {
                var params = this.stage.loaderInfo.parameters;
                this.mPageLanguage = this.readConfig(params);
                global.GLog.print("[initLanguage] loaderInfo.parameters=" + JSON.stringify(params) + ", mPageLanguage " + this.mPageLanguage);
            }
            if (!this.mPageLanguage && data && "locale" in data) {
                this.mPageLanguage = data["locale"];
                if (this.mPageLanguage.length > 2)
                    this.mPageLanguage = this.mPageLanguage.substr(0, 2);
            }
        };
        ASViewer.prototype.defineSocialUniqueId = function (callback) {
            this.initSocial();
            if (this.mSocial) {
                this.mSocial.s3eCommonIntWithCallback(global.s3eFacebook.keyLogin, JSON.stringify({ sessionID: 0, permissions: this.DEFAULT_PERMISSIONS }), onFBLogin.bind(this));
                function onFBLogin(params, data) {
                    var result = JSON.parse(params.readUTFBytes(params.length));
                    if (result.status == 0) {
                        var requestId = this.mSocial.s3eCommonInt(global.s3eFacebook.keyInitFBRequest_WithGraphPath, 0, JSON.stringify({ graphPath: "me", httpMethod: "GET" }));
                        this.mSocial.s3eCommonInt(global.s3eFacebook.keyFBRequest_AddParamString, requestId, JSON.stringify({ requestID: requestId, name: "fields", value: "id,name,email,first_name,last_name,gender,locale" }));
                        this.mSocial.s3eCommonIntWithCallback(global.s3eFacebook.keyFBRequest_Send, JSON.stringify({ requestID: requestId }), onFBGetMe.bind(this));
                        function onFBGetMe(params, data) {
                            if (params) {
                                var result = JSON.parse(params.readUTFBytes(params.length));
                                var ba = this.mSocial.s3eCommonData(global.s3eFacebook.keyFBRequest_ResponseRaw, 0, JSON.stringify({ requestID: result.requestID }));
                                if (ba) {
                                    var raw = ba.readUTFBytes(ba.length - 1);
                                    var obj = JSON.parse(raw);
                                    this.mSocial.s3eCommonInt(global.s3eFacebook.keyFBRequest_Delete, 0, JSON.stringify({ requestID: result.requestID }));
                                    if (obj && obj.id != undefined) {
                                        this.initBilling(obj);
                                        this.initLanguage(obj);
                                        this.mUniqueIdPure = obj.id;
                                        this.mSocialUserName = obj.name;
                                        this.mSocialUserEmail = obj.email;
                                        save.bind(this)(this.market2prefix(this.mMarket) + "_" + this.mUniqueIdPure + ASViewer.game2postfix);
                                        complete.bind(this)();
                                    }
                                    else {
                                        global.GLog.print("[defineSocial] onFBGetMe obj.id is undefined");
                                        retry.bind(this)();
                                    }
                                }
                            }
                            else {
                                global.GLog.print("[defineSocial] onFBGetMe params is undefined");
                                retry.bind(this)();
                            }
                        }
                    }
                    else {
                        global.GLog.print("[defineSocial] onFBLogin result.status is " + result.status);
                        retry.bind(this)();
                    }
                }
            }
            else {
                global.GLog.print("[defineSocial] mSocial isn't inited ");
                read.bind(this)();
                complete.bind(this)();
            }
            function generate() {
                var value = "";
                while (value.length < 8)
                    value += int(Math.random() * 256);
                return "rnd_" + value;
            }
            function save(value, toSharedObject) {
                if (toSharedObject === void 0) { toSharedObject = false; }
                global.GLog.print("[defineSocial] Incoming uniqueId: " + value);
                if (toSharedObject) {
                    try {
                        var so = global.SharedObject.getLocal("local");
                        so.data.uniqueId = value;
                        so.flush();
                        so.close();
                    }
                    catch (e) {
                        global.GLog.print("[defineSocial] ERROR: Не могу записать в SharedObject (system.uniqueId)");
                    }
                }
                this.mUniqueId = value;
            }
            function read() {
                if (!this.mUniqueId) {
                    try {
                        var so = global.SharedObject.getLocal("local");
                        if (so.data)
                            this.mUniqueId = so.data.uniqueId;
                        so.close();
                    }
                    catch (e) {
                        global.GLog.print("[defineSocial] ERROR: Не могу прочитать из SharedObject (system.uniqueId)");
                    }
                    if (!this.mUniqueId)
                        save.bind(this)(generate.bind(this)(), true);
                }
            }
            function retry() {
                if (this.mSocial)
                    this.mSocial.refresh();
                this.showLoadingError(global.ErrorType.LOGIN, function () {
                    this.defineSocialUniqueId(callback);
                }.bind(this));
            }
            function complete() {
                if (this.mSocial)
                    this.mSocial.refresh();
                callback();
            }
        };
        ASViewer.prototype.market2prefix = function (value) {
            switch (value) {
                case ASViewer.MARKET_FACEBOOK: return "fb";
                case ASViewer.MARKET_ODNOKLASSNIKI: return "ok";
                case ASViewer.MARKET_VKONTAKTE: return "vk";
                case ASViewer.MARKET_MAILRU: return "ru";
                case ASViewer.MARKET_WIZQ: return "wq";
                case ASViewer.MARKET_FACEBOOKINSTANT: return "fbinst";
                default: return "unknown";
            }
        };
        ASViewer.prototype.clear = function () {
            this.ctx3d.clear(0.0, 0.0, 0.0);
        };
        ASViewer.prototype.getPackInfo = function (pack) {
            if (!this.packs.get(pack))
                this.packs.set(pack, new global.PackInfo);
            return this.packs.get(pack);
        };
        ASViewer.prototype.getImageById = function (pack, fid) {
            var packInfo = this.getPackInfo(pack);
            if (!packInfo.images)
                return null;
            return packInfo.images.get(fid);
        };
        ASViewer.prototype.setImageById = function (pack, fid, img) {
            var packInfo = this.getPackInfo(pack);
            if (!packInfo.images)
                packInfo.images = new global.Dictionary;
            packInfo.images.set(fid, img);
        };
        ASViewer.prototype.getSoundById = function (pack, fid) {
            var packInfo = this.getPackInfo(pack);
            if (!packInfo.sounds)
                return null;
            return packInfo.sounds.get(fid);
        };
        ASViewer.prototype.setSoundById = function (pack, id, snd) {
            var packInfo = this.getPackInfo(pack);
            if (!packInfo.sounds)
                packInfo.sounds = new global.Dictionary;
            packInfo.sounds.set(id, snd);
        };
        ASViewer.prototype.getFileById = function (pack, fid) {
            var packInfo = this.getPackInfo(pack);
            if (!packInfo.files)
                return null;
            return packInfo.files.get(fid);
        };
        ASViewer.prototype.setFileById = function (pack, fid, file) {
            var packInfo = this.getPackInfo(pack);
            if (!packInfo.files)
                packInfo.files = new global.Dictionary;
            packInfo.files.set(fid, file);
        };
        ASViewer.prototype.getRecoveringTextureCount = function () {
            var count = 0;
            for (var _i = 0, _a = this.packs.values; _i < _a.length; _i++) {
                var pack = _a[_i];
                if (!pack)
                    continue;
                for (var _b = 0, _c = pack.images.values; _b < _c.length; _b++) {
                    var img = _c[_b];
                    if (img.recovering)
                        count++;
                }
            }
            return count;
        };
        ASViewer.prototype.onEnterFrame = function (e) {
            ASViewer.sStartFrameTime = global.getTimer();
            if (global.CONFIG.QA_VERSION) {
                if (this.mViewerNeedAS3Crash) {
                    this.mViewerNeedAS3Crash = false;
                    throw new global.Error('Testing error');
                }
            }
            if (this.mViewerCrashed)
                return;
            if (ASViewer.sLastEvent2Viewer && ASViewer.sLastEvent2Viewer.indexOf('update') != -1) {
                return;
            }
            try {
                if (this.mViewerLoadState == ASViewer.LOAD_NEXT_SCREEN_RESOURCES &&
                    this.mPopup && this.mPopup.isLoaded && !this.mPopup.isShowed) {
                    if (global.AssetsData.packLoadingCount) {
                        this.mGetImageFidTimestamp = this.mGetChildFidTimestamp = -1;
                        if (this.mChangeScreenTimestamp > 0 && global.getTimer() - this.mChangeScreenTimestamp > this.CHANGE_SCREEN_TIMEOUT) {
                            global.CrashReport.send(global.ErrorType.SCREEN_TIMEOUT, -1, this.mUniqueId, this.mSocialUserName, this.getVersion(), global.ErrorType.getErrorBody(global.ErrorType.SCREEN_TIMEOUT));
                        }
                    }
                    else {
                        if ((this.mGetImageFidTimestamp > 0 && global.getTimer() - this.mGetImageFidTimestamp > this.GET_FID_TIMEOUT) ||
                            (this.mGetChildFidTimestamp > 0 && global.getTimer() - this.mGetChildFidTimestamp > this.GET_FID_TIMEOUT)) {
                            global.CrashReport.send(global.ErrorType.SCREEN_FREEZE, -1, this.mUniqueId, this.mSocialUserName, this.getVersion(), global.ErrorType.getErrorBody(global.ErrorType.SCREEN_FREEZE));
                        }
                    }
                }
                if (this.mPausedByInactive && this.isUserActive()) {
                    global.GLog.print("mPausedByInactive && this.isUserActive()");
                    this.mPausedByInactive = false;
                    this.tryAppResume();
                }
                if (this.mAppActive && this.contextValid && this.isUserActive()) {
                    while (this.callbacks.length) {
                        var cb = this.callbacks.shift();
                        global.GLog.print("[callback] delayed startCallbackFn: cbAddr=" + cb.cbAddr + ", params=" + cb.params + ", data=" + this.getByteArrayLog(cb.data));
                        var success = this.doCallback(cb.cbAddr, cb.params, cb.data);
                        if (!success)
                            break;
                    }
                    if (this.mDelayedResize) {
                        this.onResize(null, true);
                        this.mDelayedResize = false;
                    }
                    this.mViewerLoadingProgress = -1;
                    var tempTime = global.getTimer();
                    ASViewer.sLastEvent2Viewer = 'update(' + (tempTime - this.lastFrameTime) + ')';
                    Module.viewer_update(tempTime - this.lastFrameTime);
                    ASViewer.sLastEvent2Viewer = null;
                    while (this.images2load.length) {
                        var img = this.images2load.pop();
                        if (img.status != global.DataAbstract.STATUS_LOADING) {
                            img.startLoad();
                        }
                    }
                    if (this.mFirstScreenFrameExecuted) {
                        var len = this.sounds2load.length;
                        if (len) {
                            var snd = this.sounds2load[0];
                            if (snd && snd.status == global.DataAbstract.STATUS_INIT) {
                                snd.startLoad();
                            }
                        }
                        if (this.mViewerLoadingProgress == -1) {
                            global.FrameRateStats.time(tempTime - this.lastFrameTime);
                        }
                    }
                    ASViewer.sLastEvent2Viewer = 'draw()';
                    Module.viewer_draw();
                    ASViewer.sLastEvent2Viewer = null;
                    if (this.mPrintDT)
                        global.GLog.print("[dt] " + (tempTime - this.lastFrameTime));
                    this.lastFrameTime = tempTime;
                }
                else {
                    this.lastFrameTime = global.getTimer();
                    if (!this.isUserActive() && !this.mPausedByInactive) {
                        this.mPausedByInactive = true;
                        this.appPause();
                    }
                }
                global.GLog.verify();
            }
            catch (e) {
                this.onUncaughtError(new global.UncaughtErrorEvent(global.UncaughtErrorEvent.UNCAUGHT_ERROR, true, true, e));
            }
        };
        ASViewer.prototype.onSoundComplete = function (event) {
            var ch = event.target;
            ch.removeEventListener(flash.events.Event.SOUND_COMPLETE, this.onSoundComplete.bind(this));
            for (var i = 0; i < this.channelDimension; ++i) {
                if (this.channels[i] == ch) {
                    this.channels[i] = null;
                    return;
                }
            }
        };
        ASViewer.prototype.logSocialRefferer = function (sender) {
            var params = { story_type: global.URLVariablesGlobal.get("story_type") };
            if (params.story_type) {
                this.logEvent("1st_run_social_refferer", params, sender);
            }
        };
        ASViewer.prototype.processBrowserKeyboardEvent = function (event) {
            if (this.mIsMouseLeave) {
                return;
            }
            switch (event.keyCode) {
                case global.Keyboard.LEFT:
                case global.Keyboard.RIGHT:
                case global.Keyboard.UP:
                case global.Keyboard.DOWN:
                    event.preventDefault();
                    break;
            }
        };
        ASViewer.prototype.getVersion = function () {
            return this.mVersionMain + "." + this.mVersionGraphic + "." + this.mVersionLogic;
        };
        ASViewer.prototype.getVersionInt = function () {
            var main = global.AppIcf.readInt(ASViewer.ICF_GAME, "VersionMain");
            var graphic = global.AppIcf.readInt(ASViewer.ICF_GAME, "VersionGraphic");
            var logic = global.AppIcf.readInt(ASViewer.ICF_GAME, "VersionLogic");
            return main * 1000000 + graphic * 1000 + logic * 1;
        };
        ASViewer.prototype.getVersionObject = function () {
            return { main: this.mVersionMain, graphic: this.mVersionGraphic, logic: this.mVersionLogic };
        };
        ASViewer.prototype.fileNameWithPrefix = function (fileName) {
            return (this.mAppTitle + '/' + this.mUniqueId + '/' + (global.CONFIG.QA_VERSION ? 'debug/' : '') + fileName).replace(/\/\//g, '/');
        };
        ASViewer.prototype.getByteArrayLog = function (value) {
            return value ? "ByteArray(" + value.length + ")" : "null";
        };
        ASViewer.prototype.getLogs = function (fileName) {
            if (fileName === void 0) { fileName = ASViewer.LOG_FILE; }
            if (fileName == ASViewer.LOG_FILE) {
                FS.writeFile(ASViewer.LOG_FILE, new Uint8Array(global.GLog.buf.buffer), { encoding: 'binary' });
            }
            var u8 = FS.readFile(fileName, { encoding: 'binary' });
            if (u8)
                return new global.ByteArray().fromArrayBuffer(u8.buffer);
            return null;
        };
        ASViewer.prototype.getLogsStr = function (fileName, size) {
            if (fileName === void 0) { fileName = ASViewer.LOG_FILE; }
            if (size === void 0) { size = 0; }
            try {
                var ba = this.getLogs(fileName);
                if (!ba)
                    return null;
                ba.position = size > 0 ? Math.max(ba.length - size, 0) : 0;
                var result = ba.readUTFBytes(ba.bytesAvailable);
                return result.length ? result : null;
            }
            catch (error) {
                return 'Не смог прочитать логи: ' + error.message;
            }
        };
        ASViewer.prototype.debugKeyUp = function (event) {
            if (!event.shiftKey) {
                return;
            }
            if (event.charCode == global.Keyboard.O)
                this.debugSaveOptions();
            if (event.charCode == global.Keyboard.L)
                this.debugSaveViewerLog();
            if (event.charCode == global.Keyboard.P)
                this.debugSaveViewerParseLog();
            if (event.charCode == global.Keyboard.M)
                this.debugSaveViewerMultiplayerLog();
            if (event.charCode == global.Keyboard.I)
                this.debugSendOptionsXML();
            if (event.charCode == global.Keyboard.K)
                this.debugSendViewerLog();
            if (event.charCode == global.Keyboard.A)
                this.mViewerNeedAS3Crash = true;
        };
        ASViewer.prototype.debugSaveViewerLog = function (event) {
            if (event === void 0) { event = null; }
            try {
                var fname = ASViewer.LOG_FILE;
                var ba = this.getLogs(fname) || this.mEmptyData;
                fname = fname.split('.').join('_' + global.AppIcf.read(ASViewer.ICF_ABS_STAT, 'appID') + '.');
                this.mFileReferenceHelper = new global.FileReference;
                this.mFileReferenceHelper.save(ba, fname);
            }
            catch (e) { }
        };
        ASViewer.prototype.debugSaveViewerParseLog = function (event) {
            if (event === void 0) { event = null; }
            try {
                var fname = ASViewer.PARSE_LOG_FILE;
                var ba = this.getLogs('home/' + fname) || this.mEmptyData;
                fname = fname.split('.').join('_' + global.AppIcf.read(ASViewer.ICF_ABS_STAT, 'appID') + '.');
                this.mFileReferenceHelper = new global.FileReference;
                this.mFileReferenceHelper.save(ba, fname);
            }
            catch (e) { }
        };
        ASViewer.prototype.debugSaveViewerMultiplayerLog = function (event) {
            if (event === void 0) { event = null; }
            try {
                var fname = ASViewer.MULTIPLAYER_LOG_FILE;
                var ba = this.getLogs('home/' + fname) || this.mEmptyData;
                fname = fname.split('.').join('_' + global.AppIcf.read(ASViewer.ICF_ABS_STAT, 'appID') + '.');
                this.mFileReferenceHelper = new global.FileReference;
                this.mFileReferenceHelper.save(ba, fname);
            }
            catch (e) { }
        };
        ASViewer.prototype.debugSendViewerLog = function (event) {
            if (event === void 0) { event = null; }
            var files = [
                {
                    name: ASViewer.LOG_FILE,
                    content: this.getLogsStr()
                }, {
                    name: ASViewer.PARSE_LOG_FILE,
                    content: this.getLogsStr('home/' + ASViewer.PARSE_LOG_FILE)
                }, {
                    name: ASViewer.MULTIPLAYER_LOG_FILE,
                    content: this.getLogsStr('home/' + ASViewer.MULTIPLAYER_LOG_FILE)
                }
            ];
            global.CrashReport.send(global.ErrorType.VIEWER_LOG, 0, this.mUniqueId, this.mSocialUserName, this.getVersion(), global.ErrorType.getErrorBody(global.ErrorType.VIEWER_LOG), files, global.CrashReport.LIMIT_MULTIPLE);
        };
        ASViewer.prototype.debugSaveOptions = function (event) {
            if (event === void 0) { event = null; }
            var xorKey = 53;
            var ba;
            var fname = "options.xml";
            var u8 = FS.readFile("home/" + fname, { encoding: 'binary' });
            if (u8) {
                ba = new global.ByteArray().fromArrayBuffer(u8.buffer);
                ba.position = 0;
            }
            if (!ba) {
                ba = this.mEmptyData;
            }
            if (ba.readUTFBytes(1) != '<') {
                ba.position = 0;
                for (var i = 0; i < ba.length; i++) {
                    ba.set(i, ba.get(i) ^ xorKey);
                }
            }
            try {
                fname = fname.split('.').join('_' + global.AppIcf.read(ASViewer.ICF_ABS_STAT, 'appID') + '.');
                this.mFileReferenceHelper = new global.FileReference;
                this.mFileReferenceHelper.save(ba, fname);
            }
            catch (e) { }
        };
        ASViewer.prototype.debugSendOptionsXML = function (event) {
            if (event === void 0) { event = null; }
            this.doCallback(this.mCbid[ASViewer.CBID_CLOUD_SAVE], this.mEmptyData, this.mEmptyData);
        };
        ASViewer.prototype.debugImportPolls = function (event) {
            if (event === void 0) { event = null; }
            var IMPORT_POLLS = "import_polls";
            this.debugCloudAdmin(IMPORT_POLLS);
        };
        ASViewer.prototype.debugImportPurchase = function (event) {
            if (event === void 0) { event = null; }
            var IMPORT_PURCHASE = "import_purchase";
            this.debugCloudAdmin(IMPORT_PURCHASE);
        };
        ASViewer.prototype.debugCloudAdmin = function (funcName) {
            var ADMIN_FUNCTION = "AdminCall";
            if (!this.mCloud) {
                return;
            }
            if (!(ADMIN_FUNCTION in this.mCloud)) {
                return;
            }
            this.mCloud[ADMIN_FUNCTION](funcName, this.mPopup);
        };
        ASViewer.prototype.updateContextMenu = function () {
            if (global.ContextMenu.isSupported) {
                var menu = new global.ContextMenu;
                if (menu.customItems) {
                    var v = this.getVersion();
                    v += ' ';
                    v += '(';
                    v += global.AppIcf.read(ASViewer.ICF_GAME, "viewer_branch") || 'branch';
                    v += ' ';
                    v += global.AppIcf.read(ASViewer.ICF_GAME, "viewer_revision") || 'revision';
                    v += ')';
                    var item = new global.ContextMenuItem('version: ' + v);
                    item.enabled = false;
                    menu.customItems.push(item);
                    if (global.CONFIG.QA_VERSION) {
                        item = new global.ContextMenuItem('options.xml' + addShortcut.bind(this)('Shift+O'));
                        item.separatorBefore = true;
                        item.addEventListener(global.ContextMenuEvent.MENU_ITEM_SELECT, this.debugSaveOptions.bind(this));
                        menu.customItems.push(item);
                        if (global.CONFIG.LOG) {
                            item = new global.ContextMenuItem(ASViewer.LOG_FILE + addShortcut.bind(this)('Shift+L'));
                            item.addEventListener(global.ContextMenuEvent.MENU_ITEM_SELECT, this.debugSaveViewerLog.bind(this));
                            menu.customItems.push(item);
                            item = new global.ContextMenuItem(ASViewer.PARSE_LOG_FILE + addShortcut.bind(this)('Shift+P'));
                            item.addEventListener(global.ContextMenuEvent.MENU_ITEM_SELECT, this.debugSaveViewerParseLog.bind(this));
                            menu.customItems.push(item);
                            item = new global.ContextMenuItem(ASViewer.MULTIPLAYER_LOG_FILE + addShortcut.bind(this)('Shift+M'));
                            item.addEventListener(global.ContextMenuEvent.MENU_ITEM_SELECT, this.debugSaveViewerMultiplayerLog.bind(this));
                            menu.customItems.push(item);
                        }
                        item = new global.ContextMenuItem('send options to cloud' + addShortcut.bind(this)('Shift+I'));
                        item.separatorBefore = true;
                        item.addEventListener(global.ContextMenuEvent.MENU_ITEM_SELECT, this.debugSendOptionsXML.bind(this));
                        menu.customItems.push(item);
                    }
                    if (global.CONFIG.LOG) {
                        item = new global.ContextMenuItem('send log to server' + global.CrashReport.status + addShortcut.bind(this)('Shift+K'));
                        item.addEventListener(global.ContextMenuEvent.MENU_ITEM_SELECT, this.debugSendViewerLog.bind(this));
                        menu.customItems.push(item);
                    }
                    menu.hideBuiltInItems();
                    this.stage.contextMenu = menu;
                }
            }
            function addShortcut(value) {
                return global.CONFIG.QA_VERSION ? '	' + value : '';
            }
        };
        ASViewer.LOAD_IDLE = 0;
        ASViewer.BEGIN_LOAD_FIRST_SCREEN = 1;
        ASViewer.BEGIN_LOAD_NEXT_SCREEN = 2;
        ASViewer.LOAD_CONFIGS = 3;
        ASViewer.LOAD_PROGRESS_RESOURCES = 4;
        ASViewer.SHOW_SPLASH = 5;
        ASViewer.LOAD_TEXTS = 6;
        ASViewer.LOAD_SCRIPTS = 7;
        ASViewer.LOAD_LAYOUT = 8;
        ASViewer.LOAD_INIT_GLOBAL_SCREENS = 9;
        ASViewer.LOAD_FIRST_SCREEN_RESOURCES = 10;
        ASViewer.LOAD_NEXT_SCREEN_RESOURCES = 11;
        ASViewer.LOAD_ERROR = 12;
        ASViewer.LOAD_COMPLETE = 13;
        ASViewer.WMODE_WINDOW = 'window';
        ASViewer.WMODE_TRANSPARENT = 'transparent';
        ASViewer.WMODE_OPAQUE = 'opaque';
        ASViewer.WMODE_DIRECT = 'direct';
        ASViewer.WMODE_GPU = 'gpu';
        ASViewer.MARKET_FACEBOOK = "webfb";
        ASViewer.MARKET_ODNOKLASSNIKI = "webok";
        ASViewer.MARKET_VKONTAKTE = "webvk";
        ASViewer.MARKET_MAILRU = "webru";
        ASViewer.MARKET_WIZQ = "webwq";
        ASViewer.MARKET_FACEBOOKINSTANT = "webfbinst";
        ASViewer.ICF_DEFAULT = "Default";
        ASViewer.ICF_ABS_STAT = "AbsStat";
        ASViewer.ICF_GAME = "game";
        ASViewer.ICF_GAME_TRACE = "gametrace";
        ASViewer.ICF_CLOUD = "cloud";
        ASViewer.ICF_PUSH = "push";
        ASViewer.ICF_CRASH = "crash";
        ASViewer.ICF_FLASH = "platformflash";
        ASViewer.ICF_FACEBOOK = "s3eFacebook";
        ASViewer.ICF_FLURRY = "flurry";
        ASViewer.GUEST_NONE = 0;
        ASViewer.GUEST_DEFAULT = 1;
        ASViewer.GUEST_QA = 2;
        ASViewer.ASSETS_URL = "assets.zip";
        ASViewer.CLOUD_DEFAULT_INTERVAL = 5000;
        ASViewer.INACTIVE_INTERVAL = 5 * 60 * 1000;
        ASViewer.CBID_FULLSCREEN = "s3eApplicationFullScreenCallback";
        ASViewer.CBID_TEXT_REQUEST = "s3eApplicationTextRequestCallback";
        ASViewer.CBID_RESTORE_CONTEXT = "s3eApplicationRestoreContextCallback";
        ASViewer.CBID_EXTERNAL_COMMAND = "s3eApplicationExternalCommandCallback";
        ASViewer.CBID_CLOUD_SAVE = "s3eApplicationCloudSaveCallback";
        ASViewer.CBID_CLOUD_FORCED_SAVE = "s3eApplicationCloudForcedSaveCallback";
        ASViewer.CBID_CLOUD_EXIT = "s3eApplicationCloudExitCallback";
        ASViewer.CBID_DOWNLOADER = "s3eApplicationDownloadCallback";
        ASViewer.CBID_CLOUD_RECEIVE = "s3eApplicationCloudReceiveCallback";
        ASViewer.CBID_EVENT = "s3eApplicationEventCallback";
        ASViewer.CBID_DOWNLOAD_PACK_PROGRESS = "s3eApplicationDownloadPackProgressCallback";
        ASViewer.CBID_DOWNLOAD_PACK_COMPLETE = "s3eApplicationDownloadPackCompleteCallback";
        ASViewer.CBID_DOWNLOAD_PACK_ERROR = "s3eApplicationDownloadPackErrorCallback";
        ASViewer.CBID_S3E_HTML5_ADS_CALLBACK = "s3eHTML5AdsCallback";
        ASViewer.CBID_PARTNER_CONSOLE_GAME_EVENT = "s3ePartnerConsoleGameEventCallback";
        ASViewer.CBID_PARTNER_CONSOLE_OPTIONS_ARE_RECEIVED = "s3ePartnerConsoleOptionsAreReceivedCallback";
        ASViewer.IPACK_DOWNLOADER_ERROR_UNKNOWN = 1;
        ASViewer.IPACK_DOWNLOADER_ERROR_NO_SERVER_CONNECTION = 2;
        ASViewer.IPACK_DOWNLOADER_ERROR_RESOURCES_NOT_FOUND = 3;
        ASViewer.IPACK_DOWNLOADER_ERROR_NOT_ENOUGH_RAM_MEMORY = 4;
        ASViewer.IPACK_DOWNLOADER_ERROR_NOT_ENOUGH_FILE_SYSTEM_MEMORY = 5;
        ASViewer.IPACK_DOWNLOADER_ERROR_FILE_SYSTEM = 6;
        ASViewer.SENDER_NONE = 0x00000000;
        ASViewer.SENDER_FLURRY = 0x00000001;
        ASViewer.SENDER_ABS = 0x00000002;
        ASViewer.SENDER_MASK_ALL = ASViewer.SENDER_FLURRY | ASViewer.SENDER_ABS;
        ASViewer.LOG_FILE = 'viewer.log';
        ASViewer.PARSE_LOG_FILE = 'parse_all.log';
        ASViewer.MULTIPLAYER_LOG_FILE = 'multiplayer_all.log';
        ASViewer.LOCAL_STORAGE_FILES = [
            'home/options.xml',
            'home/extra.xml'
        ];
        ASViewer.JS_RELOAD = function () {
            document.location.reload(true);
        };
        ASViewer.sStopWhenCrashed = true;
        ASViewer.sStartFrameTime = 0;
        return ASViewer;
    }(global.Sprite));
    global.ASViewer = ASViewer;
})(global || (global = {}));
api.odnoklassniki.events.Event = flash.events.Event;
api.odnoklassniki.sdk.discussions.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
api.odnoklassniki.sdk.errors.Error = global.Error;
api.odnoklassniki.sdk.events.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
api.odnoklassniki.sdk.friends.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
api.odnoklassniki.sdk.messages.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
api.odnoklassniki.sdk.notifications.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
api.odnoklassniki.sdk.share.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
api.odnoklassniki.sdk.users.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
api.odnoklassniki.sdk.widget.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
api.ru.events.Event = flash.events.Event;
api.vk.events.Event = flash.events.Event;
global.getQualifiedClassName = flash.utils.getQualifiedClassName;
com.facebook.graph.data.Error = global.Error;
com.facebook.graph.utils.URLVariables = flash.net.URLVariables;
datas.Dictionary = flash.utils.Dictionary;
deng.fzip.Event = flash.events.Event;
deng.utils.ByteArray = flash.utils.ByteArray;
flash.desktop.Error = global.Error;
flash.display.EventDispatcher = flash.events.EventDispatcher;
flash.display.ArgumentError = global.ArgumentError;
flash.display.Error = global.Error;
flash.display.Event = flash.events.Event;
flash.display.EventPhase = flash.events.EventPhase;
flash.display.MouseEvent = flash.events.MouseEvent;
flash.display.Matrix = flash.geom.Matrix;
flash.display.Point = flash.geom.Point;
flash.display.Rectangle = flash.geom.Rectangle;
flash.display.Transform = flash.geom.Transform;
flash.display.Vector3D = flash.geom.Vector3D;
flash.display.MatrixUtil = flash.utils.MatrixUtil;
flash.display.VertexData = flash.utils.VertexData;
flash.display3D.ByteArray = flash.utils.ByteArray;
flash.display3D.textures.EventDispatcher = flash.events.EventDispatcher;
flash.errors.Error = global.Error;
flash.events.Error = global.Error;
flash.net.EventDispatcher = flash.events.EventDispatcher;
flash.net.Error = global.Error;
flash.system.ByteArray = flash.utils.ByteArray;
flash.system.XML = global.XML;
flash.text.DisplayObject = flash.display.DisplayObject;
flash.text.Capabilities = flash.system.Capabilities;
flash.utils.Error = global.Error;
flash.utils.XML = global.XML;
flash.utils.EventDispatcher = flash.events.EventDispatcher;
flash.__native.Matrix = flash.geom.Matrix;
s3eUtils.Error = global.Error;
s3eUtils.ByteArray = flash.utils.ByteArray;
s3eUtils.ApiCallbackEvent = api.odnoklassniki.events.ApiCallbackEvent;
s3eUtils.RUCallbackEvent = api.ru.events.RUCallbackEvent;
s3eUtils.VKCallbackEvent = api.vk.events.VKCallbackEvent;
s3eUtils.Event = flash.events.Event;
tools.Rectangle = flash.geom.Rectangle;
tools.Error = global.Error;
flash.display.ContextMenu = flash.ui.ContextMenu;
flash.display.IOErrorEvent = flash.events.IOErrorEvent;
flash.display.URLRequest = flash.net.URLRequest;
flash.display.LoaderContext = flash.system.LoaderContext;
flash.display.Base64 = flash.utils.Base64;
flash.display.ByteArray = flash.utils.ByteArray;
tools.Loader = flash.display.Loader;
tools.System = flash.system.System;
api.odnoklassniki.net.ByteArray = flash.utils.ByteArray;
api.odnoklassniki.net.Endian = flash.utils.Endian;
api.odnoklassniki.sdk.photos.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
api.odnoklassniki.sdk.photos.Errors = api.odnoklassniki.sdk.errors.Errors;
com.adobe.crypto.IntUtil = com.adobe.utils.IntUtil;
com.adobe.crypto.ByteArray = flash.utils.ByteArray;
com.facebook.graph.core.Error = global.Error;
com.facebook.graph.core.ExternalInterface = flash.external.ExternalInterface;
com.facebook.graph.core.Batch = com.facebook.graph.data.Batch;
com.facebook.graph.core.FQLMultiQuery = com.facebook.graph.data.FQLMultiQuery;
com.facebook.graph.core.FacebookAuthResponse = com.facebook.graph.data.FacebookAuthResponse;
com.facebook.graph.core.FacebookSession = com.facebook.graph.data.FacebookSession;
com.facebook.graph.core.FacebookBatchRequest = com.facebook.graph.net.FacebookBatchRequest;
com.facebook.graph.core.FacebookRequest = com.facebook.graph.net.FacebookRequest;
com.facebook.graph.core.FQLMultiQueryParser = com.facebook.graph.utils.FQLMultiQueryParser;
com.facebook.graph.core.IResultParser = com.facebook.graph.utils.IResultParser;
com.facebook.graph.core.URLRequestMethod = flash.net.URLRequestMethod;
com.facebook.graph.core.Dictionary = flash.utils.Dictionary;
com.facebook.graph.Error = global.Error;
com.facebook.graph.AbstractFacebook = com.facebook.graph.core.AbstractFacebook;
com.facebook.graph.FacebookJSBridge = com.facebook.graph.core.FacebookJSBridge;
com.facebook.graph.FacebookURLDefaults = com.facebook.graph.core.FacebookURLDefaults;
com.facebook.graph.Batch = com.facebook.graph.data.Batch;
com.facebook.graph.FQLMultiQuery = com.facebook.graph.data.FQLMultiQuery;
com.facebook.graph.FacebookAuthResponse = com.facebook.graph.data.FacebookAuthResponse;
com.facebook.graph.FacebookRequest = com.facebook.graph.net.FacebookRequest;
com.facebook.graph.IResultParser = com.facebook.graph.utils.IResultParser;
com.facebook.graph.ExternalInterface = flash.external.ExternalInterface;
com.facebook.graph.URLRequest = flash.net.URLRequest;
com.facebook.graph.URLRequestMethod = flash.net.URLRequestMethod;
com.facebook.graph.URLVariables = flash.net.URLVariables;
com.facebook.graph.navigateToURL = flash.net.navigateToURL;
com.facebook.graph.Dictionary = flash.utils.Dictionary;
com.facebook.graph.setTimeout = flash.utils.setTimeout;
com.facebook.graph.utils.ByteArray = flash.utils.ByteArray;
com.facebook.graph.utils.Endian = flash.utils.Endian;
flash.display.GLCanvasRenderingContext2D = flash.__native.GLCanvasRenderingContext2D;
flash.display.ColorTransform = flash.geom.ColorTransform;
flash.events.InteractiveObject = flash.display.InteractiveObject;
flash.events.ByteArray = flash.utils.ByteArray;
flash.system.Error = global.Error;
flash.system.Sound = flash.media.Sound;
flash.text.EventDispatcher = flash.events.EventDispatcher;
flash.ui.NativeMenuItem = flash.display.NativeMenuItem;
flash.ui.ContextMenuEvent = flash.events.ContextMenuEvent;
flash.ui.Error = global.Error;
flash.ui.Capabilities = flash.system.Capabilities;
flash.ui.BitmapData = flash.display.BitmapData;
flash.ui.Point = flash.geom.Point;
flash.utils.IOError = flash.errors.IOError;
flash.utils.Stage = flash.display.Stage;
flash.__native.BitmapData = flash.display.BitmapData;
flash.__native.Texture = flash.display3D.textures.Texture;
flash.__native.GraphicsPath = flash.display.GraphicsPath;
flash.__native.Context3D = flash.display3D.Context3D;
flash.__native.IndexBuffer3D = flash.display3D.IndexBuffer3D;
flash.__native.VertexBuffer3D = flash.display3D.VertexBuffer3D;
global.ByteArray = flash.utils.ByteArray;
s3eUtils.TextField = flash.text.TextField;
s3eUtils.TextFormat = flash.text.TextFormat;
tools.fps.Error = global.Error;
tools.init.Error = global.Error;
api.odnoklassniki.sdk.stream.EventStats = global.EventStats;
api.odnoklassniki.sdk.stream.ApiCallbackEvent = api.odnoklassniki.events.ApiCallbackEvent;
api.odnoklassniki.sdk.stream.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
com.facebook.graph.data.FacebookLimits = com.facebook.graph.core.FacebookLimits;
datas.EventStats = global.EventStats;
datas.GLog = global.GLog;
datas.ErrorEvent = flash.events.ErrorEvent;
datas.Event = flash.events.Event;
datas.EventDispatcher = flash.events.EventDispatcher;
datas.ProgressEvent = flash.events.ProgressEvent;
datas.ByteArray = flash.utils.ByteArray;
flash.display.SoundTransform = flash.media.SoundTransform;
flash.display3D.textures.BitmapData = flash.display.BitmapData;
flash.display3D.textures.ByteArray = flash.utils.ByteArray;
flash.external.Error = global.Error;
flash.external.XML = global.XML;
flash.external.XMLList = global.XMLList;
flash.geom.Error = global.Error;
flash.media.ByteArray = flash.utils.ByteArray;
flash.net.ByteArray = flash.utils.ByteArray;
flash.system.DisplayObjectContainer = flash.display.DisplayObjectContainer;
s3eUtils.SecurityError = global.SecurityError;
s3eUtils.Loader = flash.display.Loader;
s3eUtils.ExternalInterface = flash.external.ExternalInterface;
global.ExternalInterface = flash.external.ExternalInterface;
tools.GLog = global.GLog;
tools.ByteArray = flash.utils.ByteArray;
tools.IOErrorEvent = flash.events.IOErrorEvent;
tools.URLLoaderDataFormat = flash.net.URLLoaderDataFormat;
tools.Keyboard = flash.ui.Keyboard;
tools.Dictionary = flash.utils.Dictionary;
com.facebook.graph.controls.Sprite = flash.display.Sprite;
com.facebook.graph.controls.Event = flash.events.Event;
com.facebook.graph.controls.TextField = flash.text.TextField;
com.facebook.graph.controls.TextFormat = flash.text.TextFormat;
global.setTimeout = flash.utils.setTimeout;
flash.events.DisplayObject = flash.display.DisplayObject;
flash.events.Point = flash.geom.Point;
flash.media.EventDispatcher = flash.events.EventDispatcher;
flash.media.BitmapData = flash.display.BitmapData;
flash.media.Rectangle = flash.geom.Rectangle;
flash.utils.Matrix = flash.geom.Matrix;
flash.utils.Point = flash.geom.Point;
flash.utils.Rectangle = flash.geom.Rectangle;
global.Parse = s3eUtils.Parse;
global.Facebook = com.facebook.graph.Facebook;
s3eUtils.Sprite = flash.display.Sprite;
s3eUtils.GLog = global.GLog;
s3eUtils.URLVariables = flash.net.URLVariables;
tools.ASViewer = global.ASViewer;
tools.getTimer = flash.utils.getTimer;
global.Dictionary = flash.utils.Dictionary;
flash.media.Error = global.Error;
flash.media.Event = flash.events.Event;
flash.utils.Matrix3D = flash.geom.Matrix3D;
flash.utils.Vector3D = flash.geom.Vector3D;
flash.utils.TimerEvent = flash.events.TimerEvent;
s3eUtils.Bitmap = flash.display.Bitmap;
s3eUtils.BitmapData = flash.display.BitmapData;
s3eUtils.DisplayObject = flash.display.DisplayObject;
s3eUtils.Stage = flash.display.Stage;
tools.EventStats = global.EventStats;
tools.Stage = flash.display.Stage;
tools.StageDisplayState = flash.display.StageDisplayState;
tools.MouseEvent = flash.events.MouseEvent;
tools.State = tools.init.State;
tools.Stage3D = flash.display.Stage3D;
tools.Context3DRenderMode = flash.display3D.Context3DRenderMode;
tools.ErrorEvent = flash.events.ErrorEvent;
api.wizq.Error = global.Error;
api.wizq.CONFIG = global.CONFIG;
api.wizq.ExternalInterfaceAsync = global.ExternalInterfaceAsync;
api.wizq.GLog = global.GLog;
api.wizq.EventDispatcher = flash.events.EventDispatcher;
api.wizq.ExternalInterface = flash.external.ExternalInterface;
flash.display.Context3D = flash.display3D.Context3D;
flash.display.ErrorEvent = flash.events.ErrorEvent;
flash.display.Capabilities = flash.system.Capabilities;
flash.net.Event = flash.events.Event;
flash.net.clearTimeout = flash.utils.clearTimeout;
flash.net.setTimeout = flash.utils.setTimeout;
flash.__native.Graphics = flash.display.Graphics;
flash.__native.ColorTransform = flash.geom.ColorTransform;
flash.__native.TextFormat = flash.text.TextFormat;
global.DisplayObject = flash.display.DisplayObject;
flash.display.UncaughtErrorEvents = flash.events.UncaughtErrorEvents;
flash.display.URLVariables = flash.net.URLVariables;
flash.display.ApplicationDomain = flash.system.ApplicationDomain;
flash.geom.DisplayObject = flash.display.DisplayObject;
tools.CONFIG = global.CONFIG;
tools.BitmapData = flash.display.BitmapData;
tools.Matrix = flash.geom.Matrix;
tools.Mouse = flash.ui.Mouse;
tools.MouseCursorData = flash.ui.MouseCursorData;
global.URLVariablesGlobal = s3eUtils.URLVariablesGlobal;
global.Capabilities = flash.system.Capabilities;
deng.fzip.Error = global.Error;
deng.fzip.ChecksumUtil = deng.utils.ChecksumUtil;
deng.fzip.ByteArray = flash.utils.ByteArray;
deng.fzip.Dictionary = flash.utils.Dictionary;
deng.fzip.Endian = flash.utils.Endian;
deng.fzip.IDataInput = flash.utils.IDataInput;
deng.fzip.IDataOutput = flash.utils.IDataOutput;
tools.MouseCursor = flash.ui.MouseCursor;
api.odnoklassniki.core.Error = global.Error;
api.odnoklassniki.core.ApiCallbackEvent = api.odnoklassniki.events.ApiCallbackEvent;
api.odnoklassniki.core.ApiServerEvent = api.odnoklassniki.events.ApiServerEvent;
api.odnoklassniki.core.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
api.odnoklassniki.core.MD5 = com.adobe.crypto.MD5;
api.odnoklassniki.core.StatusEvent = flash.events.StatusEvent;
api.odnoklassniki.core.TimerEvent = flash.events.TimerEvent;
api.odnoklassniki.core.LocalConnection = flash.net.LocalConnection;
api.odnoklassniki.core.Timer = flash.utils.Timer;
s3eUtils.CONFIG = global.CONFIG;
s3eUtils.TimerEvent = flash.events.TimerEvent;
s3eUtils.Timer = flash.utils.Timer;
s3eUtils.setTimeout = flash.utils.setTimeout;
flash.net.HTTPStatusEvent = flash.events.HTTPStatusEvent;
flash.net.IOErrorEvent = flash.events.IOErrorEvent;
flash.net.ProgressEvent = flash.events.ProgressEvent;
flash.net.SecurityErrorEvent = flash.events.SecurityErrorEvent;
tools.Event = flash.events.Event;
tools.URLLoader = flash.net.URLLoader;
tools.URLRequest = flash.net.URLRequest;
tools.clearTimeout = flash.utils.clearTimeout;
tools.setTimeout = flash.utils.setTimeout;
tools.Parse = s3eUtils.Parse;
api.ru.Error = global.Error;
api.ru.CONFIG = global.CONFIG;
api.ru.ExternalInterfaceAsync = global.ExternalInterfaceAsync;
api.ru.GLog = global.GLog;
api.ru.RUCallbackEvent = api.ru.events.RUCallbackEvent;
api.ru.RUServerEvent = api.ru.events.RUServerEvent;
api.ru.EventDispatcher = flash.events.EventDispatcher;
api.ru.ExternalInterface = flash.external.ExternalInterface;
com.facebook.graph.net.EventStats = global.EventStats;
com.facebook.graph.net.PostRequest = com.facebook.graph.utils.PostRequest;
com.facebook.graph.net.Bitmap = flash.display.Bitmap;
com.facebook.graph.net.BitmapData = flash.display.BitmapData;
com.facebook.graph.net.Event = flash.events.Event;
com.facebook.graph.net.IOErrorEvent = flash.events.IOErrorEvent;
com.facebook.graph.net.SecurityErrorEvent = flash.events.SecurityErrorEvent;
com.facebook.graph.net.FileReference = flash.net.FileReference;
com.facebook.graph.net.URLLoader = flash.net.URLLoader;
com.facebook.graph.net.URLRequest = flash.net.URLRequest;
com.facebook.graph.net.URLVariables = flash.net.URLVariables;
com.facebook.graph.net.ByteArray = flash.utils.ByteArray;
com.facebook.graph.net.PNGEncoderOptions = flash.display.PNGEncoderOptions;
com.facebook.graph.net.DataEvent = flash.events.DataEvent;
com.facebook.graph.net.ErrorEvent = flash.events.ErrorEvent;
com.facebook.graph.net.URLRequestMethod = flash.net.URLRequestMethod;
flash.net.ArgumentError = global.ArgumentError;
flash.net.XML = global.XML;
flash.ui.ArgumentError = global.ArgumentError;
flash.ui.PNGEncoderOptions = flash.display.PNGEncoderOptions;
flash.ui.Base64 = flash.utils.Base64;
flash.ui.ByteArray = flash.utils.ByteArray;
flash.__native.GraphicsEndFill = flash.display.GraphicsEndFill;
flash.__native.GraphicsStroke = flash.display.GraphicsStroke;
flash.__native.IGraphicsData = flash.display.IGraphicsData;
s3eUtils.ErrorEvent = flash.events.ErrorEvent;
s3eUtils.IOErrorEvent = flash.events.IOErrorEvent;
s3eUtils.SecurityErrorEvent = flash.events.SecurityErrorEvent;
s3eUtils.URLLoader = flash.net.URLLoader;
s3eUtils.URLRequest = flash.net.URLRequest;
api.odnoklassniki.Error = global.Error;
api.odnoklassniki.OdnoklassnikiSession = api.odnoklassniki.core.OdnoklassnikiSession;
api.odnoklassniki.ApiServerEvent = api.odnoklassniki.events.ApiServerEvent;
api.odnoklassniki.OdnoklassnikiRequest = api.odnoklassniki.net.OdnoklassnikiRequest;
api.odnoklassniki.DisplayObject = flash.display.DisplayObject;
api.odnoklassniki.LoaderInfo = flash.display.LoaderInfo;
api.odnoklassniki.EventDispatcher = flash.events.EventDispatcher;
api.odnoklassniki.Dictionary = flash.utils.Dictionary;
api.odnoklassniki.XML = global.XML;
api.odnoklassniki.CONFIG = global.CONFIG;
api.odnoklassniki.ExternalInterfaceAsync = global.ExternalInterfaceAsync;
api.odnoklassniki.GLog = global.GLog;
api.odnoklassniki.ApiCallbackEvent = api.odnoklassniki.events.ApiCallbackEvent;
api.odnoklassniki.ExternalInterface = flash.external.ExternalInterface;
datas.CONFIG = global.CONFIG;
datas.ASViewer = global.ASViewer;
datas.IOErrorEvent = flash.events.IOErrorEvent;
datas.SecurityErrorEvent = flash.events.SecurityErrorEvent;
datas.URLLoader = flash.net.URLLoader;
datas.URLLoaderDataFormat = flash.net.URLLoaderDataFormat;
datas.URLRequest = flash.net.URLRequest;
flash.text.Graphics = flash.display.Graphics;
flash.text.InteractiveObject = flash.display.InteractiveObject;
flash.text.Event = flash.events.Event;
flash.text.MouseEvent = flash.events.MouseEvent;
flash.text.Matrix = flash.geom.Matrix;
flash.text.Rectangle = flash.geom.Rectangle;
s3eUtils.URLRequestHeader = flash.net.URLRequestHeader;
s3eUtils.URLRequestMethod = flash.net.URLRequestMethod;
s3eUtils.Dictionary = flash.utils.Dictionary;
s3eUtils.clearTimeout = flash.utils.clearTimeout;
deng.fzip.EventDispatcher = flash.events.EventDispatcher;
deng.fzip.IOErrorEvent = flash.events.IOErrorEvent;
deng.fzip.Bitmap = flash.display.Bitmap;
deng.fzip.BitmapData = flash.display.BitmapData;
deng.fzip.DisplayObject = flash.display.DisplayObject;
deng.fzip.Loader = flash.display.Loader;
flash.display.BitmapFilter = flash.filters.BitmapFilter;
com.facebook.graph.net.FacebookURLDefaults = com.facebook.graph.core.FacebookURLDefaults;
com.facebook.graph.net.Batch = com.facebook.graph.data.Batch;
com.facebook.graph.net.BatchItem = com.facebook.graph.data.BatchItem;
datas.Error = global.Error;
datas.Sound = flash.media.Sound;
datas.SoundChannel = flash.media.SoundChannel;
flash.media.IOErrorEvent = flash.events.IOErrorEvent;
flash.media.ProgressEvent = flash.events.ProgressEvent;
flash.media.SecurityErrorEvent = flash.events.SecurityErrorEvent;
flash.media.URLRequest = flash.net.URLRequest;
flash.media.Capabilities = flash.system.Capabilities;
flash.net.IDataInput = flash.utils.IDataInput;
flash.net.Capabilities = flash.system.Capabilities;
flash.ui.Graphics = flash.display.Graphics;
flash.ui.NativeMenu = flash.display.NativeMenu;
flash.ui.Shape = flash.display.Shape;
flash.ui.Sprite = flash.display.Sprite;
flash.ui.Stage = flash.display.Stage;
flash.ui.MouseEvent = flash.events.MouseEvent;
flash.ui.URLRequest = flash.net.URLRequest;
flash.ui.TextField = flash.text.TextField;
flash.ui.CSSColor = flash.utils.CSSColor;
flash.ui.Dictionary = flash.utils.Dictionary;
global.Sprite = flash.display.Sprite;
global.Event = flash.events.Event;
global.MouseEvent = flash.events.MouseEvent;
global.System = flash.system.System;
global.TextField = flash.text.TextField;
global.TextFormat = flash.text.TextFormat;
global.getTimer = flash.utils.getTimer;
global.Timer = flash.utils.Timer;
api.odnoklassniki.net.Error = global.Error;
api.odnoklassniki.net.EventStats = global.EventStats;
api.odnoklassniki.net.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
api.odnoklassniki.net.Bitmap = flash.display.Bitmap;
api.odnoklassniki.net.BitmapData = flash.display.BitmapData;
api.odnoklassniki.net.Event = flash.events.Event;
api.odnoklassniki.net.IOErrorEvent = flash.events.IOErrorEvent;
api.odnoklassniki.net.ProgressEvent = flash.events.ProgressEvent;
api.odnoklassniki.net.SecurityErrorEvent = flash.events.SecurityErrorEvent;
api.odnoklassniki.net.URLLoader = flash.net.URLLoader;
api.odnoklassniki.net.URLRequest = flash.net.URLRequest;
api.odnoklassniki.net.URLRequestHeader = flash.net.URLRequestHeader;
api.odnoklassniki.net.URLRequestMethod = flash.net.URLRequestMethod;
api.odnoklassniki.net.URLVariables = flash.net.URLVariables;
api.odnoklassniki.net.PNGEncoderOptions = flash.display.PNGEncoderOptions;
deng.fzip.HTTPStatusEvent = flash.events.HTTPStatusEvent;
deng.fzip.ProgressEvent = flash.events.ProgressEvent;
deng.fzip.SecurityErrorEvent = flash.events.SecurityErrorEvent;
deng.fzip.URLRequest = flash.net.URLRequest;
deng.fzip.URLStream = flash.net.URLStream;
api.vk.Error = global.Error;
api.vk.CONFIG = global.CONFIG;
api.vk.EventStats = global.EventStats;
api.vk.ExternalInterfaceAsync = global.ExternalInterfaceAsync;
api.vk.GLog = global.GLog;
api.vk.VKCallbackEvent = api.vk.events.VKCallbackEvent;
api.vk.VKServerEvent = api.vk.events.VKServerEvent;
api.vk.Event = flash.events.Event;
api.vk.EventDispatcher = flash.events.EventDispatcher;
api.vk.IOErrorEvent = flash.events.IOErrorEvent;
api.vk.SecurityErrorEvent = flash.events.SecurityErrorEvent;
api.vk.ExternalInterface = flash.external.ExternalInterface;
api.vk.URLLoader = flash.net.URLLoader;
api.vk.URLLoaderDataFormat = flash.net.URLLoaderDataFormat;
api.vk.URLRequest = flash.net.URLRequest;
api.vk.ByteArray = flash.utils.ByteArray;
api.vk.MultipartURLLoader = s3eUtils.MultipartURLLoader;
datas.ErrorType = errors.ErrorType;
datas.HTTPStatusEvent = flash.events.HTTPStatusEvent;
datas.Endian = flash.utils.Endian;
datas.getTimer = flash.utils.getTimer;
datas.CrashParam = tools.CrashParam;
datas.mbsec = tools.mbsec;
s3eUtils.EventStats = global.EventStats;
s3eUtils.IllegalOperationError = flash.errors.IllegalOperationError;
s3eUtils.EventDispatcher = flash.events.EventDispatcher;
s3eUtils.HTTPStatusEvent = flash.events.HTTPStatusEvent;
s3eUtils.ProgressEvent = flash.events.ProgressEvent;
s3eUtils.URLLoaderDataFormat = flash.net.URLLoaderDataFormat;
s3eUtils.Endian = flash.utils.Endian;
s3eUtils.clearInterval = flash.utils.clearInterval;
flash.__native.Stage = flash.display.Stage;
flash.__native.Context3DBlendFactor = flash.display3D.Context3DBlendFactor;
flash.__native.Context3DProgramType = flash.display3D.Context3DProgramType;
flash.__native.Context3DTextureFormat = flash.display3D.Context3DTextureFormat;
flash.__native.Context3DTriangleFace = flash.display3D.Context3DTriangleFace;
flash.__native.Context3DVertexBufferFormat = flash.display3D.Context3DVertexBufferFormat;
flash.__native.Program3D = flash.display3D.Program3D;
flash.__native.Event = flash.events.Event;
flash.__native.Matrix3D = flash.geom.Matrix3D;
flash.__native.Rectangle = flash.geom.Rectangle;
flash.__native.ByteArray = flash.utils.ByteArray;
s3eUtils.toMb = global.toMb;
s3eUtils.FrameLabel = flash.display.FrameLabel;
s3eUtils.MovieClip = flash.display.MovieClip;
s3eUtils.Matrix = flash.geom.Matrix;
s3eUtils.Point = flash.geom.Point;
s3eUtils.Rectangle = flash.geom.Rectangle;
flash.display3D.BitmapData = flash.display.BitmapData;
flash.display3D.Stage = flash.display.Stage;
flash.display3D.CubeTexture = flash.display3D.textures.CubeTexture;
flash.display3D.RectangleTexture = flash.display3D.textures.RectangleTexture;
flash.display3D.Texture = flash.display3D.textures.Texture;
flash.display3D.TextureBase = flash.display3D.textures.TextureBase;
flash.display3D.VideoTexture = flash.display3D.textures.VideoTexture;
flash.display3D.EventDispatcher = flash.events.EventDispatcher;
flash.display3D.Matrix3D = flash.geom.Matrix3D;
flash.display3D.Rectangle = flash.geom.Rectangle;
flash.display3D.StageDisplayState = flash.display.StageDisplayState;
tools.SocialStats = global.SocialStats;
tools.toMb = global.toMb;
tools.AssetsData = datas.AssetsData;
tools.DataImage = datas.DataImage;
tools.ErrorType = errors.ErrorType;
tools.Capabilities = flash.system.Capabilities;
tools.AppIcf = s3eUtils.AppIcf;
tools.Online = s3eUtils.Online;
tools.FrameRateStats = tools.fps.FrameRateStats;
global.Loader = flash.display.Loader;
global.MovieClip = flash.display.MovieClip;
global.StageAlign = flash.display.StageAlign;
global.StageScaleMode = flash.display.StageScaleMode;
global.IOErrorEvent = flash.events.IOErrorEvent;
global.ProgressEvent = flash.events.ProgressEvent;
global.Rectangle = flash.geom.Rectangle;
global.URLRequest = flash.net.URLRequest;
global.Security = flash.system.Security;
global.getDefinitionByName = flash.utils.getDefinitionByName;
global.ErrorEvent = flash.events.ErrorEvent;
datas.Bitmap = flash.display.Bitmap;
datas.BitmapData = flash.display.BitmapData;
datas.Point = flash.geom.Point;
datas.Rectangle = flash.geom.Rectangle;
datas.ImageDecodingPolicy = flash.system.ImageDecodingPolicy;
datas.LoaderContext = flash.system.LoaderContext;
datas.clearTimeout = flash.utils.clearTimeout;
datas.setTimeout = flash.utils.setTimeout;
datas.CursorManager = tools.CursorManager;
datas.CustomLoader = tools.CustomLoader;
datas.QueueItem = tools.QueueItem;
datas.Tests = tools.Tests;
datas.getNextPowerOfTwo = tools.getNextPowerOfTwo;
flash.display.BaseRenderer = flash.__native.BaseRenderer;
flash.display.IRenderer = flash.__native.IRenderer;
flash.display.WebGLRenderer = flash.__native.WebGLRenderer;
flash.display.FullScreenEvent = flash.events.FullScreenEvent;
flash.display.KeyboardEvent = flash.events.KeyboardEvent;
flash.display.TouchEvent = flash.events.TouchEvent;
flash.display.UncaughtErrorEvent = flash.events.UncaughtErrorEvent;
flash.display.ExternalInterface = flash.external.ExternalInterface;
flash.display.Sound = flash.media.Sound;
flash.display.URLStream = flash.net.URLStream;
flash.display.Keyboard = flash.ui.Keyboard;
flash.display.getTimer = flash.utils.getTimer;
flash.display.setTimeout = flash.utils.setTimeout;
flash.display.Dictionary = flash.utils.Dictionary;
flash.display.StageOrientationEvent = flash.events.StageOrientationEvent;
flash.display.MouseCursor = flash.ui.MouseCursor;
flash.display.Mouse = flash.ui.Mouse;
global.StageDisplayState = flash.display.StageDisplayState;
global.EventDispatcher = flash.events.EventDispatcher;
global.FbDialogRequest = s3eSocial.FbDialogRequest;
global.FbGraphRequest = s3eSocial.FbGraphRequest;
global.State = tools.init.State;
global.SecurityErrorEvent = flash.events.SecurityErrorEvent;
global.URLLoader = flash.net.URLLoader;
global.URLRequestMethod = flash.net.URLRequestMethod;
global.URLVariables = flash.net.URLVariables;
global.HTMLUtils = s3eUtils.HTMLUtils;
global.Online = s3eUtils.Online;
global.WQJSBridge = api.wizq.WQJSBridge;
global.clearTimeout = flash.utils.clearTimeout;
global.MD5 = com.adobe.crypto.MD5;
global.URLLoaderDataFormat = flash.net.URLLoaderDataFormat;
global.AppIcf = s3eUtils.AppIcf;
global.OdnoklassnikiJSBridge = api.odnoklassniki.OdnoklassnikiJSBridge;
global.ApiCallbackEvent = api.odnoklassniki.events.ApiCallbackEvent;
global.getApiCallbackEvent = s3eUtils.getApiCallbackEvent;
global.RUJSBridge = api.ru.RUJSBridge;
global.RUCallbackEvent = api.ru.events.RUCallbackEvent;
global.getRUCallbackEvent = s3eUtils.getRUCallbackEvent;
global.VKJSBridge = api.vk.VKJSBridge;
global.VKCallbackEvent = api.vk.events.VKCallbackEvent;
global.VKServerEvent = api.vk.events.VKServerEvent;
global.SHttpSecure = s3eUtils.SHttpSecure;
global.getVKCallbackEvent = s3eUtils.getVKCallbackEvent;
global.RUServerEvent = api.ru.events.RUServerEvent;
global.ApiServerEvent = api.odnoklassniki.events.ApiServerEvent;
global.AssetsData = datas.AssetsData;
global.PackInfo = datas.PackInfo;
global.DataAbstract = datas.DataAbstract;
global.DataFile = datas.DataFile;
global.DataImage = datas.DataImage;
global.DataSound = datas.DataSound;
global.FZip = deng.fzip.FZip;
global.FZipFile = deng.fzip.FZipFile;
global.ErrorType = errors.ErrorType;
global.Bitmap = flash.display.Bitmap;
global.BitmapData = flash.display.BitmapData;
global.LoaderInfo = flash.display.LoaderInfo;
global.Stage3D = flash.display.Stage3D;
global.Context3D = flash.display3D.Context3D;
global.Context3DCompareMode = flash.display3D.Context3DCompareMode;
global.Context3DRenderMode = flash.display3D.Context3DRenderMode;
global.ContextMenuEvent = flash.events.ContextMenuEvent;
global.FullScreenEvent = flash.events.FullScreenEvent;
global.KeyboardEvent = flash.events.KeyboardEvent;
global.SoundChannel = flash.media.SoundChannel;
global.SoundTransform = flash.media.SoundTransform;
global.FileReference = flash.net.FileReference;
global.SharedObject = flash.net.SharedObject;
global.URLRequestHeader = flash.net.URLRequestHeader;
global.URLStream = flash.net.URLStream;
global.navigateToURL = flash.net.navigateToURL;
global.ImageDecodingPolicy = flash.system.ImageDecodingPolicy;
global.LoaderContext = flash.system.LoaderContext;
global.ContextMenu = flash.ui.ContextMenu;
global.ContextMenuItem = flash.ui.ContextMenuItem;
global.Keyboard = flash.ui.Keyboard;
global.Mouse = flash.ui.Mouse;
global.Base64 = flash.utils.Base64;
global.Endian = flash.utils.Endian;
global.Blocker = s3eUtils.Blocker;
global.OnlineURL = s3eUtils.OnlineURL;
global.Popup = s3eUtils.Popup;
global.SnappedSWF = s3eUtils.SnappedSWF;
global.getReconnectInterval = s3eUtils.getReconnectInterval;
global.ARectangle = tools.ARectangle;
global.CacheService = tools.CacheService;
global.CommonBuffers = tools.CommonBuffers;
global.CrashParam = tools.CrashParam;
global.CrashReport = tools.CrashReport;
global.CursorManager = tools.CursorManager;
global.ExtendedLoader = tools.ExtendedLoader;
global.ExtendedURLLoader = tools.ExtendedURLLoader;
global.KeyboardMap = tools.KeyboardMap;
global.MouseWheel = tools.MouseWheel;
global.ProfileSupport = tools.ProfileSupport;
global.Tests = tools.Tests;
global.cloudErrorCode = tools.cloudErrorCode;
global.FrameRateStats = tools.fps.FrameRateStats;
global.gc = tools.gc;
global.getNextPowerOfTwo = tools.getNextPowerOfTwo;
global.PreloadManager = tools.init.PreloadManager;
global.UncaughtErrorEvent = flash.events.UncaughtErrorEvent;
global.HTTPStatusEvent = flash.events.HTTPStatusEvent;
global.Odnoklassniki = api.odnoklassniki.Odnoklassniki;
global.Stream = api.odnoklassniki.sdk.stream.Stream;
global.StatusEvent = flash.events.StatusEvent;
global.Transform = flash.geom.Transform;
global.Sound = flash.media.Sound;
